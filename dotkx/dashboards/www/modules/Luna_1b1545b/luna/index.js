/*! For license information please see index.js.LICENSE.txt */
(()=>{var e,t,n,r,i={95318:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},87757:(e,t,n)=>{e.exports=n(35666)},50209:e=>{var t=e.exports={};t.onSetup=function(){return this.setActionableState(),{}},t.toDisplayFeatures=function(e,t,n){n(t)}},1307:function(e,t,n){e.exports=function(){"use strict";var e=function(e,t){var n={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},r={on:function(e,t,r){if(void 0===n[e])throw new Error("Invalid event type: "+e);n[e].push({selector:t,fn:r})},render:function(e){t.store.featureChanged(e)}},i=function(e,i){for(var o=n[e],a=o.length;a--;){var s=o[a];if(s.selector(i)){s.fn.call(r,i)||t.store.render(),t.ui.updateMapClasses();break}}};return e.start.call(r),{render:e.render,stop:function(){e.stop&&e.stop()},trash:function(){e.trash&&(e.trash(),t.store.render())},combineFeatures:function(){e.combineFeatures&&e.combineFeatures()},uncombineFeatures:function(){e.uncombineFeatures&&e.uncombineFeatures()},drag:function(e){i("drag",e)},click:function(e){i("click",e)},mousemove:function(e){i("mousemove",e)},mousedown:function(e){i("mousedown",e)},mouseup:function(e){i("mouseup",e)},mouseout:function(e){i("mouseout",e)},keydown:function(e){i("keydown",e)},keyup:function(e){i("keyup",e)},touchstart:function(e){i("touchstart",e)},touchmove:function(e){i("touchmove",e)},touchend:function(e){i("touchend",e)},tap:function(e){i("tap",e)}}},t=6378137;function r(e){var t=0;if(e&&e.length>0){t+=Math.abs(i(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(i(e[n]))}return t}function i(e){var n,r,i,a,s,l,c=0,u=e.length;if(u>2){for(l=0;l<u;l++)l===u-2?(i=u-2,a=u-1,s=0):l===u-1?(i=u-1,a=0,s=1):(i=l,a=l+1,s=l+2),n=e[i],r=e[a],c+=(o(e[s][0])-o(n[0]))*Math.sin(o(r[1]));c=c*t*t/2}return c}function o(e){return e*Math.PI/180}var a=function e(t){var n,i=0;switch(t.type){case"Polygon":return r(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)i+=r(t.coordinates[n]);return i;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<t.geometries.length;n++)i+=e(t.geometries[n]);return i}},s="active",l="mapbox-gl-draw-hot",c="mapbox-gl-draw-cold",u="add",h="move",f="pointer",p="none",d={POLYGON:"polygon",LINE:"line_string",POINT:"point"},m="Feature",g="Polygon",y="LineString",v="Point",b="FeatureCollection",_="Multi",x={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},A="draw.create",w="draw.update",C="feature",E="midpoint",S="vertex",T="true",B="false",k=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],M={Point:0,LineString:1,Polygon:2};function P(e,t){var n=M[e.geometry.type]-M[t.geometry.type];return 0===n&&e.geometry.type===g?e.area-t.area:n}function I(e){if(this._items={},this._nums={},this._length=e?e.length:0,e)for(var t=0,n=e.length;t<n;t++)this.add(e[t]),void 0!==e[t]&&("string"==typeof e[t]?this._items[e[t]]=t:this._nums[e[t]]=t)}I.prototype.add=function(e){return this.has(e)||(this._length++,"string"==typeof e?this._items[e]=this._length:this._nums[e]=this._length),this},I.prototype.delete=function(e){return!1===this.has(e)||(this._length--,delete this._items[e],delete this._nums[e]),this},I.prototype.has=function(e){return!("string"!=typeof e&&"number"!=typeof e||void 0===this._items[e]&&void 0===this._nums[e])},I.prototype.values=function(){var e=this,t=[];return Object.keys(this._items).forEach((function(n){t.push({k:n,v:e._items[n]})})),Object.keys(this._nums).forEach((function(n){t.push({k:JSON.parse(n),v:e._nums[n]})})),t.sort((function(e,t){return e.v-t.v})).map((function(e){return e.k}))},I.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var O=[C,E,S],D={click:function(e,t,n){return z(e,t,n,n.options.clickBuffer)},touch:function(e,t,n){return z(e,t,n,n.options.touchBuffer)}};function z(e,t,n,r){if(null===n.map)return[];var i=e?function(e,t){return void 0===t&&(t=0),[[e.point.x-t,e.point.y-t],[e.point.x+t,e.point.y+t]]}(e,r):t,o={};n.options.styles&&(o.layers=n.options.styles.map((function(e){return e.id})));var s=n.map.queryRenderedFeatures(i,o).filter((function(e){return-1!==O.indexOf(e.properties.meta)})),l=new I,c=[];return s.forEach((function(e){var t=e.properties.id;l.has(t)||(l.add(t),c.push(e))})),function(e){return e.map((function(e){return e.geometry.type===g&&(e.area=a({type:m,property:{},geometry:e.geometry})),e})).sort(P).map((function(e){return delete e.area,e}))}(c)}function L(e,t){var n=D.click(e,null,t),r={mouse:p};return n[0]&&(r.mouse=n[0].properties.active===T?h:f,r.feature=n[0].properties.meta),-1!==t.events.currentModeName().indexOf("draw")&&(r.mouse=u),t.ui.queueMapClasses(r),t.ui.updateMapClasses(),n[0]}function R(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}function F(e,t,n){void 0===n&&(n={});var r=null!=n.fineTolerance?n.fineTolerance:4,i=null!=n.grossTolerance?n.grossTolerance:12,o=null!=n.interval?n.interval:500;e.point=e.point||t.point,e.time=e.time||t.time;var a=R(e.point,t.point);return a<r||a<i&&t.time-e.time<o}function U(e,t,n){void 0===n&&(n={});var r=null!=n.tolerance?n.tolerance:25,i=null!=n.interval?n.interval:250;return e.point=e.point||t.point,e.time=e.time||t.time,R(e.point,t.point)<r&&t.time-e.time<i}function N(e,t){return e(t={exports:{}},t.exports),t.exports}var j=N((function(e){var t=e.exports=function(e,n){if(n||(n=16),void 0===e&&(e=128),e<=0)return"0";for(var r=Math.log(Math.pow(2,e))/Math.log(n),i=2;r===1/0;i*=2)r=Math.log(Math.pow(2,e/i))/Math.log(n)*i;var o=r-Math.floor(r),a="";for(i=0;i<Math.floor(r);i++)a=Math.floor(Math.random()*n).toString(n)+a;if(o){var s=Math.pow(n,o);a=Math.floor(Math.random()*s).toString(n)+a}var l=parseInt(a,n);return l!==1/0&&l>=Math.pow(2,e)?t(e,n):a};t.rack=function(e,n,r){var i=function(i){var a=0;do{if(a++>10){if(!r)throw new Error("too many ID collisions, use more bits");e+=r}var s=t(e,n)}while(Object.hasOwnProperty.call(o,s));return o[s]=i,s},o=i.hats={};return i.get=function(e){return i.hats[e]},i.set=function(e,t){return i.hats[e]=t,i},i.bits=e||128,i.base=n||16,i}})),V=function(e,t){this.ctx=e,this.properties=t.properties||{},this.coordinates=t.geometry.coordinates,this.id=t.id||j(),this.type=t.geometry.type};V.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},V.prototype.incomingCoords=function(e){this.setCoordinates(e)},V.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()},V.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},V.prototype.setProperty=function(e,t){this.properties[e]=t},V.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:m,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},V.prototype.internal=function(e){var t={id:this.id,meta:C,"meta:type":this.type,active:B,mode:e};if(this.ctx.options.userProperties)for(var n in this.properties)t["user_"+n]=this.properties[n];return{type:m,properties:t,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var G=function(e,t){V.call(this,e,t)};(G.prototype=Object.create(V.prototype)).isValid=function(){return"number"==typeof this.coordinates[0]&&"number"==typeof this.coordinates[1]},G.prototype.updateCoordinate=function(e,t,n){this.coordinates=3===arguments.length?[t,n]:[e,t],this.changed()},G.prototype.getCoordinate=function(){return this.getCoordinates()};var q=function(e,t){V.call(this,e,t)};(q.prototype=Object.create(V.prototype)).isValid=function(){return this.coordinates.length>1},q.prototype.addCoordinate=function(e,t,n){this.changed();var r=parseInt(e,10);this.coordinates.splice(r,0,[t,n])},q.prototype.getCoordinate=function(e){var t=parseInt(e,10);return JSON.parse(JSON.stringify(this.coordinates[t]))},q.prototype.removeCoordinate=function(e){this.changed(),this.coordinates.splice(parseInt(e,10),1)},q.prototype.updateCoordinate=function(e,t,n){var r=parseInt(e,10);this.coordinates[r]=[t,n],this.changed()};var W=function(e,t){V.call(this,e,t),this.coordinates=this.coordinates.map((function(e){return e.slice(0,-1)}))};(W.prototype=Object.create(V.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every((function(e){return e.length>2}))},W.prototype.incomingCoords=function(e){this.coordinates=e.map((function(e){return e.slice(0,-1)})),this.changed()},W.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()},W.prototype.addCoordinate=function(e,t,n){this.changed();var r=e.split(".").map((function(e){return parseInt(e,10)}));this.coordinates[r[0]].splice(r[1],0,[t,n])},W.prototype.removeCoordinate=function(e){this.changed();var t=e.split(".").map((function(e){return parseInt(e,10)})),n=this.coordinates[t[0]];n&&(n.splice(t[1],1),n.length<3&&this.coordinates.splice(t[0],1))},W.prototype.getCoordinate=function(e){var t=e.split(".").map((function(e){return parseInt(e,10)})),n=this.coordinates[t[0]];return JSON.parse(JSON.stringify(n[t[1]]))},W.prototype.getCoordinates=function(){return this.coordinates.map((function(e){return e.concat([e[0]])}))},W.prototype.updateCoordinate=function(e,t,n){this.changed();var r=e.split("."),i=parseInt(r[0],10),o=parseInt(r[1],10);void 0===this.coordinates[i]&&(this.coordinates[i]=[]),this.coordinates[i][o]=[t,n]};var H={MultiPoint:G,MultiLineString:q,MultiPolygon:W},$=function(e,t,n,r,i){var o=n.split("."),a=parseInt(o[0],10),s=o[1]?o.slice(1).join("."):null;return e[a][t](s,r,i)},X=function(e,t){if(V.call(this,e,t),delete this.coordinates,this.model=H[t.geometry.type],void 0===this.model)throw new TypeError(t.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(t.geometry.coordinates)};function Z(e){this.map=e.map,this.drawConfig=JSON.parse(JSON.stringify(e.options||{})),this._ctx=e}(X.prototype=Object.create(V.prototype))._coordinatesToFeatures=function(e){var t=this,n=this.model.bind(this);return e.map((function(e){return new n(t.ctx,{id:j(),type:m,properties:{},geometry:{coordinates:e,type:t.type.replace("Multi","")}})}))},X.prototype.isValid=function(){return this.features.every((function(e){return e.isValid()}))},X.prototype.setCoordinates=function(e){this.features=this._coordinatesToFeatures(e),this.changed()},X.prototype.getCoordinate=function(e){return $(this.features,"getCoordinate",e)},X.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map((function(e){return e.type===g?e.getCoordinates():e.coordinates}))))},X.prototype.updateCoordinate=function(e,t,n){$(this.features,"updateCoordinate",e,t,n),this.changed()},X.prototype.addCoordinate=function(e,t,n){$(this.features,"addCoordinate",e,t,n),this.changed()},X.prototype.removeCoordinate=function(e){$(this.features,"removeCoordinate",e),this.changed()},X.prototype.getFeatures=function(){return this.features},Z.prototype.setSelected=function(e){return this._ctx.store.setSelected(e)},Z.prototype.setSelectedCoordinates=function(e){var t=this;this._ctx.store.setSelectedCoordinates(e),e.reduce((function(e,n){return void 0===e[n.feature_id]&&(e[n.feature_id]=!0,t._ctx.store.get(n.feature_id).changed()),e}),{})},Z.prototype.getSelected=function(){return this._ctx.store.getSelected()},Z.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},Z.prototype.isSelected=function(e){return this._ctx.store.isSelected(e)},Z.prototype.getFeature=function(e){return this._ctx.store.get(e)},Z.prototype.select=function(e){return this._ctx.store.select(e)},Z.prototype.deselect=function(e){return this._ctx.store.deselect(e)},Z.prototype.deleteFeature=function(e,t){return void 0===t&&(t={}),this._ctx.store.delete(e,t)},Z.prototype.addFeature=function(e){return this._ctx.store.add(e)},Z.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},Z.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},Z.prototype.setActionableState=function(e){void 0===e&&(e={});var t={trash:e.trash||!1,combineFeatures:e.combineFeatures||!1,uncombineFeatures:e.uncombineFeatures||!1};return this._ctx.events.actionable(t)},Z.prototype.changeMode=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),this._ctx.events.changeMode(e,t,n)},Z.prototype.updateUIClasses=function(e){return this._ctx.ui.queueMapClasses(e)},Z.prototype.activateUIButton=function(e){return this._ctx.ui.setActiveButton(e)},Z.prototype.featuresAt=function(e,t,n){if(void 0===n&&(n="click"),"click"!==n&&"touch"!==n)throw new Error("invalid buffer type");return D[n](e,t,this._ctx)},Z.prototype.newFeature=function(e){var t=e.geometry.type;return t===v?new G(this._ctx,e):t===y?new q(this._ctx,e):t===g?new W(this._ctx,e):new X(this._ctx,e)},Z.prototype.isInstanceOf=function(e,t){if(e===v)return t instanceof G;if(e===y)return t instanceof q;if(e===g)return t instanceof W;if("MultiFeature"===e)return t instanceof X;throw new Error("Unknown feature class: "+e)},Z.prototype.doRender=function(e){return this._ctx.store.featureChanged(e)},Z.prototype.onSetup=function(){},Z.prototype.onDrag=function(){},Z.prototype.onClick=function(){},Z.prototype.onMouseMove=function(){},Z.prototype.onMouseDown=function(){},Z.prototype.onMouseUp=function(){},Z.prototype.onMouseOut=function(){},Z.prototype.onKeyUp=function(){},Z.prototype.onKeyDown=function(){},Z.prototype.onTouchStart=function(){},Z.prototype.onTouchMove=function(){},Z.prototype.onTouchEnd=function(){},Z.prototype.onTap=function(){},Z.prototype.onStop=function(){},Z.prototype.onTrash=function(){},Z.prototype.onCombineFeature=function(){},Z.prototype.onUncombineFeature=function(){},Z.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var Y={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},K=Object.keys(Y);function J(e){return[].concat(e).filter((function(e){return void 0!==e}))}function Q(){var e=this;if(!e.ctx.map||void 0===e.ctx.map.getSource(l))return u();var t=e.ctx.events.currentModeName();e.ctx.ui.queueMapClasses({mode:t});var n=[],r=[];e.isDirty?r=e.getAllIds():(n=e.getChangedIds().filter((function(t){return void 0!==e.get(t)})),r=e.sources.hot.filter((function(t){return t.properties.id&&-1===n.indexOf(t.properties.id)&&void 0!==e.get(t.properties.id)})).map((function(e){return e.properties.id}))),e.sources.hot=[];var i=e.sources.cold.length;e.sources.cold=e.isDirty?[]:e.sources.cold.filter((function(e){var t=e.properties.id||e.properties.parent;return-1===n.indexOf(t)}));var o=i!==e.sources.cold.length||r.length>0;function a(n,r){var i=e.get(n).internal(t);e.ctx.events.currentModeRender(i,(function(t){e.sources[r].push(t)}))}if(n.forEach((function(e){return a(e,"hot")})),r.forEach((function(e){return a(e,"cold")})),o&&e.ctx.map.getSource(c).setData({type:b,features:e.sources.cold}),e.ctx.map.getSource(l).setData({type:b,features:e.sources.hot}),e._emitSelectionChange&&(e.ctx.map.fire("draw.selectionchange",{features:e.getSelected().map((function(e){return e.toGeoJSON()})),points:e.getSelectedCoordinates().map((function(e){return{type:m,properties:{},geometry:{type:v,coordinates:e.coordinates}}}))}),e._emitSelectionChange=!1),e._deletedFeaturesToEmit.length){var s=e._deletedFeaturesToEmit.map((function(e){return e.toGeoJSON()}));e._deletedFeaturesToEmit=[],e.ctx.map.fire("draw.delete",{features:s})}function u(){e.isDirty=!1,e.clearChangedIds()}u(),e.ctx.map.fire("draw.render",{})}function ee(e){var t,n=this;this._features={},this._featureIds=new I,this._selectedFeatureIds=new I,this._selectedCoordinates=[],this._changedFeatureIds=new I,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=e,this.sources={hot:[],cold:[]},this.render=function(){t||(t=requestAnimationFrame((function(){t=null,Q.call(n)})))},this.isDirty=!1}function te(e,t){var n=e._selectedCoordinates.filter((function(t){return e._selectedFeatureIds.has(t.feature_id)}));e._selectedCoordinates.length===n.length||t.silent||(e._emitSelectionChange=!0),e._selectedCoordinates=n}ee.prototype.createRenderBatch=function(){var e=this,t=this.render,n=0;return this.render=function(){n++},function(){e.render=t,n>0&&e.render()}},ee.prototype.setDirty=function(){return this.isDirty=!0,this},ee.prototype.featureChanged=function(e){return this._changedFeatureIds.add(e),this},ee.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},ee.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},ee.prototype.getAllIds=function(){return this._featureIds.values()},ee.prototype.add=function(e){return this.featureChanged(e.id),this._features[e.id]=e,this._featureIds.add(e.id),this},ee.prototype.delete=function(e,t){var n=this;return void 0===t&&(t={}),J(e).forEach((function(e){n._featureIds.has(e)&&(n._featureIds.delete(e),n._selectedFeatureIds.delete(e),t.silent||-1===n._deletedFeaturesToEmit.indexOf(n._features[e])&&n._deletedFeaturesToEmit.push(n._features[e]),delete n._features[e],n.isDirty=!0)})),te(this,t),this},ee.prototype.get=function(e){return this._features[e]},ee.prototype.getAll=function(){var e=this;return Object.keys(this._features).map((function(t){return e._features[t]}))},ee.prototype.select=function(e,t){var n=this;return void 0===t&&(t={}),J(e).forEach((function(e){n._selectedFeatureIds.has(e)||(n._selectedFeatureIds.add(e),n._changedFeatureIds.add(e),t.silent||(n._emitSelectionChange=!0))})),this},ee.prototype.deselect=function(e,t){var n=this;return void 0===t&&(t={}),J(e).forEach((function(e){n._selectedFeatureIds.has(e)&&(n._selectedFeatureIds.delete(e),n._changedFeatureIds.add(e),t.silent||(n._emitSelectionChange=!0))})),te(this,t),this},ee.prototype.clearSelected=function(e){return void 0===e&&(e={}),this.deselect(this._selectedFeatureIds.values(),{silent:e.silent}),this},ee.prototype.setSelected=function(e,t){var n=this;return void 0===t&&(t={}),e=J(e),this.deselect(this._selectedFeatureIds.values().filter((function(t){return-1===e.indexOf(t)})),{silent:t.silent}),this.select(e.filter((function(e){return!n._selectedFeatureIds.has(e)})),{silent:t.silent}),this},ee.prototype.setSelectedCoordinates=function(e){return this._selectedCoordinates=e,this._emitSelectionChange=!0,this},ee.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},ee.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},ee.prototype.getSelected=function(){var e=this;return this._selectedFeatureIds.values().map((function(t){return e.get(t)}))},ee.prototype.getSelectedCoordinates=function(){var e=this;return this._selectedCoordinates.map((function(t){return{coordinates:e.get(t.feature_id).getCoordinate(t.coord_path)}}))},ee.prototype.isSelected=function(e){return this._selectedFeatureIds.has(e)},ee.prototype.setFeatureProperty=function(e,t,n){this.get(e).setProperty(t,n),this.featureChanged(e)},ee.prototype.storeMapConfig=function(){var e=this;k.forEach((function(t){e.ctx.map[t]&&(e._mapInitialConfig[t]=e.ctx.map[t].isEnabled())}))},ee.prototype.restoreMapConfig=function(){var e=this;Object.keys(this._mapInitialConfig).forEach((function(t){e._mapInitialConfig[t]?e.ctx.map[t].enable():e.ctx.map[t].disable()}))},ee.prototype.getInitialConfigValue=function(e){return void 0===this._mapInitialConfig[e]||this._mapInitialConfig[e]};var ne=function(){for(var e=arguments,t={},n=0;n<arguments.length;n++){var r=e[n];for(var i in r)re.call(r,i)&&(t[i]=r[i])}return t},re=Object.prototype.hasOwnProperty,ie=["mode","feature","mouse"];function oe(t){var n=null,r=null,i={onRemove:function(){return t.map.off("load",i.connect),clearInterval(r),i.removeLayers(),t.store.restoreMapConfig(),t.ui.removeButtons(),t.events.removeEventListeners(),t.ui.clearMapClasses(),t.map=null,t.container=null,t.store=null,n&&n.parentNode&&n.parentNode.removeChild(n),n=null,this},connect:function(){t.map.off("load",i.connect),clearInterval(r),i.addLayers(),t.store.storeMapConfig(),t.events.addEventListeners()},onAdd:function(o){var a=o.fire;return o.fire=function(e,t){var n=arguments;return 1===a.length&&1!==arguments.length&&(n=[ne({},{type:e},t)]),a.apply(o,n)},t.map=o,t.events=function(t){var n=Object.keys(t.options.modes).reduce((function(e,n){return e[n]=function(e){var t=Object.keys(e);return function(n,r){void 0===r&&(r={});var i={},o=t.reduce((function(t,n){return t[n]=e[n],t}),new Z(n));return{start:function(){var t=this;i=o.onSetup(r),K.forEach((function(n){var r,a=Y[n],s=function(){return!1};e[a]&&(s=function(){return!0}),t.on(n,s,(r=a,function(e){return o[r](i,e)}))}))},stop:function(){o.onStop(i)},trash:function(){o.onTrash(i)},combineFeatures:function(){o.onCombineFeatures(i)},uncombineFeatures:function(){o.onUncombineFeatures(i)},render:function(e,t){o.toDisplayFeatures(i,e,t)}}}}(t.options.modes[n]),e}),{}),r={},i={},o={},a=null,s=null;o.drag=function(e,n){n({point:e.point,time:(new Date).getTime()})?(t.ui.queueMapClasses({mouse:"drag"}),s.drag(e)):e.originalEvent.stopPropagation()},o.mousedrag=function(e){o.drag(e,(function(e){return!F(r,e)}))},o.touchdrag=function(e){o.drag(e,(function(e){return!U(i,e)}))},o.mousemove=function(e){if(1===(void 0!==e.originalEvent.buttons?e.originalEvent.buttons:e.originalEvent.which))return o.mousedrag(e);var n=L(e,t);e.featureTarget=n,s.mousemove(e)},o.mousedown=function(e){r={time:(new Date).getTime(),point:e.point};var n=L(e,t);e.featureTarget=n,s.mousedown(e)},o.mouseup=function(e){var n=L(e,t);e.featureTarget=n,F(r,{point:e.point,time:(new Date).getTime()})?s.click(e):s.mouseup(e)},o.mouseout=function(e){s.mouseout(e)},o.touchstart=function(e){if(e.originalEvent.preventDefault(),t.options.touchEnabled){i={time:(new Date).getTime(),point:e.point};var n=D.touch(e,null,t)[0];e.featureTarget=n,s.touchstart(e)}},o.touchmove=function(e){if(e.originalEvent.preventDefault(),t.options.touchEnabled)return s.touchmove(e),o.touchdrag(e)},o.touchend=function(e){if(e.originalEvent.preventDefault(),t.options.touchEnabled){var n=D.touch(e,null,t)[0];e.featureTarget=n,U(i,{time:(new Date).getTime(),point:e.point})?s.tap(e):s.touchend(e)}};var l=function(e){return!(8===e||46===e||e>=48&&e<=57)};function c(r,i,o){void 0===o&&(o={}),s.stop();var l=n[r];if(void 0===l)throw new Error(r+" is not valid");a=r;var c=l(t,i);s=e(c,t),o.silent||t.map.fire("draw.modechange",{mode:r}),t.store.setDirty(),t.store.render()}o.keydown=function(e){"mapboxgl-canvas"===(e.srcElement||e.target).classList[0]&&(8!==e.keyCode&&46!==e.keyCode||!t.options.controls.trash?l(e.keyCode)?s.keydown(e):49===e.keyCode&&t.options.controls.point?c(x.DRAW_POINT):50===e.keyCode&&t.options.controls.line_string?c(x.DRAW_LINE_STRING):51===e.keyCode&&t.options.controls.polygon&&c(x.DRAW_POLYGON):(e.preventDefault(),s.trash()))},o.keyup=function(e){l(e.keyCode)&&s.keyup(e)},o.zoomend=function(){t.store.changeZoom()},o.data=function(e){if("style"===e.dataType){var n=t.setup,r=t.map,i=t.options,o=t.store;i.styles.some((function(e){return r.getLayer(e.id)}))||(n.addLayers(),o.setDirty(),o.render())}};var u={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){a=t.options.defaultMode,s=e(n[a](t),t)},changeMode:c,actionable:function(e){var n=!1;Object.keys(e).forEach((function(t){if(void 0===u[t])throw new Error("Invalid action type");u[t]!==e[t]&&(n=!0),u[t]=e[t]})),n&&t.map.fire("draw.actionable",{actions:u})},currentModeName:function(){return a},currentModeRender:function(e,t){return s.render(e,t)},fire:function(e,t){o[e]&&o[e](t)},addEventListeners:function(){t.map.on("mousemove",o.mousemove),t.map.on("mousedown",o.mousedown),t.map.on("mouseup",o.mouseup),t.map.on("data",o.data),t.map.on("touchmove",o.touchmove),t.map.on("touchstart",o.touchstart),t.map.on("touchend",o.touchend),t.container.addEventListener("mouseout",o.mouseout),t.options.keybindings&&(t.container.addEventListener("keydown",o.keydown),t.container.addEventListener("keyup",o.keyup))},removeEventListeners:function(){t.map.off("mousemove",o.mousemove),t.map.off("mousedown",o.mousedown),t.map.off("mouseup",o.mouseup),t.map.off("data",o.data),t.map.off("touchmove",o.touchmove),t.map.off("touchstart",o.touchstart),t.map.off("touchend",o.touchend),t.container.removeEventListener("mouseout",o.mouseout),t.options.keybindings&&(t.container.removeEventListener("keydown",o.keydown),t.container.removeEventListener("keyup",o.keyup))},trash:function(e){s.trash(e)},combineFeatures:function(){s.combineFeatures()},uncombineFeatures:function(){s.uncombineFeatures()},getMode:function(){return a}}}(t),t.ui=function(e){var t={},n=null,r={mode:null,feature:null,mouse:null},i={mode:null,feature:null,mouse:null};function o(e){i=ne(i,e)}function a(){var t,n;if(e.container){var o=[],a=[];ie.forEach((function(e){i[e]!==r[e]&&(o.push(e+"-"+r[e]),null!==i[e]&&a.push(e+"-"+i[e]))})),o.length>0&&(t=e.container.classList).remove.apply(t,o),a.length>0&&(n=e.container.classList).add.apply(n,a),r=ne(r,i)}}function l(e,t){void 0===t&&(t={});var r=document.createElement("button");return r.className="mapbox-gl-draw_ctrl-draw-btn "+t.className,r.setAttribute("title",t.title),t.container.appendChild(r),r.addEventListener("click",(function(r){if(r.preventDefault(),r.stopPropagation(),r.target===n)return c(),void t.onDeactivate();u(e),t.onActivate()}),!0),r}function c(){n&&(n.classList.remove(s),n=null)}function u(e){c();var r=t[e];r&&r&&"trash"!==e&&(r.classList.add(s),n=r)}return{setActiveButton:u,queueMapClasses:o,updateMapClasses:a,clearMapClasses:function(){o({mode:null,feature:null,mouse:null}),a()},addButtons:function(){var n=e.options.controls,r=document.createElement("div");return r.className="mapboxgl-ctrl-group mapboxgl-ctrl",n?(n[d.LINE]&&(t[d.LINE]=l(d.LINE,{container:r,className:"mapbox-gl-draw_line",title:"LineString tool "+(e.options.keybindings?"(l)":""),onActivate:function(){return e.events.changeMode(x.DRAW_LINE_STRING)},onDeactivate:function(){return e.events.trash()}})),n[d.POLYGON]&&(t[d.POLYGON]=l(d.POLYGON,{container:r,className:"mapbox-gl-draw_polygon",title:"Polygon tool "+(e.options.keybindings?"(p)":""),onActivate:function(){return e.events.changeMode(x.DRAW_POLYGON)},onDeactivate:function(){return e.events.trash()}})),n[d.POINT]&&(t[d.POINT]=l(d.POINT,{container:r,className:"mapbox-gl-draw_point",title:"Marker tool "+(e.options.keybindings?"(m)":""),onActivate:function(){return e.events.changeMode(x.DRAW_POINT)},onDeactivate:function(){return e.events.trash()}})),n.trash&&(t.trash=l("trash",{container:r,className:"mapbox-gl-draw_trash",title:"Delete",onActivate:function(){e.events.trash()}})),n.combine_features&&(t.combine_features=l("combineFeatures",{container:r,className:"mapbox-gl-draw_combine",title:"Combine",onActivate:function(){e.events.combineFeatures()}})),n.uncombine_features&&(t.uncombine_features=l("uncombineFeatures",{container:r,className:"mapbox-gl-draw_uncombine",title:"Uncombine",onActivate:function(){e.events.uncombineFeatures()}})),r):r},removeButtons:function(){Object.keys(t).forEach((function(e){var n=t[e];n.parentNode&&n.parentNode.removeChild(n),delete t[e]}))}}}(t),t.container=o.getContainer(),t.store=new ee(t),n=t.ui.addButtons(),t.options.boxSelect&&(o.boxZoom.disable(),o.dragPan.disable(),o.dragPan.enable()),o.loaded()?i.connect():(o.on("load",i.connect),r=setInterval((function(){o.loaded()&&i.connect()}),16)),t.events.start(),n},addLayers:function(){t.map.addSource(c,{data:{type:b,features:[]},type:"geojson"}),t.map.addSource(l,{data:{type:b,features:[]},type:"geojson"}),t.options.styles.forEach((function(e){t.map.addLayer(e)})),t.store.setDirty(!0),t.store.render()},removeLayers:function(){t.options.styles.forEach((function(e){t.map.getLayer(e.id)&&t.map.removeLayer(e.id)})),t.map.getSource(c)&&t.map.removeSource(c),t.map.getSource(l)&&t.map.removeSource(l)}};return t.setup=i,i}function ae(e){return function(t){var n=t.featureTarget;return!!n&&!!n.properties&&n.properties.meta===e}}function se(e){return!!e.featureTarget&&!!e.featureTarget.properties&&e.featureTarget.properties.active===T&&e.featureTarget.properties.meta===C}function le(e){return!!e.featureTarget&&!!e.featureTarget.properties&&e.featureTarget.properties.active===B&&e.featureTarget.properties.meta===C}function ce(e){return void 0===e.featureTarget}function ue(e){var t=e.featureTarget;return!!t&&!!t.properties&&t.properties.meta===S}function he(e){return!!e.originalEvent&&!0===e.originalEvent.shiftKey}function fe(e){return 27===e.keyCode}function pe(e){return 13===e.keyCode}var de=me;function me(e,t){this.x=e,this.y=t}function ge(e,t){var n=t.getBoundingClientRect();return new de(e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0))}function ye(e,t,n,r){return{type:m,properties:{meta:S,parent:e,coord_path:n,active:r?T:B},geometry:{type:v,coordinates:t}}}function ve(e,t,n){void 0===t&&(t={}),void 0===n&&(n=null);var r,i=e.geometry,o=i.type,a=i.coordinates,s=e.properties&&e.properties.id,l=[];function c(e,n){var r="",i=null;e.forEach((function(e,o){var a=null!=n?n+"."+o:String(o),c=ye(s,e,a,u(a));if(t.midpoints&&i){var h=function(e,t,n){var r=t.geometry.coordinates,i=n.geometry.coordinates;if(r[1]>85||r[1]<-85||i[1]>85||i[1]<-85)return null;var o={lng:(r[0]+i[0])/2,lat:(r[1]+i[1])/2};return{type:m,properties:{meta:E,parent:e,lng:o.lng,lat:o.lat,coord_path:n.properties.coord_path},geometry:{type:v,coordinates:[o.lng,o.lat]}}}(s,i,c);h&&l.push(h)}i=c;var f=JSON.stringify(e);r!==f&&l.push(c),0===o&&(r=f)}))}function u(e){return!!t.selectedPaths&&-1!==t.selectedPaths.indexOf(e)}return o===v?l.push(ye(s,a,n,u(n))):o===g?a.forEach((function(e,t){c(e,null!==n?n+"."+t:String(t))})):o===y?c(a,n):0===o.indexOf(_)&&(r=o.replace(_,""),a.forEach((function(n,i){var o={type:m,properties:e.properties,geometry:{type:r,coordinates:n}};l=l.concat(ve(o,t,i))}))),l}me.prototype={clone:function(){return new me(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=t*this.x-n*this.y,i=n*this.x+t*this.y;return this.x=r,this.y=i,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),i=t.x+n*(this.x-t.x)-r*(this.y-t.y),o=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},me.convert=function(e){return e instanceof me?e:Array.isArray(e)?new me(e[0],e[1]):e};var be=function(e){setTimeout((function(){e.map&&e.map.doubleClickZoom&&e._ctx&&e._ctx.store&&e._ctx.store.getInitialConfigValue&&e._ctx.store.getInitialConfigValue("doubleClickZoom")&&e.map.doubleClickZoom.enable()}),0)},_e=function(e){setTimeout((function(){e.map&&e.map.doubleClickZoom&&e.map.doubleClickZoom.disable()}),0)},xe=function(e){if(!e||!e.type)return null;var t=Ae[e.type];return t?"geometry"===t?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]}:"feature"===t?{type:"FeatureCollection",features:[e]}:"featurecollection"===t?e:void 0:null},Ae={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function we(e){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.reduce((function(e,t){return e.concat(we(t))}),[]),e;case"Feature":return e.geometry?we(e.geometry).map((function(t){var n={type:"Feature",properties:JSON.parse(JSON.stringify(e.properties)),geometry:t};return void 0!==e.id&&(n.id=e.id),n})):[e];case"MultiPoint":return e.coordinates.map((function(e){return{type:"Point",coordinates:e}}));case"MultiPolygon":return e.coordinates.map((function(e){return{type:"Polygon",coordinates:e}}));case"MultiLineString":return e.coordinates.map((function(e){return{type:"LineString",coordinates:e}}));case"GeometryCollection":return e.geometries.map(we).reduce((function(e,t){return e.concat(t)}),[]);case"Point":case"Polygon":case"LineString":return[e]}}var Ce=N((function(e){var t=e.exports=function(e){return new n(e)};function n(e){this.value=e}function r(e,t,n){var r=[],a=[],u=!0;return function e(h){var f=n?i(h):h,p={},d=!0,m={node:f,node_:h,path:[].concat(r),parent:a[a.length-1],parents:a,key:r.slice(-1)[0],isRoot:0===r.length,level:r.length,circular:null,update:function(e,t){m.isRoot||(m.parent.node[m.key]=e),m.node=e,t&&(d=!1)},delete:function(e){delete m.parent.node[m.key],e&&(d=!1)},remove:function(e){s(m.parent.node)?m.parent.node.splice(m.key,1):delete m.parent.node[m.key],e&&(d=!1)},keys:null,before:function(e){p.before=e},after:function(e){p.after=e},pre:function(e){p.pre=e},post:function(e){p.post=e},stop:function(){u=!1},block:function(){d=!1}};if(!u)return m;function g(){if("object"==typeof m.node&&null!==m.node){m.keys&&m.node_===m.node||(m.keys=o(m.node)),m.isLeaf=0==m.keys.length;for(var e=0;e<a.length;e++)if(a[e].node_===h){m.circular=a[e];break}}else m.isLeaf=!0,m.keys=null;m.notLeaf=!m.isLeaf,m.notRoot=!m.isRoot}g();var y=t.call(m,m.node);return void 0!==y&&m.update&&m.update(y),p.before&&p.before.call(m,m.node),d?("object"!=typeof m.node||null===m.node||m.circular||(a.push(m),g(),l(m.keys,(function(t,i){r.push(t),p.pre&&p.pre.call(m,m.node[t],t);var o=e(m.node[t]);n&&c.call(m.node,t)&&(m.node[t]=o.node),o.isLast=i==m.keys.length-1,o.isFirst=0==i,p.post&&p.post.call(m,o),r.pop()})),a.pop()),p.after&&p.after.call(m,m.node),m):m}(e).node}function i(e){if("object"==typeof e&&null!==e){var t;if(s(e))t=[];else if("[object Date]"===a(e))t=new Date(e.getTime?e.getTime():e);else if(function(e){return"[object RegExp]"===a(e)}(e))t=new RegExp(e);else if(function(e){return"[object Error]"===a(e)}(e))t={message:e.message};else if(function(e){return"[object Boolean]"===a(e)}(e))t=new Boolean(e);else if(function(e){return"[object Number]"===a(e)}(e))t=new Number(e);else if(function(e){return"[object String]"===a(e)}(e))t=new String(e);else if(Object.create&&Object.getPrototypeOf)t=Object.create(Object.getPrototypeOf(e));else if(e.constructor===Object)t={};else{var n=e.constructor&&e.constructor.prototype||e.__proto__||{},r=function(){};r.prototype=n,t=new r}return l(o(e),(function(n){t[n]=e[n]})),t}return e}n.prototype.get=function(e){for(var t=this.value,n=0;n<e.length;n++){var r=e[n];if(!t||!c.call(t,r)){t=void 0;break}t=t[r]}return t},n.prototype.has=function(e){for(var t=this.value,n=0;n<e.length;n++){var r=e[n];if(!t||!c.call(t,r))return!1;t=t[r]}return!0},n.prototype.set=function(e,t){for(var n=this.value,r=0;r<e.length-1;r++){var i=e[r];c.call(n,i)||(n[i]={}),n=n[i]}return n[e[r]]=t,t},n.prototype.map=function(e){return r(this.value,e,!0)},n.prototype.forEach=function(e){return this.value=r(this.value,e,!1),this.value},n.prototype.reduce=function(e,t){var n=1===arguments.length,r=n?this.value:t;return this.forEach((function(t){this.isRoot&&n||(r=e.call(this,r,t))})),r},n.prototype.paths=function(){var e=[];return this.forEach((function(t){e.push(this.path)})),e},n.prototype.nodes=function(){var e=[];return this.forEach((function(t){e.push(this.node)})),e},n.prototype.clone=function(){var e=[],t=[];return function n(r){for(var a=0;a<e.length;a++)if(e[a]===r)return t[a];if("object"==typeof r&&null!==r){var s=i(r);return e.push(r),t.push(s),l(o(r),(function(e){s[e]=n(r[e])})),e.pop(),t.pop(),s}return r}(this.value)};var o=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};function a(e){return Object.prototype.toString.call(e)}var s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},l=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t(e[n],n,e)};l(o(n.prototype),(function(e){t[e]=function(t){var r=[].slice.call(arguments,1),i=new n(t);return i[e].apply(i,r)}}));var c=Object.hasOwnProperty||function(e,t){return t in e}})),Ee=Se;function Se(e){if(!(this instanceof Se))return new Se(e);this._bbox=e||[1/0,1/0,-1/0,-1/0],this._valid=!!e}Se.prototype.include=function(e){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],e[0]),this._bbox[1]=Math.min(this._bbox[1],e[1]),this._bbox[2]=Math.max(this._bbox[2],e[0]),this._bbox[3]=Math.max(this._bbox[3],e[1]),this},Se.prototype.equals=function(e){var t;return t=e instanceof Se?e.bbox():e,this._bbox[0]==t[0]&&this._bbox[1]==t[1]&&this._bbox[2]==t[2]&&this._bbox[3]==t[3]},Se.prototype.center=function(e){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},Se.prototype.union=function(e){var t;return this._valid=!0,t=e instanceof Se?e.bbox():e,this._bbox[0]=Math.min(this._bbox[0],t[0]),this._bbox[1]=Math.min(this._bbox[1],t[1]),this._bbox[2]=Math.max(this._bbox[2],t[2]),this._bbox[3]=Math.max(this._bbox[3],t[3]),this},Se.prototype.bbox=function(){return this._valid?this._bbox:null},Se.prototype.contains=function(e){if(!e)return this._fastContains();if(!this._valid)return null;var t=e[0],n=e[1];return this._bbox[0]<=t&&this._bbox[1]<=n&&this._bbox[2]>=t&&this._bbox[3]>=n},Se.prototype.intersect=function(e){return this._valid?(t=e instanceof Se?e.bbox():e,!(this._bbox[0]>t[2]||this._bbox[2]<t[0]||this._bbox[3]<t[1]||this._bbox[1]>t[3])):null;var t},Se.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var e="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",e)},Se.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var Te={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},Be=Object.keys(Te),ke=function(e){return Me(e).bbox()};function Me(e){for(var t=Ee(),n=function(e){if(!e)return[];var t=we(xe(e)),n=[];return t.features.forEach((function(e){e.geometry&&(n=n.concat(function e(t){return Array.isArray(t)&&t.length&&"number"==typeof t[0]?[t]:t.reduce((function(t,n){return Array.isArray(n)&&Array.isArray(n[0])?t.concat(e(n)):(t.push(n),t)}),[])}(e.geometry.coordinates)))})),n}(e),r=0;r<n.length;r++)t.include(n[r]);return t}function Pe(e,t){var n=-90,r=90,i=-90,o=90,a=270,s=-270;e.forEach((function(e){var t=ke(e),l=t[1],c=t[3],u=t[0],h=t[2];l>n&&(n=l),c<r&&(r=c),c>i&&(i=c),l<o&&(o=l),u<a&&(a=u),h>s&&(s=h)}));var l=t;return n+l.lat>85&&(l.lat=85-n),i+l.lat>90&&(l.lat=90-i),r+l.lat<-85&&(l.lat=-85-r),o+l.lat<-90&&(l.lat=-90-o),a+l.lng<=-270&&(l.lng+=360*Math.ceil(Math.abs(l.lng)/360)),s+l.lng>=270&&(l.lng-=360*Math.ceil(Math.abs(l.lng)/360)),l}function Ie(e,t){var n=Pe(e.map((function(e){return e.toGeoJSON()})),t);e.forEach((function(e){var t,r=e.getCoordinates(),i=function(e){var t={lng:e[0]+n.lng,lat:e[1]+n.lat};return[t.lng,t.lat]},o=function(e){return e.map((function(e){return i(e)}))};e.type===v?t=i(r):e.type===y||"MultiPoint"===e.type?t=r.map(i):e.type===g||"MultiLineString"===e.type?t=r.map(o):"MultiPolygon"===e.type&&(t=r.map((function(e){return e.map((function(e){return o(e)}))}))),e.incomingCoords(t)}))}ke.polygon=function(e){return Me(e).polygon()},ke.bboxify=function(e){return Ce(e).map((function(e){e&&Be.some((function(t){return!!e[t]&&-1!==Te[t].indexOf(e.type)}))&&(e.bbox=Me(e).bbox(),this.update(e))}))};var Oe={onSetup:function(e){var t=this,n={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:e.featureIds||[]};return this.setSelected(n.initiallySelectedFeatureIds.filter((function(e){return void 0!==t.getFeature(e)}))),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),n},fireUpdate:function(){this.map.fire(w,{action:"move",features:this.getSelected().map((function(e){return e.toGeoJSON()}))})},fireActionable:function(){var e=this,t=this.getSelected(),n=t.filter((function(t){return e.isInstanceOf("MultiFeature",t)})),r=!1;if(t.length>1){r=!0;var i=t[0].type.replace("Multi","");t.forEach((function(e){e.type.replace("Multi","")!==i&&(r=!1)}))}var o=n.length>0,a=t.length>0;this.setActionableState({combineFeatures:r,uncombineFeatures:o,trash:a})},getUniqueIds:function(e){return e.length?e.map((function(e){return e.properties.id})).filter((function(e){return void 0!==e})).reduce((function(e,t){return e.add(t),e}),new I).values():[]},stopExtendedInteractions:function(e){e.boxSelectElement&&(e.boxSelectElement.parentNode&&e.boxSelectElement.parentNode.removeChild(e.boxSelectElement),e.boxSelectElement=null),this.map.dragPan.enable(),e.boxSelecting=!1,e.canBoxSelect=!1,e.dragMoving=!1,e.canDragMove=!1},onStop:function(){be(this)},onMouseMove:function(e){return this.stopExtendedInteractions(e),!0},onMouseOut:function(e){return!e.dragMoving||this.fireUpdate()}};Oe.onTap=Oe.onClick=function(e,t){return ce(t)?this.clickAnywhere(e,t):ae(S)(t)?this.clickOnVertex(e,t):function(e){return!!e.featureTarget&&!!e.featureTarget.properties&&e.featureTarget.properties.meta===C}(t)?this.clickOnFeature(e,t):void 0},Oe.clickAnywhere=function(e){var t=this,n=this.getSelectedIds();n.length&&(this.clearSelectedFeatures(),n.forEach((function(e){return t.doRender(e)}))),be(this),this.stopExtendedInteractions(e)},Oe.clickOnVertex=function(e,t){this.changeMode(x.DIRECT_SELECT,{featureId:t.featureTarget.properties.parent,coordPath:t.featureTarget.properties.coord_path,startPos:t.lngLat}),this.updateUIClasses({mouse:h})},Oe.startOnActiveFeature=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),this.doRender(t.featureTarget.properties.id),e.canDragMove=!0,e.dragMoveLocation=t.lngLat},Oe.clickOnFeature=function(e,t){var n=this;_e(this),this.stopExtendedInteractions(e);var r=he(t),i=this.getSelectedIds(),o=t.featureTarget.properties.id,a=this.isSelected(o);if(!r&&a&&this.getFeature(o).type!==v)return this.changeMode(x.DIRECT_SELECT,{featureId:o});a&&r?(this.deselect(o),this.updateUIClasses({mouse:f}),1===i.length&&be(this)):!a&&r?(this.select(o),this.updateUIClasses({mouse:h})):a||r||(i.forEach((function(e){return n.doRender(e)})),this.setSelected(o),this.updateUIClasses({mouse:h})),this.doRender(o)},Oe.onMouseDown=function(e,t){return se(t)?this.startOnActiveFeature(e,t):this.drawConfig.boxSelect&&function(e){return!!e.originalEvent&&!!e.originalEvent.shiftKey&&0===e.originalEvent.button}(t)?this.startBoxSelect(e,t):void 0},Oe.startBoxSelect=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),e.boxSelectStartLocation=ge(t.originalEvent,this.map.getContainer()),e.canBoxSelect=!0},Oe.onTouchStart=function(e,t){if(se(t))return this.startOnActiveFeature(e,t)},Oe.onDrag=function(e,t){return e.canDragMove?this.dragMove(e,t):this.drawConfig.boxSelect&&e.canBoxSelect?this.whileBoxSelect(e,t):void 0},Oe.whileBoxSelect=function(e,t){e.boxSelecting=!0,this.updateUIClasses({mouse:u}),e.boxSelectElement||(e.boxSelectElement=document.createElement("div"),e.boxSelectElement.classList.add("mapbox-gl-draw_boxselect"),this.map.getContainer().appendChild(e.boxSelectElement));var n=ge(t.originalEvent,this.map.getContainer()),r=Math.min(e.boxSelectStartLocation.x,n.x),i=Math.max(e.boxSelectStartLocation.x,n.x),o=Math.min(e.boxSelectStartLocation.y,n.y),a=Math.max(e.boxSelectStartLocation.y,n.y),s="translate("+r+"px, "+o+"px)";e.boxSelectElement.style.transform=s,e.boxSelectElement.style.WebkitTransform=s,e.boxSelectElement.style.width=i-r+"px",e.boxSelectElement.style.height=a-o+"px"},Oe.dragMove=function(e,t){e.dragMoving=!0,t.originalEvent.stopPropagation();var n={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};Ie(this.getSelected(),n),e.dragMoveLocation=t.lngLat},Oe.onMouseUp=function(e,t){var n=this;if(e.dragMoving)this.fireUpdate();else if(e.boxSelecting){var r=[e.boxSelectStartLocation,ge(t.originalEvent,this.map.getContainer())],i=this.featuresAt(null,r,"click"),o=this.getUniqueIds(i).filter((function(e){return!n.isSelected(e)}));o.length&&(this.select(o),o.forEach((function(e){return n.doRender(e)})),this.updateUIClasses({mouse:h}))}this.stopExtendedInteractions(e)},Oe.toDisplayFeatures=function(e,t,n){t.properties.active=this.isSelected(t.properties.id)?T:B,n(t),this.fireActionable(),t.properties.active===T&&t.geometry.type!==v&&ve(t).forEach(n)},Oe.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},Oe.onCombineFeatures=function(){var e=this.getSelected();if(!(0===e.length||e.length<2)){for(var t=[],n=[],r=e[0].type.replace("Multi",""),i=0;i<e.length;i++){var o=e[i];if(o.type.replace("Multi","")!==r)return;o.type.includes("Multi")?o.getCoordinates().forEach((function(e){t.push(e)})):t.push(o.getCoordinates()),n.push(o.toGeoJSON())}if(n.length>1){var a=this.newFeature({type:m,properties:n[0].properties,geometry:{type:"Multi"+r,coordinates:t}});this.addFeature(a),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([a.id]),this.map.fire("draw.combine",{createdFeatures:[a.toGeoJSON()],deletedFeatures:n})}this.fireActionable()}},Oe.onUncombineFeatures=function(){var e=this,t=this.getSelected();if(0!==t.length){for(var n=[],r=[],i=function(i){var o=t[i];e.isInstanceOf("MultiFeature",o)&&(o.getFeatures().forEach((function(t){e.addFeature(t),t.properties=o.properties,n.push(t.toGeoJSON()),e.select([t.id])})),e.deleteFeature(o.id,{silent:!0}),r.push(o.toGeoJSON()))},o=0;o<t.length;o++)i(o);n.length>1&&this.map.fire("draw.uncombine",{createdFeatures:n,deletedFeatures:r}),this.fireActionable()}};var De=ae(S),ze=ae(E),Le={fireUpdate:function(){this.map.fire(w,{action:"change_coordinates",features:this.getSelected().map((function(e){return e.toGeoJSON()}))})},fireActionable:function(e){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:e.selectedCoordPaths.length>0})},startDragging:function(e,t){this.map.dragPan.disable(),e.canDragMove=!0,e.dragMoveLocation=t.lngLat},stopDragging:function(e){this.map.dragPan.enable(),e.dragMoving=!1,e.canDragMove=!1,e.dragMoveLocation=null},onVertex:function(e,t){this.startDragging(e,t);var n=t.featureTarget.properties,r=e.selectedCoordPaths.indexOf(n.coord_path);he(t)||-1!==r?he(t)&&-1===r&&e.selectedCoordPaths.push(n.coord_path):e.selectedCoordPaths=[n.coord_path];var i=this.pathsToCoordinates(e.featureId,e.selectedCoordPaths);this.setSelectedCoordinates(i)},onMidpoint:function(e,t){this.startDragging(e,t);var n=t.featureTarget.properties;e.feature.addCoordinate(n.coord_path,n.lng,n.lat),this.fireUpdate(),e.selectedCoordPaths=[n.coord_path]},pathsToCoordinates:function(e,t){return t.map((function(t){return{feature_id:e,coord_path:t}}))},onFeature:function(e,t){0===e.selectedCoordPaths.length?this.startDragging(e,t):this.stopDragging(e)},dragFeature:function(e,t,n){Ie(this.getSelected(),n),e.dragMoveLocation=t.lngLat},dragVertex:function(e,t,n){for(var r=e.selectedCoordPaths.map((function(t){return e.feature.getCoordinate(t)})),i=Pe(r.map((function(e){return{type:m,properties:{},geometry:{type:v,coordinates:e}}})),n),o=0;o<r.length;o++){var a=r[o];e.feature.updateCoordinate(e.selectedCoordPaths[o],a[0]+i.lng,a[1]+i.lat)}},clickNoTarget:function(){this.changeMode(x.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(x.SIMPLE_SELECT)},clickActiveFeature:function(e){e.selectedCoordPaths=[],this.clearSelectedCoordinates(),e.feature.changed()},onSetup:function(e){var t=e.featureId,n=this.getFeature(t);if(!n)throw new Error("You must provide a featureId to enter direct_select mode");if(n.type===v)throw new TypeError("direct_select mode doesn't handle point features");var r={featureId:t,feature:n,dragMoveLocation:e.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:e.coordPath?[e.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(t,r.selectedCoordPaths)),this.setSelected(t),_e(this),this.setActionableState({trash:!0}),r},onStop:function(){be(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(e,t,n){e.featureId===t.properties.id?(t.properties.active=T,n(t),ve(t,{map:this.map,midpoints:!0,selectedPaths:e.selectedCoordPaths}).forEach(n)):(t.properties.active=B,n(t)),this.fireActionable(e)},onTrash:function(e){e.selectedCoordPaths.sort((function(e,t){return t.localeCompare(e,"en",{numeric:!0})})).forEach((function(t){return e.feature.removeCoordinate(t)})),this.fireUpdate(),e.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(e),!1===e.feature.isValid()&&(this.deleteFeature([e.featureId]),this.changeMode(x.SIMPLE_SELECT,{}))},onMouseMove:function(e,t){var n=se(t),r=De(t),i=0===e.selectedCoordPaths.length;return n&&i||r&&!i?this.updateUIClasses({mouse:h}):this.updateUIClasses({mouse:p}),this.stopDragging(e),!0},onMouseOut:function(e){return e.dragMoving&&this.fireUpdate(),!0}};Le.onTouchStart=Le.onMouseDown=function(e,t){return De(t)?this.onVertex(e,t):se(t)?this.onFeature(e,t):ze(t)?this.onMidpoint(e,t):void 0},Le.onDrag=function(e,t){if(!0===e.canDragMove){e.dragMoving=!0,t.originalEvent.stopPropagation();var n={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};e.selectedCoordPaths.length>0?this.dragVertex(e,t,n):this.dragFeature(e,t,n),e.dragMoveLocation=t.lngLat}},Le.onClick=function(e,t){return ce(t)?this.clickNoTarget(e,t):se(t)?this.clickActiveFeature(e,t):le(t)?this.clickInactive(e,t):void this.stopDragging(e)},Le.onTap=function(e,t){return ce(t)?this.clickNoTarget(e,t):se(t)?this.clickActiveFeature(e,t):le(t)?this.clickInactive(e,t):void 0},Le.onTouchEnd=Le.onMouseUp=function(e){e.dragMoving&&this.fireUpdate(),this.stopDragging(e)};var Re={};function Fe(e,t){return!!e.lngLat&&e.lngLat.lng===t[0]&&e.lngLat.lat===t[1]}Re.onSetup=function(){var e=this.newFeature({type:m,properties:{},geometry:{type:v,coordinates:[]}});return this.addFeature(e),this.clearSelectedFeatures(),this.updateUIClasses({mouse:u}),this.activateUIButton(d.POINT),this.setActionableState({trash:!0}),{point:e}},Re.stopDrawingAndRemove=function(e){this.deleteFeature([e.point.id],{silent:!0}),this.changeMode(x.SIMPLE_SELECT)},Re.onTap=Re.onClick=function(e,t){this.updateUIClasses({mouse:h}),e.point.updateCoordinate("",t.lngLat.lng,t.lngLat.lat),this.map.fire(A,{features:[e.point.toGeoJSON()]}),this.changeMode(x.SIMPLE_SELECT,{featureIds:[e.point.id]})},Re.onStop=function(e){this.activateUIButton(),e.point.getCoordinate().length||this.deleteFeature([e.point.id],{silent:!0})},Re.toDisplayFeatures=function(e,t,n){var r=t.properties.id===e.point.id;if(t.properties.active=r?T:B,!r)return n(t)},Re.onTrash=Re.stopDrawingAndRemove,Re.onKeyUp=function(e,t){if(fe(t)||pe(t))return this.stopDrawingAndRemove(e,t)};var Ue={onSetup:function(){var e=this.newFeature({type:m,properties:{},geometry:{type:g,coordinates:[[]]}});return this.addFeature(e),this.clearSelectedFeatures(),_e(this),this.updateUIClasses({mouse:u}),this.activateUIButton(d.POLYGON),this.setActionableState({trash:!0}),{polygon:e,currentVertexPosition:0}},clickAnywhere:function(e,t){if(e.currentVertexPosition>0&&Fe(t,e.polygon.coordinates[0][e.currentVertexPosition-1]))return this.changeMode(x.SIMPLE_SELECT,{featureIds:[e.polygon.id]});this.updateUIClasses({mouse:u}),e.polygon.updateCoordinate("0."+e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),e.currentVertexPosition++,e.polygon.updateCoordinate("0."+e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat)},clickOnVertex:function(e){return this.changeMode(x.SIMPLE_SELECT,{featureIds:[e.polygon.id]})},onMouseMove:function(e,t){e.polygon.updateCoordinate("0."+e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),ue(t)&&this.updateUIClasses({mouse:f})}};Ue.onTap=Ue.onClick=function(e,t){return ue(t)?this.clickOnVertex(e,t):this.clickAnywhere(e,t)},Ue.onKeyUp=function(e,t){fe(t)?(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(x.SIMPLE_SELECT)):pe(t)&&this.changeMode(x.SIMPLE_SELECT,{featureIds:[e.polygon.id]})},Ue.onStop=function(e){this.updateUIClasses({mouse:p}),be(this),this.activateUIButton(),void 0!==this.getFeature(e.polygon.id)&&(e.polygon.removeCoordinate("0."+e.currentVertexPosition),e.polygon.isValid()?this.map.fire(A,{features:[e.polygon.toGeoJSON()]}):(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(x.SIMPLE_SELECT,{},{silent:!0})))},Ue.toDisplayFeatures=function(e,t,n){var r=t.properties.id===e.polygon.id;if(t.properties.active=r?T:B,!r)return n(t);if(0!==t.geometry.coordinates.length){var i=t.geometry.coordinates[0].length;if(!(i<3)){if(t.properties.meta=C,n(ye(e.polygon.id,t.geometry.coordinates[0][0],"0.0",!1)),i>3){var o=t.geometry.coordinates[0].length-3;n(ye(e.polygon.id,t.geometry.coordinates[0][o],"0."+o,!1))}if(i<=4){var a=[[t.geometry.coordinates[0][0][0],t.geometry.coordinates[0][0][1]],[t.geometry.coordinates[0][1][0],t.geometry.coordinates[0][1][1]]];if(n({type:m,properties:t.properties,geometry:{coordinates:a,type:y}}),3===i)return}return n(t)}}},Ue.onTrash=function(e){this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(x.SIMPLE_SELECT)};var Ne={onSetup:function(e){var t,n,r=(e=e||{}).featureId,i="forward";if(r){if(!(t=this.getFeature(r)))throw new Error("Could not find a feature with the provided featureId");var o=e.from;if(o&&"Feature"===o.type&&o.geometry&&"Point"===o.geometry.type&&(o=o.geometry),o&&"Point"===o.type&&o.coordinates&&2===o.coordinates.length&&(o=o.coordinates),!o||!Array.isArray(o))throw new Error("Please use the `from` property to indicate which point to continue the line from");var a=t.coordinates.length-1;if(t.coordinates[a][0]===o[0]&&t.coordinates[a][1]===o[1])n=a+1,t.addCoordinate.apply(t,[n].concat(t.coordinates[a]));else{if(t.coordinates[0][0]!==o[0]||t.coordinates[0][1]!==o[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");i="backwards",n=0,t.addCoordinate.apply(t,[n].concat(t.coordinates[0]))}}else t=this.newFeature({type:m,properties:{},geometry:{type:y,coordinates:[]}}),n=0,this.addFeature(t);return this.clearSelectedFeatures(),_e(this),this.updateUIClasses({mouse:u}),this.activateUIButton(d.LINE),this.setActionableState({trash:!0}),{line:t,currentVertexPosition:n,direction:i}},clickAnywhere:function(e,t){if(e.currentVertexPosition>0&&Fe(t,e.line.coordinates[e.currentVertexPosition-1])||"backwards"===e.direction&&Fe(t,e.line.coordinates[e.currentVertexPosition+1]))return this.changeMode(x.SIMPLE_SELECT,{featureIds:[e.line.id]});this.updateUIClasses({mouse:u}),e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),"forward"===e.direction?(e.currentVertexPosition++,e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat)):e.line.addCoordinate(0,t.lngLat.lng,t.lngLat.lat)},clickOnVertex:function(e){return this.changeMode(x.SIMPLE_SELECT,{featureIds:[e.line.id]})},onMouseMove:function(e,t){e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),ue(t)&&this.updateUIClasses({mouse:f})}};Ne.onTap=Ne.onClick=function(e,t){if(ue(t))return this.clickOnVertex(e,t);this.clickAnywhere(e,t)},Ne.onKeyUp=function(e,t){pe(t)?this.changeMode(x.SIMPLE_SELECT,{featureIds:[e.line.id]}):fe(t)&&(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(x.SIMPLE_SELECT))},Ne.onStop=function(e){be(this),this.activateUIButton(),void 0!==this.getFeature(e.line.id)&&(e.line.removeCoordinate(""+e.currentVertexPosition),e.line.isValid()?this.map.fire(A,{features:[e.line.toGeoJSON()]}):(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(x.SIMPLE_SELECT,{},{silent:!0})))},Ne.onTrash=function(e){this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(x.SIMPLE_SELECT)},Ne.toDisplayFeatures=function(e,t,n){var r=t.properties.id===e.line.id;if(t.properties.active=r?T:B,!r)return n(t);t.geometry.coordinates.length<2||(t.properties.meta=C,n(ye(e.line.id,t.geometry.coordinates["forward"===e.direction?t.geometry.coordinates.length-2:1],""+("forward"===e.direction?t.geometry.coordinates.length-2:1),!1)),n(t))};var je={simple_select:Oe,direct_select:Le,draw_point:Re,draw_polygon:Ue,draw_line_string:Ne},Ve={defaultMode:x.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}],modes:je,controls:{},userProperties:!1},Ge={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},qe={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function We(e,t){return e.map((function(e){return e.source?e:ne(e,{id:e.id+"."+t,source:"hot"===t?l:c})}))}var He=N((function(e,t){var r="[object Arguments]",i="[object Map]",o="[object Object]",a="[object Set]",s=/^\[object .+?Constructor\]$/,l=/^(?:0|[1-9]\d*)$/,c={};c["[object Float32Array]"]=c["[object Float64Array]"]=c["[object Int8Array]"]=c["[object Int16Array]"]=c["[object Int32Array]"]=c["[object Uint8Array]"]=c["[object Uint8ClampedArray]"]=c["[object Uint16Array]"]=c["[object Uint32Array]"]=!0,c[r]=c["[object Array]"]=c["[object ArrayBuffer]"]=c["[object Boolean]"]=c["[object DataView]"]=c["[object Date]"]=c["[object Error]"]=c["[object Function]"]=c[i]=c["[object Number]"]=c[o]=c["[object RegExp]"]=c[a]=c["[object String]"]=c["[object WeakMap]"]=!1;var u="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,h="object"==typeof self&&self&&self.Object===Object&&self,f=u||h||Function("return this")(),p=t&&!t.nodeType&&t,d=p&&e&&!e.nodeType&&e,m=d&&d.exports===p,g=m&&u.process,y=function(){try{return g&&g.binding&&g.binding("util")}catch(e){}}(),v=y&&y.isTypedArray;function b(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function _(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function x(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var A,w,C,E=Array.prototype,S=Function.prototype,T=Object.prototype,B=f["__core-js_shared__"],k=S.toString,M=T.hasOwnProperty,P=(A=/[^.]+$/.exec(B&&B.keys&&B.keys.IE_PROTO||""))?"Symbol(src)_1."+A:"",I=T.toString,O=RegExp("^"+k.call(M).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),D=m?f.Buffer:void 0,z=f.Symbol,L=f.Uint8Array,R=T.propertyIsEnumerable,F=E.splice,U=z?z.toStringTag:void 0,N=Object.getOwnPropertySymbols,j=D?D.isBuffer:void 0,V=(w=Object.keys,C=Object,function(e){return w(C(e))}),G=de(f,"DataView"),q=de(f,"Map"),W=de(f,"Promise"),H=de(f,"Set"),$=de(f,"WeakMap"),X=de(Object,"create"),Z=ve(G),Y=ve(q),K=ve(W),J=ve(H),Q=ve($),ee=z?z.prototype:void 0,te=ee?ee.valueOf:void 0;function ne(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function re(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ie(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function oe(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ie;++t<n;)this.add(e[t])}function ae(e){var t=this.__data__=new re(e);this.size=t.size}function se(e,t){for(var n=e.length;n--;)if(be(e[n][0],t))return n;return-1}function le(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":U&&U in Object(e)?function(e){var t=M.call(e,U),n=e[U];try{e[U]=void 0;var r=!0}catch(e){}var i=I.call(e);return r&&(t?e[U]=n:delete e[U]),i}(e):function(e){return I.call(e)}(e)}function ce(e){return Se(e)&&le(e)==r}function ue(e,t,n,s,l){return e===t||(null==e||null==t||!Se(e)&&!Se(t)?e!=e&&t!=t:function(e,t,n,s,l,c){var u=xe(e),h=xe(t),f=u?"[object Array]":ge(e),p=h?"[object Array]":ge(t),d=(f=f==r?o:f)==o,m=(p=p==r?o:p)==o,g=f==p;if(g&&Ae(e)){if(!Ae(t))return!1;u=!0,d=!1}if(g&&!d)return c||(c=new ae),u||Te(e)?he(e,t,n,s,l,c):function(e,t,n,r,o,s,l){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!s(new L(e),new L(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return be(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case i:var c=_;case a:var u=1&r;if(c||(c=x),e.size!=t.size&&!u)return!1;var h=l.get(e);if(h)return h==t;r|=2,l.set(e,t);var f=he(c(e),c(t),r,o,s,l);return l.delete(e),f;case"[object Symbol]":if(te)return te.call(e)==te.call(t)}return!1}(e,t,f,n,s,l,c);if(!(1&n)){var y=d&&M.call(e,"__wrapped__"),v=m&&M.call(t,"__wrapped__");if(y||v){var b=y?e.value():e,A=v?t.value():t;return c||(c=new ae),l(b,A,n,s,c)}}return!!g&&(c||(c=new ae),function(e,t,n,r,i,o){var a=1&n,s=fe(e),l=s.length;if(l!=fe(t).length&&!a)return!1;for(var c=l;c--;){var u=s[c];if(!(a?u in t:M.call(t,u)))return!1}var h=o.get(e);if(h&&o.get(t))return h==t;var f=!0;o.set(e,t),o.set(t,e);for(var p=a;++c<l;){var d=e[u=s[c]],m=t[u];if(r)var g=a?r(m,d,u,t,e,o):r(d,m,u,e,t,o);if(!(void 0===g?d===m||i(d,m,n,r,o):g)){f=!1;break}p||(p="constructor"==u)}if(f&&!p){var y=e.constructor,v=t.constructor;y==v||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof v&&v instanceof v||(f=!1)}return o.delete(e),o.delete(t),f}(e,t,n,s,l,c))}(e,t,n,s,ue,l))}function he(e,t,n,r,i,o){var a=1&n,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=o.get(e);if(c&&o.get(t))return c==t;var u=-1,h=!0,f=2&n?new oe:void 0;for(o.set(e,t),o.set(t,e);++u<s;){var p=e[u],d=t[u];if(r)var m=a?r(d,p,u,t,e,o):r(p,d,u,e,t,o);if(void 0!==m){if(m)continue;h=!1;break}if(f){if(!b(t,(function(e,t){if(a=t,!f.has(a)&&(p===e||i(p,e,n,r,o)))return f.push(t);var a}))){h=!1;break}}else if(p!==d&&!i(p,d,n,r,o)){h=!1;break}}return o.delete(e),o.delete(t),h}function fe(e){return function(e,t,n){var r=t(e);return xe(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,Be,me)}function pe(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function de(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Ee(e)||function(e){return!!P&&P in e}(e))&&(we(e)?O:s).test(ve(e))}(n)?n:void 0}ne.prototype.clear=function(){this.__data__=X?X(null):{},this.size=0},ne.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ne.prototype.get=function(e){var t=this.__data__;if(X){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return M.call(t,e)?t[e]:void 0},ne.prototype.has=function(e){var t=this.__data__;return X?void 0!==t[e]:M.call(t,e)},ne.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=X&&void 0===t?"__lodash_hash_undefined__":t,this},re.prototype.clear=function(){this.__data__=[],this.size=0},re.prototype.delete=function(e){var t=this.__data__,n=se(t,e);return!(n<0||(n==t.length-1?t.pop():F.call(t,n,1),--this.size,0))},re.prototype.get=function(e){var t=this.__data__,n=se(t,e);return n<0?void 0:t[n][1]},re.prototype.has=function(e){return se(this.__data__,e)>-1},re.prototype.set=function(e,t){var n=this.__data__,r=se(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},ie.prototype.clear=function(){this.size=0,this.__data__={hash:new ne,map:new(q||re),string:new ne}},ie.prototype.delete=function(e){var t=pe(this,e).delete(e);return this.size-=t?1:0,t},ie.prototype.get=function(e){return pe(this,e).get(e)},ie.prototype.has=function(e){return pe(this,e).has(e)},ie.prototype.set=function(e,t){var n=pe(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},oe.prototype.add=oe.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},oe.prototype.has=function(e){return this.__data__.has(e)},ae.prototype.clear=function(){this.__data__=new re,this.size=0},ae.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},ae.prototype.get=function(e){return this.__data__.get(e)},ae.prototype.has=function(e){return this.__data__.has(e)},ae.prototype.set=function(e,t){var n=this.__data__;if(n instanceof re){var r=n.__data__;if(!q||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ie(r)}return n.set(e,t),this.size=n.size,this};var me=N?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a)&&(o[i++]=a)}return o}(N(e),(function(t){return R.call(e,t)})))}:function(){return[]},ge=le;function ye(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||l.test(e))&&e>-1&&e%1==0&&e<t}function ve(e){if(null!=e){try{return k.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function be(e,t){return e===t||e!=e&&t!=t}(G&&"[object DataView]"!=ge(new G(new ArrayBuffer(1)))||q&&ge(new q)!=i||W&&"[object Promise]"!=ge(W.resolve())||H&&ge(new H)!=a||$&&"[object WeakMap]"!=ge(new $))&&(ge=function(e){var t=le(e),n=t==o?e.constructor:void 0,r=n?ve(n):"";if(r)switch(r){case Z:return"[object DataView]";case Y:return i;case K:return"[object Promise]";case J:return a;case Q:return"[object WeakMap]"}return t});var _e=ce(function(){return arguments}())?ce:function(e){return Se(e)&&M.call(e,"callee")&&!R.call(e,"callee")},xe=Array.isArray,Ae=j||function(){return!1};function we(e){if(!Ee(e))return!1;var t=le(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ce(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Ee(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Se(e){return null!=e&&"object"==typeof e}var Te=v?function(e){return function(t){return e(t)}}(v):function(e){return Se(e)&&Ce(e.length)&&!!c[le(e)]};function Be(e){return null!=(t=e)&&Ce(t.length)&&!we(t)?function(e,t){var n=xe(e),r=!n&&_e(e),i=!n&&!r&&Ae(e),o=!n&&!r&&!i&&Te(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=s.length;for(var c in e)!t&&!M.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ye(c,l))||s.push(c);return s}(e):function(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||T))return V(e);var t,n,r=[];for(var i in Object(e))M.call(e,i)&&"constructor"!=i&&r.push(i);return r}(e);var t}e.exports=function(e,t){return ue(e,t)}})),$e={Polygon:W,LineString:q,Point:G,MultiPolygon:X,MultiLineString:X,MultiPoint:X};var Xe=function(e,t){var n={options:e=function(e){void 0===e&&(e={});var t=ne(e);return e.controls||(t.controls={}),!1===e.displayControlsDefault?t.controls=ne(qe,e.controls):t.controls=ne(Ge,e.controls),(t=ne(Ve,t)).styles=We(t.styles,"cold").concat(We(t.styles,"hot")),t}(e)};t=function(e,t){return t.modes=x,t.getFeatureIdsAt=function(t){return D.click({point:t},null,e).map((function(e){return e.properties.id}))},t.getSelectedIds=function(){return e.store.getSelectedIds()},t.getSelected=function(){return{type:b,features:e.store.getSelectedIds().map((function(t){return e.store.get(t)})).map((function(e){return e.toGeoJSON()}))}},t.getSelectedPoints=function(){return{type:b,features:e.store.getSelectedCoordinates().map((function(e){return{type:m,properties:{},geometry:{type:v,coordinates:e.coordinates}}}))}},t.set=function(n){if(void 0===n.type||n.type!==b||!Array.isArray(n.features))throw new Error("Invalid FeatureCollection");var r=e.store.createRenderBatch(),i=e.store.getAllIds().slice(),o=t.add(n),a=new I(o);return(i=i.filter((function(e){return!a.has(e)}))).length&&t.delete(i),r(),o},t.add=function(t){var n=JSON.parse(JSON.stringify(xe(t))).features.map((function(t){if(t.id=t.id||j(),null===t.geometry)throw new Error("Invalid geometry: null");if(void 0===e.store.get(t.id)||e.store.get(t.id).type!==t.geometry.type){var n=$e[t.geometry.type];if(void 0===n)throw new Error("Invalid geometry type: "+t.geometry.type+".");var r=new n(e,t);e.store.add(r)}else{var i=e.store.get(t.id);i.properties=t.properties,He(i.getCoordinates(),t.geometry.coordinates)||i.incomingCoords(t.geometry.coordinates)}return t.id}));return e.store.render(),n},t.get=function(t){var n=e.store.get(t);if(n)return n.toGeoJSON()},t.getAll=function(){return{type:b,features:e.store.getAll().map((function(e){return e.toGeoJSON()}))}},t.delete=function(n){return e.store.delete(n,{silent:!0}),t.getMode()!==x.DIRECT_SELECT||e.store.getSelectedIds().length?e.store.render():e.events.changeMode(x.SIMPLE_SELECT,void 0,{silent:!0}),t},t.deleteAll=function(){return e.store.delete(e.store.getAllIds(),{silent:!0}),t.getMode()===x.DIRECT_SELECT?e.events.changeMode(x.SIMPLE_SELECT,void 0,{silent:!0}):e.store.render(),t},t.changeMode=function(n,r){return void 0===r&&(r={}),n===x.SIMPLE_SELECT&&t.getMode()===x.SIMPLE_SELECT?(i=r.featureIds||[],o=e.store.getSelectedIds(),i.length===o.length&&JSON.stringify(i.map((function(e){return e})).sort())===JSON.stringify(o.map((function(e){return e})).sort())||(e.store.setSelected(r.featureIds,{silent:!0}),e.store.render()),t):(n===x.DIRECT_SELECT&&t.getMode()===x.DIRECT_SELECT&&r.featureId===e.store.getSelectedIds()[0]||e.events.changeMode(n,r,{silent:!0}),t);var i,o},t.getMode=function(){return e.events.getMode()},t.trash=function(){return e.events.trash({silent:!0}),t},t.combineFeatures=function(){return e.events.combineFeatures({silent:!0}),t},t.uncombineFeatures=function(){return e.events.uncombineFeatures({silent:!0}),t},t.setFeatureProperty=function(n,r,i){return e.store.setFeatureProperty(n,r,i),t},t}(n,t),n.api=t;var r=oe(n);return t.onAdd=r.onAdd,t.onRemove=r.onRemove,t.types=d,t.options=e,t};function Ze(e){Xe(e,this)}return Ze.modes=je,Ze}()},59848:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var r=n(6158),i=n.n(r),o=n(83078),a=n(93379),s=n.n(a),l=n(30507);function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}s()(l.Z,{insert:"head",singleton:!1}),l.Z.locals;var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t}var t,n;return t=e,n=[{key:"initMap",value:function(e){i().accessToken=this.options.mapBoxAccessToken;var t=new(i().Map)({container:e.container,style:this.options.mapboxStyle,center:[e.start_lng,e.start_lat],zoom:e.start_zoom,attributionControl:!1});return t.dragRotate.disable(),t.touchZoomRotate.disableRotation(),this.map=t,t}},{key:"initOverlay",value:function(e){var t=new o.Z({map:this.map,render:e.render});return t.map.on("click",(function(n){var r=t.l2p(n.lngLat);n.ba=r;var i={world:{x:n.ba.x,y:n.ba.y},pixel:{x:n.point.x,y:n.point.y},latlong:{lat:n.lngLat.lat,lng:n.lngLat.lng}};e.click(i)})),t.map.on("mousemove",(function(n){var r=t.l2p(n.lngLat);n.ba=r;var i={world:{x:n.ba.x,y:n.ba.y},pixel:{x:n.point.x,y:n.point.y},latlong:{lat:n.lngLat.lat,lng:n.lngLat.lng}};e.mousemove(i)})),this.overlay=t,t}}],n&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},83078:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(17187),i=n.n(r),o=n(6158),a=n.n(o),s=n(99477);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function h(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(l,e);var t,n,r,i,o=(r=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(r);if(i){var n=f(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return h(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this)).map=e.map,t.rendercall=e.render,t.parent=t.map.getCanvasContainer(),t.map.getCanvasContainer().style.cursor="default",t.init(),t.update(),t.map.on("move",(function(){t.update()})),t.map.on("moveend",(function(){var e=t.map.getBounds().getCenter(),n=t.map.getZoom(),r=e.lat+","+e.lng+","+n;window.history.replaceState(null,null,"#loc="+r)})),t.map.on("resize",(function(e){t.resize(),t.update()})),t}return t=l,(n=[{key:"init",value:function(){this.ts=256;var e=this.ts-1,t=this.ts-1;this.renderer=new s.CP7({alpha:!0,clearColor:16711680,clearAlpha:1}),this.renderer.setPixelRatio(window.devicePixelRatio),this.canvas=this.renderer.domElement,this.camera=new s.iKG(0,e,0,t,-3e3,3e3),this.camera.position.z=1e3,this.scene=new s.xsS,this.parent.appendChild(this.canvas),this.canvas.style.touchAction="none",this.canvas.style.position="absolute",this.resize(),console.log("webgl is up"),this.animate()}},{key:"add",value:function(e){this.scene.add(e)}},{key:"resize",value:function(){var e=this.map.getCanvas();this.renderer.setSize(e.clientWidth,e.clientHeight)}},{key:"addListener",value:function(){console.warn("suppressing addListener")}},{key:"l2p",value:function(e){return{x:(e.lng+180)/360*this.ts,y:(1-Math.log(Math.tan(e.lat*Math.PI/180)+1/Math.cos(e.lat*Math.PI/180))/Math.PI)/2*Math.pow(2,0)*this.ts}}},{key:"p2l",value:function(e){var t=e.x/this.ts*360-180,n=Math.PI-2*Math.PI*e.y/this.ts;return{lat:180/Math.PI*Math.atan(.5*(Math.exp(n)-Math.exp(-n))),lng:t}}},{key:"gettl",value:function(){var e=this.map.getBounds();return new(a().LngLat)(e.getWest(),e.getNorth())}},{key:"toRadians",value:function(e){return e*(Math.PI/180)}},{key:"update",value:function(){var e=this.gettl(),t=this.l2p(e),n=this.map.getZoom(),r=Math.pow(2,n+1);this.scale=r,this.zoom=n,this.camera.position.x=1*t.x,this.camera.position.y=1*t.y,this.camera.rotation.z=this.toRadians(this.map.getBearing());var i=new s.FM8;this.renderer.getSize(i);var o=i.width,a=i.height;this.camera.scale.x=1*o/256/r,this.camera.scale.y=1*a/256/r;var l=this.map.getBounds(),c={"top-lef":l.getNorthWest(),"bottom-right":l.getSouthEast()};this.emit("bounds-changed",c)}},{key:"animate",value:function(){var e=this.gettl(),t=this.l2p(e),n=this.map.getZoom(),r=Math.pow(2,n+1);this.scale=r,this.zoom=n,this.camera.position.x=1*t.x,this.camera.position.y=1*t.y,this.camera.rotation.z=this.toRadians(this.map.getBearing());var i=new s.FM8;this.renderer.getSize(i);var o=i.width,a=i.height;this.camera.scale.x=1*o/256/r,this.camera.scale.y=1*a/256/r}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(i())},43010:e=>{function t(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=t,t.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},t.prototype.reset=function(){this.attempts=0},t.prototype.setMin=function(e){this.ms=e},t.prototype.setMax=function(e){this.max=e},t.prototype.setJitter=function(e){this.jitter=e}},33704:(e,t)=>{!function(e){"use strict";t.encode=function(t){var n,r=new Uint8Array(t),i=r.length,o="";for(n=0;n<i;n+=3)o+=e[r[n]>>2],o+=e[(3&r[n])<<4|r[n+1]>>4],o+=e[(15&r[n+1])<<2|r[n+2]>>6],o+=e[63&r[n+2]];return i%3==2?o=o.substring(0,o.length-1)+"=":i%3==1&&(o=o.substring(0,o.length-2)+"=="),o},t.decode=function(t){var n,r,i,o,a,s=.75*t.length,l=t.length,c=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var u=new ArrayBuffer(s),h=new Uint8Array(u);for(n=0;n<l;n+=4)r=e.indexOf(t[n]),i=e.indexOf(t[n+1]),o=e.indexOf(t[n+2]),a=e.indexOf(t[n+3]),h[c++]=r<<2|i>>4,h[c++]=(15&i)<<4|o>>2,h[c++]=(3&o)<<6|63&a;return u}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},79742:(e,t)=>{"use strict";t.byteLength=function(e){var t=l(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,o=l(e),a=o[0],s=o[1],c=new i(function(e,t,n){return 3*(t+n)/4-n}(0,a,s)),u=0,h=s>0?a-4:a;for(n=0;n<h;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;return 2===s&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,c[u++]=255&t),1===s&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t),c},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],a=16383,s=0,l=r-i;s<l;s+=a)o.push(c(e,s,s+a>l?l:s+a));return 1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),o.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=o.length;a<s;++a)n[a]=o[a],r[o.charCodeAt(a)]=a;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,r){for(var i,o,a=[],s=t;s<r;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},746:(e,t)=>{"use strict";function n(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}t.INT_BITS=32,t.INT_MAX=2147483647,t.INT_MIN=-1<<31,t.sign=function(e){return(e>0)-(e<0)},t.abs=function(e){var t=e>>31;return(e^t)-t},t.min=function(e,t){return t^(e^t)&-(e<t)},t.max=function(e,t){return e^(e^t)&-(e<t)},t.isPow2=function(e){return!(e&e-1||!e)},t.log2=function(e){var t,n;return t=(e>65535)<<4,t|=n=((e>>>=t)>255)<<3,t|=n=((e>>>=n)>15)<<2,(t|=n=((e>>>=n)>3)<<1)|(e>>>=n)>>1},t.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},t.popCount=function(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},t.countTrailingZeros=n,t.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,1+(e|=e>>>16)},t.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},t.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var r=new Array(256);!function(e){for(var t=0;t<256;++t){var n=t,r=t,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;e[t]=r<<i&255}}(r),t.reverse=function(e){return r[255&e]<<24|r[e>>>8&255]<<16|r[e>>>16&255]<<8|r[e>>>24&255]},t.interleave2=function(e,t){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))<<1},t.deinterleave2=function(e,t){return(e=65535&((e=16711935&((e=252645135&((e=858993459&((e=e>>>t&1431655765)|e>>>1))|e>>>2))|e>>>4))|e>>>16))<<16>>16},t.interleave3=function(e,t,n){return e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2),(e|=(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},t.deinterleave3=function(e,t){return(e=1023&((e=4278190335&((e=251719695&((e=3272356035&((e=e>>>t&1227133513)|e>>>2))|e>>>4))|e>>>8))|e>>>16))<<22>>22},t.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>n(e)+1}},48764:(e,t,n)=>{"use strict";var r=n(79742),i=n(80645),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.lW=l,t.h2=50;var a=2147483647;function s(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return h(e)}return c(e,t,n)}function c(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|m(e,t),r=s(n),i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(j(e,Uint8Array)){var t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return f(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(j(e,ArrayBuffer)||e&&j(e.buffer,ArrayBuffer))return p(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(j(e,SharedArrayBuffer)||e&&j(e.buffer,SharedArrayBuffer)))return p(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return l.from(r,t,n);var i=function(e){if(l.isBuffer(e)){var t=0|d(e.length),n=s(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||V(e.length)?s(0):f(e):"Buffer"===e.type&&Array.isArray(e.data)?f(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function h(e){return u(e),s(e<0?0:0|d(e))}function f(e){for(var t=e.length<0?0:0|d(e.length),n=s(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function p(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,l.prototype),r}function d(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function m(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||j(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return U(e).length;default:if(i)return r?-1:F(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return M(this,t,n);case"utf8":case"utf-8":return S(this,t,n);case"ascii":return B(this,t,n);case"latin1":case"binary":return k(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function y(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function v(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),V(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,r,i){var o,a=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var u=-1;for(o=n;o<s;o++)if(c(e,o)===c(t,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===l)return u*a}else-1!==u&&(o-=o-u),u=-1}else for(n+l>s&&(n=s-l),o=n;o>=0;o--){for(var h=!0,f=0;f<l;f++)if(c(e,o+f)!==c(t,f)){h=!1;break}if(h)return o}return-1}function _(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(V(s))return a;e[n+a]=s}return a}function x(e,t,n,r){return N(F(t,e.length-n),e,n,r)}function A(e,t,n,r){return N(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function w(e,t,n,r){return N(U(t),e,n,r)}function C(e,t,n,r){return N(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function E(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function S(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,l,c=e[i],u=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=n)switch(h){case 1:c<128&&(u=c);break;case 2:128==(192&(o=e[i+1]))&&(l=(31&c)<<6|63&o)>127&&(u=l);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(l=(15&c)<<12|(63&o)<<6|63&a)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(l=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(u=l)}null===u?(u=65533,h=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=h}return function(e){var t=e.length;if(t<=T)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=T));return n}(r)}l.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,n){return c(e,t,n)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,n){return function(e,t,n){return u(e),e<=0?s(e):void 0!==t?"string"==typeof n?s(e).fill(t,n):s(e).fill(t):s(e)}(e,t,n)},l.allocUnsafe=function(e){return h(e)},l.allocUnsafeSlow=function(e){return h(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(j(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),j(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=l.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(j(o,Uint8Array))i+o.length>r.length?l.from(o).copy(r,i):Uint8Array.prototype.set.call(r,o,i);else{if(!l.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i)}i+=o.length}return r},l.byteLength=m,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},l.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?S(this,0,e):g.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",n=t.h2;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},o&&(l.prototype[o]=l.prototype.inspect),l.prototype.compare=function(e,t,n,r,i){if(j(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),c=this.slice(r,i),u=e.slice(t,n),h=0;h<s;++h)if(c[h]!==u[h]){o=c[h],a=u[h];break}return o<a?-1:a<o?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},l.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return x(this,e,t,n);case"ascii":case"latin1":case"binary":return A(this,e,t,n);case"base64":return w(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function B(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function k(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function M(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=G[e[o]];return i}function P(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function I(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,n,r,i,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function D(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function z(e,t,n,r,o){return t=+t,n>>>=0,o||D(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function L(e,t,n,r,o){return t=+t,n>>>=0,o||D(e,0,n,8),i.write(e,t,n,r,52,8),n+8}l.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,l.prototype),r},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||I(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){e>>>=0,t||I(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return e>>>=0,t||I(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||I(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||I(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||I(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||O(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||O(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);O(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},l.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);O(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeFloatLE=function(e,t,n){return z(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return z(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return L(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return L(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,r){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},l.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=l.isBuffer(e)?e:l.from(e,r),s=a.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var R=/[^+/0-9A-Za-z-_]/g;function F(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function U(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(R,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function N(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function j(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function V(e){return e!=e}var G=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}()},34088:e=>{e.exports=function(){for(var e=arguments.length,t=[],n=0;n<e;n++)t[n]=arguments[n];if(0!==(t=t.filter((function(e){return null!=e}))).length)return 1===t.length?t[0]:t.reduce((function(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}))}},94184:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var a=i.apply(null,n);a&&e.push(a)}}else if("object"===o)if(n.toString===Object.prototype.toString)for(var s in n)r.call(n,s)&&n[s]&&e.push(s);else e.push(n.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},16843:e=>{e.exports=function(e){var t=0;e+="x";for(var n=parseInt(65745979961613.07),r=0;r<e.length;r++)t>n&&(t=parseInt(t/137)),t=131*t+e.charCodeAt(r);return t}},14893:(e,t,n)=>{var r=n(16843),i=function(e,t,n){var r=n<.5?n*(1+t):n+t-n*t,i=2*n-r;return[(e/=360)+1/3,e,e-1/3].map((function(e){return e<0&&e++,e>1&&e--,e=e<1/6?i+6*(r-i)*e:e<.5?r:e<2/3?i+6*(r-i)*(2/3-e):i,Math.round(255*e)}))};function o(e){return"[object Array]"===Object.prototype.toString.call(e)}var a=function(e){var t=[(e=e||{}).lightness,e.saturation].map((function(e){return o(e=void 0!==e?e:[.35,.5,.65])?e.concat():[e]}));this.L=t[0],this.S=t[1],"number"==typeof e.hue&&(e.hue={min:e.hue,max:e.hue}),"object"!=typeof e.hue||o(e.hue)||(e.hue=[e.hue]),void 0===e.hue&&(e.hue=[]),this.hueRanges=e.hue.map((function(e){return{min:void 0===e.min?0:e.min,max:void 0===e.max?360:e.max}})),this.hash=e.hash||r};a.prototype.hsl=function(e){var t,n,r=this.hash(e);if(this.hueRanges.length){var i=this.hueRanges[r%this.hueRanges.length];t=r/this.hueRanges.length%727*(i.max-i.min)/727+i.min}else t=r%359;return r=parseInt(r/360),n=this.S[r%this.S.length],r=parseInt(r/this.S.length),[t,n,this.L[r%this.L.length]]},a.prototype.rgb=function(e){var t=this.hsl(e);return i.apply(this,t)},a.prototype.hex=function(e){var t,n=this.rgb(e);return t="#",n.forEach((function(e){e<16&&(t+=0),t+=e.toString(16)})),t},e.exports=a},98767:e=>{function t(e){if(e)return function(e){for(var n in t.prototype)e[n]=t.prototype[n];return e}(e)}e.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t)}return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}},71079:(e,t,n)=>{n(28594),n(99020),n(40857)},19662:(e,t,n)=>{var r=n(17854),i=n(60614),o=n(66330),a=r.TypeError;e.exports=function(e){if(i(e))return e;throw a(o(e)+" is not a function")}},39483:(e,t,n)=>{var r=n(17854),i=n(4411),o=n(66330),a=r.TypeError;e.exports=function(e){if(i(e))return e;throw a(o(e)+" is not a constructor")}},96077:(e,t,n)=>{var r=n(17854),i=n(60614),o=r.String,a=r.TypeError;e.exports=function(e){if("object"==typeof e||i(e))return e;throw a("Can't set "+o(e)+" as a prototype")}},51223:(e,t,n)=>{var r=n(5112),i=n(70030),o=n(3070),a=r("unscopables"),s=Array.prototype;null==s[a]&&o.f(s,a,{configurable:!0,value:i(null)}),e.exports=function(e){s[a][e]=!0}},31530:(e,t,n)=>{"use strict";var r=n(28710).charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},25787:(e,t,n)=>{var r=n(17854),i=n(47976),o=r.TypeError;e.exports=function(e,t){if(i(t,e))return e;throw o("Incorrect invocation")}},19670:(e,t,n)=>{var r=n(17854),i=n(70111),o=r.String,a=r.TypeError;e.exports=function(e){if(i(e))return e;throw a(o(e)+" is not an object")}},24019:e=>{e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},7556:(e,t,n)=>{var r=n(47293);e.exports=r((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},90260:(e,t,n)=>{"use strict";var r,i,o,a=n(24019),s=n(19781),l=n(17854),c=n(60614),u=n(70111),h=n(92597),f=n(70648),p=n(66330),d=n(68880),m=n(31320),g=n(3070).f,y=n(47976),v=n(79518),b=n(27674),_=n(5112),x=n(69711),A=l.Int8Array,w=A&&A.prototype,C=l.Uint8ClampedArray,E=C&&C.prototype,S=A&&v(A),T=w&&v(w),B=Object.prototype,k=l.TypeError,M=_("toStringTag"),P=x("TYPED_ARRAY_TAG"),I=x("TYPED_ARRAY_CONSTRUCTOR"),O=a&&!!b&&"Opera"!==f(l.opera),D=!1,z={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},L={BigInt64Array:8,BigUint64Array:8},R=function(e){if(!u(e))return!1;var t=f(e);return h(z,t)||h(L,t)};for(r in z)(o=(i=l[r])&&i.prototype)?d(o,I,i):O=!1;for(r in L)(o=(i=l[r])&&i.prototype)&&d(o,I,i);if((!O||!c(S)||S===Function.prototype)&&(S=function(){throw k("Incorrect invocation")},O))for(r in z)l[r]&&b(l[r],S);if((!O||!T||T===B)&&(T=S.prototype,O))for(r in z)l[r]&&b(l[r].prototype,T);if(O&&v(E)!==T&&b(E,T),s&&!h(T,M))for(r in D=!0,g(T,M,{get:function(){return u(this)?this[P]:void 0}}),z)l[r]&&d(l[r],P,r);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:O,TYPED_ARRAY_CONSTRUCTOR:I,TYPED_ARRAY_TAG:D&&P,aTypedArray:function(e){if(R(e))return e;throw k("Target is not a typed array")},aTypedArrayConstructor:function(e){if(c(e)&&(!b||y(S,e)))return e;throw k(p(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n,r){if(s){if(n)for(var i in z){var o=l[i];if(o&&h(o.prototype,e))try{delete o.prototype[e]}catch(n){try{o.prototype[e]=t}catch(e){}}}T[e]&&!n||m(T,e,n?t:O&&w[e]||t,r)}},exportTypedArrayStaticMethod:function(e,t,n){var r,i;if(s){if(b){if(n)for(r in z)if((i=l[r])&&h(i,e))try{delete i[e]}catch(e){}if(S[e]&&!n)return;try{return m(S,e,n?t:O&&S[e]||t)}catch(e){}}for(r in z)!(i=l[r])||i[e]&&!n||m(i,e,t)}},isView:function(e){if(!u(e))return!1;var t=f(e);return"DataView"===t||h(z,t)||h(L,t)},isTypedArray:R,TypedArray:S,TypedArrayPrototype:T}},13331:(e,t,n)=>{"use strict";var r=n(17854),i=n(1702),o=n(19781),a=n(24019),s=n(76530),l=n(68880),c=n(12248),u=n(47293),h=n(25787),f=n(19303),p=n(17466),d=n(57067),m=n(11179),g=n(79518),y=n(27674),v=n(8006).f,b=n(3070).f,_=n(21285),x=n(41589),A=n(58003),w=n(29909),C=s.PROPER,E=s.CONFIGURABLE,S=w.get,T=w.set,B="ArrayBuffer",k="Wrong index",M=r.ArrayBuffer,P=M,I=P&&P.prototype,O=r.DataView,D=O&&O.prototype,z=Object.prototype,L=r.Array,R=r.RangeError,F=i(_),U=i([].reverse),N=m.pack,j=m.unpack,V=function(e){return[255&e]},G=function(e){return[255&e,e>>8&255]},q=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},W=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},H=function(e){return N(e,23,4)},$=function(e){return N(e,52,8)},X=function(e,t){b(e.prototype,t,{get:function(){return S(this)[t]}})},Z=function(e,t,n,r){var i=d(n),o=S(e);if(i+t>o.byteLength)throw R(k);var a=S(o.buffer).bytes,s=i+o.byteOffset,l=x(a,s,s+t);return r?l:U(l)},Y=function(e,t,n,r,i,o){var a=d(n),s=S(e);if(a+t>s.byteLength)throw R(k);for(var l=S(s.buffer).bytes,c=a+s.byteOffset,u=r(+i),h=0;h<t;h++)l[c+h]=u[o?h:t-h-1]};if(a){var K=C&&M.name!==B;if(u((function(){M(1)}))&&u((function(){new M(-1)}))&&!u((function(){return new M,new M(1.5),new M(NaN),K&&!E})))K&&E&&l(M,"name",B);else{(P=function(e){return h(this,I),new M(d(e))}).prototype=I;for(var J,Q=v(M),ee=0;Q.length>ee;)(J=Q[ee++])in P||l(P,J,M[J]);I.constructor=P}y&&g(D)!==z&&y(D,z);var te=new O(new P(2)),ne=i(D.setInt8);te.setInt8(0,2147483648),te.setInt8(1,2147483649),!te.getInt8(0)&&te.getInt8(1)||c(D,{setInt8:function(e,t){ne(this,e,t<<24>>24)},setUint8:function(e,t){ne(this,e,t<<24>>24)}},{unsafe:!0})}else I=(P=function(e){h(this,I);var t=d(e);T(this,{bytes:F(L(t),0),byteLength:t}),o||(this.byteLength=t)}).prototype,D=(O=function(e,t,n){h(this,D),h(e,I);var r=S(e).byteLength,i=f(t);if(i<0||i>r)throw R("Wrong offset");if(i+(n=void 0===n?r-i:p(n))>r)throw R("Wrong length");T(this,{buffer:e,byteLength:n,byteOffset:i}),o||(this.buffer=e,this.byteLength=n,this.byteOffset=i)}).prototype,o&&(X(P,"byteLength"),X(O,"buffer"),X(O,"byteLength"),X(O,"byteOffset")),c(D,{getInt8:function(e){return Z(this,1,e)[0]<<24>>24},getUint8:function(e){return Z(this,1,e)[0]},getInt16:function(e){var t=Z(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=Z(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return W(Z(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return W(Z(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return j(Z(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return j(Z(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){Y(this,1,e,V,t)},setUint8:function(e,t){Y(this,1,e,V,t)},setInt16:function(e,t){Y(this,2,e,G,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){Y(this,2,e,G,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){Y(this,4,e,q,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){Y(this,4,e,q,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){Y(this,4,e,H,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){Y(this,8,e,$,t,arguments.length>2?arguments[2]:void 0)}});A(P,B),A(O,"DataView"),e.exports={ArrayBuffer:P,DataView:O}},1048:(e,t,n)=>{"use strict";var r=n(47908),i=n(51400),o=n(26244),a=Math.min;e.exports=[].copyWithin||function(e,t){var n=r(this),s=o(n),l=i(e,s),c=i(t,s),u=arguments.length>2?arguments[2]:void 0,h=a((void 0===u?s:i(u,s))-c,s-l),f=1;for(c<l&&l<c+h&&(f=-1,c+=h-1,l+=h-1);h-- >0;)c in n?n[l]=n[c]:delete n[l],l+=f,c+=f;return n}},21285:(e,t,n)=>{"use strict";var r=n(47908),i=n(51400),o=n(26244);e.exports=function(e){for(var t=r(this),n=o(t),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),l=a>2?arguments[2]:void 0,c=void 0===l?n:i(l,n);c>s;)t[s++]=e;return t}},18533:(e,t,n)=>{"use strict";var r=n(42092).forEach,i=n(9341)("forEach");e.exports=i?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},97745:(e,t,n)=>{var r=n(26244);e.exports=function(e,t){for(var n=0,i=r(t),o=new e(i);i>n;)o[n]=t[n++];return o}},48457:(e,t,n)=>{"use strict";var r=n(17854),i=n(49974),o=n(46916),a=n(47908),s=n(53411),l=n(97659),c=n(4411),u=n(26244),h=n(86135),f=n(18554),p=n(71246),d=r.Array;e.exports=function(e){var t=a(e),n=c(this),r=arguments.length,m=r>1?arguments[1]:void 0,g=void 0!==m;g&&(m=i(m,r>2?arguments[2]:void 0));var y,v,b,_,x,A,w=p(t),C=0;if(!w||this==d&&l(w))for(y=u(t),v=n?new this(y):d(y);y>C;C++)A=g?m(t[C],C):t[C],h(v,C,A);else for(x=(_=f(t,w)).next,v=n?new this:[];!(b=o(x,_)).done;C++)A=g?s(_,m,[b.value,C],!0):b.value,h(v,C,A);return v.length=C,v}},61386:(e,t,n)=>{var r=n(17854),i=n(49974),o=n(1702),a=n(68361),s=n(47908),l=n(34948),c=n(26244),u=n(70030),h=n(97745),f=r.Array,p=o([].push);e.exports=function(e,t,n,r){for(var o,d,m,g=s(e),y=a(g),v=i(t,n),b=u(null),_=c(y),x=0;_>x;x++)m=y[x],(d=l(v(m,x,g)))in b?p(b[d],m):b[d]=[m];if(r&&(o=r(g))!==f)for(d in b)b[d]=h(o,b[d]);return b}},41318:(e,t,n)=>{var r=n(45656),i=n(51400),o=n(26244),a=function(e){return function(t,n,a){var s,l=r(t),c=o(l),u=i(a,c);if(e&&n!=n){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},9671:(e,t,n)=>{var r=n(49974),i=n(68361),o=n(47908),a=n(26244),s=function(e){var t=1==e;return function(n,s,l){for(var c,u=o(n),h=i(u),f=r(s,l),p=a(h);p-- >0;)if(f(c=h[p],p,u))switch(e){case 0:return c;case 1:return p}return t?-1:void 0}};e.exports={findLast:s(0),findLastIndex:s(1)}},42092:(e,t,n)=>{var r=n(49974),i=n(1702),o=n(68361),a=n(47908),s=n(26244),l=n(65417),c=i([].push),u=function(e){var t=1==e,n=2==e,i=3==e,u=4==e,h=6==e,f=7==e,p=5==e||h;return function(d,m,g,y){for(var v,b,_=a(d),x=o(_),A=r(m,g),w=s(x),C=0,E=y||l,S=t?E(d,w):n||f?E(d,0):void 0;w>C;C++)if((p||C in x)&&(b=A(v=x[C],C,_),e))if(t)S[C]=b;else if(b)switch(e){case 3:return!0;case 5:return v;case 6:return C;case 2:c(S,v)}else switch(e){case 4:return!1;case 7:c(S,v)}return h?-1:i||u?u:S}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},86583:(e,t,n)=>{"use strict";var r=n(22104),i=n(45656),o=n(19303),a=n(26244),s=n(9341),l=Math.min,c=[].lastIndexOf,u=!!c&&1/[1].lastIndexOf(1,-0)<0,h=s("lastIndexOf"),f=u||!h;e.exports=f?function(e){if(u)return r(c,this,arguments)||0;var t=i(this),n=a(t),s=n-1;for(arguments.length>1&&(s=l(s,o(arguments[1]))),s<0&&(s=n+s);s>=0;s--)if(s in t&&t[s]===e)return s||0;return-1}:c},81194:(e,t,n)=>{var r=n(47293),i=n(5112),o=n(7392),a=i("species");e.exports=function(e){return o>=51||!r((function(){var t=[];return(t.constructor={})[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},9341:(e,t,n)=>{"use strict";var r=n(47293);e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){return 1},1)}))}},53671:(e,t,n)=>{var r=n(17854),i=n(19662),o=n(47908),a=n(68361),s=n(26244),l=r.TypeError,c=function(e){return function(t,n,r,c){i(n);var u=o(t),h=a(u),f=s(u),p=e?f-1:0,d=e?-1:1;if(r<2)for(;;){if(p in h){c=h[p],p+=d;break}if(p+=d,e?p<0:f<=p)throw l("Reduce of empty array with no initial value")}for(;e?p>=0:f>p;p+=d)p in h&&(c=n(c,h[p],p,u));return c}};e.exports={left:c(!1),right:c(!0)}},41589:(e,t,n)=>{var r=n(17854),i=n(51400),o=n(26244),a=n(86135),s=r.Array,l=Math.max;e.exports=function(e,t,n){for(var r=o(e),c=i(t,r),u=i(void 0===n?r:n,r),h=s(l(u-c,0)),f=0;c<u;c++,f++)a(h,f,e[c]);return h.length=f,h}},50206:(e,t,n)=>{var r=n(1702);e.exports=r([].slice)},94362:(e,t,n)=>{var r=n(41589),i=Math.floor,o=function(e,t){var n=e.length,l=i(n/2);return n<8?a(e,t):s(e,o(r(e,0,l),t),o(r(e,l),t),t)},a=function(e,t){for(var n,r,i=e.length,o=1;o<i;){for(r=o,n=e[o];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==o++&&(e[r]=n)}return e},s=function(e,t,n,r){for(var i=t.length,o=n.length,a=0,s=0;a<i||s<o;)e[a+s]=a<i&&s<o?r(t[a],n[s])<=0?t[a++]:n[s++]:a<i?t[a++]:n[s++];return e};e.exports=o},77475:(e,t,n)=>{var r=n(17854),i=n(43157),o=n(4411),a=n(70111),s=n(5112)("species"),l=r.Array;e.exports=function(e){var t;return i(e)&&(t=e.constructor,(o(t)&&(t===l||i(t.prototype))||a(t)&&null===(t=t[s]))&&(t=void 0)),void 0===t?l:t}},65417:(e,t,n)=>{var r=n(77475);e.exports=function(e,t){return new(r(e))(0===t?0:t)}},21843:(e,t,n)=>{var r=n(26244);e.exports=function(e,t){for(var n=r(e),i=new t(n),o=0;o<n;o++)i[o]=e[n-o-1];return i}},1654:(e,t,n)=>{var r=n(26244),i=n(51400),o=n(19303),a=TypeError,s=Math.max,l=Math.min;e.exports=function(e,t,n){var c,u,h,f,p=n[0],d=n[1],m=r(e),g=i(p,m),y=n.length,v=0;if(0===y?c=u=0:1===y?(c=0,u=m-g):(c=y-2,u=l(s(o(d),0),m-g)),(h=m+c-u)>9007199254740991)throw a("Maximum allowed length exceeded");for(f=new t(h);v<g;v++)f[v]=e[v];for(;v<g+c;v++)f[v]=n[v-g+2];for(;v<h;v++)f[v]=e[v+u-c];return f}},11572:(e,t,n)=>{var r=n(17854),i=n(26244),o=n(19303),a=r.RangeError;e.exports=function(e,t,n,r){var s=i(e),l=o(n),c=l<0?s+l:l;if(c>=s||c<0)throw a("Incorrect index");for(var u=new t(s),h=0;h<s;h++)u[h]=h===c?r:e[h];return u}},14170:e=>{for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n={},r=0;r<66;r++)n[t.charAt(r)]=r;e.exports={itoc:t,ctoi:n}},53411:(e,t,n)=>{var r=n(19670),i=n(99212);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){i(e,"throw",t)}}},17072:(e,t,n)=>{var r=n(5112)("iterator"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},e(o)}catch(e){}return n}},84326:(e,t,n)=>{var r=n(1702),i=r({}.toString),o=r("".slice);e.exports=function(e){return o(i(e),8,-1)}},70648:(e,t,n)=>{var r=n(17854),i=n(51694),o=n(60614),a=n(84326),s=n(5112)("toStringTag"),l=r.Object,c="Arguments"==a(function(){return arguments}());e.exports=i?a:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=l(e),s))?n:c?a(t):"Object"==(r=a(t))&&o(t.callee)?"Arguments":r}},77741:(e,t,n)=>{var r=n(1702),i=Error,o=r("".replace),a=String(i("zxcasd").stack),s=/\n\s*at [^:]*:[^\n]*/,l=s.test(a);e.exports=function(e,t){if(l&&"string"==typeof e&&!i.prepareStackTrace)for(;t--;)e=o(e,s,"");return e}},95631:(e,t,n)=>{"use strict";var r=n(3070).f,i=n(70030),o=n(12248),a=n(49974),s=n(25787),l=n(20408),c=n(70654),u=n(96340),h=n(19781),f=n(62423).fastKey,p=n(29909),d=p.set,m=p.getterFor;e.exports={getConstructor:function(e,t,n,c){var u=e((function(e,r){s(e,p),d(e,{type:t,index:i(null),first:void 0,last:void 0,size:0}),h||(e.size=0),null!=r&&l(r,e[c],{that:e,AS_ENTRIES:n})})),p=u.prototype,g=m(t),y=function(e,t,n){var r,i,o=g(e),a=v(e,t);return a?a.value=n:(o.last=a={index:i=f(t,!0),key:t,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=a),r&&(r.next=a),h?o.size++:e.size++,"F"!==i&&(o.index[i]=a)),e},v=function(e,t){var n,r=g(e),i=f(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return o(p,{clear:function(){for(var e=g(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,h?e.size=0:this.size=0},delete:function(e){var t=this,n=g(t),r=v(t,e);if(r){var i=r.next,o=r.previous;delete n.index[r.index],r.removed=!0,o&&(o.next=i),i&&(i.previous=o),n.first==r&&(n.first=i),n.last==r&&(n.last=o),h?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=g(this),r=a(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!v(this,e)}}),o(p,n?{get:function(e){var t=v(this,e);return t&&t.value},set:function(e,t){return y(this,0===e?0:e,t)}}:{add:function(e){return y(this,e=0===e?0:e,e)}}),h&&r(p,"size",{get:function(){return g(this).size}}),u},setStrong:function(e,t,n){var r=t+" Iterator",i=m(t),o=m(r);c(e,t,(function(e,t){d(this,{type:r,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),u(t)}}},29320:(e,t,n)=>{"use strict";var r=n(1702),i=n(12248),o=n(62423).getWeakData,a=n(19670),s=n(70111),l=n(25787),c=n(20408),u=n(42092),h=n(92597),f=n(29909),p=f.set,d=f.getterFor,m=u.find,g=u.findIndex,y=r([].splice),v=0,b=function(e){return e.frozen||(e.frozen=new _)},_=function(){this.entries=[]},x=function(e,t){return m(e.entries,(function(e){return e[0]===t}))};_.prototype={get:function(e){var t=x(this,e);if(t)return t[1]},has:function(e){return!!x(this,e)},set:function(e,t){var n=x(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=g(this.entries,(function(t){return t[0]===e}));return~t&&y(this.entries,t,1),!!~t}},e.exports={getConstructor:function(e,t,n,r){var u=e((function(e,i){l(e,f),p(e,{type:t,id:v++,frozen:void 0}),null!=i&&c(i,e[r],{that:e,AS_ENTRIES:n})})),f=u.prototype,m=d(t),g=function(e,t,n){var r=m(e),i=o(a(t),!0);return!0===i?b(r).set(t,n):i[r.id]=n,e};return i(f,{delete:function(e){var t=m(this);if(!s(e))return!1;var n=o(e);return!0===n?b(t).delete(e):n&&h(n,t.id)&&delete n[t.id]},has:function(e){var t=m(this);if(!s(e))return!1;var n=o(e);return!0===n?b(t).has(e):n&&h(n,t.id)}}),i(f,n?{get:function(e){var t=m(this);if(s(e)){var n=o(e);return!0===n?b(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return g(this,e,t)}}:{add:function(e){return g(this,e,!0)}}),u}}},77710:(e,t,n)=>{"use strict";var r=n(82109),i=n(17854),o=n(1702),a=n(96114),s=n(31320),l=n(62423),c=n(20408),u=n(25787),h=n(60614),f=n(70111),p=n(47293),d=n(17072),m=n(58003),g=n(79587);e.exports=function(e,t,n){var y=-1!==e.indexOf("Map"),v=-1!==e.indexOf("Weak"),b=y?"set":"add",_=i[e],x=_&&_.prototype,A=_,w={},C=function(e){var t=o(x[e]);s(x,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(v&&!f(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return v&&!f(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(v&&!f(e))&&t(this,0===e?0:e)}:function(e,n){return t(this,0===e?0:e,n),this})};if(a(e,!h(_)||!(v||x.forEach&&!p((function(){(new _).entries().next()})))))A=n.getConstructor(t,e,y,b),l.enable();else if(a(e,!0)){var E=new A,S=E[b](v?{}:-0,1)!=E,T=p((function(){E.has(1)})),B=d((function(e){new _(e)})),k=!v&&p((function(){for(var e=new _,t=5;t--;)e[b](t,t);return!e.has(-0)}));B||((A=t((function(e,t){u(e,x);var n=g(new _,e,A);return null!=t&&c(t,n[b],{that:n,AS_ENTRIES:y}),n}))).prototype=x,x.constructor=A),(T||k)&&(C("delete"),C("has"),y&&C("get")),(k||S)&&C(b),v&&x.clear&&delete x.clear}return w[e]=A,r({global:!0,forced:A!=_},w),m(A,e),v||n.setStrong(A,e,y),A}},99920:(e,t,n)=>{var r=n(92597),i=n(53887),o=n(31236),a=n(3070);e.exports=function(e,t,n){for(var s=i(t),l=a.f,c=o.f,u=0;u<s.length;u++){var h=s[u];r(e,h)||n&&r(n,h)||l(e,h,c(t,h))}}},84964:(e,t,n)=>{var r=n(5112)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(e){}}return!1}},49920:(e,t,n)=>{var r=n(47293);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},14230:(e,t,n)=>{var r=n(1702),i=n(84488),o=n(41340),a=/"/g,s=r("".replace);e.exports=function(e,t,n,r){var l=o(i(e)),c="<"+t;return""!==n&&(c+=" "+n+'="'+s(o(r),a,"&quot;")+'"'),c+">"+l+"</"+t+">"}},24994:(e,t,n)=>{"use strict";var r=n(13383).IteratorPrototype,i=n(70030),o=n(79114),a=n(58003),s=n(97497),l=function(){return this};e.exports=function(e,t,n,c){var u=t+" Iterator";return e.prototype=i(r,{next:o(+!c,n)}),a(e,u,!1,!0),s[u]=l,e}},68880:(e,t,n)=>{var r=n(19781),i=n(3070),o=n(79114);e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},79114:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},86135:(e,t,n)=>{"use strict";var r=n(34948),i=n(3070),o=n(79114);e.exports=function(e,t,n){var a=r(t);a in e?i.f(e,a,o(0,n)):e[a]=n}},85573:(e,t,n)=>{"use strict";var r=n(17854),i=n(1702),o=n(47293),a=n(76650).start,s=r.RangeError,l=Math.abs,c=Date.prototype,u=c.toISOString,h=i(c.getTime),f=i(c.getUTCDate),p=i(c.getUTCFullYear),d=i(c.getUTCHours),m=i(c.getUTCMilliseconds),g=i(c.getUTCMinutes),y=i(c.getUTCMonth),v=i(c.getUTCSeconds);e.exports=o((function(){return"0385-07-25T07:06:39.999Z"!=u.call(new Date(-50000000000001))}))||!o((function(){u.call(new Date(NaN))}))?function(){if(!isFinite(h(this)))throw s("Invalid time value");var e=this,t=p(e),n=m(e),r=t<0?"-":t>9999?"+":"";return r+a(l(t),r?6:4,0)+"-"+a(y(e)+1,2,0)+"-"+a(f(e),2,0)+"T"+a(d(e),2,0)+":"+a(g(e),2,0)+":"+a(v(e),2,0)+"."+a(n,3,0)+"Z"}:u},38709:(e,t,n)=>{"use strict";var r=n(17854),i=n(19670),o=n(92140),a=r.TypeError;e.exports=function(e){if(i(this),"string"===e||"default"===e)e="string";else if("number"!==e)throw a("Incorrect hint");return o(this,e)}},70654:(e,t,n)=>{"use strict";var r=n(82109),i=n(46916),o=n(31913),a=n(76530),s=n(60614),l=n(24994),c=n(79518),u=n(27674),h=n(58003),f=n(68880),p=n(31320),d=n(5112),m=n(97497),g=n(13383),y=a.PROPER,v=a.CONFIGURABLE,b=g.IteratorPrototype,_=g.BUGGY_SAFARI_ITERATORS,x=d("iterator"),A="keys",w="values",C="entries",E=function(){return this};e.exports=function(e,t,n,a,d,g,S){l(n,t,a);var T,B,k,M=function(e){if(e===d&&z)return z;if(!_&&e in O)return O[e];switch(e){case A:case w:case C:return function(){return new n(this,e)}}return function(){return new n(this)}},P=t+" Iterator",I=!1,O=e.prototype,D=O[x]||O["@@iterator"]||d&&O[d],z=!_&&D||M(d),L="Array"==t&&O.entries||D;if(L&&(T=c(L.call(new e)))!==Object.prototype&&T.next&&(o||c(T)===b||(u?u(T,b):s(T[x])||p(T,x,E)),h(T,P,!0,!0),o&&(m[P]=E)),y&&d==w&&D&&D.name!==w&&(!o&&v?f(O,"name",w):(I=!0,z=function(){return i(D,this)})),d)if(B={values:M(w),keys:g?z:M(A),entries:M(C)},S)for(k in B)(_||I||!(k in O))&&p(O,k,B[k]);else r({target:t,proto:!0,forced:_||I},B);return o&&!S||O[x]===z||p(O,x,z,{name:d}),m[t]=z,B}},97235:(e,t,n)=>{var r=n(40857),i=n(92597),o=n(6061),a=n(3070).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||a(t,e,{value:o.f(e)})}},19781:(e,t,n)=>{var r=n(47293);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},80317:(e,t,n)=>{var r=n(17854),i=n(70111),o=r.document,a=i(o)&&i(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},93678:e=>{e.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},48324:e=>{e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},98509:(e,t,n)=>{var r=n(80317)("span").classList,i=r&&r.constructor&&r.constructor.prototype;e.exports=i===Object.prototype?void 0:i},68886:(e,t,n)=>{var r=n(88113).match(/firefox\/(\d+)/i);e.exports=!!r&&+r[1]},7871:e=>{e.exports="object"==typeof window&&"object"!=typeof Deno},30256:(e,t,n)=>{var r=n(88113);e.exports=/MSIE|Trident/.test(r)},71528:(e,t,n)=>{var r=n(88113),i=n(17854);e.exports=/ipad|iphone|ipod/i.test(r)&&void 0!==i.Pebble},6833:(e,t,n)=>{var r=n(88113);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},35268:(e,t,n)=>{var r=n(84326),i=n(17854);e.exports="process"==r(i.process)},71036:(e,t,n)=>{var r=n(88113);e.exports=/web0s(?!.*chrome)/i.test(r)},88113:(e,t,n)=>{var r=n(35005);e.exports=r("navigator","userAgent")||""},7392:(e,t,n)=>{var r,i,o=n(17854),a=n(88113),s=o.process,l=o.Deno,c=s&&s.versions||l&&l.version,u=c&&c.v8;u&&(i=(r=u.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(i=+r[1]),e.exports=i},98008:(e,t,n)=>{var r=n(88113).match(/AppleWebKit\/(\d+)\./);e.exports=!!r&&+r[1]},98770:(e,t,n)=>{var r=n(17854);e.exports=function(e){return r[e].prototype}},80748:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},22914:(e,t,n)=>{var r=n(47293),i=n(79114);e.exports=!r((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",i(1,7)),7!==e.stack)}))},7762:(e,t,n)=>{"use strict";var r=n(19781),i=n(47293),o=n(19670),a=n(70030),s=n(56277),l=Error.prototype.toString,c=i((function(){if(r){var e=a(Object.defineProperty({},"name",{get:function(){return this===e}}));if("true"!==l.call(e))return!0}return"2: 1"!==l.call({message:1,name:2})||"Error"!==l.call({})}));e.exports=c?function(){var e=o(this),t=s(e.name,"Error"),n=s(e.message);return t?n?t+": "+n:t:n}:l},82109:(e,t,n)=>{var r=n(17854),i=n(31236).f,o=n(68880),a=n(31320),s=n(83505),l=n(99920),c=n(96114);e.exports=function(e,t){var n,u,h,f,p,d=e.target,m=e.global,g=e.stat;if(n=m?r:g?r[d]||s(d,{}):(r[d]||{}).prototype)for(u in t){if(f=t[u],h=e.noTargetGet?(p=i(n,u))&&p.value:n[u],!c(m?u:d+(g?".":"#")+u,e.forced)&&void 0!==h){if(typeof f==typeof h)continue;l(f,h)}(e.sham||h&&h.sham)&&o(f,"sham",!0),a(n,u,f,e)}}},47293:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},27007:(e,t,n)=>{"use strict";n(74916);var r=n(1702),i=n(31320),o=n(22261),a=n(47293),s=n(5112),l=n(68880),c=s("species"),u=RegExp.prototype;e.exports=function(e,t,n,h){var f=s(e),p=!a((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),d=p&&!a((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[c]=function(){return n},n.flags="",n[f]=/./[f]),n.exec=function(){return t=!0,null},n[f](""),!t}));if(!p||!d||n){var m=r(/./[f]),g=t(f,""[e],(function(e,t,n,i,a){var s=r(e),l=t.exec;return l===o||l===u.exec?p&&!a?{done:!0,value:m(t,n,i)}:{done:!0,value:s(n,t,i)}:{done:!1}}));i(String.prototype,e,g[0]),i(u,f,g[1])}h&&l(u[f],"sham",!0)}},6790:(e,t,n)=>{"use strict";var r=n(17854),i=n(43157),o=n(26244),a=n(49974),s=r.TypeError,l=function(e,t,n,r,c,u,h,f){for(var p,d,m=c,g=0,y=!!h&&a(h,f);g<r;){if(g in n){if(p=y?y(n[g],g,t):n[g],u>0&&i(p))d=o(p),m=l(e,t,p,d,m,u-1)-1;else{if(m>=9007199254740991)throw s("Exceed the acceptable array length");e[m]=p}m++}g++}return m};e.exports=l},76677:(e,t,n)=>{var r=n(47293);e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},22104:(e,t,n)=>{var r=n(34374),i=Function.prototype,o=i.apply,a=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?a.bind(o):function(){return a.apply(o,arguments)})},49974:(e,t,n)=>{var r=n(1702),i=n(19662),o=n(34374),a=r(r.bind);e.exports=function(e,t){return i(e),void 0===t?e:o?a(e,t):function(){return e.apply(t,arguments)}}},34374:(e,t,n)=>{var r=n(47293);e.exports=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},27065:(e,t,n)=>{"use strict";var r=n(17854),i=n(1702),o=n(19662),a=n(70111),s=n(92597),l=n(50206),c=n(34374),u=r.Function,h=i([].concat),f=i([].join),p={},d=function(e,t,n){if(!s(p,t)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";p[t]=u("C,a","return new C("+f(r,",")+")")}return p[t](e,n)};e.exports=c?u.bind:function(e){var t=o(this),n=t.prototype,r=l(arguments,1),i=function(){var n=h(r,l(arguments));return this instanceof i?d(t,n.length,n):t.apply(e,n)};return a(n)&&(i.prototype=n),i}},46916:(e,t,n)=>{var r=n(34374),i=Function.prototype.call;e.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},76530:(e,t,n)=>{var r=n(19781),i=n(92597),o=Function.prototype,a=r&&Object.getOwnPropertyDescriptor,s=i(o,"name"),l=s&&"something"===function(){}.name,c=s&&(!r||r&&a(o,"name").configurable);e.exports={EXISTS:s,PROPER:l,CONFIGURABLE:c}},1702:(e,t,n)=>{var r=n(34374),i=Function.prototype,o=i.bind,a=i.call,s=r&&o.bind(a,a);e.exports=r?function(e){return e&&s(e)}:function(e){return e&&function(){return a.apply(e,arguments)}}},35005:(e,t,n)=>{var r=n(17854),i=n(60614),o=function(e){return i(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?o(r[e]):r[e]&&r[e][t]}},71246:(e,t,n)=>{var r=n(70648),i=n(58173),o=n(97497),a=n(5112)("iterator");e.exports=function(e){if(null!=e)return i(e,a)||i(e,"@@iterator")||o[r(e)]}},18554:(e,t,n)=>{var r=n(17854),i=n(46916),o=n(19662),a=n(19670),s=n(66330),l=n(71246),c=r.TypeError;e.exports=function(e,t){var n=arguments.length<2?l(e):t;if(o(n))return a(i(n,e));throw c(s(e)+" is not iterable")}},58173:(e,t,n)=>{var r=n(19662);e.exports=function(e,t){var n=e[t];return null==n?void 0:r(n)}},10647:(e,t,n)=>{var r=n(1702),i=n(47908),o=Math.floor,a=r("".charAt),s=r("".replace),l=r("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,u=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,r,h,f){var p=n+e.length,d=r.length,m=u;return void 0!==h&&(h=i(h),m=c),s(f,m,(function(i,s){var c;switch(a(s,0)){case"$":return"$";case"&":return e;case"`":return l(t,0,n);case"'":return l(t,p);case"<":c=h[l(s,1,-1)];break;default:var u=+s;if(0===u)return i;if(u>d){var f=o(u/10);return 0===f?i:f<=d?void 0===r[f-1]?a(s,1):r[f-1]+a(s,1):i}c=r[u-1]}return void 0===c?"":c}))}},17854:(e,t,n)=>{var r=function(e){return e&&e.Math==Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},92597:(e,t,n)=>{var r=n(1702),i=n(47908),o=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},3501:e=>{e.exports={}},842:(e,t,n)=>{var r=n(17854);e.exports=function(e,t){var n=r.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))}},60490:(e,t,n)=>{var r=n(35005);e.exports=r("document","documentElement")},64664:(e,t,n)=>{var r=n(19781),i=n(47293),o=n(80317);e.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},11179:(e,t,n)=>{var r=n(17854).Array,i=Math.abs,o=Math.pow,a=Math.floor,s=Math.log,l=Math.LN2;e.exports={pack:function(e,t,n){var c,u,h,f=r(n),p=8*n-t-1,d=(1<<p)-1,m=d>>1,g=23===t?o(2,-24)-o(2,-77):0,y=e<0||0===e&&1/e<0?1:0,v=0;for((e=i(e))!=e||e===1/0?(u=e!=e?1:0,c=d):(c=a(s(e)/l),e*(h=o(2,-c))<1&&(c--,h*=2),(e+=c+m>=1?g/h:g*o(2,1-m))*h>=2&&(c++,h/=2),c+m>=d?(u=0,c=d):c+m>=1?(u=(e*h-1)*o(2,t),c+=m):(u=e*o(2,m-1)*o(2,t),c=0));t>=8;)f[v++]=255&u,u/=256,t-=8;for(c=c<<t|u,p+=t;p>0;)f[v++]=255&c,c/=256,p-=8;return f[--v]|=128*y,f},unpack:function(e,t){var n,r=e.length,i=8*r-t-1,a=(1<<i)-1,s=a>>1,l=i-7,c=r-1,u=e[c--],h=127&u;for(u>>=7;l>0;)h=256*h+e[c--],l-=8;for(n=h&(1<<-l)-1,h>>=-l,l+=t;l>0;)n=256*n+e[c--],l-=8;if(0===h)h=1-s;else{if(h===a)return n?NaN:u?-1/0:1/0;n+=o(2,t),h-=s}return(u?-1:1)*n*o(2,h-t)}}},68361:(e,t,n)=>{var r=n(17854),i=n(1702),o=n(47293),a=n(84326),s=r.Object,l=i("".split);e.exports=o((function(){return!s("z").propertyIsEnumerable(0)}))?function(e){return"String"==a(e)?l(e,""):s(e)}:s},79587:(e,t,n)=>{var r=n(60614),i=n(70111),o=n(27674);e.exports=function(e,t,n){var a,s;return o&&r(a=t.constructor)&&a!==n&&i(s=a.prototype)&&s!==n.prototype&&o(e,s),e}},42788:(e,t,n)=>{var r=n(1702),i=n(60614),o=n(5465),a=r(Function.toString);i(o.inspectSource)||(o.inspectSource=function(e){return a(e)}),e.exports=o.inspectSource},58340:(e,t,n)=>{var r=n(70111),i=n(68880);e.exports=function(e,t){r(t)&&"cause"in t&&i(e,"cause",t.cause)}},62423:(e,t,n)=>{var r=n(82109),i=n(1702),o=n(3501),a=n(70111),s=n(92597),l=n(3070).f,c=n(8006),u=n(1156),h=n(52050),f=n(69711),p=n(76677),d=!1,m=f("meta"),g=0,y=function(e){l(e,m,{value:{objectID:"O"+g++,weakData:{}}})},v=e.exports={enable:function(){v.enable=function(){},d=!0;var e=c.f,t=i([].splice),n={};n[m]=1,e(n).length&&(c.f=function(n){for(var r=e(n),i=0,o=r.length;i<o;i++)if(r[i]===m){t(r,i,1);break}return r},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:u.f}))},fastKey:function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,m)){if(!h(e))return"F";if(!t)return"E";y(e)}return e[m].objectID},getWeakData:function(e,t){if(!s(e,m)){if(!h(e))return!0;if(!t)return!1;y(e)}return e[m].weakData},onFreeze:function(e){return p&&d&&h(e)&&!s(e,m)&&y(e),e}};o[m]=!0},29909:(e,t,n)=>{var r,i,o,a=n(68536),s=n(17854),l=n(1702),c=n(70111),u=n(68880),h=n(92597),f=n(5465),p=n(6200),d=n(3501),m="Object already initialized",g=s.TypeError,y=s.WeakMap;if(a||f.state){var v=f.state||(f.state=new y),b=l(v.get),_=l(v.has),x=l(v.set);r=function(e,t){if(_(v,e))throw new g(m);return t.facade=e,x(v,e,t),t},i=function(e){return b(v,e)||{}},o=function(e){return _(v,e)}}else{var A=p("state");d[A]=!0,r=function(e,t){if(h(e,A))throw new g(m);return t.facade=e,u(e,A,t),t},i=function(e){return h(e,A)?e[A]:{}},o=function(e){return h(e,A)}}e.exports={set:r,get:i,has:o,enforce:function(e){return o(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=i(t)).type!==e)throw g("Incompatible receiver, "+e+" required");return n}}}},97659:(e,t,n)=>{var r=n(5112),i=n(97497),o=r("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||a[o]===e)}},43157:(e,t,n)=>{var r=n(84326);e.exports=Array.isArray||function(e){return"Array"==r(e)}},60614:e=>{e.exports=function(e){return"function"==typeof e}},4411:(e,t,n)=>{var r=n(1702),i=n(47293),o=n(60614),a=n(70648),s=n(35005),l=n(42788),c=function(){},u=[],h=s("Reflect","construct"),f=/^\s*(?:class|function)\b/,p=r(f.exec),d=!f.exec(c),m=function(e){if(!o(e))return!1;try{return h(c,u,e),!0}catch(e){return!1}},g=function(e){if(!o(e))return!1;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!p(f,l(e))}catch(e){return!0}};g.sham=!0,e.exports=!h||i((function(){var e;return m(m.call)||!m(Object)||!m((function(){e=!0}))||e}))?g:m},45032:(e,t,n)=>{var r=n(92597);e.exports=function(e){return void 0!==e&&(r(e,"value")||r(e,"writable"))}},96114:(e,t,n)=>{var r=n(47293),i=n(60614),o=/#|\.prototype\./,a=function(e,t){var n=l[s(e)];return n==u||n!=c&&(i(t)?r(t):!!t)},s=a.normalize=function(e){return String(e).replace(o,".").toLowerCase()},l=a.data={},c=a.NATIVE="N",u=a.POLYFILL="P";e.exports=a},55988:(e,t,n)=>{var r=n(70111),i=Math.floor;e.exports=Number.isInteger||function(e){return!r(e)&&isFinite(e)&&i(e)===e}},70111:(e,t,n)=>{var r=n(60614);e.exports=function(e){return"object"==typeof e?null!==e:r(e)}},31913:e=>{e.exports=!1},47850:(e,t,n)=>{var r=n(70111),i=n(84326),o=n(5112)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},52190:(e,t,n)=>{var r=n(17854),i=n(35005),o=n(60614),a=n(47976),s=n(43307),l=r.Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=i("Symbol");return o(t)&&a(t.prototype,l(e))}},20408:(e,t,n)=>{var r=n(17854),i=n(49974),o=n(46916),a=n(19670),s=n(66330),l=n(97659),c=n(26244),u=n(47976),h=n(18554),f=n(71246),p=n(99212),d=r.TypeError,m=function(e,t){this.stopped=e,this.result=t},g=m.prototype;e.exports=function(e,t,n){var r,y,v,b,_,x,A,w=n&&n.that,C=!(!n||!n.AS_ENTRIES),E=!(!n||!n.IS_ITERATOR),S=!(!n||!n.INTERRUPTED),T=i(t,w),B=function(e){return r&&p(r,"normal",e),new m(!0,e)},k=function(e){return C?(a(e),S?T(e[0],e[1],B):T(e[0],e[1])):S?T(e,B):T(e)};if(E)r=e;else{if(!(y=f(e)))throw d(s(e)+" is not iterable");if(l(y)){for(v=0,b=c(e);b>v;v++)if((_=k(e[v]))&&u(g,_))return _;return new m(!1)}r=h(e,y)}for(x=r.next;!(A=o(x,r)).done;){try{_=k(A.value)}catch(e){p(r,"throw",e)}if("object"==typeof _&&_&&u(g,_))return _}return new m(!1)}},99212:(e,t,n)=>{var r=n(46916),i=n(19670),o=n(58173);e.exports=function(e,t,n){var a,s;i(e);try{if(!(a=o(e,"return"))){if("throw"===t)throw n;return n}a=r(a,e)}catch(e){s=!0,a=e}if("throw"===t)throw n;if(s)throw a;return i(a),n}},13383:(e,t,n)=>{"use strict";var r,i,o,a=n(47293),s=n(60614),l=n(70030),c=n(79518),u=n(31320),h=n(5112),f=n(31913),p=h("iterator"),d=!1;[].keys&&("next"in(o=[].keys())?(i=c(c(o)))!==Object.prototype&&(r=i):d=!0),null==r||a((function(){var e={};return r[p].call(e)!==e}))?r={}:f&&(r=l(r)),s(r[p])||u(r,p,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:d}},97497:e=>{e.exports={}},26244:(e,t,n)=>{var r=n(17466);e.exports=function(e){return r(e.length)}},66736:e=>{var t=Math.expm1,n=Math.exp;e.exports=!t||t(10)>22025.465794806718||t(10)<22025.465794806718||-2e-17!=t(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:n(e)-1}:t},26130:(e,t,n)=>{var r=n(64310),i=Math.abs,o=Math.pow,a=o(2,-52),s=o(2,-23),l=o(2,127)*(2-s),c=o(2,-126);e.exports=Math.fround||function(e){var t,n,o=i(e),u=r(e);return o<c?u*(o/c/s+1/a-1/a)*c*s:(n=(t=(1+s/a)*o)-(t-o))>l||n!=n?u*(1/0):u*n}},20403:e=>{var t=Math.log,n=Math.LOG10E;e.exports=Math.log10||function(e){return t(e)*n}},26513:e=>{var t=Math.log;e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:t(1+e)}},64310:e=>{e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},95948:(e,t,n)=>{var r,i,o,a,s,l,c,u,h=n(17854),f=n(49974),p=n(31236).f,d=n(20261).set,m=n(6833),g=n(71528),y=n(71036),v=n(35268),b=h.MutationObserver||h.WebKitMutationObserver,_=h.document,x=h.process,A=h.Promise,w=p(h,"queueMicrotask"),C=w&&w.value;C||(r=function(){var e,t;for(v&&(e=x.domain)&&e.exit();i;){t=i.fn,i=i.next;try{t()}catch(e){throw i?a():o=void 0,e}}o=void 0,e&&e.enter()},m||v||y||!b||!_?!g&&A&&A.resolve?((c=A.resolve(void 0)).constructor=A,u=f(c.then,c),a=function(){u(r)}):v?a=function(){x.nextTick(r)}:(d=f(d,h),a=function(){d(r)}):(s=!0,l=_.createTextNode(""),new b(r).observe(l,{characterData:!0}),a=function(){l.data=s=!s})),e.exports=C||function(e){var t={fn:e,next:void 0};o&&(o.next=t),i||(i=t,a()),o=t}},30735:(e,t,n)=>{var r=n(30133);e.exports=r&&!!Symbol.for&&!!Symbol.keyFor},30133:(e,t,n)=>{var r=n(7392),i=n(47293);e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},590:(e,t,n)=>{var r=n(47293),i=n(5112),o=n(31913),a=i("iterator");e.exports=!r((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),o&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://").host||"#%D0%B1"!==new URL("http://a#").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},68536:(e,t,n)=>{var r=n(17854),i=n(60614),o=n(42788),a=r.WeakMap;e.exports=i(a)&&/native code/.test(o(a))},78523:(e,t,n)=>{"use strict";var r=n(19662),i=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new i(e)}},56277:(e,t,n)=>{var r=n(41340);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:r(e)}},3929:(e,t,n)=>{var r=n(17854),i=n(47850),o=r.TypeError;e.exports=function(e){if(i(e))throw o("The method doesn't accept regular expressions");return e}},77023:(e,t,n)=>{var r=n(17854).isFinite;e.exports=Number.isFinite||function(e){return"number"==typeof e&&r(e)}},2814:(e,t,n)=>{var r=n(17854),i=n(47293),o=n(1702),a=n(41340),s=n(53111).trim,l=n(81361),c=o("".charAt),u=r.parseFloat,h=r.Symbol,f=h&&h.iterator,p=1/u(l+"-0")!=-1/0||f&&!i((function(){u(Object(f))}));e.exports=p?function(e){var t=s(a(e)),n=u(t);return 0===n&&"-"==c(t,0)?-0:n}:u},83009:(e,t,n)=>{var r=n(17854),i=n(47293),o=n(1702),a=n(41340),s=n(53111).trim,l=n(81361),c=r.parseInt,u=r.Symbol,h=u&&u.iterator,f=/^[+-]?0x/i,p=o(f.exec),d=8!==c(l+"08")||22!==c(l+"0x16")||h&&!i((function(){c(Object(h))}));e.exports=d?function(e,t){var n=s(a(e));return c(n,t>>>0||(p(f,n)?16:10))}:c},21574:(e,t,n)=>{"use strict";var r=n(19781),i=n(1702),o=n(46916),a=n(47293),s=n(81956),l=n(25181),c=n(55296),u=n(47908),h=n(68361),f=Object.assign,p=Object.defineProperty,d=i([].concat);e.exports=!f||a((function(){if(r&&1!==f({b:1},f(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=f({},e)[n]||s(f({},t)).join("")!=i}))?function(e,t){for(var n=u(e),i=arguments.length,a=1,f=l.f,p=c.f;i>a;)for(var m,g=h(arguments[a++]),y=f?d(s(g),f(g)):s(g),v=y.length,b=0;v>b;)m=y[b++],r&&!o(p,g,m)||(n[m]=g[m]);return n}:f},70030:(e,t,n)=>{var r,i=n(19670),o=n(36048),a=n(80748),s=n(3501),l=n(60490),c=n(80317),u=n(6200)("IE_PROTO"),h=function(){},f=function(e){return"<script>"+e+"<\/script>"},p=function(e){e.write(f("")),e.close();var t=e.parentWindow.Object;return e=null,t},d=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}var e,t;d="undefined"!=typeof document?document.domain&&r?p(r):((t=c("iframe")).style.display="none",l.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(f("document.F=Object")),e.close(),e.F):p(r);for(var n=a.length;n--;)delete d.prototype[a[n]];return d()};s[u]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(h.prototype=i(e),n=new h,h.prototype=null,n[u]=e):n=d(),void 0===t?n:o.f(n,t)}},36048:(e,t,n)=>{var r=n(19781),i=n(3353),o=n(3070),a=n(19670),s=n(45656),l=n(81956);t.f=r&&!i?Object.defineProperties:function(e,t){a(e);for(var n,r=s(t),i=l(t),c=i.length,u=0;c>u;)o.f(e,n=i[u++],r[n]);return e}},3070:(e,t,n)=>{var r=n(17854),i=n(19781),o=n(64664),a=n(3353),s=n(19670),l=n(34948),c=r.TypeError,u=Object.defineProperty,h=Object.getOwnPropertyDescriptor;t.f=i?a?function(e,t,n){if(s(e),t=l(t),s(n),"function"==typeof e&&"prototype"===t&&"value"in n&&"writable"in n&&!n.writable){var r=h(e,t);r&&r.writable&&(e[t]=n.value,n={configurable:"configurable"in n?n.configurable:r.configurable,enumerable:"enumerable"in n?n.enumerable:r.enumerable,writable:!1})}return u(e,t,n)}:u:function(e,t,n){if(s(e),t=l(t),s(n),o)try{return u(e,t,n)}catch(e){}if("get"in n||"set"in n)throw c("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},31236:(e,t,n)=>{var r=n(19781),i=n(46916),o=n(55296),a=n(79114),s=n(45656),l=n(34948),c=n(92597),u=n(64664),h=Object.getOwnPropertyDescriptor;t.f=r?h:function(e,t){if(e=s(e),t=l(t),u)try{return h(e,t)}catch(e){}if(c(e,t))return a(!i(o.f,e,t),e[t])}},1156:(e,t,n)=>{var r=n(84326),i=n(45656),o=n(8006).f,a=n(41589),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"Window"==r(e)?function(e){try{return o(e)}catch(e){return a(s)}}(e):o(i(e))}},8006:(e,t,n)=>{var r=n(16324),i=n(80748).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},25181:(e,t)=>{t.f=Object.getOwnPropertySymbols},79518:(e,t,n)=>{var r=n(17854),i=n(92597),o=n(60614),a=n(47908),s=n(6200),l=n(49920),c=s("IE_PROTO"),u=r.Object,h=u.prototype;e.exports=l?u.getPrototypeOf:function(e){var t=a(e);if(i(t,c))return t[c];var n=t.constructor;return o(n)&&t instanceof n?n.prototype:t instanceof u?h:null}},52050:(e,t,n)=>{var r=n(47293),i=n(70111),o=n(84326),a=n(7556),s=Object.isExtensible,l=r((function(){s(1)}));e.exports=l||a?function(e){return!!i(e)&&(!a||"ArrayBuffer"!=o(e))&&(!s||s(e))}:s},47976:(e,t,n)=>{var r=n(1702);e.exports=r({}.isPrototypeOf)},16324:(e,t,n)=>{var r=n(1702),i=n(92597),o=n(45656),a=n(41318).indexOf,s=n(3501),l=r([].push);e.exports=function(e,t){var n,r=o(e),c=0,u=[];for(n in r)!i(s,n)&&i(r,n)&&l(u,n);for(;t.length>c;)i(r,n=t[c++])&&(~a(u,n)||l(u,n));return u}},81956:(e,t,n)=>{var r=n(16324),i=n(80748);e.exports=Object.keys||function(e){return r(e,i)}},55296:(e,t)=>{"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);t.f=i?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},69026:(e,t,n)=>{"use strict";var r=n(31913),i=n(17854),o=n(47293),a=n(98008);e.exports=r||!o((function(){if(!(a&&a<535)){var e=Math.random();__defineSetter__.call(null,e,(function(){})),delete i[e]}}))},27674:(e,t,n)=>{var r=n(1702),i=n(19670),o=n(96077);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return i(n),o(r),t?e(n,r):n.__proto__=r,n}}():void 0)},44699:(e,t,n)=>{var r=n(19781),i=n(1702),o=n(81956),a=n(45656),s=i(n(55296).f),l=i([].push),c=function(e){return function(t){for(var n,i=a(t),c=o(i),u=c.length,h=0,f=[];u>h;)n=c[h++],r&&!s(i,n)||l(f,e?[n,i[n]]:i[n]);return f}};e.exports={entries:c(!0),values:c(!1)}},90288:(e,t,n)=>{"use strict";var r=n(51694),i=n(70648);e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},92140:(e,t,n)=>{var r=n(17854),i=n(46916),o=n(60614),a=n(70111),s=r.TypeError;e.exports=function(e,t){var n,r;if("string"===t&&o(n=e.toString)&&!a(r=i(n,e)))return r;if(o(n=e.valueOf)&&!a(r=i(n,e)))return r;if("string"!==t&&o(n=e.toString)&&!a(r=i(n,e)))return r;throw s("Can't convert object to primitive value")}},53887:(e,t,n)=>{var r=n(35005),i=n(1702),o=n(8006),a=n(25181),s=n(19670),l=i([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=o.f(s(e)),n=a.f;return n?l(t,n(e)):t}},40857:(e,t,n)=>{var r=n(17854);e.exports=r},12534:e=>{e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},63702:(e,t,n)=>{var r=n(17854),i=n(85341),o=n(60614),a=n(96114),s=n(42788),l=n(5112),c=n(7871),u=n(31913),h=n(7392),f=i&&i.prototype,p=l("species"),d=!1,m=o(r.PromiseRejectionEvent),g=a("Promise",(function(){var e=s(i),t=e!==String(i);if(!t&&66===h)return!0;if(u&&(!f.catch||!f.finally))return!0;if(h>=51&&/native code/.test(e))return!1;var n=new i((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};return(n.constructor={})[p]=r,!(d=n.then((function(){}))instanceof r)||!t&&c&&!m}));e.exports={CONSTRUCTOR:g,REJECTION_EVENT:m,SUBCLASSING:d}},85341:(e,t,n)=>{var r=n(17854);e.exports=r.Promise},69478:(e,t,n)=>{var r=n(19670),i=n(70111),o=n(78523);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},80612:(e,t,n)=>{var r=n(85341),i=n(17072),o=n(63702).CONSTRUCTOR;e.exports=o||!i((function(e){r.all(e).then(void 0,(function(){}))}))},2626:(e,t,n)=>{var r=n(3070).f;e.exports=function(e,t,n){n in e||r(e,n,{configurable:!0,get:function(){return t[n]},set:function(e){t[n]=e}})}},18572:e=>{var t=function(){this.head=null,this.tail=null};t.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}},e.exports=t},12248:(e,t,n)=>{var r=n(31320);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},31320:(e,t,n)=>{var r=n(17854),i=n(60614),o=n(92597),a=n(68880),s=n(83505),l=n(42788),c=n(29909),u=n(76530).CONFIGURABLE,h=c.get,f=c.enforce,p=String(String).split("String");(e.exports=function(e,t,n,l){var c,h=!!l&&!!l.unsafe,d=!!l&&!!l.enumerable,m=!!l&&!!l.noTargetGet,g=l&&void 0!==l.name?l.name:t;i(n)&&("Symbol("===String(g).slice(0,7)&&(g="["+String(g).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!o(n,"name")||u&&n.name!==g)&&a(n,"name",g),(c=f(n)).source||(c.source=p.join("string"==typeof g?g:""))),e!==r?(h?!m&&e[t]&&(d=!0):delete e[t],d?e[t]=n:a(e,t,n)):d?e[t]=n:s(t,n)})(Function.prototype,"toString",(function(){return i(this)&&h(this).source||l(this)}))},97651:(e,t,n)=>{var r=n(17854),i=n(46916),o=n(19670),a=n(60614),s=n(84326),l=n(22261),c=r.TypeError;e.exports=function(e,t){var n=e.exec;if(a(n)){var r=i(n,e,t);return null!==r&&o(r),r}if("RegExp"===s(e))return i(l,e,t);throw c("RegExp#exec called on incompatible receiver")}},22261:(e,t,n)=>{"use strict";var r,i,o=n(46916),a=n(1702),s=n(41340),l=n(67066),c=n(52999),u=n(72309),h=n(70030),f=n(29909).get,p=n(9441),d=n(38173),m=u("native-string-replace",String.prototype.replace),g=RegExp.prototype.exec,y=g,v=a("".charAt),b=a("".indexOf),_=a("".replace),x=a("".slice),A=(i=/b*/g,o(g,r=/a/,"a"),o(g,i,"a"),0!==r.lastIndex||0!==i.lastIndex),w=c.BROKEN_CARET,C=void 0!==/()??/.exec("")[1];(A||C||w||p||d)&&(y=function(e){var t,n,r,i,a,c,u,p=this,d=f(p),E=s(e),S=d.raw;if(S)return S.lastIndex=p.lastIndex,t=o(y,S,E),p.lastIndex=S.lastIndex,t;var T=d.groups,B=w&&p.sticky,k=o(l,p),M=p.source,P=0,I=E;if(B&&(k=_(k,"y",""),-1===b(k,"g")&&(k+="g"),I=x(E,p.lastIndex),p.lastIndex>0&&(!p.multiline||p.multiline&&"\n"!==v(E,p.lastIndex-1))&&(M="(?: "+M+")",I=" "+I,P++),n=new RegExp("^(?:"+M+")",k)),C&&(n=new RegExp("^"+M+"$(?!\\s)",k)),A&&(r=p.lastIndex),i=o(g,B?n:p,I),B?i?(i.input=x(i.input,P),i[0]=x(i[0],P),i.index=p.lastIndex,p.lastIndex+=i[0].length):p.lastIndex=0:A&&i&&(p.lastIndex=p.global?i.index+i[0].length:r),C&&i&&i.length>1&&o(m,i[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(i[a]=void 0)})),i&&T)for(i.groups=c=h(null),a=0;a<T.length;a++)c[(u=T[a])[0]]=i[u[1]];return i}),e.exports=y},67066:(e,t,n)=>{"use strict";var r=n(19670);e.exports=function(){var e=r(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},34706:(e,t,n)=>{var r=n(46916),i=n(92597),o=n(47976),a=n(67066),s=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in s||i(e,"flags")||!o(s,e)?t:r(a,e)}},52999:(e,t,n)=>{var r=n(47293),i=n(17854).RegExp,o=r((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),a=o||r((function(){return!i("a","y").sticky})),s=o||r((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:s,MISSED_STICKY:a,UNSUPPORTED_Y:o}},9441:(e,t,n)=>{var r=n(47293),i=n(17854).RegExp;e.exports=r((function(){var e=i(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},38173:(e,t,n)=>{var r=n(47293),i=n(17854).RegExp;e.exports=r((function(){var e=i("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},84488:(e,t,n)=>{var r=n(17854).TypeError;e.exports=function(e){if(null==e)throw r("Can't call method on "+e);return e}},81150:e=>{e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},17152:(e,t,n)=>{var r=n(17854),i=n(22104),o=n(60614),a=n(88113),s=n(50206),l=n(48053),c=/MSIE .\./.test(a),u=r.Function,h=function(e){return c?function(t,n){var r=l(arguments.length,1)>2,a=o(t)?t:u(t),c=r?s(arguments,2):void 0;return e(r?function(){i(a,this,c)}:a,n)}:e};e.exports={setTimeout:h(r.setTimeout),setInterval:h(r.setInterval)}},83505:(e,t,n)=>{var r=n(17854),i=Object.defineProperty;e.exports=function(e,t){try{i(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},96340:(e,t,n)=>{"use strict";var r=n(35005),i=n(3070),o=n(5112),a=n(19781),s=o("species");e.exports=function(e){var t=r(e),n=i.f;a&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},58003:(e,t,n)=>{var r=n(3070).f,i=n(92597),o=n(5112)("toStringTag");e.exports=function(e,t,n){e&&!n&&(e=e.prototype),e&&!i(e,o)&&r(e,o,{configurable:!0,value:t})}},6200:(e,t,n)=>{var r=n(72309),i=n(69711),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},5465:(e,t,n)=>{var r=n(17854),i=n(83505),o="__core-js_shared__",a=r[o]||i(o,{});e.exports=a},72309:(e,t,n)=>{var r=n(31913),i=n(5465);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.22.1",mode:r?"pure":"global",copyright:" 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.22.1/LICENSE",source:"https://github.com/zloirock/core-js"})},36707:(e,t,n)=>{var r=n(19670),i=n(39483),o=n(5112)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||null==(n=r(a)[o])?t:i(n)}},43429:(e,t,n)=>{var r=n(47293);e.exports=function(e){return r((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},28710:(e,t,n)=>{var r=n(1702),i=n(19303),o=n(41340),a=n(84488),s=r("".charAt),l=r("".charCodeAt),c=r("".slice),u=function(e){return function(t,n){var r,u,h=o(a(t)),f=i(n),p=h.length;return f<0||f>=p?e?"":void 0:(r=l(h,f))<55296||r>56319||f+1===p||(u=l(h,f+1))<56320||u>57343?e?s(h,f):r:e?c(h,f,f+2):u-56320+(r-55296<<10)+65536}};e.exports={codeAt:u(!1),charAt:u(!0)}},54986:(e,t,n)=>{var r=n(88113);e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(r)},76650:(e,t,n)=>{var r=n(1702),i=n(17466),o=n(41340),a=n(38415),s=n(84488),l=r(a),c=r("".slice),u=Math.ceil,h=function(e){return function(t,n,r){var a,h,f=o(s(t)),p=i(n),d=f.length,m=void 0===r?" ":o(r);return p<=d||""==m?f:((h=l(m,u((a=p-d)/m.length))).length>a&&(h=c(h,0,a)),e?f+h:h+f)}};e.exports={start:h(!1),end:h(!0)}},33197:(e,t,n)=>{"use strict";var r=n(17854),i=n(1702),o=2147483647,a=/[^\0-\u007E]/,s=/[.\u3002\uFF0E\uFF61]/g,l="Overflow: input needs wider integers to process",c=r.RangeError,u=i(s.exec),h=Math.floor,f=String.fromCharCode,p=i("".charCodeAt),d=i([].join),m=i([].push),g=i("".replace),y=i("".split),v=i("".toLowerCase),b=function(e){return e+22+75*(e<26)},_=function(e,t,n){var r=0;for(e=n?h(e/700):e>>1,e+=h(e/t);e>455;)e=h(e/35),r+=36;return h(r+36*e/(e+38))},x=function(e){var t=[];e=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=p(e,n++);if(i>=55296&&i<=56319&&n<r){var o=p(e,n++);56320==(64512&o)?m(t,((1023&i)<<10)+(1023&o)+65536):(m(t,i),n--)}else m(t,i)}return t}(e);var n,r,i=e.length,a=128,s=0,u=72;for(n=0;n<e.length;n++)(r=e[n])<128&&m(t,f(r));var g=t.length,y=g;for(g&&m(t,"-");y<i;){var v=o;for(n=0;n<e.length;n++)(r=e[n])>=a&&r<v&&(v=r);var x=y+1;if(v-a>h((o-s)/x))throw c(l);for(s+=(v-a)*x,a=v,n=0;n<e.length;n++){if((r=e[n])<a&&++s>o)throw c(l);if(r==a){for(var A=s,w=36;;){var C=w<=u?1:w>=u+26?26:w-u;if(A<C)break;var E=A-C,S=36-C;m(t,f(b(C+E%S))),A=h(E/S),w+=36}m(t,f(b(A))),u=_(s,x,y==g),s=0,y++}}s++,a++}return d(t,"")};e.exports=function(e){var t,n,r=[],i=y(g(v(e),s,"."),".");for(t=0;t<i.length;t++)n=i[t],m(r,u(a,n)?"xn--"+x(n):n);return d(r,".")}},38415:(e,t,n)=>{"use strict";var r=n(17854),i=n(19303),o=n(41340),a=n(84488),s=r.RangeError;e.exports=function(e){var t=o(a(this)),n="",r=i(e);if(r<0||r==1/0)throw s("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n}},10365:(e,t,n)=>{"use strict";var r=n(53111).end,i=n(76091);e.exports=i("trimEnd")?function(){return r(this)}:"".trimEnd},76091:(e,t,n)=>{var r=n(76530).PROPER,i=n(47293),o=n(81361);e.exports=function(e){return i((function(){return!!o[e]()||""!==""[e]()||r&&o[e].name!==e}))}},33217:(e,t,n)=>{"use strict";var r=n(53111).start,i=n(76091);e.exports=i("trimStart")?function(){return r(this)}:"".trimStart},53111:(e,t,n)=>{var r=n(1702),i=n(84488),o=n(41340),a=n(81361),s=r("".replace),l="["+a+"]",c=RegExp("^"+l+l+"*"),u=RegExp(l+l+"*$"),h=function(e){return function(t){var n=o(i(t));return 1&e&&(n=s(n,c,"")),2&e&&(n=s(n,u,"")),n}};e.exports={start:h(1),end:h(2),trim:h(3)}},56532:(e,t,n)=>{var r=n(46916),i=n(35005),o=n(5112),a=n(31320);e.exports=function(){var e=i("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,s=o("toPrimitive");t&&!t[s]&&a(t,s,(function(e){return r(n,this)}))}},20261:(e,t,n)=>{var r,i,o,a,s=n(17854),l=n(22104),c=n(49974),u=n(60614),h=n(92597),f=n(47293),p=n(60490),d=n(50206),m=n(80317),g=n(48053),y=n(6833),v=n(35268),b=s.setImmediate,_=s.clearImmediate,x=s.process,A=s.Dispatch,w=s.Function,C=s.MessageChannel,E=s.String,S=0,T={};try{r=s.location}catch(e){}var B=function(e){if(h(T,e)){var t=T[e];delete T[e],t()}},k=function(e){return function(){B(e)}},M=function(e){B(e.data)},P=function(e){s.postMessage(E(e),r.protocol+"//"+r.host)};b&&_||(b=function(e){g(arguments.length,1);var t=u(e)?e:w(e),n=d(arguments,1);return T[++S]=function(){l(t,void 0,n)},i(S),S},_=function(e){delete T[e]},v?i=function(e){x.nextTick(k(e))}:A&&A.now?i=function(e){A.now(k(e))}:C&&!y?(a=(o=new C).port2,o.port1.onmessage=M,i=c(a.postMessage,a)):s.addEventListener&&u(s.postMessage)&&!s.importScripts&&r&&"file:"!==r.protocol&&!f(P)?(i=P,s.addEventListener("message",M,!1)):i="onreadystatechange"in m("script")?function(e){p.appendChild(m("script")).onreadystatechange=function(){p.removeChild(this),B(e)}}:function(e){setTimeout(k(e),0)}),e.exports={set:b,clear:_}},50863:(e,t,n)=>{var r=n(1702);e.exports=r(1..valueOf)},51400:(e,t,n)=>{var r=n(19303),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},57067:(e,t,n)=>{var r=n(17854),i=n(19303),o=n(17466),a=r.RangeError;e.exports=function(e){if(void 0===e)return 0;var t=i(e),n=o(t);if(t!==n)throw a("Wrong length or index");return n}},45656:(e,t,n)=>{var r=n(68361),i=n(84488);e.exports=function(e){return r(i(e))}},19303:e=>{var t=Math.ceil,n=Math.floor;e.exports=function(e){var r=+e;return r!=r||0===r?0:(r>0?n:t)(r)}},17466:(e,t,n)=>{var r=n(19303),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},47908:(e,t,n)=>{var r=n(17854),i=n(84488),o=r.Object;e.exports=function(e){return o(i(e))}},84590:(e,t,n)=>{var r=n(17854),i=n(73002),o=r.RangeError;e.exports=function(e,t){var n=i(e);if(n%t)throw o("Wrong offset");return n}},73002:(e,t,n)=>{var r=n(17854),i=n(19303),o=r.RangeError;e.exports=function(e){var t=i(e);if(t<0)throw o("The argument can't be less than 0");return t}},57593:(e,t,n)=>{var r=n(17854),i=n(46916),o=n(70111),a=n(52190),s=n(58173),l=n(92140),c=n(5112),u=r.TypeError,h=c("toPrimitive");e.exports=function(e,t){if(!o(e)||a(e))return e;var n,r=s(e,h);if(r){if(void 0===t&&(t="default"),n=i(r,e,t),!o(n)||a(n))return n;throw u("Can't convert object to primitive value")}return void 0===t&&(t="number"),l(e,t)}},34948:(e,t,n)=>{var r=n(57593),i=n(52190);e.exports=function(e){var t=r(e,"string");return i(t)?t:t+""}},51694:(e,t,n)=>{var r={};r[n(5112)("toStringTag")]="z",e.exports="[object z]"===String(r)},41340:(e,t,n)=>{var r=n(17854),i=n(70648),o=r.String;e.exports=function(e){if("Symbol"===i(e))throw TypeError("Cannot convert a Symbol value to a string");return o(e)}},44038:(e,t,n)=>{var r=n(35268);e.exports=function(e){try{if(r)return Function('return require("'+e+'")')()}catch(e){}}},66330:(e,t,n)=>{var r=n(17854).String;e.exports=function(e){try{return r(e)}catch(e){return"Object"}}},19843:(e,t,n)=>{"use strict";var r=n(82109),i=n(17854),o=n(46916),a=n(19781),s=n(63832),l=n(90260),c=n(13331),u=n(25787),h=n(79114),f=n(68880),p=n(55988),d=n(17466),m=n(57067),g=n(84590),y=n(34948),v=n(92597),b=n(70648),_=n(70111),x=n(52190),A=n(70030),w=n(47976),C=n(27674),E=n(8006).f,S=n(97321),T=n(42092).forEach,B=n(96340),k=n(3070),M=n(31236),P=n(29909),I=n(79587),O=P.get,D=P.set,z=k.f,L=M.f,R=Math.round,F=i.RangeError,U=c.ArrayBuffer,N=U.prototype,j=c.DataView,V=l.NATIVE_ARRAY_BUFFER_VIEWS,G=l.TYPED_ARRAY_CONSTRUCTOR,q=l.TYPED_ARRAY_TAG,W=l.TypedArray,H=l.TypedArrayPrototype,$=l.aTypedArrayConstructor,X=l.isTypedArray,Z="BYTES_PER_ELEMENT",Y="Wrong length",K=function(e,t){$(e);for(var n=0,r=t.length,i=new e(r);r>n;)i[n]=t[n++];return i},J=function(e,t){z(e,t,{get:function(){return O(this)[t]}})},Q=function(e){var t;return w(N,e)||"ArrayBuffer"==(t=b(e))||"SharedArrayBuffer"==t},ee=function(e,t){return X(e)&&!x(t)&&t in e&&p(+t)&&t>=0},te=function(e,t){return t=y(t),ee(e,t)?h(2,e[t]):L(e,t)},ne=function(e,t,n){return t=y(t),!(ee(e,t)&&_(n)&&v(n,"value"))||v(n,"get")||v(n,"set")||n.configurable||v(n,"writable")&&!n.writable||v(n,"enumerable")&&!n.enumerable?z(e,t,n):(e[t]=n.value,e)};a?(V||(M.f=te,k.f=ne,J(H,"buffer"),J(H,"byteOffset"),J(H,"byteLength"),J(H,"length")),r({target:"Object",stat:!0,forced:!V},{getOwnPropertyDescriptor:te,defineProperty:ne}),e.exports=function(e,t,n){var a=e.match(/\d+$/)[0]/8,l=e+(n?"Clamped":"")+"Array",c="get"+e,h="set"+e,p=i[l],y=p,v=y&&y.prototype,b={},x=function(e,t){z(e,t,{get:function(){return function(e,t){var n=O(e);return n.view[c](t*a+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,r){var i=O(e);n&&(r=(r=R(r))<0?0:r>255?255:255&r),i.view[h](t*a+i.byteOffset,r,!0)}(this,t,e)},enumerable:!0})};V?s&&(y=t((function(e,t,n,r){return u(e,v),I(_(t)?Q(t)?void 0!==r?new p(t,g(n,a),r):void 0!==n?new p(t,g(n,a)):new p(t):X(t)?K(y,t):o(S,y,t):new p(m(t)),e,y)})),C&&C(y,W),T(E(p),(function(e){e in y||f(y,e,p[e])})),y.prototype=v):(y=t((function(e,t,n,r){u(e,v);var i,s,l,c=0,h=0;if(_(t)){if(!Q(t))return X(t)?K(y,t):o(S,y,t);i=t,h=g(n,a);var f=t.byteLength;if(void 0===r){if(f%a)throw F(Y);if((s=f-h)<0)throw F(Y)}else if((s=d(r)*a)+h>f)throw F(Y);l=s/a}else l=m(t),i=new U(s=l*a);for(D(e,{buffer:i,byteOffset:h,byteLength:s,length:l,view:new j(i)});c<l;)x(e,c++)})),C&&C(y,W),v=y.prototype=A(H)),v.constructor!==y&&f(v,"constructor",y),f(v,G,y),q&&f(v,q,l),b[l]=y,r({global:!0,forced:y!=p,sham:!V},b),Z in y||f(y,Z,a),Z in v||f(v,Z,a),B(l)}):e.exports=function(){}},63832:(e,t,n)=>{var r=n(17854),i=n(47293),o=n(17072),a=n(90260).NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,l=r.Int8Array;e.exports=!a||!i((function(){l(1)}))||!i((function(){new l(-1)}))||!o((function(e){new l,new l(null),new l(1.5),new l(e)}),!0)||i((function(){return 1!==new l(new s(2),1,void 0).length}))},43074:(e,t,n)=>{var r=n(97745),i=n(66304);e.exports=function(e,t){return r(i(e),t)}},97321:(e,t,n)=>{var r=n(49974),i=n(46916),o=n(39483),a=n(47908),s=n(26244),l=n(18554),c=n(71246),u=n(97659),h=n(90260).aTypedArrayConstructor;e.exports=function(e){var t,n,f,p,d,m,g=o(this),y=a(e),v=arguments.length,b=v>1?arguments[1]:void 0,_=void 0!==b,x=c(y);if(x&&!u(x))for(m=(d=l(y,x)).next,y=[];!(p=i(m,d)).done;)y.push(p.value);for(_&&v>2&&(b=r(b,arguments[2])),n=s(y),f=new(h(g))(n),t=0;n>t;t++)f[t]=_?b(y[t],t):y[t];return f}},66304:(e,t,n)=>{var r=n(90260),i=n(36707),o=r.TYPED_ARRAY_CONSTRUCTOR,a=r.aTypedArrayConstructor;e.exports=function(e){return a(i(e,e[o]))}},69711:(e,t,n)=>{var r=n(1702),i=0,o=Math.random(),a=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++i+o,36)}},43307:(e,t,n)=>{var r=n(30133);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:(e,t,n)=>{var r=n(19781),i=n(47293);e.exports=r&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},48053:(e,t,n)=>{var r=n(17854).TypeError;e.exports=function(e,t){if(e<t)throw r("Not enough arguments");return e}},6061:(e,t,n)=>{var r=n(5112);t.f=r},5112:(e,t,n)=>{var r=n(17854),i=n(72309),o=n(92597),a=n(69711),s=n(30133),l=n(43307),c=i("wks"),u=r.Symbol,h=u&&u.for,f=l?u:u&&u.withoutSetter||a;e.exports=function(e){if(!o(c,e)||!s&&"string"!=typeof c[e]){var t="Symbol."+e;s&&o(u,e)?c[e]=u[e]:c[e]=l&&h?h(t):f(t)}return c[e]}},81361:e=>{e.exports="\t\n\v\f\r \u2028\u2029\ufeff"},89191:(e,t,n)=>{"use strict";var r=n(35005),i=n(92597),o=n(68880),a=n(47976),s=n(27674),l=n(99920),c=n(2626),u=n(79587),h=n(56277),f=n(58340),p=n(77741),d=n(22914),m=n(19781),g=n(31913);e.exports=function(e,t,n,y){var v="stackTraceLimit",b=y?2:1,_=e.split("."),x=_[_.length-1],A=r.apply(null,_);if(A){var w=A.prototype;if(!g&&i(w,"cause")&&delete w.cause,!n)return A;var C=r("Error"),E=t((function(e,t){var n=h(y?t:e,void 0),r=y?new A(e):new A;return void 0!==n&&o(r,"message",n),d&&o(r,"stack",p(r.stack,2)),this&&a(w,this)&&u(r,this,E),arguments.length>b&&f(r,arguments[b]),r}));if(E.prototype=w,"Error"!==x?s?s(E,C):l(E,C,{name:!0}):m&&v in A&&(c(E,A,v),c(E,A,"prepareStackTrace")),l(E,A),!g)try{w.name!==x&&o(w,"name",x),w.constructor=E}catch(e){}return E}}},32120:(e,t,n)=>{var r=n(82109),i=n(35005),o=n(22104),a=n(47293),s=n(89191),l="AggregateError",c=i(l),u=!a((function(){return 1!==c([1]).errors[0]}))&&a((function(){return 7!==c([1],l,{cause:7}).cause}));r({global:!0,forced:u},{AggregateError:s(l,(function(e){return function(t,n){return o(e,this,arguments)}}),u,!0)})},56967:(e,t,n)=>{"use strict";var r=n(82109),i=n(17854),o=n(47976),a=n(79518),s=n(27674),l=n(99920),c=n(70030),u=n(68880),h=n(79114),f=n(77741),p=n(58340),d=n(20408),m=n(56277),g=n(5112),y=n(22914),v=g("toStringTag"),b=i.Error,_=[].push,x=function(e,t){var n,r=arguments.length>2?arguments[2]:void 0,i=o(A,this);s?n=s(new b,i?a(this):A):(n=i?this:c(A),u(n,v,"Error")),void 0!==t&&u(n,"message",m(t)),y&&u(n,"stack",f(n.stack,1)),p(n,r);var l=[];return d(e,_,{that:l}),u(n,"errors",l),n};s?s(x,b):l(x,b,{name:!0});var A=x.prototype=c(b.prototype,{constructor:h(1,x),message:h(1,""),name:h(1,"AggregateError")});r({global:!0},{AggregateError:x})},9170:(e,t,n)=>{n(56967)},18264:(e,t,n)=>{"use strict";var r=n(82109),i=n(17854),o=n(13331),a=n(96340),s=o.ArrayBuffer;r({global:!0,forced:i.ArrayBuffer!==s},{ArrayBuffer:s}),a("ArrayBuffer")},76938:(e,t,n)=>{var r=n(82109),i=n(90260);r({target:"ArrayBuffer",stat:!0,forced:!i.NATIVE_ARRAY_BUFFER_VIEWS},{isView:i.isView})},39575:(e,t,n)=>{"use strict";var r=n(82109),i=n(1702),o=n(47293),a=n(13331),s=n(19670),l=n(51400),c=n(17466),u=n(36707),h=a.ArrayBuffer,f=a.DataView,p=f.prototype,d=i(h.prototype.slice),m=i(p.getUint8),g=i(p.setUint8);r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:o((function(){return!new h(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(d&&void 0===t)return d(s(this),e);for(var n=s(this).byteLength,r=l(e,n),i=l(void 0===t?n:t,n),o=new(u(this,h))(c(i-r)),a=new f(this),p=new f(o),y=0;r<i;)g(p,y++,m(a,r++));return o}})},52262:(e,t,n)=>{"use strict";var r=n(82109),i=n(47908),o=n(26244),a=n(19303),s=n(51223);r({target:"Array",proto:!0},{at:function(e){var t=i(this),n=o(t),r=a(e),s=r>=0?r:n+r;return s<0||s>=n?void 0:t[s]}}),s("at")},92222:(e,t,n)=>{"use strict";var r=n(82109),i=n(17854),o=n(47293),a=n(43157),s=n(70111),l=n(47908),c=n(26244),u=n(86135),h=n(65417),f=n(81194),p=n(5112),d=n(7392),m=p("isConcatSpreadable"),g=9007199254740991,y="Maximum allowed index exceeded",v=i.TypeError,b=d>=51||!o((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),_=f("concat"),x=function(e){if(!s(e))return!1;var t=e[m];return void 0!==t?!!t:a(e)};r({target:"Array",proto:!0,forced:!b||!_},{concat:function(e){var t,n,r,i,o,a=l(this),s=h(a,0),f=0;for(t=-1,r=arguments.length;t<r;t++)if(x(o=-1===t?a:arguments[t])){if(f+(i=c(o))>g)throw v(y);for(n=0;n<i;n++,f++)n in o&&u(s,f,o[n])}else{if(f>=g)throw v(y);u(s,f++,o)}return s.length=f,s}})},50545:(e,t,n)=>{var r=n(82109),i=n(1048),o=n(51223);r({target:"Array",proto:!0},{copyWithin:i}),o("copyWithin")},26541:(e,t,n)=>{"use strict";var r=n(82109),i=n(42092).every;r({target:"Array",proto:!0,forced:!n(9341)("every")},{every:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},43290:(e,t,n)=>{var r=n(82109),i=n(21285),o=n(51223);r({target:"Array",proto:!0},{fill:i}),o("fill")},57327:(e,t,n)=>{"use strict";var r=n(82109),i=n(42092).filter;r({target:"Array",proto:!0,forced:!n(81194)("filter")},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},34553:(e,t,n)=>{"use strict";var r=n(82109),i=n(42092).findIndex,o=n(51223),a="findIndex",s=!0;a in[]&&Array(1).findIndex((function(){s=!1})),r({target:"Array",proto:!0,forced:s},{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o(a)},69826:(e,t,n)=>{"use strict";var r=n(82109),i=n(42092).find,o=n(51223),a="find",s=!0;a in[]&&Array(1).find((function(){s=!1})),r({target:"Array",proto:!0,forced:s},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o(a)},86535:(e,t,n)=>{"use strict";var r=n(82109),i=n(6790),o=n(19662),a=n(47908),s=n(26244),l=n(65417);r({target:"Array",proto:!0},{flatMap:function(e){var t,n=a(this),r=s(n);return o(e),(t=l(n,0)).length=i(t,n,n,r,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},84944:(e,t,n)=>{"use strict";var r=n(82109),i=n(6790),o=n(47908),a=n(26244),s=n(19303),l=n(65417);r({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=o(this),n=a(t),r=l(t,0);return r.length=i(r,t,t,n,0,void 0===e?1:s(e)),r}})},89554:(e,t,n)=>{"use strict";var r=n(82109),i=n(18533);r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},91038:(e,t,n)=>{var r=n(82109),i=n(48457);r({target:"Array",stat:!0,forced:!n(17072)((function(e){Array.from(e)}))},{from:i})},26699:(e,t,n)=>{"use strict";var r=n(82109),i=n(41318).includes,o=n(51223);r({target:"Array",proto:!0},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},82772:(e,t,n)=>{"use strict";var r=n(82109),i=n(1702),o=n(41318).indexOf,a=n(9341),s=i([].indexOf),l=!!s&&1/s([1],1,-0)<0,c=a("indexOf");r({target:"Array",proto:!0,forced:l||!c},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return l?s(this,e,t)||0:o(this,e,t)}})},79753:(e,t,n)=>{n(82109)({target:"Array",stat:!0},{isArray:n(43157)})},66992:(e,t,n)=>{"use strict";var r=n(45656),i=n(51223),o=n(97497),a=n(29909),s=n(3070).f,l=n(70654),c=n(31913),u=n(19781),h="Array Iterator",f=a.set,p=a.getterFor(h);e.exports=l(Array,"Array",(function(e,t){f(this,{type:h,target:r(e),index:0,kind:t})}),(function(){var e=p(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values");var d=o.Arguments=o.Array;if(i("keys"),i("values"),i("entries"),!c&&u&&"values"!==d.name)try{s(d,"name",{value:"values"})}catch(e){}},69600:(e,t,n)=>{"use strict";var r=n(82109),i=n(1702),o=n(68361),a=n(45656),s=n(9341),l=i([].join),c=o!=Object,u=s("join",",");r({target:"Array",proto:!0,forced:c||!u},{join:function(e){return l(a(this),void 0===e?",":e)}})},94986:(e,t,n)=>{var r=n(82109),i=n(86583);r({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},21249:(e,t,n)=>{"use strict";var r=n(82109),i=n(42092).map;r({target:"Array",proto:!0,forced:!n(81194)("map")},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},26572:(e,t,n)=>{"use strict";var r=n(82109),i=n(17854),o=n(47293),a=n(4411),s=n(86135),l=i.Array;r({target:"Array",stat:!0,forced:o((function(){function e(){}return!(l.of.call(e)instanceof e)}))},{of:function(){for(var e=0,t=arguments.length,n=new(a(this)?this:l)(t);t>e;)s(n,e,arguments[e++]);return n.length=t,n}})},96644:(e,t,n)=>{"use strict";var r=n(82109),i=n(53671).right,o=n(9341),a=n(7392),s=n(35268);r({target:"Array",proto:!0,forced:!o("reduceRight")||!s&&a>79&&a<83},{reduceRight:function(e){return i(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},85827:(e,t,n)=>{"use strict";var r=n(82109),i=n(53671).left,o=n(9341),a=n(7392),s=n(35268);r({target:"Array",proto:!0,forced:!o("reduce")||!s&&a>79&&a<83},{reduce:function(e){var t=arguments.length;return i(this,e,t,t>1?arguments[1]:void 0)}})},65069:(e,t,n)=>{"use strict";var r=n(82109),i=n(1702),o=n(43157),a=i([].reverse),s=[1,2];r({target:"Array",proto:!0,forced:String(s)===String(s.reverse())},{reverse:function(){return o(this)&&(this.length=this.length),a(this)}})},47042:(e,t,n)=>{"use strict";var r=n(82109),i=n(17854),o=n(43157),a=n(4411),s=n(70111),l=n(51400),c=n(26244),u=n(45656),h=n(86135),f=n(5112),p=n(81194),d=n(50206),m=p("slice"),g=f("species"),y=i.Array,v=Math.max;r({target:"Array",proto:!0,forced:!m},{slice:function(e,t){var n,r,i,f=u(this),p=c(f),m=l(e,p),b=l(void 0===t?p:t,p);if(o(f)&&(n=f.constructor,(a(n)&&(n===y||o(n.prototype))||s(n)&&null===(n=n[g]))&&(n=void 0),n===y||void 0===n))return d(f,m,b);for(r=new(void 0===n?y:n)(v(b-m,0)),i=0;m<b;m++,i++)m in f&&h(r,i,f[m]);return r.length=i,r}})},5212:(e,t,n)=>{"use strict";var r=n(82109),i=n(42092).some;r({target:"Array",proto:!0,forced:!n(9341)("some")},{some:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},2707:(e,t,n)=>{"use strict";var r=n(82109),i=n(1702),o=n(19662),a=n(47908),s=n(26244),l=n(41340),c=n(47293),u=n(94362),h=n(9341),f=n(68886),p=n(30256),d=n(7392),m=n(98008),g=[],y=i(g.sort),v=i(g.push),b=c((function(){g.sort(void 0)})),_=c((function(){g.sort(null)})),x=h("sort"),A=!c((function(){if(d)return d<70;if(!(f&&f>3)){if(p)return!0;if(m)return m<603;var e,t,n,r,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)g.push({k:t+r,v:n})}for(g.sort((function(e,t){return t.v-e.v})),r=0;r<g.length;r++)t=g[r].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}}));r({target:"Array",proto:!0,forced:b||!_||!x||!A},{sort:function(e){void 0!==e&&o(e);var t=a(this);if(A)return void 0===e?y(t):y(t,e);var n,r,i=[],c=s(t);for(r=0;r<c;r++)r in t&&v(i,t[r]);for(u(i,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:l(t)>l(n)?1:-1}}(e)),n=i.length,r=0;r<n;)t[r]=i[r++];for(;r<c;)delete t[r++];return t}})},53204:(e,t,n)=>{n(96340)("Array")},40561:(e,t,n)=>{"use strict";var r=n(82109),i=n(17854),o=n(51400),a=n(19303),s=n(26244),l=n(47908),c=n(65417),u=n(86135),h=n(81194)("splice"),f=i.TypeError,p=Math.max,d=Math.min,m=9007199254740991,g="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!h},{splice:function(e,t){var n,r,i,h,y,v,b=l(this),_=s(b),x=o(e,_),A=arguments.length;if(0===A?n=r=0:1===A?(n=0,r=_-x):(n=A-2,r=d(p(a(t),0),_-x)),_+n-r>m)throw f(g);for(i=c(b,r),h=0;h<r;h++)(y=x+h)in b&&u(i,h,b[y]);if(i.length=r,n<r){for(h=x;h<_-r;h++)v=h+n,(y=h+r)in b?b[v]=b[y]:delete b[v];for(h=_;h>_-r+n;h--)delete b[h-1]}else if(n>r)for(h=_-r;h>x;h--)v=h+n-1,(y=h+r-1)in b?b[v]=b[y]:delete b[v];for(h=0;h<n;h++)b[h+x]=arguments[h+2];return b.length=_-r+n,i}})},99244:(e,t,n)=>{n(51223)("flatMap")},33792:(e,t,n)=>{n(51223)("flat")},3690:(e,t,n)=>{var r=n(82109),i=n(13331);r({global:!0,forced:!n(24019)},{DataView:i.DataView})},16716:(e,t,n)=>{n(3690)},43016:(e,t,n)=>{"use strict";var r=n(82109),i=n(1702),o=n(47293)((function(){return 120!==new Date(16e11).getYear()})),a=i(Date.prototype.getFullYear);r({target:"Date",proto:!0,forced:o},{getYear:function(){return a(this)-1900}})},3843:(e,t,n)=>{var r=n(82109),i=n(17854),o=n(1702),a=i.Date,s=o(a.prototype.getTime);r({target:"Date",stat:!0},{now:function(){return s(new a)}})},81801:(e,t,n)=>{"use strict";var r=n(82109),i=n(1702),o=n(19303),a=Date.prototype,s=i(a.getTime),l=i(a.setFullYear);r({target:"Date",proto:!0},{setYear:function(e){s(this);var t=o(e);return l(this,0<=t&&t<=99?t+1900:t)}})},9550:(e,t,n)=>{n(82109)({target:"Date",proto:!0},{toGMTString:Date.prototype.toUTCString})},28733:(e,t,n)=>{var r=n(82109),i=n(85573);r({target:"Date",proto:!0,forced:Date.prototype.toISOString!==i},{toISOString:i})},5735:(e,t,n)=>{"use strict";var r=n(82109),i=n(47293),o=n(47908),a=n(57593);r({target:"Date",proto:!0,forced:i((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}))},{toJSON:function(e){var t=o(this),n=a(t,"number");return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},96078:(e,t,n)=>{var r=n(92597),i=n(31320),o=n(38709),a=n(5112)("toPrimitive"),s=Date.prototype;r(s,a)||i(s,a,o)},83710:(e,t,n)=>{var r=n(1702),i=n(31320),o=Date.prototype,a="Invalid Date",s=r(o.toString),l=r(o.getTime);String(new Date(NaN))!=a&&i(o,"toString",(function(){var e=l(this);return e==e?s(this):a}))},21703:(e,t,n)=>{var r=n(82109),i=n(17854),o=n(22104),a=n(89191),s=i.WebAssembly,l=7!==Error("e",{cause:7}).cause,c=function(e,t){var n={};n[e]=a(e,t,l),r({global:!0,forced:l},n)},u=function(e,t){if(s&&s[e]){var n={};n[e]=a("WebAssembly."+e,t,l),r({target:"WebAssembly",stat:!0,forced:l},n)}};c("Error",(function(e){return function(t){return o(e,this,arguments)}})),c("EvalError",(function(e){return function(t){return o(e,this,arguments)}})),c("RangeError",(function(e){return function(t){return o(e,this,arguments)}})),c("ReferenceError",(function(e){return function(t){return o(e,this,arguments)}})),c("SyntaxError",(function(e){return function(t){return o(e,this,arguments)}})),c("TypeError",(function(e){return function(t){return o(e,this,arguments)}})),c("URIError",(function(e){return function(t){return o(e,this,arguments)}})),u("CompileError",(function(e){return function(t){return o(e,this,arguments)}})),u("LinkError",(function(e){return function(t){return o(e,this,arguments)}})),u("RuntimeError",(function(e){return function(t){return o(e,this,arguments)}}))},96647:(e,t,n)=>{var r=n(31320),i=n(7762),o=Error.prototype;o.toString!==i&&r(o,"toString",i)},62130:(e,t,n)=>{"use strict";var r=n(82109),i=n(1702),o=n(41340),a=i("".charAt),s=i("".charCodeAt),l=i(/./.exec),c=i(1..toString),u=i("".toUpperCase),h=/[\w*+\-./@]/,f=function(e,t){for(var n=c(e,16);n.length<t;)n="0"+n;return n};r({global:!0},{escape:function(e){for(var t,n,r=o(e),i="",c=r.length,p=0;p<c;)t=a(r,p++),l(h,t)?i+=t:i+=(n=s(t,0))<256?"%"+f(n,2):"%u"+u(f(n,4));return i}})},24812:(e,t,n)=>{var r=n(82109),i=n(27065);r({target:"Function",proto:!0,forced:Function.bind!==i},{bind:i})},4855:(e,t,n)=>{"use strict";var r=n(60614),i=n(70111),o=n(3070),a=n(79518),s=n(5112)("hasInstance"),l=Function.prototype;s in l||o.f(l,s,{value:function(e){if(!r(this)||!i(e))return!1;var t=this.prototype;if(!i(t))return e instanceof this;for(;e=a(e);)if(t===e)return!0;return!1}})},68309:(e,t,n)=>{var r=n(19781),i=n(76530).EXISTS,o=n(1702),a=n(3070).f,s=Function.prototype,l=o(s.toString),c=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,u=o(c.exec);r&&!i&&a(s,"name",{configurable:!0,get:function(){try{return u(c,l(this))[1]}catch(e){return""}}})},35837:(e,t,n)=>{n(82109)({global:!0},{globalThis:n(17854)})},38862:(e,t,n)=>{var r=n(82109),i=n(35005),o=n(22104),a=n(46916),s=n(1702),l=n(47293),c=n(43157),u=n(60614),h=n(70111),f=n(52190),p=n(50206),d=n(30133),m=i("JSON","stringify"),g=s(/./.exec),y=s("".charAt),v=s("".charCodeAt),b=s("".replace),_=s(1..toString),x=/[\uD800-\uDFFF]/g,A=/^[\uD800-\uDBFF]$/,w=/^[\uDC00-\uDFFF]$/,C=!d||l((function(){var e=i("Symbol")();return"[null]"!=m([e])||"{}"!=m({a:e})||"{}"!=m(Object(e))})),E=l((function(){return'"\\udf06\\ud834"'!==m("\udf06\ud834")||'"\\udead"'!==m("\udead")})),S=function(e,t){var n=p(arguments),r=t;if((h(t)||void 0!==e)&&!f(e))return c(t)||(t=function(e,t){if(u(r)&&(t=a(r,this,e,t)),!f(t))return t}),n[1]=t,o(m,null,n)},T=function(e,t,n){var r=y(n,t-1),i=y(n,t+1);return g(A,e)&&!g(w,i)||g(w,e)&&!g(A,r)?"\\u"+_(v(e,0),16):e};m&&r({target:"JSON",stat:!0,forced:C||E},{stringify:function(e,t,n){var r=p(arguments),i=o(C?S:m,null,r);return E&&"string"==typeof i?b(i,x,T):i}})},73706:(e,t,n)=>{var r=n(17854);n(58003)(r.JSON,"JSON",!0)},69098:(e,t,n)=>{"use strict";n(77710)("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n(95631))},51532:(e,t,n)=>{n(69098)},99752:(e,t,n)=>{var r=n(82109),i=n(26513),o=Math.acosh,a=Math.log,s=Math.sqrt,l=Math.LN2;r({target:"Math",stat:!0,forced:!o||710!=Math.floor(o(Number.MAX_VALUE))||o(1/0)!=1/0},{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?a(e)+l:i(e-1+s(e-1)*s(e+1))}})},82376:(e,t,n)=>{var r=n(82109),i=Math.asinh,o=Math.log,a=Math.sqrt;r({target:"Math",stat:!0,forced:!(i&&1/i(0)>0)},{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):o(t+a(t*t+1)):t}})},73181:(e,t,n)=>{var r=n(82109),i=Math.atanh,o=Math.log;r({target:"Math",stat:!0,forced:!(i&&1/i(-0)<0)},{atanh:function(e){return 0==(e=+e)?e:o((1+e)/(1-e))/2}})},23484:(e,t,n)=>{var r=n(82109),i=n(64310),o=Math.abs,a=Math.pow;r({target:"Math",stat:!0},{cbrt:function(e){return i(e=+e)*a(o(e),1/3)}})},2388:(e,t,n)=>{var r=n(82109),i=Math.floor,o=Math.log,a=Math.LOG2E;r({target:"Math",stat:!0},{clz32:function(e){return(e>>>=0)?31-i(o(e+.5)*a):32}})},88621:(e,t,n)=>{var r=n(82109),i=n(66736),o=Math.cosh,a=Math.abs,s=Math.E;r({target:"Math",stat:!0,forced:!o||o(710)===1/0},{cosh:function(e){var t=i(a(e)-1)+1;return(t+1/(t*s*s))*(s/2)}})},60403:(e,t,n)=>{var r=n(82109),i=n(66736);r({target:"Math",stat:!0,forced:i!=Math.expm1},{expm1:i})},84755:(e,t,n)=>{n(82109)({target:"Math",stat:!0},{fround:n(26130)})},25438:(e,t,n)=>{var r=n(82109),i=Math.hypot,o=Math.abs,a=Math.sqrt;r({target:"Math",stat:!0,forced:!!i&&i(1/0,NaN)!==1/0},{hypot:function(e,t){for(var n,r,i=0,s=0,l=arguments.length,c=0;s<l;)c<(n=o(arguments[s++]))?(i=i*(r=c/n)*r+1,c=n):i+=n>0?(r=n/c)*r:n;return c===1/0?1/0:c*a(i)}})},90332:(e,t,n)=>{var r=n(82109),i=n(47293),o=Math.imul;r({target:"Math",stat:!0,forced:i((function(){return-5!=o(4294967295,5)||2!=o.length}))},{imul:function(e,t){var n=65535,r=+e,i=+t,o=n&r,a=n&i;return 0|o*a+((n&r>>>16)*a+o*(n&i>>>16)<<16>>>0)}})},40658:(e,t,n)=>{n(82109)({target:"Math",stat:!0},{log10:n(20403)})},40197:(e,t,n)=>{n(82109)({target:"Math",stat:!0},{log1p:n(26513)})},44914:(e,t,n)=>{var r=n(82109),i=Math.log,o=Math.LN2;r({target:"Math",stat:!0},{log2:function(e){return i(e)/o}})},52420:(e,t,n)=>{n(82109)({target:"Math",stat:!0},{sign:n(64310)})},60160:(e,t,n)=>{var r=n(82109),i=n(47293),o=n(66736),a=Math.abs,s=Math.exp,l=Math.E;r({target:"Math",stat:!0,forced:i((function(){return-2e-17!=Math.sinh(-2e-17)}))},{sinh:function(e){return a(e=+e)<1?(o(e)-o(-e))/2:(s(e-1)-s(-e-1))*(l/2)}})},60970:(e,t,n)=>{var r=n(82109),i=n(66736),o=Math.exp;r({target:"Math",stat:!0},{tanh:function(e){var t=i(e=+e),n=i(-e);return t==1/0?1:n==1/0?-1:(t-n)/(o(e)+o(-e))}})},10408:(e,t,n)=>{n(58003)(Math,"Math",!0)},73689:(e,t,n)=>{var r=n(82109),i=Math.ceil,o=Math.floor;r({target:"Math",stat:!0},{trunc:function(e){return(e>0?o:i)(e)}})},9653:(e,t,n)=>{"use strict";var r=n(19781),i=n(17854),o=n(1702),a=n(96114),s=n(31320),l=n(92597),c=n(79587),u=n(47976),h=n(52190),f=n(57593),p=n(47293),d=n(8006).f,m=n(31236).f,g=n(3070).f,y=n(50863),v=n(53111).trim,b="Number",_=i.Number,x=_.prototype,A=i.TypeError,w=o("".slice),C=o("".charCodeAt),E=function(e){var t=f(e,"number");return"bigint"==typeof t?t:S(t)},S=function(e){var t,n,r,i,o,a,s,l,c=f(e,"number");if(h(c))throw A("Cannot convert a Symbol value to a number");if("string"==typeof c&&c.length>2)if(c=v(c),43===(t=C(c,0))||45===t){if(88===(n=C(c,2))||120===n)return NaN}else if(48===t){switch(C(c,1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+c}for(a=(o=w(c,2)).length,s=0;s<a;s++)if((l=C(o,s))<48||l>i)return NaN;return parseInt(o,r)}return+c};if(a(b,!_(" 0o1")||!_("0b1")||_("+0x1"))){for(var T,B=function(e){var t=arguments.length<1?0:_(E(e)),n=this;return u(x,n)&&p((function(){y(n)}))?c(Object(t),n,B):t},k=r?d(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),M=0;k.length>M;M++)l(_,T=k[M])&&!l(B,T)&&g(B,T,m(_,T));B.prototype=x,x.constructor=B,s(i,b,B)}},93299:(e,t,n)=>{n(82109)({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},35192:(e,t,n)=>{n(82109)({target:"Number",stat:!0},{isFinite:n(77023)})},33161:(e,t,n)=>{n(82109)({target:"Number",stat:!0},{isInteger:n(55988)})},44048:(e,t,n)=>{n(82109)({target:"Number",stat:!0},{isNaN:function(e){return e!=e}})},78285:(e,t,n)=>{var r=n(82109),i=n(55988),o=Math.abs;r({target:"Number",stat:!0},{isSafeInteger:function(e){return i(e)&&o(e)<=9007199254740991}})},44363:(e,t,n)=>{n(82109)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},55994:(e,t,n)=>{n(82109)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},61874:(e,t,n)=>{var r=n(82109),i=n(2814);r({target:"Number",stat:!0,forced:Number.parseFloat!=i},{parseFloat:i})},9494:(e,t,n)=>{var r=n(82109),i=n(83009);r({target:"Number",stat:!0,forced:Number.parseInt!=i},{parseInt:i})},31354:(e,t,n)=>{"use strict";var r=n(82109),i=n(17854),o=n(1702),a=n(19303),s=n(50863),l=n(38415),c=n(20403),u=n(47293),h=i.RangeError,f=i.String,p=i.isFinite,d=Math.abs,m=Math.floor,g=Math.pow,y=Math.round,v=o(1..toExponential),b=o(l),_=o("".slice),x="-6.9000e-11"===v(-69e-12,4)&&"1.25e+0"===v(1.255,2)&&"1.235e+4"===v(12345,3)&&"3e+1"===v(25,0),A=u((function(){v(1,1/0)}))&&u((function(){v(1,-1/0)})),w=!u((function(){v(1/0,1/0)}))&&!u((function(){v(NaN,1/0)}));r({target:"Number",proto:!0,forced:!x||!A||!w},{toExponential:function(e){var t=s(this);if(void 0===e)return v(t);var n=a(e);if(!p(t))return f(t);if(n<0||n>20)throw h("Incorrect fraction digits");if(x)return v(t,n);var r="",i="",o=0,l="",u="";if(t<0&&(r="-",t=-t),0===t)o=0,i=b("0",n+1);else{var A=c(t);o=m(A);var w=0,C=g(10,o-n);2*t>=(2*(w=y(t/C))+1)*C&&(w+=1),w>=g(10,n+1)&&(w/=10,o+=1),i=f(w)}return 0!==n&&(i=_(i,0,1)+"."+_(i,1)),0===o?(l="+",u="0"):(l=o>0?"+":"-",u=f(d(o))),r+(i+"e")+l+u}})},56977:(e,t,n)=>{"use strict";var r=n(82109),i=n(17854),o=n(1702),a=n(19303),s=n(50863),l=n(38415),c=n(47293),u=i.RangeError,h=i.String,f=Math.floor,p=o(l),d=o("".slice),m=o(1..toFixed),g=function(e,t,n){return 0===t?n:t%2==1?g(e,t-1,n*e):g(e*e,t/2,n)},y=function(e,t,n){for(var r=-1,i=n;++r<6;)i+=t*e[r],e[r]=i%1e7,i=f(i/1e7)},v=function(e,t){for(var n=6,r=0;--n>=0;)r+=e[n],e[n]=f(r/t),r=r%t*1e7},b=function(e){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==e[t]){var r=h(e[t]);n=""===n?r:n+p("0",7-r.length)+r}return n};r({target:"Number",proto:!0,forced:c((function(){return"0.000"!==m(8e-5,3)||"1"!==m(.9,0)||"1.25"!==m(1.255,2)||"1000000000000000128"!==m(0xde0b6b3a7640080,0)}))||!c((function(){m({})}))},{toFixed:function(e){var t,n,r,i,o=s(this),l=a(e),c=[0,0,0,0,0,0],f="",m="0";if(l<0||l>20)throw u("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return h(o);if(o<0&&(f="-",o=-o),o>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(o*g(2,69,1))-69)<0?o*g(2,-t,1):o/g(2,t,1),n*=4503599627370496,(t=52-t)>0){for(y(c,0,n),r=l;r>=7;)y(c,1e7,0),r-=7;for(y(c,g(10,r,1),0),r=t-1;r>=23;)v(c,1<<23),r-=23;v(c,1<<r),y(c,1,1),v(c,2),m=b(c)}else y(c,0,n),y(c,1<<-t,0),m=b(c)+p("0",l);return l>0?f+((i=m.length)<=l?"0."+p("0",l-i)+m:d(m,0,i-l)+"."+d(m,i-l)):f+m}})},55147:(e,t,n)=>{"use strict";var r=n(82109),i=n(1702),o=n(47293),a=n(50863),s=i(1..toPrecision);r({target:"Number",proto:!0,forced:o((function(){return"1"!==s(1,void 0)}))||!o((function(){s({})}))},{toPrecision:function(e){return void 0===e?s(a(this)):s(a(this),e)}})},19601:(e,t,n)=>{var r=n(82109),i=n(21574);r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},78011:(e,t,n)=>{n(82109)({target:"Object",stat:!0,sham:!n(19781)},{create:n(70030)})},59595:(e,t,n)=>{"use strict";var r=n(82109),i=n(19781),o=n(69026),a=n(19662),s=n(47908),l=n(3070);i&&r({target:"Object",proto:!0,forced:o},{__defineGetter__:function(e,t){l.f(s(this),e,{get:a(t),enumerable:!0,configurable:!0})}})},33321:(e,t,n)=>{var r=n(82109),i=n(19781),o=n(36048).f;r({target:"Object",stat:!0,forced:Object.defineProperties!==o,sham:!i},{defineProperties:o})},69070:(e,t,n)=>{var r=n(82109),i=n(19781),o=n(3070).f;r({target:"Object",stat:!0,forced:Object.defineProperty!==o,sham:!i},{defineProperty:o})},35500:(e,t,n)=>{"use strict";var r=n(82109),i=n(19781),o=n(69026),a=n(19662),s=n(47908),l=n(3070);i&&r({target:"Object",proto:!0,forced:o},{__defineSetter__:function(e,t){l.f(s(this),e,{set:a(t),enumerable:!0,configurable:!0})}})},69720:(e,t,n)=>{var r=n(82109),i=n(44699).entries;r({target:"Object",stat:!0},{entries:function(e){return i(e)}})},43371:(e,t,n)=>{var r=n(82109),i=n(76677),o=n(47293),a=n(70111),s=n(62423).onFreeze,l=Object.freeze;r({target:"Object",stat:!0,forced:o((function(){l(1)})),sham:!i},{freeze:function(e){return l&&a(e)?l(s(e)):e}})},38559:(e,t,n)=>{var r=n(82109),i=n(20408),o=n(86135);r({target:"Object",stat:!0},{fromEntries:function(e){var t={};return i(e,(function(e,n){o(t,e,n)}),{AS_ENTRIES:!0}),t}})},38880:(e,t,n)=>{var r=n(82109),i=n(47293),o=n(45656),a=n(31236).f,s=n(19781),l=i((function(){a(1)}));r({target:"Object",stat:!0,forced:!s||l,sham:!s},{getOwnPropertyDescriptor:function(e,t){return a(o(e),t)}})},49337:(e,t,n)=>{var r=n(82109),i=n(19781),o=n(53887),a=n(45656),s=n(31236),l=n(86135);r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(e){for(var t,n,r=a(e),i=s.f,c=o(r),u={},h=0;c.length>h;)void 0!==(n=i(r,t=c[h++]))&&l(u,t,n);return u}})},36210:(e,t,n)=>{var r=n(82109),i=n(47293),o=n(1156).f;r({target:"Object",stat:!0,forced:i((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:o})},29660:(e,t,n)=>{var r=n(82109),i=n(30133),o=n(47293),a=n(25181),s=n(47908);r({target:"Object",stat:!0,forced:!i||o((function(){a.f(1)}))},{getOwnPropertySymbols:function(e){var t=a.f;return t?t(s(e)):[]}})},30489:(e,t,n)=>{var r=n(82109),i=n(47293),o=n(47908),a=n(79518),s=n(49920);r({target:"Object",stat:!0,forced:i((function(){a(1)})),sham:!s},{getPrototypeOf:function(e){return a(o(e))}})},46314:(e,t,n)=>{n(82109)({target:"Object",stat:!0},{hasOwn:n(92597)})},41825:(e,t,n)=>{var r=n(82109),i=n(52050);r({target:"Object",stat:!0,forced:Object.isExtensible!==i},{isExtensible:i})},98410:(e,t,n)=>{var r=n(82109),i=n(47293),o=n(70111),a=n(84326),s=n(7556),l=Object.isFrozen;r({target:"Object",stat:!0,forced:i((function(){l(1)}))||s},{isFrozen:function(e){return!o(e)||!(!s||"ArrayBuffer"!=a(e))||!!l&&l(e)}})},72200:(e,t,n)=>{var r=n(82109),i=n(47293),o=n(70111),a=n(84326),s=n(7556),l=Object.isSealed;r({target:"Object",stat:!0,forced:i((function(){l(1)}))||s},{isSealed:function(e){return!o(e)||!(!s||"ArrayBuffer"!=a(e))||!!l&&l(e)}})},43304:(e,t,n)=>{n(82109)({target:"Object",stat:!0},{is:n(81150)})},47941:(e,t,n)=>{var r=n(82109),i=n(47908),o=n(81956);r({target:"Object",stat:!0,forced:n(47293)((function(){o(1)}))},{keys:function(e){return o(i(e))}})},94869:(e,t,n)=>{"use strict";var r=n(82109),i=n(19781),o=n(69026),a=n(47908),s=n(34948),l=n(79518),c=n(31236).f;i&&r({target:"Object",proto:!0,forced:o},{__lookupGetter__:function(e){var t,n=a(this),r=s(e);do{if(t=c(n,r))return t.get}while(n=l(n))}})},33952:(e,t,n)=>{"use strict";var r=n(82109),i=n(19781),o=n(69026),a=n(47908),s=n(34948),l=n(79518),c=n(31236).f;i&&r({target:"Object",proto:!0,forced:o},{__lookupSetter__:function(e){var t,n=a(this),r=s(e);do{if(t=c(n,r))return t.set}while(n=l(n))}})},57227:(e,t,n)=>{var r=n(82109),i=n(70111),o=n(62423).onFreeze,a=n(76677),s=n(47293),l=Object.preventExtensions;r({target:"Object",stat:!0,forced:s((function(){l(1)})),sham:!a},{preventExtensions:function(e){return l&&i(e)?l(o(e)):e}})},60514:(e,t,n)=>{var r=n(82109),i=n(70111),o=n(62423).onFreeze,a=n(76677),s=n(47293),l=Object.seal;r({target:"Object",stat:!0,forced:s((function(){l(1)})),sham:!a},{seal:function(e){return l&&i(e)?l(o(e)):e}})},68304:(e,t,n)=>{n(82109)({target:"Object",stat:!0},{setPrototypeOf:n(27674)})},41539:(e,t,n)=>{var r=n(51694),i=n(31320),o=n(90288);r||i(Object.prototype,"toString",o,{unsafe:!0})},26833:(e,t,n)=>{var r=n(82109),i=n(44699).values;r({target:"Object",stat:!0},{values:function(e){return i(e)}})},54678:(e,t,n)=>{var r=n(82109),i=n(2814);r({global:!0,forced:parseFloat!=i},{parseFloat:i})},91058:(e,t,n)=>{var r=n(82109),i=n(83009);r({global:!0,forced:parseInt!=i},{parseInt:i})},17922:(e,t,n)=>{"use strict";var r=n(82109),i=n(46916),o=n(19662),a=n(78523),s=n(12534),l=n(20408);r({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=a.f(t),r=n.resolve,c=n.reject,u=s((function(){var n=o(t.resolve),a=[],s=0,c=1;l(e,(function(e){var o=s++,l=!1;c++,i(n,t,e).then((function(e){l||(l=!0,a[o]={status:"fulfilled",value:e},--c||r(a))}),(function(e){l||(l=!0,a[o]={status:"rejected",reason:e},--c||r(a))}))})),--c||r(a)}));return u.error&&c(u.value),n.promise}})},70821:(e,t,n)=>{"use strict";var r=n(82109),i=n(46916),o=n(19662),a=n(78523),s=n(12534),l=n(20408);r({target:"Promise",stat:!0,forced:n(80612)},{all:function(e){var t=this,n=a.f(t),r=n.resolve,c=n.reject,u=s((function(){var n=o(t.resolve),a=[],s=0,u=1;l(e,(function(e){var o=s++,l=!1;u++,i(n,t,e).then((function(e){l||(l=!0,a[o]=e,--u||r(a))}),c)})),--u||r(a)}));return u.error&&c(u.value),n.promise}})},34668:(e,t,n)=>{"use strict";var r=n(82109),i=n(46916),o=n(19662),a=n(35005),s=n(78523),l=n(12534),c=n(20408),u="No one promise resolved";r({target:"Promise",stat:!0},{any:function(e){var t=this,n=a("AggregateError"),r=s.f(t),h=r.resolve,f=r.reject,p=l((function(){var r=o(t.resolve),a=[],s=0,l=1,p=!1;c(e,(function(e){var o=s++,c=!1;l++,i(r,t,e).then((function(e){c||p||(p=!0,h(e))}),(function(e){c||p||(c=!0,a[o]=e,--l||f(new n(a,u)))}))})),--l||f(new n(a,u))}));return p.error&&f(p.value),r.promise}})},94164:(e,t,n)=>{"use strict";var r=n(82109),i=n(31913),o=n(63702).CONSTRUCTOR,a=n(85341),s=n(35005),l=n(60614),c=n(31320),u=a&&a.prototype;if(r({target:"Promise",proto:!0,forced:o,real:!0},{catch:function(e){return this.then(void 0,e)}}),!i&&l(a)){var h=s("Promise").prototype.catch;u.catch!==h&&c(u,"catch",h,{unsafe:!0})}},43401:(e,t,n)=>{"use strict";var r,i,o,a=n(82109),s=n(31913),l=n(35268),c=n(17854),u=n(46916),h=n(31320),f=n(12248),p=n(27674),d=n(58003),m=n(96340),g=n(19662),y=n(60614),v=n(70111),b=n(25787),_=n(36707),x=n(20261).set,A=n(95948),w=n(842),C=n(12534),E=n(18572),S=n(29909),T=n(85341),B=n(63702),k=n(78523),M="Promise",P=B.CONSTRUCTOR,I=B.REJECTION_EVENT,O=B.SUBCLASSING,D=S.getterFor(M),z=S.set,L=T&&T.prototype,R=T,F=L,U=c.TypeError,N=c.document,j=c.process,V=k.f,G=V,q=!!(N&&N.createEvent&&c.dispatchEvent),W="unhandledrejection",H=function(e){var t;return!(!v(e)||!y(t=e.then))&&t},$=function(e,t){var n,r,i,o=t.value,a=1==t.state,s=a?e.ok:e.fail,l=e.resolve,c=e.reject,h=e.domain;try{s?(a||(2===t.rejection&&J(t),t.rejection=1),!0===s?n=o:(h&&h.enter(),n=s(o),h&&(h.exit(),i=!0)),n===e.promise?c(U("Promise-chain cycle")):(r=H(n))?u(r,n,l,c):l(n)):c(o)}catch(e){h&&!i&&h.exit(),c(e)}},X=function(e,t){e.notified||(e.notified=!0,A((function(){for(var n,r=e.reactions;n=r.get();)$(n,e);e.notified=!1,t&&!e.rejection&&Y(e)})))},Z=function(e,t,n){var r,i;q?((r=N.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),c.dispatchEvent(r)):r={promise:t,reason:n},!I&&(i=c["on"+e])?i(r):e===W&&w("Unhandled promise rejection",n)},Y=function(e){u(x,c,(function(){var t,n=e.facade,r=e.value;if(K(e)&&(t=C((function(){l?j.emit("unhandledRejection",r,n):Z(W,n,r)})),e.rejection=l||K(e)?2:1,t.error))throw t.value}))},K=function(e){return 1!==e.rejection&&!e.parent},J=function(e){u(x,c,(function(){var t=e.facade;l?j.emit("rejectionHandled",t):Z("rejectionhandled",t,e.value)}))},Q=function(e,t,n){return function(r){e(t,r,n)}},ee=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,X(e,!0))},te=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw U("Promise can't be resolved itself");var r=H(t);r?A((function(){var n={done:!1};try{u(r,t,Q(te,n,e),Q(ee,n,e))}catch(t){ee(n,t,e)}})):(e.value=t,e.state=1,X(e,!1))}catch(t){ee({done:!1},t,e)}}};if(P&&(F=(R=function(e){b(this,F),g(e),u(r,this);var t=D(this);try{e(Q(te,t),Q(ee,t))}catch(e){ee(t,e)}}).prototype,(r=function(e){z(this,{type:M,done:!1,notified:!1,parent:!1,reactions:new E,rejection:!1,state:0,value:void 0})}).prototype=f(F,{then:function(e,t){var n=D(this),r=V(_(this,R));return n.parent=!0,r.ok=!y(e)||e,r.fail=y(t)&&t,r.domain=l?j.domain:void 0,0==n.state?n.reactions.add(r):A((function(){$(r,n)})),r.promise}}),i=function(){var e=new r,t=D(e);this.promise=e,this.resolve=Q(te,t),this.reject=Q(ee,t)},k.f=V=function(e){return e===R||void 0===e?new i(e):G(e)},!s&&y(T)&&L!==Object.prototype)){o=L.then,O||h(L,"then",(function(e,t){var n=this;return new R((function(e,t){u(o,n,e,t)})).then(e,t)}),{unsafe:!0});try{delete L.constructor}catch(e){}p&&p(L,F)}a({global:!0,wrap:!0,forced:P},{Promise:R}),d(R,M,!1,!0),m(M)},17727:(e,t,n)=>{"use strict";var r=n(82109),i=n(31913),o=n(85341),a=n(47293),s=n(35005),l=n(60614),c=n(36707),u=n(69478),h=n(31320),f=o&&o.prototype;if(r({target:"Promise",proto:!0,real:!0,forced:!!o&&a((function(){f.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=c(this,s("Promise")),n=l(e);return this.then(n?function(n){return u(t,e()).then((function(){return n}))}:e,n?function(n){return u(t,e()).then((function(){throw n}))}:e)}}),!i&&l(o)){var p=s("Promise").prototype.finally;f.finally!==p&&h(f,"finally",p,{unsafe:!0})}},88674:(e,t,n)=>{n(43401),n(70821),n(94164),n(6027),n(60683),n(96294)},6027:(e,t,n)=>{"use strict";var r=n(82109),i=n(46916),o=n(19662),a=n(78523),s=n(12534),l=n(20408);r({target:"Promise",stat:!0,forced:n(80612)},{race:function(e){var t=this,n=a.f(t),r=n.reject,c=s((function(){var a=o(t.resolve);l(e,(function(e){i(a,t,e).then(n.resolve,r)}))}));return c.error&&r(c.value),n.promise}})},60683:(e,t,n)=>{"use strict";var r=n(82109),i=n(46916),o=n(78523);r({target:"Promise",stat:!0,forced:n(63702).CONSTRUCTOR},{reject:function(e){var t=o.f(this);return i(t.reject,void 0,e),t.promise}})},96294:(e,t,n)=>{"use strict";var r=n(82109),i=n(35005),o=n(31913),a=n(85341),s=n(63702).CONSTRUCTOR,l=n(69478),c=i("Promise"),u=o&&!s;r({target:"Promise",stat:!0,forced:o||s},{resolve:function(e){return l(u&&this===c?a:this,e)}})},36535:(e,t,n)=>{var r=n(82109),i=n(22104),o=n(19662),a=n(19670);r({target:"Reflect",stat:!0,forced:!n(47293)((function(){Reflect.apply((function(){}))}))},{apply:function(e,t,n){return i(o(e),t,a(n))}})},12419:(e,t,n)=>{var r=n(82109),i=n(35005),o=n(22104),a=n(27065),s=n(39483),l=n(19670),c=n(70111),u=n(70030),h=n(47293),f=i("Reflect","construct"),p=Object.prototype,d=[].push,m=h((function(){function e(){}return!(f((function(){}),[],e)instanceof e)})),g=!h((function(){f((function(){}))})),y=m||g;r({target:"Reflect",stat:!0,forced:y,sham:y},{construct:function(e,t){s(e),l(t);var n=arguments.length<3?e:s(arguments[2]);if(g&&!m)return f(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return o(d,r,t),new(o(a,e,r))}var i=n.prototype,h=u(c(i)?i:p),y=o(e,h,t);return c(y)?y:h}})},69596:(e,t,n)=>{var r=n(82109),i=n(19781),o=n(19670),a=n(34948),s=n(3070);r({target:"Reflect",stat:!0,forced:n(47293)((function(){Reflect.defineProperty(s.f({},1,{value:1}),1,{value:2})})),sham:!i},{defineProperty:function(e,t,n){o(e);var r=a(t);o(n);try{return s.f(e,r,n),!0}catch(e){return!1}}})},52586:(e,t,n)=>{var r=n(82109),i=n(19670),o=n(31236).f;r({target:"Reflect",stat:!0},{deleteProperty:function(e,t){var n=o(i(e),t);return!(n&&!n.configurable)&&delete e[t]}})},95683:(e,t,n)=>{var r=n(82109),i=n(19781),o=n(19670),a=n(31236);r({target:"Reflect",stat:!0,sham:!i},{getOwnPropertyDescriptor:function(e,t){return a.f(o(e),t)}})},39361:(e,t,n)=>{var r=n(82109),i=n(19670),o=n(79518);r({target:"Reflect",stat:!0,sham:!n(49920)},{getPrototypeOf:function(e){return o(i(e))}})},74819:(e,t,n)=>{var r=n(82109),i=n(46916),o=n(70111),a=n(19670),s=n(45032),l=n(31236),c=n(79518);r({target:"Reflect",stat:!0},{get:function e(t,n){var r,u,h=arguments.length<3?t:arguments[2];return a(t)===h?t[n]:(r=l.f(t,n))?s(r)?r.value:void 0===r.get?void 0:i(r.get,h):o(u=c(t))?e(u,n,h):void 0}})},51037:(e,t,n)=>{n(82109)({target:"Reflect",stat:!0},{has:function(e,t){return t in e}})},5898:(e,t,n)=>{var r=n(82109),i=n(19670),o=n(52050);r({target:"Reflect",stat:!0},{isExtensible:function(e){return i(e),o(e)}})},67556:(e,t,n)=>{n(82109)({target:"Reflect",stat:!0},{ownKeys:n(53887)})},14361:(e,t,n)=>{var r=n(82109),i=n(35005),o=n(19670);r({target:"Reflect",stat:!0,sham:!n(76677)},{preventExtensions:function(e){o(e);try{var t=i("Object","preventExtensions");return t&&t(e),!0}catch(e){return!1}}})},39532:(e,t,n)=>{var r=n(82109),i=n(19670),o=n(96077),a=n(27674);a&&r({target:"Reflect",stat:!0},{setPrototypeOf:function(e,t){i(e),o(t);try{return a(e,t),!0}catch(e){return!1}}})},83593:(e,t,n)=>{var r=n(82109),i=n(46916),o=n(19670),a=n(70111),s=n(45032),l=n(47293),c=n(3070),u=n(31236),h=n(79518),f=n(79114);r({target:"Reflect",stat:!0,forced:l((function(){var e=function(){},t=c.f(new e,"a",{configurable:!0});return!1!==Reflect.set(e.prototype,"a",1,t)}))},{set:function e(t,n,r){var l,p,d,m=arguments.length<4?t:arguments[3],g=u.f(o(t),n);if(!g){if(a(p=h(t)))return e(p,n,r,m);g=f(0)}if(s(g)){if(!1===g.writable||!a(m))return!1;if(l=u.f(m,n)){if(l.get||l.set||!1===l.writable)return!1;l.value=r,c.f(m,n,l)}else c.f(m,n,f(0,r))}else{if(void 0===(d=g.set))return!1;i(d,m,r)}return!0}})},81299:(e,t,n)=>{var r=n(82109),i=n(17854),o=n(58003);r({global:!0},{Reflect:{}}),o(i.Reflect,"Reflect",!0)},24603:(e,t,n)=>{var r=n(19781),i=n(17854),o=n(1702),a=n(96114),s=n(79587),l=n(68880),c=n(8006).f,u=n(47976),h=n(47850),f=n(41340),p=n(34706),d=n(52999),m=n(2626),g=n(31320),y=n(47293),v=n(92597),b=n(29909).enforce,_=n(96340),x=n(5112),A=n(9441),w=n(38173),C=x("match"),E=i.RegExp,S=E.prototype,T=i.SyntaxError,B=o(S.exec),k=o("".charAt),M=o("".replace),P=o("".indexOf),I=o("".slice),O=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,D=/a/g,z=/a/g,L=new E(D)!==D,R=d.MISSED_STICKY,F=d.UNSUPPORTED_Y;if(a("RegExp",r&&(!L||R||A||w||y((function(){return z[C]=!1,E(D)!=D||E(z)==z||"/a/i"!=E(D,"i")}))))){for(var U=function(e,t){var n,r,i,o,a,c,d=u(S,this),m=h(e),g=void 0===t,y=[],_=e;if(!d&&m&&g&&e.constructor===U)return e;if((m||u(S,e))&&(e=e.source,g&&(t=p(_))),e=void 0===e?"":f(e),t=void 0===t?"":f(t),_=e,A&&"dotAll"in D&&(r=!!t&&P(t,"s")>-1)&&(t=M(t,/s/g,"")),n=t,R&&"sticky"in D&&(i=!!t&&P(t,"y")>-1)&&F&&(t=M(t,/y/g,"")),w&&(o=function(e){for(var t,n=e.length,r=0,i="",o=[],a={},s=!1,l=!1,c=0,u="";r<=n;r++){if("\\"===(t=k(e,r)))t+=k(e,++r);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:B(O,I(e,r+1))&&(r+=2,l=!0),i+=t,c++;continue;case">"===t&&l:if(""===u||v(a,u))throw new T("Invalid capture group name");a[u]=!0,o[o.length]=[u,c],l=!1,u="";continue}l?u+=t:i+=t}return[i,o]}(e),e=o[0],y=o[1]),a=s(E(e,t),d?this:S,U),(r||i||y.length)&&(c=b(a),r&&(c.dotAll=!0,c.raw=U(function(e){for(var t,n=e.length,r=0,i="",o=!1;r<=n;r++)"\\"!==(t=k(e,r))?o||"."!==t?("["===t?o=!0:"]"===t&&(o=!1),i+=t):i+="[\\s\\S]":i+=t+k(e,++r);return i}(e),n)),i&&(c.sticky=!0),y.length&&(c.groups=y)),e!==_)try{l(a,"source",""===_?"(?:)":_)}catch(e){}return a},N=c(E),j=0;N.length>j;)m(U,E,N[j++]);S.constructor=U,U.prototype=S,g(i,"RegExp",U)}_("RegExp")},28450:(e,t,n)=>{var r=n(17854),i=n(19781),o=n(9441),a=n(84326),s=n(3070).f,l=n(29909).get,c=RegExp.prototype,u=r.TypeError;i&&o&&s(c,"dotAll",{configurable:!0,get:function(){if(this!==c){if("RegExp"===a(this))return!!l(this).dotAll;throw u("Incompatible receiver, RegExp required")}}})},74916:(e,t,n)=>{"use strict";var r=n(82109),i=n(22261);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},92087:(e,t,n)=>{var r=n(19781),i=n(3070),o=n(67066),a=n(47293),s=RegExp.prototype;r&&a((function(){return"sy"!==Object.getOwnPropertyDescriptor(s,"flags").get.call({dotAll:!0,sticky:!0})}))&&i.f(s,"flags",{configurable:!0,get:o})},88386:(e,t,n)=>{var r=n(17854),i=n(19781),o=n(52999).MISSED_STICKY,a=n(84326),s=n(3070).f,l=n(29909).get,c=RegExp.prototype,u=r.TypeError;i&&o&&s(c,"sticky",{configurable:!0,get:function(){if(this!==c){if("RegExp"===a(this))return!!l(this).sticky;throw u("Incompatible receiver, RegExp required")}}})},77601:(e,t,n)=>{"use strict";n(74916);var r,i,o=n(82109),a=n(17854),s=n(46916),l=n(1702),c=n(60614),u=n(70111),h=(r=!1,(i=/[ac]/).exec=function(){return r=!0,/./.exec.apply(this,arguments)},!0===i.test("abc")&&r),f=a.Error,p=l(/./.test);o({target:"RegExp",proto:!0,forced:!h},{test:function(e){var t=this.exec;if(!c(t))return p(this,e);var n=s(t,this,e);if(null!==n&&!u(n))throw new f("RegExp exec method returned something other than an Object or null");return!!n}})},39714:(e,t,n)=>{"use strict";var r=n(76530).PROPER,i=n(31320),o=n(19670),a=n(41340),s=n(47293),l=n(34706),c="toString",u=RegExp.prototype.toString,h=s((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),f=r&&u.name!=c;(h||f)&&i(RegExp.prototype,c,(function(){var e=o(this);return"/"+a(e.source)+"/"+a(l(e))}),{unsafe:!0})},37227:(e,t,n)=>{"use strict";n(77710)("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n(95631))},70189:(e,t,n)=>{n(37227)},15218:(e,t,n)=>{"use strict";var r=n(82109),i=n(14230);r({target:"String",proto:!0,forced:n(43429)("anchor")},{anchor:function(e){return i(this,"a","name",e)}})},24506:(e,t,n)=>{"use strict";var r=n(82109),i=n(1702),o=n(84488),a=n(19303),s=n(41340),l=n(47293),c=i("".charAt);r({target:"String",proto:!0,forced:l((function(){return"\ud842"!=="".at(-2)}))},{at:function(e){var t=s(o(this)),n=t.length,r=a(e),i=r>=0?r:n+r;return i<0||i>=n?void 0:c(t,i)}})},74475:(e,t,n)=>{"use strict";var r=n(82109),i=n(14230);r({target:"String",proto:!0,forced:n(43429)("big")},{big:function(){return i(this,"big","","")}})},57929:(e,t,n)=>{"use strict";var r=n(82109),i=n(14230);r({target:"String",proto:!0,forced:n(43429)("blink")},{blink:function(){return i(this,"blink","","")}})},50915:(e,t,n)=>{"use strict";var r=n(82109),i=n(14230);r({target:"String",proto:!0,forced:n(43429)("bold")},{bold:function(){return i(this,"b","","")}})},79841:(e,t,n)=>{"use strict";var r=n(82109),i=n(28710).codeAt;r({target:"String",proto:!0},{codePointAt:function(e){return i(this,e)}})},27852:(e,t,n)=>{"use strict";var r,i=n(82109),o=n(1702),a=n(31236).f,s=n(17466),l=n(41340),c=n(3929),u=n(84488),h=n(84964),f=n(31913),p=o("".endsWith),d=o("".slice),m=Math.min,g=h("endsWith");i({target:"String",proto:!0,forced:!(!f&&!g&&(r=a(String.prototype,"endsWith"),r&&!r.writable)||g)},{endsWith:function(e){var t=l(u(this));c(e);var n=arguments.length>1?arguments[1]:void 0,r=t.length,i=void 0===n?r:m(s(n),r),o=l(e);return p?p(t,o,i):d(t,i-o.length,i)===o}})},29253:(e,t,n)=>{"use strict";var r=n(82109),i=n(14230);r({target:"String",proto:!0,forced:n(43429)("fixed")},{fixed:function(){return i(this,"tt","","")}})},42125:(e,t,n)=>{"use strict";var r=n(82109),i=n(14230);r({target:"String",proto:!0,forced:n(43429)("fontcolor")},{fontcolor:function(e){return i(this,"font","color",e)}})},78830:(e,t,n)=>{"use strict";var r=n(82109),i=n(14230);r({target:"String",proto:!0,forced:n(43429)("fontsize")},{fontsize:function(e){return i(this,"font","size",e)}})},94953:(e,t,n)=>{var r=n(82109),i=n(17854),o=n(1702),a=n(51400),s=i.RangeError,l=String.fromCharCode,c=String.fromCodePoint,u=o([].join);r({target:"String",stat:!0,forced:!!c&&1!=c.length},{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,i=0;r>i;){if(t=+arguments[i++],a(t,1114111)!==t)throw s(t+" is not a valid code point");n[i]=t<65536?l(t):l(55296+((t-=65536)>>10),t%1024+56320)}return u(n,"")}})},32023:(e,t,n)=>{"use strict";var r=n(82109),i=n(1702),o=n(3929),a=n(84488),s=n(41340),l=n(84964),c=i("".indexOf);r({target:"String",proto:!0,forced:!l("includes")},{includes:function(e){return!!~c(s(a(this)),s(o(e)),arguments.length>1?arguments[1]:void 0)}})},58734:(e,t,n)=>{"use strict";var r=n(82109),i=n(14230);r({target:"String",proto:!0,forced:n(43429)("italics")},{italics:function(){return i(this,"i","","")}})},78783:(e,t,n)=>{"use strict";var r=n(28710).charAt,i=n(41340),o=n(29909),a=n(70654),s="String Iterator",l=o.set,c=o.getterFor(s);a(String,"String",(function(e){l(this,{type:s,string:i(e),index:0})}),(function(){var e,t=c(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=r(n,i),t.index+=e.length,{value:e,done:!1})}))},29254:(e,t,n)=>{"use strict";var r=n(82109),i=n(14230);r({target:"String",proto:!0,forced:n(43429)("link")},{link:function(e){return i(this,"a","href",e)}})},76373:(e,t,n)=>{"use strict";var r=n(82109),i=n(17854),o=n(46916),a=n(1702),s=n(24994),l=n(84488),c=n(17466),u=n(41340),h=n(19670),f=n(84326),p=n(47850),d=n(34706),m=n(58173),g=n(31320),y=n(47293),v=n(5112),b=n(36707),_=n(31530),x=n(97651),A=n(29909),w=n(31913),C=v("matchAll"),E="RegExp String Iterator",S=A.set,T=A.getterFor(E),B=RegExp.prototype,k=i.TypeError,M=a("".indexOf),P=a("".matchAll),I=!!P&&!y((function(){P("a",/./)})),O=s((function(e,t,n,r){S(this,{type:E,regexp:e,string:t,global:n,unicode:r,done:!1})}),"RegExp String",(function(){var e=T(this);if(e.done)return{value:void 0,done:!0};var t=e.regexp,n=e.string,r=x(t,n);return null===r?{value:void 0,done:e.done=!0}:e.global?(""===u(r[0])&&(t.lastIndex=_(n,c(t.lastIndex),e.unicode)),{value:r,done:!1}):(e.done=!0,{value:r,done:!1})})),D=function(e){var t,n,r,i=h(this),o=u(e),a=b(i,RegExp),s=u(d(i));return t=new a(a===RegExp?i.source:i,s),n=!!~M(s,"g"),r=!!~M(s,"u"),t.lastIndex=c(i.lastIndex),new O(t,o,n,r)};r({target:"String",proto:!0,forced:I},{matchAll:function(e){var t,n,r,i,a=l(this);if(null!=e){if(p(e)&&(t=u(l(d(e))),!~M(t,"g")))throw k("`.matchAll` does not allow non-global regexes");if(I)return P(a,e);if(void 0===(r=m(e,C))&&w&&"RegExp"==f(e)&&(r=D),r)return o(r,e,a)}else if(I)return P(a,e);return n=u(a),i=new RegExp(e,"g"),w?o(D,i,n):i[C](n)}}),w||C in B||g(B,C,D)},4723:(e,t,n)=>{"use strict";var r=n(46916),i=n(27007),o=n(19670),a=n(17466),s=n(41340),l=n(84488),c=n(58173),u=n(31530),h=n(97651);i("match",(function(e,t,n){return[function(t){var n=l(this),i=null==t?void 0:c(t,e);return i?r(i,t,n):new RegExp(t)[e](s(n))},function(e){var r=o(this),i=s(e),l=n(t,r,i);if(l.done)return l.value;if(!r.global)return h(r,i);var c=r.unicode;r.lastIndex=0;for(var f,p=[],d=0;null!==(f=h(r,i));){var m=s(f[0]);p[d]=m,""===m&&(r.lastIndex=u(i,a(r.lastIndex),c)),d++}return 0===d?null:p}]}))},66528:(e,t,n)=>{"use strict";var r=n(82109),i=n(76650).end;r({target:"String",proto:!0,forced:n(54986)},{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},83112:(e,t,n)=>{"use strict";var r=n(82109),i=n(76650).start;r({target:"String",proto:!0,forced:n(54986)},{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},38992:(e,t,n)=>{var r=n(82109),i=n(1702),o=n(45656),a=n(47908),s=n(41340),l=n(26244),c=i([].push),u=i([].join);r({target:"String",stat:!0},{raw:function(e){for(var t=o(a(e).raw),n=l(t),r=arguments.length,i=[],h=0;n>h;){if(c(i,s(t[h++])),h===n)return u(i,"");h<r&&c(i,s(arguments[h]))}}})},82481:(e,t,n)=>{n(82109)({target:"String",proto:!0},{repeat:n(38415)})},68757:(e,t,n)=>{"use strict";var r=n(82109),i=n(17854),o=n(46916),a=n(1702),s=n(84488),l=n(60614),c=n(47850),u=n(41340),h=n(58173),f=n(34706),p=n(10647),d=n(5112),m=n(31913),g=d("replace"),y=i.TypeError,v=a("".indexOf),b=a("".replace),_=a("".slice),x=Math.max,A=function(e,t,n){return n>e.length?-1:""===t?n:v(e,t,n)};r({target:"String",proto:!0},{replaceAll:function(e,t){var n,r,i,a,d,w,C,E,S,T=s(this),B=0,k=0,M="";if(null!=e){if((n=c(e))&&(r=u(s(f(e))),!~v(r,"g")))throw y("`.replaceAll` does not allow non-global regexes");if(i=h(e,g))return o(i,e,T,t);if(m&&n)return b(u(T),e,t)}for(a=u(T),d=u(e),(w=l(t))||(t=u(t)),C=d.length,E=x(1,C),B=A(a,d,0);-1!==B;)S=w?u(t(d,B,a)):p(d,a,B,[],void 0,t),M+=_(a,k,B)+S,k=B+C,B=A(a,d,B+E);return k<a.length&&(M+=_(a,k)),M}})},15306:(e,t,n)=>{"use strict";var r=n(22104),i=n(46916),o=n(1702),a=n(27007),s=n(47293),l=n(19670),c=n(60614),u=n(19303),h=n(17466),f=n(41340),p=n(84488),d=n(31530),m=n(58173),g=n(10647),y=n(97651),v=n(5112)("replace"),b=Math.max,_=Math.min,x=o([].concat),A=o([].push),w=o("".indexOf),C=o("".slice),E="$0"==="a".replace(/./,"$0"),S=!!/./[v]&&""===/./[v]("a","$0");a("replace",(function(e,t,n){var o=S?"$":"$0";return[function(e,n){var r=p(this),o=null==e?void 0:m(e,v);return o?i(o,e,r,n):i(t,f(r),e,n)},function(e,i){var a=l(this),s=f(e);if("string"==typeof i&&-1===w(i,o)&&-1===w(i,"$<")){var p=n(t,a,s,i);if(p.done)return p.value}var m=c(i);m||(i=f(i));var v=a.global;if(v){var E=a.unicode;a.lastIndex=0}for(var S=[];;){var T=y(a,s);if(null===T)break;if(A(S,T),!v)break;""===f(T[0])&&(a.lastIndex=d(s,h(a.lastIndex),E))}for(var B,k="",M=0,P=0;P<S.length;P++){for(var I=f((T=S[P])[0]),O=b(_(u(T.index),s.length),0),D=[],z=1;z<T.length;z++)A(D,void 0===(B=T[z])?B:String(B));var L=T.groups;if(m){var R=x([I],D,O,s);void 0!==L&&A(R,L);var F=f(r(i,void 0,R))}else F=g(I,s,O,D,L,i);O>=M&&(k+=C(s,M,O)+F,M=O+I.length)}return k+C(s,M)}]}),!!s((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!E||S)},64765:(e,t,n)=>{"use strict";var r=n(46916),i=n(27007),o=n(19670),a=n(84488),s=n(81150),l=n(41340),c=n(58173),u=n(97651);i("search",(function(e,t,n){return[function(t){var n=a(this),i=null==t?void 0:c(t,e);return i?r(i,t,n):new RegExp(t)[e](l(n))},function(e){var r=o(this),i=l(e),a=n(t,r,i);if(a.done)return a.value;var c=r.lastIndex;s(c,0)||(r.lastIndex=0);var h=u(r,i);return s(r.lastIndex,c)||(r.lastIndex=c),null===h?-1:h.index}]}))},37268:(e,t,n)=>{"use strict";var r=n(82109),i=n(14230);r({target:"String",proto:!0,forced:n(43429)("small")},{small:function(){return i(this,"small","","")}})},23123:(e,t,n)=>{"use strict";var r=n(22104),i=n(46916),o=n(1702),a=n(27007),s=n(47850),l=n(19670),c=n(84488),u=n(36707),h=n(31530),f=n(17466),p=n(41340),d=n(58173),m=n(41589),g=n(97651),y=n(22261),v=n(52999),b=n(47293),_=v.UNSUPPORTED_Y,x=4294967295,A=Math.min,w=[].push,C=o(/./.exec),E=o(w),S=o("".slice);a("split",(function(e,t,n){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var o=p(c(this)),a=void 0===n?x:n>>>0;if(0===a)return[];if(void 0===e)return[o];if(!s(e))return i(t,o,e,a);for(var l,u,h,f=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),g=0,v=new RegExp(e.source,d+"g");(l=i(y,v,o))&&!((u=v.lastIndex)>g&&(E(f,S(o,g,l.index)),l.length>1&&l.index<o.length&&r(w,f,m(l,1)),h=l[0].length,g=u,f.length>=a));)v.lastIndex===l.index&&v.lastIndex++;return g===o.length?!h&&C(v,"")||E(f,""):E(f,S(o,g)),f.length>a?m(f,0,a):f}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:i(t,this,e,n)}:t,[function(t,n){var r=c(this),a=null==t?void 0:d(t,e);return a?i(a,t,r,n):i(o,p(r),t,n)},function(e,r){var i=l(this),a=p(e),s=n(o,i,a,r,o!==t);if(s.done)return s.value;var c=u(i,RegExp),d=i.unicode,m=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(_?"g":"y"),y=new c(_?"^(?:"+i.source+")":i,m),v=void 0===r?x:r>>>0;if(0===v)return[];if(0===a.length)return null===g(y,a)?[a]:[];for(var b=0,w=0,C=[];w<a.length;){y.lastIndex=_?0:w;var T,B=g(y,_?S(a,w):a);if(null===B||(T=A(f(y.lastIndex+(_?w:0)),a.length))===b)w=h(a,w,d);else{if(E(C,S(a,b,w)),C.length===v)return C;for(var k=1;k<=B.length-1;k++)if(E(C,B[k]),C.length===v)return C;w=b=T}}return E(C,S(a,b)),C}]}),!!b((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),_)},23157:(e,t,n)=>{"use strict";var r,i=n(82109),o=n(1702),a=n(31236).f,s=n(17466),l=n(41340),c=n(3929),u=n(84488),h=n(84964),f=n(31913),p=o("".startsWith),d=o("".slice),m=Math.min,g=h("startsWith");i({target:"String",proto:!0,forced:!(!f&&!g&&(r=a(String.prototype,"startsWith"),r&&!r.writable)||g)},{startsWith:function(e){var t=l(u(this));c(e);var n=s(m(arguments.length>1?arguments[1]:void 0,t.length)),r=l(e);return p?p(t,r,n):d(t,n,n+r.length)===r}})},7397:(e,t,n)=>{"use strict";var r=n(82109),i=n(14230);r({target:"String",proto:!0,forced:n(43429)("strike")},{strike:function(){return i(this,"strike","","")}})},60086:(e,t,n)=>{"use strict";var r=n(82109),i=n(14230);r({target:"String",proto:!0,forced:n(43429)("sub")},{sub:function(){return i(this,"sub","","")}})},83650:(e,t,n)=>{"use strict";var r=n(82109),i=n(1702),o=n(84488),a=n(19303),s=n(41340),l=i("".slice),c=Math.max,u=Math.min;r({target:"String",proto:!0,forced:!"".substr||"b"!=="ab".substr(-1)},{substr:function(e,t){var n,r,i=s(o(this)),h=i.length,f=a(e);return f===1/0&&(f=0),f<0&&(f=c(h+f,0)),(n=void 0===t?h:a(t))<=0||n===1/0||f>=(r=u(f+n,h))?"":l(i,f,r)}})},80623:(e,t,n)=>{"use strict";var r=n(82109),i=n(14230);r({target:"String",proto:!0,forced:n(43429)("sup")},{sup:function(){return i(this,"sup","","")}})},48702:(e,t,n)=>{n(83462);var r=n(82109),i=n(10365);r({target:"String",proto:!0,name:"trimEnd",forced:"".trimEnd!==i},{trimEnd:i})},99967:(e,t,n)=>{var r=n(82109),i=n(33217);r({target:"String",proto:!0,name:"trimStart",forced:"".trimLeft!==i},{trimLeft:i})},83462:(e,t,n)=>{var r=n(82109),i=n(10365);r({target:"String",proto:!0,name:"trimEnd",forced:"".trimRight!==i},{trimRight:i})},55674:(e,t,n)=>{n(99967);var r=n(82109),i=n(33217);r({target:"String",proto:!0,name:"trimStart",forced:"".trimStart!==i},{trimStart:i})},73210:(e,t,n)=>{"use strict";var r=n(82109),i=n(53111).trim;r({target:"String",proto:!0,forced:n(76091)("trim")},{trim:function(){return i(this)}})},72443:(e,t,n)=>{n(97235)("asyncIterator")},4032:(e,t,n)=>{"use strict";var r=n(82109),i=n(17854),o=n(46916),a=n(1702),s=n(31913),l=n(19781),c=n(30133),u=n(47293),h=n(92597),f=n(47976),p=n(19670),d=n(45656),m=n(34948),g=n(41340),y=n(79114),v=n(70030),b=n(81956),_=n(8006),x=n(1156),A=n(25181),w=n(31236),C=n(3070),E=n(36048),S=n(55296),T=n(31320),B=n(72309),k=n(6200),M=n(3501),P=n(69711),I=n(5112),O=n(6061),D=n(97235),z=n(56532),L=n(58003),R=n(29909),F=n(42092).forEach,U=k("hidden"),N="Symbol",j=R.set,V=R.getterFor(N),G=Object.prototype,q=i.Symbol,W=q&&q.prototype,H=i.TypeError,$=i.QObject,X=w.f,Z=C.f,Y=x.f,K=S.f,J=a([].push),Q=B("symbols"),ee=B("op-symbols"),te=B("wks"),ne=!$||!$.prototype||!$.prototype.findChild,re=l&&u((function(){return 7!=v(Z({},"a",{get:function(){return Z(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=X(G,t);r&&delete G[t],Z(e,t,n),r&&e!==G&&Z(G,t,r)}:Z,ie=function(e,t){var n=Q[e]=v(W);return j(n,{type:N,tag:e,description:t}),l||(n.description=t),n},oe=function(e,t,n){e===G&&oe(ee,t,n),p(e);var r=m(t);return p(n),h(Q,r)?(n.enumerable?(h(e,U)&&e[U][r]&&(e[U][r]=!1),n=v(n,{enumerable:y(0,!1)})):(h(e,U)||Z(e,U,y(1,{})),e[U][r]=!0),re(e,r,n)):Z(e,r,n)},ae=function(e,t){p(e);var n=d(t),r=b(n).concat(ue(n));return F(r,(function(t){l&&!o(se,n,t)||oe(e,t,n[t])})),e},se=function(e){var t=m(e),n=o(K,this,t);return!(this===G&&h(Q,t)&&!h(ee,t))&&(!(n||!h(this,t)||!h(Q,t)||h(this,U)&&this[U][t])||n)},le=function(e,t){var n=d(e),r=m(t);if(n!==G||!h(Q,r)||h(ee,r)){var i=X(n,r);return!i||!h(Q,r)||h(n,U)&&n[U][r]||(i.enumerable=!0),i}},ce=function(e){var t=Y(d(e)),n=[];return F(t,(function(e){h(Q,e)||h(M,e)||J(n,e)})),n},ue=function(e){var t=e===G,n=Y(t?ee:d(e)),r=[];return F(n,(function(e){!h(Q,e)||t&&!h(G,e)||J(r,Q[e])})),r};c||(T(W=(q=function(){if(f(W,this))throw H("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?g(arguments[0]):void 0,t=P(e),n=function(e){this===G&&o(n,ee,e),h(this,U)&&h(this[U],t)&&(this[U][t]=!1),re(this,t,y(1,e))};return l&&ne&&re(G,t,{configurable:!0,set:n}),ie(t,e)}).prototype,"toString",(function(){return V(this).tag})),T(q,"withoutSetter",(function(e){return ie(P(e),e)})),S.f=se,C.f=oe,E.f=ae,w.f=le,_.f=x.f=ce,A.f=ue,O.f=function(e){return ie(I(e),e)},l&&(Z(W,"description",{configurable:!0,get:function(){return V(this).description}}),s||T(G,"propertyIsEnumerable",se,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:q}),F(b(te),(function(e){D(e)})),r({target:N,stat:!0,forced:!c},{useSetter:function(){ne=!0},useSimple:function(){ne=!1}}),r({target:"Object",stat:!0,forced:!c,sham:!l},{create:function(e,t){return void 0===t?v(e):ae(v(e),t)},defineProperty:oe,defineProperties:ae,getOwnPropertyDescriptor:le}),r({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:ce}),z(),L(q,N),M[U]=!0},41817:(e,t,n)=>{"use strict";var r=n(82109),i=n(19781),o=n(17854),a=n(1702),s=n(92597),l=n(60614),c=n(47976),u=n(41340),h=n(3070).f,f=n(99920),p=o.Symbol,d=p&&p.prototype;if(i&&l(p)&&(!("description"in d)||void 0!==p().description)){var m={},g=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:u(arguments[0]),t=c(d,this)?new p(e):void 0===e?p():p(e);return""===e&&(m[t]=!0),t};f(g,p),g.prototype=d,d.constructor=g;var y="Symbol(test)"==String(p("test")),v=a(d.toString),b=a(d.valueOf),_=/^Symbol\((.*)\)[^)]+$/,x=a("".replace),A=a("".slice);h(d,"description",{configurable:!0,get:function(){var e=b(this),t=v(e);if(s(m,e))return"";var n=y?A(t,7,-1):x(t,_,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:g})}},40763:(e,t,n)=>{var r=n(82109),i=n(35005),o=n(92597),a=n(41340),s=n(72309),l=n(30735),c=s("string-to-symbol-registry"),u=s("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!l},{for:function(e){var t=a(e);if(o(c,t))return c[t];var n=i("Symbol")(t);return c[t]=n,u[n]=t,n}})},92401:(e,t,n)=>{n(97235)("hasInstance")},8722:(e,t,n)=>{n(97235)("isConcatSpreadable")},32165:(e,t,n)=>{n(97235)("iterator")},82526:(e,t,n)=>{n(4032),n(40763),n(26620),n(38862),n(29660)},26620:(e,t,n)=>{var r=n(82109),i=n(92597),o=n(52190),a=n(66330),s=n(72309),l=n(30735),c=s("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!l},{keyFor:function(e){if(!o(e))throw TypeError(a(e)+" is not a symbol");if(i(c,e))return c[e]}})},16066:(e,t,n)=>{n(97235)("matchAll")},69007:(e,t,n)=>{n(97235)("match")},83510:(e,t,n)=>{n(97235)("replace")},41840:(e,t,n)=>{n(97235)("search")},6982:(e,t,n)=>{n(97235)("species")},32159:(e,t,n)=>{n(97235)("split")},96649:(e,t,n)=>{var r=n(97235),i=n(56532);r("toPrimitive"),i()},39341:(e,t,n)=>{var r=n(35005),i=n(97235),o=n(58003);i("toStringTag"),o(r("Symbol"),"Symbol")},60543:(e,t,n)=>{n(97235)("unscopables")},48675:(e,t,n)=>{"use strict";var r=n(90260),i=n(26244),o=n(19303),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("at",(function(e){var t=a(this),n=i(t),r=o(e),s=r>=0?r:n+r;return s<0||s>=n?void 0:t[s]}))},92990:(e,t,n)=>{"use strict";var r=n(1702),i=n(90260),o=r(n(1048)),a=i.aTypedArray;(0,i.exportTypedArrayMethod)("copyWithin",(function(e,t){return o(a(this),e,t,arguments.length>2?arguments[2]:void 0)}))},18927:(e,t,n)=>{"use strict";var r=n(90260),i=n(42092).every,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("every",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},33105:(e,t,n)=>{"use strict";var r=n(90260),i=n(46916),o=n(21285),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("fill",(function(e){var t=arguments.length;return i(o,a(this),e,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}))},35035:(e,t,n)=>{"use strict";var r=n(90260),i=n(42092).filter,o=n(43074),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("filter",(function(e){var t=i(a(this),e,arguments.length>1?arguments[1]:void 0);return o(this,t)}))},7174:(e,t,n)=>{"use strict";var r=n(90260),i=n(42092).findIndex,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("findIndex",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},74345:(e,t,n)=>{"use strict";var r=n(90260),i=n(42092).find,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("find",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},44197:(e,t,n)=>{n(19843)("Float32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},76495:(e,t,n)=>{n(19843)("Float64",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},32846:(e,t,n)=>{"use strict";var r=n(90260),i=n(42092).forEach,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("forEach",(function(e){i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},98145:(e,t,n)=>{"use strict";var r=n(63832);(0,n(90260).exportTypedArrayStaticMethod)("from",n(97321),r)},44731:(e,t,n)=>{"use strict";var r=n(90260),i=n(41318).includes,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},77209:(e,t,n)=>{"use strict";var r=n(90260),i=n(41318).indexOf,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("indexOf",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},35109:(e,t,n)=>{n(19843)("Int16",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},65125:(e,t,n)=>{n(19843)("Int32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},87145:(e,t,n)=>{n(19843)("Int8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},96319:(e,t,n)=>{"use strict";var r=n(17854),i=n(47293),o=n(1702),a=n(90260),s=n(66992),l=n(5112)("iterator"),c=r.Uint8Array,u=o(s.values),h=o(s.keys),f=o(s.entries),p=a.aTypedArray,d=a.exportTypedArrayMethod,m=c&&c.prototype,g=!i((function(){m[l].call([1])})),y=!!m&&m.values&&m[l]===m.values&&"values"===m.values.name,v=function(){return u(p(this))};d("entries",(function(){return f(p(this))}),g),d("keys",(function(){return h(p(this))}),g),d("values",v,g||!y,{name:"values"}),d(l,v,g||!y,{name:"values"})},58867:(e,t,n)=>{"use strict";var r=n(90260),i=n(1702),o=r.aTypedArray,a=r.exportTypedArrayMethod,s=i([].join);a("join",(function(e){return s(o(this),e)}))},37789:(e,t,n)=>{"use strict";var r=n(90260),i=n(22104),o=n(86583),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("lastIndexOf",(function(e){var t=arguments.length;return i(o,a(this),t>1?[e,arguments[1]]:[e])}))},33739:(e,t,n)=>{"use strict";var r=n(90260),i=n(42092).map,o=n(66304),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("map",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(o(e))(t)}))}))},95206:(e,t,n)=>{"use strict";var r=n(90260),i=n(63832),o=r.aTypedArrayConstructor;(0,r.exportTypedArrayStaticMethod)("of",(function(){for(var e=0,t=arguments.length,n=new(o(this))(t);t>e;)n[e]=arguments[e++];return n}),i)},14483:(e,t,n)=>{"use strict";var r=n(90260),i=n(53671).right,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduceRight",(function(e){var t=arguments.length;return i(o(this),e,t,t>1?arguments[1]:void 0)}))},29368:(e,t,n)=>{"use strict";var r=n(90260),i=n(53671).left,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduce",(function(e){var t=arguments.length;return i(o(this),e,t,t>1?arguments[1]:void 0)}))},12056:(e,t,n)=>{"use strict";var r=n(90260),i=r.aTypedArray,o=r.exportTypedArrayMethod,a=Math.floor;o("reverse",(function(){for(var e,t=this,n=i(t).length,r=a(n/2),o=0;o<r;)e=t[o],t[o++]=t[--n],t[n]=e;return t}))},3462:(e,t,n)=>{"use strict";var r=n(17854),i=n(46916),o=n(90260),a=n(26244),s=n(84590),l=n(47908),c=n(47293),u=r.RangeError,h=r.Int8Array,f=h&&h.prototype,p=f&&f.set,d=o.aTypedArray,m=o.exportTypedArrayMethod,g=!c((function(){var e=new Uint8ClampedArray(2);return i(p,e,{length:1,0:3},1),3!==e[1]})),y=g&&o.NATIVE_ARRAY_BUFFER_VIEWS&&c((function(){var e=new h(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));m("set",(function(e){d(this);var t=s(arguments.length>1?arguments[1]:void 0,1),n=l(e);if(g)return i(p,this,n,t);var r=this.length,o=a(n),c=0;if(o+t>r)throw u("Wrong length");for(;c<o;)this[t+c]=n[c++]}),!g||y)},30678:(e,t,n)=>{"use strict";var r=n(90260),i=n(66304),o=n(47293),a=n(50206),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("slice",(function(e,t){for(var n=a(s(this),e,t),r=i(this),o=0,l=n.length,c=new r(l);l>o;)c[o]=n[o++];return c}),o((function(){new Int8Array(1).slice()})))},27462:(e,t,n)=>{"use strict";var r=n(90260),i=n(42092).some,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("some",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},33824:(e,t,n)=>{"use strict";var r=n(17854),i=n(1702),o=n(47293),a=n(19662),s=n(94362),l=n(90260),c=n(68886),u=n(30256),h=n(7392),f=n(98008),p=l.aTypedArray,d=l.exportTypedArrayMethod,m=r.Uint16Array,g=m&&i(m.prototype.sort),y=!(!g||o((function(){g(new m(2),null)}))&&o((function(){g(new m(2),{})}))),v=!!g&&!o((function(){if(h)return h<74;if(c)return c<67;if(u)return!0;if(f)return f<602;var e,t,n=new m(516),r=Array(516);for(e=0;e<516;e++)t=e%4,n[e]=515-e,r[e]=e-2*t+3;for(g(n,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(n[e]!==r[e])return!0}));d("sort",(function(e){return void 0!==e&&a(e),v?g(this,e):s(p(this),function(e){return function(t,n){return void 0!==e?+e(t,n)||0:n!=n?-1:t!=t?1:0===t&&0===n?1/t>0&&1/n<0?1:-1:t>n}}(e))}),!v||y)},55021:(e,t,n)=>{"use strict";var r=n(90260),i=n(17466),o=n(51400),a=n(66304),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("subarray",(function(e,t){var n=s(this),r=n.length,l=o(e,r);return new(a(n))(n.buffer,n.byteOffset+l*n.BYTES_PER_ELEMENT,i((void 0===t?r:o(t,r))-l))}))},12974:(e,t,n)=>{"use strict";var r=n(17854),i=n(22104),o=n(90260),a=n(47293),s=n(50206),l=r.Int8Array,c=o.aTypedArray,u=o.exportTypedArrayMethod,h=[].toLocaleString,f=!!l&&a((function(){h.call(new l(1))}));u("toLocaleString",(function(){return i(h,f?s(c(this)):c(this),s(arguments))}),a((function(){return[1,2].toLocaleString()!=new l([1,2]).toLocaleString()}))||!a((function(){l.prototype.toLocaleString.call([1,2])})))},15016:(e,t,n)=>{"use strict";var r=n(90260).exportTypedArrayMethod,i=n(47293),o=n(17854),a=n(1702),s=o.Uint8Array,l=s&&s.prototype||{},c=[].toString,u=a([].join);i((function(){c.call({})}))&&(c=function(){return u(this)});var h=l.toString!=c;r("toString",c,h)},8255:(e,t,n)=>{n(19843)("Uint16",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},29135:(e,t,n)=>{n(19843)("Uint32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},82472:(e,t,n)=>{n(19843)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},49743:(e,t,n)=>{n(19843)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0)},78221:(e,t,n)=>{"use strict";var r=n(82109),i=n(1702),o=n(41340),a=String.fromCharCode,s=i("".charAt),l=i(/./.exec),c=i("".slice),u=/^[\da-f]{2}$/i,h=/^[\da-f]{4}$/i;r({global:!0},{unescape:function(e){for(var t,n,r=o(e),i="",f=r.length,p=0;p<f;){if("%"===(t=s(r,p++)))if("u"===s(r,p)){if(n=c(r,p+1,p+5),l(h,n)){i+=a(parseInt(n,16)),p+=5;continue}}else if(n=c(r,p,p+2),l(u,n)){i+=a(parseInt(n,16)),p+=2;continue}i+=t}return i}})},41202:(e,t,n)=>{"use strict";var r,i=n(17854),o=n(1702),a=n(12248),s=n(62423),l=n(77710),c=n(29320),u=n(70111),h=n(52050),f=n(29909).enforce,p=n(68536),d=!i.ActiveXObject&&"ActiveXObject"in i,m=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},g=l("WeakMap",m,c);if(p&&d){r=c.getConstructor(m,"WeakMap",!0),s.enable();var y=g.prototype,v=o(y.delete),b=o(y.has),_=o(y.get),x=o(y.set);a(y,{delete:function(e){if(u(e)&&!h(e)){var t=f(this);return t.frozen||(t.frozen=new r),v(this,e)||t.frozen.delete(e)}return v(this,e)},has:function(e){if(u(e)&&!h(e)){var t=f(this);return t.frozen||(t.frozen=new r),b(this,e)||t.frozen.has(e)}return b(this,e)},get:function(e){if(u(e)&&!h(e)){var t=f(this);return t.frozen||(t.frozen=new r),b(this,e)?_(this,e):t.frozen.get(e)}return _(this,e)},set:function(e,t){if(u(e)&&!h(e)){var n=f(this);n.frozen||(n.frozen=new r),b(this,e)?x(this,e,t):n.frozen.set(e,t)}else x(this,e,t);return this}})}},4129:(e,t,n)=>{n(41202)},72098:(e,t,n)=>{"use strict";n(77710)("WeakSet",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n(29320))},38478:(e,t,n)=>{n(72098)},8628:(e,t,n)=>{n(9170)},69810:(e,t,n)=>{n(52262)},77461:(e,t,n)=>{"use strict";var r=n(82109),i=n(9671).findLastIndex,o=n(51223);r({target:"Array",proto:!0},{findLastIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o("findLastIndex")},3048:(e,t,n)=>{"use strict";var r=n(82109),i=n(9671).findLast,o=n(51223);r({target:"Array",proto:!0},{findLast:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o("findLast")},61886:(e,t,n)=>{"use strict";var r=n(82109),i=n(35005),o=n(49974),a=n(1702),s=n(68361),l=n(47908),c=n(26244),u=n(9341),h=n(51223),f=i("Map"),p=f.prototype,d=a(p.get),m=a(p.has),g=a(p.set),y=a([].push);r({target:"Array",proto:!0,forced:!u("groupByToMap")},{groupByToMap:function(e){for(var t,n,r=l(this),i=s(r),a=o(e,arguments.length>1?arguments[1]:void 0),u=new f,h=c(i),p=0;h>p;p++)t=a(n=i[p],p,r),m(u,t)?y(d(u,t),n):g(u,t,[n]);return u}}),h("groupByToMap")},1999:(e,t,n)=>{"use strict";var r=n(82109),i=n(61386),o=n(9341),a=n(51223);r({target:"Array",proto:!0,forced:!o("groupBy")},{groupBy:function(e){var t=arguments.length>1?arguments[1]:void 0;return i(this,e,t)}}),a("groupBy")},56882:(e,t,n)=>{"use strict";var r=n(82109),i=n(17854),o=n(21843),a=n(45656),s=n(51223),l=i.Array;r({target:"Array",proto:!0},{toReversed:function(){return o(a(this),l)}}),s("toReversed")},78525:(e,t,n)=>{"use strict";var r=n(82109),i=n(17854),o=n(1702),a=n(19662),s=n(45656),l=n(97745),c=n(98770),u=n(51223),h=i.Array,f=o(c("Array").sort);r({target:"Array",proto:!0},{toSorted:function(e){void 0!==e&&a(e);var t=s(this),n=l(h,t);return f(n,e)}}),u("toSorted")},27004:(e,t,n)=>{"use strict";var r=n(82109),i=n(17854),o=n(45656),a=n(50206),s=n(1654),l=n(51223),c=i.Array;r({target:"Array",proto:!0},{toSpliced:function(e,t){return s(o(this),c,a(arguments))}}),l("toSpliced")},97391:(e,t,n)=>{"use strict";var r=n(82109),i=n(17854),o=n(11572),a=n(45656),s=i.Array;r({target:"Array",proto:!0},{with:function(e,t){return o(a(this),s,e,t)}})},65743:(e,t,n)=>{n(35837)},96936:(e,t,n)=>{n(46314)},97314:(e,t,n)=>{n(17922)},96290:(e,t,n)=>{n(34668)},13728:(e,t,n)=>{n(76373)},27207:(e,t,n)=>{n(68757)},38012:(e,t,n)=>{n(48675)},1118:(e,t,n)=>{"use strict";var r=n(90260),i=n(9671).findLastIndex,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("findLastIndex",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},37380:(e,t,n)=>{"use strict";var r=n(90260),i=n(9671).findLast,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("findLast",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},23767:(e,t,n)=>{"use strict";var r=n(21843),i=n(90260),o=i.aTypedArray,a=i.exportTypedArrayMethod,s=i.TYPED_ARRAY_CONSTRUCTOR;a("toReversed",(function(){return r(o(this),this[s])}))},8585:(e,t,n)=>{"use strict";var r=n(90260),i=n(1702),o=n(19662),a=n(97745),s=r.aTypedArray,l=r.exportTypedArrayMethod,c=r.TYPED_ARRAY_CONSTRUCTOR,u=i(r.TypedArrayPrototype.sort);l("toSorted",(function(e){void 0!==e&&o(e);var t=s(this),n=a(t[c],t);return u(n,e)}))},8970:(e,t,n)=>{"use strict";var r=n(90260),i=n(50206),o=n(1654),a=r.aTypedArray,s=r.exportTypedArrayMethod,l=r.TYPED_ARRAY_CONSTRUCTOR;s("toSpliced",(function(e,t){return o(a(this),this[l],i(arguments))}))},68696:(e,t,n)=>{"use strict";var r=n(11572),i=n(90260),o=i.aTypedArray,a=i.exportTypedArrayMethod,s=i.TYPED_ARRAY_CONSTRUCTOR;a("with",{with:function(e,t){return r(o(this),this[s],e,t)}}.with)},75505:(e,t,n)=>{var r=n(82109),i=n(35005),o=n(1702),a=n(47293),s=n(41340),l=n(92597),c=n(48053),u=n(14170).ctoi,h=/[^\d+/a-z]/i,f=/[\t\n\f\r ]+/g,p=/[=]+$/,d=i("atob"),m=String.fromCharCode,g=o("".charAt),y=o("".replace),v=o(h.exec),b=a((function(){return""!==d(" ")})),_=!a((function(){d("a")})),x=!b&&!_&&!a((function(){d()})),A=!b&&!_&&1!==d.length;r({global:!0,enumerable:!0,forced:b||_||x||A},{atob:function(e){if(c(arguments.length,1),x||A)return d(e);var t,n,r=y(s(e),f,""),o="",a=0,b=0;if(r.length%4==0&&(r=y(r,p,"")),r.length%4==1||v(h,r))throw new(i("DOMException"))("The string is not correctly encoded","InvalidCharacterError");for(;t=g(r,a++);)l(u,t)&&(n=b%4?64*n+u[t]:u[t],b++%4&&(o+=m(255&n>>(-2*b&6))));return o}})},27479:(e,t,n)=>{var r=n(82109),i=n(35005),o=n(1702),a=n(47293),s=n(41340),l=n(48053),c=n(14170).itoc,u=i("btoa"),h=o("".charAt),f=o("".charCodeAt),p=!!u&&!a((function(){u()})),d=!!u&&a((function(){return"bnVsbA=="!==u(null)})),m=!!u&&1!==u.length;r({global:!0,enumerable:!0,forced:p||d||m},{btoa:function(e){if(l(arguments.length,1),p||d||m)return u(s(e));for(var t,n,r=s(e),o="",a=0,g=c;h(r,a)||(g="=",a%1);){if((n=f(r,a+=3/4))>255)throw new(i("DOMException"))("The string contains characters outside of the Latin1 range","InvalidCharacterError");o+=h(g,63&(t=t<<8|n)>>8-a%1*8)}return o}})},11091:(e,t,n)=>{var r=n(82109),i=n(17854),o=n(20261).clear;r({global:!0,bind:!0,enumerable:!0,forced:i.clearImmediate!==o},{clearImmediate:o})},54747:(e,t,n)=>{var r=n(17854),i=n(48324),o=n(98509),a=n(18533),s=n(68880),l=function(e){if(e&&e.forEach!==a)try{s(e,"forEach",a)}catch(t){e.forEach=a}};for(var c in i)i[c]&&l(r[c]&&r[c].prototype);l(o)},33948:(e,t,n)=>{var r=n(17854),i=n(48324),o=n(98509),a=n(66992),s=n(68880),l=n(5112),c=l("iterator"),u=l("toStringTag"),h=a.values,f=function(e,t){if(e){if(e[c]!==h)try{s(e,c,h)}catch(t){e[c]=h}if(e[u]||s(e,u,t),i[t])for(var n in a)if(e[n]!==a[n])try{s(e,n,a[n])}catch(t){e[n]=a[n]}}};for(var p in i)f(r[p]&&r[p].prototype,p);f(o,"DOMTokenList")},87714:(e,t,n)=>{"use strict";var r=n(82109),i=n(44038),o=n(35005),a=n(47293),s=n(70030),l=n(79114),c=n(3070).f,u=n(36048).f,h=n(31320),f=n(92597),p=n(25787),d=n(19670),m=n(7762),g=n(56277),y=n(93678),v=n(77741),b=n(29909),_=n(19781),x=n(31913),A="DOMException",w=o("Error"),C=o(A)||function(){try{(new(o("MessageChannel")||i("worker_threads").MessageChannel)).port1.postMessage(new WeakMap)}catch(e){if("DATA_CLONE_ERR"==e.name&&25==e.code)return e.constructor}}(),E=C&&C.prototype,S=w.prototype,T=b.set,B=b.getterFor(A),k="stack"in w(A),M=function(e){return f(y,e)&&y[e].m?y[e].c:0},P=function(){p(this,I);var e=arguments.length,t=g(e<1?void 0:arguments[0]),n=g(e<2?void 0:arguments[1],"Error"),r=M(n);if(T(this,{type:A,name:n,message:t,code:r}),_||(this.name=n,this.message=t,this.code=r),k){var i=w(t);i.name=A,c(this,"stack",l(1,v(i.stack,1)))}},I=P.prototype=s(S),O=function(e){return{enumerable:!0,configurable:!0,get:e}},D=function(e){return O((function(){return B(this)[e]}))};_&&u(I,{name:D("name"),message:D("message"),code:D("code")}),c(I,"constructor",l(1,P));var z=a((function(){return!(new C instanceof w)})),L=z||a((function(){return S.toString!==m||"2: 1"!==String(new C(1,2))})),R=z||a((function(){return 25!==new C(1,"DataCloneError").code})),F=z||25!==C.DATA_CLONE_ERR||25!==E.DATA_CLONE_ERR,U=x?L||R||F:z;r({global:!0,forced:U},{DOMException:U?P:C});var N=o(A),j=N.prototype;for(var V in L&&(x||C===N)&&h(j,"toString",m),R&&_&&C===N&&c(j,"code",O((function(){return M(d(this).name)}))),y)if(f(y,V)){var G=y[V],q=G.s,W=l(6,G.c);f(N,q)||c(N,q,W),f(j,q)||c(j,q,W)}},82801:(e,t,n)=>{"use strict";var r=n(82109),i=n(35005),o=n(79114),a=n(3070).f,s=n(92597),l=n(25787),c=n(79587),u=n(56277),h=n(93678),f=n(77741),p=n(31913),d="DOMException",m=i("Error"),g=i(d),y=function(){l(this,v);var e=arguments.length,t=u(e<1?void 0:arguments[0]),n=u(e<2?void 0:arguments[1],"Error"),r=new g(t,n),i=m(t);return i.name=d,a(r,"stack",o(1,f(i.stack,1))),c(r,this,y),r},v=y.prototype=g.prototype,b="stack"in m(d),_="stack"in new g(1,2),x=b&&!_;r({global:!0,forced:p||x},{DOMException:x?y:g});var A=i(d),w=A.prototype;if(w.constructor!==A)for(var C in p||a(w,"constructor",o(1,A)),h)if(s(h,C)){var E=h[C],S=E.s;s(A,S)||a(A,S,o(6,E.c))}},14097:(e,t,n)=>{var r=n(35005),i="DOMException";n(58003)(r(i),i)},84633:(e,t,n)=>{n(11091),n(12986)},85844:(e,t,n)=>{var r=n(82109),i=n(17854),o=n(95948),a=n(19662),s=n(48053),l=n(35268),c=i.process;r({global:!0,enumerable:!0,noTargetGet:!0},{queueMicrotask:function(e){s(arguments.length,1),a(e);var t=l&&c.domain;o(t?t.bind(e):e)}})},12986:(e,t,n)=>{var r=n(82109),i=n(17854),o=n(20261).set;r({global:!0,bind:!0,enumerable:!0,forced:i.setImmediate!==o},{setImmediate:o})},96815:(e,t,n)=>{var r=n(82109),i=n(17854),o=n(17152).setInterval;r({global:!0,bind:!0,forced:i.setInterval!==o},{setInterval:o})},88417:(e,t,n)=>{var r=n(82109),i=n(17854),o=n(17152).setTimeout;r({global:!0,bind:!0,forced:i.setTimeout!==o},{setTimeout:o})},61295:(e,t,n)=>{var r,i=n(31913),o=n(82109),a=n(17854),s=n(35005),l=n(1702),c=n(47293),u=n(69711),h=n(60614),f=n(4411),p=n(70111),d=n(52190),m=n(20408),g=n(19670),y=n(70648),v=n(92597),b=n(86135),_=n(68880),x=n(26244),A=n(48053),w=n(34706),C=n(22914),E=a.Object,S=a.Date,T=a.Error,B=a.EvalError,k=a.RangeError,M=a.ReferenceError,P=a.SyntaxError,I=a.TypeError,O=a.URIError,D=a.PerformanceMark,z=a.WebAssembly,L=z&&z.CompileError||T,R=z&&z.LinkError||T,F=z&&z.RuntimeError||T,U=s("DOMException"),N=s("Set"),j=s("Map"),V=j.prototype,G=l(V.has),q=l(V.get),W=l(V.set),H=l(N.prototype.add),$=s("Object","keys"),X=l([].push),Z=l((!0).valueOf),Y=l(1..valueOf),K=l("".valueOf),J=l(S.prototype.getTime),Q=u("structuredClone"),ee="DataCloneError",te="Transferring",ne=function(e){return!c((function(){var t=new a.Set([7]),n=e(t),r=e(E(7));return n==t||!n.has(7)||"object"!=typeof r||7!=r}))&&e},re=a.structuredClone,ie=i||(r=re,!(!c((function(){var e=r(new a.AggregateError([1],Q,{cause:3}));return"AggregateError"!=e.name||1!=e.errors[0]||e.message!=Q||3!=e.cause}))&&r)),oe=!re&&ne((function(e){return new D(Q,{detail:e}).detail})),ae=ne(re)||oe,se=function(e){throw new U("Uncloneable type: "+e,ee)},le=function(e,t){throw new U((t||"Cloning")+" of "+e+" cannot be properly polyfilled in this engine",ee)},ce=function(e,t){if(d(e)&&se("Symbol"),!p(e))return e;if(t){if(G(t,e))return q(t,e)}else t=new j;var n,r,i,o,l,c,u,m,g,A,D=y(e),z=!1;switch(D){case"Array":i=[],z=!0;break;case"Object":i={},z=!0;break;case"Map":i=new j,z=!0;break;case"Set":i=new N,z=!0;break;case"RegExp":i=new RegExp(e.source,w(e));break;case"Error":switch(r=e.name){case"AggregateError":i=s("AggregateError")([]);break;case"EvalError":i=B();break;case"RangeError":i=k();break;case"ReferenceError":i=M();break;case"SyntaxError":i=P();break;case"TypeError":i=I();break;case"URIError":i=O();break;case"CompileError":i=L();break;case"LinkError":i=R();break;case"RuntimeError":i=F();break;default:i=T()}z=!0;break;case"DOMException":i=new U(e.message,e.name),z=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":n=a[D],p(n)||le(D),i=new n(ce(e.buffer,t),e.byteOffset,"DataView"===D?e.byteLength:e.length);break;case"DOMQuad":try{i=new DOMQuad(ce(e.p1,t),ce(e.p2,t),ce(e.p3,t),ce(e.p4,t))}catch(t){ae?i=ae(e):le(D)}break;case"FileList":if(n=a.DataTransfer,f(n)){for(o=new n,l=0,c=x(e);l<c;l++)o.items.add(ce(e[l],t));i=o.files}else ae?i=ae(e):le(D);break;case"ImageData":try{i=new ImageData(ce(e.data,t),e.width,e.height,{colorSpace:e.colorSpace})}catch(t){ae?i=ae(e):le(D)}break;default:if(ae)i=ae(e);else switch(D){case"BigInt":i=E(e.valueOf());break;case"Boolean":i=E(Z(e));break;case"Number":i=E(Y(e));break;case"String":i=E(K(e));break;case"Date":i=new S(J(e));break;case"ArrayBuffer":(n=a.DataView)||"function"==typeof e.slice||le(D);try{if("function"==typeof e.slice)i=e.slice(0);else for(c=e.byteLength,i=new ArrayBuffer(c),g=new n(e),A=new n(i),l=0;l<c;l++)A.setUint8(l,g.getUint8(l))}catch(e){throw new U("ArrayBuffer is detached",ee)}break;case"SharedArrayBuffer":i=e;break;case"Blob":try{i=e.slice(0,e.size,e.type)}catch(e){le(D)}break;case"DOMPoint":case"DOMPointReadOnly":n=a[D];try{i=n.fromPoint?n.fromPoint(e):new n(e.x,e.y,e.z,e.w)}catch(e){le(D)}break;case"DOMRect":case"DOMRectReadOnly":n=a[D];try{i=n.fromRect?n.fromRect(e):new n(e.x,e.y,e.width,e.height)}catch(e){le(D)}break;case"DOMMatrix":case"DOMMatrixReadOnly":n=a[D];try{i=n.fromMatrix?n.fromMatrix(e):new n(e)}catch(e){le(D)}break;case"AudioData":case"VideoFrame":h(e.clone)||le(D);try{i=e.clone()}catch(e){se(D)}break;case"File":try{i=new File([e],e.name,e)}catch(e){le(D)}break;case"CryptoKey":case"GPUCompilationMessage":case"GPUCompilationInfo":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":le(D);default:se(D)}}if(W(t,e,i),z)switch(D){case"Array":case"Object":for(u=$(e),l=0,c=x(u);l<c;l++)m=u[l],b(i,m,ce(e[m],t));break;case"Map":e.forEach((function(e,n){W(i,ce(n,t),ce(e,t))}));break;case"Set":e.forEach((function(e){H(i,ce(e,t))}));break;case"Error":_(i,"message",ce(e.message,t)),v(e,"cause")&&_(i,"cause",ce(e.cause,t)),"AggregateError"==r&&(i.errors=ce(e.errors,t));case"DOMException":C&&_(i,"stack",ce(e.stack,t))}return i},ue=re&&!c((function(){var e=new ArrayBuffer(8),t=re(e,{transfer:[e]});return 0!=e.byteLength||8!=t.byteLength})),he=function(e,t){if(!p(e))throw I("Transfer option cannot be converted to a sequence");var n=[];m(e,(function(e){X(n,g(e))}));var r,i,o,s,l,c,u=0,d=x(n);if(ue)for(s=re(n,{transfer:n});u<d;)W(t,n[u],s[u++]);else for(;u<d;){if(r=n[u++],G(t,r))throw new U("Duplicate transferable",ee);switch(i=y(r)){case"ImageBitmap":o=a.OffscreenCanvas,f(o)||le(i,te);try{(c=new o(r.width,r.height)).getContext("bitmaprenderer").transferFromImageBitmap(r),l=c.transferToImageBitmap()}catch(e){}break;case"AudioData":case"VideoFrame":h(r.clone)&&h(r.close)||le(i,te);try{l=r.clone(),r.close()}catch(e){}break;case"ArrayBuffer":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":le(i,te)}if(void 0===l)throw new U("This object cannot be transferred: "+i,ee);W(t,r,l)}};o({global:!0,enumerable:!0,sham:!ue,forced:ie},{structuredClone:function(e){var t,n=A(arguments.length,1)>1&&null!=arguments[1]?g(arguments[1]):void 0,r=n?n.transfer:void 0;return void 0!==r&&(t=new j,he(r,t)),ce(e,t)}})},32564:(e,t,n)=>{n(96815),n(88417)},65556:(e,t,n)=>{"use strict";n(66992);var r=n(82109),i=n(17854),o=n(46916),a=n(1702),s=n(19781),l=n(590),c=n(31320),u=n(12248),h=n(58003),f=n(24994),p=n(29909),d=n(25787),m=n(60614),g=n(92597),y=n(49974),v=n(70648),b=n(19670),_=n(70111),x=n(41340),A=n(70030),w=n(79114),C=n(18554),E=n(71246),S=n(48053),T=n(5112),B=n(94362),k=T("iterator"),M="URLSearchParams",P="URLSearchParamsIterator",I=p.set,O=p.getterFor(M),D=p.getterFor(P),z=Object.getOwnPropertyDescriptor,L=function(e){if(!s)return i(e);var t=z(i,e);return t&&t.value},R=L("fetch"),F=L("Request"),U=L("Headers"),N=F&&F.prototype,j=U&&U.prototype,V=i.RegExp,G=i.TypeError,q=i.decodeURIComponent,W=i.encodeURIComponent,H=a("".charAt),$=a([].join),X=a([].push),Z=a("".replace),Y=a([].shift),K=a([].splice),J=a("".split),Q=a("".slice),ee=/\+/g,te=Array(4),ne=function(e){return te[e-1]||(te[e-1]=V("((?:%[\\da-f]{2}){"+e+"})","gi"))},re=function(e){try{return q(e)}catch(t){return e}},ie=function(e){var t=Z(e,ee," "),n=4;try{return q(t)}catch(e){for(;n;)t=Z(t,ne(n--),re);return t}},oe=/[!'()~]|%20/g,ae={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},se=function(e){return ae[e]},le=function(e){return Z(W(e),oe,se)},ce=f((function(e,t){I(this,{type:P,iterator:C(O(e).entries),kind:t})}),"Iterator",(function(){var e=D(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n}),!0),ue=function(e){this.entries=[],this.url=null,void 0!==e&&(_(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===H(e,0)?Q(e,1):e:x(e)))};ue.prototype={type:M,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,r,i,a,s,l,c=E(e);if(c)for(n=(t=C(e,c)).next;!(r=o(n,t)).done;){if(a=(i=C(b(r.value))).next,(s=o(a,i)).done||(l=o(a,i)).done||!o(a,i).done)throw G("Expected sequence with length 2");X(this.entries,{key:x(s.value),value:x(l.value)})}else for(var u in e)g(e,u)&&X(this.entries,{key:u,value:x(e[u])})},parseQuery:function(e){if(e)for(var t,n,r=J(e,"&"),i=0;i<r.length;)(t=r[i++]).length&&(n=J(t,"="),X(this.entries,{key:ie(Y(n)),value:ie($(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],r=0;r<t.length;)e=t[r++],X(n,le(e.key)+"="+le(e.value));return $(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var he=function(){d(this,fe);var e=arguments.length>0?arguments[0]:void 0;I(this,new ue(e))},fe=he.prototype;if(u(fe,{append:function(e,t){S(arguments.length,2);var n=O(this);X(n.entries,{key:x(e),value:x(t)}),n.updateURL()},delete:function(e){S(arguments.length,1);for(var t=O(this),n=t.entries,r=x(e),i=0;i<n.length;)n[i].key===r?K(n,i,1):i++;t.updateURL()},get:function(e){S(arguments.length,1);for(var t=O(this).entries,n=x(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){S(arguments.length,1);for(var t=O(this).entries,n=x(e),r=[],i=0;i<t.length;i++)t[i].key===n&&X(r,t[i].value);return r},has:function(e){S(arguments.length,1);for(var t=O(this).entries,n=x(e),r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){S(arguments.length,1);for(var n,r=O(this),i=r.entries,o=!1,a=x(e),s=x(t),l=0;l<i.length;l++)(n=i[l]).key===a&&(o?K(i,l--,1):(o=!0,n.value=s));o||X(i,{key:a,value:s}),r.updateURL()},sort:function(){var e=O(this);B(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=O(this).entries,r=y(e,arguments.length>1?arguments[1]:void 0),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function(){return new ce(this,"keys")},values:function(){return new ce(this,"values")},entries:function(){return new ce(this,"entries")}},{enumerable:!0}),c(fe,k,fe.entries,{name:"entries"}),c(fe,"toString",(function(){return O(this).serialize()}),{enumerable:!0}),h(he,M),r({global:!0,forced:!l},{URLSearchParams:he}),!l&&m(U)){var pe=a(j.has),de=a(j.set),me=function(e){if(_(e)){var t,n=e.body;if(v(n)===M)return t=e.headers?new U(e.headers):new U,pe(t,"content-type")||de(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),A(e,{body:w(0,x(n)),headers:w(0,t)})}return e};if(m(R)&&r({global:!0,enumerable:!0,noTargetGet:!0,forced:!0},{fetch:function(e){return R(e,arguments.length>1?me(arguments[1]):{})}}),m(F)){var ge=function(e){return d(this,N),new F(e,arguments.length>1?me(arguments[1]):{})};N.constructor=ge,ge.prototype=N,r({global:!0,forced:!0,noTargetGet:!0},{Request:ge})}}e.exports={URLSearchParams:he,getState:O}},41637:(e,t,n)=>{n(65556)},68789:(e,t,n)=>{"use strict";n(78783);var r,i=n(82109),o=n(19781),a=n(590),s=n(17854),l=n(49974),c=n(1702),u=n(36048).f,h=n(31320),f=n(25787),p=n(92597),d=n(21574),m=n(48457),g=n(41589),y=n(28710).codeAt,v=n(33197),b=n(41340),_=n(58003),x=n(48053),A=n(65556),w=n(29909),C=w.set,E=w.getterFor("URL"),S=A.URLSearchParams,T=A.getState,B=s.URL,k=s.TypeError,M=s.parseInt,P=Math.floor,I=Math.pow,O=c("".charAt),D=c(/./.exec),z=c([].join),L=c(1..toString),R=c([].pop),F=c([].push),U=c("".replace),N=c([].shift),j=c("".split),V=c("".slice),G=c("".toLowerCase),q=c([].unshift),W="Invalid scheme",H="Invalid host",$="Invalid port",X=/[a-z]/i,Z=/[\d+-.a-z]/i,Y=/\d/,K=/^0x/i,J=/^[0-7]+$/,Q=/^\d+$/,ee=/^[\da-f]+$/i,te=/[\0\t\n\r #%/:<>?@[\\\]^|]/,ne=/[\0\t\n\r #/:<>?@[\\\]^|]/,re=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,ie=/[\t\n\r]/g,oe=function(e){var t,n,r,i;if("number"==typeof e){for(t=[],n=0;n<4;n++)q(t,e%256),e=P(e/256);return z(t,".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,i=0,o=0;o<8;o++)0!==e[o]?(i>n&&(t=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n&&(t=r,n=i),t}(e),n=0;n<8;n++)i&&0===e[n]||(i&&(i=!1),r===n?(t+=n?":":"::",i=!0):(t+=L(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},ae={},se=d({},ae,{" ":1,'"':1,"<":1,">":1,"`":1}),le=d({},se,{"#":1,"?":1,"{":1,"}":1}),ce=d({},le,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ue=function(e,t){var n=y(e,0);return n>32&&n<127&&!p(t,e)?e:encodeURIComponent(e)},he={ftp:21,file:null,http:80,https:443,ws:80,wss:443},fe=function(e,t){var n;return 2==e.length&&D(X,O(e,0))&&(":"==(n=O(e,1))||!t&&"|"==n)},pe=function(e){var t;return e.length>1&&fe(V(e,0,2))&&(2==e.length||"/"===(t=O(e,2))||"\\"===t||"?"===t||"#"===t)},de=function(e){return"."===e||"%2e"===G(e)},me={},ge={},ye={},ve={},be={},_e={},xe={},Ae={},we={},Ce={},Ee={},Se={},Te={},Be={},ke={},Me={},Pe={},Ie={},Oe={},De={},ze={},Le=function(e,t,n){var r,i,o,a=b(e);if(t){if(i=this.parse(a))throw k(i);this.searchParams=null}else{if(void 0!==n&&(r=new Le(n,!0)),i=this.parse(a,null,r))throw k(i);(o=T(new S)).bindURL(this),this.searchParams=o}};Le.prototype={type:"URL",parse:function(e,t,n){var i,o,a,s,l,c=this,u=t||me,h=0,f="",d=!1,y=!1,v=!1;for(e=b(e),t||(c.scheme="",c.username="",c.password="",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,e=U(e,re,"")),e=U(e,ie,""),i=m(e);h<=i.length;){switch(o=i[h],u){case me:if(!o||!D(X,o)){if(t)return W;u=ye;continue}f+=G(o),u=ge;break;case ge:if(o&&(D(Z,o)||"+"==o||"-"==o||"."==o))f+=G(o);else{if(":"!=o){if(t)return W;f="",u=ye,h=0;continue}if(t&&(c.isSpecial()!=p(he,f)||"file"==f&&(c.includesCredentials()||null!==c.port)||"file"==c.scheme&&!c.host))return;if(c.scheme=f,t)return void(c.isSpecial()&&he[c.scheme]==c.port&&(c.port=null));f="","file"==c.scheme?u=Be:c.isSpecial()&&n&&n.scheme==c.scheme?u=ve:c.isSpecial()?u=Ae:"/"==i[h+1]?(u=be,h++):(c.cannotBeABaseURL=!0,F(c.path,""),u=Oe)}break;case ye:if(!n||n.cannotBeABaseURL&&"#"!=o)return W;if(n.cannotBeABaseURL&&"#"==o){c.scheme=n.scheme,c.path=g(n.path),c.query=n.query,c.fragment="",c.cannotBeABaseURL=!0,u=ze;break}u="file"==n.scheme?Be:_e;continue;case ve:if("/"!=o||"/"!=i[h+1]){u=_e;continue}u=we,h++;break;case be:if("/"==o){u=Ce;break}u=Ie;continue;case _e:if(c.scheme=n.scheme,o==r)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=g(n.path),c.query=n.query;else if("/"==o||"\\"==o&&c.isSpecial())u=xe;else if("?"==o)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=g(n.path),c.query="",u=De;else{if("#"!=o){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=g(n.path),c.path.length--,u=Ie;continue}c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=g(n.path),c.query=n.query,c.fragment="",u=ze}break;case xe:if(!c.isSpecial()||"/"!=o&&"\\"!=o){if("/"!=o){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,u=Ie;continue}u=Ce}else u=we;break;case Ae:if(u=we,"/"!=o||"/"!=O(f,h+1))continue;h++;break;case we:if("/"!=o&&"\\"!=o){u=Ce;continue}break;case Ce:if("@"==o){d&&(f="%40"+f),d=!0,a=m(f);for(var _=0;_<a.length;_++){var x=a[_];if(":"!=x||v){var A=ue(x,ce);v?c.password+=A:c.username+=A}else v=!0}f=""}else if(o==r||"/"==o||"?"==o||"#"==o||"\\"==o&&c.isSpecial()){if(d&&""==f)return"Invalid authority";h-=m(f).length+1,f="",u=Ee}else f+=o;break;case Ee:case Se:if(t&&"file"==c.scheme){u=Me;continue}if(":"!=o||y){if(o==r||"/"==o||"?"==o||"#"==o||"\\"==o&&c.isSpecial()){if(c.isSpecial()&&""==f)return H;if(t&&""==f&&(c.includesCredentials()||null!==c.port))return;if(s=c.parseHost(f))return s;if(f="",u=Pe,t)return;continue}"["==o?y=!0:"]"==o&&(y=!1),f+=o}else{if(""==f)return H;if(s=c.parseHost(f))return s;if(f="",u=Te,t==Se)return}break;case Te:if(!D(Y,o)){if(o==r||"/"==o||"?"==o||"#"==o||"\\"==o&&c.isSpecial()||t){if(""!=f){var w=M(f,10);if(w>65535)return $;c.port=c.isSpecial()&&w===he[c.scheme]?null:w,f=""}if(t)return;u=Pe;continue}return $}f+=o;break;case Be:if(c.scheme="file","/"==o||"\\"==o)u=ke;else{if(!n||"file"!=n.scheme){u=Ie;continue}if(o==r)c.host=n.host,c.path=g(n.path),c.query=n.query;else if("?"==o)c.host=n.host,c.path=g(n.path),c.query="",u=De;else{if("#"!=o){pe(z(g(i,h),""))||(c.host=n.host,c.path=g(n.path),c.shortenPath()),u=Ie;continue}c.host=n.host,c.path=g(n.path),c.query=n.query,c.fragment="",u=ze}}break;case ke:if("/"==o||"\\"==o){u=Me;break}n&&"file"==n.scheme&&!pe(z(g(i,h),""))&&(fe(n.path[0],!0)?F(c.path,n.path[0]):c.host=n.host),u=Ie;continue;case Me:if(o==r||"/"==o||"\\"==o||"?"==o||"#"==o){if(!t&&fe(f))u=Ie;else if(""==f){if(c.host="",t)return;u=Pe}else{if(s=c.parseHost(f))return s;if("localhost"==c.host&&(c.host=""),t)return;f="",u=Pe}continue}f+=o;break;case Pe:if(c.isSpecial()){if(u=Ie,"/"!=o&&"\\"!=o)continue}else if(t||"?"!=o)if(t||"#"!=o){if(o!=r&&(u=Ie,"/"!=o))continue}else c.fragment="",u=ze;else c.query="",u=De;break;case Ie:if(o==r||"/"==o||"\\"==o&&c.isSpecial()||!t&&("?"==o||"#"==o)){if(".."===(l=G(l=f))||"%2e."===l||".%2e"===l||"%2e%2e"===l?(c.shortenPath(),"/"==o||"\\"==o&&c.isSpecial()||F(c.path,"")):de(f)?"/"==o||"\\"==o&&c.isSpecial()||F(c.path,""):("file"==c.scheme&&!c.path.length&&fe(f)&&(c.host&&(c.host=""),f=O(f,0)+":"),F(c.path,f)),f="","file"==c.scheme&&(o==r||"?"==o||"#"==o))for(;c.path.length>1&&""===c.path[0];)N(c.path);"?"==o?(c.query="",u=De):"#"==o&&(c.fragment="",u=ze)}else f+=ue(o,le);break;case Oe:"?"==o?(c.query="",u=De):"#"==o?(c.fragment="",u=ze):o!=r&&(c.path[0]+=ue(o,ae));break;case De:t||"#"!=o?o!=r&&("'"==o&&c.isSpecial()?c.query+="%27":c.query+="#"==o?"%23":ue(o,ae)):(c.fragment="",u=ze);break;case ze:o!=r&&(c.fragment+=ue(o,se))}h++}},parseHost:function(e){var t,n,r;if("["==O(e,0)){if("]"!=O(e,e.length-1))return H;if(t=function(e){var t,n,r,i,o,a,s,l=[0,0,0,0,0,0,0,0],c=0,u=null,h=0,f=function(){return O(e,h)};if(":"==f()){if(":"!=O(e,1))return;h+=2,u=++c}for(;f();){if(8==c)return;if(":"!=f()){for(t=n=0;n<4&&D(ee,f());)t=16*t+M(f(),16),h++,n++;if("."==f()){if(0==n)return;if(h-=n,c>6)return;for(r=0;f();){if(i=null,r>0){if(!("."==f()&&r<4))return;h++}if(!D(Y,f()))return;for(;D(Y,f());){if(o=M(f(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;h++}l[c]=256*l[c]+i,2!=++r&&4!=r||c++}if(4!=r)return;break}if(":"==f()){if(h++,!f())return}else if(f())return;l[c++]=t}else{if(null!==u)return;h++,u=++c}}if(null!==u)for(a=c-u,c=7;0!=c&&a>0;)s=l[c],l[c--]=l[u+a-1],l[u+--a]=s;else if(8!=c)return;return l}(V(e,1,-1)),!t)return H;this.host=t}else if(this.isSpecial()){if(e=v(e),D(te,e))return H;if(t=function(e){var t,n,r,i,o,a,s,l=j(e,".");if(l.length&&""==l[l.length-1]&&l.length--,(t=l.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(i=l[r]))return e;if(o=10,i.length>1&&"0"==O(i,0)&&(o=D(K,i)?16:8,i=V(i,8==o?1:2)),""===i)a=0;else{if(!D(10==o?Q:8==o?J:ee,i))return e;a=M(i,o)}F(n,a)}for(r=0;r<t;r++)if(a=n[r],r==t-1){if(a>=I(256,5-t))return null}else if(a>255)return null;for(s=R(n),r=0;r<n.length;r++)s+=n[r]*I(256,3-r);return s}(e),null===t)return H;this.host=t}else{if(D(ne,e))return H;for(t="",n=m(e),r=0;r<n.length;r++)t+=ue(n[r],ae);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return p(he,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&fe(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,r=e.password,i=e.host,o=e.port,a=e.path,s=e.query,l=e.fragment,c=t+":";return null!==i?(c+="//",e.includesCredentials()&&(c+=n+(r?":"+r:"")+"@"),c+=oe(i),null!==o&&(c+=":"+o)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?a[0]:a.length?"/"+z(a,"/"):"",null!==s&&(c+="?"+s),null!==l&&(c+="#"+l),c},setHref:function(e){var t=this.parse(e);if(t)throw k(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new Re(e.path[0]).origin}catch(e){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+oe(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(b(e)+":",me)},getUsername:function(){return this.username},setUsername:function(e){var t=m(b(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=ue(t[n],ce)}},getPassword:function(){return this.password},setPassword:function(e){var t=m(b(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=ue(t[n],ce)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?oe(e):oe(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,Ee)},getHostname:function(){var e=this.host;return null===e?"":oe(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,Se)},getPort:function(){var e=this.port;return null===e?"":b(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=b(e))?this.port=null:this.parse(e,Te))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+z(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Pe))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=b(e))?this.query=null:("?"==O(e,0)&&(e=V(e,1)),this.query="",this.parse(e,De)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!=(e=b(e))?("#"==O(e,0)&&(e=V(e,1)),this.fragment="",this.parse(e,ze)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Re=function(e){var t=f(this,Fe),n=x(arguments.length,1)>1?arguments[1]:void 0,r=C(t,new Le(e,!1,n));o||(t.href=r.serialize(),t.origin=r.getOrigin(),t.protocol=r.getProtocol(),t.username=r.getUsername(),t.password=r.getPassword(),t.host=r.getHost(),t.hostname=r.getHostname(),t.port=r.getPort(),t.pathname=r.getPathname(),t.search=r.getSearch(),t.searchParams=r.getSearchParams(),t.hash=r.getHash())},Fe=Re.prototype,Ue=function(e,t){return{get:function(){return E(this)[e]()},set:t&&function(e){return E(this)[t](e)},configurable:!0,enumerable:!0}};if(o&&u(Fe,{href:Ue("serialize","setHref"),origin:Ue("getOrigin"),protocol:Ue("getProtocol","setProtocol"),username:Ue("getUsername","setUsername"),password:Ue("getPassword","setPassword"),host:Ue("getHost","setHost"),hostname:Ue("getHostname","setHostname"),port:Ue("getPort","setPort"),pathname:Ue("getPathname","setPathname"),search:Ue("getSearch","setSearch"),searchParams:Ue("getSearchParams"),hash:Ue("getHash","setHash")}),h(Fe,"toJSON",(function(){return E(this).serialize()}),{enumerable:!0}),h(Fe,"toString",(function(){return E(this).serialize()}),{enumerable:!0}),B){var Ne=B.createObjectURL,je=B.revokeObjectURL;Ne&&h(Re,"createObjectURL",l(Ne,B)),je&&h(Re,"revokeObjectURL",l(je,B))}_(Re,"URL"),i({global:!0,forced:!a,sham:!o},{URL:Re})},60285:(e,t,n)=>{n(68789)},83753:(e,t,n)=>{"use strict";var r=n(82109),i=n(46916);r({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return i(URL.prototype.toString,this)}})},99436:(e,t,n)=>{n(96936)},94420:(e,t,n)=>{n(3048),n(77461),n(37380),n(1118)},66990:(e,t,n)=>{n(1999),n(61886)},98203:(e,t,n)=>{n(56882),n(78525),n(27004),n(97391),n(23767),n(8585),n(8970),n(68696)},78260:(e,t,n)=>{n(65743);var r=n(17854);e.exports=r},83361:(e,t,n)=>{n(97314)},15382:(e,t,n)=>{n(8628),n(96290)},89149:(e,t,n)=>{n(24506),n(69810),n(38012)},85851:(e,t,n)=>{n(13728)},3678:(e,t,n)=>{n(27207)},28594:(e,t,n)=>{n(82526),n(41817),n(72443),n(92401),n(8722),n(32165),n(69007),n(16066),n(83510),n(41840),n(6982),n(32159),n(96649),n(39341),n(60543),n(21703),n(96647),n(9170),n(32120),n(52262),n(92222),n(50545),n(26541),n(43290),n(57327),n(69826),n(34553),n(84944),n(86535),n(89554),n(91038),n(26699),n(82772),n(79753),n(66992),n(69600),n(94986),n(21249),n(26572),n(85827),n(96644),n(65069),n(47042),n(5212),n(2707),n(53204),n(40561),n(33792),n(99244),n(18264),n(76938),n(39575),n(16716),n(43016),n(3843),n(81801),n(9550),n(28733),n(5735),n(96078),n(83710),n(62130),n(24812),n(4855),n(68309),n(35837),n(38862),n(73706),n(51532),n(99752),n(82376),n(73181),n(23484),n(2388),n(88621),n(60403),n(84755),n(25438),n(90332),n(40658),n(40197),n(44914),n(52420),n(60160),n(60970),n(10408),n(73689),n(9653),n(93299),n(35192),n(33161),n(44048),n(78285),n(44363),n(55994),n(61874),n(9494),n(31354),n(56977),n(55147),n(19601),n(78011),n(59595),n(33321),n(69070),n(35500),n(69720),n(43371),n(38559),n(38880),n(49337),n(36210),n(30489),n(46314),n(43304),n(41825),n(98410),n(72200),n(47941),n(94869),n(33952),n(57227),n(60514),n(68304),n(41539),n(26833),n(54678),n(91058),n(88674),n(17922),n(34668),n(17727),n(36535),n(12419),n(69596),n(52586),n(74819),n(95683),n(39361),n(51037),n(5898),n(67556),n(14361),n(83593),n(39532),n(81299),n(24603),n(28450),n(74916),n(92087),n(88386),n(77601),n(39714),n(70189),n(24506),n(79841),n(27852),n(94953),n(32023),n(78783),n(4723),n(76373),n(66528),n(83112),n(38992),n(82481),n(15306),n(68757),n(64765),n(23123),n(23157),n(83650),n(73210),n(48702),n(55674),n(15218),n(74475),n(57929),n(50915),n(29253),n(42125),n(78830),n(58734),n(29254),n(37268),n(7397),n(60086),n(80623),n(44197),n(76495),n(87145),n(35109),n(65125),n(82472),n(49743),n(8255),n(29135),n(48675),n(92990),n(18927),n(33105),n(35035),n(74345),n(7174),n(32846),n(98145),n(44731),n(77209),n(96319),n(58867),n(37789),n(33739),n(95206),n(29368),n(14483),n(12056),n(3462),n(30678),n(27462),n(33824),n(55021),n(12974),n(15016),n(78221),n(4129),n(38478),n(75505),n(27479),n(54747),n(33948),n(87714),n(82801),n(14097),n(84633),n(85844),n(61295),n(32564),n(60285),n(83753),n(41637),e.exports=n(40857)},99020:(e,t,n)=>{n(94420),n(66990),n(98203);var r=n(60945);e.exports=r},60945:(e,t,n)=>{n(99436),n(78260),n(83361),n(15382),n(89149),n(85851),n(3678);var r=n(40857);e.exports=r},69469:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(94015),i=n.n(r),o=n(23645),a=n.n(o)()(i());a.push([e.id,'\n/* Override default control style */\n.mapbox-gl-draw_ctrl-bottom-left,\n.mapbox-gl-draw_ctrl-top-left {\n  margin-left:0;\n  border-radius:0 4px 4px 0;\n}\n.mapbox-gl-draw_ctrl-top-right,\n.mapbox-gl-draw_ctrl-bottom-right {\n  margin-right:0;\n  border-radius:4px 0 0 4px;\n}\n.mapbox-gl-draw_ctrl-draw {\n  background-color:rgba(0,0,0,0.75);\n  border-color:rgba(0,0,0,0.9);\n}\n.mapbox-gl-draw_ctrl-draw > button {\n  border-color:rgba(0,0,0,0.9);\n  color:rgba(255,255,255,0.5);\n  width:30px;\n  height:30px;\n}\n.mapbox-gl-draw_ctrl-draw > button:hover {\n  background-color:rgba(0,0,0,0.85);\n  color:rgba(255,255,255,0.75);\n}\n.mapbox-gl-draw_ctrl-draw > button.active,\n.mapbox-gl-draw_ctrl-draw > button.active:hover {\n  background-color:rgba(0,0,0,0.95);\n  color:#fff;\n}\n.mapbox-gl-draw_ctrl-draw-btn {\n  background-repeat: no-repeat;\n  background-position: center;\n}\n\n.mapbox-gl-draw_point {\n  background-image: url(\'data:image/svg+xml;utf8,%3Csvg xmlns="http://www.w3.org/2000/svg" width="20" height="20">%3Cpath d="m10 2c-3.3 0-6 2.7-6 6s6 9 6 9 6-5.7 6-9-2.7-6-6-6zm0 2c2.1 0 3.8 1.7 3.8 3.8 0 1.5-1.8 3.9-2.9 5.2h-1.7c-1.1-1.4-2.9-3.8-2.9-5.2-.1-2.1 1.6-3.8 3.7-3.8z"/>%3C/svg>\');\n}\n.mapbox-gl-draw_polygon {\n  background-image: url(\'data:image/svg+xml;utf8,%3Csvg xmlns="http://www.w3.org/2000/svg" width="20" height="20">%3Cpath d="m15 12.3v-4.6c.6-.3 1-1 1-1.7 0-1.1-.9-2-2-2-.7 0-1.4.4-1.7 1h-4.6c-.3-.6-1-1-1.7-1-1.1 0-2 .9-2 2 0 .7.4 1.4 1 1.7v4.6c-.6.3-1 1-1 1.7 0 1.1.9 2 2 2 .7 0 1.4-.4 1.7-1h4.6c.3.6 1 1 1.7 1 1.1 0 2-.9 2-2 0-.7-.4-1.4-1-1.7zm-8-.3v-4l1-1h4l1 1v4l-1 1h-4z"/>%3C/svg>\');\n}\n.mapbox-gl-draw_line {\n  background-image: url(\'data:image/svg+xml;utf8,%3Csvg xmlns="http://www.w3.org/2000/svg" width="20" height="20">%3Cpath d="m13.5 3.5c-1.4 0-2.5 1.1-2.5 2.5 0 .3 0 .6.2.9l-3.8 3.8c-.3-.1-.6-.2-.9-.2-1.4 0-2.5 1.1-2.5 2.5s1.1 2.5 2.5 2.5 2.5-1.1 2.5-2.5c0-.3 0-.6-.2-.9l3.8-3.8c.3.1.6.2.9.2 1.4 0 2.5-1.1 2.5-2.5s-1.1-2.5-2.5-2.5z"/>%3C/svg>\');\n}\n.mapbox-gl-draw_trash {\n  background-image: url(\'data:image/svg+xml;utf8,%3Csvg xmlns="http://www.w3.org/2000/svg" width="20" height="20">%3Cpath d="M10,3.4 c-0.8,0-1.5,0.5-1.8,1.2H5l-1,1v1h12v-1l-1-1h-3.2C11.5,3.9,10.8,3.4,10,3.4z M5,8v7c0,1,1,2,2,2h6c1,0,2-1,2-2V8h-2v5.5h-1.5V8h-3 v5.5H7V8H5z"/>%3C/svg>\');\n}\n.mapbox-gl-draw_uncombine {\n  background-image: url(\'data:image/svg+xml;utf8,%3Csvg xmlns="http://www.w3.org/2000/svg" width="20" height="20">%3Cpath d="m12 2c-.3 0-.5.1-.7.3l-1 1c-.4.4-.4 1 0 1.4l1 1c.4.4 1 .4 1.4 0l1-1c.4-.4.4-1 0-1.4l-1-1c-.2-.2-.4-.3-.7-.3zm4 4c-.3 0-.5.1-.7.3l-1 1c-.4.4-.4 1 0 1.4l1 1c.4.4 1 .4 1.4 0l1-1c.4-.4.4-1 0-1.4l-1-1c-.2-.2-.4-.3-.7-.3zm-7 1c-1 0-1 1-.5 1.5.3.3 1 1 1 1l-1 1s-.5.5 0 1 1 0 1 0l1-1 1 1c.5.5 1.5.5 1.5-.5v-4zm-5 3c-.3 0-.5.1-.7.3l-1 1c-.4.4-.4 1 0 1.4l4.9 4.9c.4.4 1 .4 1.4 0l1-1c.4-.4.4-1 0-1.4l-4.9-4.9c-.1-.2-.4-.3-.7-.3z"/>%3C/svg>\');\n}\n.mapbox-gl-draw_combine {\n  background-image: url(\'data:image/svg+xml;utf8,%3Csvg xmlns="http://www.w3.org/2000/svg" width="20" height="20">%3Cpath d="M12.1,2c-0.3,0-0.5,0.1-0.7,0.3l-1,1c-0.4,0.4-0.4,1,0,1.4l4.9,4.9c0.4,0.4,1,0.4,1.4,0l1-1 c0.4-0.4,0.4-1,0-1.4l-4.9-4.9C12.6,2.1,12.3,2,12.1,2z M8,8C7,8,7,9,7.5,9.5c0.3,0.3,1,1,1,1l-1,1c0,0-0.5,0.5,0,1s1,0,1,0l1-1l1,1 C11,13,12,13,12,12V8H8z M4,10c-0.3,0-0.5,0.1-0.7,0.3l-1,1c-0.4,0.4-0.4,1,0,1.4l1,1c0.4,0.4,1,0.4,1.4,0l1-1c0.4-0.4,0.4-1,0-1.4 l-1-1C4.5,10.1,4.3,10,4,10z M8,14c-0.3,0-0.5,0.1-0.7,0.3l-1,1c-0.4,0.4-0.4,1,0,1.4l1,1c0.4,0.4,1,0.4,1.4,0l1-1 c0.4-0.4,0.4-1,0-1.4l-1-1C8.5,14.1,8.3,14,8,14z"/>%3C/svg>\');\n}\n\n.mapboxgl-map.mouse-pointer .mapboxgl-canvas-container.mapboxgl-interactive {\n  cursor: pointer;\n}\n.mapboxgl-map.mouse-move .mapboxgl-canvas-container.mapboxgl-interactive {\n  cursor: move;\n}\n.mapboxgl-map.mouse-add .mapboxgl-canvas-container.mapboxgl-interactive {\n  cursor: crosshair;\n}\n.mapboxgl-map.mouse-move.mode-direct_select .mapboxgl-canvas-container.mapboxgl-interactive {\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n.mapboxgl-map.mode-direct_select.feature-vertex.mouse-move .mapboxgl-canvas-container.mapboxgl-interactive {\n  cursor: move;\n}\n.mapboxgl-map.mode-direct_select.feature-midpoint.mouse-pointer .mapboxgl-canvas-container.mapboxgl-interactive {\n  cursor: cell;\n}\n.mapboxgl-map.mode-direct_select.feature-feature.mouse-move .mapboxgl-canvas-container.mapboxgl-interactive {\n  cursor: move;\n}\n.mapboxgl-map.mode-static.mouse-pointer  .mapboxgl-canvas-container.mapboxgl-interactive {\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n\n.mapbox-gl-draw_boxselect {\n    pointer-events: none;\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 0;\n    height: 0;\n    background: rgba(0,0,0,.1);\n    border: 2px dotted #fff;\n    opacity: 0.5;\n}\n',"",{version:3,sources:["webpack://./node_modules/@mapbox/mapbox-gl-draw/dist/mapbox-gl-draw.css"],names:[],mappings:";AACA,mCAAmC;AACnC;;EAEE,aAAa;EACb,yBAAyB;AAC3B;AACA;;EAEE,cAAc;EACd,yBAAyB;AAC3B;AACA;EACE,iCAAiC;EACjC,4BAA4B;AAC9B;AACA;EACE,4BAA4B;EAC5B,2BAA2B;EAC3B,UAAU;EACV,WAAW;AACb;AACA;EACE,iCAAiC;EACjC,4BAA4B;AAC9B;AACA;;EAEE,iCAAiC;EACjC,UAAU;AACZ;AACA;EACE,4BAA4B;EAC5B,2BAA2B;AAC7B;;AAEA;EACE,iSAAiS;AACnS;AACA;EACE,kYAAkY;AACpY;AACA;EACE,qVAAqV;AACvV;AACA;EACE,0RAA0R;AAC5R;AACA;EACE,yiBAAyiB;AAC3iB;AACA;EACE,8nBAA8nB;AAChoB;;AAEA;EACE,eAAe;AACjB;AACA;EACE,YAAY;AACd;AACA;EACE,iBAAiB;AACnB;AACA;EACE,YAAY;EACZ,iBAAiB;EACjB,oBAAoB;AACtB;AACA;EACE,YAAY;AACd;AACA;EACE,YAAY;AACd;AACA;EACE,YAAY;AACd;AACA;EACE,YAAY;EACZ,iBAAiB;EACjB,oBAAoB;AACtB;;AAEA;IACI,oBAAoB;IACpB,kBAAkB;IAClB,MAAM;IACN,OAAO;IACP,QAAQ;IACR,SAAS;IACT,0BAA0B;IAC1B,uBAAuB;IACvB,YAAY;AAChB",sourcesContent:['\n/* Override default control style */\n.mapbox-gl-draw_ctrl-bottom-left,\n.mapbox-gl-draw_ctrl-top-left {\n  margin-left:0;\n  border-radius:0 4px 4px 0;\n}\n.mapbox-gl-draw_ctrl-top-right,\n.mapbox-gl-draw_ctrl-bottom-right {\n  margin-right:0;\n  border-radius:4px 0 0 4px;\n}\n.mapbox-gl-draw_ctrl-draw {\n  background-color:rgba(0,0,0,0.75);\n  border-color:rgba(0,0,0,0.9);\n}\n.mapbox-gl-draw_ctrl-draw > button {\n  border-color:rgba(0,0,0,0.9);\n  color:rgba(255,255,255,0.5);\n  width:30px;\n  height:30px;\n}\n.mapbox-gl-draw_ctrl-draw > button:hover {\n  background-color:rgba(0,0,0,0.85);\n  color:rgba(255,255,255,0.75);\n}\n.mapbox-gl-draw_ctrl-draw > button.active,\n.mapbox-gl-draw_ctrl-draw > button.active:hover {\n  background-color:rgba(0,0,0,0.95);\n  color:#fff;\n}\n.mapbox-gl-draw_ctrl-draw-btn {\n  background-repeat: no-repeat;\n  background-position: center;\n}\n\n.mapbox-gl-draw_point {\n  background-image: url(\'data:image/svg+xml;utf8,%3Csvg xmlns="http://www.w3.org/2000/svg" width="20" height="20">%3Cpath d="m10 2c-3.3 0-6 2.7-6 6s6 9 6 9 6-5.7 6-9-2.7-6-6-6zm0 2c2.1 0 3.8 1.7 3.8 3.8 0 1.5-1.8 3.9-2.9 5.2h-1.7c-1.1-1.4-2.9-3.8-2.9-5.2-.1-2.1 1.6-3.8 3.7-3.8z"/>%3C/svg>\');\n}\n.mapbox-gl-draw_polygon {\n  background-image: url(\'data:image/svg+xml;utf8,%3Csvg xmlns="http://www.w3.org/2000/svg" width="20" height="20">%3Cpath d="m15 12.3v-4.6c.6-.3 1-1 1-1.7 0-1.1-.9-2-2-2-.7 0-1.4.4-1.7 1h-4.6c-.3-.6-1-1-1.7-1-1.1 0-2 .9-2 2 0 .7.4 1.4 1 1.7v4.6c-.6.3-1 1-1 1.7 0 1.1.9 2 2 2 .7 0 1.4-.4 1.7-1h4.6c.3.6 1 1 1.7 1 1.1 0 2-.9 2-2 0-.7-.4-1.4-1-1.7zm-8-.3v-4l1-1h4l1 1v4l-1 1h-4z"/>%3C/svg>\');\n}\n.mapbox-gl-draw_line {\n  background-image: url(\'data:image/svg+xml;utf8,%3Csvg xmlns="http://www.w3.org/2000/svg" width="20" height="20">%3Cpath d="m13.5 3.5c-1.4 0-2.5 1.1-2.5 2.5 0 .3 0 .6.2.9l-3.8 3.8c-.3-.1-.6-.2-.9-.2-1.4 0-2.5 1.1-2.5 2.5s1.1 2.5 2.5 2.5 2.5-1.1 2.5-2.5c0-.3 0-.6-.2-.9l3.8-3.8c.3.1.6.2.9.2 1.4 0 2.5-1.1 2.5-2.5s-1.1-2.5-2.5-2.5z"/>%3C/svg>\');\n}\n.mapbox-gl-draw_trash {\n  background-image: url(\'data:image/svg+xml;utf8,%3Csvg xmlns="http://www.w3.org/2000/svg" width="20" height="20">%3Cpath d="M10,3.4 c-0.8,0-1.5,0.5-1.8,1.2H5l-1,1v1h12v-1l-1-1h-3.2C11.5,3.9,10.8,3.4,10,3.4z M5,8v7c0,1,1,2,2,2h6c1,0,2-1,2-2V8h-2v5.5h-1.5V8h-3 v5.5H7V8H5z"/>%3C/svg>\');\n}\n.mapbox-gl-draw_uncombine {\n  background-image: url(\'data:image/svg+xml;utf8,%3Csvg xmlns="http://www.w3.org/2000/svg" width="20" height="20">%3Cpath d="m12 2c-.3 0-.5.1-.7.3l-1 1c-.4.4-.4 1 0 1.4l1 1c.4.4 1 .4 1.4 0l1-1c.4-.4.4-1 0-1.4l-1-1c-.2-.2-.4-.3-.7-.3zm4 4c-.3 0-.5.1-.7.3l-1 1c-.4.4-.4 1 0 1.4l1 1c.4.4 1 .4 1.4 0l1-1c.4-.4.4-1 0-1.4l-1-1c-.2-.2-.4-.3-.7-.3zm-7 1c-1 0-1 1-.5 1.5.3.3 1 1 1 1l-1 1s-.5.5 0 1 1 0 1 0l1-1 1 1c.5.5 1.5.5 1.5-.5v-4zm-5 3c-.3 0-.5.1-.7.3l-1 1c-.4.4-.4 1 0 1.4l4.9 4.9c.4.4 1 .4 1.4 0l1-1c.4-.4.4-1 0-1.4l-4.9-4.9c-.1-.2-.4-.3-.7-.3z"/>%3C/svg>\');\n}\n.mapbox-gl-draw_combine {\n  background-image: url(\'data:image/svg+xml;utf8,%3Csvg xmlns="http://www.w3.org/2000/svg" width="20" height="20">%3Cpath d="M12.1,2c-0.3,0-0.5,0.1-0.7,0.3l-1,1c-0.4,0.4-0.4,1,0,1.4l4.9,4.9c0.4,0.4,1,0.4,1.4,0l1-1 c0.4-0.4,0.4-1,0-1.4l-4.9-4.9C12.6,2.1,12.3,2,12.1,2z M8,8C7,8,7,9,7.5,9.5c0.3,0.3,1,1,1,1l-1,1c0,0-0.5,0.5,0,1s1,0,1,0l1-1l1,1 C11,13,12,13,12,12V8H8z M4,10c-0.3,0-0.5,0.1-0.7,0.3l-1,1c-0.4,0.4-0.4,1,0,1.4l1,1c0.4,0.4,1,0.4,1.4,0l1-1c0.4-0.4,0.4-1,0-1.4 l-1-1C4.5,10.1,4.3,10,4,10z M8,14c-0.3,0-0.5,0.1-0.7,0.3l-1,1c-0.4,0.4-0.4,1,0,1.4l1,1c0.4,0.4,1,0.4,1.4,0l1-1 c0.4-0.4,0.4-1,0-1.4l-1-1C8.5,14.1,8.3,14,8,14z"/>%3C/svg>\');\n}\n\n.mapboxgl-map.mouse-pointer .mapboxgl-canvas-container.mapboxgl-interactive {\n  cursor: pointer;\n}\n.mapboxgl-map.mouse-move .mapboxgl-canvas-container.mapboxgl-interactive {\n  cursor: move;\n}\n.mapboxgl-map.mouse-add .mapboxgl-canvas-container.mapboxgl-interactive {\n  cursor: crosshair;\n}\n.mapboxgl-map.mouse-move.mode-direct_select .mapboxgl-canvas-container.mapboxgl-interactive {\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n.mapboxgl-map.mode-direct_select.feature-vertex.mouse-move .mapboxgl-canvas-container.mapboxgl-interactive {\n  cursor: move;\n}\n.mapboxgl-map.mode-direct_select.feature-midpoint.mouse-pointer .mapboxgl-canvas-container.mapboxgl-interactive {\n  cursor: cell;\n}\n.mapboxgl-map.mode-direct_select.feature-feature.mouse-move .mapboxgl-canvas-container.mapboxgl-interactive {\n  cursor: move;\n}\n.mapboxgl-map.mode-static.mouse-pointer  .mapboxgl-canvas-container.mapboxgl-interactive {\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n\n.mapbox-gl-draw_boxselect {\n    pointer-events: none;\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 0;\n    height: 0;\n    background: rgba(0,0,0,.1);\n    border: 2px dotted #fff;\n    opacity: 0.5;\n}\n'],sourceRoot:""}]);const s=a},30951:(e,t,n)=>{"use strict";n.d(t,{Z:()=>A});var r=n(94015),i=n.n(r),o=n(23645),a=n.n(o),s=n(61667),l=n.n(s),c=n(17383),u=n(19579),h=n(1536),f=n(50786),p=n(64384),d=n(71892),m=a()(i()),g=l()(c.Z),y=l()(u.Z,{hash:"?#iefix&v=4.7.0"}),v=l()(h.Z),b=l()(f.Z),_=l()(p.Z),x=l()(d.Z,{hash:"#fontawesomeregular"});m.push([e.id,"/*!\n *  Font Awesome 4.7.0 by @davegandy - http://fontawesome.io - @fontawesome\n *  License - http://fontawesome.io/license (Font: SIL OFL 1.1, CSS: MIT License)\n */\n/* FONT PATH\n * -------------------------- */\n@font-face {\n  font-family: 'FontAwesome';\n  src: url("+g+");\n  src: url("+y+") format('embedded-opentype'), url("+v+") format('woff2'), url("+b+") format('woff'), url("+_+") format('truetype'), url("+x+') format(\'svg\');\n  font-weight: normal;\n  font-style: normal;\n}\n.fa {\n  display: inline-block;\n  font: normal normal normal 14px/1 FontAwesome;\n  font-size: inherit;\n  text-rendering: auto;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n/* makes the font 33% larger relative to the icon container */\n.fa-lg {\n  font-size: 1.33333333em;\n  line-height: 0.75em;\n  vertical-align: -15%;\n}\n.fa-2x {\n  font-size: 2em;\n}\n.fa-3x {\n  font-size: 3em;\n}\n.fa-4x {\n  font-size: 4em;\n}\n.fa-5x {\n  font-size: 5em;\n}\n.fa-fw {\n  width: 1.28571429em;\n  text-align: center;\n}\n.fa-ul {\n  padding-left: 0;\n  margin-left: 2.14285714em;\n  list-style-type: none;\n}\n.fa-ul > li {\n  position: relative;\n}\n.fa-li {\n  position: absolute;\n  left: -2.14285714em;\n  width: 2.14285714em;\n  top: 0.14285714em;\n  text-align: center;\n}\n.fa-li.fa-lg {\n  left: -1.85714286em;\n}\n.fa-border {\n  padding: .2em .25em .15em;\n  border: solid 0.08em #eeeeee;\n  border-radius: .1em;\n}\n.fa-pull-left {\n  float: left;\n}\n.fa-pull-right {\n  float: right;\n}\n.fa.fa-pull-left {\n  margin-right: .3em;\n}\n.fa.fa-pull-right {\n  margin-left: .3em;\n}\n/* Deprecated as of 4.4.0 */\n.pull-right {\n  float: right;\n}\n.pull-left {\n  float: left;\n}\n.fa.pull-left {\n  margin-right: .3em;\n}\n.fa.pull-right {\n  margin-left: .3em;\n}\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n  animation: fa-spin 2s infinite linear;\n}\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n  animation: fa-spin 1s infinite steps(8);\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(359deg);\n    transform: rotate(359deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(359deg);\n    transform: rotate(359deg);\n  }\n}\n.fa-rotate-90 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";\n  -webkit-transform: rotate(90deg);\n  -ms-transform: rotate(90deg);\n  transform: rotate(90deg);\n}\n.fa-rotate-180 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";\n  -webkit-transform: rotate(180deg);\n  -ms-transform: rotate(180deg);\n  transform: rotate(180deg);\n}\n.fa-rotate-270 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";\n  -webkit-transform: rotate(270deg);\n  -ms-transform: rotate(270deg);\n  transform: rotate(270deg);\n}\n.fa-flip-horizontal {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";\n  -webkit-transform: scale(-1, 1);\n  -ms-transform: scale(-1, 1);\n  transform: scale(-1, 1);\n}\n.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(1, -1);\n  -ms-transform: scale(1, -1);\n  transform: scale(1, -1);\n}\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical {\n  filter: none;\n}\n.fa-stack {\n  position: relative;\n  display: inline-block;\n  width: 2em;\n  height: 2em;\n  line-height: 2em;\n  vertical-align: middle;\n}\n.fa-stack-1x,\n.fa-stack-2x {\n  position: absolute;\n  left: 0;\n  width: 100%;\n  text-align: center;\n}\n.fa-stack-1x {\n  line-height: inherit;\n}\n.fa-stack-2x {\n  font-size: 2em;\n}\n.fa-inverse {\n  color: #ffffff;\n}\n/* Font Awesome uses the Unicode Private Use Area (PUA) to ensure screen\n   readers do not read off random characters that represent icons */\n.fa-glass:before {\n  content: "\\f000";\n}\n.fa-music:before {\n  content: "\\f001";\n}\n.fa-search:before {\n  content: "\\f002";\n}\n.fa-envelope-o:before {\n  content: "\\f003";\n}\n.fa-heart:before {\n  content: "\\f004";\n}\n.fa-star:before {\n  content: "\\f005";\n}\n.fa-star-o:before {\n  content: "\\f006";\n}\n.fa-user:before {\n  content: "\\f007";\n}\n.fa-film:before {\n  content: "\\f008";\n}\n.fa-th-large:before {\n  content: "\\f009";\n}\n.fa-th:before {\n  content: "\\f00a";\n}\n.fa-th-list:before {\n  content: "\\f00b";\n}\n.fa-check:before {\n  content: "\\f00c";\n}\n.fa-remove:before,\n.fa-close:before,\n.fa-times:before {\n  content: "\\f00d";\n}\n.fa-search-plus:before {\n  content: "\\f00e";\n}\n.fa-search-minus:before {\n  content: "\\f010";\n}\n.fa-power-off:before {\n  content: "\\f011";\n}\n.fa-signal:before {\n  content: "\\f012";\n}\n.fa-gear:before,\n.fa-cog:before {\n  content: "\\f013";\n}\n.fa-trash-o:before {\n  content: "\\f014";\n}\n.fa-home:before {\n  content: "\\f015";\n}\n.fa-file-o:before {\n  content: "\\f016";\n}\n.fa-clock-o:before {\n  content: "\\f017";\n}\n.fa-road:before {\n  content: "\\f018";\n}\n.fa-download:before {\n  content: "\\f019";\n}\n.fa-arrow-circle-o-down:before {\n  content: "\\f01a";\n}\n.fa-arrow-circle-o-up:before {\n  content: "\\f01b";\n}\n.fa-inbox:before {\n  content: "\\f01c";\n}\n.fa-play-circle-o:before {\n  content: "\\f01d";\n}\n.fa-rotate-right:before,\n.fa-repeat:before {\n  content: "\\f01e";\n}\n.fa-refresh:before {\n  content: "\\f021";\n}\n.fa-list-alt:before {\n  content: "\\f022";\n}\n.fa-lock:before {\n  content: "\\f023";\n}\n.fa-flag:before {\n  content: "\\f024";\n}\n.fa-headphones:before {\n  content: "\\f025";\n}\n.fa-volume-off:before {\n  content: "\\f026";\n}\n.fa-volume-down:before {\n  content: "\\f027";\n}\n.fa-volume-up:before {\n  content: "\\f028";\n}\n.fa-qrcode:before {\n  content: "\\f029";\n}\n.fa-barcode:before {\n  content: "\\f02a";\n}\n.fa-tag:before {\n  content: "\\f02b";\n}\n.fa-tags:before {\n  content: "\\f02c";\n}\n.fa-book:before {\n  content: "\\f02d";\n}\n.fa-bookmark:before {\n  content: "\\f02e";\n}\n.fa-print:before {\n  content: "\\f02f";\n}\n.fa-camera:before {\n  content: "\\f030";\n}\n.fa-font:before {\n  content: "\\f031";\n}\n.fa-bold:before {\n  content: "\\f032";\n}\n.fa-italic:before {\n  content: "\\f033";\n}\n.fa-text-height:before {\n  content: "\\f034";\n}\n.fa-text-width:before {\n  content: "\\f035";\n}\n.fa-align-left:before {\n  content: "\\f036";\n}\n.fa-align-center:before {\n  content: "\\f037";\n}\n.fa-align-right:before {\n  content: "\\f038";\n}\n.fa-align-justify:before {\n  content: "\\f039";\n}\n.fa-list:before {\n  content: "\\f03a";\n}\n.fa-dedent:before,\n.fa-outdent:before {\n  content: "\\f03b";\n}\n.fa-indent:before {\n  content: "\\f03c";\n}\n.fa-video-camera:before {\n  content: "\\f03d";\n}\n.fa-photo:before,\n.fa-image:before,\n.fa-picture-o:before {\n  content: "\\f03e";\n}\n.fa-pencil:before {\n  content: "\\f040";\n}\n.fa-map-marker:before {\n  content: "\\f041";\n}\n.fa-adjust:before {\n  content: "\\f042";\n}\n.fa-tint:before {\n  content: "\\f043";\n}\n.fa-edit:before,\n.fa-pencil-square-o:before {\n  content: "\\f044";\n}\n.fa-share-square-o:before {\n  content: "\\f045";\n}\n.fa-check-square-o:before {\n  content: "\\f046";\n}\n.fa-arrows:before {\n  content: "\\f047";\n}\n.fa-step-backward:before {\n  content: "\\f048";\n}\n.fa-fast-backward:before {\n  content: "\\f049";\n}\n.fa-backward:before {\n  content: "\\f04a";\n}\n.fa-play:before {\n  content: "\\f04b";\n}\n.fa-pause:before {\n  content: "\\f04c";\n}\n.fa-stop:before {\n  content: "\\f04d";\n}\n.fa-forward:before {\n  content: "\\f04e";\n}\n.fa-fast-forward:before {\n  content: "\\f050";\n}\n.fa-step-forward:before {\n  content: "\\f051";\n}\n.fa-eject:before {\n  content: "\\f052";\n}\n.fa-chevron-left:before {\n  content: "\\f053";\n}\n.fa-chevron-right:before {\n  content: "\\f054";\n}\n.fa-plus-circle:before {\n  content: "\\f055";\n}\n.fa-minus-circle:before {\n  content: "\\f056";\n}\n.fa-times-circle:before {\n  content: "\\f057";\n}\n.fa-check-circle:before {\n  content: "\\f058";\n}\n.fa-question-circle:before {\n  content: "\\f059";\n}\n.fa-info-circle:before {\n  content: "\\f05a";\n}\n.fa-crosshairs:before {\n  content: "\\f05b";\n}\n.fa-times-circle-o:before {\n  content: "\\f05c";\n}\n.fa-check-circle-o:before {\n  content: "\\f05d";\n}\n.fa-ban:before {\n  content: "\\f05e";\n}\n.fa-arrow-left:before {\n  content: "\\f060";\n}\n.fa-arrow-right:before {\n  content: "\\f061";\n}\n.fa-arrow-up:before {\n  content: "\\f062";\n}\n.fa-arrow-down:before {\n  content: "\\f063";\n}\n.fa-mail-forward:before,\n.fa-share:before {\n  content: "\\f064";\n}\n.fa-expand:before {\n  content: "\\f065";\n}\n.fa-compress:before {\n  content: "\\f066";\n}\n.fa-plus:before {\n  content: "\\f067";\n}\n.fa-minus:before {\n  content: "\\f068";\n}\n.fa-asterisk:before {\n  content: "\\f069";\n}\n.fa-exclamation-circle:before {\n  content: "\\f06a";\n}\n.fa-gift:before {\n  content: "\\f06b";\n}\n.fa-leaf:before {\n  content: "\\f06c";\n}\n.fa-fire:before {\n  content: "\\f06d";\n}\n.fa-eye:before {\n  content: "\\f06e";\n}\n.fa-eye-slash:before {\n  content: "\\f070";\n}\n.fa-warning:before,\n.fa-exclamation-triangle:before {\n  content: "\\f071";\n}\n.fa-plane:before {\n  content: "\\f072";\n}\n.fa-calendar:before {\n  content: "\\f073";\n}\n.fa-random:before {\n  content: "\\f074";\n}\n.fa-comment:before {\n  content: "\\f075";\n}\n.fa-magnet:before {\n  content: "\\f076";\n}\n.fa-chevron-up:before {\n  content: "\\f077";\n}\n.fa-chevron-down:before {\n  content: "\\f078";\n}\n.fa-retweet:before {\n  content: "\\f079";\n}\n.fa-shopping-cart:before {\n  content: "\\f07a";\n}\n.fa-folder:before {\n  content: "\\f07b";\n}\n.fa-folder-open:before {\n  content: "\\f07c";\n}\n.fa-arrows-v:before {\n  content: "\\f07d";\n}\n.fa-arrows-h:before {\n  content: "\\f07e";\n}\n.fa-bar-chart-o:before,\n.fa-bar-chart:before {\n  content: "\\f080";\n}\n.fa-twitter-square:before {\n  content: "\\f081";\n}\n.fa-facebook-square:before {\n  content: "\\f082";\n}\n.fa-camera-retro:before {\n  content: "\\f083";\n}\n.fa-key:before {\n  content: "\\f084";\n}\n.fa-gears:before,\n.fa-cogs:before {\n  content: "\\f085";\n}\n.fa-comments:before {\n  content: "\\f086";\n}\n.fa-thumbs-o-up:before {\n  content: "\\f087";\n}\n.fa-thumbs-o-down:before {\n  content: "\\f088";\n}\n.fa-star-half:before {\n  content: "\\f089";\n}\n.fa-heart-o:before {\n  content: "\\f08a";\n}\n.fa-sign-out:before {\n  content: "\\f08b";\n}\n.fa-linkedin-square:before {\n  content: "\\f08c";\n}\n.fa-thumb-tack:before {\n  content: "\\f08d";\n}\n.fa-external-link:before {\n  content: "\\f08e";\n}\n.fa-sign-in:before {\n  content: "\\f090";\n}\n.fa-trophy:before {\n  content: "\\f091";\n}\n.fa-github-square:before {\n  content: "\\f092";\n}\n.fa-upload:before {\n  content: "\\f093";\n}\n.fa-lemon-o:before {\n  content: "\\f094";\n}\n.fa-phone:before {\n  content: "\\f095";\n}\n.fa-square-o:before {\n  content: "\\f096";\n}\n.fa-bookmark-o:before {\n  content: "\\f097";\n}\n.fa-phone-square:before {\n  content: "\\f098";\n}\n.fa-twitter:before {\n  content: "\\f099";\n}\n.fa-facebook-f:before,\n.fa-facebook:before {\n  content: "\\f09a";\n}\n.fa-github:before {\n  content: "\\f09b";\n}\n.fa-unlock:before {\n  content: "\\f09c";\n}\n.fa-credit-card:before {\n  content: "\\f09d";\n}\n.fa-feed:before,\n.fa-rss:before {\n  content: "\\f09e";\n}\n.fa-hdd-o:before {\n  content: "\\f0a0";\n}\n.fa-bullhorn:before {\n  content: "\\f0a1";\n}\n.fa-bell:before {\n  content: "\\f0f3";\n}\n.fa-certificate:before {\n  content: "\\f0a3";\n}\n.fa-hand-o-right:before {\n  content: "\\f0a4";\n}\n.fa-hand-o-left:before {\n  content: "\\f0a5";\n}\n.fa-hand-o-up:before {\n  content: "\\f0a6";\n}\n.fa-hand-o-down:before {\n  content: "\\f0a7";\n}\n.fa-arrow-circle-left:before {\n  content: "\\f0a8";\n}\n.fa-arrow-circle-right:before {\n  content: "\\f0a9";\n}\n.fa-arrow-circle-up:before {\n  content: "\\f0aa";\n}\n.fa-arrow-circle-down:before {\n  content: "\\f0ab";\n}\n.fa-globe:before {\n  content: "\\f0ac";\n}\n.fa-wrench:before {\n  content: "\\f0ad";\n}\n.fa-tasks:before {\n  content: "\\f0ae";\n}\n.fa-filter:before {\n  content: "\\f0b0";\n}\n.fa-briefcase:before {\n  content: "\\f0b1";\n}\n.fa-arrows-alt:before {\n  content: "\\f0b2";\n}\n.fa-group:before,\n.fa-users:before {\n  content: "\\f0c0";\n}\n.fa-chain:before,\n.fa-link:before {\n  content: "\\f0c1";\n}\n.fa-cloud:before {\n  content: "\\f0c2";\n}\n.fa-flask:before {\n  content: "\\f0c3";\n}\n.fa-cut:before,\n.fa-scissors:before {\n  content: "\\f0c4";\n}\n.fa-copy:before,\n.fa-files-o:before {\n  content: "\\f0c5";\n}\n.fa-paperclip:before {\n  content: "\\f0c6";\n}\n.fa-save:before,\n.fa-floppy-o:before {\n  content: "\\f0c7";\n}\n.fa-square:before {\n  content: "\\f0c8";\n}\n.fa-navicon:before,\n.fa-reorder:before,\n.fa-bars:before {\n  content: "\\f0c9";\n}\n.fa-list-ul:before {\n  content: "\\f0ca";\n}\n.fa-list-ol:before {\n  content: "\\f0cb";\n}\n.fa-strikethrough:before {\n  content: "\\f0cc";\n}\n.fa-underline:before {\n  content: "\\f0cd";\n}\n.fa-table:before {\n  content: "\\f0ce";\n}\n.fa-magic:before {\n  content: "\\f0d0";\n}\n.fa-truck:before {\n  content: "\\f0d1";\n}\n.fa-pinterest:before {\n  content: "\\f0d2";\n}\n.fa-pinterest-square:before {\n  content: "\\f0d3";\n}\n.fa-google-plus-square:before {\n  content: "\\f0d4";\n}\n.fa-google-plus:before {\n  content: "\\f0d5";\n}\n.fa-money:before {\n  content: "\\f0d6";\n}\n.fa-caret-down:before {\n  content: "\\f0d7";\n}\n.fa-caret-up:before {\n  content: "\\f0d8";\n}\n.fa-caret-left:before {\n  content: "\\f0d9";\n}\n.fa-caret-right:before {\n  content: "\\f0da";\n}\n.fa-columns:before {\n  content: "\\f0db";\n}\n.fa-unsorted:before,\n.fa-sort:before {\n  content: "\\f0dc";\n}\n.fa-sort-down:before,\n.fa-sort-desc:before {\n  content: "\\f0dd";\n}\n.fa-sort-up:before,\n.fa-sort-asc:before {\n  content: "\\f0de";\n}\n.fa-envelope:before {\n  content: "\\f0e0";\n}\n.fa-linkedin:before {\n  content: "\\f0e1";\n}\n.fa-rotate-left:before,\n.fa-undo:before {\n  content: "\\f0e2";\n}\n.fa-legal:before,\n.fa-gavel:before {\n  content: "\\f0e3";\n}\n.fa-dashboard:before,\n.fa-tachometer:before {\n  content: "\\f0e4";\n}\n.fa-comment-o:before {\n  content: "\\f0e5";\n}\n.fa-comments-o:before {\n  content: "\\f0e6";\n}\n.fa-flash:before,\n.fa-bolt:before {\n  content: "\\f0e7";\n}\n.fa-sitemap:before {\n  content: "\\f0e8";\n}\n.fa-umbrella:before {\n  content: "\\f0e9";\n}\n.fa-paste:before,\n.fa-clipboard:before {\n  content: "\\f0ea";\n}\n.fa-lightbulb-o:before {\n  content: "\\f0eb";\n}\n.fa-exchange:before {\n  content: "\\f0ec";\n}\n.fa-cloud-download:before {\n  content: "\\f0ed";\n}\n.fa-cloud-upload:before {\n  content: "\\f0ee";\n}\n.fa-user-md:before {\n  content: "\\f0f0";\n}\n.fa-stethoscope:before {\n  content: "\\f0f1";\n}\n.fa-suitcase:before {\n  content: "\\f0f2";\n}\n.fa-bell-o:before {\n  content: "\\f0a2";\n}\n.fa-coffee:before {\n  content: "\\f0f4";\n}\n.fa-cutlery:before {\n  content: "\\f0f5";\n}\n.fa-file-text-o:before {\n  content: "\\f0f6";\n}\n.fa-building-o:before {\n  content: "\\f0f7";\n}\n.fa-hospital-o:before {\n  content: "\\f0f8";\n}\n.fa-ambulance:before {\n  content: "\\f0f9";\n}\n.fa-medkit:before {\n  content: "\\f0fa";\n}\n.fa-fighter-jet:before {\n  content: "\\f0fb";\n}\n.fa-beer:before {\n  content: "\\f0fc";\n}\n.fa-h-square:before {\n  content: "\\f0fd";\n}\n.fa-plus-square:before {\n  content: "\\f0fe";\n}\n.fa-angle-double-left:before {\n  content: "\\f100";\n}\n.fa-angle-double-right:before {\n  content: "\\f101";\n}\n.fa-angle-double-up:before {\n  content: "\\f102";\n}\n.fa-angle-double-down:before {\n  content: "\\f103";\n}\n.fa-angle-left:before {\n  content: "\\f104";\n}\n.fa-angle-right:before {\n  content: "\\f105";\n}\n.fa-angle-up:before {\n  content: "\\f106";\n}\n.fa-angle-down:before {\n  content: "\\f107";\n}\n.fa-desktop:before {\n  content: "\\f108";\n}\n.fa-laptop:before {\n  content: "\\f109";\n}\n.fa-tablet:before {\n  content: "\\f10a";\n}\n.fa-mobile-phone:before,\n.fa-mobile:before {\n  content: "\\f10b";\n}\n.fa-circle-o:before {\n  content: "\\f10c";\n}\n.fa-quote-left:before {\n  content: "\\f10d";\n}\n.fa-quote-right:before {\n  content: "\\f10e";\n}\n.fa-spinner:before {\n  content: "\\f110";\n}\n.fa-circle:before {\n  content: "\\f111";\n}\n.fa-mail-reply:before,\n.fa-reply:before {\n  content: "\\f112";\n}\n.fa-github-alt:before {\n  content: "\\f113";\n}\n.fa-folder-o:before {\n  content: "\\f114";\n}\n.fa-folder-open-o:before {\n  content: "\\f115";\n}\n.fa-smile-o:before {\n  content: "\\f118";\n}\n.fa-frown-o:before {\n  content: "\\f119";\n}\n.fa-meh-o:before {\n  content: "\\f11a";\n}\n.fa-gamepad:before {\n  content: "\\f11b";\n}\n.fa-keyboard-o:before {\n  content: "\\f11c";\n}\n.fa-flag-o:before {\n  content: "\\f11d";\n}\n.fa-flag-checkered:before {\n  content: "\\f11e";\n}\n.fa-terminal:before {\n  content: "\\f120";\n}\n.fa-code:before {\n  content: "\\f121";\n}\n.fa-mail-reply-all:before,\n.fa-reply-all:before {\n  content: "\\f122";\n}\n.fa-star-half-empty:before,\n.fa-star-half-full:before,\n.fa-star-half-o:before {\n  content: "\\f123";\n}\n.fa-location-arrow:before {\n  content: "\\f124";\n}\n.fa-crop:before {\n  content: "\\f125";\n}\n.fa-code-fork:before {\n  content: "\\f126";\n}\n.fa-unlink:before,\n.fa-chain-broken:before {\n  content: "\\f127";\n}\n.fa-question:before {\n  content: "\\f128";\n}\n.fa-info:before {\n  content: "\\f129";\n}\n.fa-exclamation:before {\n  content: "\\f12a";\n}\n.fa-superscript:before {\n  content: "\\f12b";\n}\n.fa-subscript:before {\n  content: "\\f12c";\n}\n.fa-eraser:before {\n  content: "\\f12d";\n}\n.fa-puzzle-piece:before {\n  content: "\\f12e";\n}\n.fa-microphone:before {\n  content: "\\f130";\n}\n.fa-microphone-slash:before {\n  content: "\\f131";\n}\n.fa-shield:before {\n  content: "\\f132";\n}\n.fa-calendar-o:before {\n  content: "\\f133";\n}\n.fa-fire-extinguisher:before {\n  content: "\\f134";\n}\n.fa-rocket:before {\n  content: "\\f135";\n}\n.fa-maxcdn:before {\n  content: "\\f136";\n}\n.fa-chevron-circle-left:before {\n  content: "\\f137";\n}\n.fa-chevron-circle-right:before {\n  content: "\\f138";\n}\n.fa-chevron-circle-up:before {\n  content: "\\f139";\n}\n.fa-chevron-circle-down:before {\n  content: "\\f13a";\n}\n.fa-html5:before {\n  content: "\\f13b";\n}\n.fa-css3:before {\n  content: "\\f13c";\n}\n.fa-anchor:before {\n  content: "\\f13d";\n}\n.fa-unlock-alt:before {\n  content: "\\f13e";\n}\n.fa-bullseye:before {\n  content: "\\f140";\n}\n.fa-ellipsis-h:before {\n  content: "\\f141";\n}\n.fa-ellipsis-v:before {\n  content: "\\f142";\n}\n.fa-rss-square:before {\n  content: "\\f143";\n}\n.fa-play-circle:before {\n  content: "\\f144";\n}\n.fa-ticket:before {\n  content: "\\f145";\n}\n.fa-minus-square:before {\n  content: "\\f146";\n}\n.fa-minus-square-o:before {\n  content: "\\f147";\n}\n.fa-level-up:before {\n  content: "\\f148";\n}\n.fa-level-down:before {\n  content: "\\f149";\n}\n.fa-check-square:before {\n  content: "\\f14a";\n}\n.fa-pencil-square:before {\n  content: "\\f14b";\n}\n.fa-external-link-square:before {\n  content: "\\f14c";\n}\n.fa-share-square:before {\n  content: "\\f14d";\n}\n.fa-compass:before {\n  content: "\\f14e";\n}\n.fa-toggle-down:before,\n.fa-caret-square-o-down:before {\n  content: "\\f150";\n}\n.fa-toggle-up:before,\n.fa-caret-square-o-up:before {\n  content: "\\f151";\n}\n.fa-toggle-right:before,\n.fa-caret-square-o-right:before {\n  content: "\\f152";\n}\n.fa-euro:before,\n.fa-eur:before {\n  content: "\\f153";\n}\n.fa-gbp:before {\n  content: "\\f154";\n}\n.fa-dollar:before,\n.fa-usd:before {\n  content: "\\f155";\n}\n.fa-rupee:before,\n.fa-inr:before {\n  content: "\\f156";\n}\n.fa-cny:before,\n.fa-rmb:before,\n.fa-yen:before,\n.fa-jpy:before {\n  content: "\\f157";\n}\n.fa-ruble:before,\n.fa-rouble:before,\n.fa-rub:before {\n  content: "\\f158";\n}\n.fa-won:before,\n.fa-krw:before {\n  content: "\\f159";\n}\n.fa-bitcoin:before,\n.fa-btc:before {\n  content: "\\f15a";\n}\n.fa-file:before {\n  content: "\\f15b";\n}\n.fa-file-text:before {\n  content: "\\f15c";\n}\n.fa-sort-alpha-asc:before {\n  content: "\\f15d";\n}\n.fa-sort-alpha-desc:before {\n  content: "\\f15e";\n}\n.fa-sort-amount-asc:before {\n  content: "\\f160";\n}\n.fa-sort-amount-desc:before {\n  content: "\\f161";\n}\n.fa-sort-numeric-asc:before {\n  content: "\\f162";\n}\n.fa-sort-numeric-desc:before {\n  content: "\\f163";\n}\n.fa-thumbs-up:before {\n  content: "\\f164";\n}\n.fa-thumbs-down:before {\n  content: "\\f165";\n}\n.fa-youtube-square:before {\n  content: "\\f166";\n}\n.fa-youtube:before {\n  content: "\\f167";\n}\n.fa-xing:before {\n  content: "\\f168";\n}\n.fa-xing-square:before {\n  content: "\\f169";\n}\n.fa-youtube-play:before {\n  content: "\\f16a";\n}\n.fa-dropbox:before {\n  content: "\\f16b";\n}\n.fa-stack-overflow:before {\n  content: "\\f16c";\n}\n.fa-instagram:before {\n  content: "\\f16d";\n}\n.fa-flickr:before {\n  content: "\\f16e";\n}\n.fa-adn:before {\n  content: "\\f170";\n}\n.fa-bitbucket:before {\n  content: "\\f171";\n}\n.fa-bitbucket-square:before {\n  content: "\\f172";\n}\n.fa-tumblr:before {\n  content: "\\f173";\n}\n.fa-tumblr-square:before {\n  content: "\\f174";\n}\n.fa-long-arrow-down:before {\n  content: "\\f175";\n}\n.fa-long-arrow-up:before {\n  content: "\\f176";\n}\n.fa-long-arrow-left:before {\n  content: "\\f177";\n}\n.fa-long-arrow-right:before {\n  content: "\\f178";\n}\n.fa-apple:before {\n  content: "\\f179";\n}\n.fa-windows:before {\n  content: "\\f17a";\n}\n.fa-android:before {\n  content: "\\f17b";\n}\n.fa-linux:before {\n  content: "\\f17c";\n}\n.fa-dribbble:before {\n  content: "\\f17d";\n}\n.fa-skype:before {\n  content: "\\f17e";\n}\n.fa-foursquare:before {\n  content: "\\f180";\n}\n.fa-trello:before {\n  content: "\\f181";\n}\n.fa-female:before {\n  content: "\\f182";\n}\n.fa-male:before {\n  content: "\\f183";\n}\n.fa-gittip:before,\n.fa-gratipay:before {\n  content: "\\f184";\n}\n.fa-sun-o:before {\n  content: "\\f185";\n}\n.fa-moon-o:before {\n  content: "\\f186";\n}\n.fa-archive:before {\n  content: "\\f187";\n}\n.fa-bug:before {\n  content: "\\f188";\n}\n.fa-vk:before {\n  content: "\\f189";\n}\n.fa-weibo:before {\n  content: "\\f18a";\n}\n.fa-renren:before {\n  content: "\\f18b";\n}\n.fa-pagelines:before {\n  content: "\\f18c";\n}\n.fa-stack-exchange:before {\n  content: "\\f18d";\n}\n.fa-arrow-circle-o-right:before {\n  content: "\\f18e";\n}\n.fa-arrow-circle-o-left:before {\n  content: "\\f190";\n}\n.fa-toggle-left:before,\n.fa-caret-square-o-left:before {\n  content: "\\f191";\n}\n.fa-dot-circle-o:before {\n  content: "\\f192";\n}\n.fa-wheelchair:before {\n  content: "\\f193";\n}\n.fa-vimeo-square:before {\n  content: "\\f194";\n}\n.fa-turkish-lira:before,\n.fa-try:before {\n  content: "\\f195";\n}\n.fa-plus-square-o:before {\n  content: "\\f196";\n}\n.fa-space-shuttle:before {\n  content: "\\f197";\n}\n.fa-slack:before {\n  content: "\\f198";\n}\n.fa-envelope-square:before {\n  content: "\\f199";\n}\n.fa-wordpress:before {\n  content: "\\f19a";\n}\n.fa-openid:before {\n  content: "\\f19b";\n}\n.fa-institution:before,\n.fa-bank:before,\n.fa-university:before {\n  content: "\\f19c";\n}\n.fa-mortar-board:before,\n.fa-graduation-cap:before {\n  content: "\\f19d";\n}\n.fa-yahoo:before {\n  content: "\\f19e";\n}\n.fa-google:before {\n  content: "\\f1a0";\n}\n.fa-reddit:before {\n  content: "\\f1a1";\n}\n.fa-reddit-square:before {\n  content: "\\f1a2";\n}\n.fa-stumbleupon-circle:before {\n  content: "\\f1a3";\n}\n.fa-stumbleupon:before {\n  content: "\\f1a4";\n}\n.fa-delicious:before {\n  content: "\\f1a5";\n}\n.fa-digg:before {\n  content: "\\f1a6";\n}\n.fa-pied-piper-pp:before {\n  content: "\\f1a7";\n}\n.fa-pied-piper-alt:before {\n  content: "\\f1a8";\n}\n.fa-drupal:before {\n  content: "\\f1a9";\n}\n.fa-joomla:before {\n  content: "\\f1aa";\n}\n.fa-language:before {\n  content: "\\f1ab";\n}\n.fa-fax:before {\n  content: "\\f1ac";\n}\n.fa-building:before {\n  content: "\\f1ad";\n}\n.fa-child:before {\n  content: "\\f1ae";\n}\n.fa-paw:before {\n  content: "\\f1b0";\n}\n.fa-spoon:before {\n  content: "\\f1b1";\n}\n.fa-cube:before {\n  content: "\\f1b2";\n}\n.fa-cubes:before {\n  content: "\\f1b3";\n}\n.fa-behance:before {\n  content: "\\f1b4";\n}\n.fa-behance-square:before {\n  content: "\\f1b5";\n}\n.fa-steam:before {\n  content: "\\f1b6";\n}\n.fa-steam-square:before {\n  content: "\\f1b7";\n}\n.fa-recycle:before {\n  content: "\\f1b8";\n}\n.fa-automobile:before,\n.fa-car:before {\n  content: "\\f1b9";\n}\n.fa-cab:before,\n.fa-taxi:before {\n  content: "\\f1ba";\n}\n.fa-tree:before {\n  content: "\\f1bb";\n}\n.fa-spotify:before {\n  content: "\\f1bc";\n}\n.fa-deviantart:before {\n  content: "\\f1bd";\n}\n.fa-soundcloud:before {\n  content: "\\f1be";\n}\n.fa-database:before {\n  content: "\\f1c0";\n}\n.fa-file-pdf-o:before {\n  content: "\\f1c1";\n}\n.fa-file-word-o:before {\n  content: "\\f1c2";\n}\n.fa-file-excel-o:before {\n  content: "\\f1c3";\n}\n.fa-file-powerpoint-o:before {\n  content: "\\f1c4";\n}\n.fa-file-photo-o:before,\n.fa-file-picture-o:before,\n.fa-file-image-o:before {\n  content: "\\f1c5";\n}\n.fa-file-zip-o:before,\n.fa-file-archive-o:before {\n  content: "\\f1c6";\n}\n.fa-file-sound-o:before,\n.fa-file-audio-o:before {\n  content: "\\f1c7";\n}\n.fa-file-movie-o:before,\n.fa-file-video-o:before {\n  content: "\\f1c8";\n}\n.fa-file-code-o:before {\n  content: "\\f1c9";\n}\n.fa-vine:before {\n  content: "\\f1ca";\n}\n.fa-codepen:before {\n  content: "\\f1cb";\n}\n.fa-jsfiddle:before {\n  content: "\\f1cc";\n}\n.fa-life-bouy:before,\n.fa-life-buoy:before,\n.fa-life-saver:before,\n.fa-support:before,\n.fa-life-ring:before {\n  content: "\\f1cd";\n}\n.fa-circle-o-notch:before {\n  content: "\\f1ce";\n}\n.fa-ra:before,\n.fa-resistance:before,\n.fa-rebel:before {\n  content: "\\f1d0";\n}\n.fa-ge:before,\n.fa-empire:before {\n  content: "\\f1d1";\n}\n.fa-git-square:before {\n  content: "\\f1d2";\n}\n.fa-git:before {\n  content: "\\f1d3";\n}\n.fa-y-combinator-square:before,\n.fa-yc-square:before,\n.fa-hacker-news:before {\n  content: "\\f1d4";\n}\n.fa-tencent-weibo:before {\n  content: "\\f1d5";\n}\n.fa-qq:before {\n  content: "\\f1d6";\n}\n.fa-wechat:before,\n.fa-weixin:before {\n  content: "\\f1d7";\n}\n.fa-send:before,\n.fa-paper-plane:before {\n  content: "\\f1d8";\n}\n.fa-send-o:before,\n.fa-paper-plane-o:before {\n  content: "\\f1d9";\n}\n.fa-history:before {\n  content: "\\f1da";\n}\n.fa-circle-thin:before {\n  content: "\\f1db";\n}\n.fa-header:before {\n  content: "\\f1dc";\n}\n.fa-paragraph:before {\n  content: "\\f1dd";\n}\n.fa-sliders:before {\n  content: "\\f1de";\n}\n.fa-share-alt:before {\n  content: "\\f1e0";\n}\n.fa-share-alt-square:before {\n  content: "\\f1e1";\n}\n.fa-bomb:before {\n  content: "\\f1e2";\n}\n.fa-soccer-ball-o:before,\n.fa-futbol-o:before {\n  content: "\\f1e3";\n}\n.fa-tty:before {\n  content: "\\f1e4";\n}\n.fa-binoculars:before {\n  content: "\\f1e5";\n}\n.fa-plug:before {\n  content: "\\f1e6";\n}\n.fa-slideshare:before {\n  content: "\\f1e7";\n}\n.fa-twitch:before {\n  content: "\\f1e8";\n}\n.fa-yelp:before {\n  content: "\\f1e9";\n}\n.fa-newspaper-o:before {\n  content: "\\f1ea";\n}\n.fa-wifi:before {\n  content: "\\f1eb";\n}\n.fa-calculator:before {\n  content: "\\f1ec";\n}\n.fa-paypal:before {\n  content: "\\f1ed";\n}\n.fa-google-wallet:before {\n  content: "\\f1ee";\n}\n.fa-cc-visa:before {\n  content: "\\f1f0";\n}\n.fa-cc-mastercard:before {\n  content: "\\f1f1";\n}\n.fa-cc-discover:before {\n  content: "\\f1f2";\n}\n.fa-cc-amex:before {\n  content: "\\f1f3";\n}\n.fa-cc-paypal:before {\n  content: "\\f1f4";\n}\n.fa-cc-stripe:before {\n  content: "\\f1f5";\n}\n.fa-bell-slash:before {\n  content: "\\f1f6";\n}\n.fa-bell-slash-o:before {\n  content: "\\f1f7";\n}\n.fa-trash:before {\n  content: "\\f1f8";\n}\n.fa-copyright:before {\n  content: "\\f1f9";\n}\n.fa-at:before {\n  content: "\\f1fa";\n}\n.fa-eyedropper:before {\n  content: "\\f1fb";\n}\n.fa-paint-brush:before {\n  content: "\\f1fc";\n}\n.fa-birthday-cake:before {\n  content: "\\f1fd";\n}\n.fa-area-chart:before {\n  content: "\\f1fe";\n}\n.fa-pie-chart:before {\n  content: "\\f200";\n}\n.fa-line-chart:before {\n  content: "\\f201";\n}\n.fa-lastfm:before {\n  content: "\\f202";\n}\n.fa-lastfm-square:before {\n  content: "\\f203";\n}\n.fa-toggle-off:before {\n  content: "\\f204";\n}\n.fa-toggle-on:before {\n  content: "\\f205";\n}\n.fa-bicycle:before {\n  content: "\\f206";\n}\n.fa-bus:before {\n  content: "\\f207";\n}\n.fa-ioxhost:before {\n  content: "\\f208";\n}\n.fa-angellist:before {\n  content: "\\f209";\n}\n.fa-cc:before {\n  content: "\\f20a";\n}\n.fa-shekel:before,\n.fa-sheqel:before,\n.fa-ils:before {\n  content: "\\f20b";\n}\n.fa-meanpath:before {\n  content: "\\f20c";\n}\n.fa-buysellads:before {\n  content: "\\f20d";\n}\n.fa-connectdevelop:before {\n  content: "\\f20e";\n}\n.fa-dashcube:before {\n  content: "\\f210";\n}\n.fa-forumbee:before {\n  content: "\\f211";\n}\n.fa-leanpub:before {\n  content: "\\f212";\n}\n.fa-sellsy:before {\n  content: "\\f213";\n}\n.fa-shirtsinbulk:before {\n  content: "\\f214";\n}\n.fa-simplybuilt:before {\n  content: "\\f215";\n}\n.fa-skyatlas:before {\n  content: "\\f216";\n}\n.fa-cart-plus:before {\n  content: "\\f217";\n}\n.fa-cart-arrow-down:before {\n  content: "\\f218";\n}\n.fa-diamond:before {\n  content: "\\f219";\n}\n.fa-ship:before {\n  content: "\\f21a";\n}\n.fa-user-secret:before {\n  content: "\\f21b";\n}\n.fa-motorcycle:before {\n  content: "\\f21c";\n}\n.fa-street-view:before {\n  content: "\\f21d";\n}\n.fa-heartbeat:before {\n  content: "\\f21e";\n}\n.fa-venus:before {\n  content: "\\f221";\n}\n.fa-mars:before {\n  content: "\\f222";\n}\n.fa-mercury:before {\n  content: "\\f223";\n}\n.fa-intersex:before,\n.fa-transgender:before {\n  content: "\\f224";\n}\n.fa-transgender-alt:before {\n  content: "\\f225";\n}\n.fa-venus-double:before {\n  content: "\\f226";\n}\n.fa-mars-double:before {\n  content: "\\f227";\n}\n.fa-venus-mars:before {\n  content: "\\f228";\n}\n.fa-mars-stroke:before {\n  content: "\\f229";\n}\n.fa-mars-stroke-v:before {\n  content: "\\f22a";\n}\n.fa-mars-stroke-h:before {\n  content: "\\f22b";\n}\n.fa-neuter:before {\n  content: "\\f22c";\n}\n.fa-genderless:before {\n  content: "\\f22d";\n}\n.fa-facebook-official:before {\n  content: "\\f230";\n}\n.fa-pinterest-p:before {\n  content: "\\f231";\n}\n.fa-whatsapp:before {\n  content: "\\f232";\n}\n.fa-server:before {\n  content: "\\f233";\n}\n.fa-user-plus:before {\n  content: "\\f234";\n}\n.fa-user-times:before {\n  content: "\\f235";\n}\n.fa-hotel:before,\n.fa-bed:before {\n  content: "\\f236";\n}\n.fa-viacoin:before {\n  content: "\\f237";\n}\n.fa-train:before {\n  content: "\\f238";\n}\n.fa-subway:before {\n  content: "\\f239";\n}\n.fa-medium:before {\n  content: "\\f23a";\n}\n.fa-yc:before,\n.fa-y-combinator:before {\n  content: "\\f23b";\n}\n.fa-optin-monster:before {\n  content: "\\f23c";\n}\n.fa-opencart:before {\n  content: "\\f23d";\n}\n.fa-expeditedssl:before {\n  content: "\\f23e";\n}\n.fa-battery-4:before,\n.fa-battery:before,\n.fa-battery-full:before {\n  content: "\\f240";\n}\n.fa-battery-3:before,\n.fa-battery-three-quarters:before {\n  content: "\\f241";\n}\n.fa-battery-2:before,\n.fa-battery-half:before {\n  content: "\\f242";\n}\n.fa-battery-1:before,\n.fa-battery-quarter:before {\n  content: "\\f243";\n}\n.fa-battery-0:before,\n.fa-battery-empty:before {\n  content: "\\f244";\n}\n.fa-mouse-pointer:before {\n  content: "\\f245";\n}\n.fa-i-cursor:before {\n  content: "\\f246";\n}\n.fa-object-group:before {\n  content: "\\f247";\n}\n.fa-object-ungroup:before {\n  content: "\\f248";\n}\n.fa-sticky-note:before {\n  content: "\\f249";\n}\n.fa-sticky-note-o:before {\n  content: "\\f24a";\n}\n.fa-cc-jcb:before {\n  content: "\\f24b";\n}\n.fa-cc-diners-club:before {\n  content: "\\f24c";\n}\n.fa-clone:before {\n  content: "\\f24d";\n}\n.fa-balance-scale:before {\n  content: "\\f24e";\n}\n.fa-hourglass-o:before {\n  content: "\\f250";\n}\n.fa-hourglass-1:before,\n.fa-hourglass-start:before {\n  content: "\\f251";\n}\n.fa-hourglass-2:before,\n.fa-hourglass-half:before {\n  content: "\\f252";\n}\n.fa-hourglass-3:before,\n.fa-hourglass-end:before {\n  content: "\\f253";\n}\n.fa-hourglass:before {\n  content: "\\f254";\n}\n.fa-hand-grab-o:before,\n.fa-hand-rock-o:before {\n  content: "\\f255";\n}\n.fa-hand-stop-o:before,\n.fa-hand-paper-o:before {\n  content: "\\f256";\n}\n.fa-hand-scissors-o:before {\n  content: "\\f257";\n}\n.fa-hand-lizard-o:before {\n  content: "\\f258";\n}\n.fa-hand-spock-o:before {\n  content: "\\f259";\n}\n.fa-hand-pointer-o:before {\n  content: "\\f25a";\n}\n.fa-hand-peace-o:before {\n  content: "\\f25b";\n}\n.fa-trademark:before {\n  content: "\\f25c";\n}\n.fa-registered:before {\n  content: "\\f25d";\n}\n.fa-creative-commons:before {\n  content: "\\f25e";\n}\n.fa-gg:before {\n  content: "\\f260";\n}\n.fa-gg-circle:before {\n  content: "\\f261";\n}\n.fa-tripadvisor:before {\n  content: "\\f262";\n}\n.fa-odnoklassniki:before {\n  content: "\\f263";\n}\n.fa-odnoklassniki-square:before {\n  content: "\\f264";\n}\n.fa-get-pocket:before {\n  content: "\\f265";\n}\n.fa-wikipedia-w:before {\n  content: "\\f266";\n}\n.fa-safari:before {\n  content: "\\f267";\n}\n.fa-chrome:before {\n  content: "\\f268";\n}\n.fa-firefox:before {\n  content: "\\f269";\n}\n.fa-opera:before {\n  content: "\\f26a";\n}\n.fa-internet-explorer:before {\n  content: "\\f26b";\n}\n.fa-tv:before,\n.fa-television:before {\n  content: "\\f26c";\n}\n.fa-contao:before {\n  content: "\\f26d";\n}\n.fa-500px:before {\n  content: "\\f26e";\n}\n.fa-amazon:before {\n  content: "\\f270";\n}\n.fa-calendar-plus-o:before {\n  content: "\\f271";\n}\n.fa-calendar-minus-o:before {\n  content: "\\f272";\n}\n.fa-calendar-times-o:before {\n  content: "\\f273";\n}\n.fa-calendar-check-o:before {\n  content: "\\f274";\n}\n.fa-industry:before {\n  content: "\\f275";\n}\n.fa-map-pin:before {\n  content: "\\f276";\n}\n.fa-map-signs:before {\n  content: "\\f277";\n}\n.fa-map-o:before {\n  content: "\\f278";\n}\n.fa-map:before {\n  content: "\\f279";\n}\n.fa-commenting:before {\n  content: "\\f27a";\n}\n.fa-commenting-o:before {\n  content: "\\f27b";\n}\n.fa-houzz:before {\n  content: "\\f27c";\n}\n.fa-vimeo:before {\n  content: "\\f27d";\n}\n.fa-black-tie:before {\n  content: "\\f27e";\n}\n.fa-fonticons:before {\n  content: "\\f280";\n}\n.fa-reddit-alien:before {\n  content: "\\f281";\n}\n.fa-edge:before {\n  content: "\\f282";\n}\n.fa-credit-card-alt:before {\n  content: "\\f283";\n}\n.fa-codiepie:before {\n  content: "\\f284";\n}\n.fa-modx:before {\n  content: "\\f285";\n}\n.fa-fort-awesome:before {\n  content: "\\f286";\n}\n.fa-usb:before {\n  content: "\\f287";\n}\n.fa-product-hunt:before {\n  content: "\\f288";\n}\n.fa-mixcloud:before {\n  content: "\\f289";\n}\n.fa-scribd:before {\n  content: "\\f28a";\n}\n.fa-pause-circle:before {\n  content: "\\f28b";\n}\n.fa-pause-circle-o:before {\n  content: "\\f28c";\n}\n.fa-stop-circle:before {\n  content: "\\f28d";\n}\n.fa-stop-circle-o:before {\n  content: "\\f28e";\n}\n.fa-shopping-bag:before {\n  content: "\\f290";\n}\n.fa-shopping-basket:before {\n  content: "\\f291";\n}\n.fa-hashtag:before {\n  content: "\\f292";\n}\n.fa-bluetooth:before {\n  content: "\\f293";\n}\n.fa-bluetooth-b:before {\n  content: "\\f294";\n}\n.fa-percent:before {\n  content: "\\f295";\n}\n.fa-gitlab:before {\n  content: "\\f296";\n}\n.fa-wpbeginner:before {\n  content: "\\f297";\n}\n.fa-wpforms:before {\n  content: "\\f298";\n}\n.fa-envira:before {\n  content: "\\f299";\n}\n.fa-universal-access:before {\n  content: "\\f29a";\n}\n.fa-wheelchair-alt:before {\n  content: "\\f29b";\n}\n.fa-question-circle-o:before {\n  content: "\\f29c";\n}\n.fa-blind:before {\n  content: "\\f29d";\n}\n.fa-audio-description:before {\n  content: "\\f29e";\n}\n.fa-volume-control-phone:before {\n  content: "\\f2a0";\n}\n.fa-braille:before {\n  content: "\\f2a1";\n}\n.fa-assistive-listening-systems:before {\n  content: "\\f2a2";\n}\n.fa-asl-interpreting:before,\n.fa-american-sign-language-interpreting:before {\n  content: "\\f2a3";\n}\n.fa-deafness:before,\n.fa-hard-of-hearing:before,\n.fa-deaf:before {\n  content: "\\f2a4";\n}\n.fa-glide:before {\n  content: "\\f2a5";\n}\n.fa-glide-g:before {\n  content: "\\f2a6";\n}\n.fa-signing:before,\n.fa-sign-language:before {\n  content: "\\f2a7";\n}\n.fa-low-vision:before {\n  content: "\\f2a8";\n}\n.fa-viadeo:before {\n  content: "\\f2a9";\n}\n.fa-viadeo-square:before {\n  content: "\\f2aa";\n}\n.fa-snapchat:before {\n  content: "\\f2ab";\n}\n.fa-snapchat-ghost:before {\n  content: "\\f2ac";\n}\n.fa-snapchat-square:before {\n  content: "\\f2ad";\n}\n.fa-pied-piper:before {\n  content: "\\f2ae";\n}\n.fa-first-order:before {\n  content: "\\f2b0";\n}\n.fa-yoast:before {\n  content: "\\f2b1";\n}\n.fa-themeisle:before {\n  content: "\\f2b2";\n}\n.fa-google-plus-circle:before,\n.fa-google-plus-official:before {\n  content: "\\f2b3";\n}\n.fa-fa:before,\n.fa-font-awesome:before {\n  content: "\\f2b4";\n}\n.fa-handshake-o:before {\n  content: "\\f2b5";\n}\n.fa-envelope-open:before {\n  content: "\\f2b6";\n}\n.fa-envelope-open-o:before {\n  content: "\\f2b7";\n}\n.fa-linode:before {\n  content: "\\f2b8";\n}\n.fa-address-book:before {\n  content: "\\f2b9";\n}\n.fa-address-book-o:before {\n  content: "\\f2ba";\n}\n.fa-vcard:before,\n.fa-address-card:before {\n  content: "\\f2bb";\n}\n.fa-vcard-o:before,\n.fa-address-card-o:before {\n  content: "\\f2bc";\n}\n.fa-user-circle:before {\n  content: "\\f2bd";\n}\n.fa-user-circle-o:before {\n  content: "\\f2be";\n}\n.fa-user-o:before {\n  content: "\\f2c0";\n}\n.fa-id-badge:before {\n  content: "\\f2c1";\n}\n.fa-drivers-license:before,\n.fa-id-card:before {\n  content: "\\f2c2";\n}\n.fa-drivers-license-o:before,\n.fa-id-card-o:before {\n  content: "\\f2c3";\n}\n.fa-quora:before {\n  content: "\\f2c4";\n}\n.fa-free-code-camp:before {\n  content: "\\f2c5";\n}\n.fa-telegram:before {\n  content: "\\f2c6";\n}\n.fa-thermometer-4:before,\n.fa-thermometer:before,\n.fa-thermometer-full:before {\n  content: "\\f2c7";\n}\n.fa-thermometer-3:before,\n.fa-thermometer-three-quarters:before {\n  content: "\\f2c8";\n}\n.fa-thermometer-2:before,\n.fa-thermometer-half:before {\n  content: "\\f2c9";\n}\n.fa-thermometer-1:before,\n.fa-thermometer-quarter:before {\n  content: "\\f2ca";\n}\n.fa-thermometer-0:before,\n.fa-thermometer-empty:before {\n  content: "\\f2cb";\n}\n.fa-shower:before {\n  content: "\\f2cc";\n}\n.fa-bathtub:before,\n.fa-s15:before,\n.fa-bath:before {\n  content: "\\f2cd";\n}\n.fa-podcast:before {\n  content: "\\f2ce";\n}\n.fa-window-maximize:before {\n  content: "\\f2d0";\n}\n.fa-window-minimize:before {\n  content: "\\f2d1";\n}\n.fa-window-restore:before {\n  content: "\\f2d2";\n}\n.fa-times-rectangle:before,\n.fa-window-close:before {\n  content: "\\f2d3";\n}\n.fa-times-rectangle-o:before,\n.fa-window-close-o:before {\n  content: "\\f2d4";\n}\n.fa-bandcamp:before {\n  content: "\\f2d5";\n}\n.fa-grav:before {\n  content: "\\f2d6";\n}\n.fa-etsy:before {\n  content: "\\f2d7";\n}\n.fa-imdb:before {\n  content: "\\f2d8";\n}\n.fa-ravelry:before {\n  content: "\\f2d9";\n}\n.fa-eercast:before {\n  content: "\\f2da";\n}\n.fa-microchip:before {\n  content: "\\f2db";\n}\n.fa-snowflake-o:before {\n  content: "\\f2dc";\n}\n.fa-superpowers:before {\n  content: "\\f2dd";\n}\n.fa-wpexplorer:before {\n  content: "\\f2de";\n}\n.fa-meetup:before {\n  content: "\\f2e0";\n}\n.sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  border: 0;\n}\n.sr-only-focusable:active,\n.sr-only-focusable:focus {\n  position: static;\n  width: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  clip: auto;\n}\n',"",{version:3,sources:["webpack://./node_modules/font-awesome/css/font-awesome.css"],names:[],mappings:"AAAA;;;EAGE;AACF;+BAC+B;AAC/B;EACE,0BAA0B;EAC1B,4CAAoD;EACpD,4SAAiX;EACjX,mBAAmB;EACnB,kBAAkB;AACpB;AACA;EACE,qBAAqB;EACrB,6CAA6C;EAC7C,kBAAkB;EAClB,oBAAoB;EACpB,mCAAmC;EACnC,kCAAkC;AACpC;AACA,6DAA6D;AAC7D;EACE,uBAAuB;EACvB,mBAAmB;EACnB,oBAAoB;AACtB;AACA;EACE,cAAc;AAChB;AACA;EACE,cAAc;AAChB;AACA;EACE,cAAc;AAChB;AACA;EACE,cAAc;AAChB;AACA;EACE,mBAAmB;EACnB,kBAAkB;AACpB;AACA;EACE,eAAe;EACf,yBAAyB;EACzB,qBAAqB;AACvB;AACA;EACE,kBAAkB;AACpB;AACA;EACE,kBAAkB;EAClB,mBAAmB;EACnB,mBAAmB;EACnB,iBAAiB;EACjB,kBAAkB;AACpB;AACA;EACE,mBAAmB;AACrB;AACA;EACE,yBAAyB;EACzB,4BAA4B;EAC5B,mBAAmB;AACrB;AACA;EACE,WAAW;AACb;AACA;EACE,YAAY;AACd;AACA;EACE,kBAAkB;AACpB;AACA;EACE,iBAAiB;AACnB;AACA,2BAA2B;AAC3B;EACE,YAAY;AACd;AACA;EACE,WAAW;AACb;AACA;EACE,kBAAkB;AACpB;AACA;EACE,iBAAiB;AACnB;AACA;EACE,6CAA6C;EAC7C,qCAAqC;AACvC;AACA;EACE,+CAA+C;EAC/C,uCAAuC;AACzC;AACA;EACE;IACE,+BAA+B;IAC/B,uBAAuB;EACzB;EACA;IACE,iCAAiC;IACjC,yBAAyB;EAC3B;AACF;AACA;EACE;IACE,+BAA+B;IAC/B,uBAAuB;EACzB;EACA;IACE,iCAAiC;IACjC,yBAAyB;EAC3B;AACF;AACA;EACE,sEAAsE;EACtE,gCAAgC;EAChC,4BAA4B;EAC5B,wBAAwB;AAC1B;AACA;EACE,sEAAsE;EACtE,iCAAiC;EACjC,6BAA6B;EAC7B,yBAAyB;AAC3B;AACA;EACE,sEAAsE;EACtE,iCAAiC;EACjC,6BAA6B;EAC7B,yBAAyB;AAC3B;AACA;EACE,gFAAgF;EAChF,+BAA+B;EAC/B,2BAA2B;EAC3B,uBAAuB;AACzB;AACA;EACE,gFAAgF;EAChF,+BAA+B;EAC/B,2BAA2B;EAC3B,uBAAuB;AACzB;AACA;;;;;EAKE,YAAY;AACd;AACA;EACE,kBAAkB;EAClB,qBAAqB;EACrB,UAAU;EACV,WAAW;EACX,gBAAgB;EAChB,sBAAsB;AACxB;AACA;;EAEE,kBAAkB;EAClB,OAAO;EACP,WAAW;EACX,kBAAkB;AACpB;AACA;EACE,oBAAoB;AACtB;AACA;EACE,cAAc;AAChB;AACA;EACE,cAAc;AAChB;AACA;mEACmE;AACnE;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;;EAGE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;;EAGE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;;EAGE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;;;EAGE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;;;;EAIE,gBAAgB;AAClB;AACA;;;EAGE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;;EAGE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;;EAGE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;;;;EAKE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;;EAGE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;;EAGE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;;EAGE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;;EAGE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;;;EAGE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;;EAGE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;;EAGE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,kBAAkB;EAClB,UAAU;EACV,WAAW;EACX,UAAU;EACV,YAAY;EACZ,gBAAgB;EAChB,sBAAsB;EACtB,SAAS;AACX;AACA;;EAEE,gBAAgB;EAChB,WAAW;EACX,YAAY;EACZ,SAAS;EACT,iBAAiB;EACjB,UAAU;AACZ",sourcesContent:['/*!\n *  Font Awesome 4.7.0 by @davegandy - http://fontawesome.io - @fontawesome\n *  License - http://fontawesome.io/license (Font: SIL OFL 1.1, CSS: MIT License)\n */\n/* FONT PATH\n * -------------------------- */\n@font-face {\n  font-family: \'FontAwesome\';\n  src: url(\'../fonts/fontawesome-webfont.eot?v=4.7.0\');\n  src: url(\'../fonts/fontawesome-webfont.eot?#iefix&v=4.7.0\') format(\'embedded-opentype\'), url(\'../fonts/fontawesome-webfont.woff2?v=4.7.0\') format(\'woff2\'), url(\'../fonts/fontawesome-webfont.woff?v=4.7.0\') format(\'woff\'), url(\'../fonts/fontawesome-webfont.ttf?v=4.7.0\') format(\'truetype\'), url(\'../fonts/fontawesome-webfont.svg?v=4.7.0#fontawesomeregular\') format(\'svg\');\n  font-weight: normal;\n  font-style: normal;\n}\n.fa {\n  display: inline-block;\n  font: normal normal normal 14px/1 FontAwesome;\n  font-size: inherit;\n  text-rendering: auto;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n/* makes the font 33% larger relative to the icon container */\n.fa-lg {\n  font-size: 1.33333333em;\n  line-height: 0.75em;\n  vertical-align: -15%;\n}\n.fa-2x {\n  font-size: 2em;\n}\n.fa-3x {\n  font-size: 3em;\n}\n.fa-4x {\n  font-size: 4em;\n}\n.fa-5x {\n  font-size: 5em;\n}\n.fa-fw {\n  width: 1.28571429em;\n  text-align: center;\n}\n.fa-ul {\n  padding-left: 0;\n  margin-left: 2.14285714em;\n  list-style-type: none;\n}\n.fa-ul > li {\n  position: relative;\n}\n.fa-li {\n  position: absolute;\n  left: -2.14285714em;\n  width: 2.14285714em;\n  top: 0.14285714em;\n  text-align: center;\n}\n.fa-li.fa-lg {\n  left: -1.85714286em;\n}\n.fa-border {\n  padding: .2em .25em .15em;\n  border: solid 0.08em #eeeeee;\n  border-radius: .1em;\n}\n.fa-pull-left {\n  float: left;\n}\n.fa-pull-right {\n  float: right;\n}\n.fa.fa-pull-left {\n  margin-right: .3em;\n}\n.fa.fa-pull-right {\n  margin-left: .3em;\n}\n/* Deprecated as of 4.4.0 */\n.pull-right {\n  float: right;\n}\n.pull-left {\n  float: left;\n}\n.fa.pull-left {\n  margin-right: .3em;\n}\n.fa.pull-right {\n  margin-left: .3em;\n}\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n  animation: fa-spin 2s infinite linear;\n}\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n  animation: fa-spin 1s infinite steps(8);\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(359deg);\n    transform: rotate(359deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(359deg);\n    transform: rotate(359deg);\n  }\n}\n.fa-rotate-90 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";\n  -webkit-transform: rotate(90deg);\n  -ms-transform: rotate(90deg);\n  transform: rotate(90deg);\n}\n.fa-rotate-180 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";\n  -webkit-transform: rotate(180deg);\n  -ms-transform: rotate(180deg);\n  transform: rotate(180deg);\n}\n.fa-rotate-270 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";\n  -webkit-transform: rotate(270deg);\n  -ms-transform: rotate(270deg);\n  transform: rotate(270deg);\n}\n.fa-flip-horizontal {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";\n  -webkit-transform: scale(-1, 1);\n  -ms-transform: scale(-1, 1);\n  transform: scale(-1, 1);\n}\n.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(1, -1);\n  -ms-transform: scale(1, -1);\n  transform: scale(1, -1);\n}\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical {\n  filter: none;\n}\n.fa-stack {\n  position: relative;\n  display: inline-block;\n  width: 2em;\n  height: 2em;\n  line-height: 2em;\n  vertical-align: middle;\n}\n.fa-stack-1x,\n.fa-stack-2x {\n  position: absolute;\n  left: 0;\n  width: 100%;\n  text-align: center;\n}\n.fa-stack-1x {\n  line-height: inherit;\n}\n.fa-stack-2x {\n  font-size: 2em;\n}\n.fa-inverse {\n  color: #ffffff;\n}\n/* Font Awesome uses the Unicode Private Use Area (PUA) to ensure screen\n   readers do not read off random characters that represent icons */\n.fa-glass:before {\n  content: "\\f000";\n}\n.fa-music:before {\n  content: "\\f001";\n}\n.fa-search:before {\n  content: "\\f002";\n}\n.fa-envelope-o:before {\n  content: "\\f003";\n}\n.fa-heart:before {\n  content: "\\f004";\n}\n.fa-star:before {\n  content: "\\f005";\n}\n.fa-star-o:before {\n  content: "\\f006";\n}\n.fa-user:before {\n  content: "\\f007";\n}\n.fa-film:before {\n  content: "\\f008";\n}\n.fa-th-large:before {\n  content: "\\f009";\n}\n.fa-th:before {\n  content: "\\f00a";\n}\n.fa-th-list:before {\n  content: "\\f00b";\n}\n.fa-check:before {\n  content: "\\f00c";\n}\n.fa-remove:before,\n.fa-close:before,\n.fa-times:before {\n  content: "\\f00d";\n}\n.fa-search-plus:before {\n  content: "\\f00e";\n}\n.fa-search-minus:before {\n  content: "\\f010";\n}\n.fa-power-off:before {\n  content: "\\f011";\n}\n.fa-signal:before {\n  content: "\\f012";\n}\n.fa-gear:before,\n.fa-cog:before {\n  content: "\\f013";\n}\n.fa-trash-o:before {\n  content: "\\f014";\n}\n.fa-home:before {\n  content: "\\f015";\n}\n.fa-file-o:before {\n  content: "\\f016";\n}\n.fa-clock-o:before {\n  content: "\\f017";\n}\n.fa-road:before {\n  content: "\\f018";\n}\n.fa-download:before {\n  content: "\\f019";\n}\n.fa-arrow-circle-o-down:before {\n  content: "\\f01a";\n}\n.fa-arrow-circle-o-up:before {\n  content: "\\f01b";\n}\n.fa-inbox:before {\n  content: "\\f01c";\n}\n.fa-play-circle-o:before {\n  content: "\\f01d";\n}\n.fa-rotate-right:before,\n.fa-repeat:before {\n  content: "\\f01e";\n}\n.fa-refresh:before {\n  content: "\\f021";\n}\n.fa-list-alt:before {\n  content: "\\f022";\n}\n.fa-lock:before {\n  content: "\\f023";\n}\n.fa-flag:before {\n  content: "\\f024";\n}\n.fa-headphones:before {\n  content: "\\f025";\n}\n.fa-volume-off:before {\n  content: "\\f026";\n}\n.fa-volume-down:before {\n  content: "\\f027";\n}\n.fa-volume-up:before {\n  content: "\\f028";\n}\n.fa-qrcode:before {\n  content: "\\f029";\n}\n.fa-barcode:before {\n  content: "\\f02a";\n}\n.fa-tag:before {\n  content: "\\f02b";\n}\n.fa-tags:before {\n  content: "\\f02c";\n}\n.fa-book:before {\n  content: "\\f02d";\n}\n.fa-bookmark:before {\n  content: "\\f02e";\n}\n.fa-print:before {\n  content: "\\f02f";\n}\n.fa-camera:before {\n  content: "\\f030";\n}\n.fa-font:before {\n  content: "\\f031";\n}\n.fa-bold:before {\n  content: "\\f032";\n}\n.fa-italic:before {\n  content: "\\f033";\n}\n.fa-text-height:before {\n  content: "\\f034";\n}\n.fa-text-width:before {\n  content: "\\f035";\n}\n.fa-align-left:before {\n  content: "\\f036";\n}\n.fa-align-center:before {\n  content: "\\f037";\n}\n.fa-align-right:before {\n  content: "\\f038";\n}\n.fa-align-justify:before {\n  content: "\\f039";\n}\n.fa-list:before {\n  content: "\\f03a";\n}\n.fa-dedent:before,\n.fa-outdent:before {\n  content: "\\f03b";\n}\n.fa-indent:before {\n  content: "\\f03c";\n}\n.fa-video-camera:before {\n  content: "\\f03d";\n}\n.fa-photo:before,\n.fa-image:before,\n.fa-picture-o:before {\n  content: "\\f03e";\n}\n.fa-pencil:before {\n  content: "\\f040";\n}\n.fa-map-marker:before {\n  content: "\\f041";\n}\n.fa-adjust:before {\n  content: "\\f042";\n}\n.fa-tint:before {\n  content: "\\f043";\n}\n.fa-edit:before,\n.fa-pencil-square-o:before {\n  content: "\\f044";\n}\n.fa-share-square-o:before {\n  content: "\\f045";\n}\n.fa-check-square-o:before {\n  content: "\\f046";\n}\n.fa-arrows:before {\n  content: "\\f047";\n}\n.fa-step-backward:before {\n  content: "\\f048";\n}\n.fa-fast-backward:before {\n  content: "\\f049";\n}\n.fa-backward:before {\n  content: "\\f04a";\n}\n.fa-play:before {\n  content: "\\f04b";\n}\n.fa-pause:before {\n  content: "\\f04c";\n}\n.fa-stop:before {\n  content: "\\f04d";\n}\n.fa-forward:before {\n  content: "\\f04e";\n}\n.fa-fast-forward:before {\n  content: "\\f050";\n}\n.fa-step-forward:before {\n  content: "\\f051";\n}\n.fa-eject:before {\n  content: "\\f052";\n}\n.fa-chevron-left:before {\n  content: "\\f053";\n}\n.fa-chevron-right:before {\n  content: "\\f054";\n}\n.fa-plus-circle:before {\n  content: "\\f055";\n}\n.fa-minus-circle:before {\n  content: "\\f056";\n}\n.fa-times-circle:before {\n  content: "\\f057";\n}\n.fa-check-circle:before {\n  content: "\\f058";\n}\n.fa-question-circle:before {\n  content: "\\f059";\n}\n.fa-info-circle:before {\n  content: "\\f05a";\n}\n.fa-crosshairs:before {\n  content: "\\f05b";\n}\n.fa-times-circle-o:before {\n  content: "\\f05c";\n}\n.fa-check-circle-o:before {\n  content: "\\f05d";\n}\n.fa-ban:before {\n  content: "\\f05e";\n}\n.fa-arrow-left:before {\n  content: "\\f060";\n}\n.fa-arrow-right:before {\n  content: "\\f061";\n}\n.fa-arrow-up:before {\n  content: "\\f062";\n}\n.fa-arrow-down:before {\n  content: "\\f063";\n}\n.fa-mail-forward:before,\n.fa-share:before {\n  content: "\\f064";\n}\n.fa-expand:before {\n  content: "\\f065";\n}\n.fa-compress:before {\n  content: "\\f066";\n}\n.fa-plus:before {\n  content: "\\f067";\n}\n.fa-minus:before {\n  content: "\\f068";\n}\n.fa-asterisk:before {\n  content: "\\f069";\n}\n.fa-exclamation-circle:before {\n  content: "\\f06a";\n}\n.fa-gift:before {\n  content: "\\f06b";\n}\n.fa-leaf:before {\n  content: "\\f06c";\n}\n.fa-fire:before {\n  content: "\\f06d";\n}\n.fa-eye:before {\n  content: "\\f06e";\n}\n.fa-eye-slash:before {\n  content: "\\f070";\n}\n.fa-warning:before,\n.fa-exclamation-triangle:before {\n  content: "\\f071";\n}\n.fa-plane:before {\n  content: "\\f072";\n}\n.fa-calendar:before {\n  content: "\\f073";\n}\n.fa-random:before {\n  content: "\\f074";\n}\n.fa-comment:before {\n  content: "\\f075";\n}\n.fa-magnet:before {\n  content: "\\f076";\n}\n.fa-chevron-up:before {\n  content: "\\f077";\n}\n.fa-chevron-down:before {\n  content: "\\f078";\n}\n.fa-retweet:before {\n  content: "\\f079";\n}\n.fa-shopping-cart:before {\n  content: "\\f07a";\n}\n.fa-folder:before {\n  content: "\\f07b";\n}\n.fa-folder-open:before {\n  content: "\\f07c";\n}\n.fa-arrows-v:before {\n  content: "\\f07d";\n}\n.fa-arrows-h:before {\n  content: "\\f07e";\n}\n.fa-bar-chart-o:before,\n.fa-bar-chart:before {\n  content: "\\f080";\n}\n.fa-twitter-square:before {\n  content: "\\f081";\n}\n.fa-facebook-square:before {\n  content: "\\f082";\n}\n.fa-camera-retro:before {\n  content: "\\f083";\n}\n.fa-key:before {\n  content: "\\f084";\n}\n.fa-gears:before,\n.fa-cogs:before {\n  content: "\\f085";\n}\n.fa-comments:before {\n  content: "\\f086";\n}\n.fa-thumbs-o-up:before {\n  content: "\\f087";\n}\n.fa-thumbs-o-down:before {\n  content: "\\f088";\n}\n.fa-star-half:before {\n  content: "\\f089";\n}\n.fa-heart-o:before {\n  content: "\\f08a";\n}\n.fa-sign-out:before {\n  content: "\\f08b";\n}\n.fa-linkedin-square:before {\n  content: "\\f08c";\n}\n.fa-thumb-tack:before {\n  content: "\\f08d";\n}\n.fa-external-link:before {\n  content: "\\f08e";\n}\n.fa-sign-in:before {\n  content: "\\f090";\n}\n.fa-trophy:before {\n  content: "\\f091";\n}\n.fa-github-square:before {\n  content: "\\f092";\n}\n.fa-upload:before {\n  content: "\\f093";\n}\n.fa-lemon-o:before {\n  content: "\\f094";\n}\n.fa-phone:before {\n  content: "\\f095";\n}\n.fa-square-o:before {\n  content: "\\f096";\n}\n.fa-bookmark-o:before {\n  content: "\\f097";\n}\n.fa-phone-square:before {\n  content: "\\f098";\n}\n.fa-twitter:before {\n  content: "\\f099";\n}\n.fa-facebook-f:before,\n.fa-facebook:before {\n  content: "\\f09a";\n}\n.fa-github:before {\n  content: "\\f09b";\n}\n.fa-unlock:before {\n  content: "\\f09c";\n}\n.fa-credit-card:before {\n  content: "\\f09d";\n}\n.fa-feed:before,\n.fa-rss:before {\n  content: "\\f09e";\n}\n.fa-hdd-o:before {\n  content: "\\f0a0";\n}\n.fa-bullhorn:before {\n  content: "\\f0a1";\n}\n.fa-bell:before {\n  content: "\\f0f3";\n}\n.fa-certificate:before {\n  content: "\\f0a3";\n}\n.fa-hand-o-right:before {\n  content: "\\f0a4";\n}\n.fa-hand-o-left:before {\n  content: "\\f0a5";\n}\n.fa-hand-o-up:before {\n  content: "\\f0a6";\n}\n.fa-hand-o-down:before {\n  content: "\\f0a7";\n}\n.fa-arrow-circle-left:before {\n  content: "\\f0a8";\n}\n.fa-arrow-circle-right:before {\n  content: "\\f0a9";\n}\n.fa-arrow-circle-up:before {\n  content: "\\f0aa";\n}\n.fa-arrow-circle-down:before {\n  content: "\\f0ab";\n}\n.fa-globe:before {\n  content: "\\f0ac";\n}\n.fa-wrench:before {\n  content: "\\f0ad";\n}\n.fa-tasks:before {\n  content: "\\f0ae";\n}\n.fa-filter:before {\n  content: "\\f0b0";\n}\n.fa-briefcase:before {\n  content: "\\f0b1";\n}\n.fa-arrows-alt:before {\n  content: "\\f0b2";\n}\n.fa-group:before,\n.fa-users:before {\n  content: "\\f0c0";\n}\n.fa-chain:before,\n.fa-link:before {\n  content: "\\f0c1";\n}\n.fa-cloud:before {\n  content: "\\f0c2";\n}\n.fa-flask:before {\n  content: "\\f0c3";\n}\n.fa-cut:before,\n.fa-scissors:before {\n  content: "\\f0c4";\n}\n.fa-copy:before,\n.fa-files-o:before {\n  content: "\\f0c5";\n}\n.fa-paperclip:before {\n  content: "\\f0c6";\n}\n.fa-save:before,\n.fa-floppy-o:before {\n  content: "\\f0c7";\n}\n.fa-square:before {\n  content: "\\f0c8";\n}\n.fa-navicon:before,\n.fa-reorder:before,\n.fa-bars:before {\n  content: "\\f0c9";\n}\n.fa-list-ul:before {\n  content: "\\f0ca";\n}\n.fa-list-ol:before {\n  content: "\\f0cb";\n}\n.fa-strikethrough:before {\n  content: "\\f0cc";\n}\n.fa-underline:before {\n  content: "\\f0cd";\n}\n.fa-table:before {\n  content: "\\f0ce";\n}\n.fa-magic:before {\n  content: "\\f0d0";\n}\n.fa-truck:before {\n  content: "\\f0d1";\n}\n.fa-pinterest:before {\n  content: "\\f0d2";\n}\n.fa-pinterest-square:before {\n  content: "\\f0d3";\n}\n.fa-google-plus-square:before {\n  content: "\\f0d4";\n}\n.fa-google-plus:before {\n  content: "\\f0d5";\n}\n.fa-money:before {\n  content: "\\f0d6";\n}\n.fa-caret-down:before {\n  content: "\\f0d7";\n}\n.fa-caret-up:before {\n  content: "\\f0d8";\n}\n.fa-caret-left:before {\n  content: "\\f0d9";\n}\n.fa-caret-right:before {\n  content: "\\f0da";\n}\n.fa-columns:before {\n  content: "\\f0db";\n}\n.fa-unsorted:before,\n.fa-sort:before {\n  content: "\\f0dc";\n}\n.fa-sort-down:before,\n.fa-sort-desc:before {\n  content: "\\f0dd";\n}\n.fa-sort-up:before,\n.fa-sort-asc:before {\n  content: "\\f0de";\n}\n.fa-envelope:before {\n  content: "\\f0e0";\n}\n.fa-linkedin:before {\n  content: "\\f0e1";\n}\n.fa-rotate-left:before,\n.fa-undo:before {\n  content: "\\f0e2";\n}\n.fa-legal:before,\n.fa-gavel:before {\n  content: "\\f0e3";\n}\n.fa-dashboard:before,\n.fa-tachometer:before {\n  content: "\\f0e4";\n}\n.fa-comment-o:before {\n  content: "\\f0e5";\n}\n.fa-comments-o:before {\n  content: "\\f0e6";\n}\n.fa-flash:before,\n.fa-bolt:before {\n  content: "\\f0e7";\n}\n.fa-sitemap:before {\n  content: "\\f0e8";\n}\n.fa-umbrella:before {\n  content: "\\f0e9";\n}\n.fa-paste:before,\n.fa-clipboard:before {\n  content: "\\f0ea";\n}\n.fa-lightbulb-o:before {\n  content: "\\f0eb";\n}\n.fa-exchange:before {\n  content: "\\f0ec";\n}\n.fa-cloud-download:before {\n  content: "\\f0ed";\n}\n.fa-cloud-upload:before {\n  content: "\\f0ee";\n}\n.fa-user-md:before {\n  content: "\\f0f0";\n}\n.fa-stethoscope:before {\n  content: "\\f0f1";\n}\n.fa-suitcase:before {\n  content: "\\f0f2";\n}\n.fa-bell-o:before {\n  content: "\\f0a2";\n}\n.fa-coffee:before {\n  content: "\\f0f4";\n}\n.fa-cutlery:before {\n  content: "\\f0f5";\n}\n.fa-file-text-o:before {\n  content: "\\f0f6";\n}\n.fa-building-o:before {\n  content: "\\f0f7";\n}\n.fa-hospital-o:before {\n  content: "\\f0f8";\n}\n.fa-ambulance:before {\n  content: "\\f0f9";\n}\n.fa-medkit:before {\n  content: "\\f0fa";\n}\n.fa-fighter-jet:before {\n  content: "\\f0fb";\n}\n.fa-beer:before {\n  content: "\\f0fc";\n}\n.fa-h-square:before {\n  content: "\\f0fd";\n}\n.fa-plus-square:before {\n  content: "\\f0fe";\n}\n.fa-angle-double-left:before {\n  content: "\\f100";\n}\n.fa-angle-double-right:before {\n  content: "\\f101";\n}\n.fa-angle-double-up:before {\n  content: "\\f102";\n}\n.fa-angle-double-down:before {\n  content: "\\f103";\n}\n.fa-angle-left:before {\n  content: "\\f104";\n}\n.fa-angle-right:before {\n  content: "\\f105";\n}\n.fa-angle-up:before {\n  content: "\\f106";\n}\n.fa-angle-down:before {\n  content: "\\f107";\n}\n.fa-desktop:before {\n  content: "\\f108";\n}\n.fa-laptop:before {\n  content: "\\f109";\n}\n.fa-tablet:before {\n  content: "\\f10a";\n}\n.fa-mobile-phone:before,\n.fa-mobile:before {\n  content: "\\f10b";\n}\n.fa-circle-o:before {\n  content: "\\f10c";\n}\n.fa-quote-left:before {\n  content: "\\f10d";\n}\n.fa-quote-right:before {\n  content: "\\f10e";\n}\n.fa-spinner:before {\n  content: "\\f110";\n}\n.fa-circle:before {\n  content: "\\f111";\n}\n.fa-mail-reply:before,\n.fa-reply:before {\n  content: "\\f112";\n}\n.fa-github-alt:before {\n  content: "\\f113";\n}\n.fa-folder-o:before {\n  content: "\\f114";\n}\n.fa-folder-open-o:before {\n  content: "\\f115";\n}\n.fa-smile-o:before {\n  content: "\\f118";\n}\n.fa-frown-o:before {\n  content: "\\f119";\n}\n.fa-meh-o:before {\n  content: "\\f11a";\n}\n.fa-gamepad:before {\n  content: "\\f11b";\n}\n.fa-keyboard-o:before {\n  content: "\\f11c";\n}\n.fa-flag-o:before {\n  content: "\\f11d";\n}\n.fa-flag-checkered:before {\n  content: "\\f11e";\n}\n.fa-terminal:before {\n  content: "\\f120";\n}\n.fa-code:before {\n  content: "\\f121";\n}\n.fa-mail-reply-all:before,\n.fa-reply-all:before {\n  content: "\\f122";\n}\n.fa-star-half-empty:before,\n.fa-star-half-full:before,\n.fa-star-half-o:before {\n  content: "\\f123";\n}\n.fa-location-arrow:before {\n  content: "\\f124";\n}\n.fa-crop:before {\n  content: "\\f125";\n}\n.fa-code-fork:before {\n  content: "\\f126";\n}\n.fa-unlink:before,\n.fa-chain-broken:before {\n  content: "\\f127";\n}\n.fa-question:before {\n  content: "\\f128";\n}\n.fa-info:before {\n  content: "\\f129";\n}\n.fa-exclamation:before {\n  content: "\\f12a";\n}\n.fa-superscript:before {\n  content: "\\f12b";\n}\n.fa-subscript:before {\n  content: "\\f12c";\n}\n.fa-eraser:before {\n  content: "\\f12d";\n}\n.fa-puzzle-piece:before {\n  content: "\\f12e";\n}\n.fa-microphone:before {\n  content: "\\f130";\n}\n.fa-microphone-slash:before {\n  content: "\\f131";\n}\n.fa-shield:before {\n  content: "\\f132";\n}\n.fa-calendar-o:before {\n  content: "\\f133";\n}\n.fa-fire-extinguisher:before {\n  content: "\\f134";\n}\n.fa-rocket:before {\n  content: "\\f135";\n}\n.fa-maxcdn:before {\n  content: "\\f136";\n}\n.fa-chevron-circle-left:before {\n  content: "\\f137";\n}\n.fa-chevron-circle-right:before {\n  content: "\\f138";\n}\n.fa-chevron-circle-up:before {\n  content: "\\f139";\n}\n.fa-chevron-circle-down:before {\n  content: "\\f13a";\n}\n.fa-html5:before {\n  content: "\\f13b";\n}\n.fa-css3:before {\n  content: "\\f13c";\n}\n.fa-anchor:before {\n  content: "\\f13d";\n}\n.fa-unlock-alt:before {\n  content: "\\f13e";\n}\n.fa-bullseye:before {\n  content: "\\f140";\n}\n.fa-ellipsis-h:before {\n  content: "\\f141";\n}\n.fa-ellipsis-v:before {\n  content: "\\f142";\n}\n.fa-rss-square:before {\n  content: "\\f143";\n}\n.fa-play-circle:before {\n  content: "\\f144";\n}\n.fa-ticket:before {\n  content: "\\f145";\n}\n.fa-minus-square:before {\n  content: "\\f146";\n}\n.fa-minus-square-o:before {\n  content: "\\f147";\n}\n.fa-level-up:before {\n  content: "\\f148";\n}\n.fa-level-down:before {\n  content: "\\f149";\n}\n.fa-check-square:before {\n  content: "\\f14a";\n}\n.fa-pencil-square:before {\n  content: "\\f14b";\n}\n.fa-external-link-square:before {\n  content: "\\f14c";\n}\n.fa-share-square:before {\n  content: "\\f14d";\n}\n.fa-compass:before {\n  content: "\\f14e";\n}\n.fa-toggle-down:before,\n.fa-caret-square-o-down:before {\n  content: "\\f150";\n}\n.fa-toggle-up:before,\n.fa-caret-square-o-up:before {\n  content: "\\f151";\n}\n.fa-toggle-right:before,\n.fa-caret-square-o-right:before {\n  content: "\\f152";\n}\n.fa-euro:before,\n.fa-eur:before {\n  content: "\\f153";\n}\n.fa-gbp:before {\n  content: "\\f154";\n}\n.fa-dollar:before,\n.fa-usd:before {\n  content: "\\f155";\n}\n.fa-rupee:before,\n.fa-inr:before {\n  content: "\\f156";\n}\n.fa-cny:before,\n.fa-rmb:before,\n.fa-yen:before,\n.fa-jpy:before {\n  content: "\\f157";\n}\n.fa-ruble:before,\n.fa-rouble:before,\n.fa-rub:before {\n  content: "\\f158";\n}\n.fa-won:before,\n.fa-krw:before {\n  content: "\\f159";\n}\n.fa-bitcoin:before,\n.fa-btc:before {\n  content: "\\f15a";\n}\n.fa-file:before {\n  content: "\\f15b";\n}\n.fa-file-text:before {\n  content: "\\f15c";\n}\n.fa-sort-alpha-asc:before {\n  content: "\\f15d";\n}\n.fa-sort-alpha-desc:before {\n  content: "\\f15e";\n}\n.fa-sort-amount-asc:before {\n  content: "\\f160";\n}\n.fa-sort-amount-desc:before {\n  content: "\\f161";\n}\n.fa-sort-numeric-asc:before {\n  content: "\\f162";\n}\n.fa-sort-numeric-desc:before {\n  content: "\\f163";\n}\n.fa-thumbs-up:before {\n  content: "\\f164";\n}\n.fa-thumbs-down:before {\n  content: "\\f165";\n}\n.fa-youtube-square:before {\n  content: "\\f166";\n}\n.fa-youtube:before {\n  content: "\\f167";\n}\n.fa-xing:before {\n  content: "\\f168";\n}\n.fa-xing-square:before {\n  content: "\\f169";\n}\n.fa-youtube-play:before {\n  content: "\\f16a";\n}\n.fa-dropbox:before {\n  content: "\\f16b";\n}\n.fa-stack-overflow:before {\n  content: "\\f16c";\n}\n.fa-instagram:before {\n  content: "\\f16d";\n}\n.fa-flickr:before {\n  content: "\\f16e";\n}\n.fa-adn:before {\n  content: "\\f170";\n}\n.fa-bitbucket:before {\n  content: "\\f171";\n}\n.fa-bitbucket-square:before {\n  content: "\\f172";\n}\n.fa-tumblr:before {\n  content: "\\f173";\n}\n.fa-tumblr-square:before {\n  content: "\\f174";\n}\n.fa-long-arrow-down:before {\n  content: "\\f175";\n}\n.fa-long-arrow-up:before {\n  content: "\\f176";\n}\n.fa-long-arrow-left:before {\n  content: "\\f177";\n}\n.fa-long-arrow-right:before {\n  content: "\\f178";\n}\n.fa-apple:before {\n  content: "\\f179";\n}\n.fa-windows:before {\n  content: "\\f17a";\n}\n.fa-android:before {\n  content: "\\f17b";\n}\n.fa-linux:before {\n  content: "\\f17c";\n}\n.fa-dribbble:before {\n  content: "\\f17d";\n}\n.fa-skype:before {\n  content: "\\f17e";\n}\n.fa-foursquare:before {\n  content: "\\f180";\n}\n.fa-trello:before {\n  content: "\\f181";\n}\n.fa-female:before {\n  content: "\\f182";\n}\n.fa-male:before {\n  content: "\\f183";\n}\n.fa-gittip:before,\n.fa-gratipay:before {\n  content: "\\f184";\n}\n.fa-sun-o:before {\n  content: "\\f185";\n}\n.fa-moon-o:before {\n  content: "\\f186";\n}\n.fa-archive:before {\n  content: "\\f187";\n}\n.fa-bug:before {\n  content: "\\f188";\n}\n.fa-vk:before {\n  content: "\\f189";\n}\n.fa-weibo:before {\n  content: "\\f18a";\n}\n.fa-renren:before {\n  content: "\\f18b";\n}\n.fa-pagelines:before {\n  content: "\\f18c";\n}\n.fa-stack-exchange:before {\n  content: "\\f18d";\n}\n.fa-arrow-circle-o-right:before {\n  content: "\\f18e";\n}\n.fa-arrow-circle-o-left:before {\n  content: "\\f190";\n}\n.fa-toggle-left:before,\n.fa-caret-square-o-left:before {\n  content: "\\f191";\n}\n.fa-dot-circle-o:before {\n  content: "\\f192";\n}\n.fa-wheelchair:before {\n  content: "\\f193";\n}\n.fa-vimeo-square:before {\n  content: "\\f194";\n}\n.fa-turkish-lira:before,\n.fa-try:before {\n  content: "\\f195";\n}\n.fa-plus-square-o:before {\n  content: "\\f196";\n}\n.fa-space-shuttle:before {\n  content: "\\f197";\n}\n.fa-slack:before {\n  content: "\\f198";\n}\n.fa-envelope-square:before {\n  content: "\\f199";\n}\n.fa-wordpress:before {\n  content: "\\f19a";\n}\n.fa-openid:before {\n  content: "\\f19b";\n}\n.fa-institution:before,\n.fa-bank:before,\n.fa-university:before {\n  content: "\\f19c";\n}\n.fa-mortar-board:before,\n.fa-graduation-cap:before {\n  content: "\\f19d";\n}\n.fa-yahoo:before {\n  content: "\\f19e";\n}\n.fa-google:before {\n  content: "\\f1a0";\n}\n.fa-reddit:before {\n  content: "\\f1a1";\n}\n.fa-reddit-square:before {\n  content: "\\f1a2";\n}\n.fa-stumbleupon-circle:before {\n  content: "\\f1a3";\n}\n.fa-stumbleupon:before {\n  content: "\\f1a4";\n}\n.fa-delicious:before {\n  content: "\\f1a5";\n}\n.fa-digg:before {\n  content: "\\f1a6";\n}\n.fa-pied-piper-pp:before {\n  content: "\\f1a7";\n}\n.fa-pied-piper-alt:before {\n  content: "\\f1a8";\n}\n.fa-drupal:before {\n  content: "\\f1a9";\n}\n.fa-joomla:before {\n  content: "\\f1aa";\n}\n.fa-language:before {\n  content: "\\f1ab";\n}\n.fa-fax:before {\n  content: "\\f1ac";\n}\n.fa-building:before {\n  content: "\\f1ad";\n}\n.fa-child:before {\n  content: "\\f1ae";\n}\n.fa-paw:before {\n  content: "\\f1b0";\n}\n.fa-spoon:before {\n  content: "\\f1b1";\n}\n.fa-cube:before {\n  content: "\\f1b2";\n}\n.fa-cubes:before {\n  content: "\\f1b3";\n}\n.fa-behance:before {\n  content: "\\f1b4";\n}\n.fa-behance-square:before {\n  content: "\\f1b5";\n}\n.fa-steam:before {\n  content: "\\f1b6";\n}\n.fa-steam-square:before {\n  content: "\\f1b7";\n}\n.fa-recycle:before {\n  content: "\\f1b8";\n}\n.fa-automobile:before,\n.fa-car:before {\n  content: "\\f1b9";\n}\n.fa-cab:before,\n.fa-taxi:before {\n  content: "\\f1ba";\n}\n.fa-tree:before {\n  content: "\\f1bb";\n}\n.fa-spotify:before {\n  content: "\\f1bc";\n}\n.fa-deviantart:before {\n  content: "\\f1bd";\n}\n.fa-soundcloud:before {\n  content: "\\f1be";\n}\n.fa-database:before {\n  content: "\\f1c0";\n}\n.fa-file-pdf-o:before {\n  content: "\\f1c1";\n}\n.fa-file-word-o:before {\n  content: "\\f1c2";\n}\n.fa-file-excel-o:before {\n  content: "\\f1c3";\n}\n.fa-file-powerpoint-o:before {\n  content: "\\f1c4";\n}\n.fa-file-photo-o:before,\n.fa-file-picture-o:before,\n.fa-file-image-o:before {\n  content: "\\f1c5";\n}\n.fa-file-zip-o:before,\n.fa-file-archive-o:before {\n  content: "\\f1c6";\n}\n.fa-file-sound-o:before,\n.fa-file-audio-o:before {\n  content: "\\f1c7";\n}\n.fa-file-movie-o:before,\n.fa-file-video-o:before {\n  content: "\\f1c8";\n}\n.fa-file-code-o:before {\n  content: "\\f1c9";\n}\n.fa-vine:before {\n  content: "\\f1ca";\n}\n.fa-codepen:before {\n  content: "\\f1cb";\n}\n.fa-jsfiddle:before {\n  content: "\\f1cc";\n}\n.fa-life-bouy:before,\n.fa-life-buoy:before,\n.fa-life-saver:before,\n.fa-support:before,\n.fa-life-ring:before {\n  content: "\\f1cd";\n}\n.fa-circle-o-notch:before {\n  content: "\\f1ce";\n}\n.fa-ra:before,\n.fa-resistance:before,\n.fa-rebel:before {\n  content: "\\f1d0";\n}\n.fa-ge:before,\n.fa-empire:before {\n  content: "\\f1d1";\n}\n.fa-git-square:before {\n  content: "\\f1d2";\n}\n.fa-git:before {\n  content: "\\f1d3";\n}\n.fa-y-combinator-square:before,\n.fa-yc-square:before,\n.fa-hacker-news:before {\n  content: "\\f1d4";\n}\n.fa-tencent-weibo:before {\n  content: "\\f1d5";\n}\n.fa-qq:before {\n  content: "\\f1d6";\n}\n.fa-wechat:before,\n.fa-weixin:before {\n  content: "\\f1d7";\n}\n.fa-send:before,\n.fa-paper-plane:before {\n  content: "\\f1d8";\n}\n.fa-send-o:before,\n.fa-paper-plane-o:before {\n  content: "\\f1d9";\n}\n.fa-history:before {\n  content: "\\f1da";\n}\n.fa-circle-thin:before {\n  content: "\\f1db";\n}\n.fa-header:before {\n  content: "\\f1dc";\n}\n.fa-paragraph:before {\n  content: "\\f1dd";\n}\n.fa-sliders:before {\n  content: "\\f1de";\n}\n.fa-share-alt:before {\n  content: "\\f1e0";\n}\n.fa-share-alt-square:before {\n  content: "\\f1e1";\n}\n.fa-bomb:before {\n  content: "\\f1e2";\n}\n.fa-soccer-ball-o:before,\n.fa-futbol-o:before {\n  content: "\\f1e3";\n}\n.fa-tty:before {\n  content: "\\f1e4";\n}\n.fa-binoculars:before {\n  content: "\\f1e5";\n}\n.fa-plug:before {\n  content: "\\f1e6";\n}\n.fa-slideshare:before {\n  content: "\\f1e7";\n}\n.fa-twitch:before {\n  content: "\\f1e8";\n}\n.fa-yelp:before {\n  content: "\\f1e9";\n}\n.fa-newspaper-o:before {\n  content: "\\f1ea";\n}\n.fa-wifi:before {\n  content: "\\f1eb";\n}\n.fa-calculator:before {\n  content: "\\f1ec";\n}\n.fa-paypal:before {\n  content: "\\f1ed";\n}\n.fa-google-wallet:before {\n  content: "\\f1ee";\n}\n.fa-cc-visa:before {\n  content: "\\f1f0";\n}\n.fa-cc-mastercard:before {\n  content: "\\f1f1";\n}\n.fa-cc-discover:before {\n  content: "\\f1f2";\n}\n.fa-cc-amex:before {\n  content: "\\f1f3";\n}\n.fa-cc-paypal:before {\n  content: "\\f1f4";\n}\n.fa-cc-stripe:before {\n  content: "\\f1f5";\n}\n.fa-bell-slash:before {\n  content: "\\f1f6";\n}\n.fa-bell-slash-o:before {\n  content: "\\f1f7";\n}\n.fa-trash:before {\n  content: "\\f1f8";\n}\n.fa-copyright:before {\n  content: "\\f1f9";\n}\n.fa-at:before {\n  content: "\\f1fa";\n}\n.fa-eyedropper:before {\n  content: "\\f1fb";\n}\n.fa-paint-brush:before {\n  content: "\\f1fc";\n}\n.fa-birthday-cake:before {\n  content: "\\f1fd";\n}\n.fa-area-chart:before {\n  content: "\\f1fe";\n}\n.fa-pie-chart:before {\n  content: "\\f200";\n}\n.fa-line-chart:before {\n  content: "\\f201";\n}\n.fa-lastfm:before {\n  content: "\\f202";\n}\n.fa-lastfm-square:before {\n  content: "\\f203";\n}\n.fa-toggle-off:before {\n  content: "\\f204";\n}\n.fa-toggle-on:before {\n  content: "\\f205";\n}\n.fa-bicycle:before {\n  content: "\\f206";\n}\n.fa-bus:before {\n  content: "\\f207";\n}\n.fa-ioxhost:before {\n  content: "\\f208";\n}\n.fa-angellist:before {\n  content: "\\f209";\n}\n.fa-cc:before {\n  content: "\\f20a";\n}\n.fa-shekel:before,\n.fa-sheqel:before,\n.fa-ils:before {\n  content: "\\f20b";\n}\n.fa-meanpath:before {\n  content: "\\f20c";\n}\n.fa-buysellads:before {\n  content: "\\f20d";\n}\n.fa-connectdevelop:before {\n  content: "\\f20e";\n}\n.fa-dashcube:before {\n  content: "\\f210";\n}\n.fa-forumbee:before {\n  content: "\\f211";\n}\n.fa-leanpub:before {\n  content: "\\f212";\n}\n.fa-sellsy:before {\n  content: "\\f213";\n}\n.fa-shirtsinbulk:before {\n  content: "\\f214";\n}\n.fa-simplybuilt:before {\n  content: "\\f215";\n}\n.fa-skyatlas:before {\n  content: "\\f216";\n}\n.fa-cart-plus:before {\n  content: "\\f217";\n}\n.fa-cart-arrow-down:before {\n  content: "\\f218";\n}\n.fa-diamond:before {\n  content: "\\f219";\n}\n.fa-ship:before {\n  content: "\\f21a";\n}\n.fa-user-secret:before {\n  content: "\\f21b";\n}\n.fa-motorcycle:before {\n  content: "\\f21c";\n}\n.fa-street-view:before {\n  content: "\\f21d";\n}\n.fa-heartbeat:before {\n  content: "\\f21e";\n}\n.fa-venus:before {\n  content: "\\f221";\n}\n.fa-mars:before {\n  content: "\\f222";\n}\n.fa-mercury:before {\n  content: "\\f223";\n}\n.fa-intersex:before,\n.fa-transgender:before {\n  content: "\\f224";\n}\n.fa-transgender-alt:before {\n  content: "\\f225";\n}\n.fa-venus-double:before {\n  content: "\\f226";\n}\n.fa-mars-double:before {\n  content: "\\f227";\n}\n.fa-venus-mars:before {\n  content: "\\f228";\n}\n.fa-mars-stroke:before {\n  content: "\\f229";\n}\n.fa-mars-stroke-v:before {\n  content: "\\f22a";\n}\n.fa-mars-stroke-h:before {\n  content: "\\f22b";\n}\n.fa-neuter:before {\n  content: "\\f22c";\n}\n.fa-genderless:before {\n  content: "\\f22d";\n}\n.fa-facebook-official:before {\n  content: "\\f230";\n}\n.fa-pinterest-p:before {\n  content: "\\f231";\n}\n.fa-whatsapp:before {\n  content: "\\f232";\n}\n.fa-server:before {\n  content: "\\f233";\n}\n.fa-user-plus:before {\n  content: "\\f234";\n}\n.fa-user-times:before {\n  content: "\\f235";\n}\n.fa-hotel:before,\n.fa-bed:before {\n  content: "\\f236";\n}\n.fa-viacoin:before {\n  content: "\\f237";\n}\n.fa-train:before {\n  content: "\\f238";\n}\n.fa-subway:before {\n  content: "\\f239";\n}\n.fa-medium:before {\n  content: "\\f23a";\n}\n.fa-yc:before,\n.fa-y-combinator:before {\n  content: "\\f23b";\n}\n.fa-optin-monster:before {\n  content: "\\f23c";\n}\n.fa-opencart:before {\n  content: "\\f23d";\n}\n.fa-expeditedssl:before {\n  content: "\\f23e";\n}\n.fa-battery-4:before,\n.fa-battery:before,\n.fa-battery-full:before {\n  content: "\\f240";\n}\n.fa-battery-3:before,\n.fa-battery-three-quarters:before {\n  content: "\\f241";\n}\n.fa-battery-2:before,\n.fa-battery-half:before {\n  content: "\\f242";\n}\n.fa-battery-1:before,\n.fa-battery-quarter:before {\n  content: "\\f243";\n}\n.fa-battery-0:before,\n.fa-battery-empty:before {\n  content: "\\f244";\n}\n.fa-mouse-pointer:before {\n  content: "\\f245";\n}\n.fa-i-cursor:before {\n  content: "\\f246";\n}\n.fa-object-group:before {\n  content: "\\f247";\n}\n.fa-object-ungroup:before {\n  content: "\\f248";\n}\n.fa-sticky-note:before {\n  content: "\\f249";\n}\n.fa-sticky-note-o:before {\n  content: "\\f24a";\n}\n.fa-cc-jcb:before {\n  content: "\\f24b";\n}\n.fa-cc-diners-club:before {\n  content: "\\f24c";\n}\n.fa-clone:before {\n  content: "\\f24d";\n}\n.fa-balance-scale:before {\n  content: "\\f24e";\n}\n.fa-hourglass-o:before {\n  content: "\\f250";\n}\n.fa-hourglass-1:before,\n.fa-hourglass-start:before {\n  content: "\\f251";\n}\n.fa-hourglass-2:before,\n.fa-hourglass-half:before {\n  content: "\\f252";\n}\n.fa-hourglass-3:before,\n.fa-hourglass-end:before {\n  content: "\\f253";\n}\n.fa-hourglass:before {\n  content: "\\f254";\n}\n.fa-hand-grab-o:before,\n.fa-hand-rock-o:before {\n  content: "\\f255";\n}\n.fa-hand-stop-o:before,\n.fa-hand-paper-o:before {\n  content: "\\f256";\n}\n.fa-hand-scissors-o:before {\n  content: "\\f257";\n}\n.fa-hand-lizard-o:before {\n  content: "\\f258";\n}\n.fa-hand-spock-o:before {\n  content: "\\f259";\n}\n.fa-hand-pointer-o:before {\n  content: "\\f25a";\n}\n.fa-hand-peace-o:before {\n  content: "\\f25b";\n}\n.fa-trademark:before {\n  content: "\\f25c";\n}\n.fa-registered:before {\n  content: "\\f25d";\n}\n.fa-creative-commons:before {\n  content: "\\f25e";\n}\n.fa-gg:before {\n  content: "\\f260";\n}\n.fa-gg-circle:before {\n  content: "\\f261";\n}\n.fa-tripadvisor:before {\n  content: "\\f262";\n}\n.fa-odnoklassniki:before {\n  content: "\\f263";\n}\n.fa-odnoklassniki-square:before {\n  content: "\\f264";\n}\n.fa-get-pocket:before {\n  content: "\\f265";\n}\n.fa-wikipedia-w:before {\n  content: "\\f266";\n}\n.fa-safari:before {\n  content: "\\f267";\n}\n.fa-chrome:before {\n  content: "\\f268";\n}\n.fa-firefox:before {\n  content: "\\f269";\n}\n.fa-opera:before {\n  content: "\\f26a";\n}\n.fa-internet-explorer:before {\n  content: "\\f26b";\n}\n.fa-tv:before,\n.fa-television:before {\n  content: "\\f26c";\n}\n.fa-contao:before {\n  content: "\\f26d";\n}\n.fa-500px:before {\n  content: "\\f26e";\n}\n.fa-amazon:before {\n  content: "\\f270";\n}\n.fa-calendar-plus-o:before {\n  content: "\\f271";\n}\n.fa-calendar-minus-o:before {\n  content: "\\f272";\n}\n.fa-calendar-times-o:before {\n  content: "\\f273";\n}\n.fa-calendar-check-o:before {\n  content: "\\f274";\n}\n.fa-industry:before {\n  content: "\\f275";\n}\n.fa-map-pin:before {\n  content: "\\f276";\n}\n.fa-map-signs:before {\n  content: "\\f277";\n}\n.fa-map-o:before {\n  content: "\\f278";\n}\n.fa-map:before {\n  content: "\\f279";\n}\n.fa-commenting:before {\n  content: "\\f27a";\n}\n.fa-commenting-o:before {\n  content: "\\f27b";\n}\n.fa-houzz:before {\n  content: "\\f27c";\n}\n.fa-vimeo:before {\n  content: "\\f27d";\n}\n.fa-black-tie:before {\n  content: "\\f27e";\n}\n.fa-fonticons:before {\n  content: "\\f280";\n}\n.fa-reddit-alien:before {\n  content: "\\f281";\n}\n.fa-edge:before {\n  content: "\\f282";\n}\n.fa-credit-card-alt:before {\n  content: "\\f283";\n}\n.fa-codiepie:before {\n  content: "\\f284";\n}\n.fa-modx:before {\n  content: "\\f285";\n}\n.fa-fort-awesome:before {\n  content: "\\f286";\n}\n.fa-usb:before {\n  content: "\\f287";\n}\n.fa-product-hunt:before {\n  content: "\\f288";\n}\n.fa-mixcloud:before {\n  content: "\\f289";\n}\n.fa-scribd:before {\n  content: "\\f28a";\n}\n.fa-pause-circle:before {\n  content: "\\f28b";\n}\n.fa-pause-circle-o:before {\n  content: "\\f28c";\n}\n.fa-stop-circle:before {\n  content: "\\f28d";\n}\n.fa-stop-circle-o:before {\n  content: "\\f28e";\n}\n.fa-shopping-bag:before {\n  content: "\\f290";\n}\n.fa-shopping-basket:before {\n  content: "\\f291";\n}\n.fa-hashtag:before {\n  content: "\\f292";\n}\n.fa-bluetooth:before {\n  content: "\\f293";\n}\n.fa-bluetooth-b:before {\n  content: "\\f294";\n}\n.fa-percent:before {\n  content: "\\f295";\n}\n.fa-gitlab:before {\n  content: "\\f296";\n}\n.fa-wpbeginner:before {\n  content: "\\f297";\n}\n.fa-wpforms:before {\n  content: "\\f298";\n}\n.fa-envira:before {\n  content: "\\f299";\n}\n.fa-universal-access:before {\n  content: "\\f29a";\n}\n.fa-wheelchair-alt:before {\n  content: "\\f29b";\n}\n.fa-question-circle-o:before {\n  content: "\\f29c";\n}\n.fa-blind:before {\n  content: "\\f29d";\n}\n.fa-audio-description:before {\n  content: "\\f29e";\n}\n.fa-volume-control-phone:before {\n  content: "\\f2a0";\n}\n.fa-braille:before {\n  content: "\\f2a1";\n}\n.fa-assistive-listening-systems:before {\n  content: "\\f2a2";\n}\n.fa-asl-interpreting:before,\n.fa-american-sign-language-interpreting:before {\n  content: "\\f2a3";\n}\n.fa-deafness:before,\n.fa-hard-of-hearing:before,\n.fa-deaf:before {\n  content: "\\f2a4";\n}\n.fa-glide:before {\n  content: "\\f2a5";\n}\n.fa-glide-g:before {\n  content: "\\f2a6";\n}\n.fa-signing:before,\n.fa-sign-language:before {\n  content: "\\f2a7";\n}\n.fa-low-vision:before {\n  content: "\\f2a8";\n}\n.fa-viadeo:before {\n  content: "\\f2a9";\n}\n.fa-viadeo-square:before {\n  content: "\\f2aa";\n}\n.fa-snapchat:before {\n  content: "\\f2ab";\n}\n.fa-snapchat-ghost:before {\n  content: "\\f2ac";\n}\n.fa-snapchat-square:before {\n  content: "\\f2ad";\n}\n.fa-pied-piper:before {\n  content: "\\f2ae";\n}\n.fa-first-order:before {\n  content: "\\f2b0";\n}\n.fa-yoast:before {\n  content: "\\f2b1";\n}\n.fa-themeisle:before {\n  content: "\\f2b2";\n}\n.fa-google-plus-circle:before,\n.fa-google-plus-official:before {\n  content: "\\f2b3";\n}\n.fa-fa:before,\n.fa-font-awesome:before {\n  content: "\\f2b4";\n}\n.fa-handshake-o:before {\n  content: "\\f2b5";\n}\n.fa-envelope-open:before {\n  content: "\\f2b6";\n}\n.fa-envelope-open-o:before {\n  content: "\\f2b7";\n}\n.fa-linode:before {\n  content: "\\f2b8";\n}\n.fa-address-book:before {\n  content: "\\f2b9";\n}\n.fa-address-book-o:before {\n  content: "\\f2ba";\n}\n.fa-vcard:before,\n.fa-address-card:before {\n  content: "\\f2bb";\n}\n.fa-vcard-o:before,\n.fa-address-card-o:before {\n  content: "\\f2bc";\n}\n.fa-user-circle:before {\n  content: "\\f2bd";\n}\n.fa-user-circle-o:before {\n  content: "\\f2be";\n}\n.fa-user-o:before {\n  content: "\\f2c0";\n}\n.fa-id-badge:before {\n  content: "\\f2c1";\n}\n.fa-drivers-license:before,\n.fa-id-card:before {\n  content: "\\f2c2";\n}\n.fa-drivers-license-o:before,\n.fa-id-card-o:before {\n  content: "\\f2c3";\n}\n.fa-quora:before {\n  content: "\\f2c4";\n}\n.fa-free-code-camp:before {\n  content: "\\f2c5";\n}\n.fa-telegram:before {\n  content: "\\f2c6";\n}\n.fa-thermometer-4:before,\n.fa-thermometer:before,\n.fa-thermometer-full:before {\n  content: "\\f2c7";\n}\n.fa-thermometer-3:before,\n.fa-thermometer-three-quarters:before {\n  content: "\\f2c8";\n}\n.fa-thermometer-2:before,\n.fa-thermometer-half:before {\n  content: "\\f2c9";\n}\n.fa-thermometer-1:before,\n.fa-thermometer-quarter:before {\n  content: "\\f2ca";\n}\n.fa-thermometer-0:before,\n.fa-thermometer-empty:before {\n  content: "\\f2cb";\n}\n.fa-shower:before {\n  content: "\\f2cc";\n}\n.fa-bathtub:before,\n.fa-s15:before,\n.fa-bath:before {\n  content: "\\f2cd";\n}\n.fa-podcast:before {\n  content: "\\f2ce";\n}\n.fa-window-maximize:before {\n  content: "\\f2d0";\n}\n.fa-window-minimize:before {\n  content: "\\f2d1";\n}\n.fa-window-restore:before {\n  content: "\\f2d2";\n}\n.fa-times-rectangle:before,\n.fa-window-close:before {\n  content: "\\f2d3";\n}\n.fa-times-rectangle-o:before,\n.fa-window-close-o:before {\n  content: "\\f2d4";\n}\n.fa-bandcamp:before {\n  content: "\\f2d5";\n}\n.fa-grav:before {\n  content: "\\f2d6";\n}\n.fa-etsy:before {\n  content: "\\f2d7";\n}\n.fa-imdb:before {\n  content: "\\f2d8";\n}\n.fa-ravelry:before {\n  content: "\\f2d9";\n}\n.fa-eercast:before {\n  content: "\\f2da";\n}\n.fa-microchip:before {\n  content: "\\f2db";\n}\n.fa-snowflake-o:before {\n  content: "\\f2dc";\n}\n.fa-superpowers:before {\n  content: "\\f2dd";\n}\n.fa-wpexplorer:before {\n  content: "\\f2de";\n}\n.fa-meetup:before {\n  content: "\\f2e0";\n}\n.sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  border: 0;\n}\n.sr-only-focusable:active,\n.sr-only-focusable:focus {\n  position: static;\n  width: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  clip: auto;\n}\n'],sourceRoot:""}]);const A=m},7113:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(94015),i=n.n(r),o=n(23645),a=n.n(o)()(i());a.push([e.id,".mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:grab;-webkit-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;box-sizing:border-box;background-color:transparent;cursor:pointer;overflow:hidden}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl-group button:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:only-child{border-radius:inherit}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E %3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E %3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E %3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E %3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E %3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E %3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E %3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E %3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23000'%3E %3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E %3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23000'%3E %3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E %3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E %3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E %3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E %3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E %3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E %3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E %3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E %3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23000'%3E %3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E %3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23000'%3E %3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E %3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E %3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E %3Cpath id='south' d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E %3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E %3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E %3Cpath id='south' d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E %3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23000'%3E %3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E %3Cpath id='south' d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E %3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E %3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E %3Ccircle id='dot' cx='10' cy='10' r='2'/%3E %3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E %3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E %3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E %3Ccircle id='dot' cx='10' cy='10' r='2'/%3E %3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E %3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E %3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E %3Ccircle id='dot' cx='10' cy='10' r='2'/%3E %3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E %3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E %3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E %3Ccircle id='dot' cx='10' cy='10' r='2'/%3E %3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E %3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E %3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E %3Ccircle id='dot' cx='10' cy='10' r='2' display='none'/%3E %3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E %3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E %3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E %3Ccircle id='dot' cx='10' cy='10' r='2' display='none'/%3E %3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E %3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E %3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E %3Ccircle id='dot' cx='10' cy='10' r='2'/%3E %3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E %3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E %3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E %3Ccircle id='dot' cx='10' cy='10' r='2'/%3E %3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E %3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E %3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E %3Ccircle id='dot' cx='10' cy='10' r='2'/%3E %3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E %3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E %3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E %3Ccircle id='dot' cx='10' cy='10' r='2'/%3E %3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E %3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E %3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E %3Ccircle id='dot' cx='10' cy='10' r='2' display='none'/%3E %3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E %3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E %3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E %3Ccircle id='dot' cx='10' cy='10' r='2' display='none'/%3E %3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E %3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23000'%3E %3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E %3Ccircle id='dot' cx='10' cy='10' r='2'/%3E %3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E %3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E %3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E %3Ccircle id='dot' cx='10' cy='10' r='2'/%3E %3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E %3C/svg%3E\")}}@keyframes mapboxgl-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E %3Cdefs%3E %3Cpath id='logo' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E %3Cpath id='text' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E %3C/defs%3E %3Cmask id='clip'%3E %3Crect x='0' y='0' width='100%25' height='100%25' fill='white'/%3E %3Cuse xlink:href='%23logo'/%3E %3Cuse xlink:href='%23text'/%3E %3C/mask%3E %3Cg id='outline' opacity='0.3' stroke='%23000' stroke-width='3'%3E %3Ccircle mask='url(%23clip)' cx='11.5' cy='11.5' r='9.25'/%3E %3Cuse xlink:href='%23text' mask='url(%23clip)'/%3E %3C/g%3E %3Cg id='fill' opacity='0.9' fill='%23fff'%3E %3Cuse xlink:href='%23logo'/%3E %3Cuse xlink:href='%23text'/%3E %3C/g%3E %3C/svg%3E\")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E %3Cdefs%3E %3Cpath id='logo' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E %3Cpath id='text' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E %3C/defs%3E %3Cmask id='clip'%3E %3Crect x='0' y='0' width='100%25' height='100%25' fill='white'/%3E %3Cuse xlink:href='%23logo'/%3E %3Cuse xlink:href='%23text'/%3E %3C/mask%3E %3Cg id='outline' opacity='1' stroke='%23000' stroke-width='3'%3E %3Ccircle mask='url(%23clip)' cx='11.5' cy='11.5' r='9.25'/%3E %3Cuse xlink:href='%23text' mask='url(%23clip)'/%3E %3C/g%3E %3Cg id='fill' opacity='1' fill='%23fff'%3E %3Cuse xlink:href='%23logo'/%3E %3Cuse xlink:href='%23text'/%3E %3C/g%3E %3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E %3Cdefs%3E %3Cpath id='logo' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E %3Cpath id='text' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E %3C/defs%3E %3Cmask id='clip'%3E %3Crect x='0' y='0' width='100%25' height='100%25' fill='white'/%3E %3Cuse xlink:href='%23logo'/%3E %3Cuse xlink:href='%23text'/%3E %3C/mask%3E %3Cg id='outline' opacity='1' stroke='%23fff' stroke-width='3' fill='%23fff'%3E %3Ccircle mask='url(%23clip)' cx='11.5' cy='11.5' r='9.25'/%3E %3Cuse xlink:href='%23text' mask='url(%23clip)'/%3E %3C/g%3E %3Cg id='fill' opacity='1' fill='%23000'%3E %3Cuse xlink:href='%23logo'/%3E %3Cuse xlink:href='%23text'/%3E %3C/g%3E %3C/svg%3E\")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:2px 24px 2px 0;margin:10px;position:relative;background-color:#fff;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 8px 2px 28px;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{display:none;cursor:pointer;position:absolute;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E %3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E %3C/svg%3E\");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;box-sizing:border-box;border-radius:12px;outline:none;top:0;right:0;border:0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E %3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E %3C/svg%3E\")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E %3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E %3C/svg%3E\")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{flex-direction:column-reverse}.mapboxgl-popup-anchor-left{flex-direction:row}.mapboxgl-popup-anchor-right{flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform;opacity:1;transition:opacity .2s}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:\"\";position:absolute;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:\"\";height:19px;left:-2px;position:absolute;top:-2px;width:19px;box-sizing:border-box;box-shadow:0 0 3px rgba(0,0,0,.35)}.mapboxgl-user-location-show-heading .mapboxgl-user-location-heading{width:0;height:0}.mapboxgl-user-location-show-heading .mapboxgl-user-location-heading:after,.mapboxgl-user-location-show-heading .mapboxgl-user-location-heading:before{content:\"\";border-bottom:7.5px solid #4aa1eb;position:absolute}.mapboxgl-user-location-show-heading .mapboxgl-user-location-heading:before{border-left:7.5px solid transparent;transform:translateY(-28px) skewY(-20deg)}.mapboxgl-user-location-show-heading .mapboxgl-user-location-heading:after{border-right:7.5px solid transparent;transform:translate(7.5px,-28px) skewY(20deg)}@keyframes mapboxgl-user-location-dot-pulse{0%{transform:scale(1);opacity:1}70%{transform:scale(3);opacity:0}to{transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}.mapboxgl-scroll-zoom-blocker,.mapboxgl-touch-pan-blocker{color:#fff;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif;justify-content:center;text-align:center;position:absolute;display:flex;align-items:center;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.7);opacity:0;pointer-events:none;transition:opacity .75s ease-in-out;transition-delay:1s}.mapboxgl-scroll-zoom-blocker-show,.mapboxgl-touch-pan-blocker-show{opacity:1;transition:opacity .1s ease-in-out}.mapboxgl-canvas-container.mapboxgl-touch-pan-blocker-override.mapboxgl-scrollable-page,.mapboxgl-canvas-container.mapboxgl-touch-pan-blocker-override.mapboxgl-scrollable-page .mapboxgl-canvas{touch-action:pan-x pan-y}","",{version:3,sources:["webpack://./node_modules/mapbox-gl/dist/mapbox-gl.css"],names:[],mappings:"AAAA,cAAc,wDAAwD,CAAC,eAAe,CAAC,iBAAiB,CAAC,yCAAyC,CAAC,iBAAiB,iBAAiB,CAAC,MAAM,CAAC,KAAK,CAAC,kCAAkC,UAAU,CAAC,WAAW,CAAC,iBAAiB,uBAAuB,CAAC,kGAAkG,WAAW,CAAC,wBAAwB,CAAC,gBAAgB,CAAC,uEAAuE,cAAc,CAAC,gHAAgH,eAAe,CAAC,6HAA6H,wBAAwB,CAAC,uHAAuH,uBAAuB,CAAC,6KAA6K,iBAAiB,CAAC,wGAAwG,iBAAiB,CAAC,mBAAmB,CAAC,SAAS,CAAC,wBAAwB,KAAK,CAAC,MAAM,CAAC,yBAAyB,KAAK,CAAC,OAAO,CAAC,2BAA2B,QAAQ,CAAC,MAAM,CAAC,4BAA4B,OAAO,CAAC,QAAQ,CAAC,eAAe,UAAU,CAAC,mBAAmB,CAAC,sBAAsB,CAAC,uCAAuC,oBAAoB,CAAC,UAAU,CAAC,wCAAwC,oBAAoB,CAAC,WAAW,CAAC,0CAA0C,oBAAoB,CAAC,UAAU,CAAC,2CAA2C,oBAAoB,CAAC,WAAW,CAAC,qBAAqB,iBAAiB,CAAC,eAAe,CAAC,iCAAiC,mCAAmC,CAAC,kCAAkC,iCAAiC,+BAA+B,CAAC,CAAC,4BAA4B,UAAU,CAAC,WAAW,CAAC,aAAa,CAAC,SAAS,CAAC,YAAY,CAAC,QAAQ,CAAC,qBAAqB,CAAC,4BAA4B,CAAC,cAAc,CAAC,eAAe,CAAC,mCAAmC,yBAAyB,CAAC,0CAA0C,aAAa,CAAC,UAAU,CAAC,WAAW,CAAC,2BAA2B,CAAC,uBAAuB,CAAC,kCAAkC,oBAAoB,4BAA4B,CAAC,mCAAmC,+BAA+B,CAAC,CAAC,qEAAqE,8BAA8B,CAAC,+BAA+B,kBAAkB,CAAC,mDAAmD,WAAW,CAAC,wCAAwC,yBAAyB,CAAC,uCAAuC,yBAAyB,CAAC,uCAAuC,qBAAqB,CAAC,2CAA2C,gCAAgC,CAAC,gDAAgD,8BAA8B,CAAC,sDAAsD,eAAe,CAAC,iEAAiE,+QAA+Q,CAAC,gEAAgE,iXAAiX,CAAC,kCAAkC,iEAAiE,+QAA+Q,CAAC,gEAAgE,iXAAiX,CAAC,CAAC,0CAA0C,iEAAiE,+QAA+Q,CAAC,gEAAgE,iXAAiX,CAAC,CAAC,mEAAmE,2cAA2c,CAAC,+DAA+D,ocAAoc,CAAC,kCAAkC,mEAAmE,2cAA2c,CAAC,+DAA+D,kdAAkd,CAAC,CAAC,0CAA0C,mEAAmE,2cAA2c,CAAC,+DAA+D,kdAAkd,CAAC,CAAC,gEAAgE,4QAA4Q,CAAC,kCAAkC,gEAAgE,4QAA4Q,CAAC,CAAC,0CAA0C,gEAAgE,4QAA4Q,CAAC,CAAC,kEAAkE,2fAA2f,CAAC,2EAA2E,ufAAuf,CAAC,iGAAiG,8fAA8f,CAAC,uGAAuG,8fAA8f,CAAC,qGAAqG,6gBAA6gB,CAAC,2GAA2G,6gBAA6gB,CAAC,kGAAkG,0CAA0C,CAAC,kCAAkC,kEAAkE,2fAA2f,CAAC,2EAA2E,ufAAuf,CAAC,iGAAiG,8fAA8f,CAAC,uGAAuG,8fAA8f,CAAC,qGAAqG,6gBAA6gB,CAAC,2GAA2G,6gBAA6gB,CAAC,CAAC,0CAA0C,kEAAkE,2fAA2f,CAAC,2EAA2E,ufAAuf,CAAC,CAAC,yBAAyB,GAAG,sBAAsB,CAAC,GAAG,uBAAuB,CAAC,CAAC,qBAAqB,UAAU,CAAC,WAAW,CAAC,oBAAoB,CAAC,aAAa,CAAC,2BAA2B,CAAC,cAAc,CAAC,eAAe,CAAC,woGAAwoG,CAAC,sCAAsC,UAAU,CAAC,kCAAkC,qBAAqB,4BAA4B,CAAC,ooGAAooG,CAAC,CAAC,0CAA0C,qBAAqB,kpGAAkpG,CAAC,CAAC,oCAAoC,aAAa,CAAC,mCAAmC,CAAC,QAAQ,CAAC,cAAc,uCAAuC,eAAe,CAAC,sBAAsB,CAAC,WAAW,CAAC,iBAAiB,CAAC,qBAAqB,CAAC,kBAAkB,CAAC,4CAA4C,wBAAwB,CAAC,kBAAkB,CAAC,2IAA2I,wBAAwB,CAAC,kBAAkB,CAAC,mEAAmE,YAAY,CAAC,6BAA6B,YAAY,CAAC,cAAc,CAAC,iBAAiB,CAAC,qSAAqS,CAAC,mCAAmC,CAAC,UAAU,CAAC,WAAW,CAAC,qBAAqB,CAAC,kBAAkB,CAAC,YAAY,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,6GAA6G,MAAM,CAAC,4IAA4I,aAAa,CAAC,yEAAyE,gCAAgC,CAAC,yEAAyE,QAAQ,CAAC,OAAO,CAAC,sEAAsE,KAAK,CAAC,OAAO,CAAC,qEAAqE,KAAK,CAAC,MAAM,CAAC,wEAAwE,QAAQ,CAAC,MAAM,CAAC,CAAC,6CAA6C,6CAA6C,mTAAmT,CAAC,CAAC,qDAAqD,6CAA6C,qSAAqS,CAAC,CAAC,wBAAwB,qBAAqB,CAAC,oBAAoB,CAAC,8BAA8B,aAAa,CAAC,yBAAyB,CAAC,0CAA0C,eAAe,CAAC,eAAe,CAAC,uBAAuB,YAAY,CAAC,qBAAqB,oCAAoC,CAAC,cAAc,CAAC,qBAAqB,CAAC,eAAe,CAAC,aAAa,CAAC,UAAU,CAAC,qBAAqB,CAAC,gBAAgB,iBAAiB,CAAC,KAAK,CAAC,MAAM,CAAC,YAAY,CAAC,qBAAqB,CAAC,mBAAmB,CAAC,4FAA4F,qBAAqB,CAAC,qGAAqG,6BAA6B,CAAC,4BAA4B,kBAAkB,CAAC,6BAA6B,0BAA0B,CAAC,oBAAoB,OAAO,CAAC,QAAQ,CAAC,6BAA6B,CAAC,SAAS,CAAC,+CAA+C,iBAAiB,CAAC,eAAe,CAAC,wBAAwB,CAAC,oDAAoD,qBAAqB,CAAC,eAAe,CAAC,gBAAgB,CAAC,wBAAwB,CAAC,qDAAqD,mBAAmB,CAAC,eAAe,CAAC,iBAAiB,CAAC,wBAAwB,CAAC,kDAAkD,iBAAiB,CAAC,kBAAkB,CAAC,qBAAqB,CAAC,uDAAuD,qBAAqB,CAAC,kBAAkB,CAAC,gBAAgB,CAAC,qBAAqB,CAAC,wDAAwD,mBAAmB,CAAC,kBAAkB,CAAC,iBAAiB,CAAC,qBAAqB,CAAC,gDAAgD,iBAAiB,CAAC,gBAAgB,CAAC,uBAAuB,CAAC,iDAAiD,iBAAiB,CAAC,iBAAiB,CAAC,sBAAsB,CAAC,6BAA6B,iBAAiB,CAAC,OAAO,CAAC,KAAK,CAAC,QAAQ,CAAC,uBAAuB,CAAC,cAAc,CAAC,4BAA4B,CAAC,mCAAmC,gCAAgC,CAAC,wBAAwB,iBAAiB,CAAC,eAAe,CAAC,iBAAiB,CAAC,mCAAmC,CAAC,sBAAsB,CAAC,mBAAmB,CAAC,wDAAwD,wBAAwB,CAAC,yDAAyD,yBAAyB,CAAC,2DAA2D,2BAA2B,CAAC,4DAA4D,4BAA4B,CAAC,8BAA8B,YAAY,CAAC,gCAAgC,mBAAmB,CAAC,gBAAgB,CAAC,kDAAkD,YAAY,CAAC,mDAAmD,YAAY,CAAC,iBAAiB,iBAAiB,CAAC,KAAK,CAAC,MAAM,CAAC,qBAAqB,CAAC,SAAS,CAAC,sBAAsB,CAAC,+DAA+D,wBAAwB,CAAC,UAAU,CAAC,WAAW,CAAC,iBAAiB,CAAC,mCAAmC,UAAU,CAAC,iBAAiB,CAAC,sDAAsD,CAAC,kCAAkC,iBAAiB,CAAC,qBAAqB,CAAC,UAAU,CAAC,WAAW,CAAC,SAAS,CAAC,iBAAiB,CAAC,QAAQ,CAAC,UAAU,CAAC,qBAAqB,CAAC,kCAAkC,CAAC,qEAAqE,OAAO,CAAC,QAAQ,CAAC,uJAAuJ,UAAU,CAAC,iCAAiC,CAAC,iBAAiB,CAAC,4EAA4E,mCAAmC,CAAC,yCAAyC,CAAC,2EAA2E,oCAAoC,CAAC,6CAA6C,CAAC,4CAA4C,GAAG,kBAAkB,CAAC,SAAS,CAAC,IAAI,kBAAkB,CAAC,SAAS,CAAC,GAAG,kBAAkB,CAAC,SAAS,CAAC,CAAC,kCAAkC,qBAAqB,CAAC,wCAAwC,YAAY,CAAC,wCAAwC,oCAAoC,CAAC,SAAS,CAAC,UAAU,CAAC,kBAAkB,CAAC,+GAA+G,gBAAgB,CAAC,kBAAkB,iBAAiB,CAAC,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,eAAe,CAAC,yBAAyB,CAAC,UAAU,CAAC,aAAa,oBAAoB,YAAY,CAAC,CAAC,0DAA0D,UAAU,CAAC,gFAAgF,CAAC,sBAAsB,CAAC,iBAAiB,CAAC,iBAAiB,CAAC,YAAY,CAAC,kBAAkB,CAAC,KAAK,CAAC,MAAM,CAAC,UAAU,CAAC,WAAW,CAAC,yBAAyB,CAAC,SAAS,CAAC,mBAAmB,CAAC,mCAAmC,CAAC,mBAAmB,CAAC,oEAAoE,SAAS,CAAC,kCAAkC,CAAC,iMAAiM,wBAAwB",sourcesContent:[".mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:grab;-webkit-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;box-sizing:border-box;background-color:transparent;cursor:pointer;overflow:hidden}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl-group button:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:only-child{border-radius:inherit}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E %3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E %3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E %3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E %3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E %3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E %3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E %3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E %3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23000'%3E %3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E %3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23000'%3E %3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E %3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E %3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E %3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E %3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E %3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E %3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E %3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E %3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23000'%3E %3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E %3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23000'%3E %3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E %3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E %3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E %3Cpath id='south' d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E %3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E %3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E %3Cpath id='south' d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E %3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23000'%3E %3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E %3Cpath id='south' d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E %3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E %3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E %3Ccircle id='dot' cx='10' cy='10' r='2'/%3E %3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E %3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E %3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E %3Ccircle id='dot' cx='10' cy='10' r='2'/%3E %3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E %3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E %3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E %3Ccircle id='dot' cx='10' cy='10' r='2'/%3E %3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E %3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E %3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E %3Ccircle id='dot' cx='10' cy='10' r='2'/%3E %3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E %3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E %3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E %3Ccircle id='dot' cx='10' cy='10' r='2' display='none'/%3E %3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E %3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E %3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E %3Ccircle id='dot' cx='10' cy='10' r='2' display='none'/%3E %3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E %3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E %3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E %3Ccircle id='dot' cx='10' cy='10' r='2'/%3E %3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E %3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E %3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E %3Ccircle id='dot' cx='10' cy='10' r='2'/%3E %3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E %3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E %3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E %3Ccircle id='dot' cx='10' cy='10' r='2'/%3E %3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E %3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E %3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E %3Ccircle id='dot' cx='10' cy='10' r='2'/%3E %3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E %3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E %3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E %3Ccircle id='dot' cx='10' cy='10' r='2' display='none'/%3E %3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E %3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E %3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E %3Ccircle id='dot' cx='10' cy='10' r='2' display='none'/%3E %3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E %3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23000'%3E %3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E %3Ccircle id='dot' cx='10' cy='10' r='2'/%3E %3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' display='none'/%3E %3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E %3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E %3Ccircle id='dot' cx='10' cy='10' r='2'/%3E %3Cpath id='stroke' d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E %3C/svg%3E\")}}@keyframes mapboxgl-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E %3Cdefs%3E %3Cpath id='logo' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E %3Cpath id='text' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E %3C/defs%3E %3Cmask id='clip'%3E %3Crect x='0' y='0' width='100%25' height='100%25' fill='white'/%3E %3Cuse xlink:href='%23logo'/%3E %3Cuse xlink:href='%23text'/%3E %3C/mask%3E %3Cg id='outline' opacity='0.3' stroke='%23000' stroke-width='3'%3E %3Ccircle mask='url(%23clip)' cx='11.5' cy='11.5' r='9.25'/%3E %3Cuse xlink:href='%23text' mask='url(%23clip)'/%3E %3C/g%3E %3Cg id='fill' opacity='0.9' fill='%23fff'%3E %3Cuse xlink:href='%23logo'/%3E %3Cuse xlink:href='%23text'/%3E %3C/g%3E %3C/svg%3E\")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E %3Cdefs%3E %3Cpath id='logo' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E %3Cpath id='text' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E %3C/defs%3E %3Cmask id='clip'%3E %3Crect x='0' y='0' width='100%25' height='100%25' fill='white'/%3E %3Cuse xlink:href='%23logo'/%3E %3Cuse xlink:href='%23text'/%3E %3C/mask%3E %3Cg id='outline' opacity='1' stroke='%23000' stroke-width='3'%3E %3Ccircle mask='url(%23clip)' cx='11.5' cy='11.5' r='9.25'/%3E %3Cuse xlink:href='%23text' mask='url(%23clip)'/%3E %3C/g%3E %3Cg id='fill' opacity='1' fill='%23fff'%3E %3Cuse xlink:href='%23logo'/%3E %3Cuse xlink:href='%23text'/%3E %3C/g%3E %3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E %3Cdefs%3E %3Cpath id='logo' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E %3Cpath id='text' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E %3C/defs%3E %3Cmask id='clip'%3E %3Crect x='0' y='0' width='100%25' height='100%25' fill='white'/%3E %3Cuse xlink:href='%23logo'/%3E %3Cuse xlink:href='%23text'/%3E %3C/mask%3E %3Cg id='outline' opacity='1' stroke='%23fff' stroke-width='3' fill='%23fff'%3E %3Ccircle mask='url(%23clip)' cx='11.5' cy='11.5' r='9.25'/%3E %3Cuse xlink:href='%23text' mask='url(%23clip)'/%3E %3C/g%3E %3Cg id='fill' opacity='1' fill='%23000'%3E %3Cuse xlink:href='%23logo'/%3E %3Cuse xlink:href='%23text'/%3E %3C/g%3E %3C/svg%3E\")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:2px 24px 2px 0;margin:10px;position:relative;background-color:#fff;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 8px 2px 28px;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{display:none;cursor:pointer;position:absolute;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E %3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E %3C/svg%3E\");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;box-sizing:border-box;border-radius:12px;outline:none;top:0;right:0;border:0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E %3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E %3C/svg%3E\")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E %3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E %3C/svg%3E\")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{flex-direction:column-reverse}.mapboxgl-popup-anchor-left{flex-direction:row}.mapboxgl-popup-anchor-right{flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform;opacity:1;transition:opacity .2s}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:\"\";position:absolute;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:\"\";height:19px;left:-2px;position:absolute;top:-2px;width:19px;box-sizing:border-box;box-shadow:0 0 3px rgba(0,0,0,.35)}.mapboxgl-user-location-show-heading .mapboxgl-user-location-heading{width:0;height:0}.mapboxgl-user-location-show-heading .mapboxgl-user-location-heading:after,.mapboxgl-user-location-show-heading .mapboxgl-user-location-heading:before{content:\"\";border-bottom:7.5px solid #4aa1eb;position:absolute}.mapboxgl-user-location-show-heading .mapboxgl-user-location-heading:before{border-left:7.5px solid transparent;transform:translateY(-28px) skewY(-20deg)}.mapboxgl-user-location-show-heading .mapboxgl-user-location-heading:after{border-right:7.5px solid transparent;transform:translate(7.5px,-28px) skewY(20deg)}@keyframes mapboxgl-user-location-dot-pulse{0%{transform:scale(1);opacity:1}70%{transform:scale(3);opacity:0}to{transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}.mapboxgl-scroll-zoom-blocker,.mapboxgl-touch-pan-blocker{color:#fff;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif;justify-content:center;text-align:center;position:absolute;display:flex;align-items:center;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.7);opacity:0;pointer-events:none;transition:opacity .75s ease-in-out;transition-delay:1s}.mapboxgl-scroll-zoom-blocker-show,.mapboxgl-touch-pan-blocker-show{opacity:1;transition:opacity .1s ease-in-out}.mapboxgl-canvas-container.mapboxgl-touch-pan-blocker-override.mapboxgl-scrollable-page,.mapboxgl-canvas-container.mapboxgl-touch-pan-blocker-override.mapboxgl-scrollable-page .mapboxgl-canvas{touch-action:pan-x pan-y}"],sourceRoot:""}]);const s=a},2061:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(94015),i=n.n(r),o=n(23645),a=n.n(o),s=n(30951),l=n(61667),c=n.n(l),u=n(90218),h=a()(i());h.i(s.Z);var f=c()(u.Z);h.push([e.id,"body{line-height:1.4;font-weight:300 !important;color:#d1dadb;background:#0f1111;font-family:'Roboto', sans-serif;font-size:12px !important;overflow-x:hidden;overflow-y:hidden}::-webkit-scrollbar{width:4px}::-webkit-scrollbar-track{background-color:#0f1111}::-webkit-scrollbar-thumb{background-color:#98acae}.scrolly,.layers-expanded{overflow-y:scroll;overflow-x:hidden;height:100%}.bold,.node-row .value{font-weight:500}.thin,.toggles,.buttons-widget{font-weight:200}.nomargin{margin:0}.noselect,.layers,.toggles,.layers-nav a,.layer-control,.dropdown,.buttons-widget{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}h5{font-weight:200;margin:0.8rem 0rem 0.8rem 0rem}.pointer,.layers-nav a{cursor:pointer}.nopointerevents{pointer-events:none}.wordwrap{white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}.justified,.topbar .tab,.layer-bar-button,.layer-bar-title,.score-table .header .box,.score-table .item .content .box,ul.list li.item .content .box,.squares .square .content,.middle-overlay{display:flex;justify-content:center;align-content:center;align-items:center}.btn{background:#1c2626;transition:all 200ms ease;margin:5px 0px 5px 0px;font-weight:100;padding:5px 10px 5px 10px;text-align:center;text-decoration:none;color:#e6f4d7}.table-btn{float:left;text-align:left;margin-right:5px}.btn:hover{background:#2c3a3a;text-decoration:none}.input{background:none;color:#e6f4d7;border:none;font-size:1rem;box-sizing:border-box;font-weight:100;margin-left:1rem;margin-right:1rem;width:95%}.input:focus{outline:0}::-webkit-input-placeholder{color:#98acae}.button{margin:1rem 0rem 1rem 0rem;transition:all 100ms ease}.button:hover{cursor:pointer;text-shadow:0px 0px 5px #6e6e6e}button:focus{outline:0}th,tr{font-weight:100}th tr{text-align:left;color:#6b6b6b !important}#panels{position:absolute;top:40px;height:calc(100% - 40px)}.panel{float:left;min-width:400px;display:flex;flex-direction:column;background-color:#0f1111;border-top:2px solid #000;transition:width 100ms ease}.panel article{margin:2%}.panel article header{font-size:1.2rem;line-height:110%;font-weight:200;margin:0.8rem 0rem 0.8rem 0rem}.secondary{background:rgba(15,17,17,0.9)}.panel-enter{opacity:0;-moz-transform:translateX(-50%);-ms-transform:translateX(-50%);-webkit-transform:translateX(-50%);-o-transform:translateX(-50%);transform:translateX(-50%)}.panel-appear{opacity:0.5;-moz-transform:translateX(-50%);-ms-transform:translateX(-50%);-webkit-transform:translateX(-50%);-o-transform:translateX(-50%);transform:translateX(-50%);pointer-events:none}.panel-appear.panel-appear-active{opacity:1;-moz-transform:translateX(0%);-ms-transform:translateX(0%);-webkit-transform:translateX(0%);-o-transform:translateX(0%);transform:translateX(0%);transition:all 150ms ease}.panel-enter.panel-enter-active{opacity:1;-moz-transform:translateX(0%);-ms-transform:translateX(0%);-webkit-transform:translateX(0%);-o-transform:translateX(0%);transform:translateX(0%);transition:all 150ms ease}.panel-leave{opacity:1}.panel-leave.panel-leave-active{opacity:0;-moz-transform:translateX(-50%);-ms-transform:translateX(-50%);-webkit-transform:translateX(-50%);-o-transform:translateX(-50%);transform:translateX(-50%);pointer-events:none;transition:all 150ms ease}.secondary-panel{background:#0f1111}a.close-button{text-align:right;cursor:pointer;margin-bottom:-10px;height:10px}a.close-button .popup{color:black}.slide-out{opacity:0;-moz-transform:translateX(-50%);-ms-transform:translateX(-50%);-webkit-transform:translateX(-50%);-o-transform:translateX(-50%);transform:translateX(-50%);pointer-events:none}.clickable-rows td{cursor:pointer}table.scrolltable{display:block;height:30em}.table-cell-sort-icon{margin-left:4px}.table-cell-sort-icon .fa-sort{opacity:0.3}.loading-overlay{position:absolute;top:0;left:0;margin:0;height:100%;min-height:100%;width:100%;background-color:rgba(0,0,0,0.5);display:flex}.loading-overlay .spinner{top:50%;margin-top:-50px}.paging{text-align:right;margin:0.5rem 0 1rem 0}.paging-button{color:#e6f4d7;background:#1c2626;padding:8px;margin:0 0 0 0.25rem;outline:0;border:0;cursor:pointer}.paging-button:hover{background:#2c3a3a}.paging-button-disabled,.paging-button-disabled:hover{background:transparent;opacity:0.5;cursor:inherit}@media screen and (max-width: 850px){#timeslider{opacity:0.0}}@media screen and (max-width: 1024px){.playback-button{opacity:0.0}}@media screen and (min-width: 1024px){.justify-on-large{display:flex;align-items:center;justify-content:center}.flex-row-on-large{display:flex;flex-direction:row}.justify-on-small{display:inline-block}}@media screen and (max-width: 1024px){.justify-on-large{display:inline-block}.flex-row-on-large{display:flex;flex-direction:column}.justify-on-small{display:flex;align-items:center;justify-content:center}}.fullscreen,.middle-overlay{width:100%;height:100%;position:fixed;top:0;left:0;cursor:default}.noscreen{visibility:hidden;width:0;height:0}#socket-indicator{position:fixed;top:10px;right:10px}.socket-success{color:#5effa9}.socket-error{color:#ed492d}.topbar{top:0;position:absolute;height:40px;width:100%;background:rgba(15,17,17,0.85);display:flex;align-items:center}.topbar .tab{float:left;margin:5px;background:#1c2626;cursor:pointer;padding:5px;border-bottom:1px solid transparent;transition:all 100ms ease;color:#e6f4d7;min-width:100px}.topbar .tab:hover{background:#2c3a3a}.topbar .tab.active{background:#2c3a3a}.attribution{position:absolute;bottom:25px;right:5px}.attribution a{color:rgba(209,218,219,0.4)}.inspector{height:400px;padding:10px}.inspector-svg:hover .bar{fill:rgba(209,255,252,0.2)}.node-row{display:flex;margin:0px 0px 10px 0px;padding:20px;background:#1c2626;box-shadow:0px 0px 18px 0px rgba(0,0,0,0.75)}.node-row:last-child{margin:0px}.node-row ul{list-style-type:none;padding:0;margin:0;width:40%;margin-right:10%}.node-row li{list-style-type:none;padding:0;margin:0}.node-row .key{color:#98acae;float:left;margin-right:10px}.node-row .value{color:#98acae}.node-row .detail{width:75%;display:flex;flex-wrap:wrap}.node-row .graph{width:25%}.node-row-label{position:absolute;bottom:-14px;margin:0;right:46%;font-size:0.6rem;color:rgba(209,255,252,0.75) !important;opacity:0.3;transition:opacity 100ms ease}.bar{fill:rgba(209,255,252,0.4);transition:fill 150ms ease}.bar:hover{fill:rgba(209,255,252,0.75) !important}#layers{position:absolute;top:50px;right:10px;height:0;width:80%;overflow:visible;display:flex;align-items:flex-end;flex-direction:column}.layers{margin:1rem 0rem 1rem 0rem}.toggles{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-flex-flow:row wrap;flex-flow:row wrap;text-align:center;height:40px;margin:-2px}.layers-nav{display:flex;height:36px;position:absolute;right:0;justify-content:flex-end;padding-top:10px}.layers-nav h5{margin:0.5rem 0 0.5rem 0.5rem}.layers-expanded{width:400px;max-height:400px;position:absolute;margin-top:56px;height:auto}.layer:first-child{margin-top:0}.toggle{flex:auto;cursor:pointer;margin:2px;padding:10px;border-bottom:1px solid transparent;transition:all 100ms ease;color:#e6f4d7}.toggle:hover{border-bottom:solid 1px #2c3a3a}.toggle.on{background:#2c3a3a;opacity:1}.toggle.off{background:#1c2626;opacity:0.75}.layer{margin-top:0.6rem}.layer-bar-inactive{cursor:pointer;height:2.5rem;border-bottom:1px solid transparent;transition:all 100ms ease;display:flex;background:#1c2626;opacity:0.75}.layer-bar-active{cursor:pointer;height:2.5rem;border-bottom:1px solid transparent;transition:all 100ms ease;display:flex;background:#2c3a3a;opacity:1}.layer-bar-button{flex:1}.layer-bar-title{flex:7;justify-content:flex-start;margin-left:1rem}.layer-controls{height:0;transition:all 200ms ease;pointer-events:none;overflow:hidden;background:rgba(15,17,17,0.9)}.layer-controls.expand{height:auto;padding:0% 5%;pointer-events:all}.layer-property{margin:0.5rem 0 1rem 0}.property-bar{padding-top:0.6rem;padding-bottom:0.6rem;text-align:center;transition:all 100ms ease;font-weight:400;color:#98acae;margin-bottom:1rem}.layer-control{padding:1rem;width:100%}.hidden{opacity:0;pointer-events:none}.layer-stripe{width:100%;height:2px}.rangeslider{width:100%}.rangeslider p{color:#4a6363;text-align:center;margin:0}.radio-check{font-size:0.9rem}.dropdown{width:100%;padding:0.5rem;background:#2c3a3a;border:none;color:#d1dadb}.dropdown-option{background:#1c2626}select{-webkit-appearance:none;-moz-appearance:none;appearance:none}.aperture-marker{cursor:ew-resize;fill:#98acae}.aperture-midpoint{fill:#d1dadb}.aperture-label{fill:#4d6365}.aperture-area{fill:#4d6365}.aperture-rail{fill:#98acae}.circle-white{fill:rgba(209,255,252,0.05)}.path-luna-light{stroke:#2c3a3a;stroke-width:1}.path-luna-secondary{stroke:#e6f4d7;stroke-width:1}.path-luna-primary{stroke:#d1dadb;stroke-width:1}.tick,.domain{stroke:rgba(209,255,252,0.5) !important;stroke-width:1 !important}.graph-luna-light{fill:#2c3a3a}.graph-luna-primary{fill:#d1dadb}.graph-luna-secondary{fill:#e6f4d7}.graph-orange{fill:rgba(240,121,56,0.53)}.graph-cyan{fill:rgba(0,255,255,0.2);stroke:rgba(0,255,255,0.25);stroke-width:1}.graph-blue{fill:rgba(0,0,255,0.3);stroke:rgba(0,0,255,0.5);stroke-width:1}.graph-yellow{fill:rgba(255,255,0,0.3);stroke:rgba(255,255,0,0.5);stroke-width:1}.graph-red{fill:rgba(255,0,0,0.3);stroke:rgba(255,0,0,0.5);stroke-width:1}.axis text{display:none}.axis{shape-rendering:crispEdges}.x.axis line{stroke:none}.x.axis .minor{stroke-opacity:.5}.x.axis path{display:none}.y.axis line,.y.axis path{fill:none;stroke:#000}.fill-container{width:100%;height:100%;position:absolute}.svg-content{position:absolute;bottom:0;left:0}.svg-container-limeseries{width:100%;height:90%}.callout div path{stroke:white}.mc-callout{transition:all 200ms ease;min-width:100px;height:60px;transform-style:preserve-3d}.mc-callout .close-button{top:12px;font-size:1rem;right:14px}.mc-callout:hover .mc-buttons{opacity:1;pointer-events:all}.mc-stripe{height:6px;background:white;width:100%;margin-bottom:1px}.mc-content{max-height:50px;min-width:200px;color:#999;background:rgba(22,22,24,0.9);width:100%;box-sizing:border-box;padding:1rem;font-size:0.9rem;margin-bottom:1px;transition:all 150ms ease}.mc-expand{max-height:1000px}.mc-buttons{width:100%;font-size:0.9rem;display:flex;flow-direction:row;flow-wrap:no-wrap;justify-content:space-between;opacity:0;pointer-events:none;transition:opacity 150ms ease}.mc-button{background:#1c2626;cursor:pointer;flex:1;height:20px;transition:all 200ms ease;color:#e6f4d7}.mc-button:hover{background:#2c3a3a}.mc-b1{margin-right:1px}.mc-b2{margin-left:1px;margin-right:1px}.mc-b3{margin-left:1px}.ul-li ul{list-style-type:none;padding:0;margin:0}.ul-li ul li{background:#1c2626;transition:all 150ms ease;cursor:pointer;display:flex;padding:3px;margin-top:2px;box-sizing:border-box;align-items:center;justify-content:center;height:50px;color:#98acae;box-sizing:border-box}.ul-li ul li:hover{background:#2c3a3a}#search ul{list-style-type:none;padding:0;margin:0}#search ul li.search-autocomplete-item{background:#1c2626;transition:all 150ms ease;cursor:pointer;display:flex;padding:3px;margin-top:2px;box-sizing:border-box;align-items:center;justify-content:center;height:50px;color:#d1dadb;box-sizing:border-box}#search ul li.search-autocomplete-item:hover{background:#2c3a3a}#search li.search-detail-item{background:none;cursor:pointer;padding:5px;margin-top:2px;box-sizing:border-box;height:auto;color:#98acae}#search li.search-detail-item header{clear:both}#search li.search-detail-item section{display:flex;flex-wrap:nowrap}#search li.search-detail-item section header h5{font-size:0.5rem}#search li.search-detail-item section .right-section{flex:1}#search li.search-detail-item section .left-section{flex:1}#search li.search-detail-item section p{font-size:0.7rem;margin:0}#search li.search-detail-item section h6{font-size:0.9rem}#search li.search-detail-item:hover{background:#111617}#search-bar{padding:0.8rem;display:flex;transition:background 200ms ease}.search-locked{background:#2c3a3a}.search-active{background:#1c2626}.color-search{display:flex;flex-wrap:nowrap;cursor:pointer;margin-top:2px;height:50px}.color-search .color-search-text{width:98%;background:#1c2626;transition:all 150ms ease;display:flex;box-sizing:border-box;align-items:center;justify-content:center;color:#98acae}.color-search .color-search-stripe{width:2%;background-color:#F00;height:100%}.color-search:hover .color-search-text:hover{background:#2c3a3a}.item-appear{opacity:0;margin-top:-10px}.item-appear.item-appear-active{opacity:1;margin-top:0;transition:all 200ms ease-in}.item-enter{opacity:0;margin-top:-10px}.item-enter.item-enter-active{opacity:1;margin-top:0;transition:all 200ms ease-in}.item-leave{opacity:1;margin-top:0}.item-leave.item-leave-active{opacity:0;margin-top:-10px;transition:all 200ms ease}.searchitem-appear{opacity:0;height:0}.searchitem-appear.searchitem-appear-active{opacity:1;transition:all 100ms ease-in;height:50px}.searchitem-enter{opacity:0;height:0}.searchitem-enter.searchitem-enter-active{opacity:1;height:50px}.searchitem-leave{opacity:0.3;height:50px}.searchitem-leave.searchitem-leave-active{opacity:0;transition:all 100ms ease;height:0;padding:0;margin:0}.buttons-widget{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-flex-flow:row wrap;flex-flow:row wrap;text-align:center;margin:4px -2px}.buttons-widget .button-widget{flex:auto;cursor:pointer;margin:2px;border-bottom:1px solid transparent;transition:all 100ms ease;color:#e6f4d7;height:30px}.buttons-widget .button-widget:hover{background:#111617}.title-widget{margin:-2%;margin-bottom:2%;padding:2%;padding-top:3rem}.title-widget h1{margin:0;font-size:1.6rem}.button-widget{background:#1c2626;transition:all 150ms ease;cursor:pointer;display:flex;padding:3px;margin-top:2px;box-sizing:border-box;align-items:center;justify-content:center;height:30px;color:#e6f4d7}.button-widget:hover{background:#2c3a3a}.panel-header-widget h1{font-size:1.6rem}.signal-strength{position:relative;display:flex;align-items:center}.histogram{position:relative;background:#111617;display:flex;align-items:center}.two-charts{display:flex;flex-direction:row;width:100%}.two-charts>:last-child{border-left:2px solid #0f1111}.chart{position:relative;display:flex;align-items:center}.chart svg{background:#111617}.chart svg text{fill:#d1dadb}.h-rect{opacity:0.9;transition:opacity 150ms ease}#grs{color:#98acae}.scatter_plot p{color:#d1dadb}.scatter_plot p.ts{color:#98acae}.cnv-sml{background:#111617;transition:background 200ms ease}.cnv-sml:hover{background:#1c2626}.key-value-widget{display:flex;margin:0.5rem 0 2rem 0}.key-value{width:50px;height:50px;margin:0.5rem}.header-paragraph-widget{line-height:1.4;font-size:1.1rem;margin:1rem}.cell-info-dot-on{width:10px;height:10px;border:1px solid lime;border-radius:100%;background-color:rgba(0,255,0,0.5);margin-left:15px}.cell-info-dot-off{width:10px;height:10px;border:1px solid red;border-radius:100%;background-color:rgba(255,0,0,0.5);margin-left:15px}dl.description-list{width:100%;margin:0;border-top:1px solid #2c3a3a;display:inline-block;padding-top:0.5rem}dl.description-list dt{color:#98acae;float:left;clear:left;width:30%;margin:0;padding-bottom:0.2em;padding-left:5px}dl.description-list dd{width:70%;margin:0;padding-bottom:0.2em;padding-left:5px}.score-table .header{color:#98acae;height:30px;display:flex;width:100%;flex-direction:row}.score-table .header .box{flex:1}.score-table .item{height:50px;width:100%;font-weight:300;margin-bottom:0.45rem !important}.score-table .item p{font-weight:100;color:#d1dadb}.score-table .item .content{height:94%;display:flex;font-weight:300;background:#1c2626;transition:all 150ms ease;flex-direction:row}.score-table .item .content .box{flex:1}.score-table .item .stripe{height:6%;line-height:30px;font-size:0.5rem;background:#2c3a3a;text-align:center;font-weight:400}.score-table .item:hover .content{background:#2c3a3a}.score-table .item.active .content{background:#2c3a3a}table.vertical-table{width:100%;border-collapse:collapse}table.vertical-table th{text-align:left;height:20px;color:#98acae;padding-left:5px;word-wrap:break-word;overflow-wrap:break-word;background:#1c2626;border-bottom:2px solid #0f1111}table.vertical-table td{height:20px;padding-left:5px;border-bottom:2px solid #0f1111;background:#111617}table.sortable-table{width:100%;border-collapse:separate;border-spacing:0 0.2em}table.sortable-table th{text-align:left;height:40px;color:#98acae;padding-left:5px;white-space:nowrap}table.sortable-table td{height:40px;padding-left:5px}table.sortable-table tr td{background:#1c2626;transition:all 200ms ease}table.sortable-table tr:hover td{background:#2c3a3a}table.sortable-table tr.active td{background:#2c3a3a}table.score-table{width:100%;border-collapse:collapse}table.score-table th{text-align:left;height:30px;color:#98acae;padding:5px;white-space:nowrap}table.score-table td.score-row-stripe{height:3px;padding:0;border-bottom:none}table.score-table tr.score-row{border-bottom:0.5em solid #0f1111}table.score-table tr.score-row td,table.score-table tr.score-row th{transition:all 200ms ease}table.score-table th.score-field{text-align:center;padding:0}table.score-table th.score-row-th{background:#1c2626;font-size:1.2rem}table.score-table td{background:#1c2626;height:30px;padding:5px}table.score-table tr.score-row:hover td,table.score-table tr.score-row:hover th,table.score-table tr.score-row.active td,table.score-table tr.score-row.active th{background:#2c3a3a}ul.list{padding:0;list-style-type:none}ul.list li.item{height:60px;width:100%;font-weight:300;margin-bottom:0.45rem !important}ul.list li.item p{font-weight:100;color:#98acae;margin:0.1rem}ul.list li.item h6{font-weight:300}ul.list li.item .content{height:100%;display:flex;font-weight:300;background:#1c2626;transition:all 150ms ease;flex-direction:row}ul.list li.item .content .box{flex:1}ul.list li.item:hover .content{background:#2c3a3a}@media (max-width: 1200px){.list .item .content{display:inline}.list .item .content .box{float:left;width:50%}}.keyvalue .key{font-size:0.8rem}.keyvalue .value{font-size:1.1rem}.squares{display:flex;flex-wrap:wrap;list-style-type:none;-webkit-margin-before:0;-webkit-margin-after:0;-webkit-margin-start:0;-webkit-margin-end:0;-webkit-padding-start:0}.squares .square{flex:1;margin:1px;display:flex;flex-direction:column}.squares .square .stripe{box-sizing:border-box;font-size:0.8rem;background:#2c3a3a;text-align:center;font-weight:400;padding:0.2rem;margin:0 0 0.1rem 0}.squares .square .content{font-weight:300;background:#1c2626;word-wrap:break-word}@media (min-width: 600px){.square{flex-basis:50%}}@media (min-width: 900px){.square{flex-basis:25%}}.kx-logo{background:url("+f+") no-repeat bottom right;background-size:56px 16px;width:56px;height:16px;position:fixed;right:5px;bottom:5px;z-index:101}#loader{margin:0;padding:0}.loader{position:fixed;width:300px;height:4px;top:50%;left:50%;margin-top:-2px;margin-left:-150px}#spinner{width:100%;margin:20px 0px;justify-content:center;overflow:hidden;-moz-box-sizing:border-box;box-sizing:border-box;display:flex}.spinner,.spinner:after{border-radius:50%;width:5em;height:5em}.spinner{font-size:3px;position:relative;text-indent:-9999em;border-top:1.1em solid #2c3a3a;border-right:1.1em solid #2c3a3a;border-bottom:1.1em solid #2c3a3a;border-left:1.1em solid #d1dadb;-webkit-transform:translateZ(0);-ms-transform:translateZ(0);transform:translateZ(0);-webkit-animation:spinny 0.3s infinite linear;animation:spinny 0.3s infinite linear}@-webkit-keyframes spinny{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spinny{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.map-popup p{margin:0}.middle-overlay{background:rgba(0,0,0,0.3);display:flex}.modal-header{color:#e6f4d7;background:#1c2626;border-top-left-radius:5px;border-top-right-radius:5px;padding:10px;border-bottom:1px solid #2c3a3a}.modal-body{background:#0f1111}@media screen and (max-width: 1250){.modal-body{width:100%;min-width:0}}.modal-close{float:right;margin-top:5px;margin-right:5px}.modal-padding{padding:10px}#timeslider{margin:0;padding:0;transition:opacity 200ms ease}#timeslider path{stroke:rgba(0,255,255,0);stroke-width:0}.timeslider-pane{touch-action:none;right:0;height:5%;position:absolute;bottom:0;display:flex;flex-flow:row;overflow:visible;background:-webkit-linear-gradient(top, rgba(15,17,17,0.01) 0%, rgba(15,17,17,0) 40%, #0f1111 85%, #0f1111 100%);margin-right:50px}.timeslider-timeline{font-family:'Hind', sans-serif;font-weight:300;position:relative;flex:7;bottom:0}.timeslider-container{width:100%;position:relative;height:100%;cursor:default;-webkit-tap-highlight-color:rgba(0,0,0,0)}.timeslider-wrapper{width:100%;height:100%;display:flex;flex-flow:row}.timeslider-children{position:absolute;bottom:0;width:100%;height:100%;pointer-events:none}.day-rect{fill:#d1dadb}.hour-rect{fill:#98acae}.minute-rect{fill:#2c3a3a}.handle-rect{fill:#d1dadb;-webkit-filter:drop-shadow(-5px -5px 5px #2c3a3a);filter:drop-shadow(-5px -5px 5px #2c3a3a)}.handle-live{fill:red;animation:blink 3s linear infinite}@keyframes blink{0%{opacity:0}50%{opacity:1}100%{opacity:0}}.timeslider-buttons-wrapper{flex:1;flex:1;display:flex;align-items:flex-end;padding-left:80px}.timeslider-buttons{height:30px;width:100%;margin-left:110px}.timeslider-buttons .on{color:#e6f4d7}.timeslider-stats{position:absolute;top:10px;right:10px;color:#999;font-size:8pt}.playback-button:hover{-webkit-box-shadow:0px 0px 10px 1px rgba(44,58,58,0.5);-moz-box-shadow:0px 0px 10px 1px rgba(44,58,58,0.5);box-shadow:0px 0px 10px 1px rgba(44,58,58,0.5)}.playback-button-rect:hover{color:#e6f4d7}.speed:hover{color:rgba(44,58,58,0.8)}.playback-button{height:100%;width:35px;line-height:35px;border-radius:100%;font-size:13pt;margin-bottom:1px;margin-left:20px;border-width:1px;color:rgba(230,244,215,0.7);text-align:center;cursor:pointer;transition:all 300ms ease;float:left}.playback-button-rect{height:100%;display:flex;justify-content:center;align-items:center;font-size:13pt;color:rgba(230,244,215,0.5);text-align:center;cursor:pointer;transition:all 300ms ease;float:left;margin-right:10px}.playback-button-rect span{flex:1}.controls{flex:1;background:#0f1111}.knob-front{width:35px;height:35px;border-radius:100%;border:solid 1px rgba(44,58,58,0.7);background-color:rgba(44,58,58,0.1);transition:all 500ms ease-out;position:absolute}.knob{width:35px;height:35px;transition:all 100ms ease-out;position:absolute;left:20px}.knob::before{width:5px;height:5px;position:absolute;top:5px;left:15px;content:\"\";background-color:rgba(44,58,58,0.7);border-radius:100%}.knob-front:hover{-webkit-box-shadow:0px 0px 10px 1px rgba(44,58,58,0.5);-moz-box-shadow:0px 0px 10px 1px rgba(44,58,58,0.5);box-shadow:0px 0px 10px 1px rgba(44,58,58,0.5);border-color:rgba(44,58,58,0.8)}.leds{width:100%;height:100%;display:flex;align-items:center;justify-content:center;flex-wrap:nowrap}.led{height:2px;width:2px;min-width:1px;display:inline-block;list-style-type:none;background-color:rgba(230,244,215,0.2);border-radius:100%;transition:all 200ms ease-in;margin:3%}.active-led{background-color:rgba(230,244,215,0.95);-webkit-box-shadow:0px 0px 10px 1px rgba(209,255,252,0.7);-moz-box-shadow:0px 0px 10px 1px rgba(209,255,252,0.7);box-shadow:0px 0px 10px 1px rgba(209,255,252,0.7)}.knob-rect{display:flex;justify-content:center;align-content:center;line-height:normal;margin-right:10px}.gradient-legend-title{margin:5px 0}.xyplot{position:relative}.xyplot canvas{transition:opacity 0.2s}.xyplot-filter{opacity:0;position:absolute;top:0;left:0}.xyplot-axis text{fill:#7A7A7A}.xyplot-axis path,.xyplot-axis tick,.xyplot-axis line{fill:none;stroke:none !important}.xyplot-tooltip{position:absolute;top:0;right:0;text-align:left;padding:5px;background-color:rgba(50,50,50,0.6);pointer-events:none;color:#fff;overflow:hidden}.xyplot-tooltip dl{white-space:nowrap;margin:0;padding:0;display:inline-block;clear:both;overflow:hidden}.xyplot-tooltip dd,.xyplot-tooltip dt{display:block;margin:0}.xyplot-tooltip dt{opacity:0.8;padding:0 10px 0 0;float:left;clear:left}.xyplot-tooltip dd{float:left}.rc-slider{position:relative;height:45px;padding-top:17px;width:100%;margin:-10px 0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}.rc-slider *{box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.rc-slider-rail{background:#000;width:100%;position:absolute;height:4px;background:#2c3a3a}.rc-slider-track{position:absolute;left:0;height:4px;border-radius:6px;background-color:rgba(209,218,219,0.3)}.rc-slider-handle{position:absolute;margin-left:-7px;margin-top:-5px;width:14px;height:14px;cursor:pointer;border-radius:50%;background-color:#d1dadb;transition:background 200ms ease}.rc-slider-handle:hover{background:#e6f4d7}.rc-slider-handle-active:active{border-color:#d1dadb;box-shadow:0 0 5px #2c3a3a}.rc-slider-mark{position:absolute;top:10px;left:0;width:100%;font-size:12px}.rc-slider-mark-text{position:absolute;display:inline-block;vertical-align:middle;text-align:center;cursor:pointer;color:#999}.rc-slider-mark-text-active{color:#666}.rc-slider-step{position:absolute;width:100%;height:4px;background:transparent}.rc-slider-dot{position:absolute;bottom:-2px;margin-left:-4px;width:8px;height:8px;border:2px solid #d1dadb;background-color:#fff;cursor:pointer;border-radius:50%;vertical-align:middle}.rc-slider-dot:first-child{margin-left:-4px}.rc-slider-dot:last-child{margin-left:-4px}.rc-slider-dot-active{border-color:#e6f4d7}.rc-slider-disabled{background-color:#2c3a3a}.rc-slider-disabled .rc-slider-track{background-color:#ccc}.rc-slider-disabled .rc-slider-handle,.rc-slider-disabled .rc-slider-dot{border-color:#ccc;background-color:#fff;cursor:not-allowed}.rc-slider-disabled .rc-slider-mark-text,.rc-slider-disabled .rc-slider-dot{cursor:not-allowed !important}.rc-slider-vertical{width:4px;height:100%}.rc-slider-vertical .rc-slider-track{bottom:0;width:4px}.rc-slider-vertical .rc-slider-handle{position:absolute;margin-left:-5px;margin-bottom:-7px}.rc-slider-vertical .rc-slider-mark{top:0;left:10px;height:100%}.rc-slider-vertical .rc-slider-step{height:100%;width:4px}.rc-slider-vertical .rc-slider-dot{left:2px;margin-bottom:-4px}.rc-slider-vertical .rc-slider-dot:first-child{margin-bottom:-4px}.rc-slider-vertical .rc-slider-dot:last-child{margin-bottom:-4px}.rc-slider-tooltip-zoom-down-enter,.rc-slider-tooltip-zoom-down-appear{animation-duration:.3s;animation-fill-mode:both;display:block !important;animation-play-state:paused}.rc-slider-tooltip-zoom-down-leave{animation-duration:.3s;animation-fill-mode:both;display:block !important;animation-play-state:paused}.rc-slider-tooltip-zoom-down-enter.rc-slider-tooltip-zoom-down-enter-active,.rc-slider-tooltip-zoom-down-appear.rc-slider-tooltip-zoom-down-appear-active{animation-name:rcSliderTooltipZoomDownIn;animation-play-state:running}.rc-slider-tooltip-zoom-down-leave.rc-slider-tooltip-zoom-down-leave-active{animation-name:rcSliderTooltipZoomDownOut;animation-play-state:running}.rc-slider-tooltip-zoom-down-enter,.rc-slider-tooltip-zoom-down-appear{transform:scale(0, 0);animation-timing-function:cubic-bezier(0.23, 1, 0.32, 1)}.rc-slider-tooltip-zoom-down-leave{animation-timing-function:cubic-bezier(0.755, 0.05, 0.855, 0.06)}@keyframes rcSliderTooltipZoomDownIn{0%{opacity:0;transform-origin:50% 100%;transform:scale(0, 0)}100%{transform-origin:50% 100%;transform:scale(1, 1)}}@keyframes rcSliderTooltipZoomDownOut{0%{transform-origin:50% 100%;transform:scale(1, 1)}100%{opacity:0;transform-origin:50% 100%;transform:scale(0, 0)}}.rc-slider-tooltip{position:absolute;left:-9999px;top:-9999px;visibility:visible;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.rc-slider-tooltip *{box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.rc-slider-tooltip-hidden{display:none}.rc-slider-tooltip-placement-top{padding:4px 0 8px 0}.rc-slider-tooltip-inner,.rc-slider-tooltip-inner span{display:none}.rc-slider-tooltip-placement-top .rc-slider-tooltip-arrow{bottom:4px;left:50%;margin-left:-4px;border-width:4px 4px 0;border-top-color:#6c6c6c}.draw-ctrl{position:absolute;top:45%;right:0}.draw-ctrl-btn{display:inherit;width:30px;height:30px;border:none;margin:4px;font-size:0.9rem;transition:all 150ms ease;color:#e6f4d7;background-color:#1c2626}.draw-ctrl-btn:hover{background-color:#2c3a3a}.draw-ctrl-btn.active{background-color:#2c3a3a}.draw-ctrl-btn.selection{background-color:#e6f4d7;color:#050505}.draw-btn:before{content:\"\\f040\";font-family:'FontAwesome'}.select-btn:before{content:\"\\f245\";font-family:'FontAwesome'}.zoomIn-btn:before{content:\"\\f067\";font-family:'FontAwesome'}.zoomOut-btn:before{content:\"\\f068\";font-family:'FontAwesome'}.manager-btn:before{content:\"\\f03a\";font-family:'FontAwesome'}.select-btn:before{content:\"\\f245\";font-family:'FontAwesome'}.clear-btn:before{content:\"\\f12d\";font-family:'FontAwesome'}.inspect-btn:before{content:\"\\f080\";font-family:'FontAwesome'}.save-btn:before{content:\"\\f0c7\";font-family:'FontAwesome'}\n","",{version:3,sources:["webpack://./src/styles/global.scss","webpack://./src/styles/colors.scss","webpack://./src/styles/panels.scss","webpack://./src/styles/components.scss","webpack://./src/styles/slider.scss","webpack://./src/styles/drawcontrol.scss"],names:[],mappings:"AASA,KACE,eAAgB,CAChB,0BAA2B,CAC3B,aCNoB,CDOpB,kBCAuB,CDCvB,gCAAiC,CACjC,yBAA0B,CAC1B,iBAAkB,CAClB,iBAAkB,CACnB,oBAIC,SAAU,CACX,0BAGC,wBCbuB,CDcxB,0BAGC,wBCvB8C,CDwB/C,0BAGC,iBAAkB,CAClB,iBAAkB,CAClB,WAAY,CACb,uBAIC,eAAgB,CACjB,+BAGC,eAAgB,CACjB,UAGC,QAAS,CACV,kFAIC,0BAA2B,CAC3B,wBAAyB,CACzB,uBAAwB,CACxB,qBAAsB,CACtB,oBAAqB,CACrB,gBAAiB,CAElB,GAGC,eAAgB,CAChB,8BAA+B,CAChC,uBAGC,cAAe,CAChB,iBAGC,mBAAoB,CACrB,UAIE,oBAAqB,CACrB,yBAA0B,CAC1B,qBAAsB,CACtB,uBAAwB,CACxB,oBAAqB,CACvB,8LAGC,YAAa,CACb,sBAAuB,CACvB,oBAAqB,CACrB,kBAAmB,CACpB,KAIC,kBC7EiB,CD8EjB,yBAA0B,CAC1B,sBAAuB,CACvB,eAAgB,CAChB,yBAA0B,CAC1B,iBAAkB,CAClB,oBAAqB,CACrB,aC5FsB,CD6FvB,WAGC,UAAW,CACX,eAAgB,CAChB,gBAAiB,CAClB,WAGC,kBChGkB,CDiGlB,oBAAqB,CACtB,OAGC,eAAgB,CAChB,aC5GsB,CD6GtB,WAAY,CACZ,cAAe,CACf,qBAAsB,CACtB,eAAgB,CAChB,gBAAiB,CACjB,iBAAkB,CAClB,SAAU,CACX,aAGC,SAAU,CACX,4BAGE,aC7H6C,CD8H/C,QAGC,0BAA2B,CAC3B,yBAA0B,CAC3B,cAGC,cAAe,CACf,+BAA+C,CAChD,aAGC,SAAS,CACV,MAGC,eAAgB,CACjB,MAGC,eAAgB,CAChB,wBAAyB,CAC1B,QErJC,iBAAkB,CAClB,QAAS,CACT,wBAAyB,CAC1B,OAGC,UAAW,CACX,eAAgB,CAChB,YAAa,CACb,qBAAsB,CACtB,wBDJuB,CCKvB,yBAA0B,CAC1B,2BAA4B,CAP9B,eASI,SAjBoB,CAQxB,sBAWM,gBAAiB,CACjB,gBAAiB,CACjB,eAAgB,CAChB,8BAA+B,CAChC,WAKH,6BDnBuB,CCoBxB,aAOC,SAAU,CACV,+BAAgC,CAChC,8BAA+B,CAC/B,kCAAmC,CACnC,6BAA8B,CAC9B,0BAA2B,CAC5B,cAGC,WAAY,CACZ,+BAAgC,CAChC,8BAA+B,CAC/B,kCAAmC,CACnC,6BAA8B,CAC9B,0BAA2B,CAC3B,mBAAoB,CACrB,kCAEC,SAAU,CACV,6BAA8B,CAC9B,4BAA6B,CAC7B,gCAAiC,CACjC,2BAA4B,CAC5B,wBAAyB,CACzB,yBAA0B,CAC3B,gCAEC,SAAU,CACV,6BAA8B,CAC9B,4BAA6B,CAC7B,gCAAiC,CACjC,2BAA4B,CAC5B,wBAAyB,CACzB,yBAA0B,CAC3B,aAGC,SAAU,CACX,gCAGC,SAAU,CACV,+BAAgC,CAChC,8BAA+B,CAC/B,kCAAmC,CACnC,6BAA8B,CAC9B,0BAA2B,CAC3B,mBAAoB,CACpB,yBAA0B,CAC3B,iBAGC,kBD/EuB,CCgFxB,eAGC,gBAAiB,CACjB,cAAe,CACf,mBAAoB,CACpB,WAAY,CACb,sBAGC,WAAY,CACb,WAGC,SAAU,CACV,+BAAgC,CAChC,8BAA+B,CAC/B,kCAAmC,CACnC,6BAA8B,CAC9B,0BAA2B,CAC3B,mBAAoB,CACrB,mBAIC,cAAe,CAChB,kBAEC,aAAc,CACd,WAAY,CACb,sBAIC,eAAe,CAChB,+BAEC,WAAW,CACZ,iBAIC,iBAAkB,CAClB,KAAM,CACN,MAAO,CACP,QAAS,CACT,WAAY,CACZ,eAAgB,CAChB,UAAW,CACX,gCAAiC,CACjC,YAAa,CACd,0BAEC,OAAQ,CACR,gBAAiB,CAClB,QAEC,gBAAiB,CACjB,sBAAuB,CACxB,eAEC,aDjJsB,CCkJtB,kBD1IiB,CC2IjB,WAAY,CACZ,oBAAqB,CACrB,SAAU,CACV,QAAS,CACT,cAAe,CAChB,qBAEC,kBDpJkB,CCqJnB,sDAGC,sBAAuB,CACvB,WAAY,CACZ,cAAe,CAChB,qCCxKC,YACI,WAAY,CACf,CAEH,sCACI,iBACI,WAAY,CACf,CAGL,sCACE,kBACE,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACxB,mBAEC,YAAa,CACb,kBAAmB,CACpB,kBAEC,oBAAqB,CACtB,CAEH,sCAbE,kBAeE,oBAAqB,CAVvB,mBAaE,YAAa,CACb,qBAAsB,CAVxB,kBAaE,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACxB,CAMH,4BACE,UAAW,CACX,WAAY,CACZ,cAAe,CACf,KAAM,CACN,MAAO,CACP,cAAe,CAChB,UAGC,iBAAkB,CAClB,OAAQ,CACR,QAAS,CACV,kBAME,cAAe,CACf,QAAS,CACT,UAAW,CACZ,gBAEC,aFhDiB,CEiDlB,cAEC,aFpDe,CEqDhB,QAMA,KAAM,CACN,iBAAkB,CAClB,WAAY,CACZ,UAAW,CACX,8BFrEuB,CEsEvB,YAAa,CACb,kBAAmB,CAPrB,aASI,UAAW,CACX,UAAW,CACX,kBFvEe,CEwEf,cAAe,CACf,WAAY,CACZ,mCAAoC,CACpC,yBAA0B,CAC1B,aAAc,CACd,eAAgB,CAjBpB,mBAqBI,kBFnFgB,CE8DpB,oBAyBI,kBFvFgB,CEwFjB,aAOD,iBAAkB,CAClB,WAAY,CACZ,SAAU,CAHZ,eAKI,2BF5GkB,CE6GnB,WAOD,YAAa,CACb,YAAa,CACd,0BAOC,0BAA8B,CAC/B,UAGC,YAAa,CACb,uBAAwB,CACxB,YAAa,CACb,kBFzHiB,CE0HjB,4CAA6C,CAC9C,qBAGC,UAAW,CACZ,aAEC,oBAAqB,CACrB,SAAU,CACV,QAAS,CACT,SAAU,CACV,gBAAiB,CAClB,aAEC,oBAAqB,CACrB,SAAU,CACV,QAAS,CACV,eAEC,aFvJ8C,CEwJ9C,UAAW,CACX,iBAAkB,CACnB,iBAGC,aF7J8C,CEgK/C,kBAGC,SAAU,CACV,YAAa,CACb,cAAe,CAChB,iBAGC,SAAU,CACX,gBAGC,iBAAkB,CAClB,YAAa,CACb,QAAS,CACT,SAAU,CACV,gBAAiB,CACjB,uCAA2C,CAC3C,WAAY,CACZ,6BAA8B,CAC/B,KAEC,0BAA8B,CAC9B,0BAA2B,CAC5B,WAGC,sCAA0C,CAC3C,QAIC,iBAAkB,CAClB,QAAS,CACT,UAAW,CACX,QAAS,CACT,SAAU,CACV,gBAAiB,CACjB,YAAa,CACb,oBAAqB,CACrB,qBAAsB,CACvB,QAGG,0BAA2B,CAE9B,SAIC,mBAAoB,CACpB,gBAAiB,CACjB,mBAAoB,CACpB,oBAAqB,CACrB,YAAa,CACb,0BAA2B,CAC3B,kBAAmB,CACnB,iBAAkB,CAClB,WAAY,CACZ,WAAY,CAGb,YAGC,YAAa,CACb,WAAY,CACZ,iBAAkB,CAClB,OAAQ,CACR,wBAAyB,CACzB,gBAAiB,CANnB,eAYI,6BAA8B,CAC/B,iBAID,WAAY,CACZ,gBAAiB,CACjB,iBAAkB,CAClB,eAAgB,CAChB,WAAY,CAEb,mBAGC,YAAa,CACd,QAGC,SAAU,CACV,cAAe,CACf,UAAW,CACX,YAAa,CACb,mCAAoC,CACpC,yBAA0B,CAC1B,aFnQsB,CEoQvB,cAGC,+BFjQkB,CEkQnB,WAIG,kBFtQgB,CEuQhB,SAAU,CAHd,YAMI,kBFxQe,CEyQf,YAAa,CACd,OAID,iBAAkB,CACnB,oBAGC,cAAe,CACf,aAAc,CACd,mCAAoC,CACpC,yBAA0B,CAC1B,YAAa,CACb,kBFvRiB,CEwRjB,YAAa,CACd,kBAEC,cAAe,CACf,aAAc,CACd,mCAAoC,CACpC,yBAA0B,CAC1B,YAAa,CACb,kBFlSkB,CEmSlB,SAAU,CACX,kBAEC,MAAO,CAER,iBAEC,MAAO,CAEP,0BAA2B,CAC3B,gBAAiB,CAClB,gBAEC,QAAS,CACT,yBAA0B,CAC1B,mBAAoB,CACpB,eAAgB,CAChB,6BFtTuB,CEuTxB,uBAGG,WAAY,CACZ,aAAc,CACd,kBAAkB,CACnB,gBAGD,sBAAuB,CACxB,cAGC,kBAAmB,CACnB,qBAAsB,CACtB,iBAAkB,CAClB,yBAA0B,CAC1B,eAAgB,CAChB,aF/U8C,CEgV9C,kBAAmB,CACpB,eAKC,YAAa,CACb,UAAW,CAEZ,QAGC,SAAU,CACV,mBAAoB,CACrB,cAGC,UAAW,CACX,UAAW,CACZ,aAIC,UAAW,CACZ,eAEC,aAAc,CACd,iBAAkB,CAClB,QAAS,CACV,aAGC,gBAAiB,CAClB,UAGC,UAAW,CACX,cAAe,CACf,kBAAmB,CACnB,WAAY,CACZ,aFzXoB,CE2XrB,iBAGC,kBFnXiB,CEoXlB,OAGC,uBAAwB,CACxB,oBAAqB,CACrB,eAAgB,CACjB,iBAIG,gBAAiB,CACjB,YFzY4C,CE0Y7C,mBAGC,YF9YkB,CE+YnB,gBAGC,YAAa,CACd,eAGC,YAAa,CACd,eAGC,YFzZ4C,CE0Z7C,cAGC,2BAA+B,CAChC,iBAGC,cFzZgB,CE0ZhB,cAAe,CAChB,qBAGC,cFpaoB,CEqapB,cAAe,CAChB,mBAGC,cF5akB,CE6alB,cAAe,CAChB,cAIC,uCAA2C,CAC3C,yBAA0B,CAC3B,kBAGC,YF9agB,CE+ajB,oBAGC,YF3bkB,CE4bnB,sBAGC,YF5boB,CE6brB,cAGC,0BAA8B,CAC/B,YAEC,wBAAyB,CACzB,2BAA4B,CAC5B,cAAe,CAChB,YAEC,sBAAuB,CACvB,wBAAyB,CACzB,cAAe,CAChB,cAEC,wBAAyB,CACzB,0BAA2B,CAC3B,cAAe,CAChB,WAEC,sBAAuB,CACvB,wBAAyB,CACzB,cAAe,CAChB,WACY,YAAa,CAAI,MAG5B,0BAA2B,CAC5B,aAEC,WAAY,CACb,eAEC,iBAAkB,CACnB,aAEC,YAAa,CACd,0BAEC,SAAU,CACV,WAAY,CACb,gBAEC,UAAW,CACX,WAAY,CACZ,iBAAkB,CACnB,aAEC,iBAAkB,CAClB,QAAS,CACT,MAAO,CACR,0BAEC,UAAW,CACX,UAAW,CACZ,kBAID,YAAa,CACd,YAGC,yBAA0B,CAC1B,eAAgB,CAChB,WAAY,CACZ,2BAA4B,CAJ9B,0BAOI,QAAS,CACT,cAAe,CACf,UAAW,CACZ,8BAID,SAAU,CACV,kBAAmB,CACpB,WAGC,UAAW,CACX,gBAAiB,CACjB,UAAW,CACX,iBAAkB,CACnB,YAGC,eAAgB,CAChB,eAAgB,CAChB,UAAyB,CACzB,6BAA+B,CAC/B,UAAW,CACX,qBAAsB,CACtB,YAAa,CACb,gBAAiB,CACjB,iBAAkB,CAClB,yBAA0B,CAC3B,WAGC,iBAAkB,CACnB,YAGC,UAAW,CACX,gBAAiB,CACjB,YAAa,CACb,kBAAmB,CACnB,iBAAkB,CAClB,6BAA8B,CAC9B,SAAU,CACV,mBAAoB,CACpB,6BAA8B,CAC/B,WAGC,kBF3iBiB,CE4iBjB,cAAe,CACf,MAAO,CACP,WAAY,CACZ,yBAA0B,CAC1B,aFxjBsB,CEyjBvB,iBAGC,kBFtjBkB,CEujBnB,OAGC,gBAAiB,CAClB,OAEC,eAAiB,CACjB,gBAAiB,CAClB,OAEC,eAAgB,CACjB,UAKG,oBAAqB,CACrB,SAAU,CACV,QAAS,CAJb,aAMM,kBFzkBa,CE0kBb,yBAA0B,CAC1B,cAAe,CACf,YAAa,CACb,WAAY,CACZ,cAAe,CACf,qBAAsB,CACtB,kBAAmB,CACnB,sBAAuB,CACvB,WAAY,CACZ,aF7lB0C,CE8lB1C,qBAAsB,CAjB5B,mBAoBM,kBFzlBc,CE0lBf,WAOD,oBAAqB,CACrB,SAAU,CACV,QAAS,CAJb,uCAMM,kBFnmBa,CEomBb,yBAA0B,CAC1B,cAAe,CACf,YAAa,CACb,WAAY,CACZ,cAAe,CACf,qBAAsB,CACtB,kBAAmB,CACnB,sBAAuB,CACvB,WAAY,CACZ,aFxnBgB,CEynBhB,qBAAsB,CAjB5B,6CAqBM,kBFpnBc,CE+lBpB,8BAyBI,eAAgB,CAChB,cAAe,CACf,WAAY,CACZ,cAAe,CACf,qBAAsB,CACtB,WAAY,CACZ,aFtoB4C,CEumBhD,qCAiCM,UAAW,CAjCjB,sCAoCM,YAAa,CACb,gBAAiB,CArCvB,gDAwCU,gBAAiB,CAxC3B,qDA4CQ,MAAO,CA5Cf,oDA+CQ,MAAO,CA/Cf,wCAkDQ,gBAAiB,CACjB,QAAS,CAnDjB,yCAsDQ,gBAAiB,CAtDzB,oCA4DI,kBFxpBiB,CEypBlB,YAGD,cAAe,CACf,YAAa,CACb,gCAAiC,CAClC,eAGC,kBFrqBkB,CEsqBnB,eAGC,kBFvqBiB,CEwqBlB,cAGC,YAAa,CACb,gBAAiB,CACjB,cAAe,CACf,cAAe,CACf,WAAY,CALd,iCAOI,SAAU,CACV,kBFlrBe,CEmrBf,yBAA0B,CAC1B,YAAa,CACb,qBAAsB,CACtB,kBAAmB,CACnB,sBAAuB,CACvB,aFlsB4C,CEorBhD,mCAiBI,QAAS,CACT,qBAAsB,CACtB,WAAY,CACb,6CAGC,kBFnsBgB,CEosBnB,aAIC,SAAU,CACV,gBAAiB,CAClB,gCAEC,SAAU,CACV,YAAa,CACb,4BAA6B,CAC9B,YAEC,SAAU,CACV,gBAAiB,CAClB,8BAEC,SAAU,CACV,YAAa,CACb,4BAA6B,CAC9B,YAEC,SAAU,CACV,YAAa,CACd,8BAEC,SAAU,CACV,gBAAiB,CACjB,yBAA0B,CAC3B,mBAGC,SAAU,CACV,QAAS,CACV,4CAEC,SAAU,CACV,4BAA6B,CAC7B,WAAY,CACb,kBAEC,SAAU,CACV,QAAS,CACV,0CAEC,SAAU,CACV,WAAY,CACb,kBAEC,WAAY,CACZ,WAAY,CACb,0CAEC,SAAU,CACV,yBAA0B,CAC1B,QAAS,CACT,SAAU,CACV,QAAS,CACV,gBAIC,mBAAoB,CACpB,gBAAiB,CACjB,mBAAoB,CACpB,oBAAqB,CACrB,YAAa,CACb,0BAA2B,CAC3B,kBAAmB,CACnB,iBAAkB,CAClB,eAAgB,CATlB,+BAaI,SAAU,CACV,cAAe,CACf,UAAW,CACX,mCAAoC,CACpC,yBAA0B,CAC1B,aFzxBoB,CE0xBpB,WAAY,CAnBhB,qCAsBI,kBFpxBiB,CEqxBlB,cAID,UDvyBsB,CCwyBtB,gBDxyBsB,CCyyBtB,UDzyBsB,CC0yBtB,gBAAiB,CAJnB,iBAMI,QAAS,CACT,gBAAiB,CAClB,eAGD,kBFpyBiB,CEqyBjB,yBAA0B,CAC1B,cAAe,CACf,YAAa,CACb,WAAY,CACZ,cAAe,CACf,qBAAsB,CACtB,kBAAmB,CACnB,sBAAuB,CACvB,WAAY,CACZ,aFtzBsB,CEwzBvB,qBAGC,kBFrzBkB,CEszBnB,wBAIG,gBAAiB,CAClB,iBAID,iBAAkB,CAClB,YAAa,CACb,kBAAmB,CACpB,WAGC,iBAAkB,CAClB,kBFn0BmB,CEo0BnB,YAAa,CACb,kBAAmB,CACpB,YAGC,YAAa,CACb,kBAAmB,CACnB,UAAW,CACZ,wBAC2B,6BFl1BH,CEk1B6C,OAGpE,iBAAkB,CAClB,YAAa,CACb,kBAAmB,CAHrB,WAKI,kBFp1BiB,CE+0BrB,gBAOM,YFl2BgB,CEm2BjB,QAKH,WAAY,CACZ,6BAA8B,CAC/B,KAYC,aFr3B8C,CEs3B/C,gBAKG,aF53BkB,CE03BtB,mBAKI,aF93B4C,CE+3B7C,SAGD,kBFv3BmB,CEw3BnB,gCAAiC,CAClC,eAGC,kBF73BiB,CE83BlB,kBAGC,YAAa,CACb,sBAAuB,CACxB,WAEC,UAAW,CACX,WAAY,CACZ,aAAc,CASf,yBAGC,eAAgB,CAChB,gBAAiB,CACjB,WAAY,CACb,kBAGC,UAAW,CACX,WAAY,CACZ,qBAAiC,CACjC,kBAAmB,CACnB,kCAAmC,CACnC,gBAAiB,CAClB,mBAEC,UAAW,CACX,WAAY,CACZ,oBAAiC,CACjC,kBAAmB,CACnB,kCAAmC,CACnC,gBAAiB,CAClB,oBAGC,UAAW,CACX,QAAS,CACT,4BF96BkB,CE+6BlB,oBAAqB,CACrB,kBAAmB,CALrB,uBAOI,aAAc,CACd,UAAW,CACX,UAAW,CACX,SAAU,CACV,QAAS,CACT,oBAAqB,CACrB,gBAAiB,CAbrB,uBAgBI,SAAU,CACV,QAAS,CACT,oBAAqB,CACrB,gBAAiB,CAClB,qBAKC,aF58B4C,CE68B5C,WAAY,CACZ,YAAa,CACb,UAAW,CACX,kBAAmB,CANvB,0BAQM,MAAO,CARb,mBAaI,WAAY,CACZ,UAAW,CACX,eAAgB,CAChB,gCAAiC,CAhBrC,qBAkBK,eAAgB,CAChB,aF99BiB,CE28BtB,4BAsBM,UAAW,CACX,YAAa,CACb,eAAgB,CAChB,kBFz9Ba,CE09Bb,yBAA0B,CAC1B,kBAAmB,CA3BzB,iCA6BQ,MAAO,CA7Bf,2BAkCQ,SAAU,CACV,gBAAiB,CACjB,gBAAiB,CACjB,kBFv+BY,CEw+BZ,iBAAkB,CAClB,eAAe,CAvCvB,kCA2CI,kBF7+BgB,CEk8BpB,mCA+CI,kBFj/BgB,CEk/BjB,qBAID,UAAW,CACX,wBAAyB,CAF3B,wBAII,eAAgB,CAChB,WAAY,CACZ,aFngC4C,CEogC5C,gBAAiB,CACjB,oBAAqB,CACrB,wBAAyB,CACzB,kBF7/Be,CE8/Bf,+BFlgCqB,CEu/BzB,wBAcI,WAAY,CACZ,gBAAiB,CACjB,+BFvgCqB,CEwgCrB,kBFngCiB,CEogClB,qBAID,UAAW,CACX,wBAAyB,CACzB,sBAAuB,CAHzB,wBAKI,eAAgB,CAChB,WAAY,CACZ,aFzhC4C,CE0hC5C,gBAAiB,CACjB,kBAAmB,CATvB,wBAYI,WAAY,CACZ,gBAAiB,CAbrB,2BAgBI,kBFxhCe,CEyhCf,yBAA0B,CAjB9B,iCAoBI,kBF9hCgB,CE0gCpB,kCAwBI,kBFliCgB,CEmiCjB,kBAID,UAAW,CACX,wBAAyB,CAF3B,qBAKI,eAAgB,CAChB,WAAY,CACZ,aFrjC4C,CEsjC5C,WAAY,CACZ,kBAAmB,CATvB,sCAaI,UAAW,CACX,SAAU,CACV,kBAAmB,CAfvB,+BAmBI,iCF3jCqB,CEwiCzB,oEAqBM,yBAA0B,CArBhC,iCA0BI,iBAAkB,CAClB,SAAU,CA3Bd,kCA+BI,kBFnkCe,CEokCf,gBAAiB,CAhCrB,qBAoCI,kBFxkCe,CEykCf,WAAY,CACZ,WAAY,CAtChB,kKA4CM,kBFllCc,CEmlCf,QAMH,SAAU,CACV,oBAAqB,CAFvB,gBAII,WAAY,CACZ,UAAW,CACX,eAAgB,CAChB,gCAAiC,CAPrC,kBASK,eAAgB,CAChB,aF1mC2C,CE2mC3C,aAAc,CAXnB,mBAcM,eAAgB,CAdtB,yBAiBM,WAAY,CACZ,YAAa,CACb,eAAgB,CAChB,kBF1mCa,CE2mCb,yBAA0B,CAC1B,kBAAmB,CAtBzB,8BAwBQ,MAAO,CAxBf,+BA8BI,kBFtnCgB,CEunCjB,2BAID,qBAGM,cAAe,CAHrB,0BAKQ,UAAW,CACX,SAAU,CACX,CAMT,eAEI,gBAAiB,CAFrB,iBAKI,gBAAiB,CAClB,SAID,YAAa,CACb,cAAe,CACf,oBAAqB,CACrB,uBAAwB,CACxB,sBAAuB,CACvB,sBAAuB,CACvB,oBAAqB,CACrB,uBAAwB,CAR1B,iBAUI,MAAO,CACP,UAAW,CACX,YAAa,CACb,qBAAsB,CAb1B,yBAeM,qBAAsB,CACtB,gBAAiB,CACjB,kBFlqCc,CEmqCd,iBAAkB,CAClB,eAAe,CACf,cAAe,CACf,mBAAoB,CArB1B,0BAwBM,eAAgB,CAChB,kBFxqCa,CEyqCb,oBAAqB,CAEtB,0BAKH,QACE,cAAe,CAChB,CAGH,0BALE,QAOE,cAAe,CAChB,CAGH,SACE,yEAAgD,CAChD,yBAA0B,CAC1B,UAAW,CACX,WAAY,CACZ,cAAe,CACf,SAAU,CACV,UAAW,CACX,WAAY,CACb,QAIC,QAAS,CACT,SAAU,CACX,QAGC,cAAe,CACf,WAAY,CACZ,UAAW,CACX,OAAQ,CACR,QAAS,CACT,eAAgB,CAChB,kBAAmB,CACpB,SAGC,UAAW,CAEX,eAAgB,CAChB,sBAAuB,CACvB,eAAgB,CAChB,0BAA2B,CAC3B,qBAAsB,CACtB,YAAa,CACd,wBAIC,iBAAkB,CAClB,SAAU,CACV,UAAW,CACZ,SAEC,aAAc,CACd,iBAAkB,CAClB,mBAAoB,CACpB,8BF7uCkB,CE8uClB,gCF9uCkB,CE+uClB,iCF/uCkB,CEgvClB,+BFzvCoB,CE0vCpB,+BAAgC,CAChC,2BAA4B,CAC5B,uBAAwB,CACxB,6CAA8C,CAC9C,qCAAsC,CACvC,0BAEC,GACE,8BAA+B,CAC/B,sBAAuB,CAEzB,KACE,gCAAiC,CACjC,wBAAyB,CAAA,CAG7B,kBACE,GACE,8BAA+B,CAC/B,sBAAuB,CAEzB,KACE,gCAAiC,CACjC,wBAAyB,CAAA,CAK7B,aAEI,QACF,CAAC,gBAID,0BAA8B,CAE9B,YAAa,CAEd,cAGC,aFjyCsB,CEkyCtB,kBF1xCiB,CE2xCjB,0BAA2B,CAC3B,2BAA4B,CAC5B,YAAa,CACb,+BFhyCkB,CEiyCnB,YAEC,kBFryCuB,CEsyCxB,oCAFD,YAMI,UAAW,CACX,WAAY,CACb,CAGH,aACE,WAAY,CACZ,cAAe,CACf,gBACF,CAAC,eAGC,YAAa,CAj0Cb,YAs0CA,QAAS,CACT,SAAU,CACV,6BAA8B,CAHhC,iBAMM,wBAA2B,CAC3B,cAAe,CAClB,iBAID,iBAAkB,CAElB,OAAQ,CACR,SAAU,CACV,iBAAkB,CAClB,QAAS,CACT,YAAa,CACb,aAAc,CACd,gBAAiB,CACjB,gHAAgK,CAChK,iBAAkB,CACnB,qBAGC,8BAA+B,CAC/B,eAAgB,CAChB,iBAAkB,CAClB,MAAO,CACP,QAAQ,CACT,sBAGC,UAAW,CACX,iBAAkB,CAClB,WAAY,CACZ,cAAe,CACf,yCAA0C,CAC3C,oBAGC,UAAW,CACX,WAAY,CACZ,YAAa,CACb,aAAc,CACf,qBAGC,iBAAkB,CAClB,QAAS,CACT,UAAW,CACX,WAAY,CACZ,mBAAoB,CACrB,UAIC,YF33CoB,CE43CrB,WAGC,YF93C8C,CE+3C/C,aAGC,YF13CkB,CE23CnB,aAGC,YFv4CoB,CEw4CpB,iDAAwD,CACxD,yCAAgD,CACjD,aAGC,QAAS,CACT,kCACF,CAAC,iBAGC,GACC,SAAU,CAEX,IACE,SAAU,CAEZ,KACE,SAAU,CAAA,CAMd,4BACE,MAAM,CACN,MAAO,CACP,YAAa,CACb,oBAAqB,CACrB,iBAAkB,CACnB,oBAEC,WAAY,CACZ,UAAW,CACX,iBAAkB,CAHpB,wBAKI,aFx6CoB,CE06CrB,kBAGD,iBAAkB,CAClB,QAAS,CACT,UAAW,CACX,UAAW,CACX,aAAc,CACf,uBAGC,sDF/6CkB,CEg7ClB,mDFh7CkB,CEi7ClB,8CFj7CkB,CEm7CnB,4BAEC,aF37CsB,CE67CvB,aAGC,wBF17CkB,CERhB,iBAs8CF,WAAY,CACZ,UAAY,CACZ,gBAAiB,CACjB,kBAAmB,CACnB,cAAe,CACf,iBAAkB,CAClB,gBAAiB,CACjB,gBAAiB,CAEjB,2BF78CsB,CE+8CtB,iBAAkB,CAClB,cAAe,CACf,yBAA0B,CAE1B,UAAW,CACZ,sBAGC,WAAY,CACZ,YAAY,CACZ,sBAAuB,CACvB,kBAAmB,CACnB,cAAe,CAEf,2BF79CsB,CE89CtB,iBAAkB,CAClB,cAAe,CACf,yBAA0B,CAE1B,UAAW,CACX,iBAAkB,CACnB,2BAGC,MAAO,CACR,UAGC,MAAO,CACP,kBFx+CuB,CEy+CxB,YAGC,UAAW,CACX,WAAY,CACZ,kBAAmB,CACnB,mCF7+CkB,CE8+ClB,mCF9+CkB,CE++ClB,6BAA8B,CAC9B,iBAAkB,CACnB,MAEC,UAAW,CACX,WAAY,CACZ,6BAA8B,CAC9B,iBAAkB,CAClB,SAAU,CACX,cAGC,SAAU,CACV,UAAW,CACX,iBAAkB,CAClB,OAAQ,CACR,SAAU,CACV,UAAW,CACX,mCFjgDkB,CEkgDlB,kBAAmB,CACpB,kBAGC,sDFtgDkB,CEugDlB,mDFvgDkB,CEwgDlB,8CFxgDkB,CEygDlB,+BFzgDkB,CE0gDnB,MAEC,UAAW,CACX,WAAY,CACZ,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,gBAAiB,CAClB,KAGC,UAAW,CACX,SAAU,CACV,aAAc,CACd,oBAAqB,CACrB,oBAAqB,CACrB,sCFhiDsB,CEiiDtB,kBAAmB,CACnB,4BAA6B,CAC7B,SAAU,CACX,YAEC,uCFtiDsB,CEuiDtB,yDAA6D,CAC7D,sDAA0D,CAC1D,iDAAqD,CACtD,WAEC,YAAa,CACb,sBAAuB,CACvB,oBAAqB,CACrB,kBAAmB,CACnB,iBAAkB,CACnB,uBAEC,YAAa,CACd,QAEC,iBAAkB,CACnB,eAEC,uBAAwB,CACzB,eAEC,SAAU,CACV,iBAAkB,CAClB,KAAM,CACN,MAAO,CACR,kBAEG,YAAa,CAChB,sDAIC,SAAU,CACV,sBAAuB,CACxB,gBAEC,iBAAkB,CACjB,KAAM,CACP,OAAQ,CACR,eAAgB,CAChB,WAAY,CACZ,mCAAoC,CACpC,mBAAoB,CACpB,UAAW,CACX,eAAgB,CACjB,mBAEC,kBAAmB,CACnB,QAAS,CACT,SAAU,CACV,oBAAqB,CACrB,UAAW,CACX,eAAgB,CACjB,sCAGC,aAAc,CACd,QAAS,CACV,mBAEC,WAAW,CACX,kBAAmB,CACnB,UAAW,CACX,UAAW,CACZ,mBAEC,UAAW,CACZ,WClnDC,iBAAkB,CAClB,WAAY,CACZ,gBAAiB,CACjB,UAAW,CACX,cAAe,CACf,qBAAsB,CACtB,uCAAwC,CACzC,aAEC,qBAAsB,CACtB,yCAA6C,CAC9C,gBAEC,eAAgB,CAChB,UAAW,CACX,iBAAkB,CAClB,UAAW,CACX,kBHHkB,CGInB,iBAGC,iBAAkB,CAClB,MAAO,CACP,UAAW,CACX,iBAAkB,CAClB,sCHpBoB,CGqBrB,kBAEC,iBAAkB,CAClB,gBAAiB,CACjB,eAAgB,CAChB,UAAW,CACX,WAAY,CACZ,cAAe,CACf,iBAAkB,CAClB,wBH9BoB,CG+BpB,gCAAiC,CAClC,wBAEC,kBH/BsB,CGgCvB,gCAEC,oBHrCoB,CGsCpB,0BH7BkB,CG8BnB,gBAEC,iBAAkB,CAClB,QAAS,CACT,MAAO,CACP,UAAW,CACX,cAAe,CAChB,qBAEC,iBAAkB,CAClB,oBAAqB,CACrB,qBAAsB,CACtB,iBAAkB,CAClB,cAAe,CACf,UAAW,CACZ,4BAEC,UAAW,CACZ,gBAEC,iBAAkB,CAClB,UAAW,CACX,UAAW,CACX,sBAAuB,CACxB,eAEC,iBAAkB,CAClB,WAAY,CACZ,gBAAiB,CACjB,SAAU,CACV,UAAW,CACX,wBHtEoB,CGuEpB,qBAAsB,CACtB,cAAe,CACf,iBAAkB,CAClB,qBAAsB,CACvB,2BAEC,gBAAiB,CAClB,0BAEC,gBAAiB,CAClB,sBAEC,oBHhFsB,CGiFvB,oBAEC,wBH7EkB,CG8EnB,qCAEC,qBAAsB,CACvB,yEAGC,iBAAkB,CAClB,qBAAsB,CACtB,kBAAmB,CACpB,4EAGC,6BAA8B,CAC/B,oBAEC,SAAU,CACV,WAAY,CACb,qCAEC,QAAS,CACT,SAAU,CACX,sCAEC,iBAAkB,CAClB,gBAAiB,CACjB,kBAAmB,CACpB,oCAEC,KAAM,CACN,SAAU,CACV,WAAY,CACb,oCAEC,WAAY,CACZ,SAAU,CACX,mCAEC,QAAS,CACT,kBAAmB,CACpB,+CAEC,kBAAmB,CACpB,8CAEC,kBAAmB,CACpB,uEAGC,sBAAuB,CACvB,wBAAyB,CACzB,wBAAyB,CACzB,2BAA4B,CAC7B,mCAEC,sBAAuB,CACvB,wBAAyB,CACzB,wBAAyB,CACzB,2BAA4B,CAC7B,0JAGC,wCAAyC,CACzC,4BAA6B,CAC9B,4EAEC,yCAA0C,CAC1C,4BAA6B,CApB/B,uEAwBE,qBAAsB,CACtB,wDAAyD,CAlB3D,mCAqBE,gEAAiE,CAClE,qCAEC,GACE,SAAU,CACV,yBAA0B,CAC1B,qBAAsB,CAExB,KACE,yBAA0B,CAC1B,qBAAsB,CAAA,CAG1B,sCACE,GACE,yBAA0B,CAC1B,qBAAsB,CAExB,KACE,SAAU,CACV,yBAA0B,CAC1B,qBAAsB,CAAA,CAG1B,mBACE,iBAAkB,CAClB,YAAa,CACb,WAAY,CACZ,kBAAmB,CACnB,qBAAsB,CACtB,yCAA6C,CAC9C,qBAEC,qBAAsB,CACtB,yCAA6C,CAC9C,0BAEC,YAAa,CACd,iCAEC,mBAAoB,CACrB,uDAEC,YAAa,CAcd,0DASC,UAAW,CACX,QAAS,CACT,gBAAiB,CACjB,sBAAuB,CACvB,wBAAyB,CAC1B,WC7OC,iBAAkB,CAClB,OAAQ,CACR,OAAQ,CACT,eAGC,eAAgB,CAChB,UAAW,CACX,WAAY,CACZ,WAAY,CACZ,UAAW,CACX,gBAAiB,CACjB,yBAA0B,CAC1B,aJLsB,CIMtB,wBJEiB,CIDlB,qBAGC,wBJJkB,CIKnB,sBAGC,wBJRkB,CISnB,yBAGC,wBJlBsB,CImBtB,aAAc,CACf,iBAGC,eAAgB,CAChB,yBAA0B,CAC3B,mBAGC,eAAgB,CAChB,yBAA0B,CAC3B,mBAGC,eAAgB,CAChB,yBAA0B,CAC3B,oBAGC,eAAgB,CAChB,yBAA0B,CAC3B,oBAGC,eAAgB,CAChB,yBAA0B,CAjB5B,mBAqBE,eAAgB,CAChB,yBAA0B,CAC3B,kBAGC,eAAgB,CAChB,yBAA0B,CAC3B,oBAGC,eAAgB,CAChB,yBAA0B,CAC3B,iBAGC,eAAgB,CAChB,yBAA0B",sourcesContent:["/**\n  GLOBAL CSS\n**/\n\n// set panel width (required: match with Panels.jsx panel width value)\n$panel-width: 18%;\n// leave this as-is\n$map-width: calc(100% - #{$panel-width});\n\nbody {\n  line-height: 1.4;\n  font-weight: 300 !important;\n  color: $luna-primary;\n  background: $luna-background;\n  font-family: 'Roboto', sans-serif;\n  font-size: 12px !important;\n  overflow-x: hidden;\n  overflow-y: hidden;\n}\n\n/* SCROLL */\n::-webkit-scrollbar {\n  width: 4px;\n}\n\n::-webkit-scrollbar-track {\n  background-color: $luna-background;\n}\n\n::-webkit-scrollbar-thumb {\n  background-color: $luna-primary-darken;\n}\n\n.scrolly {\n  overflow-y: scroll;\n  overflow-x: hidden;\n  height: 100%;\n}\n\n/* FONT WEIGHTS */\n.bold {\n  font-weight: 500;\n}\n\n.thin {\n  font-weight: 200;\n}\n\n.nomargin {\n  margin: 0;\n}\n\n/* POINTER */\n.noselect {\n  -webkit-touch-callout: none; /* iOS Safari */\n  -webkit-user-select: none;   /* Chrome/Safari/Opera */\n  -khtml-user-select: none;    /* Konqueror */\n  -moz-user-select: none;      /* Firefox */\n  -ms-user-select: none;       /* Internet Explorer/Edge */\n  user-select: none;           /* Non-prefixed version, currently\n                                  not supported by any browser */\n}\n\nh5 {\n  font-weight: 200;\n  margin: 0.8rem 0rem 0.8rem 0rem;\n}\n\n.pointer {\n  cursor: pointer;\n}\n\n.nopointerevents  {\n  pointer-events: none;\n}\n\n/* LAYOUT */\n.wordwrap {\n   white-space: pre-wrap;      /* CSS3 */\n   white-space: -moz-pre-wrap; /* Firefox */\n   white-space: -pre-wrap;     /* Opera <7 */\n   white-space: -o-pre-wrap;   /* Opera 7 */\n   word-wrap: break-word;      /* IE */\n}\n\n.justified {\n  display: flex;\n  justify-content: center;\n  align-content: center;\n  align-items: center;\n}\n\n/* BUTTONS AND INPUTS */\n.btn {\n  background: $luna-dark;\n  transition: all 200ms ease;\n  margin: 5px 0px 5px 0px;\n  font-weight: 100;\n  padding: 5px 10px 5px 10px;\n  text-align: center;\n  text-decoration: none;\n  color: $luna-secondary;\n}\n\n.table-btn {\n  float: left;\n  text-align: left;\n  margin-right: 5px;\n}\n\n.btn:hover {\n  background: $luna-light;\n  text-decoration: none;\n}\n\n.input {\n  background: none;\n  color: $luna-secondary;\n  border: none;\n  font-size: 1rem;\n  box-sizing: border-box;\n  font-weight: 100;\n  margin-left: 1rem;\n  margin-right: 1rem;\n  width: 95%;\n}\n\n.input:focus {\n  outline: 0;\n}\n\n::-webkit-input-placeholder {\n   color: $luna-primary-darken;\n}\n\n.button {\n  margin: 1rem 0rem 1rem 0rem;\n  transition: all 100ms ease;\n}\n\n.button:hover {\n  cursor: pointer;\n  text-shadow: 0px 0px 5px rgba(110, 110, 110, 1);\n}\n\nbutton:focus {\n  outline:0;\n}\n\nth, tr {\n  font-weight: 100;\n}\n\nth tr{\n  text-align: left;\n  color: #6b6b6b !important;\n}\n","/**\n *  LUNA COLORS\n**/\n\n/* colors */\n// text, titles.\n$luna-primary: #d1dadb;\n$luna-primary-darken: darken($luna-primary, 20%);\n// links and buttons\n$luna-secondary: #e6f4d7;\n$luna-secondary-darken: darken($luna-secondary, 20%);\n$luna-highlight: #a0ba32;\n// panels background color\n$luna-background: #0f1111;\n// e.g.: button hover\n$luna-light: #2c3a3a;\n// e.g.: button idle\n$luna-dark: #1c2626;\n$luna-darker: #111617;\n$luna-red: #ed492d;\n$luna-green: #5effa9;\n","/**\n  PANELS CSS\n**/\n\n$panel-widget-margin: 2%;\n\n#panels {\n  position: absolute;\n  top: 40px;\n  height: calc(100% - 40px);\n}\n\n.panel {\n  float: left;\n  min-width: 400px;\n  display: flex;\n  flex-direction: column;\n  background-color: $luna-background;\n  border-top: 2px solid #000;\n  transition: width 100ms ease;\n  article {\n    margin: $panel-widget-margin;\n    header {\n      font-size: 1.2rem;\n      line-height: 110%;\n      font-weight: 200;\n      margin: 0.8rem 0rem 0.8rem 0rem;\n    }\n  }\n}\n\n.secondary {\n  background: rgba($luna-background, 0.9);\n}\n\n/**\n  PANEL ANIMATION\n */\n\n.panel-enter {\n  opacity: 0;\n  -moz-transform: translateX(-50%);\n  -ms-transform: translateX(-50%);\n  -webkit-transform: translateX(-50%);\n  -o-transform: translateX(-50%);\n  transform: translateX(-50%);\n}\n\n.panel-appear {\n  opacity: 0.5;\n  -moz-transform: translateX(-50%);\n  -ms-transform: translateX(-50%);\n  -webkit-transform: translateX(-50%);\n  -o-transform: translateX(-50%);\n  transform: translateX(-50%);\n  pointer-events: none;\n}\n.panel-appear.panel-appear-active {\n  opacity: 1;\n  -moz-transform: translateX(0%);\n  -ms-transform: translateX(0%);\n  -webkit-transform: translateX(0%);\n  -o-transform: translateX(0%);\n  transform: translateX(0%);\n  transition: all 150ms ease;\n}\n.panel-enter.panel-enter-active {\n  opacity: 1;\n  -moz-transform: translateX(0%);\n  -ms-transform: translateX(0%);\n  -webkit-transform: translateX(0%);\n  -o-transform: translateX(0%);\n  transform: translateX(0%);\n  transition: all 150ms ease;\n}\n\n.panel-leave {\n  opacity: 1;\n}\n\n.panel-leave.panel-leave-active {\n  opacity: 0;\n  -moz-transform: translateX(-50%);\n  -ms-transform: translateX(-50%);\n  -webkit-transform: translateX(-50%);\n  -o-transform: translateX(-50%);\n  transform: translateX(-50%);\n  pointer-events: none;\n  transition: all 150ms ease;\n}\n\n.secondary-panel {\n  background: $luna-background;\n}\n\na.close-button {\n  text-align: right;\n  cursor: pointer;\n  margin-bottom: -10px;\n  height: 10px;\n}\n\na.close-button .popup {\n  color: black;\n}\n\n.slide-out {\n  opacity: 0;\n  -moz-transform: translateX(-50%);\n  -ms-transform: translateX(-50%);\n  -webkit-transform: translateX(-50%);\n  -o-transform: translateX(-50%);\n  transform: translateX(-50%);\n  pointer-events: none;\n}\n\n/* item list */\n.clickable-rows td{\n  cursor: pointer;\n}\ntable.scrolltable {\n  display: block;\n  height: 30em;\n}\n\n/* sorting */\n.table-cell-sort-icon {\n  margin-left:4px;\n}\n.table-cell-sort-icon .fa-sort {\n  opacity:0.3;\n}\n\n/* paging */\n.loading-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  margin: 0;\n  height: 100%;\n  min-height: 100%;\n  width: 100%;\n  background-color: rgba(0,0,0,0.5);\n  display: flex;\n}\n.loading-overlay .spinner {\n  top: 50%;\n  margin-top: -50px;\n}\n.paging {\n  text-align: right;\n  margin: 0.5rem 0 1rem 0;\n}\n.paging-button {\n  color: $luna-secondary;\n  background: $luna-dark;\n  padding: 8px;\n  margin: 0 0 0 0.25rem;\n  outline: 0;\n  border: 0;\n  cursor: pointer;\n}\n.paging-button:hover{\n  background: $luna-light;\n}\n.paging-button-disabled,\n.paging-button-disabled:hover {\n  background: transparent;\n  opacity: 0.5;\n  cursor: inherit;\n}\n","/* MEDIA QUERIES */\n@media screen and (max-width: 850px) {\n  #timeslider {\n      opacity: 0.0;\n  }\n}\n@media screen and (max-width: 1024px) {\n    .playback-button {\n        opacity: 0.0;\n    }\n}\n\n@media screen and (min-width: 1024px) {\n  .justify-on-large {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  .flex-row-on-large {\n    display: flex;\n    flex-direction: row;\n  }\n  .justify-on-small {\n    display: inline-block;\n  }\n}\n@media screen and (max-width: 1024px) {\n  .justify-on-large {\n    display: inline-block;\n  }\n  .flex-row-on-large {\n    display: flex;\n    flex-direction: column;\n  }\n  .justify-on-small {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n}\n\n/**\n * a fixed div covering the screen. Example use: timeslider and knob dragging\n*/\n.fullscreen {\n  width: 100%;\n  height: 100%;\n  position: fixed;\n  top: 0;\n  left: 0;\n  cursor: default;\n}\n\n.noscreen {\n  visibility: hidden;\n  width: 0;\n  height: 0;\n}\n\n/**\n * socket indicator\n */\n #socket-indicator {\n   position: fixed;\n   top: 10px;\n   right: 10px;\n }\n .socket-success {\n   color: $luna-green;\n }\n .socket-error {\n   color: $luna-red;\n }\n\n/**\n * TOPBAR\n */\n.topbar {\n  top: 0;\n  position: absolute;\n  height: 40px;\n  width: 100%;\n  background: rgba($luna-background, 0.85);\n  display: flex;\n  align-items: center;\n  .tab {\n    float: left;\n    margin: 5px;\n    background: $luna-dark;\n    cursor: pointer;\n    padding: 5px;\n    border-bottom: 1px solid transparent;\n    transition: all 100ms ease;\n    color: #e6f4d7;\n    min-width: 100px;\n    @extend .justified;\n  }\n  .tab:hover {\n    background: $luna-light;\n  }\n\n  .tab.active {\n    background: $luna-light;\n  }\n}\n\n/**\n * Attribution\n*/\n.attribution {\n  position: absolute;\n  bottom: 25px;\n  right: 5px;\n  a {\n    color: rgba($luna-primary, 0.4);\n  }\n}\n\n/**\n * INSPECTOR\n */\n.inspector {\n  height: 400px;\n  padding: 10px;\n}\n\n.inspector-svg {\n\n}\n\n.inspector-svg:hover .bar {\n  fill: rgba(209, 255, 252, 0.2);\n}\n\n.node-row {\n  display: flex;\n  margin: 0px 0px 10px 0px;\n  padding: 20px;\n  background: $luna-dark;\n  box-shadow: 0px 0px 18px 0px rgba(0,0,0,0.75);\n}\n\n.node-row:last-child {\n  margin: 0px;\n}\n.node-row ul{\n  list-style-type: none;\n  padding: 0;\n  margin: 0;\n  width: 40%;\n  margin-right: 10%;\n}\n.node-row li{\n  list-style-type: none;\n  padding: 0;\n  margin: 0;\n}\n.node-row .key {\n  color: $luna-primary-darken;\n  float: left;\n  margin-right: 10px;\n}\n\n.node-row .value {\n  color: $luna-primary-darken;\n  //float: right;\n  @extend .bold;\n}\n\n.node-row .detail {\n  width: 75%;\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.node-row .graph {\n  width: 25%;\n}\n\n.node-row-label {\n  position: absolute;\n  bottom: -14px;\n  margin: 0;\n  right: 46%;\n  font-size: 0.6rem;\n  color: rgba(209, 255, 252, 0.75) !important;\n  opacity: 0.3;\n  transition: opacity 100ms ease;\n}\n.bar {\n  fill: rgba(209, 255, 252, 0.4);\n  transition: fill 150ms ease;\n}\n\n.bar:hover {\n  fill: rgba(209, 255, 252, 0.75) !important;\n}\n\n/* MAP LAYERS AND LAYER CONTROLS */\n#layers {\n  position: absolute;\n  top: 50px;\n  right: 10px;\n  height: 0;\n  width: 80%;\n  overflow: visible;\n  display: flex;\n  align-items: flex-end;\n  flex-direction: column;\n}\n\n.layers {\n    margin: 1rem 0rem 1rem 0rem;\n    @extend .noselect;\n}\n\n\n.toggles {\n  display: -webkit-box;\n  display: -moz-box;\n  display: -ms-flexbox;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-flex-flow: row wrap;\n  flex-flow: row wrap;\n  text-align: center;\n  height: 40px;\n  margin: -2px;\n  @extend .thin;\n  @extend .noselect;\n}\n\n.layers-nav {\n  display: flex;\n  height: 36px;\n  position: absolute;\n  right: 0;\n  justify-content: flex-end;\n  padding-top: 10px;\n  a {\n    @extend .noselect;\n    @extend .pointer;\n  }\n  h5 {\n    margin: 0.5rem 0 0.5rem 0.5rem;\n  }\n}\n\n.layers-expanded {\n  width: 400px;\n  max-height: 400px;\n  position: absolute;\n  margin-top: 56px;\n  height: auto;\n  @extend .scrolly;\n}\n\n.layer:first-child {\n  margin-top: 0;\n}\n\n.toggle {\n  flex: auto;\n  cursor: pointer;\n  margin: 2px;\n  padding: 10px;\n  border-bottom: 1px solid transparent;\n  transition: all 100ms ease;\n  color: $luna-secondary;\n}\n\n.toggle:hover {\n  border-bottom: solid 1px $luna-light;\n}\n\n.toggle {\n  &.on {\n    background: $luna-light;\n    opacity: 1;\n  }\n  &.off {\n    background: $luna-dark;\n    opacity: 0.75;\n  }\n}\n\n.layer {\n  margin-top: 0.6rem;\n}\n\n.layer-bar-inactive {\n  cursor: pointer;\n  height: 2.5rem;\n  border-bottom: 1px solid transparent;\n  transition: all 100ms ease;\n  display: flex;\n  background: $luna-dark;\n  opacity: 0.75;\n}\n.layer-bar-active {\n  cursor: pointer;\n  height: 2.5rem;\n  border-bottom: 1px solid transparent;\n  transition: all 100ms ease;\n  display: flex;\n  background: $luna-light;\n  opacity: 1;\n}\n.layer-bar-button {\n  flex: 1;\n  @extend .justified;\n}\n.layer-bar-title {\n  flex: 7;\n  @extend .justified;\n  justify-content: flex-start;\n  margin-left: 1rem;\n}\n.layer-controls {\n  height: 0;\n  transition: all 200ms ease;\n  pointer-events: none;\n  overflow: hidden;\n  background: rgba($luna-background, 0.9);\n}\n.layer-controls{\n  &.expand{\n    height: auto;\n    padding: 0% 5%;\n    pointer-events:all;\n  }\n}\n.layer-property {\n  margin: 0.5rem 0 1rem 0;\n}\n.property-bar {\n  /* border-bottom: 1px solid #2c3a3a; */\n  padding-top: 0.6rem;\n  padding-bottom: 0.6rem;\n  text-align: center;\n  transition: all 100ms ease;\n  font-weight: 400;\n  color: $luna-primary-darken;\n  margin-bottom: 1rem;\n}\n.property-control {\n\n}\n.layer-control {\n  padding: 1rem;\n  width: 100%;\n  @extend .noselect;\n}\n\n.hidden {\n  opacity: 0;\n  pointer-events: none;\n}\n\n.layer-stripe {\n  width: 100%;\n  height: 2px;\n}\n\n/* LAYER CONTROLS */\n.rangeslider {\n  width: 100%;\n}\n.rangeslider p {\n  color: #4a6363;\n  text-align: center;\n  margin: 0;\n}\n\n.radio-check {\n  font-size: 0.9rem;\n}\n\n.dropdown {\n  width: 100%;\n  padding: 0.5rem;\n  background: #2c3a3a;\n  border: none;\n  color: $luna-primary;\n  @extend .noselect;\n}\n\n.dropdown-option {\n  background: $luna-dark;\n}\n\nselect {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n}\n\n/* SVG AND GRAPHS */\n  .aperture-marker {\n    cursor: ew-resize;\n    fill: $luna-primary-darken;\n  }\n\n  .aperture-midpoint {\n    fill: $luna-primary;\n  }\n\n  .aperture-label {\n    fill: #4d6365;\n  }\n\n  .aperture-area {\n    fill: #4d6365;\n  }\n\n  .aperture-rail {\n    fill: $luna-primary-darken;\n  }\n\n  .circle-white {\n    fill: rgba(209, 255, 252, 0.05);\n  }\n\n  .path-luna-light {\n    stroke: $luna-light;\n    stroke-width: 1;\n  }\n\n  .path-luna-secondary {\n    stroke: $luna-secondary;\n    stroke-width: 1;\n  }\n\n  .path-luna-primary {\n    stroke: $luna-primary;\n    stroke-width: 1;\n  }\n\n  /* d3 generated classes */\n  .tick, .domain {\n    stroke: rgba(209, 255, 252, 0.5) !important;\n    stroke-width: 1 !important;\n  }\n\n  .graph-luna-light {\n    fill: $luna-light;\n  }\n\n  .graph-luna-primary {\n    fill: $luna-primary;\n  }\n\n  .graph-luna-secondary {\n    fill: $luna-secondary;\n  }\n\n  .graph-orange {\n    fill: rgba(240, 121, 56, 0.53);\n  }\n  .graph-cyan {\n    fill: rgba(0,255,255,0.2);\n    stroke: rgba(0,255,255,0.25);\n    stroke-width: 1;\n  }\n  .graph-blue {\n    fill: rgba(0,0,255,0.3);\n    stroke: rgba(0,0,255,0.5);\n    stroke-width: 1;\n  }\n  .graph-yellow {\n    fill: rgba(255,255,0,0.3);\n    stroke: rgba(255,255,0,0.5);\n    stroke-width: 1;\n  }\n  .graph-red {\n    fill: rgba(255,0,0,0.3);\n    stroke: rgba(255,0,0,0.5);\n    stroke-width: 1;\n  }\n  .axis text { display: none; }\n\n  .axis {\n    shape-rendering: crispEdges;\n  }\n  .x.axis line {\n    stroke: none;\n  }\n  .x.axis .minor {\n    stroke-opacity: .5;\n  }\n  .x.axis path {\n    display: none;\n  }\n  .y.axis line, .y.axis path {\n    fill: none;\n    stroke: #000;\n  }\n  .fill-container {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n  }\n  .svg-content {\n    position: absolute;\n    bottom: 0;\n    left: 0;\n  }\n  .svg-container-limeseries {\n    width: 100%;\n    height: 90%;\n  }\n\n/* MAP CALLOUT */\n.callout div path {\n  stroke: white;\n}\n\n.mc-callout {\n  transition: all 200ms ease;\n  min-width: 100px;\n  height: 60px;\n  transform-style: preserve-3d;\n\n  .close-button {\n    top: 12px;\n    font-size: 1rem;\n    right: 14px;\n  }\n}\n\n.mc-callout:hover .mc-buttons {\n  opacity: 1;\n  pointer-events: all;\n}\n\n.mc-stripe {\n  height: 6px;\n  background: white;\n  width: 100%;\n  margin-bottom: 1px;\n}\n\n.mc-content{\n  max-height: 50px;\n  min-width: 200px;\n  color: rgb(153, 153, 153);\n  background: rgba(22,22,24, 0.9);\n  width: 100%;\n  box-sizing: border-box;\n  padding: 1rem;\n  font-size: 0.9rem;\n  margin-bottom: 1px;\n  transition: all 150ms ease;\n}\n\n.mc-expand{\n  max-height: 1000px;\n}\n\n.mc-buttons {\n  width: 100%;\n  font-size: 0.9rem;\n  display: flex;\n  flow-direction: row;\n  flow-wrap: no-wrap;\n  justify-content: space-between;\n  opacity: 0;\n  pointer-events: none;\n  transition: opacity 150ms ease;\n}\n\n.mc-button {\n  background: $luna-dark;\n  cursor: pointer;\n  flex: 1;\n  height: 20px;\n  transition: all 200ms ease;\n  color: $luna-secondary;\n}\n\n.mc-button:hover {\n  background: $luna-light;\n}\n\n.mc-b1 {\n  margin-right: 1px;\n}\n.mc-b2 {\n  margin-left : 1px;\n  margin-right: 1px;\n}\n.mc-b3 {\n  margin-left: 1px;\n}\n\n/* LIST ITEMS */\n.ul-li {\n  ul {\n    list-style-type: none;\n    padding: 0;\n    margin: 0;\n    li {\n      background: $luna-dark;\n      transition: all 150ms ease;\n      cursor: pointer;\n      display: flex;\n      padding: 3px;\n      margin-top: 2px;\n      box-sizing: border-box;\n      align-items: center;\n      justify-content: center;\n      height: 50px;\n      color: $luna-primary-darken;\n      box-sizing: border-box;\n    }\n    li:hover {\n      background: $luna-light;\n    }\n  }\n}\n\n/* SEARCH */\n#search{\n  ul{\n    list-style-type: none;\n    padding: 0;\n    margin: 0;\n    li.search-autocomplete-item {\n      background: $luna-dark;\n      transition: all 150ms ease;\n      cursor: pointer;\n      display: flex;\n      padding: 3px;\n      margin-top: 2px;\n      box-sizing: border-box;\n      align-items: center;\n      justify-content: center;\n      height: 50px;\n      color: $luna-primary;\n      box-sizing: border-box;\n    }\n\n    li.search-autocomplete-item:hover{\n      background: $luna-light;\n    }\n  }\n  li.search-detail-item {\n    background: none;\n    cursor: pointer;\n    padding: 5px;\n    margin-top: 2px;\n    box-sizing: border-box;\n    height: auto;\n    color: $luna-primary-darken;\n    header {\n      clear: both;\n    }\n    section {\n      display: flex;\n      flex-wrap: nowrap;\n      header {\n        h5 {\n          font-size: 0.5rem;\n        }\n      }\n      .right-section {\n        flex: 1;\n      }\n      .left-section {\n        flex: 1;\n      }\n      p {\n        font-size: 0.7rem;\n        margin: 0;\n      }\n      h6 {\n        font-size: 0.9rem;\n      }\n    }\n  }\n\n  li.search-detail-item:hover{\n    background: $luna-darker;\n  }\n}\n#search-bar {\n  padding: 0.8rem;\n  display: flex;\n  transition: background 200ms ease;\n}\n\n.search-locked {\n  background: $luna-light;\n}\n\n.search-active {\n  background: $luna-dark;\n}\n\n.color-search {\n  display: flex;\n  flex-wrap: nowrap;\n  cursor: pointer;\n  margin-top: 2px;\n  height: 50px;\n  .color-search-text {\n    width: 98%;\n    background: $luna-dark;\n    transition: all 150ms ease;\n    display: flex;\n    box-sizing: border-box;\n    align-items: center;\n    justify-content: center;\n    color: $luna-primary-darken;\n  }\n  .color-search-stripe {\n    width: 2%;\n    background-color: #F00;\n    height: 100%;\n  }\n}\n.color-search:hover .color-search-text:hover {\n    background: $luna-light;\n}\n\n/* ANIMATIONS */\n.item-appear {\n  opacity: 0;\n  margin-top: -10px;\n}\n.item-appear.item-appear-active {\n  opacity: 1;\n  margin-top: 0;\n  transition: all 200ms ease-in;\n}\n.item-enter {\n  opacity: 0;\n  margin-top: -10px;\n}\n.item-enter.item-enter-active {\n  opacity: 1;\n  margin-top: 0;\n  transition: all 200ms ease-in;\n}\n.item-leave {\n  opacity: 1;\n  margin-top: 0;\n}\n.item-leave.item-leave-active {\n  opacity: 0;\n  margin-top: -10px;\n  transition: all 200ms ease;\n}\n\n.searchitem-appear {\n  opacity: 0;\n  height: 0;\n}\n.searchitem-appear.searchitem-appear-active {\n  opacity: 1;\n  transition: all 100ms ease-in;\n  height: 50px;\n}\n.searchitem-enter {\n  opacity: 0;\n  height: 0;\n}\n.searchitem-enter.searchitem-enter-active {\n  opacity: 1;\n  height: 50px;\n}\n.searchitem-leave {\n  opacity: 0.3;\n  height: 50px;\n}\n.searchitem-leave.searchitem-leave-active {\n  opacity: 0;\n  transition: all 100ms ease;\n  height: 0;\n  padding: 0;\n  margin: 0;\n}\n\n/* WIDGETS */\n.buttons-widget {\n  display: -webkit-box;\n  display: -moz-box;\n  display: -ms-flexbox;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-flex-flow: row wrap;\n  flex-flow: row wrap;\n  text-align: center;\n  margin: 4px -2px;\n  @extend .thin;\n  @extend .noselect;\n  .button-widget {\n    flex: auto;\n    cursor: pointer;\n    margin: 2px;\n    border-bottom: 1px solid transparent;\n    transition: all 100ms ease;\n    color: $luna-secondary;\n    height: 30px;\n  }\n  .button-widget:hover{\n    background: $luna-darker;\n  }\n}\n\n.title-widget {\n  margin: -$panel-widget-margin;\n  margin-bottom: $panel-widget-margin;\n  padding: $panel-widget-margin;\n  padding-top: 3rem;\n  h1 {\n    margin: 0;\n    font-size: 1.6rem;\n  }\n}\n.button-widget {\n  background: $luna-dark;\n  transition: all 150ms ease;\n  cursor: pointer;\n  display: flex;\n  padding: 3px;\n  margin-top: 2px;\n  box-sizing: border-box;\n  align-items: center;\n  justify-content: center;\n  height: 30px;\n  color: $luna-secondary;\n\n}\n\n.button-widget:hover{\n  background: $luna-light;\n}\n\n.panel-header-widget {\n  h1 {\n    font-size: 1.6rem;\n  }\n}\n\n.signal-strength {\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n\n.histogram {\n  position: relative;\n  background: $luna-darker;\n  display: flex;\n  align-items: center;\n}\n\n.two-charts {\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n}\n.two-charts > :last-child { border-left: 2px solid $luna-background;}\n\n.chart {\n  position: relative;\n  display: flex;\n  align-items: center;\n  svg {\n    background: $luna-darker;\n    text {\n      fill: $luna-primary;\n    }\n  }\n}\n\n.h-rect {\n  opacity: 0.9;\n  transition: opacity 150ms ease;\n}\n\n.h-rect:hover {\n  // opacity: 1 !important;\n}\n\n.histogram:hover .h-rect {\n  // opacity: 0.5;\n}\n\n\n#grs {\n  color: $luna-primary-darken;\n}\n\n\n.scatter_plot {\n  p {\n    color: $luna-primary;\n  }\n  p.ts{\n    color: $luna-primary-darken;\n  }\n}\n.cnv-sml {\n  background: $luna-darker;\n  transition: background 200ms ease;\n}\n\n.cnv-sml:hover {\n  background: $luna-dark;\n}\n\n.key-value-widget {\n  display: flex;\n  margin: 0.5rem 0 2rem 0;\n}\n.key-value {\n  width: 50px;\n  height: 50px;\n  margin: 0.5rem;\n  //key\n  h5 {\n\n  }\n  //value\n  p {\n\n  }\n}\n\n.header-paragraph-widget {\n  line-height: 1.4;\n  font-size: 1.1rem;\n  margin: 1rem;\n}\n/* cell */\n.cell-info-dot-on {\n  width: 10px;\n  height: 10px;\n  border: 1px solid rgba(0,255,0,1);\n  border-radius: 100%;\n  background-color: rgba(0,255,0,0.5);\n  margin-left: 15px;\n}\n.cell-info-dot-off {\n  width: 10px;\n  height: 10px;\n  border: 1px solid rgba(255,0,0,1);\n  border-radius: 100%;\n  background-color: rgba(255,0,0,0.5);\n  margin-left: 15px;\n}\n\ndl.description-list {\n  width: 100%;\n  margin: 0;\n  border-top: 1px solid $luna-light;\n  display: inline-block;\n  padding-top: 0.5rem;\n  dt {\n    color: #98acae;\n    float: left;\n    clear: left;\n    width: 30%;\n    margin: 0;\n    padding-bottom: 0.2em;\n    padding-left: 5px;\n  }\n  dd {\n    width: 70%;\n    margin: 0;\n    padding-bottom: 0.2em;\n    padding-left: 5px;\n  }\n}\n\n.score-table {\n  .header {\n    color: $luna-primary-darken;\n    height: 30px;\n    display: flex;\n    width: 100%;\n    flex-direction: row;\n    .box {\n      flex: 1;\n      @extend .justified;\n    }\n  }\n  .item{\n    height: 50px;\n    width: 100%;\n    font-weight: 300;\n    margin-bottom: 0.45rem !important;\n    p {\n     font-weight: 100;\n     color: $luna-primary;\n    }\n    .content {\n      height: 94%;\n      display: flex;\n      font-weight: 300;\n      background: $luna-dark;\n      transition: all 150ms ease;\n      flex-direction: row;\n      .box {\n        flex: 1;\n        @extend .justified;\n      }\n    }\n    .stripe {\n        height: 6%;\n        line-height: 30px;\n        font-size: 0.5rem;\n        background: $luna-light;\n        text-align: center;\n        font-weight:400;\n    }\n  }\n  .item:hover .content{\n    background: $luna-light;\n  }\n\n  .item.active .content{\n    background: $luna-light;\n  }\n}\n\ntable.vertical-table {\n  width: 100%;\n  border-collapse: collapse;\n  th {\n    text-align: left;\n    height: 20px;\n    color: $luna-primary-darken;\n    padding-left: 5px;\n    word-wrap: break-word;\n    overflow-wrap: break-word;\n    background: $luna-dark;\n    border-bottom: 2px solid $luna-background;\n  }\n  td {\n    height: 20px;\n    padding-left: 5px;\n    border-bottom: 2px solid $luna-background;\n    background: $luna-darker;\n  }\n}\n\ntable.sortable-table {\n  width: 100%;\n  border-collapse: separate;\n  border-spacing: 0 0.2em;\n  th {\n    text-align: left;\n    height: 40px;\n    color: $luna-primary-darken;\n    padding-left: 5px;\n    white-space: nowrap;\n  }\n  td {\n    height: 40px;\n    padding-left: 5px;\n  }\n  tr td{\n    background: $luna-dark;\n    transition: all 200ms ease;\n  }\n  tr:hover td {\n    background: $luna-light;\n  }\n\n  tr.active td{\n    background: $luna-light;\n  }\n}\n\ntable.score-table {\n  width: 100%;\n  border-collapse: collapse;\n\n  th {\n    text-align: left;\n    height: 30px;\n    color: $luna-primary-darken;\n    padding: 5px;\n    white-space: nowrap;\n  }\n\n  td.score-row-stripe {\n    height: 3px;\n    padding: 0;\n    border-bottom: none;\n  }\n\n  tr.score-row {\n    border-bottom: 0.5em solid $luna-background;\n    td, th {\n      transition: all 200ms ease;\n    }\n  }\n\n  th.score-field {\n    text-align: center;\n    padding: 0;\n  }\n\n  th.score-row-th {\n    background: $luna-dark;\n    font-size: 1.2rem;\n  }\n\n  td {\n    background: $luna-dark;\n    height: 30px;\n    padding: 5px;\n  }\n\n\n  tr.score-row:hover, tr.score-row.active{\n    td, th {\n      background: $luna-light;\n    }\n  }\n}\n\n\nul.list {\n  padding: 0;\n  list-style-type: none;\n  li.item{\n    height: 60px;\n    width: 100%;\n    font-weight: 300;\n    margin-bottom: 0.45rem !important;\n    p {\n     font-weight: 100;\n     color: $luna-primary-darken;\n     margin: 0.1rem;\n    }\n    h6 {\n      font-weight: 300;\n    }\n    .content {\n      height: 100%;\n      display: flex;\n      font-weight: 300;\n      background: $luna-dark;\n      transition: all 150ms ease;\n      flex-direction: row;\n      .box {\n        flex: 1;\n        @extend .justified;\n      }\n    }\n  }\n  li.item:hover .content{\n    background: $luna-light;\n  }\n}\n\n@media (max-width: 1200px) {\n  .list {\n    .item {\n      .content {\n        display: inline;\n        .box {\n          float: left;\n          width: 50%;\n        }\n      }\n    }\n  }\n}\n\n.keyvalue {\n  .key {\n    font-size: 0.8rem;\n  }\n  .value {\n    font-size: 1.1rem;\n  }\n}\n\n.squares {\n  display: flex;\n  flex-wrap: wrap;\n  list-style-type: none;\n  -webkit-margin-before: 0;\n  -webkit-margin-after: 0;\n  -webkit-margin-start: 0;\n  -webkit-margin-end: 0;\n  -webkit-padding-start: 0;\n  .square {\n    flex: 1;\n    margin: 1px;\n    display: flex;\n    flex-direction: column;\n    .stripe {\n      box-sizing: border-box;\n      font-size: 0.8rem;\n      background: $luna-light;\n      text-align: center;\n      font-weight:400;\n      padding: 0.2rem;\n      margin: 0 0 0.1rem 0;\n    }\n    .content {\n      font-weight: 300;\n      background: $luna-dark;\n      word-wrap: break-word;\n      @extend .justified;\n    }\n  }\n}\n\n@media (min-width: 600px) {\n  .square {\n    flex-basis: 50%;\n  }\n}\n\n@media (min-width: 900px) {\n  .square {\n    flex-basis: 25%;\n  }\n}\n\n.kx-logo {\n  background: url('kx.png') no-repeat bottom right;\n  background-size: 56px 16px;\n  width: 56px;\n  height: 16px;\n  position: fixed;\n  right: 5px;\n  bottom: 5px;\n  z-index: 101;\n}\n\n/* LOADER */\n#loader {\n  margin: 0;\n  padding: 0;\n}\n\n.loader {\n  position: fixed;\n  width: 300px;\n  height: 4px;\n  top: 50%;\n  left: 50%;\n  margin-top: -2px;\n  margin-left: -150px;\n}\n\n#spinner {\n  width: 100%;\n  //height: 6em;\n  margin: 20px 0px;\n  justify-content: center;\n  overflow: hidden;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  display: flex;\n}\n\n.spinner,\n.spinner:after {\n  border-radius: 50%;\n  width: 5em;\n  height: 5em;\n}\n.spinner {\n  font-size: 3px;\n  position: relative;\n  text-indent: -9999em;\n  border-top: 1.1em solid $luna-light;\n  border-right: 1.1em solid $luna-light;\n  border-bottom: 1.1em solid $luna-light;\n  border-left: 1.1em solid $luna-primary;\n  -webkit-transform: translateZ(0);\n  -ms-transform: translateZ(0);\n  transform: translateZ(0);\n  -webkit-animation: spinny 0.3s infinite linear;\n  animation: spinny 0.3s infinite linear;\n}\n@-webkit-keyframes spinny {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n@keyframes spinny {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n/* MAP POPUP */\n.map-popup {\n  p {\n    margin: 0\n  }\n}\n/* POPUPS AND MODALS */\n.middle-overlay {\n  background: rgba(0, 0, 0, 0.3);\n  @extend .fullscreen;\n  display: flex;\n  @extend .justified;\n}\n\n.modal-header {\n  color: $luna-secondary;\n  background: $luna-dark;\n  border-top-left-radius: 5px;\n  border-top-right-radius: 5px;\n  padding: 10px;\n  border-bottom: 1px solid $luna-light;\n}\n.modal-body {\n  background: $luna-background;\n}\n\n@media screen and (max-width: 1250) {\n  .modal-body {\n    width: 100%;\n    min-width: 0;\n  }\n}\n\n.modal-close {\n  float: right;\n  margin-top: 5px;\n  margin-right: 5px\n}\n\n.modal-padding {\n  padding: 10px;\n}\n\n/* TIMESLIDER */\n#timeslider{\n  margin: 0;\n  padding: 0;\n  transition: opacity 200ms ease;\n\n  path {\n      stroke: rgba(0,255,255,0.0);\n      stroke-width: 0;\n  }\n}\n\n.timeslider-pane {\n  touch-action: none;\n  // width: $map-width;\n  right: 0;\n  height: 5%;\n  position: absolute;\n  bottom: 0;\n  display: flex;\n  flex-flow: row;\n  overflow: visible;\n  background: -webkit-linear-gradient(top, rgba($luna-background,0.01) 0%,rgba($luna-background,0) 40%,rgba($luna-background,1) 85%,rgba($luna-background,1) 100%);\n  margin-right: 50px;\n}\n\n.timeslider-timeline {\n  font-family: 'Hind', sans-serif;\n  font-weight: 300;\n  position: relative;\n  flex: 7;\n  bottom:0;\n}\n\n.timeslider-container {\n  width: 100%;\n  position: relative;\n  height: 100%;\n  cursor: default;\n  -webkit-tap-highlight-color: rgba(0,0,0,0);\n};\n\n.timeslider-wrapper {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-flow: row;\n};\n\n.timeslider-children {\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n}\n\n/* SVG Timeslider */\n.day-rect {\n  fill: $luna-primary;\n}\n\n.hour-rect {\n  fill: $luna-primary-darken;\n}\n\n.minute-rect {\n  fill: $luna-light;\n}\n\n.handle-rect {\n  fill: rgba($luna-primary, 1);\n  -webkit-filter: drop-shadow( -5px -5px 5px $luna-light );\n  filter: drop-shadow( -5px -5px 5px $luna-light ); /* Same syntax as box-shadow */\n}\n\n.handle-live {\n  fill: red;\n  animation: blink 3s linear infinite\n}\n\n@keyframes blink {\n  0% {\n   opacity: 0;\n  }\n  50% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n\n/* PLAYBACK CONTROLS */\n\n.timeslider-buttons-wrapper {\n  flex:1;\n  flex: 1;\n  display: flex;\n  align-items: flex-end;\n  padding-left: 80px; \n}\n.timeslider-buttons {\n  height: 30px;\n  width: 100%;\n  margin-left: 110px;\n  & .on {\n    color: $luna-secondary;\n    // background-color: $luna-light;\n  }\n}\n.timeslider-stats{\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  color: #999;\n  font-size: 8pt;\n}\n\n.playback-button:hover {\n  -webkit-box-shadow: 0px 0px 10px 1px rgba($luna-light, 0.5);\n  -moz-box-shadow: 0px 0px 10px 1px rgba($luna-light, 0.5);\n  box-shadow: 0px 0px 10px 1px rgba($luna-light, 0.5);\n  // border-color: rgba($luna-light, 0.8);\n}\n.playback-button-rect:hover {\n  color: rgba($luna-secondary, 1);\n  // background: $luna-light;\n}\n.speed:hover {\n  // border-color: rgba($luna-light, 0.8);\n  color: rgba($luna-light, 0.8);\n}\n\n.playback-button {\n  height: 100%;\n  width : 35px;\n  line-height: 35px;\n  border-radius: 100%;\n  font-size: 13pt;\n  margin-bottom: 1px;\n  margin-left: 20px;\n  border-width: 1px;\n  // border-color: rgba($luna-light, 0.7);\n  color: rgba($luna-secondary, 0.7);\n  // border-style: solid;\n  text-align: center;\n  cursor: pointer;\n  transition: all 300ms ease;\n  // background: rgba($luna-dark, 0.1);\n  float: left;\n}\n\n.playback-button-rect {\n  height: 100%;\n  display:flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 13pt;\n  // border: 1px solid #151515;\n  color: rgba($luna-secondary, 0.5);\n  text-align: center;\n  cursor: pointer;\n  transition: all 300ms ease;\n  // background: $luna-dark;\n  float: left;\n  margin-right: 10px;\n}\n\n.playback-button-rect span {\n  flex: 1;\n}\n\n.controls {\n  flex: 1;\n  background: $luna-background;\n}\n\n.knob-front {\n  width: 35px;\n  height: 35px;\n  border-radius: 100%;\n  border: solid 1px rgba($luna-light, 0.7);\n  background-color: rgba($luna-light, 0.1);\n  transition: all 500ms ease-out;\n  position: absolute;\n}\n.knob {\n  width: 35px;\n  height: 35px;\n  transition: all 100ms ease-out;\n  position: absolute;\n  left: 20px;\n}\n\n.knob::before {\n  width: 5px;\n  height: 5px;\n  position: absolute;\n  top: 5px;\n  left: 15px;\n  content: \"\";\n  background-color: rgba($luna-light, 0.7);\n  border-radius: 100%;\n}\n\n.knob-front:hover {\n  -webkit-box-shadow: 0px 0px 10px 1px rgba($luna-light, 0.5);\n  -moz-box-shadow: 0px 0px 10px 1px rgba($luna-light, 0.5);\n  box-shadow: 0px 0px 10px 1px rgba($luna-light, 0.5);\n  border-color: rgba($luna-light, 0.8);\n}\n.leds {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-wrap: nowrap;\n}\n\n.led {\n  height: 2px;\n  width: 2px;\n  min-width: 1px;\n  display: inline-block;\n  list-style-type: none;\n  background-color: rgba($luna-secondary, 0.2);\n  border-radius: 100%;\n  transition: all 200ms ease-in;\n  margin: 3%;\n}\n.active-led{\n  background-color: rgba($luna-secondary, 0.95);\n  -webkit-box-shadow: 0px 0px 10px 1px rgba(209, 255, 252, 0.7);\n  -moz-box-shadow: 0px 0px 10px 1px rgba(209, 255, 252, 0.7);\n  box-shadow: 0px 0px 10px 1px rgba(209, 255, 252, 0.7);\n}\n.knob-rect {\n  display: flex;\n  justify-content: center;\n  align-content: center;\n  line-height: normal;\n  margin-right: 10px;\n}\n.gradient-legend-title {\n  margin: 5px 0;\n}\n.xyplot{\n  position: relative;\n}\n.xyplot canvas {\n  transition: opacity 0.2s;\n}\n.xyplot-filter {\n  opacity: 0;\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n.xyplot-axis text {\n    fill: #7A7A7A;\n}\n.xyplot-axis path,\n.xyplot-axis tick,\n.xyplot-axis line {\n  fill: none;\n  stroke: none !important;\n}\n.xyplot-tooltip {\n  position: absolute;\n   top: 0;\n  right: 0;\n  text-align: left;\n  padding: 5px;\n  background-color: rgba(50,50,50,0.6);\n  pointer-events: none;\n  color: #fff;\n  overflow: hidden;\n}\n.xyplot-tooltip dl {\n  white-space: nowrap;\n  margin: 0;\n  padding: 0;\n  display: inline-block;\n  clear: both;\n  overflow: hidden;\n}\n.xyplot-tooltip dd,\n.xyplot-tooltip dt {\n  display: block;\n  margin: 0;\n}\n.xyplot-tooltip dt {\n  opacity:0.8;\n  padding: 0 10px 0 0;\n  float: left;\n  clear: left;\n}\n.xyplot-tooltip dd {\n  float: left;\n}\n",".rc-slider {\n  position: relative;\n  height: 45px;\n  padding-top: 17px;\n  width: 100%;\n  margin: -10px 0;\n  box-sizing: border-box;\n  -webkit-tap-highlight-color: transparent;\n}\n.rc-slider * {\n  box-sizing: border-box;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n.rc-slider-rail {\n  background: #000;\n  width: 100%;\n  position: absolute;\n  height: 4px;\n  background: $luna-light;\n}\n\n.rc-slider-track {\n  position: absolute;\n  left: 0;\n  height: 4px;\n  border-radius: 6px;\n  background-color: rgba($luna-primary, 0.3);\n}\n.rc-slider-handle {\n  position: absolute;\n  margin-left: -7px;\n  margin-top: -5px;\n  width: 14px;\n  height: 14px;\n  cursor: pointer;\n  border-radius: 50%;\n  background-color: $luna-primary;\n  transition: background 200ms ease;\n}\n.rc-slider-handle:hover {\n  background: $luna-secondary;\n}\n.rc-slider-handle-active:active {\n  border-color: $luna-primary;\n  box-shadow: 0 0 5px $luna-light;\n}\n.rc-slider-mark {\n  position: absolute;\n  top: 10px;\n  left: 0;\n  width: 100%;\n  font-size: 12px;\n}\n.rc-slider-mark-text {\n  position: absolute;\n  display: inline-block;\n  vertical-align: middle;\n  text-align: center;\n  cursor: pointer;\n  color: #999;\n}\n.rc-slider-mark-text-active {\n  color: #666;\n}\n.rc-slider-step {\n  position: absolute;\n  width: 100%;\n  height: 4px;\n  background: transparent;\n}\n.rc-slider-dot {\n  position: absolute;\n  bottom: -2px;\n  margin-left: -4px;\n  width: 8px;\n  height: 8px;\n  border: 2px solid $luna-primary;\n  background-color: #fff;\n  cursor: pointer;\n  border-radius: 50%;\n  vertical-align: middle;\n}\n.rc-slider-dot:first-child {\n  margin-left: -4px;\n}\n.rc-slider-dot:last-child {\n  margin-left: -4px;\n}\n.rc-slider-dot-active {\n  border-color: $luna-secondary;\n}\n.rc-slider-disabled {\n  background-color: $luna-light;\n}\n.rc-slider-disabled .rc-slider-track {\n  background-color: #ccc;\n}\n.rc-slider-disabled .rc-slider-handle,\n.rc-slider-disabled .rc-slider-dot {\n  border-color: #ccc;\n  background-color: #fff;\n  cursor: not-allowed;\n}\n.rc-slider-disabled .rc-slider-mark-text,\n.rc-slider-disabled .rc-slider-dot {\n  cursor: not-allowed !important;\n}\n.rc-slider-vertical {\n  width: 4px;\n  height: 100%;\n}\n.rc-slider-vertical .rc-slider-track {\n  bottom: 0;\n  width: 4px;\n}\n.rc-slider-vertical .rc-slider-handle {\n  position: absolute;\n  margin-left: -5px;\n  margin-bottom: -7px;\n}\n.rc-slider-vertical .rc-slider-mark {\n  top: 0;\n  left: 10px;\n  height: 100%;\n}\n.rc-slider-vertical .rc-slider-step {\n  height: 100%;\n  width: 4px;\n}\n.rc-slider-vertical .rc-slider-dot {\n  left: 2px;\n  margin-bottom: -4px;\n}\n.rc-slider-vertical .rc-slider-dot:first-child {\n  margin-bottom: -4px;\n}\n.rc-slider-vertical .rc-slider-dot:last-child {\n  margin-bottom: -4px;\n}\n.rc-slider-tooltip-zoom-down-enter,\n.rc-slider-tooltip-zoom-down-appear {\n  animation-duration: .3s;\n  animation-fill-mode: both;\n  display: block !important;\n  animation-play-state: paused;\n}\n.rc-slider-tooltip-zoom-down-leave {\n  animation-duration: .3s;\n  animation-fill-mode: both;\n  display: block !important;\n  animation-play-state: paused;\n}\n.rc-slider-tooltip-zoom-down-enter.rc-slider-tooltip-zoom-down-enter-active,\n.rc-slider-tooltip-zoom-down-appear.rc-slider-tooltip-zoom-down-appear-active {\n  animation-name: rcSliderTooltipZoomDownIn;\n  animation-play-state: running;\n}\n.rc-slider-tooltip-zoom-down-leave.rc-slider-tooltip-zoom-down-leave-active {\n  animation-name: rcSliderTooltipZoomDownOut;\n  animation-play-state: running;\n}\n.rc-slider-tooltip-zoom-down-enter,\n.rc-slider-tooltip-zoom-down-appear {\n  transform: scale(0, 0);\n  animation-timing-function: cubic-bezier(0.23, 1, 0.32, 1);\n}\n.rc-slider-tooltip-zoom-down-leave {\n  animation-timing-function: cubic-bezier(0.755, 0.05, 0.855, 0.06);\n}\n@keyframes rcSliderTooltipZoomDownIn {\n  0% {\n    opacity: 0;\n    transform-origin: 50% 100%;\n    transform: scale(0, 0);\n  }\n  100% {\n    transform-origin: 50% 100%;\n    transform: scale(1, 1);\n  }\n}\n@keyframes rcSliderTooltipZoomDownOut {\n  0% {\n    transform-origin: 50% 100%;\n    transform: scale(1, 1);\n  }\n  100% {\n    opacity: 0;\n    transform-origin: 50% 100%;\n    transform: scale(0, 0);\n  }\n}\n.rc-slider-tooltip {\n  position: absolute;\n  left: -9999px;\n  top: -9999px;\n  visibility: visible;\n  box-sizing: border-box;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n.rc-slider-tooltip * {\n  box-sizing: border-box;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n.rc-slider-tooltip-hidden {\n  display: none;\n}\n.rc-slider-tooltip-placement-top {\n  padding: 4px 0 8px 0;\n}\n.rc-slider-tooltip-inner, .rc-slider-tooltip-inner span {\n  display: none;\n  // padding: 6px 2px;\n  // min-width: 24px;\n  // margin-top: 15px;\n  // height: 24px;\n  // font-size: 12px;\n  // line-height: 1;\n  // color: #a4bac3;\n  // text-align: center;\n  // text-decoration: none;\n  // background-color: #a4bac3;\n  //\n  // border-radius: 6px;\n  // box-shadow: 0 0 4px #d9d9d9;\n}\n.rc-slider-tooltip-arrow {\n  // position: absolute;\n  // width: 0;\n  // height: 0;\n  // border-color: transparent;\n  // border-style: solid;\n}\n.rc-slider-tooltip-placement-top .rc-slider-tooltip-arrow {\n  bottom: 4px;\n  left: 50%;\n  margin-left: -4px;\n  border-width: 4px 4px 0;\n  border-top-color: #6c6c6c;\n}\n",".draw-ctrl {\n  position: absolute;\n  top: 45%;\n  right: 0;\n}\n\n.draw-ctrl-btn {\n  display: inherit;\n  width: 30px;\n  height: 30px;\n  border: none;\n  margin: 4px;\n  font-size: 0.9rem;\n  transition: all 150ms ease;\n  color: $luna-secondary;\n  background-color: $luna-dark;\n}\n\n.draw-ctrl-btn:hover {\n  background-color: $luna-light;\n}\n\n.draw-ctrl-btn.active {\n  background-color: $luna-light;\n}\n\n.draw-ctrl-btn.selection {\n  background-color: $luna-secondary;\n  color: #050505;\n}\n\n.draw-btn:before {\n  content: \"\\f040\";\n  font-family: 'FontAwesome';\n}\n\n.select-btn:before {\n  content: \"\\f245\";\n  font-family: 'FontAwesome';\n}\n\n.zoomIn-btn:before {\n  content: \"\\f067\";\n  font-family: 'FontAwesome';\n}\n\n.zoomOut-btn:before {\n  content: \"\\f068\";\n  font-family: 'FontAwesome';\n}\n\n.manager-btn:before {\n  content: \"\\f03a\";\n  font-family: 'FontAwesome';\n}\n\n.select-btn:before {\n  content: \"\\f245\";\n  font-family: 'FontAwesome';\n}\n\n.clear-btn:before {\n  content: \"\\f12d\";\n  font-family: 'FontAwesome';\n}\n\n.inspect-btn:before {\n  content: \"\\f080\";\n  font-family: 'FontAwesome';\n}\n\n.save-btn:before {\n  content: \"\\f0c7\";\n  font-family: 'FontAwesome';\n}\n"],sourceRoot:""}]);const p=h},30507:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(94015),i=n.n(r),o=n(23645),a=n.n(o),s=n(69469),l=n(7113),c=a()(i());c.i(s.Z),c.i(l.Z),c.push([e.id,".mapboxgl-boxzoom{background:#2c3a3a}\n","",{version:3,sources:["webpack://./src/styles/mapboxgl.scss","webpack://./src/styles/colors.scss"],names:[],mappings:"AAEA,kBACE,kBCYkB",sourcesContent:['@import \'src/styles/colors.scss\';\n\n.mapboxgl-boxzoom {\n  background: $luna-light;\n}\n\n@import "~@mapbox/mapbox-gl-draw/dist/mapbox-gl-draw.css";\n@import "~mapbox-gl/dist/mapbox-gl.css";\n',"/**\n *  LUNA COLORS\n**/\n\n/* colors */\n// text, titles.\n$luna-primary: #d1dadb;\n$luna-primary-darken: darken($luna-primary, 20%);\n// links and buttons\n$luna-secondary: #e6f4d7;\n$luna-secondary-darken: darken($luna-secondary, 20%);\n$luna-highlight: #a0ba32;\n// panels background color\n$luna-background: #0f1111;\n// e.g.: button hover\n$luna-light: #2c3a3a;\n// e.g.: button idle\n$luna-dark: #1c2626;\n$luna-darker: #111617;\n$luna-red: #ed492d;\n$luna-green: #5effa9;\n"],sourceRoot:""}]);const u=c},9156:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(94015),i=n.n(r),o=n(23645),a=n.n(o)()(i());a.push([e.id,"html, body, #loading-screen {\n  margin: 0;\n  padding: 0;\n  height: 100%;\n}\n\n#map-div {\n  margin: 0;\n  padding: 0;\n  height: 100%;\n  left: 0;\n}\n\n.map-div {\n  touch-action: none;\n}\n\n#map-div:focus {\n  outline: none;\n}\n\n#loading-screen {\n  width: 100%;\n  position: fixed;\n  left: 0;\n  top: 0;\n  background-color: black;\n  color: white;\n  z-index: 1;\n  visibility: hidden;\n}\n\ncanvas {\n  display: block; /* fix necessary to remove space at bottom of canvas */\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n","",{version:3,sources:["webpack://./src/map.css"],names:[],mappings:"AAAA;EACE,SAAS;EACT,UAAU;EACV,YAAY;AACd;;AAEA;EACE,SAAS;EACT,UAAU;EACV,YAAY;EACZ,OAAO;AACT;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,WAAW;EACX,eAAe;EACf,OAAO;EACP,MAAM;EACN,uBAAuB;EACvB,YAAY;EACZ,UAAU;EACV,kBAAkB;AACpB;;AAEA;EACE,cAAc,EAAE,sDAAsD;EACtE,2BAA2B;EAC3B,yBAAyB;EACzB,wBAAwB;EACxB,sBAAsB;EACtB,qBAAqB;EACrB,iBAAiB;AACnB",sourcesContent:["html, body, #loading-screen {\n  margin: 0;\n  padding: 0;\n  height: 100%;\n}\n\n#map-div {\n  margin: 0;\n  padding: 0;\n  height: 100%;\n  left: 0;\n}\n\n.map-div {\n  touch-action: none;\n}\n\n#map-div:focus {\n  outline: none;\n}\n\n#loading-screen {\n  width: 100%;\n  position: fixed;\n  left: 0;\n  top: 0;\n  background-color: black;\n  color: white;\n  z-index: 1;\n  visibility: hidden;\n}\n\ncanvas {\n  display: block; /* fix necessary to remove space at bottom of canvas */\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n"],sourceRoot:""}]);const s=a},26731:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(94015),i=n.n(r),o=n(23645),a=n.n(o)()(i());a.push([e.id,".mapboxgl-map,.maplibregl-map{-webkit-tap-highlight-color:rgb(0 0 0/0);font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative}.mapboxgl-canvas,.maplibregl-canvas{left:0;position:absolute;top:0}.mapboxgl-map:fullscreen,.maplibregl-map:fullscreen{height:100%;width:100%}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass,.maplibregl-canvas-container.maplibregl-interactive,.maplibregl-ctrl-group button.maplibregl-ctrl-compass{cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer,.maplibregl-canvas-container.maplibregl-interactive.maplibregl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active,.maplibregl-canvas-container.maplibregl-interactive:active,.maplibregl-ctrl-group button.maplibregl-ctrl-compass:active{cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate .maplibregl-canvas{touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas,.maplibregl-canvas-container.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right,.maplibregl-ctrl-bottom-left,.maplibregl-ctrl-bottom-right,.maplibregl-ctrl-top-left,.maplibregl-ctrl-top-right{pointer-events:none;position:absolute;z-index:2}.mapboxgl-ctrl-top-left,.maplibregl-ctrl-top-left{left:0;top:0}.mapboxgl-ctrl-top-right,.maplibregl-ctrl-top-right{right:0;top:0}.mapboxgl-ctrl-bottom-left,.maplibregl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right,.maplibregl-ctrl-bottom-right{bottom:0;right:0}.mapboxgl-ctrl,.maplibregl-ctrl{clear:both;pointer-events:auto;transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl,.maplibregl-ctrl-top-left .maplibregl-ctrl{float:left;margin:10px 0 0 10px}.mapboxgl-ctrl-top-right .mapboxgl-ctrl,.maplibregl-ctrl-top-right .maplibregl-ctrl{float:right;margin:10px 10px 0 0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl,.maplibregl-ctrl-bottom-left .maplibregl-ctrl{float:left;margin:0 0 10px 10px}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl,.maplibregl-ctrl-bottom-right .maplibregl-ctrl{float:right;margin:0 10px 10px 0}.mapboxgl-ctrl-group,.maplibregl-ctrl-group{background:#fff;border-radius:4px}.mapboxgl-ctrl-group:not(:empty),.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty),.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button,.maplibregl-ctrl-group button{background-color:transparent;border:0;box-sizing:border-box;cursor:pointer;display:block;height:29px;outline:none;padding:0;width:29px}.mapboxgl-ctrl-group button+button,.maplibregl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon,.maplibregl-ctrl button .maplibregl-ctrl-icon{background-position:50%;background-repeat:no-repeat;display:block;height:100%;width:100%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon,.maplibregl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button,.maplibregl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner,.maplibregl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus,.maplibregl-ctrl-attrib-button:focus,.maplibregl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled,.maplibregl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon,.maplibregl-ctrl button:disabled .maplibregl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover,.maplibregl-ctrl button:not(:disabled):hover{background-color:rgb(0 0 0/5%)}.mapboxgl-ctrl-group button:focus:focus-visible,.maplibregl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible),.maplibregl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child,.maplibregl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child,.maplibregl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child,.maplibregl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='m10.5 14 4-8 4 8h-8z'/%3E%3Cpath d='m10.5 16 4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='m10.5 14 4-8 4 8h-8z'/%3E%3Cpath d='m10.5 16 4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='m10.5 14 4-8 4 8h-8z'/%3E%3Cpath d='m10.5 16 4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-terrain .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-terrain .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' viewBox='0 0 22 22' fill='%23333'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-terrain-enabled .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-terrain-enabled .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' viewBox='0 0 22 22' fill='%2333b5e5'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='m14 5 1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-waiting .maplibregl-ctrl-icon{animation:maplibregl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='m14 5 1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='m14 5 1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}}@keyframes maplibregl-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}a.mapboxgl-ctrl-logo,a.maplibregl-ctrl-logo{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.255 1.255 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.255 1.255 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5.11 5.11 0 0 1 .314-.787l.009-.016a4.623 4.623 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.548 4.548 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4.314.319.566.676.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.416 2.416 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.448 2.448 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675c.211.2.381.43.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.76 4.76 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.407 3.407 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.255 1.255 0 0 1 .689 1.004 4.73 4.73 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528 0 .343-.02.694-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.815 5.815 0 0 1-.548-2.512c0-.286.017-.567.053-.843a1.255 1.255 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.778 4.778 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.47 4.47 0 0 1-1.935-.424 1.252 1.252 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.402 2.402 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.703 4.703 0 0 1-1.782 1.884 4.767 4.767 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.47 4.47 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a4.983 4.983 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.255 1.255 0 0 1-1.115.676h-.098a1.255 1.255 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15c.329-.237.574-.499.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267c-.088-.22-.264-.438-.526-.658l-.032-.028a3.16 3.16 0 0 0-.668-.428l-.27-.12a3.293 3.293 0 0 0-1.235-.23c-.757 0-1.415.163-1.974.493a3.36 3.36 0 0 0-1.3 1.382c-.297.593-.444 1.284-.444 2.074 0 .8.17 1.503.51 2.107a3.795 3.795 0 0 0 1.382 1.381 3.883 3.883 0 0 0 1.893.477c.53 0 1.015-.11 1.455-.33zm-2.789-5.38c-.384.45-.575 1.038-.575 1.762 0 .735.186 1.332.559 1.794.384.45.933.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.17 2.17 0 0 0 .468-.29l.178-.161a2.163 2.163 0 0 0 .397-.561c.163-.333.244-.717.244-1.15v-.115c0-.472-.098-.894-.296-1.267l-.043-.077a2.211 2.211 0 0 0-.633-.709l-.13-.086-.047-.028a2.099 2.099 0 0 0-1.073-.285c-.702 0-1.244.231-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.958.958 0 0 0-.353-.389.851.851 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.626 2.626 0 0 0 .331.423c.213.22.464.402.755.548l.173.074c.433.17.93.255 1.49.255.68 0 1.295-.165 1.844-.493a3.447 3.447 0 0 0 1.316-1.4c.329-.603.493-1.299.493-2.089 0-1.273-.33-2.243-.988-2.913-.658-.68-1.52-1.02-2.584-1.02-.598 0-1.124.115-1.575.347a2.807 2.807 0 0 0-.415.262l-.199.166a3.35 3.35 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138c.137.193.297.36.48.5l.155.11.053.034c.34.197.713.297 1.119.297.714 0 1.262-.225 1.645-.675.385-.46.576-1.048.576-1.762 0-.746-.192-1.338-.576-1.777-.372-.45-.92-.675-1.645-.675-.29 0-.569.053-.835.16a2.366 2.366 0 0 0-.284.136 1.99 1.99 0 0 0-.363.254 2.237 2.237 0 0 0-.46.569l-.082.162a2.56 2.56 0 0 0-.213 1.072v.115c0 .471.098.894.296 1.267l.135.211zm.964-.818a1.11 1.11 0 0 0 .367.385.937.937 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a.995.995 0 0 0-.503.135l-.012.007a.859.859 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.43 1.43 0 0 0 .14.66zm15.7-6.222c.232-.23.346-.516.346-.856a1.053 1.053 0 0 0-.345-.79 1.175 1.175 0 0 0-.84-.329c-.34 0-.625.11-.855.33a1.053 1.053 0 0 0-.346.79c0 .34.115.625.346.855.23.23.516.346.856.346.34 0 .62-.115.839-.346zm4.337 9.314.033-1.332c.128.269.324.518.59.747l.098.081a3.727 3.727 0 0 0 .316.224l.223.122a3.21 3.21 0 0 0 1.44.322 3.785 3.785 0 0 0 1.875-.477 3.52 3.52 0 0 0 1.382-1.366c.352-.593.526-1.29.526-2.09 0-.79-.147-1.48-.444-2.073a3.235 3.235 0 0 0-1.283-1.399c-.549-.34-1.195-.51-1.942-.51a3.476 3.476 0 0 0-1.527.344l-.086.043-.165.09a3.412 3.412 0 0 0-.33.214c-.288.21-.507.446-.656.707a1.893 1.893 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.482 2.482 0 0 0 .566.7c.078.065.159.125.245.18l.144.08a2.105 2.105 0 0 0 .975.232c.713 0 1.262-.225 1.645-.675.384-.46.576-1.053.576-1.778 0-.734-.192-1.327-.576-1.777-.373-.46-.921-.692-1.645-.692a2.18 2.18 0 0 0-1.015.235c-.147.075-.285.17-.415.282l-.15.142a2.086 2.086 0 0 0-.42.594c-.149.32-.223.685-.223 1.1v.115c0 .47.097.89.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.868.868 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.13 1.13 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013c.23-.087.472-.134.724-.14l.069-.002c.329 0 .542.033.642.099l.247-1.794c-.13-.066-.37-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2.086 2.086 0 0 0-.411.148 2.18 2.18 0 0 0-.4.249 2.482 2.482 0 0 0-.485.499 2.659 2.659 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884c0-.364.053-.678.159-.943a1.49 1.49 0 0 1 .466-.636 2.52 2.52 0 0 1 .399-.253 2.19 2.19 0 0 1 .224-.099zm9.784 2.656.05-.922c0-1.162-.285-2.062-.856-2.698-.559-.647-1.42-.97-2.584-.97-.746 0-1.415.163-2.007.493a3.462 3.462 0 0 0-1.4 1.382c-.329.604-.493 1.306-.493 2.106 0 .714.143 1.371.428 1.975.285.593.73 1.07 1.332 1.432.604.351 1.355.526 2.255.526.649 0 1.204-.062 1.668-.185l.044-.012.135-.04c.409-.122.736-.263.984-.421l-.542-1.267c-.2.108-.415.199-.642.274l-.297.087c-.34.088-.773.131-1.3.131-.636 0-1.135-.147-1.497-.444a1.573 1.573 0 0 1-.192-.193c-.244-.294-.415-.705-.512-1.234l-.004-.021h5.43zm-5.427-1.256-.003.022h3.752v-.138c-.007-.485-.104-.857-.288-1.118a1.056 1.056 0 0 0-.156-.176c-.307-.285-.746-.428-1.316-.428-.657 0-1.155.202-1.494.604-.253.3-.417.712-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z' fill='%23000' fill-opacity='.4' fill-rule='evenodd'/%3E%3Cpath d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81c-.68 0-1.311-.16-1.893-.478a3.795 3.795 0 0 1-1.381-1.382c-.34-.604-.51-1.306-.51-2.106 0-.79.147-1.482.444-2.074a3.364 3.364 0 0 1 1.3-1.382c.559-.33 1.217-.494 1.974-.494a3.293 3.293 0 0 1 1.234.231 3.341 3.341 0 0 1 .97.575c.264.22.44.439.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332c-.186.395-.526.746-1.02 1.053a3.167 3.167 0 0 1-1.662.444zm.296-1.482c.626 0 1.152-.214 1.58-.642.428-.44.642-1.01.642-1.711v-.115c0-.472-.098-.894-.296-1.267a2.211 2.211 0 0 0-.807-.872 2.098 2.098 0 0 0-1.119-.313c-.702 0-1.245.231-1.629.692-.384.45-.575 1.037-.575 1.76 0 .736.186 1.333.559 1.795.384.45.933.675 1.645.675zm6.521-6.237h1.711v1.4c.604-1.065 1.547-1.597 2.83-1.597 1.064 0 1.926.34 2.584 1.02.659.67.988 1.641.988 2.914 0 .79-.164 1.487-.493 2.09a3.456 3.456 0 0 1-1.316 1.399 3.51 3.51 0 0 1-1.844.493c-.636 0-1.19-.11-1.662-.329a2.665 2.665 0 0 1-1.086-.97l.017 5.134h-1.728V9.242zm4.048 6.22c.714 0 1.262-.224 1.645-.674.385-.46.576-1.048.576-1.762 0-.746-.192-1.338-.576-1.777-.372-.45-.92-.675-1.645-.675-.395 0-.768.098-1.12.296-.34.187-.613.46-.822.823-.197.351-.296.763-.296 1.234v.115c0 .472.098.894.296 1.267.209.362.483.647.823.855.34.197.713.297 1.119.297z' fill='%23fff'/%3E%3Cpath d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.159 1.159 0 0 1-.856-.346 1.165 1.165 0 0 1-.346-.856 1.053 1.053 0 0 1 .346-.79c.23-.219.516-.329.856-.329.329 0 .609.11.839.33a1.053 1.053 0 0 1 .345.79 1.159 1.159 0 0 1-.345.855c-.22.23-.5.346-.84.346zm7.875 9.133a3.167 3.167 0 0 1-1.662-.444c-.482-.307-.817-.658-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283c.186-.438.548-.812 1.086-1.119a3.486 3.486 0 0 1 1.778-.477c.746 0 1.393.17 1.942.51a3.235 3.235 0 0 1 1.283 1.4c.297.592.444 1.282.444 2.072 0 .8-.175 1.498-.526 2.09a3.52 3.52 0 0 1-1.382 1.366 3.785 3.785 0 0 1-1.876.477zm-.296-1.481c.713 0 1.26-.225 1.645-.675.384-.46.577-1.053.577-1.778 0-.734-.193-1.327-.577-1.776-.373-.46-.921-.692-1.645-.692a2.115 2.115 0 0 0-1.58.659c-.428.428-.642.992-.642 1.694v.115c0 .473.098.895.296 1.267a2.385 2.385 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481c.176-.505.46-.91.856-1.217a2.14 2.14 0 0 1 1.349-.46c.351 0 .593.032.724.098l-.247 1.794c-.099-.066-.313-.099-.642-.099-.516 0-.988.164-1.416.494-.417.329-.626.855-.626 1.58v3.883h-1.777V9.242zm9.534 7.718c-.9 0-1.651-.175-2.255-.526-.603-.362-1.047-.84-1.332-1.432a4.567 4.567 0 0 1-.428-1.975c0-.8.164-1.502.493-2.106a3.462 3.462 0 0 1 1.4-1.382c.592-.33 1.262-.494 2.007-.494 1.163 0 2.024.324 2.584.97.57.637.856 1.537.856 2.7 0 .296-.017.603-.05.92h-5.43c.12.67.356 1.153.708 1.45.362.296.86.443 1.497.443.526 0 .96-.044 1.3-.131a4.123 4.123 0 0 0 .938-.362l.542 1.267c-.274.175-.647.329-1.119.46-.472.132-1.042.197-1.711.197zm1.596-4.558c.01-.68-.137-1.158-.444-1.432-.307-.285-.746-.428-1.316-.428-1.152 0-1.815.62-1.991 1.86h3.752z' fill='%23e1e3e9'/%3E%3Cg fill-rule='evenodd' stroke-width='1.036'%3E%3Cpath d='m8.166 16.146-.002.002a1.54 1.54 0 0 1-2.009 0l-.002-.002-.043-.034-.002-.002-.199-.162H4.377a.657.657 0 0 0-.659.659v1.84a.657.657 0 0 0 .659.659h5.565a.657.657 0 0 0 .659-.659v-1.84a.657.657 0 0 0-.659-.659H8.411l-.202.164zm-1.121-.905a.29.29 0 0 0 .113.023.286.286 0 0 0 .189-.07l.077-.063c.634-.508 4.672-3.743 4.672-7.575 0-2.55-2.215-4.625-4.938-4.625S2.221 5.006 2.221 7.556c0 3.225 2.86 6.027 4.144 7.137h.004l.04.038.484.4.077.063a.628.628 0 0 0 .074.047zm-2.52-.548a16.898 16.898 0 0 1-1.183-1.315C2.187 11.942.967 9.897.967 7.555c0-3.319 2.855-5.88 6.192-5.88 3.338 0 6.193 2.561 6.193 5.881 0 2.34-1.22 4.387-2.376 5.822a16.898 16.898 0 0 1-1.182 1.315h.15a1.912 1.912 0 0 1 1.914 1.914v1.84a1.912 1.912 0 0 1-1.914 1.914H4.377a1.912 1.912 0 0 1-1.914-1.914v-1.84a1.912 1.912 0 0 1 1.914-1.914zm3.82-6.935c0 .692-.55 1.222-1.187 1.222s-1.185-.529-1.185-1.222.548-1.222 1.185-1.222c.638 0 1.186.529 1.186 1.222zm-1.186 2.477c1.348 0 2.442-1.11 2.442-2.478S8.507 5.28 7.159 5.28 4.72 6.39 4.72 7.758s1.092 2.477 2.44 2.477zm2.048 7.71H5.114v-.838h4.093z' fill='%23000' fill-opacity='.4'/%3E%3Cpath d='M2.222 7.555c0-2.55 2.214-4.625 4.937-4.625 2.723 0 4.938 2.075 4.938 4.625 0 3.832-4.038 7.068-4.672 7.575l-.077.063a.286.286 0 0 1-.189.07.286.286 0 0 1-.188-.07l-.077-.063c-.634-.507-4.672-3.743-4.672-7.575zm4.937 2.68c1.348 0 2.442-1.11 2.442-2.478S8.507 5.28 7.159 5.28 4.72 6.39 4.72 7.758s1.092 2.477 2.44 2.477z' fill='%23e1e3e9'/%3E%3Cpath d='M4.377 15.948a.657.657 0 0 0-.659.659v1.84a.657.657 0 0 0 .659.659h5.565a.657.657 0 0 0 .659-.659v-1.84a.657.657 0 0 0-.659-.659zm4.83 1.16H5.114v.838h4.093z' fill='%23fff'/%3E%3C/g%3E%3C/svg%3E\");background-repeat:no-repeat;cursor:pointer;display:block;height:23px;margin:0 0 -4px -4px;overflow:hidden;width:88px}a.mapboxgl-ctrl-logo.mapboxgl-compact,a.maplibregl-ctrl-logo.maplibregl-compact{width:14px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo,a.maplibregl-ctrl-logo{background-color:transparent;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.255 1.255 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.255 1.255 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5.11 5.11 0 0 1 .314-.787l.009-.016a4.623 4.623 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.548 4.548 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4.314.319.566.676.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.416 2.416 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.448 2.448 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675c.211.2.381.43.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.76 4.76 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.407 3.407 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.255 1.255 0 0 1 .689 1.004 4.73 4.73 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528 0 .343-.02.694-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.815 5.815 0 0 1-.548-2.512c0-.286.017-.567.053-.843a1.255 1.255 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.778 4.778 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.47 4.47 0 0 1-1.935-.424 1.252 1.252 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.402 2.402 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.703 4.703 0 0 1-1.782 1.884 4.767 4.767 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.47 4.47 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a4.983 4.983 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.255 1.255 0 0 1-1.115.676h-.098a1.255 1.255 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15c.329-.237.574-.499.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267c-.088-.22-.264-.438-.526-.658l-.032-.028a3.16 3.16 0 0 0-.668-.428l-.27-.12a3.293 3.293 0 0 0-1.235-.23c-.757 0-1.415.163-1.974.493a3.36 3.36 0 0 0-1.3 1.382c-.297.593-.444 1.284-.444 2.074 0 .8.17 1.503.51 2.107a3.795 3.795 0 0 0 1.382 1.381 3.883 3.883 0 0 0 1.893.477c.53 0 1.015-.11 1.455-.33zm-2.789-5.38c-.384.45-.575 1.038-.575 1.762 0 .735.186 1.332.559 1.794.384.45.933.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.17 2.17 0 0 0 .468-.29l.178-.161a2.163 2.163 0 0 0 .397-.561c.163-.333.244-.717.244-1.15v-.115c0-.472-.098-.894-.296-1.267l-.043-.077a2.211 2.211 0 0 0-.633-.709l-.13-.086-.047-.028a2.099 2.099 0 0 0-1.073-.285c-.702 0-1.244.231-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.958.958 0 0 0-.353-.389.851.851 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.626 2.626 0 0 0 .331.423c.213.22.464.402.755.548l.173.074c.433.17.93.255 1.49.255.68 0 1.295-.165 1.844-.493a3.447 3.447 0 0 0 1.316-1.4c.329-.603.493-1.299.493-2.089 0-1.273-.33-2.243-.988-2.913-.658-.68-1.52-1.02-2.584-1.02-.598 0-1.124.115-1.575.347a2.807 2.807 0 0 0-.415.262l-.199.166a3.35 3.35 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138c.137.193.297.36.48.5l.155.11.053.034c.34.197.713.297 1.119.297.714 0 1.262-.225 1.645-.675.385-.46.576-1.048.576-1.762 0-.746-.192-1.338-.576-1.777-.372-.45-.92-.675-1.645-.675-.29 0-.569.053-.835.16a2.366 2.366 0 0 0-.284.136 1.99 1.99 0 0 0-.363.254 2.237 2.237 0 0 0-.46.569l-.082.162a2.56 2.56 0 0 0-.213 1.072v.115c0 .471.098.894.296 1.267l.135.211zm.964-.818a1.11 1.11 0 0 0 .367.385.937.937 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a.995.995 0 0 0-.503.135l-.012.007a.859.859 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.43 1.43 0 0 0 .14.66zm15.7-6.222c.232-.23.346-.516.346-.856a1.053 1.053 0 0 0-.345-.79 1.175 1.175 0 0 0-.84-.329c-.34 0-.625.11-.855.33a1.053 1.053 0 0 0-.346.79c0 .34.115.625.346.855.23.23.516.346.856.346.34 0 .62-.115.839-.346zm4.337 9.314.033-1.332c.128.269.324.518.59.747l.098.081a3.727 3.727 0 0 0 .316.224l.223.122a3.21 3.21 0 0 0 1.44.322 3.785 3.785 0 0 0 1.875-.477 3.52 3.52 0 0 0 1.382-1.366c.352-.593.526-1.29.526-2.09 0-.79-.147-1.48-.444-2.073a3.235 3.235 0 0 0-1.283-1.399c-.549-.34-1.195-.51-1.942-.51a3.476 3.476 0 0 0-1.527.344l-.086.043-.165.09a3.412 3.412 0 0 0-.33.214c-.288.21-.507.446-.656.707a1.893 1.893 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.482 2.482 0 0 0 .566.7c.078.065.159.125.245.18l.144.08a2.105 2.105 0 0 0 .975.232c.713 0 1.262-.225 1.645-.675.384-.46.576-1.053.576-1.778 0-.734-.192-1.327-.576-1.777-.373-.46-.921-.692-1.645-.692a2.18 2.18 0 0 0-1.015.235c-.147.075-.285.17-.415.282l-.15.142a2.086 2.086 0 0 0-.42.594c-.149.32-.223.685-.223 1.1v.115c0 .47.097.89.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.868.868 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.13 1.13 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013c.23-.087.472-.134.724-.14l.069-.002c.329 0 .542.033.642.099l.247-1.794c-.13-.066-.37-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2.086 2.086 0 0 0-.411.148 2.18 2.18 0 0 0-.4.249 2.482 2.482 0 0 0-.485.499 2.659 2.659 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884c0-.364.053-.678.159-.943a1.49 1.49 0 0 1 .466-.636 2.52 2.52 0 0 1 .399-.253 2.19 2.19 0 0 1 .224-.099zm9.784 2.656.05-.922c0-1.162-.285-2.062-.856-2.698-.559-.647-1.42-.97-2.584-.97-.746 0-1.415.163-2.007.493a3.462 3.462 0 0 0-1.4 1.382c-.329.604-.493 1.306-.493 2.106 0 .714.143 1.371.428 1.975.285.593.73 1.07 1.332 1.432.604.351 1.355.526 2.255.526.649 0 1.204-.062 1.668-.185l.044-.012.135-.04c.409-.122.736-.263.984-.421l-.542-1.267c-.2.108-.415.199-.642.274l-.297.087c-.34.088-.773.131-1.3.131-.636 0-1.135-.147-1.497-.444a1.573 1.573 0 0 1-.192-.193c-.244-.294-.415-.705-.512-1.234l-.004-.021h5.43zm-5.427-1.256-.003.022h3.752v-.138c-.007-.485-.104-.857-.288-1.118a1.056 1.056 0 0 0-.156-.176c-.307-.285-.746-.428-1.316-.428-.657 0-1.155.202-1.494.604-.253.3-.417.712-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z' fill='%23000' fill-opacity='.4' fill-rule='evenodd'/%3E%3Cpath d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81c-.68 0-1.311-.16-1.893-.478a3.795 3.795 0 0 1-1.381-1.382c-.34-.604-.51-1.306-.51-2.106 0-.79.147-1.482.444-2.074a3.364 3.364 0 0 1 1.3-1.382c.559-.33 1.217-.494 1.974-.494a3.293 3.293 0 0 1 1.234.231 3.341 3.341 0 0 1 .97.575c.264.22.44.439.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332c-.186.395-.526.746-1.02 1.053a3.167 3.167 0 0 1-1.662.444zm.296-1.482c.626 0 1.152-.214 1.58-.642.428-.44.642-1.01.642-1.711v-.115c0-.472-.098-.894-.296-1.267a2.211 2.211 0 0 0-.807-.872 2.098 2.098 0 0 0-1.119-.313c-.702 0-1.245.231-1.629.692-.384.45-.575 1.037-.575 1.76 0 .736.186 1.333.559 1.795.384.45.933.675 1.645.675zm6.521-6.237h1.711v1.4c.604-1.065 1.547-1.597 2.83-1.597 1.064 0 1.926.34 2.584 1.02.659.67.988 1.641.988 2.914 0 .79-.164 1.487-.493 2.09a3.456 3.456 0 0 1-1.316 1.399 3.51 3.51 0 0 1-1.844.493c-.636 0-1.19-.11-1.662-.329a2.665 2.665 0 0 1-1.086-.97l.017 5.134h-1.728V9.242zm4.048 6.22c.714 0 1.262-.224 1.645-.674.385-.46.576-1.048.576-1.762 0-.746-.192-1.338-.576-1.777-.372-.45-.92-.675-1.645-.675-.395 0-.768.098-1.12.296-.34.187-.613.46-.822.823-.197.351-.296.763-.296 1.234v.115c0 .472.098.894.296 1.267.209.362.483.647.823.855.34.197.713.297 1.119.297z' fill='%23fff'/%3E%3Cpath d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.159 1.159 0 0 1-.856-.346 1.165 1.165 0 0 1-.346-.856 1.053 1.053 0 0 1 .346-.79c.23-.219.516-.329.856-.329.329 0 .609.11.839.33a1.053 1.053 0 0 1 .345.79 1.159 1.159 0 0 1-.345.855c-.22.23-.5.346-.84.346zm7.875 9.133a3.167 3.167 0 0 1-1.662-.444c-.482-.307-.817-.658-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283c.186-.438.548-.812 1.086-1.119a3.486 3.486 0 0 1 1.778-.477c.746 0 1.393.17 1.942.51a3.235 3.235 0 0 1 1.283 1.4c.297.592.444 1.282.444 2.072 0 .8-.175 1.498-.526 2.09a3.52 3.52 0 0 1-1.382 1.366 3.785 3.785 0 0 1-1.876.477zm-.296-1.481c.713 0 1.26-.225 1.645-.675.384-.46.577-1.053.577-1.778 0-.734-.193-1.327-.577-1.776-.373-.46-.921-.692-1.645-.692a2.115 2.115 0 0 0-1.58.659c-.428.428-.642.992-.642 1.694v.115c0 .473.098.895.296 1.267a2.385 2.385 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481c.176-.505.46-.91.856-1.217a2.14 2.14 0 0 1 1.349-.46c.351 0 .593.032.724.098l-.247 1.794c-.099-.066-.313-.099-.642-.099-.516 0-.988.164-1.416.494-.417.329-.626.855-.626 1.58v3.883h-1.777V9.242zm9.534 7.718c-.9 0-1.651-.175-2.255-.526-.603-.362-1.047-.84-1.332-1.432a4.567 4.567 0 0 1-.428-1.975c0-.8.164-1.502.493-2.106a3.462 3.462 0 0 1 1.4-1.382c.592-.33 1.262-.494 2.007-.494 1.163 0 2.024.324 2.584.97.57.637.856 1.537.856 2.7 0 .296-.017.603-.05.92h-5.43c.12.67.356 1.153.708 1.45.362.296.86.443 1.497.443.526 0 .96-.044 1.3-.131a4.123 4.123 0 0 0 .938-.362l.542 1.267c-.274.175-.647.329-1.119.46-.472.132-1.042.197-1.711.197zm1.596-4.558c.01-.68-.137-1.158-.444-1.432-.307-.285-.746-.428-1.316-.428-1.152 0-1.815.62-1.991 1.86h3.752z' fill='%23e1e3e9'/%3E%3Cg fill-rule='evenodd' stroke-width='1.036'%3E%3Cpath d='m8.166 16.146-.002.002a1.54 1.54 0 0 1-2.009 0l-.002-.002-.043-.034-.002-.002-.199-.162H4.377a.657.657 0 0 0-.659.659v1.84a.657.657 0 0 0 .659.659h5.565a.657.657 0 0 0 .659-.659v-1.84a.657.657 0 0 0-.659-.659H8.411l-.202.164zm-1.121-.905a.29.29 0 0 0 .113.023.286.286 0 0 0 .189-.07l.077-.063c.634-.508 4.672-3.743 4.672-7.575 0-2.55-2.215-4.625-4.938-4.625S2.221 5.006 2.221 7.556c0 3.225 2.86 6.027 4.144 7.137h.004l.04.038.484.4.077.063a.628.628 0 0 0 .074.047zm-2.52-.548a16.898 16.898 0 0 1-1.183-1.315C2.187 11.942.967 9.897.967 7.555c0-3.319 2.855-5.88 6.192-5.88 3.338 0 6.193 2.561 6.193 5.881 0 2.34-1.22 4.387-2.376 5.822a16.898 16.898 0 0 1-1.182 1.315h.15a1.912 1.912 0 0 1 1.914 1.914v1.84a1.912 1.912 0 0 1-1.914 1.914H4.377a1.912 1.912 0 0 1-1.914-1.914v-1.84a1.912 1.912 0 0 1 1.914-1.914zm3.82-6.935c0 .692-.55 1.222-1.187 1.222s-1.185-.529-1.185-1.222.548-1.222 1.185-1.222c.638 0 1.186.529 1.186 1.222zm-1.186 2.477c1.348 0 2.442-1.11 2.442-2.478S8.507 5.28 7.159 5.28 4.72 6.39 4.72 7.758s1.092 2.477 2.44 2.477zm2.048 7.71H5.114v-.838h4.093z' fill='%23000' fill-opacity='.4'/%3E%3Cpath d='M2.222 7.555c0-2.55 2.214-4.625 4.937-4.625 2.723 0 4.938 2.075 4.938 4.625 0 3.832-4.038 7.068-4.672 7.575l-.077.063a.286.286 0 0 1-.189.07.286.286 0 0 1-.188-.07l-.077-.063c-.634-.507-4.672-3.743-4.672-7.575zm4.937 2.68c1.348 0 2.442-1.11 2.442-2.478S8.507 5.28 7.159 5.28 4.72 6.39 4.72 7.758s1.092 2.477 2.44 2.477z' fill='%23e1e3e9'/%3E%3Cpath d='M4.377 15.948a.657.657 0 0 0-.659.659v1.84a.657.657 0 0 0 .659.659h5.565a.657.657 0 0 0 .659-.659v-1.84a.657.657 0 0 0-.659-.659zm4.83 1.16H5.114v.838h4.093z' fill='%23fff'/%3E%3C/g%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo,a.maplibregl-ctrl-logo{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.255 1.255 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.255 1.255 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5.11 5.11 0 0 1 .314-.787l.009-.016a4.623 4.623 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.548 4.548 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4.314.319.566.676.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.416 2.416 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.448 2.448 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675c.211.2.381.43.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.76 4.76 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.407 3.407 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.255 1.255 0 0 1 .689 1.004 4.73 4.73 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528 0 .343-.02.694-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.815 5.815 0 0 1-.548-2.512c0-.286.017-.567.053-.843a1.255 1.255 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.778 4.778 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.47 4.47 0 0 1-1.935-.424 1.252 1.252 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.402 2.402 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.703 4.703 0 0 1-1.782 1.884 4.767 4.767 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.47 4.47 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a4.983 4.983 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.255 1.255 0 0 1-1.115.676h-.098a1.255 1.255 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15c.329-.237.574-.499.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267c-.088-.22-.264-.438-.526-.658l-.032-.028a3.16 3.16 0 0 0-.668-.428l-.27-.12a3.293 3.293 0 0 0-1.235-.23c-.757 0-1.415.163-1.974.493a3.36 3.36 0 0 0-1.3 1.382c-.297.593-.444 1.284-.444 2.074 0 .8.17 1.503.51 2.107a3.795 3.795 0 0 0 1.382 1.381 3.883 3.883 0 0 0 1.893.477c.53 0 1.015-.11 1.455-.33zm-2.789-5.38c-.384.45-.575 1.038-.575 1.762 0 .735.186 1.332.559 1.794.384.45.933.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.17 2.17 0 0 0 .468-.29l.178-.161a2.163 2.163 0 0 0 .397-.561c.163-.333.244-.717.244-1.15v-.115c0-.472-.098-.894-.296-1.267l-.043-.077a2.211 2.211 0 0 0-.633-.709l-.13-.086-.047-.028a2.099 2.099 0 0 0-1.073-.285c-.702 0-1.244.231-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.958.958 0 0 0-.353-.389.851.851 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.626 2.626 0 0 0 .331.423c.213.22.464.402.755.548l.173.074c.433.17.93.255 1.49.255.68 0 1.295-.165 1.844-.493a3.447 3.447 0 0 0 1.316-1.4c.329-.603.493-1.299.493-2.089 0-1.273-.33-2.243-.988-2.913-.658-.68-1.52-1.02-2.584-1.02-.598 0-1.124.115-1.575.347a2.807 2.807 0 0 0-.415.262l-.199.166a3.35 3.35 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138c.137.193.297.36.48.5l.155.11.053.034c.34.197.713.297 1.119.297.714 0 1.262-.225 1.645-.675.385-.46.576-1.048.576-1.762 0-.746-.192-1.338-.576-1.777-.372-.45-.92-.675-1.645-.675-.29 0-.569.053-.835.16a2.366 2.366 0 0 0-.284.136 1.99 1.99 0 0 0-.363.254 2.237 2.237 0 0 0-.46.569l-.082.162a2.56 2.56 0 0 0-.213 1.072v.115c0 .471.098.894.296 1.267l.135.211zm.964-.818a1.11 1.11 0 0 0 .367.385.937.937 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a.995.995 0 0 0-.503.135l-.012.007a.859.859 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.43 1.43 0 0 0 .14.66zm15.7-6.222c.232-.23.346-.516.346-.856a1.053 1.053 0 0 0-.345-.79 1.175 1.175 0 0 0-.84-.329c-.34 0-.625.11-.855.33a1.053 1.053 0 0 0-.346.79c0 .34.115.625.346.855.23.23.516.346.856.346.34 0 .62-.115.839-.346zm4.337 9.314.033-1.332c.128.269.324.518.59.747l.098.081a3.727 3.727 0 0 0 .316.224l.223.122a3.21 3.21 0 0 0 1.44.322 3.785 3.785 0 0 0 1.875-.477 3.52 3.52 0 0 0 1.382-1.366c.352-.593.526-1.29.526-2.09 0-.79-.147-1.48-.444-2.073a3.235 3.235 0 0 0-1.283-1.399c-.549-.34-1.195-.51-1.942-.51a3.476 3.476 0 0 0-1.527.344l-.086.043-.165.09a3.412 3.412 0 0 0-.33.214c-.288.21-.507.446-.656.707a1.893 1.893 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.482 2.482 0 0 0 .566.7c.078.065.159.125.245.18l.144.08a2.105 2.105 0 0 0 .975.232c.713 0 1.262-.225 1.645-.675.384-.46.576-1.053.576-1.778 0-.734-.192-1.327-.576-1.777-.373-.46-.921-.692-1.645-.692a2.18 2.18 0 0 0-1.015.235c-.147.075-.285.17-.415.282l-.15.142a2.086 2.086 0 0 0-.42.594c-.149.32-.223.685-.223 1.1v.115c0 .47.097.89.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.868.868 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.13 1.13 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013c.23-.087.472-.134.724-.14l.069-.002c.329 0 .542.033.642.099l.247-1.794c-.13-.066-.37-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2.086 2.086 0 0 0-.411.148 2.18 2.18 0 0 0-.4.249 2.482 2.482 0 0 0-.485.499 2.659 2.659 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884c0-.364.053-.678.159-.943a1.49 1.49 0 0 1 .466-.636 2.52 2.52 0 0 1 .399-.253 2.19 2.19 0 0 1 .224-.099zm9.784 2.656.05-.922c0-1.162-.285-2.062-.856-2.698-.559-.647-1.42-.97-2.584-.97-.746 0-1.415.163-2.007.493a3.462 3.462 0 0 0-1.4 1.382c-.329.604-.493 1.306-.493 2.106 0 .714.143 1.371.428 1.975.285.593.73 1.07 1.332 1.432.604.351 1.355.526 2.255.526.649 0 1.204-.062 1.668-.185l.044-.012.135-.04c.409-.122.736-.263.984-.421l-.542-1.267c-.2.108-.415.199-.642.274l-.297.087c-.34.088-.773.131-1.3.131-.636 0-1.135-.147-1.497-.444a1.573 1.573 0 0 1-.192-.193c-.244-.294-.415-.705-.512-1.234l-.004-.021h5.43zm-5.427-1.256-.003.022h3.752v-.138c-.007-.485-.104-.857-.288-1.118a1.056 1.056 0 0 0-.156-.176c-.307-.285-.746-.428-1.316-.428-.657 0-1.155.202-1.494.604-.253.3-.417.712-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z' fill='%23000' fill-opacity='.4' fill-rule='evenodd'/%3E%3Cpath d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81c-.68 0-1.311-.16-1.893-.478a3.795 3.795 0 0 1-1.381-1.382c-.34-.604-.51-1.306-.51-2.106 0-.79.147-1.482.444-2.074a3.364 3.364 0 0 1 1.3-1.382c.559-.33 1.217-.494 1.974-.494a3.293 3.293 0 0 1 1.234.231 3.341 3.341 0 0 1 .97.575c.264.22.44.439.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332c-.186.395-.526.746-1.02 1.053a3.167 3.167 0 0 1-1.662.444zm.296-1.482c.626 0 1.152-.214 1.58-.642.428-.44.642-1.01.642-1.711v-.115c0-.472-.098-.894-.296-1.267a2.211 2.211 0 0 0-.807-.872 2.098 2.098 0 0 0-1.119-.313c-.702 0-1.245.231-1.629.692-.384.45-.575 1.037-.575 1.76 0 .736.186 1.333.559 1.795.384.45.933.675 1.645.675zm6.521-6.237h1.711v1.4c.604-1.065 1.547-1.597 2.83-1.597 1.064 0 1.926.34 2.584 1.02.659.67.988 1.641.988 2.914 0 .79-.164 1.487-.493 2.09a3.456 3.456 0 0 1-1.316 1.399 3.51 3.51 0 0 1-1.844.493c-.636 0-1.19-.11-1.662-.329a2.665 2.665 0 0 1-1.086-.97l.017 5.134h-1.728V9.242zm4.048 6.22c.714 0 1.262-.224 1.645-.674.385-.46.576-1.048.576-1.762 0-.746-.192-1.338-.576-1.777-.372-.45-.92-.675-1.645-.675-.395 0-.768.098-1.12.296-.34.187-.613.46-.822.823-.197.351-.296.763-.296 1.234v.115c0 .472.098.894.296 1.267.209.362.483.647.823.855.34.197.713.297 1.119.297z' fill='%23fff'/%3E%3Cpath d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.159 1.159 0 0 1-.856-.346 1.165 1.165 0 0 1-.346-.856 1.053 1.053 0 0 1 .346-.79c.23-.219.516-.329.856-.329.329 0 .609.11.839.33a1.053 1.053 0 0 1 .345.79 1.159 1.159 0 0 1-.345.855c-.22.23-.5.346-.84.346zm7.875 9.133a3.167 3.167 0 0 1-1.662-.444c-.482-.307-.817-.658-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283c.186-.438.548-.812 1.086-1.119a3.486 3.486 0 0 1 1.778-.477c.746 0 1.393.17 1.942.51a3.235 3.235 0 0 1 1.283 1.4c.297.592.444 1.282.444 2.072 0 .8-.175 1.498-.526 2.09a3.52 3.52 0 0 1-1.382 1.366 3.785 3.785 0 0 1-1.876.477zm-.296-1.481c.713 0 1.26-.225 1.645-.675.384-.46.577-1.053.577-1.778 0-.734-.193-1.327-.577-1.776-.373-.46-.921-.692-1.645-.692a2.115 2.115 0 0 0-1.58.659c-.428.428-.642.992-.642 1.694v.115c0 .473.098.895.296 1.267a2.385 2.385 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481c.176-.505.46-.91.856-1.217a2.14 2.14 0 0 1 1.349-.46c.351 0 .593.032.724.098l-.247 1.794c-.099-.066-.313-.099-.642-.099-.516 0-.988.164-1.416.494-.417.329-.626.855-.626 1.58v3.883h-1.777V9.242zm9.534 7.718c-.9 0-1.651-.175-2.255-.526-.603-.362-1.047-.84-1.332-1.432a4.567 4.567 0 0 1-.428-1.975c0-.8.164-1.502.493-2.106a3.462 3.462 0 0 1 1.4-1.382c.592-.33 1.262-.494 2.007-.494 1.163 0 2.024.324 2.584.97.57.637.856 1.537.856 2.7 0 .296-.017.603-.05.92h-5.43c.12.67.356 1.153.708 1.45.362.296.86.443 1.497.443.526 0 .96-.044 1.3-.131a4.123 4.123 0 0 0 .938-.362l.542 1.267c-.274.175-.647.329-1.119.46-.472.132-1.042.197-1.711.197zm1.596-4.558c.01-.68-.137-1.158-.444-1.432-.307-.285-.746-.428-1.316-.428-1.152 0-1.815.62-1.991 1.86h3.752z' fill='%23e1e3e9'/%3E%3Cg fill-rule='evenodd' stroke-width='1.036'%3E%3Cpath d='m8.166 16.146-.002.002a1.54 1.54 0 0 1-2.009 0l-.002-.002-.043-.034-.002-.002-.199-.162H4.377a.657.657 0 0 0-.659.659v1.84a.657.657 0 0 0 .659.659h5.565a.657.657 0 0 0 .659-.659v-1.84a.657.657 0 0 0-.659-.659H8.411l-.202.164zm-1.121-.905a.29.29 0 0 0 .113.023.286.286 0 0 0 .189-.07l.077-.063c.634-.508 4.672-3.743 4.672-7.575 0-2.55-2.215-4.625-4.938-4.625S2.221 5.006 2.221 7.556c0 3.225 2.86 6.027 4.144 7.137h.004l.04.038.484.4.077.063a.628.628 0 0 0 .074.047zm-2.52-.548a16.898 16.898 0 0 1-1.183-1.315C2.187 11.942.967 9.897.967 7.555c0-3.319 2.855-5.88 6.192-5.88 3.338 0 6.193 2.561 6.193 5.881 0 2.34-1.22 4.387-2.376 5.822a16.898 16.898 0 0 1-1.182 1.315h.15a1.912 1.912 0 0 1 1.914 1.914v1.84a1.912 1.912 0 0 1-1.914 1.914H4.377a1.912 1.912 0 0 1-1.914-1.914v-1.84a1.912 1.912 0 0 1 1.914-1.914zm3.82-6.935c0 .692-.55 1.222-1.187 1.222s-1.185-.529-1.185-1.222.548-1.222 1.185-1.222c.638 0 1.186.529 1.186 1.222zm-1.186 2.477c1.348 0 2.442-1.11 2.442-2.478S8.507 5.28 7.159 5.28 4.72 6.39 4.72 7.758s1.092 2.477 2.44 2.477zm2.048 7.71H5.114v-.838h4.093z' fill='%23000' fill-opacity='.4'/%3E%3Cpath d='M2.222 7.555c0-2.55 2.214-4.625 4.937-4.625 2.723 0 4.938 2.075 4.938 4.625 0 3.832-4.038 7.068-4.672 7.575l-.077.063a.286.286 0 0 1-.189.07.286.286 0 0 1-.188-.07l-.077-.063c-.634-.507-4.672-3.743-4.672-7.575zm4.937 2.68c1.348 0 2.442-1.11 2.442-2.478S8.507 5.28 7.159 5.28 4.72 6.39 4.72 7.758s1.092 2.477 2.44 2.477z' fill='%23e1e3e9'/%3E%3Cpath d='M4.377 15.948a.657.657 0 0 0-.659.659v1.84a.657.657 0 0 0 .659.659h5.565a.657.657 0 0 0 .659-.659v-1.84a.657.657 0 0 0-.659-.659zm4.83 1.16H5.114v.838h4.093z' fill='%23fff'/%3E%3C/g%3E%3C/svg%3E\")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib,.maplibregl-ctrl.maplibregl-ctrl-attrib{background-color:hsla(0,0%,100%,.5);margin:0;padding:0 5px}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact,.maplibregl-ctrl-attrib.maplibregl-compact{background-color:#fff;border-radius:12px;box-sizing:content-box;margin:10px;min-height:20px;padding:2px 24px 2px 0;position:relative}.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.maplibregl-ctrl-attrib.maplibregl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact-show,.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact-show{border-radius:12px;padding:2px 8px 2px 28px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner,.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button,.maplibregl-ctrl-attrib-button{background-color:hsla(0,0%,100%,.5);background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E\");border:0;border-radius:12px;box-sizing:border-box;cursor:pointer;display:none;height:24px;outline:none;position:absolute;right:0;top:0;width:24px}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button{appearance:none;list-style:none}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button::-webkit-details-marker{display:none}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button,.maplibregl-ctrl-bottom-left .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-top-left .maplibregl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-inner{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button,.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-button{background-color:rgb(0 0 0/5%)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after,.maplibregl-ctrl-bottom-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after,.maplibregl-ctrl-top-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{right:0;top:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after,.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{left:0;top:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after,.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after,.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E\")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after,.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl-attrib a,.maplibregl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover,.maplibregl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-attrib-empty,.maplibregl-attrib-empty{display:none}.mapboxgl-ctrl-scale,.maplibregl-ctrl-scale{background-color:hsla(0,0%,100%,.75);border:2px solid #333;border-top:#333;box-sizing:border-box;color:#333;font-size:10px;padding:0 5px}.mapboxgl-popup,.maplibregl-popup{display:flex;left:0;pointer-events:none;position:absolute;top:0;will-change:transform}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right,.maplibregl-popup-anchor-top,.maplibregl-popup-anchor-top-left,.maplibregl-popup-anchor-top-right{flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right,.maplibregl-popup-anchor-bottom,.maplibregl-popup-anchor-bottom-left,.maplibregl-popup-anchor-bottom-right{flex-direction:column-reverse}.mapboxgl-popup-anchor-left,.maplibregl-popup-anchor-left{flex-direction:row}.mapboxgl-popup-anchor-right,.maplibregl-popup-anchor-right{flex-direction:row-reverse}.mapboxgl-popup-tip,.maplibregl-popup-tip{border:10px solid transparent;height:0;width:0;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip,.maplibregl-popup-anchor-top .maplibregl-popup-tip{align-self:center;border-bottom-color:#fff;border-top:none}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip,.maplibregl-popup-anchor-top-left .maplibregl-popup-tip{align-self:flex-start;border-bottom-color:#fff;border-left:none;border-top:none}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip,.maplibregl-popup-anchor-top-right .maplibregl-popup-tip{align-self:flex-end;border-bottom-color:#fff;border-right:none;border-top:none}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip,.maplibregl-popup-anchor-bottom .maplibregl-popup-tip{align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip,.maplibregl-popup-anchor-bottom-left .maplibregl-popup-tip{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip,.maplibregl-popup-anchor-bottom-right .maplibregl-popup-tip{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip,.maplibregl-popup-anchor-left .maplibregl-popup-tip{align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip,.maplibregl-popup-anchor-right .maplibregl-popup-tip{align-self:center;border-left-color:#fff;border-right:none}.mapboxgl-popup-close-button,.maplibregl-popup-close-button{background-color:transparent;border:0;border-radius:0 3px 0 0;cursor:pointer;position:absolute;right:0;top:0}.mapboxgl-popup-close-button:hover,.maplibregl-popup-close-button:hover{background-color:rgb(0 0 0/5%)}.mapboxgl-popup-content,.maplibregl-popup-content{background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:15px 10px;pointer-events:auto;position:relative}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content,.maplibregl-popup-anchor-top-left .maplibregl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content,.maplibregl-popup-anchor-top-right .maplibregl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content,.maplibregl-popup-anchor-bottom-left .maplibregl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content,.maplibregl-popup-anchor-bottom-right .maplibregl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer,.maplibregl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *,.maplibregl-popup-track-pointer *{pointer-events:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer,.maplibregl-map:hover .maplibregl-popup-track-pointer{display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer,.maplibregl-map:active .maplibregl-popup-track-pointer{display:none}.mapboxgl-marker,.maplibregl-marker{left:0;position:absolute;top:0;will-change:transform}.mapboxgl-user-location-dot,.maplibregl-user-location-dot{background-color:#1da1f2;border-radius:50%;height:15px;width:15px}.mapboxgl-user-location-dot:before,.maplibregl-user-location-dot:before{animation:maplibregl-user-location-dot-pulse 2s infinite;background-color:#1da1f2;border-radius:50%;content:\"\";height:15px;position:absolute;width:15px}.mapboxgl-user-location-dot:after,.maplibregl-user-location-dot:after{border:2px solid #fff;border-radius:50%;box-shadow:0 0 3px rgba(0,0,0,.35);box-sizing:border-box;content:\"\";height:19px;left:-2px;position:absolute;top:-2px;width:19px}@keyframes maplibregl-user-location-dot-pulse{0%{opacity:1;transform:scale(1)}70%{opacity:0;transform:scale(3)}to{opacity:0;transform:scale(1)}}.mapboxgl-user-location-dot-stale,.maplibregl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after,.maplibregl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle,.maplibregl-user-location-accuracy-circle{background-color:#1da1f233;border-radius:100%;height:1px;width:1px}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active,.maplibregl-crosshair,.maplibregl-crosshair .maplibregl-interactive,.maplibregl-crosshair .maplibregl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom,.maplibregl-boxzoom{background:#fff;border:2px dotted #202020;height:0;left:0;opacity:.5;position:absolute;top:0;width:0}.maplibregl-cooperative-gesture-screen{align-items:center;background:rgba(0,0,0,.4);bottom:0;color:#fff;display:flex;font-size:1.4em;justify-content:center;left:0;line-height:1.2;opacity:0;padding:1rem;pointer-events:none;position:absolute;right:0;top:0;transition:opacity 1s ease 1s}.maplibregl-cooperative-gesture-screen.maplibregl-show{opacity:1;transition:opacity .05s}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:none}@media (hover:none),(max-width:480px){.maplibregl-cooperative-gesture-screen .maplibregl-desktop-message{display:none}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:block}}","",{version:3,sources:["webpack://./src/styles/maplibre-gl.css"],names:[],mappings:"AAAA,8BAA8B,wCAAwC,CAAC,wDAAwD,CAAC,eAAe,CAAC,iBAAiB,CAAC,oCAAoC,MAAM,CAAC,iBAAiB,CAAC,KAAK,CAAC,oDAAoD,WAAW,CAAC,UAAU,CAAC,4MAA4M,WAAW,CAAC,qBAAqB,CAAC,wBAAwB,CAAC,oBAAoB,CAAC,gBAAgB,CAAC,oJAAoJ,cAAc,CAAC,wOAAwO,eAAe,CAAC,oQAAoQ,wBAAwB,CAAC,wPAAwP,uBAAuB,CAAC,wWAAwW,iBAAiB,CAAC,wNAAwN,mBAAmB,CAAC,iBAAiB,CAAC,SAAS,CAAC,kDAAkD,MAAM,CAAC,KAAK,CAAC,oDAAoD,OAAO,CAAC,KAAK,CAAC,wDAAwD,QAAQ,CAAC,MAAM,CAAC,0DAA0D,QAAQ,CAAC,OAAO,CAAC,gCAAgC,UAAU,CAAC,mBAAmB,CAAC,sBAAsB,CAAC,kFAAkF,UAAU,CAAC,oBAAoB,CAAC,oFAAoF,WAAW,CAAC,oBAAoB,CAAC,wFAAwF,UAAU,CAAC,oBAAoB,CAAC,0FAA0F,WAAW,CAAC,oBAAoB,CAAC,4CAA4C,eAAe,CAAC,iBAAiB,CAAC,oEAAoE,mCAAmC,CAAC,kCAAkC,oEAAoE,+BAA+B,CAAC,CAAC,0DAA0D,4BAA4B,CAAC,QAAQ,CAAC,qBAAqB,CAAC,cAAc,CAAC,aAAa,CAAC,WAAW,CAAC,YAAY,CAAC,SAAS,CAAC,UAAU,CAAC,wEAAwE,yBAAyB,CAAC,wFAAwF,uBAAuB,CAAC,2BAA2B,CAAC,aAAa,CAAC,WAAW,CAAC,UAAU,CAAC,kCAAkC,0CAA0C,4BAA4B,CAAC,wEAAwE,+BAA+B,CAAC,CAAC,kFAAkF,QAAQ,CAAC,SAAS,CAAC,8IAA8I,8BAA8B,CAAC,gEAAgE,kBAAkB,CAAC,0GAA0G,WAAW,CAAC,wFAAwF,8BAA8B,CAAC,kGAAkG,8BAA8B,CAAC,8GAA8G,eAAe,CAAC,8FAA8F,yBAAyB,CAAC,4FAA4F,yBAAyB,CAAC,4FAA4F,qBAAqB,CAAC,wIAAwI,6QAA6Q,CAAC,sIAAsI,+WAA+W,CAAC,kCAAkC,wIAAwI,6QAA6Q,CAAC,sIAAsI,+WAA+W,CAAC,CAAC,0CAA0C,wIAAwI,+PAA+P,CAAC,sIAAsI,iWAAiW,CAAC,CAAC,4IAA4I,ycAAyc,CAAC,oIAAoI,kcAAkc,CAAC,kCAAkC,4IAA4I,ycAAyc,CAAC,oIAAoI,gdAAgd,CAAC,CAAC,0CAA0C,4IAA4I,2bAA2b,CAAC,oIAAoI,kcAAkc,CAAC,CAAC,sIAAsI,8PAA8P,CAAC,kCAAkC,sIAAsI,8PAA8P,CAAC,CAAC,0CAA0C,sIAAsI,gPAAgP,CAAC,CAAC,sIAAsI,uXAAuX,CAAC,sJAAsJ,0XAA0X,CAAC,0IAA0I,6aAA6a,CAAC,4JAA4J,8dAA8d,CAAC,0MAA0M,gbAAgb,CAAC,sNAAsN,gbAAgb,CAAC,kNAAkN,6YAA6Y,CAAC,8NAA8N,6YAA6Y,CAAC,4MAA4M,4CAA4C,CAAC,kCAAkC,0IAA0I,6aAA6a,CAAC,4JAA4J,8dAA8d,CAAC,0MAA0M,gbAAgb,CAAC,sNAAsN,gbAAgb,CAAC,kNAAkN,6YAA6Y,CAAC,8NAA8N,6YAA6Y,CAAC,CAAC,0CAA0C,0IAA0I,+ZAA+Z,CAAC,4JAA4J,8dAA8d,CAAC,CAAC,2BAA2B,GAAG,sBAAsB,CAAC,GAAG,uBAAuB,CAAC,CAAC,4CAA4C,o9XAAo9X,CAAC,2BAA2B,CAAC,cAAc,CAAC,aAAa,CAAC,WAAW,CAAC,oBAAoB,CAAC,eAAe,CAAC,UAAU,CAAC,gFAAgF,UAAU,CAAC,kCAAkC,4CAA4C,4BAA4B,CAAC,o9XAAo9X,CAAC,CAAC,0CAA0C,4CAA4C,o9XAAo9X,CAAC,CAAC,4EAA4E,mCAAmC,CAAC,QAAQ,CAAC,aAAa,CAAC,cAAc,kFAAkF,qBAAqB,CAAC,kBAAkB,CAAC,sBAAsB,CAAC,WAAW,CAAC,eAAe,CAAC,sBAAsB,CAAC,iBAAiB,CAAC,4FAA4F,wBAAwB,CAAC,kBAAkB,CAAC,kSAAkS,kBAAkB,CAAC,wBAAwB,CAAC,4IAA4I,YAAY,CAAC,4DAA4D,mCAAmC,CAAC,mSAAmS,CAAC,QAAQ,CAAC,kBAAkB,CAAC,qBAAqB,CAAC,cAAc,CAAC,YAAY,CAAC,WAAW,CAAC,YAAY,CAAC,iBAAiB,CAAC,OAAO,CAAC,KAAK,CAAC,UAAU,CAAC,8DAA8D,eAAe,CAAC,eAAe,CAAC,sFAAsF,YAAY,CAAC,kOAAkO,MAAM,CAAC,oSAAoS,aAAa,CAAC,wJAAwJ,8BAA8B,CAAC,wJAAwJ,QAAQ,CAAC,OAAO,CAAC,kJAAkJ,OAAO,CAAC,KAAK,CAAC,gJAAgJ,MAAM,CAAC,KAAK,CAAC,sJAAsJ,QAAQ,CAAC,MAAM,CAAC,CAAC,6CAA6C,8FAA8F,iTAAiT,CAAC,CAAC,qDAAqD,8FAA8F,mSAAmS,CAAC,CAAC,kDAAkD,qBAAqB,CAAC,oBAAoB,CAAC,8DAA8D,aAAa,CAAC,yBAAyB,CAAC,gDAAgD,YAAY,CAAC,4CAA4C,oCAAoC,CAAC,qBAAqB,CAAC,eAAe,CAAC,qBAAqB,CAAC,UAAU,CAAC,cAAc,CAAC,aAAa,CAAC,kCAAkC,YAAY,CAAC,MAAM,CAAC,mBAAmB,CAAC,iBAAiB,CAAC,KAAK,CAAC,qBAAqB,CAAC,8LAA8L,qBAAqB,CAAC,gNAAgN,6BAA6B,CAAC,0DAA0D,kBAAkB,CAAC,4DAA4D,0BAA0B,CAAC,0CAA0C,6BAA6B,CAAC,QAAQ,CAAC,OAAO,CAAC,SAAS,CAAC,kGAAkG,iBAAiB,CAAC,wBAAwB,CAAC,eAAe,CAAC,4GAA4G,qBAAqB,CAAC,wBAAwB,CAAC,gBAAgB,CAAC,eAAe,CAAC,8GAA8G,mBAAmB,CAAC,wBAAwB,CAAC,iBAAiB,CAAC,eAAe,CAAC,wGAAwG,iBAAiB,CAAC,kBAAkB,CAAC,qBAAqB,CAAC,kHAAkH,qBAAqB,CAAC,kBAAkB,CAAC,gBAAgB,CAAC,qBAAqB,CAAC,oHAAoH,mBAAmB,CAAC,kBAAkB,CAAC,iBAAiB,CAAC,qBAAqB,CAAC,oGAAoG,iBAAiB,CAAC,gBAAgB,CAAC,uBAAuB,CAAC,sGAAsG,iBAAiB,CAAC,sBAAsB,CAAC,iBAAiB,CAAC,4DAA4D,4BAA4B,CAAC,QAAQ,CAAC,uBAAuB,CAAC,cAAc,CAAC,iBAAiB,CAAC,OAAO,CAAC,KAAK,CAAC,wEAAwE,8BAA8B,CAAC,kDAAkD,eAAe,CAAC,iBAAiB,CAAC,mCAAmC,CAAC,iBAAiB,CAAC,mBAAmB,CAAC,iBAAiB,CAAC,oHAAoH,wBAAwB,CAAC,sHAAsH,yBAAyB,CAAC,0HAA0H,2BAA2B,CAAC,4HAA4H,4BAA4B,CAAC,8DAA8D,YAAY,CAAC,kEAAkE,mBAAmB,CAAC,gBAAgB,CAAC,wGAAwG,YAAY,CAAC,0GAA0G,YAAY,CAAC,oCAAoC,MAAM,CAAC,iBAAiB,CAAC,KAAK,CAAC,qBAAqB,CAAC,0DAA0D,wBAAwB,CAAC,iBAAiB,CAAC,WAAW,CAAC,UAAU,CAAC,wEAAwE,wDAAwD,CAAC,wBAAwB,CAAC,iBAAiB,CAAC,UAAU,CAAC,WAAW,CAAC,iBAAiB,CAAC,UAAU,CAAC,sEAAsE,qBAAqB,CAAC,iBAAiB,CAAC,kCAAkC,CAAC,qBAAqB,CAAC,UAAU,CAAC,WAAW,CAAC,SAAS,CAAC,iBAAiB,CAAC,QAAQ,CAAC,UAAU,CAAC,8CAA8C,GAAG,SAAS,CAAC,kBAAkB,CAAC,IAAI,SAAS,CAAC,kBAAkB,CAAC,GAAG,SAAS,CAAC,kBAAkB,CAAC,CAAC,sEAAsE,qBAAqB,CAAC,kFAAkF,YAAY,CAAC,kFAAkF,0BAA0B,CAAC,kBAAkB,CAAC,UAAU,CAAC,SAAS,CAAC,wOAAwO,gBAAgB,CAAC,sCAAsC,eAAe,CAAC,yBAAyB,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAU,CAAC,iBAAiB,CAAC,KAAK,CAAC,OAAO,CAAC,uCAAuC,kBAAkB,CAAC,yBAAyB,CAAC,QAAQ,CAAC,UAAU,CAAC,YAAY,CAAC,eAAe,CAAC,sBAAsB,CAAC,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,YAAY,CAAC,mBAAmB,CAAC,iBAAiB,CAAC,OAAO,CAAC,KAAK,CAAC,6BAA6B,CAAC,uDAAuD,SAAS,CAAC,uBAAuB,CAAC,kEAAkE,YAAY,CAAC,sCAAsC,mEAAmE,YAAY,CAAC,kEAAkE,aAAa,CAAC",sourcesContent:[".mapboxgl-map,.maplibregl-map{-webkit-tap-highlight-color:rgb(0 0 0/0);font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative}.mapboxgl-canvas,.maplibregl-canvas{left:0;position:absolute;top:0}.mapboxgl-map:fullscreen,.maplibregl-map:fullscreen{height:100%;width:100%}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass,.maplibregl-canvas-container.maplibregl-interactive,.maplibregl-ctrl-group button.maplibregl-ctrl-compass{cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer,.maplibregl-canvas-container.maplibregl-interactive.maplibregl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active,.maplibregl-canvas-container.maplibregl-interactive:active,.maplibregl-ctrl-group button.maplibregl-ctrl-compass:active{cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate .maplibregl-canvas{touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas,.maplibregl-canvas-container.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right,.maplibregl-ctrl-bottom-left,.maplibregl-ctrl-bottom-right,.maplibregl-ctrl-top-left,.maplibregl-ctrl-top-right{pointer-events:none;position:absolute;z-index:2}.mapboxgl-ctrl-top-left,.maplibregl-ctrl-top-left{left:0;top:0}.mapboxgl-ctrl-top-right,.maplibregl-ctrl-top-right{right:0;top:0}.mapboxgl-ctrl-bottom-left,.maplibregl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right,.maplibregl-ctrl-bottom-right{bottom:0;right:0}.mapboxgl-ctrl,.maplibregl-ctrl{clear:both;pointer-events:auto;transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl,.maplibregl-ctrl-top-left .maplibregl-ctrl{float:left;margin:10px 0 0 10px}.mapboxgl-ctrl-top-right .mapboxgl-ctrl,.maplibregl-ctrl-top-right .maplibregl-ctrl{float:right;margin:10px 10px 0 0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl,.maplibregl-ctrl-bottom-left .maplibregl-ctrl{float:left;margin:0 0 10px 10px}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl,.maplibregl-ctrl-bottom-right .maplibregl-ctrl{float:right;margin:0 10px 10px 0}.mapboxgl-ctrl-group,.maplibregl-ctrl-group{background:#fff;border-radius:4px}.mapboxgl-ctrl-group:not(:empty),.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty),.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button,.maplibregl-ctrl-group button{background-color:transparent;border:0;box-sizing:border-box;cursor:pointer;display:block;height:29px;outline:none;padding:0;width:29px}.mapboxgl-ctrl-group button+button,.maplibregl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon,.maplibregl-ctrl button .maplibregl-ctrl-icon{background-position:50%;background-repeat:no-repeat;display:block;height:100%;width:100%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon,.maplibregl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button,.maplibregl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner,.maplibregl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus,.maplibregl-ctrl-attrib-button:focus,.maplibregl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled,.maplibregl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon,.maplibregl-ctrl button:disabled .maplibregl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover,.maplibregl-ctrl button:not(:disabled):hover{background-color:rgb(0 0 0/5%)}.mapboxgl-ctrl-group button:focus:focus-visible,.maplibregl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible),.maplibregl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child,.maplibregl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child,.maplibregl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child,.maplibregl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='m10.5 14 4-8 4 8h-8z'/%3E%3Cpath d='m10.5 16 4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='m10.5 14 4-8 4 8h-8z'/%3E%3Cpath d='m10.5 16 4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='m10.5 14 4-8 4 8h-8z'/%3E%3Cpath d='m10.5 16 4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-terrain .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-terrain .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' viewBox='0 0 22 22' fill='%23333'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-terrain-enabled .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-terrain-enabled .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' viewBox='0 0 22 22' fill='%2333b5e5'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='m14 5 1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-waiting .maplibregl-ctrl-icon{animation:maplibregl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='m14 5 1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='m14 5 1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}}@keyframes maplibregl-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}a.mapboxgl-ctrl-logo,a.maplibregl-ctrl-logo{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.255 1.255 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.255 1.255 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5.11 5.11 0 0 1 .314-.787l.009-.016a4.623 4.623 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.548 4.548 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4.314.319.566.676.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.416 2.416 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.448 2.448 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675c.211.2.381.43.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.76 4.76 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.407 3.407 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.255 1.255 0 0 1 .689 1.004 4.73 4.73 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528 0 .343-.02.694-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.815 5.815 0 0 1-.548-2.512c0-.286.017-.567.053-.843a1.255 1.255 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.778 4.778 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.47 4.47 0 0 1-1.935-.424 1.252 1.252 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.402 2.402 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.703 4.703 0 0 1-1.782 1.884 4.767 4.767 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.47 4.47 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a4.983 4.983 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.255 1.255 0 0 1-1.115.676h-.098a1.255 1.255 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15c.329-.237.574-.499.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267c-.088-.22-.264-.438-.526-.658l-.032-.028a3.16 3.16 0 0 0-.668-.428l-.27-.12a3.293 3.293 0 0 0-1.235-.23c-.757 0-1.415.163-1.974.493a3.36 3.36 0 0 0-1.3 1.382c-.297.593-.444 1.284-.444 2.074 0 .8.17 1.503.51 2.107a3.795 3.795 0 0 0 1.382 1.381 3.883 3.883 0 0 0 1.893.477c.53 0 1.015-.11 1.455-.33zm-2.789-5.38c-.384.45-.575 1.038-.575 1.762 0 .735.186 1.332.559 1.794.384.45.933.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.17 2.17 0 0 0 .468-.29l.178-.161a2.163 2.163 0 0 0 .397-.561c.163-.333.244-.717.244-1.15v-.115c0-.472-.098-.894-.296-1.267l-.043-.077a2.211 2.211 0 0 0-.633-.709l-.13-.086-.047-.028a2.099 2.099 0 0 0-1.073-.285c-.702 0-1.244.231-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.958.958 0 0 0-.353-.389.851.851 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.626 2.626 0 0 0 .331.423c.213.22.464.402.755.548l.173.074c.433.17.93.255 1.49.255.68 0 1.295-.165 1.844-.493a3.447 3.447 0 0 0 1.316-1.4c.329-.603.493-1.299.493-2.089 0-1.273-.33-2.243-.988-2.913-.658-.68-1.52-1.02-2.584-1.02-.598 0-1.124.115-1.575.347a2.807 2.807 0 0 0-.415.262l-.199.166a3.35 3.35 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138c.137.193.297.36.48.5l.155.11.053.034c.34.197.713.297 1.119.297.714 0 1.262-.225 1.645-.675.385-.46.576-1.048.576-1.762 0-.746-.192-1.338-.576-1.777-.372-.45-.92-.675-1.645-.675-.29 0-.569.053-.835.16a2.366 2.366 0 0 0-.284.136 1.99 1.99 0 0 0-.363.254 2.237 2.237 0 0 0-.46.569l-.082.162a2.56 2.56 0 0 0-.213 1.072v.115c0 .471.098.894.296 1.267l.135.211zm.964-.818a1.11 1.11 0 0 0 .367.385.937.937 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a.995.995 0 0 0-.503.135l-.012.007a.859.859 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.43 1.43 0 0 0 .14.66zm15.7-6.222c.232-.23.346-.516.346-.856a1.053 1.053 0 0 0-.345-.79 1.175 1.175 0 0 0-.84-.329c-.34 0-.625.11-.855.33a1.053 1.053 0 0 0-.346.79c0 .34.115.625.346.855.23.23.516.346.856.346.34 0 .62-.115.839-.346zm4.337 9.314.033-1.332c.128.269.324.518.59.747l.098.081a3.727 3.727 0 0 0 .316.224l.223.122a3.21 3.21 0 0 0 1.44.322 3.785 3.785 0 0 0 1.875-.477 3.52 3.52 0 0 0 1.382-1.366c.352-.593.526-1.29.526-2.09 0-.79-.147-1.48-.444-2.073a3.235 3.235 0 0 0-1.283-1.399c-.549-.34-1.195-.51-1.942-.51a3.476 3.476 0 0 0-1.527.344l-.086.043-.165.09a3.412 3.412 0 0 0-.33.214c-.288.21-.507.446-.656.707a1.893 1.893 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.482 2.482 0 0 0 .566.7c.078.065.159.125.245.18l.144.08a2.105 2.105 0 0 0 .975.232c.713 0 1.262-.225 1.645-.675.384-.46.576-1.053.576-1.778 0-.734-.192-1.327-.576-1.777-.373-.46-.921-.692-1.645-.692a2.18 2.18 0 0 0-1.015.235c-.147.075-.285.17-.415.282l-.15.142a2.086 2.086 0 0 0-.42.594c-.149.32-.223.685-.223 1.1v.115c0 .47.097.89.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.868.868 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.13 1.13 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013c.23-.087.472-.134.724-.14l.069-.002c.329 0 .542.033.642.099l.247-1.794c-.13-.066-.37-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2.086 2.086 0 0 0-.411.148 2.18 2.18 0 0 0-.4.249 2.482 2.482 0 0 0-.485.499 2.659 2.659 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884c0-.364.053-.678.159-.943a1.49 1.49 0 0 1 .466-.636 2.52 2.52 0 0 1 .399-.253 2.19 2.19 0 0 1 .224-.099zm9.784 2.656.05-.922c0-1.162-.285-2.062-.856-2.698-.559-.647-1.42-.97-2.584-.97-.746 0-1.415.163-2.007.493a3.462 3.462 0 0 0-1.4 1.382c-.329.604-.493 1.306-.493 2.106 0 .714.143 1.371.428 1.975.285.593.73 1.07 1.332 1.432.604.351 1.355.526 2.255.526.649 0 1.204-.062 1.668-.185l.044-.012.135-.04c.409-.122.736-.263.984-.421l-.542-1.267c-.2.108-.415.199-.642.274l-.297.087c-.34.088-.773.131-1.3.131-.636 0-1.135-.147-1.497-.444a1.573 1.573 0 0 1-.192-.193c-.244-.294-.415-.705-.512-1.234l-.004-.021h5.43zm-5.427-1.256-.003.022h3.752v-.138c-.007-.485-.104-.857-.288-1.118a1.056 1.056 0 0 0-.156-.176c-.307-.285-.746-.428-1.316-.428-.657 0-1.155.202-1.494.604-.253.3-.417.712-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z' fill='%23000' fill-opacity='.4' fill-rule='evenodd'/%3E%3Cpath d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81c-.68 0-1.311-.16-1.893-.478a3.795 3.795 0 0 1-1.381-1.382c-.34-.604-.51-1.306-.51-2.106 0-.79.147-1.482.444-2.074a3.364 3.364 0 0 1 1.3-1.382c.559-.33 1.217-.494 1.974-.494a3.293 3.293 0 0 1 1.234.231 3.341 3.341 0 0 1 .97.575c.264.22.44.439.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332c-.186.395-.526.746-1.02 1.053a3.167 3.167 0 0 1-1.662.444zm.296-1.482c.626 0 1.152-.214 1.58-.642.428-.44.642-1.01.642-1.711v-.115c0-.472-.098-.894-.296-1.267a2.211 2.211 0 0 0-.807-.872 2.098 2.098 0 0 0-1.119-.313c-.702 0-1.245.231-1.629.692-.384.45-.575 1.037-.575 1.76 0 .736.186 1.333.559 1.795.384.45.933.675 1.645.675zm6.521-6.237h1.711v1.4c.604-1.065 1.547-1.597 2.83-1.597 1.064 0 1.926.34 2.584 1.02.659.67.988 1.641.988 2.914 0 .79-.164 1.487-.493 2.09a3.456 3.456 0 0 1-1.316 1.399 3.51 3.51 0 0 1-1.844.493c-.636 0-1.19-.11-1.662-.329a2.665 2.665 0 0 1-1.086-.97l.017 5.134h-1.728V9.242zm4.048 6.22c.714 0 1.262-.224 1.645-.674.385-.46.576-1.048.576-1.762 0-.746-.192-1.338-.576-1.777-.372-.45-.92-.675-1.645-.675-.395 0-.768.098-1.12.296-.34.187-.613.46-.822.823-.197.351-.296.763-.296 1.234v.115c0 .472.098.894.296 1.267.209.362.483.647.823.855.34.197.713.297 1.119.297z' fill='%23fff'/%3E%3Cpath d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.159 1.159 0 0 1-.856-.346 1.165 1.165 0 0 1-.346-.856 1.053 1.053 0 0 1 .346-.79c.23-.219.516-.329.856-.329.329 0 .609.11.839.33a1.053 1.053 0 0 1 .345.79 1.159 1.159 0 0 1-.345.855c-.22.23-.5.346-.84.346zm7.875 9.133a3.167 3.167 0 0 1-1.662-.444c-.482-.307-.817-.658-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283c.186-.438.548-.812 1.086-1.119a3.486 3.486 0 0 1 1.778-.477c.746 0 1.393.17 1.942.51a3.235 3.235 0 0 1 1.283 1.4c.297.592.444 1.282.444 2.072 0 .8-.175 1.498-.526 2.09a3.52 3.52 0 0 1-1.382 1.366 3.785 3.785 0 0 1-1.876.477zm-.296-1.481c.713 0 1.26-.225 1.645-.675.384-.46.577-1.053.577-1.778 0-.734-.193-1.327-.577-1.776-.373-.46-.921-.692-1.645-.692a2.115 2.115 0 0 0-1.58.659c-.428.428-.642.992-.642 1.694v.115c0 .473.098.895.296 1.267a2.385 2.385 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481c.176-.505.46-.91.856-1.217a2.14 2.14 0 0 1 1.349-.46c.351 0 .593.032.724.098l-.247 1.794c-.099-.066-.313-.099-.642-.099-.516 0-.988.164-1.416.494-.417.329-.626.855-.626 1.58v3.883h-1.777V9.242zm9.534 7.718c-.9 0-1.651-.175-2.255-.526-.603-.362-1.047-.84-1.332-1.432a4.567 4.567 0 0 1-.428-1.975c0-.8.164-1.502.493-2.106a3.462 3.462 0 0 1 1.4-1.382c.592-.33 1.262-.494 2.007-.494 1.163 0 2.024.324 2.584.97.57.637.856 1.537.856 2.7 0 .296-.017.603-.05.92h-5.43c.12.67.356 1.153.708 1.45.362.296.86.443 1.497.443.526 0 .96-.044 1.3-.131a4.123 4.123 0 0 0 .938-.362l.542 1.267c-.274.175-.647.329-1.119.46-.472.132-1.042.197-1.711.197zm1.596-4.558c.01-.68-.137-1.158-.444-1.432-.307-.285-.746-.428-1.316-.428-1.152 0-1.815.62-1.991 1.86h3.752z' fill='%23e1e3e9'/%3E%3Cg fill-rule='evenodd' stroke-width='1.036'%3E%3Cpath d='m8.166 16.146-.002.002a1.54 1.54 0 0 1-2.009 0l-.002-.002-.043-.034-.002-.002-.199-.162H4.377a.657.657 0 0 0-.659.659v1.84a.657.657 0 0 0 .659.659h5.565a.657.657 0 0 0 .659-.659v-1.84a.657.657 0 0 0-.659-.659H8.411l-.202.164zm-1.121-.905a.29.29 0 0 0 .113.023.286.286 0 0 0 .189-.07l.077-.063c.634-.508 4.672-3.743 4.672-7.575 0-2.55-2.215-4.625-4.938-4.625S2.221 5.006 2.221 7.556c0 3.225 2.86 6.027 4.144 7.137h.004l.04.038.484.4.077.063a.628.628 0 0 0 .074.047zm-2.52-.548a16.898 16.898 0 0 1-1.183-1.315C2.187 11.942.967 9.897.967 7.555c0-3.319 2.855-5.88 6.192-5.88 3.338 0 6.193 2.561 6.193 5.881 0 2.34-1.22 4.387-2.376 5.822a16.898 16.898 0 0 1-1.182 1.315h.15a1.912 1.912 0 0 1 1.914 1.914v1.84a1.912 1.912 0 0 1-1.914 1.914H4.377a1.912 1.912 0 0 1-1.914-1.914v-1.84a1.912 1.912 0 0 1 1.914-1.914zm3.82-6.935c0 .692-.55 1.222-1.187 1.222s-1.185-.529-1.185-1.222.548-1.222 1.185-1.222c.638 0 1.186.529 1.186 1.222zm-1.186 2.477c1.348 0 2.442-1.11 2.442-2.478S8.507 5.28 7.159 5.28 4.72 6.39 4.72 7.758s1.092 2.477 2.44 2.477zm2.048 7.71H5.114v-.838h4.093z' fill='%23000' fill-opacity='.4'/%3E%3Cpath d='M2.222 7.555c0-2.55 2.214-4.625 4.937-4.625 2.723 0 4.938 2.075 4.938 4.625 0 3.832-4.038 7.068-4.672 7.575l-.077.063a.286.286 0 0 1-.189.07.286.286 0 0 1-.188-.07l-.077-.063c-.634-.507-4.672-3.743-4.672-7.575zm4.937 2.68c1.348 0 2.442-1.11 2.442-2.478S8.507 5.28 7.159 5.28 4.72 6.39 4.72 7.758s1.092 2.477 2.44 2.477z' fill='%23e1e3e9'/%3E%3Cpath d='M4.377 15.948a.657.657 0 0 0-.659.659v1.84a.657.657 0 0 0 .659.659h5.565a.657.657 0 0 0 .659-.659v-1.84a.657.657 0 0 0-.659-.659zm4.83 1.16H5.114v.838h4.093z' fill='%23fff'/%3E%3C/g%3E%3C/svg%3E\");background-repeat:no-repeat;cursor:pointer;display:block;height:23px;margin:0 0 -4px -4px;overflow:hidden;width:88px}a.mapboxgl-ctrl-logo.mapboxgl-compact,a.maplibregl-ctrl-logo.maplibregl-compact{width:14px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo,a.maplibregl-ctrl-logo{background-color:transparent;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.255 1.255 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.255 1.255 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5.11 5.11 0 0 1 .314-.787l.009-.016a4.623 4.623 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.548 4.548 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4.314.319.566.676.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.416 2.416 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.448 2.448 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675c.211.2.381.43.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.76 4.76 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.407 3.407 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.255 1.255 0 0 1 .689 1.004 4.73 4.73 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528 0 .343-.02.694-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.815 5.815 0 0 1-.548-2.512c0-.286.017-.567.053-.843a1.255 1.255 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.778 4.778 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.47 4.47 0 0 1-1.935-.424 1.252 1.252 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.402 2.402 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.703 4.703 0 0 1-1.782 1.884 4.767 4.767 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.47 4.47 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a4.983 4.983 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.255 1.255 0 0 1-1.115.676h-.098a1.255 1.255 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15c.329-.237.574-.499.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267c-.088-.22-.264-.438-.526-.658l-.032-.028a3.16 3.16 0 0 0-.668-.428l-.27-.12a3.293 3.293 0 0 0-1.235-.23c-.757 0-1.415.163-1.974.493a3.36 3.36 0 0 0-1.3 1.382c-.297.593-.444 1.284-.444 2.074 0 .8.17 1.503.51 2.107a3.795 3.795 0 0 0 1.382 1.381 3.883 3.883 0 0 0 1.893.477c.53 0 1.015-.11 1.455-.33zm-2.789-5.38c-.384.45-.575 1.038-.575 1.762 0 .735.186 1.332.559 1.794.384.45.933.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.17 2.17 0 0 0 .468-.29l.178-.161a2.163 2.163 0 0 0 .397-.561c.163-.333.244-.717.244-1.15v-.115c0-.472-.098-.894-.296-1.267l-.043-.077a2.211 2.211 0 0 0-.633-.709l-.13-.086-.047-.028a2.099 2.099 0 0 0-1.073-.285c-.702 0-1.244.231-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.958.958 0 0 0-.353-.389.851.851 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.626 2.626 0 0 0 .331.423c.213.22.464.402.755.548l.173.074c.433.17.93.255 1.49.255.68 0 1.295-.165 1.844-.493a3.447 3.447 0 0 0 1.316-1.4c.329-.603.493-1.299.493-2.089 0-1.273-.33-2.243-.988-2.913-.658-.68-1.52-1.02-2.584-1.02-.598 0-1.124.115-1.575.347a2.807 2.807 0 0 0-.415.262l-.199.166a3.35 3.35 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138c.137.193.297.36.48.5l.155.11.053.034c.34.197.713.297 1.119.297.714 0 1.262-.225 1.645-.675.385-.46.576-1.048.576-1.762 0-.746-.192-1.338-.576-1.777-.372-.45-.92-.675-1.645-.675-.29 0-.569.053-.835.16a2.366 2.366 0 0 0-.284.136 1.99 1.99 0 0 0-.363.254 2.237 2.237 0 0 0-.46.569l-.082.162a2.56 2.56 0 0 0-.213 1.072v.115c0 .471.098.894.296 1.267l.135.211zm.964-.818a1.11 1.11 0 0 0 .367.385.937.937 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a.995.995 0 0 0-.503.135l-.012.007a.859.859 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.43 1.43 0 0 0 .14.66zm15.7-6.222c.232-.23.346-.516.346-.856a1.053 1.053 0 0 0-.345-.79 1.175 1.175 0 0 0-.84-.329c-.34 0-.625.11-.855.33a1.053 1.053 0 0 0-.346.79c0 .34.115.625.346.855.23.23.516.346.856.346.34 0 .62-.115.839-.346zm4.337 9.314.033-1.332c.128.269.324.518.59.747l.098.081a3.727 3.727 0 0 0 .316.224l.223.122a3.21 3.21 0 0 0 1.44.322 3.785 3.785 0 0 0 1.875-.477 3.52 3.52 0 0 0 1.382-1.366c.352-.593.526-1.29.526-2.09 0-.79-.147-1.48-.444-2.073a3.235 3.235 0 0 0-1.283-1.399c-.549-.34-1.195-.51-1.942-.51a3.476 3.476 0 0 0-1.527.344l-.086.043-.165.09a3.412 3.412 0 0 0-.33.214c-.288.21-.507.446-.656.707a1.893 1.893 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.482 2.482 0 0 0 .566.7c.078.065.159.125.245.18l.144.08a2.105 2.105 0 0 0 .975.232c.713 0 1.262-.225 1.645-.675.384-.46.576-1.053.576-1.778 0-.734-.192-1.327-.576-1.777-.373-.46-.921-.692-1.645-.692a2.18 2.18 0 0 0-1.015.235c-.147.075-.285.17-.415.282l-.15.142a2.086 2.086 0 0 0-.42.594c-.149.32-.223.685-.223 1.1v.115c0 .47.097.89.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.868.868 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.13 1.13 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013c.23-.087.472-.134.724-.14l.069-.002c.329 0 .542.033.642.099l.247-1.794c-.13-.066-.37-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2.086 2.086 0 0 0-.411.148 2.18 2.18 0 0 0-.4.249 2.482 2.482 0 0 0-.485.499 2.659 2.659 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884c0-.364.053-.678.159-.943a1.49 1.49 0 0 1 .466-.636 2.52 2.52 0 0 1 .399-.253 2.19 2.19 0 0 1 .224-.099zm9.784 2.656.05-.922c0-1.162-.285-2.062-.856-2.698-.559-.647-1.42-.97-2.584-.97-.746 0-1.415.163-2.007.493a3.462 3.462 0 0 0-1.4 1.382c-.329.604-.493 1.306-.493 2.106 0 .714.143 1.371.428 1.975.285.593.73 1.07 1.332 1.432.604.351 1.355.526 2.255.526.649 0 1.204-.062 1.668-.185l.044-.012.135-.04c.409-.122.736-.263.984-.421l-.542-1.267c-.2.108-.415.199-.642.274l-.297.087c-.34.088-.773.131-1.3.131-.636 0-1.135-.147-1.497-.444a1.573 1.573 0 0 1-.192-.193c-.244-.294-.415-.705-.512-1.234l-.004-.021h5.43zm-5.427-1.256-.003.022h3.752v-.138c-.007-.485-.104-.857-.288-1.118a1.056 1.056 0 0 0-.156-.176c-.307-.285-.746-.428-1.316-.428-.657 0-1.155.202-1.494.604-.253.3-.417.712-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z' fill='%23000' fill-opacity='.4' fill-rule='evenodd'/%3E%3Cpath d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81c-.68 0-1.311-.16-1.893-.478a3.795 3.795 0 0 1-1.381-1.382c-.34-.604-.51-1.306-.51-2.106 0-.79.147-1.482.444-2.074a3.364 3.364 0 0 1 1.3-1.382c.559-.33 1.217-.494 1.974-.494a3.293 3.293 0 0 1 1.234.231 3.341 3.341 0 0 1 .97.575c.264.22.44.439.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332c-.186.395-.526.746-1.02 1.053a3.167 3.167 0 0 1-1.662.444zm.296-1.482c.626 0 1.152-.214 1.58-.642.428-.44.642-1.01.642-1.711v-.115c0-.472-.098-.894-.296-1.267a2.211 2.211 0 0 0-.807-.872 2.098 2.098 0 0 0-1.119-.313c-.702 0-1.245.231-1.629.692-.384.45-.575 1.037-.575 1.76 0 .736.186 1.333.559 1.795.384.45.933.675 1.645.675zm6.521-6.237h1.711v1.4c.604-1.065 1.547-1.597 2.83-1.597 1.064 0 1.926.34 2.584 1.02.659.67.988 1.641.988 2.914 0 .79-.164 1.487-.493 2.09a3.456 3.456 0 0 1-1.316 1.399 3.51 3.51 0 0 1-1.844.493c-.636 0-1.19-.11-1.662-.329a2.665 2.665 0 0 1-1.086-.97l.017 5.134h-1.728V9.242zm4.048 6.22c.714 0 1.262-.224 1.645-.674.385-.46.576-1.048.576-1.762 0-.746-.192-1.338-.576-1.777-.372-.45-.92-.675-1.645-.675-.395 0-.768.098-1.12.296-.34.187-.613.46-.822.823-.197.351-.296.763-.296 1.234v.115c0 .472.098.894.296 1.267.209.362.483.647.823.855.34.197.713.297 1.119.297z' fill='%23fff'/%3E%3Cpath d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.159 1.159 0 0 1-.856-.346 1.165 1.165 0 0 1-.346-.856 1.053 1.053 0 0 1 .346-.79c.23-.219.516-.329.856-.329.329 0 .609.11.839.33a1.053 1.053 0 0 1 .345.79 1.159 1.159 0 0 1-.345.855c-.22.23-.5.346-.84.346zm7.875 9.133a3.167 3.167 0 0 1-1.662-.444c-.482-.307-.817-.658-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283c.186-.438.548-.812 1.086-1.119a3.486 3.486 0 0 1 1.778-.477c.746 0 1.393.17 1.942.51a3.235 3.235 0 0 1 1.283 1.4c.297.592.444 1.282.444 2.072 0 .8-.175 1.498-.526 2.09a3.52 3.52 0 0 1-1.382 1.366 3.785 3.785 0 0 1-1.876.477zm-.296-1.481c.713 0 1.26-.225 1.645-.675.384-.46.577-1.053.577-1.778 0-.734-.193-1.327-.577-1.776-.373-.46-.921-.692-1.645-.692a2.115 2.115 0 0 0-1.58.659c-.428.428-.642.992-.642 1.694v.115c0 .473.098.895.296 1.267a2.385 2.385 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481c.176-.505.46-.91.856-1.217a2.14 2.14 0 0 1 1.349-.46c.351 0 .593.032.724.098l-.247 1.794c-.099-.066-.313-.099-.642-.099-.516 0-.988.164-1.416.494-.417.329-.626.855-.626 1.58v3.883h-1.777V9.242zm9.534 7.718c-.9 0-1.651-.175-2.255-.526-.603-.362-1.047-.84-1.332-1.432a4.567 4.567 0 0 1-.428-1.975c0-.8.164-1.502.493-2.106a3.462 3.462 0 0 1 1.4-1.382c.592-.33 1.262-.494 2.007-.494 1.163 0 2.024.324 2.584.97.57.637.856 1.537.856 2.7 0 .296-.017.603-.05.92h-5.43c.12.67.356 1.153.708 1.45.362.296.86.443 1.497.443.526 0 .96-.044 1.3-.131a4.123 4.123 0 0 0 .938-.362l.542 1.267c-.274.175-.647.329-1.119.46-.472.132-1.042.197-1.711.197zm1.596-4.558c.01-.68-.137-1.158-.444-1.432-.307-.285-.746-.428-1.316-.428-1.152 0-1.815.62-1.991 1.86h3.752z' fill='%23e1e3e9'/%3E%3Cg fill-rule='evenodd' stroke-width='1.036'%3E%3Cpath d='m8.166 16.146-.002.002a1.54 1.54 0 0 1-2.009 0l-.002-.002-.043-.034-.002-.002-.199-.162H4.377a.657.657 0 0 0-.659.659v1.84a.657.657 0 0 0 .659.659h5.565a.657.657 0 0 0 .659-.659v-1.84a.657.657 0 0 0-.659-.659H8.411l-.202.164zm-1.121-.905a.29.29 0 0 0 .113.023.286.286 0 0 0 .189-.07l.077-.063c.634-.508 4.672-3.743 4.672-7.575 0-2.55-2.215-4.625-4.938-4.625S2.221 5.006 2.221 7.556c0 3.225 2.86 6.027 4.144 7.137h.004l.04.038.484.4.077.063a.628.628 0 0 0 .074.047zm-2.52-.548a16.898 16.898 0 0 1-1.183-1.315C2.187 11.942.967 9.897.967 7.555c0-3.319 2.855-5.88 6.192-5.88 3.338 0 6.193 2.561 6.193 5.881 0 2.34-1.22 4.387-2.376 5.822a16.898 16.898 0 0 1-1.182 1.315h.15a1.912 1.912 0 0 1 1.914 1.914v1.84a1.912 1.912 0 0 1-1.914 1.914H4.377a1.912 1.912 0 0 1-1.914-1.914v-1.84a1.912 1.912 0 0 1 1.914-1.914zm3.82-6.935c0 .692-.55 1.222-1.187 1.222s-1.185-.529-1.185-1.222.548-1.222 1.185-1.222c.638 0 1.186.529 1.186 1.222zm-1.186 2.477c1.348 0 2.442-1.11 2.442-2.478S8.507 5.28 7.159 5.28 4.72 6.39 4.72 7.758s1.092 2.477 2.44 2.477zm2.048 7.71H5.114v-.838h4.093z' fill='%23000' fill-opacity='.4'/%3E%3Cpath d='M2.222 7.555c0-2.55 2.214-4.625 4.937-4.625 2.723 0 4.938 2.075 4.938 4.625 0 3.832-4.038 7.068-4.672 7.575l-.077.063a.286.286 0 0 1-.189.07.286.286 0 0 1-.188-.07l-.077-.063c-.634-.507-4.672-3.743-4.672-7.575zm4.937 2.68c1.348 0 2.442-1.11 2.442-2.478S8.507 5.28 7.159 5.28 4.72 6.39 4.72 7.758s1.092 2.477 2.44 2.477z' fill='%23e1e3e9'/%3E%3Cpath d='M4.377 15.948a.657.657 0 0 0-.659.659v1.84a.657.657 0 0 0 .659.659h5.565a.657.657 0 0 0 .659-.659v-1.84a.657.657 0 0 0-.659-.659zm4.83 1.16H5.114v.838h4.093z' fill='%23fff'/%3E%3C/g%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo,a.maplibregl-ctrl-logo{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.255 1.255 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.255 1.255 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5.11 5.11 0 0 1 .314-.787l.009-.016a4.623 4.623 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.548 4.548 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4.314.319.566.676.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.416 2.416 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.448 2.448 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675c.211.2.381.43.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.76 4.76 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.407 3.407 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.255 1.255 0 0 1 .689 1.004 4.73 4.73 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528 0 .343-.02.694-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.815 5.815 0 0 1-.548-2.512c0-.286.017-.567.053-.843a1.255 1.255 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.778 4.778 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.47 4.47 0 0 1-1.935-.424 1.252 1.252 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.402 2.402 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.703 4.703 0 0 1-1.782 1.884 4.767 4.767 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.47 4.47 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a4.983 4.983 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.255 1.255 0 0 1-1.115.676h-.098a1.255 1.255 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15c.329-.237.574-.499.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267c-.088-.22-.264-.438-.526-.658l-.032-.028a3.16 3.16 0 0 0-.668-.428l-.27-.12a3.293 3.293 0 0 0-1.235-.23c-.757 0-1.415.163-1.974.493a3.36 3.36 0 0 0-1.3 1.382c-.297.593-.444 1.284-.444 2.074 0 .8.17 1.503.51 2.107a3.795 3.795 0 0 0 1.382 1.381 3.883 3.883 0 0 0 1.893.477c.53 0 1.015-.11 1.455-.33zm-2.789-5.38c-.384.45-.575 1.038-.575 1.762 0 .735.186 1.332.559 1.794.384.45.933.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.17 2.17 0 0 0 .468-.29l.178-.161a2.163 2.163 0 0 0 .397-.561c.163-.333.244-.717.244-1.15v-.115c0-.472-.098-.894-.296-1.267l-.043-.077a2.211 2.211 0 0 0-.633-.709l-.13-.086-.047-.028a2.099 2.099 0 0 0-1.073-.285c-.702 0-1.244.231-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.958.958 0 0 0-.353-.389.851.851 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.626 2.626 0 0 0 .331.423c.213.22.464.402.755.548l.173.074c.433.17.93.255 1.49.255.68 0 1.295-.165 1.844-.493a3.447 3.447 0 0 0 1.316-1.4c.329-.603.493-1.299.493-2.089 0-1.273-.33-2.243-.988-2.913-.658-.68-1.52-1.02-2.584-1.02-.598 0-1.124.115-1.575.347a2.807 2.807 0 0 0-.415.262l-.199.166a3.35 3.35 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138c.137.193.297.36.48.5l.155.11.053.034c.34.197.713.297 1.119.297.714 0 1.262-.225 1.645-.675.385-.46.576-1.048.576-1.762 0-.746-.192-1.338-.576-1.777-.372-.45-.92-.675-1.645-.675-.29 0-.569.053-.835.16a2.366 2.366 0 0 0-.284.136 1.99 1.99 0 0 0-.363.254 2.237 2.237 0 0 0-.46.569l-.082.162a2.56 2.56 0 0 0-.213 1.072v.115c0 .471.098.894.296 1.267l.135.211zm.964-.818a1.11 1.11 0 0 0 .367.385.937.937 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a.995.995 0 0 0-.503.135l-.012.007a.859.859 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.43 1.43 0 0 0 .14.66zm15.7-6.222c.232-.23.346-.516.346-.856a1.053 1.053 0 0 0-.345-.79 1.175 1.175 0 0 0-.84-.329c-.34 0-.625.11-.855.33a1.053 1.053 0 0 0-.346.79c0 .34.115.625.346.855.23.23.516.346.856.346.34 0 .62-.115.839-.346zm4.337 9.314.033-1.332c.128.269.324.518.59.747l.098.081a3.727 3.727 0 0 0 .316.224l.223.122a3.21 3.21 0 0 0 1.44.322 3.785 3.785 0 0 0 1.875-.477 3.52 3.52 0 0 0 1.382-1.366c.352-.593.526-1.29.526-2.09 0-.79-.147-1.48-.444-2.073a3.235 3.235 0 0 0-1.283-1.399c-.549-.34-1.195-.51-1.942-.51a3.476 3.476 0 0 0-1.527.344l-.086.043-.165.09a3.412 3.412 0 0 0-.33.214c-.288.21-.507.446-.656.707a1.893 1.893 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.482 2.482 0 0 0 .566.7c.078.065.159.125.245.18l.144.08a2.105 2.105 0 0 0 .975.232c.713 0 1.262-.225 1.645-.675.384-.46.576-1.053.576-1.778 0-.734-.192-1.327-.576-1.777-.373-.46-.921-.692-1.645-.692a2.18 2.18 0 0 0-1.015.235c-.147.075-.285.17-.415.282l-.15.142a2.086 2.086 0 0 0-.42.594c-.149.32-.223.685-.223 1.1v.115c0 .47.097.89.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.868.868 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.13 1.13 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013c.23-.087.472-.134.724-.14l.069-.002c.329 0 .542.033.642.099l.247-1.794c-.13-.066-.37-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2.086 2.086 0 0 0-.411.148 2.18 2.18 0 0 0-.4.249 2.482 2.482 0 0 0-.485.499 2.659 2.659 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884c0-.364.053-.678.159-.943a1.49 1.49 0 0 1 .466-.636 2.52 2.52 0 0 1 .399-.253 2.19 2.19 0 0 1 .224-.099zm9.784 2.656.05-.922c0-1.162-.285-2.062-.856-2.698-.559-.647-1.42-.97-2.584-.97-.746 0-1.415.163-2.007.493a3.462 3.462 0 0 0-1.4 1.382c-.329.604-.493 1.306-.493 2.106 0 .714.143 1.371.428 1.975.285.593.73 1.07 1.332 1.432.604.351 1.355.526 2.255.526.649 0 1.204-.062 1.668-.185l.044-.012.135-.04c.409-.122.736-.263.984-.421l-.542-1.267c-.2.108-.415.199-.642.274l-.297.087c-.34.088-.773.131-1.3.131-.636 0-1.135-.147-1.497-.444a1.573 1.573 0 0 1-.192-.193c-.244-.294-.415-.705-.512-1.234l-.004-.021h5.43zm-5.427-1.256-.003.022h3.752v-.138c-.007-.485-.104-.857-.288-1.118a1.056 1.056 0 0 0-.156-.176c-.307-.285-.746-.428-1.316-.428-.657 0-1.155.202-1.494.604-.253.3-.417.712-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z' fill='%23000' fill-opacity='.4' fill-rule='evenodd'/%3E%3Cpath d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81c-.68 0-1.311-.16-1.893-.478a3.795 3.795 0 0 1-1.381-1.382c-.34-.604-.51-1.306-.51-2.106 0-.79.147-1.482.444-2.074a3.364 3.364 0 0 1 1.3-1.382c.559-.33 1.217-.494 1.974-.494a3.293 3.293 0 0 1 1.234.231 3.341 3.341 0 0 1 .97.575c.264.22.44.439.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332c-.186.395-.526.746-1.02 1.053a3.167 3.167 0 0 1-1.662.444zm.296-1.482c.626 0 1.152-.214 1.58-.642.428-.44.642-1.01.642-1.711v-.115c0-.472-.098-.894-.296-1.267a2.211 2.211 0 0 0-.807-.872 2.098 2.098 0 0 0-1.119-.313c-.702 0-1.245.231-1.629.692-.384.45-.575 1.037-.575 1.76 0 .736.186 1.333.559 1.795.384.45.933.675 1.645.675zm6.521-6.237h1.711v1.4c.604-1.065 1.547-1.597 2.83-1.597 1.064 0 1.926.34 2.584 1.02.659.67.988 1.641.988 2.914 0 .79-.164 1.487-.493 2.09a3.456 3.456 0 0 1-1.316 1.399 3.51 3.51 0 0 1-1.844.493c-.636 0-1.19-.11-1.662-.329a2.665 2.665 0 0 1-1.086-.97l.017 5.134h-1.728V9.242zm4.048 6.22c.714 0 1.262-.224 1.645-.674.385-.46.576-1.048.576-1.762 0-.746-.192-1.338-.576-1.777-.372-.45-.92-.675-1.645-.675-.395 0-.768.098-1.12.296-.34.187-.613.46-.822.823-.197.351-.296.763-.296 1.234v.115c0 .472.098.894.296 1.267.209.362.483.647.823.855.34.197.713.297 1.119.297z' fill='%23fff'/%3E%3Cpath d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.159 1.159 0 0 1-.856-.346 1.165 1.165 0 0 1-.346-.856 1.053 1.053 0 0 1 .346-.79c.23-.219.516-.329.856-.329.329 0 .609.11.839.33a1.053 1.053 0 0 1 .345.79 1.159 1.159 0 0 1-.345.855c-.22.23-.5.346-.84.346zm7.875 9.133a3.167 3.167 0 0 1-1.662-.444c-.482-.307-.817-.658-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283c.186-.438.548-.812 1.086-1.119a3.486 3.486 0 0 1 1.778-.477c.746 0 1.393.17 1.942.51a3.235 3.235 0 0 1 1.283 1.4c.297.592.444 1.282.444 2.072 0 .8-.175 1.498-.526 2.09a3.52 3.52 0 0 1-1.382 1.366 3.785 3.785 0 0 1-1.876.477zm-.296-1.481c.713 0 1.26-.225 1.645-.675.384-.46.577-1.053.577-1.778 0-.734-.193-1.327-.577-1.776-.373-.46-.921-.692-1.645-.692a2.115 2.115 0 0 0-1.58.659c-.428.428-.642.992-.642 1.694v.115c0 .473.098.895.296 1.267a2.385 2.385 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481c.176-.505.46-.91.856-1.217a2.14 2.14 0 0 1 1.349-.46c.351 0 .593.032.724.098l-.247 1.794c-.099-.066-.313-.099-.642-.099-.516 0-.988.164-1.416.494-.417.329-.626.855-.626 1.58v3.883h-1.777V9.242zm9.534 7.718c-.9 0-1.651-.175-2.255-.526-.603-.362-1.047-.84-1.332-1.432a4.567 4.567 0 0 1-.428-1.975c0-.8.164-1.502.493-2.106a3.462 3.462 0 0 1 1.4-1.382c.592-.33 1.262-.494 2.007-.494 1.163 0 2.024.324 2.584.97.57.637.856 1.537.856 2.7 0 .296-.017.603-.05.92h-5.43c.12.67.356 1.153.708 1.45.362.296.86.443 1.497.443.526 0 .96-.044 1.3-.131a4.123 4.123 0 0 0 .938-.362l.542 1.267c-.274.175-.647.329-1.119.46-.472.132-1.042.197-1.711.197zm1.596-4.558c.01-.68-.137-1.158-.444-1.432-.307-.285-.746-.428-1.316-.428-1.152 0-1.815.62-1.991 1.86h3.752z' fill='%23e1e3e9'/%3E%3Cg fill-rule='evenodd' stroke-width='1.036'%3E%3Cpath d='m8.166 16.146-.002.002a1.54 1.54 0 0 1-2.009 0l-.002-.002-.043-.034-.002-.002-.199-.162H4.377a.657.657 0 0 0-.659.659v1.84a.657.657 0 0 0 .659.659h5.565a.657.657 0 0 0 .659-.659v-1.84a.657.657 0 0 0-.659-.659H8.411l-.202.164zm-1.121-.905a.29.29 0 0 0 .113.023.286.286 0 0 0 .189-.07l.077-.063c.634-.508 4.672-3.743 4.672-7.575 0-2.55-2.215-4.625-4.938-4.625S2.221 5.006 2.221 7.556c0 3.225 2.86 6.027 4.144 7.137h.004l.04.038.484.4.077.063a.628.628 0 0 0 .074.047zm-2.52-.548a16.898 16.898 0 0 1-1.183-1.315C2.187 11.942.967 9.897.967 7.555c0-3.319 2.855-5.88 6.192-5.88 3.338 0 6.193 2.561 6.193 5.881 0 2.34-1.22 4.387-2.376 5.822a16.898 16.898 0 0 1-1.182 1.315h.15a1.912 1.912 0 0 1 1.914 1.914v1.84a1.912 1.912 0 0 1-1.914 1.914H4.377a1.912 1.912 0 0 1-1.914-1.914v-1.84a1.912 1.912 0 0 1 1.914-1.914zm3.82-6.935c0 .692-.55 1.222-1.187 1.222s-1.185-.529-1.185-1.222.548-1.222 1.185-1.222c.638 0 1.186.529 1.186 1.222zm-1.186 2.477c1.348 0 2.442-1.11 2.442-2.478S8.507 5.28 7.159 5.28 4.72 6.39 4.72 7.758s1.092 2.477 2.44 2.477zm2.048 7.71H5.114v-.838h4.093z' fill='%23000' fill-opacity='.4'/%3E%3Cpath d='M2.222 7.555c0-2.55 2.214-4.625 4.937-4.625 2.723 0 4.938 2.075 4.938 4.625 0 3.832-4.038 7.068-4.672 7.575l-.077.063a.286.286 0 0 1-.189.07.286.286 0 0 1-.188-.07l-.077-.063c-.634-.507-4.672-3.743-4.672-7.575zm4.937 2.68c1.348 0 2.442-1.11 2.442-2.478S8.507 5.28 7.159 5.28 4.72 6.39 4.72 7.758s1.092 2.477 2.44 2.477z' fill='%23e1e3e9'/%3E%3Cpath d='M4.377 15.948a.657.657 0 0 0-.659.659v1.84a.657.657 0 0 0 .659.659h5.565a.657.657 0 0 0 .659-.659v-1.84a.657.657 0 0 0-.659-.659zm4.83 1.16H5.114v.838h4.093z' fill='%23fff'/%3E%3C/g%3E%3C/svg%3E\")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib,.maplibregl-ctrl.maplibregl-ctrl-attrib{background-color:hsla(0,0%,100%,.5);margin:0;padding:0 5px}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact,.maplibregl-ctrl-attrib.maplibregl-compact{background-color:#fff;border-radius:12px;box-sizing:content-box;margin:10px;min-height:20px;padding:2px 24px 2px 0;position:relative}.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.maplibregl-ctrl-attrib.maplibregl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact-show,.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact-show{border-radius:12px;padding:2px 8px 2px 28px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner,.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button,.maplibregl-ctrl-attrib-button{background-color:hsla(0,0%,100%,.5);background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E\");border:0;border-radius:12px;box-sizing:border-box;cursor:pointer;display:none;height:24px;outline:none;position:absolute;right:0;top:0;width:24px}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button{appearance:none;list-style:none}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button::-webkit-details-marker{display:none}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button,.maplibregl-ctrl-bottom-left .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-top-left .maplibregl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-inner{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button,.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-button{background-color:rgb(0 0 0/5%)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after,.maplibregl-ctrl-bottom-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after,.maplibregl-ctrl-top-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{right:0;top:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after,.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{left:0;top:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after,.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after,.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E\")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after,.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl-attrib a,.maplibregl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover,.maplibregl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-attrib-empty,.maplibregl-attrib-empty{display:none}.mapboxgl-ctrl-scale,.maplibregl-ctrl-scale{background-color:hsla(0,0%,100%,.75);border:2px solid #333;border-top:#333;box-sizing:border-box;color:#333;font-size:10px;padding:0 5px}.mapboxgl-popup,.maplibregl-popup{display:flex;left:0;pointer-events:none;position:absolute;top:0;will-change:transform}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right,.maplibregl-popup-anchor-top,.maplibregl-popup-anchor-top-left,.maplibregl-popup-anchor-top-right{flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right,.maplibregl-popup-anchor-bottom,.maplibregl-popup-anchor-bottom-left,.maplibregl-popup-anchor-bottom-right{flex-direction:column-reverse}.mapboxgl-popup-anchor-left,.maplibregl-popup-anchor-left{flex-direction:row}.mapboxgl-popup-anchor-right,.maplibregl-popup-anchor-right{flex-direction:row-reverse}.mapboxgl-popup-tip,.maplibregl-popup-tip{border:10px solid transparent;height:0;width:0;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip,.maplibregl-popup-anchor-top .maplibregl-popup-tip{align-self:center;border-bottom-color:#fff;border-top:none}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip,.maplibregl-popup-anchor-top-left .maplibregl-popup-tip{align-self:flex-start;border-bottom-color:#fff;border-left:none;border-top:none}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip,.maplibregl-popup-anchor-top-right .maplibregl-popup-tip{align-self:flex-end;border-bottom-color:#fff;border-right:none;border-top:none}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip,.maplibregl-popup-anchor-bottom .maplibregl-popup-tip{align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip,.maplibregl-popup-anchor-bottom-left .maplibregl-popup-tip{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip,.maplibregl-popup-anchor-bottom-right .maplibregl-popup-tip{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip,.maplibregl-popup-anchor-left .maplibregl-popup-tip{align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip,.maplibregl-popup-anchor-right .maplibregl-popup-tip{align-self:center;border-left-color:#fff;border-right:none}.mapboxgl-popup-close-button,.maplibregl-popup-close-button{background-color:transparent;border:0;border-radius:0 3px 0 0;cursor:pointer;position:absolute;right:0;top:0}.mapboxgl-popup-close-button:hover,.maplibregl-popup-close-button:hover{background-color:rgb(0 0 0/5%)}.mapboxgl-popup-content,.maplibregl-popup-content{background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:15px 10px;pointer-events:auto;position:relative}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content,.maplibregl-popup-anchor-top-left .maplibregl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content,.maplibregl-popup-anchor-top-right .maplibregl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content,.maplibregl-popup-anchor-bottom-left .maplibregl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content,.maplibregl-popup-anchor-bottom-right .maplibregl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer,.maplibregl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *,.maplibregl-popup-track-pointer *{pointer-events:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer,.maplibregl-map:hover .maplibregl-popup-track-pointer{display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer,.maplibregl-map:active .maplibregl-popup-track-pointer{display:none}.mapboxgl-marker,.maplibregl-marker{left:0;position:absolute;top:0;will-change:transform}.mapboxgl-user-location-dot,.maplibregl-user-location-dot{background-color:#1da1f2;border-radius:50%;height:15px;width:15px}.mapboxgl-user-location-dot:before,.maplibregl-user-location-dot:before{animation:maplibregl-user-location-dot-pulse 2s infinite;background-color:#1da1f2;border-radius:50%;content:\"\";height:15px;position:absolute;width:15px}.mapboxgl-user-location-dot:after,.maplibregl-user-location-dot:after{border:2px solid #fff;border-radius:50%;box-shadow:0 0 3px rgba(0,0,0,.35);box-sizing:border-box;content:\"\";height:19px;left:-2px;position:absolute;top:-2px;width:19px}@keyframes maplibregl-user-location-dot-pulse{0%{opacity:1;transform:scale(1)}70%{opacity:0;transform:scale(3)}to{opacity:0;transform:scale(1)}}.mapboxgl-user-location-dot-stale,.maplibregl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after,.maplibregl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle,.maplibregl-user-location-accuracy-circle{background-color:#1da1f233;border-radius:100%;height:1px;width:1px}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active,.maplibregl-crosshair,.maplibregl-crosshair .maplibregl-interactive,.maplibregl-crosshair .maplibregl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom,.maplibregl-boxzoom{background:#fff;border:2px dotted #202020;height:0;left:0;opacity:.5;position:absolute;top:0;width:0}.maplibregl-cooperative-gesture-screen{align-items:center;background:rgba(0,0,0,.4);bottom:0;color:#fff;display:flex;font-size:1.4em;justify-content:center;left:0;line-height:1.2;opacity:0;padding:1rem;pointer-events:none;position:absolute;right:0;top:0;transition:opacity 1s ease 1s}.maplibregl-cooperative-gesture-screen.maplibregl-show{opacity:1;transition:opacity .05s}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:none}@media (hover:none),(max-width:480px){.maplibregl-cooperative-gesture-screen .maplibregl-desktop-message{display:none}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:block}}"],sourceRoot:""}]);const s=a},23645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<e.length;s++){var l=[].concat(e[s]);r&&i[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},94015:e=>{"use strict";function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e.exports=function(e){var n,r,i=(r=4,function(e){if(Array.isArray(e))return e}(n=e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(n,r)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[1],a=i[3];if(!a)return o;if("function"==typeof btoa){var s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),c="/*# ".concat(l," */"),u=a.sources.map((function(e){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(e," */")}));return[o].concat(u).concat([c]).join("\n")}return[o].join("\n")}},61667:e=>{"use strict";e.exports=function(e,t){return t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},33258:e=>{var t={px:{px:1,cm:96/2.54,mm:96/25.4,in:96,pt:96/72,pc:16},cm:{px:2.54/96,cm:1,mm:.1,in:2.54,pt:2.54/72,pc:2.54/6},mm:{px:25.4/96,cm:10,mm:1,in:25.4,pt:25.4/72,pc:25.4/6},in:{px:1/96,cm:1/2.54,mm:1/25.4,in:1,pt:1/72,pc:1/6},pt:{px:.75,cm:72/2.54,mm:72/25.4,in:72,pt:1,pc:12},pc:{px:6/96,cm:6/2.54,mm:6/25.4,in:6,pt:6/72,pc:1},deg:{deg:1,grad:.9,rad:180/Math.PI,turn:360},grad:{deg:400/360,grad:1,rad:200/Math.PI,turn:400},rad:{deg:Math.PI/180,grad:Math.PI/200,rad:1,turn:2*Math.PI},turn:{deg:1/360,grad:1/400,rad:.5/Math.PI,turn:1},s:{s:1,ms:.001},ms:{s:1e3,ms:1},Hz:{Hz:1,kHz:1e3},kHz:{Hz:.001,kHz:1},dpi:{dpi:1,dpcm:1/2.54,dppx:1/96},dpcm:{dpi:2.54,dpcm:1,dppx:2.54/96},dppx:{dpi:96,dpcm:96/2.54,dppx:1}};e.exports=function(e,n,r,i){if(!t.hasOwnProperty(r))throw new Error("Cannot convert to "+r);if(!t[r].hasOwnProperty(n))throw new Error("Cannot convert from "+n+" to "+r);var o=t[r][n]*e;return!1!==i?(i=Math.pow(10,parseInt(i)||5),Math.round(o*i)/i):o}},86239:(e,t,n)=>{"use strict";var r=n(65081);function i(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}e.exports=function(e){var t=new i;t.pre=e.pre,t.body=e.body,t.post=e.post;var n=e.args.slice(0);t.argTypes=n;for(var o=0;o<n.length;++o){var a=n[o];if("array"===a||"object"==typeof a&&a.blockIndices){if(t.argTypes[o]="array",t.arrayArgs.push(o),t.arrayBlockIndices.push(a.blockIndices?a.blockIndices:0),t.shimArgs.push("array"+o),o<t.pre.args.length&&t.pre.args[o].count>0)throw new Error("cwise: pre() block may not reference array args");if(o<t.post.args.length&&t.post.args[o].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===a)t.scalarArgs.push(o),t.shimArgs.push("scalar"+o);else if("index"===a){if(t.indexArgs.push(o),o<t.pre.args.length&&t.pre.args[o].count>0)throw new Error("cwise: pre() block may not reference array index");if(o<t.body.args.length&&t.body.args[o].lvalue)throw new Error("cwise: body() block may not write to array index");if(o<t.post.args.length&&t.post.args[o].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===a){if(t.shapeArgs.push(o),o<t.pre.args.length&&t.pre.args[o].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(o<t.body.args.length&&t.body.args[o].lvalue)throw new Error("cwise: body() block may not write to array shape");if(o<t.post.args.length&&t.post.args[o].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof a||!a.offset)throw new Error("cwise: Unknown argument type "+n[o]);t.argTypes[o]="offset",t.offsetArgs.push({array:a.array,offset:a.offset}),t.offsetArgIndex.push(o)}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>n.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>n.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>n.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,r(t)}},1984:(e,t,n)=>{"use strict";var r=n(38706);function i(e,t,n){var r,i,o=e.length,a=t.arrayArgs.length,s=t.indexArgs.length>0,l=[],c=[],u=0,h=0;for(r=0;r<o;++r)c.push(["i",r,"=0"].join(""));for(i=0;i<a;++i)for(r=0;r<o;++r)h=u,u=e[r],0===r?c.push(["d",i,"s",r,"=t",i,"p",u].join("")):c.push(["d",i,"s",r,"=(t",i,"p",u,"-s",h,"*t",i,"p",h,")"].join(""));for(c.length>0&&l.push("var "+c.join(",")),r=o-1;r>=0;--r)u=e[r],l.push(["for(i",r,"=0;i",r,"<s",u,";++i",r,"){"].join(""));for(l.push(n),r=0;r<o;++r){for(h=u,u=e[r],i=0;i<a;++i)l.push(["p",i,"+=d",i,"s",r].join(""));s&&(r>0&&l.push(["index[",h,"]-=s",h].join("")),l.push(["++index[",u,"]"].join(""))),l.push("}")}return l.join("\n")}function o(e,t,n){for(var r=e.body,i=[],o=[],a=0;a<e.args.length;++a){var s=e.args[a];if(!(s.count<=0)){var l=new RegExp(s.name,"g"),c="",u=t.arrayArgs.indexOf(a);switch(t.argTypes[a]){case"offset":var h=t.offsetArgIndex.indexOf(a);u=t.offsetArgs[h].array,c="+q"+h;case"array":c="p"+u+c;var f="l"+a,p="a"+u;if(0===t.arrayBlockIndices[u])1===s.count?"generic"===n[u]?s.lvalue?(i.push(["var ",f,"=",p,".get(",c,")"].join("")),r=r.replace(l,f),o.push([p,".set(",c,",",f,")"].join(""))):r=r.replace(l,[p,".get(",c,")"].join("")):r=r.replace(l,[p,"[",c,"]"].join("")):"generic"===n[u]?(i.push(["var ",f,"=",p,".get(",c,")"].join("")),r=r.replace(l,f),s.lvalue&&o.push([p,".set(",c,",",f,")"].join(""))):(i.push(["var ",f,"=",p,"[",c,"]"].join("")),r=r.replace(l,f),s.lvalue&&o.push([p,"[",c,"]=",f].join("")));else{for(var d=[s.name],m=[c],g=0;g<Math.abs(t.arrayBlockIndices[u]);g++)d.push("\\s*\\[([^\\]]+)\\]"),m.push("$"+(g+1)+"*t"+u+"b"+g);if(l=new RegExp(d.join(""),"g"),c=m.join("+"),"generic"===n[u])throw new Error("cwise: Generic arrays not supported in combination with blocks!");r=r.replace(l,[p,"[",c,"]"].join(""))}break;case"scalar":r=r.replace(l,"Y"+t.scalarArgs.indexOf(a));break;case"index":r=r.replace(l,"index");break;case"shape":r=r.replace(l,"shape")}}}return[i.join("\n"),r,o.join("\n")].join("\n").trim()}function a(e){for(var t=new Array(e.length),n=!0,r=0;r<e.length;++r){var i=e[r],o=i.match(/\d+/);o=o?o[0]:"",0===i.charAt(0)?t[r]="u"+i.charAt(1)+o:t[r]=i.charAt(0)+o,r>0&&(n=n&&t[r]===t[r-1])}return n?t[0]:t.join("")}e.exports=function(e,t){for(var n=t[1].length-Math.abs(e.arrayBlockIndices[0])|0,s=new Array(e.arrayArgs.length),l=new Array(e.arrayArgs.length),c=0;c<e.arrayArgs.length;++c)l[c]=t[2*c],s[c]=t[2*c+1];var u=[],h=[],f=[],p=[],d=[];for(c=0;c<e.arrayArgs.length;++c){e.arrayBlockIndices[c]<0?(f.push(0),p.push(n),u.push(n),h.push(n+e.arrayBlockIndices[c])):(f.push(e.arrayBlockIndices[c]),p.push(e.arrayBlockIndices[c]+n),u.push(0),h.push(e.arrayBlockIndices[c]));for(var m=[],g=0;g<s[c].length;g++)f[c]<=s[c][g]&&s[c][g]<p[c]&&m.push(s[c][g]-f[c]);d.push(m)}var y=["SS"],v=["'use strict'"],b=[];for(g=0;g<n;++g)b.push(["s",g,"=SS[",g,"]"].join(""));for(c=0;c<e.arrayArgs.length;++c){for(y.push("a"+c),y.push("t"+c),y.push("p"+c),g=0;g<n;++g)b.push(["t",c,"p",g,"=t",c,"[",f[c]+g,"]"].join(""));for(g=0;g<Math.abs(e.arrayBlockIndices[c]);++g)b.push(["t",c,"b",g,"=t",c,"[",u[c]+g,"]"].join(""))}for(c=0;c<e.scalarArgs.length;++c)y.push("Y"+c);if(e.shapeArgs.length>0&&b.push("shape=SS.slice(0)"),e.indexArgs.length>0){var _=new Array(n);for(c=0;c<n;++c)_[c]="0";b.push(["index=[",_.join(","),"]"].join(""))}for(c=0;c<e.offsetArgs.length;++c){var x=e.offsetArgs[c],A=[];for(g=0;g<x.offset.length;++g)0!==x.offset[g]&&(1===x.offset[g]?A.push(["t",x.array,"p",g].join("")):A.push([x.offset[g],"*t",x.array,"p",g].join("")));0===A.length?b.push("q"+c+"=0"):b.push(["q",c,"=",A.join("+")].join(""))}var w=r([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));for((b=b.concat(w)).length>0&&v.push("var "+b.join(",")),c=0;c<e.arrayArgs.length;++c)v.push("p"+c+"|=0");e.pre.body.length>3&&v.push(o(e.pre,e,l));var C=o(e.body,e,l),E=function(e){for(var t=0,n=e[0].length;t<n;){for(var r=1;r<e.length;++r)if(e[r][t]!==e[0][t])return t;++t}return t}(d);E<n?v.push(function(e,t,n,r){for(var o=t.length,a=n.arrayArgs.length,s=n.blockSize,l=n.indexArgs.length>0,c=[],u=0;u<a;++u)c.push(["var offset",u,"=p",u].join(""));for(u=e;u<o;++u)c.push(["for(var j"+u+"=SS[",t[u],"]|0;j",u,">0;){"].join("")),c.push(["if(j",u,"<",s,"){"].join("")),c.push(["s",t[u],"=j",u].join("")),c.push(["j",u,"=0"].join("")),c.push(["}else{s",t[u],"=",s].join("")),c.push(["j",u,"-=",s,"}"].join("")),l&&c.push(["index[",t[u],"]=j",u].join(""));for(u=0;u<a;++u){for(var h=["offset"+u],f=e;f<o;++f)h.push(["j",f,"*t",u,"p",t[f]].join(""));c.push(["p",u,"=(",h.join("+"),")"].join(""))}for(c.push(i(t,n,r)),u=e;u<o;++u)c.push("}");return c.join("\n")}(E,d[0],e,C)):v.push(i(d[0],e,C)),e.post.body.length>3&&v.push(o(e.post,e,l)),e.debug&&console.log("-----Generated cwise routine for ",t,":\n"+v.join("\n")+"\n----------");var S=[e.funcName||"unnamed","_cwise_loop_",s[0].join("s"),"m",E,a(l)].join("");return new Function(["function ",S,"(",y.join(","),"){",v.join("\n"),"} return ",S].join(""))()}},65081:(e,t,n)=>{"use strict";var r=n(1984);e.exports=function(e){var t=["'use strict'","var CACHED={}"],n=[],i=e.funcName+"_cwise_thunk";t.push(["return function ",i,"(",e.shimArgs.join(","),"){"].join(""));for(var o=[],a=[],s=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")],l=[],c=[],u=0;u<e.arrayArgs.length;++u){var h=e.arrayArgs[u];n.push(["t",h,"=array",h,".dtype,","r",h,"=array",h,".order"].join("")),o.push("t"+h),o.push("r"+h),a.push("t"+h),a.push("r"+h+".join()"),s.push("array"+h+".data"),s.push("array"+h+".stride"),s.push("array"+h+".offset|0"),u>0&&(l.push("array"+e.arrayArgs[0]+".shape.length===array"+h+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[u]))),c.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+h+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[u])+"]"))}for(e.arrayArgs.length>1&&(t.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),t.push("if (!("+c.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}")),u=0;u<e.scalarArgs.length;++u)s.push("scalar"+e.scalarArgs[u]);return n.push(["type=[",a.join(","),"].join()"].join("")),n.push("proc=CACHED[type]"),t.push("var "+n.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",o.join(","),"])}","return proc(",s.join(","),")}"].join("")),e.debug&&console.log("-----Generated thunk:\n"+t.join("\n")+"\n----------"),new Function("compile",t.join("\n"))(r.bind(void 0,e))}},11227:(e,t,n)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(i=r))})),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(82447)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},82447:(e,t,n)=>{e.exports=function(e){function t(e){let n,i,o,a=null;function s(...e){if(!s.enabled)return;const r=s,i=Number(new Date),o=i-(n||i);r.diff=o,r.prev=n,r.curr=i,n=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,i)=>{if("%%"===n)return"%";a++;const o=t.formatters[i];if("function"==typeof o){const t=e[a];n=o.call(r,t),e.splice(a,1),a--}return n})),t.formatArgs.call(r,e),(r.log||t.log).apply(r,e)}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=r,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{a=e}}),"function"==typeof t.init&&t.init(s),s}function r(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(i),...t.skips.map(i).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(57824),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},29887:function(e,t,n){var r;!function(i){"use strict";var o,a=1e9,s={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},l=!0,c="[DecimalError] ",u=c+"Invalid argument: ",h=c+"Exponent out of range: ",f=Math.floor,p=Math.pow,d=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,m=1e7,g=f(1286742750677284.5),y={};function v(e,t){var n,r,i,o,a,s,c,u,h=e.constructor,f=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),l?B(t,f):t;if(c=e.d,u=t.d,a=e.e,i=t.e,c=c.slice(),o=a-i){for(o<0?(r=c,o=-o,s=u.length):(r=u,i=a,s=c.length),o>(s=(a=Math.ceil(f/7))>s?a+1:s+1)&&(o=s,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for((s=c.length)-(o=u.length)<0&&(o=s,r=u,u=c,c=r),n=0;o;)n=(c[--o]=c[o]+u[o]+n)/m|0,c[o]%=m;for(n&&(c.unshift(n),++i),s=c.length;0==c[--s];)c.pop();return t.d=c,t.e=i,l?B(t,f):t}function b(e,t,n){if(e!==~~e||e<t||e>n)throw Error(u+e)}function _(e){var t,n,r,i=e.length-1,o="",a=e[0];if(i>0){for(o+=a,t=1;t<i;t++)(n=7-(r=e[t]+"").length)&&(o+=E(n)),o+=r;(n=7-(r=(a=e[t])+"").length)&&(o+=E(n))}else if(0===a)return"0";for(;a%10==0;)a/=10;return o+a}y.absoluteValue=y.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},y.comparedTo=y.cmp=function(e){var t,n,r,i,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(t=0,n=(r=o.d.length)<(i=e.d.length)?r:i;t<n;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1},y.decimalPlaces=y.dp=function(){var e=this,t=e.d.length-1,n=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)n--;return n<0?0:n},y.dividedBy=y.div=function(e){return x(this,new this.constructor(e))},y.dividedToIntegerBy=y.idiv=function(e){var t=this.constructor;return B(x(this,new t(e),0,1),t.precision)},y.equals=y.eq=function(e){return!this.cmp(e)},y.exponent=function(){return w(this)},y.greaterThan=y.gt=function(e){return this.cmp(e)>0},y.greaterThanOrEqualTo=y.gte=function(e){return this.cmp(e)>=0},y.isInteger=y.isint=function(){return this.e>this.d.length-2},y.isNegative=y.isneg=function(){return this.s<0},y.isPositive=y.ispos=function(){return this.s>0},y.isZero=function(){return 0===this.s},y.lessThan=y.lt=function(e){return this.cmp(e)<0},y.lessThanOrEqualTo=y.lte=function(e){return this.cmp(e)<1},y.logarithm=y.log=function(e){var t,n=this,r=n.constructor,i=r.precision,a=i+5;if(void 0===e)e=new r(10);else if((e=new r(e)).s<1||e.eq(o))throw Error(c+"NaN");if(n.s<1)throw Error(c+(n.s?"NaN":"-Infinity"));return n.eq(o)?new r(0):(l=!1,t=x(S(n,a),S(e,a),a),l=!0,B(t,i))},y.minus=y.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?k(t,e):v(t,(e.s=-e.s,e))},y.modulo=y.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(!(e=new r(e)).s)throw Error(c+"NaN");return n.s?(l=!1,t=x(n,e,0,1).times(e),l=!0,n.minus(t)):B(new r(n),i)},y.naturalExponential=y.exp=function(){return A(this)},y.naturalLogarithm=y.ln=function(){return S(this)},y.negated=y.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},y.plus=y.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?v(t,e):k(t,(e.s=-e.s,e))},y.precision=y.sd=function(e){var t,n,r,i=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(u+e);if(t=w(i)+1,n=7*(r=i.d.length-1)+1,r=i.d[r]){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n},y.squareRoot=y.sqrt=function(){var e,t,n,r,i,o,a,s=this,u=s.constructor;if(s.s<1){if(!s.s)return new u(0);throw Error(c+"NaN")}for(e=w(s),l=!1,0==(i=Math.sqrt(+s))||i==1/0?(((t=_(s.d)).length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=f((e+1)/2)-(e<0||e%2),r=new u(t=i==1/0?"5e"+e:(t=i.toExponential()).slice(0,t.indexOf("e")+1)+e)):r=new u(i.toString()),i=a=(n=u.precision)+3;;)if(r=(o=r).plus(x(s,o,a+2)).times(.5),_(o.d).slice(0,a)===(t=_(r.d)).slice(0,a)){if(t=t.slice(a-3,a+1),i==a&&"4999"==t){if(B(o,n+1,0),o.times(o).eq(s)){r=o;break}}else if("9999"!=t)break;a+=4}return l=!0,B(r,n)},y.times=y.mul=function(e){var t,n,r,i,o,a,s,c,u,h=this,f=h.constructor,p=h.d,d=(e=new f(e)).d;if(!h.s||!e.s)return new f(0);for(e.s*=h.s,n=h.e+e.e,(c=p.length)<(u=d.length)&&(o=p,p=d,d=o,a=c,c=u,u=a),o=[],r=a=c+u;r--;)o.push(0);for(r=u;--r>=0;){for(t=0,i=c+r;i>r;)s=o[i]+d[r]*p[i-r-1]+t,o[i--]=s%m|0,t=s/m|0;o[i]=(o[i]+t)%m|0}for(;!o[--a];)o.pop();return t?++n:o.shift(),e.d=o,e.e=n,l?B(e,f.precision):e},y.toDecimalPlaces=y.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(b(e,0,a),void 0===t?t=r.rounding:b(t,0,8),B(n,e+w(n)+1,t))},y.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=M(r,!0):(b(e,0,a),void 0===t?t=i.rounding:b(t,0,8),n=M(r=B(new i(r),e+1,t),!0,e+1)),n},y.toFixed=function(e,t){var n,r,i=this,o=i.constructor;return void 0===e?M(i):(b(e,0,a),void 0===t?t=o.rounding:b(t,0,8),n=M((r=B(new o(i),e+w(i)+1,t)).abs(),!1,e+w(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)},y.toInteger=y.toint=function(){var e=this,t=e.constructor;return B(new t(e),w(e)+1,t.rounding)},y.toNumber=function(){return+this},y.toPower=y.pow=function(e){var t,n,r,i,a,s,u=this,h=u.constructor,p=+(e=new h(e));if(!e.s)return new h(o);if(!(u=new h(u)).s){if(e.s<1)throw Error(c+"Infinity");return u}if(u.eq(o))return u;if(r=h.precision,e.eq(o))return B(u,r);if(s=(t=e.e)>=(n=e.d.length-1),a=u.s,s){if((n=p<0?-p:p)<=9007199254740991){for(i=new h(o),t=Math.ceil(r/7+4),l=!1;n%2&&P((i=i.times(u)).d,t),0!==(n=f(n/2));)P((u=u.times(u)).d,t);return l=!0,e.s<0?new h(o).div(i):B(i,r)}}else if(a<0)throw Error(c+"NaN");return a=a<0&&1&e.d[Math.max(t,n)]?-1:1,u.s=1,l=!1,i=e.times(S(u,r+12)),l=!0,(i=A(i)).s=a,i},y.toPrecision=function(e,t){var n,r,i=this,o=i.constructor;return void 0===e?r=M(i,(n=w(i))<=o.toExpNeg||n>=o.toExpPos):(b(e,1,a),void 0===t?t=o.rounding:b(t,0,8),r=M(i=B(new o(i),e,t),e<=(n=w(i))||n<=o.toExpNeg,e)),r},y.toSignificantDigits=y.tosd=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(b(e,1,a),void 0===t?t=n.rounding:b(t,0,8)),B(new n(this),e,t)},y.toString=y.valueOf=y.val=y.toJSON=function(){var e=this,t=w(e),n=e.constructor;return M(e,t<=n.toExpNeg||t>=n.toExpPos)};var x=function(){function e(e,t){var n,r=0,i=e.length;for(e=e.slice();i--;)n=e[i]*t+r,e[i]=n%m|0,r=n/m|0;return r&&e.unshift(r),e}function t(e,t,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function n(e,t,n){for(var r=0;n--;)e[n]-=r,r=e[n]<t[n]?1:0,e[n]=r*m+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,i,o,a){var s,l,u,h,f,p,d,g,y,v,b,_,x,A,C,E,S,T,k=r.constructor,M=r.s==i.s?1:-1,P=r.d,I=i.d;if(!r.s)return new k(r);if(!i.s)throw Error(c+"Division by zero");for(l=r.e-i.e,S=I.length,C=P.length,g=(d=new k(M)).d=[],u=0;I[u]==(P[u]||0);)++u;if(I[u]>(P[u]||0)&&--l,(_=null==o?o=k.precision:a?o+(w(r)-w(i))+1:o)<0)return new k(0);if(_=_/7+2|0,u=0,1==S)for(h=0,I=I[0],_++;(u<C||h)&&_--;u++)x=h*m+(P[u]||0),g[u]=x/I|0,h=x%I|0;else{for((h=m/(I[0]+1)|0)>1&&(I=e(I,h),P=e(P,h),S=I.length,C=P.length),A=S,v=(y=P.slice(0,S)).length;v<S;)y[v++]=0;(T=I.slice()).unshift(0),E=I[0],I[1]>=m/2&&++E;do{h=0,(s=t(I,y,S,v))<0?(b=y[0],S!=v&&(b=b*m+(y[1]||0)),(h=b/E|0)>1?(h>=m&&(h=m-1),1==(s=t(f=e(I,h),y,p=f.length,v=y.length))&&(h--,n(f,S<p?T:I,p))):(0==h&&(s=h=1),f=I.slice()),(p=f.length)<v&&f.unshift(0),n(y,f,v),-1==s&&(s=t(I,y,S,v=y.length))<1&&(h++,n(y,S<v?T:I,v)),v=y.length):0===s&&(h++,y=[0]),g[u++]=h,s&&y[0]?y[v++]=P[A]||0:(y=[P[A]],v=1)}while((A++<C||void 0!==y[0])&&_--)}return g[0]||g.shift(),d.e=l,B(d,a?o+w(d)+1:o)}}();function A(e,t){var n,r,i,a,s,c=0,u=0,f=e.constructor,d=f.precision;if(w(e)>16)throw Error(h+w(e));if(!e.s)return new f(o);for(null==t?(l=!1,s=d):s=t,a=new f(.03125);e.abs().gte(.1);)e=e.times(a),u+=5;for(s+=Math.log(p(2,u))/Math.LN10*2+5|0,n=r=i=new f(o),f.precision=s;;){if(r=B(r.times(e),s),n=n.times(++c),_((a=i.plus(x(r,n,s))).d).slice(0,s)===_(i.d).slice(0,s)){for(;u--;)i=B(i.times(i),s);return f.precision=d,null==t?(l=!0,B(i,d)):i}i=a}}function w(e){for(var t=7*e.e,n=e.d[0];n>=10;n/=10)t++;return t}function C(e,t,n){if(t>e.LN10.sd())throw l=!0,n&&(e.precision=n),Error(c+"LN10 precision limit exceeded");return B(new e(e.LN10),t)}function E(e){for(var t="";e--;)t+="0";return t}function S(e,t){var n,r,i,a,s,u,h,f,p,d=1,m=e,g=m.d,y=m.constructor,v=y.precision;if(m.s<1)throw Error(c+(m.s?"NaN":"-Infinity"));if(m.eq(o))return new y(0);if(null==t?(l=!1,f=v):f=t,m.eq(10))return null==t&&(l=!0),C(y,f);if(f+=10,y.precision=f,r=(n=_(g)).charAt(0),a=w(m),!(Math.abs(a)<15e14))return h=C(y,f+2,v).times(a+""),m=S(new y(r+"."+n.slice(1)),f-10).plus(h),y.precision=v,null==t?(l=!0,B(m,v)):m;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=_((m=m.times(e)).d)).charAt(0),d++;for(a=w(m),r>1?(m=new y("0."+n),a++):m=new y(r+"."+n.slice(1)),u=s=m=x(m.minus(o),m.plus(o),f),p=B(m.times(m),f),i=3;;){if(s=B(s.times(p),f),_((h=u.plus(x(s,new y(i),f))).d).slice(0,f)===_(u.d).slice(0,f))return u=u.times(2),0!==a&&(u=u.plus(C(y,f+2,v).times(a+""))),u=x(u,new y(d),f),y.precision=v,null==t?(l=!0,B(u,v)):u;u=h,i+=2}}function T(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);)++r;for(i=t.length;48===t.charCodeAt(i-1);)--i;if(t=t.slice(r,i)){if(i-=r,n=n-r-1,e.e=f(n/7),e.d=[],r=(n+1)%7,n<0&&(r+=7),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=7;r<i;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),l&&(e.e>g||e.e<-g))throw Error(h+n)}else e.s=0,e.e=0,e.d=[0];return e}function B(e,t,n){var r,i,o,a,s,c,u,d,y=e.d;for(a=1,o=y[0];o>=10;o/=10)a++;if((r=t-a)<0)r+=7,i=t,u=y[d=0];else{if((d=Math.ceil((r+1)/7))>=(o=y.length))return e;for(u=o=y[d],a=1;o>=10;o/=10)a++;i=(r%=7)-7+a}if(void 0!==n&&(s=u/(o=p(10,a-i-1))%10|0,c=t<0||void 0!==y[d+1]||u%o,c=n<4?(s||c)&&(0==n||n==(e.s<0?3:2)):s>5||5==s&&(4==n||c||6==n&&(r>0?i>0?u/p(10,a-i):0:y[d-1])%10&1||n==(e.s<0?8:7))),t<1||!y[0])return c?(o=w(e),y.length=1,t=t-o-1,y[0]=p(10,(7-t%7)%7),e.e=f(-t/7)||0):(y.length=1,y[0]=e.e=e.s=0),e;if(0==r?(y.length=d,o=1,d--):(y.length=d+1,o=p(10,7-r),y[d]=i>0?(u/p(10,a-i)%p(10,i)|0)*o:0),c)for(;;){if(0==d){(y[0]+=o)==m&&(y[0]=1,++e.e);break}if(y[d]+=o,y[d]!=m)break;y[d--]=0,o=1}for(r=y.length;0===y[--r];)y.pop();if(l&&(e.e>g||e.e<-g))throw Error(h+w(e));return e}function k(e,t){var n,r,i,o,a,s,c,u,h,f,p=e.constructor,d=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),l?B(t,d):t;if(c=e.d,f=t.d,r=t.e,u=e.e,c=c.slice(),a=u-r){for((h=a<0)?(n=c,a=-a,s=f.length):(n=f,r=u,s=c.length),a>(i=Math.max(Math.ceil(d/7),s)+2)&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for((h=(i=c.length)<(s=f.length))&&(s=i),i=0;i<s;i++)if(c[i]!=f[i]){h=c[i]<f[i];break}a=0}for(h&&(n=c,c=f,f=n,t.s=-t.s),s=c.length,i=f.length-s;i>0;--i)c[s++]=0;for(i=f.length;i>a;){if(c[--i]<f[i]){for(o=i;o&&0===c[--o];)c[o]=m-1;--c[o],c[i]+=m}c[i]-=f[i]}for(;0===c[--s];)c.pop();for(;0===c[0];c.shift())--r;return c[0]?(t.d=c,t.e=r,l?B(t,d):t):new p(0)}function M(e,t,n){var r,i=w(e),o=_(e.d),a=o.length;return t?(n&&(r=n-a)>0?o=o.charAt(0)+"."+o.slice(1)+E(r):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+E(-i-1)+o,n&&(r=n-a)>0&&(o+=E(r))):i>=a?(o+=E(i+1-a),n&&(r=n-i-1)>0&&(o=o+"."+E(r))):((r=i+1)<a&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(o+="."),o+=E(r))),e.s<0?"-"+o:o}function P(e,t){if(e.length>t)return e.length=t,!0}function I(e){if(!e||"object"!=typeof e)throw Error(c+"Object expected");var t,n,r,i=["precision",1,a,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if(void 0!==(r=e[n=i[t]])){if(!(f(r)===r&&r>=i[t+1]&&r<=i[t+2]))throw Error(u+n+": "+r);this[n]=r}if(void 0!==(r=e[n="LN10"])){if(r!=Math.LN10)throw Error(u+n+": "+r);this[n]=new this(r)}return this}(s=function e(t){var n,r,i;function o(e){var t=this;if(!(t instanceof o))return new o(e);if(t.constructor=o,e instanceof o)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"==typeof e){if(0*e!=0)throw Error(u+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):T(t,e.toString())}if("string"!=typeof e)throw Error(u+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!d.test(e))throw Error(u+e);T(t,e)}if(o.prototype=y,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.clone=e,o.config=o.set=I,void 0===t&&(t={}),t)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],n=0;n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return o.config(t),o}(s)).default=s.Decimal=s,o=new s(1),void 0===(r=function(){return s}.call(t,n,t,e))||(e.exports=r)}()},98141:(e,t,n)=>{"use strict";var r=n(95318);t.__esModule=!0,t.default=function(e,t){e.classList?e.classList.add(t):(0,i.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))};var i=r(n(90404));e.exports=t.default},90404:(e,t)=>{"use strict";t.__esModule=!0,t.default=function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")},e.exports=t.default},10602:e=>{"use strict";function t(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}e.exports=function(e,n){e.classList?e.classList.remove(n):"string"==typeof e.className?e.className=t(e.className,n):e.setAttribute("class",t(e.className&&e.className.baseVal||"",n))}},20702:(e,t,n)=>{"use strict";var r=n(95318);t.__esModule=!0,t.default=t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var i,o,a,s,l,c,u,h,f,p,d,m=r(n(50139)),g="transform";if(t.transform=g,t.animationEnd=a,t.transitionEnd=o,t.transitionDelay=u,t.transitionTiming=c,t.transitionDuration=l,t.transitionProperty=s,t.animationDelay=d,t.animationTiming=p,t.animationDuration=f,t.animationName=h,m.default){var y=function(){for(var e,t,n=document.createElement("div").style,r={O:function(e){return"o"+e.toLowerCase()},Moz:function(e){return e.toLowerCase()},Webkit:function(e){return"webkit"+e},ms:function(e){return"MS"+e}},i=Object.keys(r),o="",a=0;a<i.length;a++){var s=i[a];if(s+"TransitionProperty"in n){o="-"+s.toLowerCase(),e=r[s]("TransitionEnd"),t=r[s]("AnimationEnd");break}}return!e&&"transitionProperty"in n&&(e="transitionend"),!t&&"animationName"in n&&(t="animationend"),n=null,{animationEnd:t,transitionEnd:e,prefix:o}}();i=y.prefix,t.transitionEnd=o=y.transitionEnd,t.animationEnd=a=y.animationEnd,t.transform=g=i+"-"+g,t.transitionProperty=s=i+"-transition-property",t.transitionDuration=l=i+"-transition-duration",t.transitionDelay=u=i+"-transition-delay",t.transitionTiming=c=i+"-transition-timing-function",t.animationName=h=i+"-animation-name",t.animationDuration=f=i+"-animation-duration",t.animationTiming=p=i+"-animation-delay",t.animationDelay=d=i+"-animation-timing-function"}var v={transform:g,end:o,property:s,timing:c,delay:u,duration:l};t.default=v},50139:(e,t)=>{"use strict";t.__esModule=!0,t.default=void 0;var n=!("undefined"==typeof window||!window.document||!window.document.createElement);t.default=n,e.exports=t.default},45177:(e,t,n)=>{"use strict";var r=n(95318);t.__esModule=!0,t.default=void 0;var i,o=r(n(50139)),a="clearTimeout",s=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-c)),r=setTimeout(e,n);return c=t,r},l=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};o.default&&["","webkit","moz","o","ms"].some((function(e){var t=l(e,"request");if(t in window)return a=l(e,"cancel"),s=function(e){return window[t](e)}}));var c=(new Date).getTime();(i=function(e){return s(e)}).cancel=function(e){window[a]&&"function"==typeof window[a]&&window[a](e)};var u=i;t.default=u,e.exports=t.default},96841:e=>{"use strict";function t(e,n,r){var i=0|e[r];if(i<=0)return[];var o,a=new Array(i);if(r===e.length-1)for(o=0;o<i;++o)a[o]=n;else for(o=0;o<i;++o)a[o]=t(e,n,r+1);return a}e.exports=function(e,n){switch(void 0===n&&(n=0),typeof e){case"number":if(e>0)return function(e,t){var n,r;for(n=new Array(e),r=0;r<e;++r)n[r]=t;return n}(0|e,n);break;case"object":if("number"==typeof e.length)return t(e,n,0)}return[]}},83549:e=>{e.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},45983:(e,t,n)=>{const r=n(92192);e.exports=(e,t)=>new r(e,t),e.exports.Socket=r,e.exports.protocol=r.protocol,e.exports.Transport=n(86496),e.exports.transports=n(63352),e.exports.parser=n(69743)},92192:(e,t,n)=>{const r=n(63352),i=n(98767),o=n(11227)("engine.io-client:socket"),a=n(69743),s=n(64187),l=n(81830);class c extends i{constructor(e,t={}){super(),e&&"object"==typeof e&&(t=e,e=null),e?(e=s(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=s(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,jsonp:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{}},t),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=l.decode(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&addEventListener("beforeunload",(()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())}),!1),this.open()}createTransport(e){o('creating transport "%s"',e);const t=function(e){const t={};for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.opts.query);t.EIO=a.protocol,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return o("options: %j",n),new r[e](n)}open(){let e;if(this.opts.rememberUpgrade&&c.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){const e=this;return void setTimeout((function(){e.emit("error","No transports available")}),0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return o("error while creating transport: %s",e),this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}setTransport(e){o("setting transport %s",e.name);const t=this;this.transport&&(o("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",(function(){t.onDrain()})).on("packet",(function(e){t.onPacket(e)})).on("error",(function(e){t.onError(e)})).on("close",(function(){t.onClose("transport close")}))}probe(e){o('probing transport "%s"',e);let t=this.createTransport(e,{probe:1}),n=!1;const r=this;function i(){if(r.onlyBinaryUpgrades){const e=!this.supportsBinary&&r.transport.supportsBinary;n=n||e}n||(o('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",(function(i){if(!n)if("pong"===i.type&&"probe"===i.data){if(o('probe transport "%s" pong',e),r.upgrading=!0,r.emit("upgrading",t),!t)return;c.priorWebsocketSuccess="websocket"===t.name,o('pausing current transport "%s"',r.transport.name),r.transport.pause((function(){n||"closed"!==r.readyState&&(o("changing transport and sending upgrade packet"),f(),r.setTransport(t),t.send([{type:"upgrade"}]),r.emit("upgrade",t),t=null,r.upgrading=!1,r.flush())}))}else{o('probe transport "%s" failed',e);const n=new Error("probe error");n.transport=t.name,r.emit("upgradeError",n)}})))}function a(){n||(n=!0,f(),t.close(),t=null)}function s(n){const i=new Error("probe error: "+n);i.transport=t.name,a(),o('probe transport "%s" failed because of error: %s',e,n),r.emit("upgradeError",i)}function l(){s("transport closed")}function u(){s("socket closed")}function h(e){t&&e.name!==t.name&&(o('"%s" works - aborting "%s"',e.name,t.name),a())}function f(){t.removeListener("open",i),t.removeListener("error",s),t.removeListener("close",l),r.removeListener("close",u),r.removeListener("upgrading",h)}c.priorWebsocketSuccess=!1,t.once("open",i),t.once("error",s),t.once("close",l),this.once("close",u),this.once("upgrading",h),t.open()}onOpen(){if(o("socket open"),this.readyState="open",c.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){o("starting upgrade probes");let e=0;const t=this.upgrades.length;for(;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(o('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emit("pong");break;case"error":const t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else o('packet received with socket readyState "%s"',this.readyState)}onHandshake(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=setTimeout((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout)}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()}flush(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(o("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))}write(e,t,n){return this.sendPacket("message",e,t,n),this}send(e,t,n){return this.sendPacket("message",e,t,n),this}sendPacket(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const i={type:e,data:t,options:n};this.emit("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}close(){const e=this;function t(){e.onClose("forced close"),o("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function r(){e.once("upgrade",n),e.once("upgradeError",n)}return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(function(){this.upgrading?r():t()})):this.upgrading?r():t()),this}onError(e){o("socket error %j",e),c.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)}onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){o('socket close with reason: "%s"',e);const n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),n.writeBuffer=[],n.prevBufferLen=0}}filterUpgrades(e){const t=[];let n=0;const r=e.length;for(;n<r;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}c.priorWebsocketSuccess=!1,c.protocol=a.protocol,e.exports=c},86496:(e,t,n)=>{const r=n(69743),i=n(98767),o=n(11227)("engine.io-client:transport");e.exports=class extends i{constructor(e){super(),this.opts=e,this.query=e.query,this.readyState="",this.socket=e.socket}onError(e,t){const n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this}open(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState?this.write(e):o("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,this.emit("open")}onData(e){const t=r.decodePacket(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){this.emit("packet",e)}onClose(){this.readyState="closed",this.emit("close")}}},63352:(e,t,n)=>{const r=n(72777),i=n(13416),o=n(99785),a=n(74442);t.polling=function(e){let t,n=!1,a=!1;const s=!1!==e.jsonp;if("undefined"!=typeof location){const t="https:"===location.protocol;let r=location.port;r||(r=t?443:80),n=e.hostname!==location.hostname||r!==e.port,a=e.secure!==t}if(e.xdomain=n,e.xscheme=a,t=new r(e),"open"in t&&!e.forceJSONP)return new i(e);if(!s)throw new Error("JSONP disabled");return new o(e)},t.websocket=a},99785:(e,t,n)=>{const r=n(9015),i=n(83549),o=/\n/g,a=/\\n/g;let s;e.exports=class extends r{constructor(e){super(e),this.query=this.query||{},s||(s=i.___eio=i.___eio||[]),this.index=s.length;const t=this;s.push((function(e){t.onData(e)})),this.query.j=this.index}get supportsBinary(){return!1}doClose(){this.script&&(this.script.onerror=()=>{},this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),super.doClose()}doPoll(){const e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};const n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){const e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)}doWrite(e,t){const n=this;let r;if(!this.form){const e=document.createElement("form"),t=document.createElement("textarea"),n=this.iframeId="eio_iframe_"+this.index;e.className="socketio",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.target=n,e.method="POST",e.setAttribute("accept-charset","utf-8"),t.name="d",e.appendChild(t),document.body.appendChild(e),this.form=e,this.area=t}function i(){s(),t()}function s(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(e){n.onError("jsonp polling iframe removal error",e)}try{const e='<iframe src="javascript:0" name="'+n.iframeId+'">';r=document.createElement(e)}catch(e){r=document.createElement("iframe"),r.name=n.iframeId,r.src="javascript:0"}r.id=n.iframeId,n.form.appendChild(r),n.iframe=r}this.form.action=this.uri(),s(),e=e.replace(a,"\\\n"),this.area.value=e.replace(o,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&i()}:this.iframe.onload=i}}},13416:(e,t,n)=>{const r=n(72777),i=n(9015),o=n(98767),{pick:a}=n(16839),s=n(83549),l=n(11227)("engine.io-client:polling-xhr");function c(){}const u=null!=new r({xdomain:!1}).responseType;class h extends o{constructor(e,t){super(),this.opts=t,this.method=t.method||"GET",this.uri=e,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.create()}create(){const e=a(this.opts,"agent","enablesXDR","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const t=this.xhr=new r(e),n=this;try{l("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0);for(let e in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(e)&&t.setRequestHeader(e,this.opts.extraHeaders[e])}}catch(e){}if("POST"===this.method)try{t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(t.timeout=this.opts.requestTimeout),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){4===t.readyState&&(200===t.status||1223===t.status?n.onLoad():setTimeout((function(){n.onError("number"==typeof t.status?t.status:0)}),0))},l("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout((function(){n.onError(e)}),0)}"undefined"!=typeof document&&(this.index=h.requestsCount++,h.requests[this.index]=this)}onSuccess(){this.emit("success"),this.cleanup()}onData(e){this.emit("data",e),this.onSuccess()}onError(e){this.emit("error",e),this.cleanup(!0)}cleanup(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=c:this.xhr.onreadystatechange=c,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete h.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;null!==e&&this.onData(e)}hasXDR(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR}abort(){this.cleanup()}}function f(){for(let e in h.requests)h.requests.hasOwnProperty(e)&&h.requests[e].abort()}h.requestsCount=0,h.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",f):"function"==typeof addEventListener&&addEventListener("onpagehide"in s?"pagehide":"unload",f,!1)),e.exports=class extends i{constructor(e){if(super(e),"undefined"!=typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?443:80),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==t}const t=e&&e.forceBase64;this.supportsBinary=u&&!t}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new h(this.uri(),e)}doWrite(e,t){const n=this.request({method:"POST",data:e}),r=this;n.on("success",t),n.on("error",(function(e){r.onError("xhr post error",e)}))}doPoll(){l("xhr poll");const e=this.request(),t=this;e.on("data",(function(e){t.onData(e)})),e.on("error",(function(e){t.onError("xhr poll error",e)})),this.pollXhr=e}},e.exports.Request=h},9015:(e,t,n)=>{const r=n(86496),i=n(81830),o=n(69743),a=n(82281),s=n(11227)("engine.io-client:polling");e.exports=class extends r{get name(){return"polling"}doOpen(){this.poll()}pause(e){const t=this;function n(){s("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){let e=0;this.polling&&(s("we are currently polling - waiting to pause"),e++,this.once("pollComplete",(function(){s("pre-pause polling complete"),--e||n()}))),this.writable||(s("we are currently writing - waiting to pause"),e++,this.once("drain",(function(){s("pre-pause writing complete"),--e||n()})))}else n()}poll(){s("polling"),this.polling=!0,this.doPoll(),this.emit("poll")}onData(e){const t=this;s("polling got data %s",e),o.decodePayload(e,this.socket.binaryType).forEach((function(e,n,r){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():s('ignoring poll - transport state "%s"',this.readyState))}doClose(){const e=this;function t(){s("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(s("transport open - closing"),t()):(s("transport not open - deferring close"),this.once("open",t))}write(e){this.writable=!1,o.encodePayload(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emit("drain")}))}))}uri(){let e=this.query||{};const t=this.opts.secure?"https":"http";let n="";return!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=a()),this.supportsBinary||e.sid||(e.b64=1),e=i.encode(e),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),e.length&&(e="?"+e),t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+e}}},60866:(e,t,n)=>{const r=n(83549);e.exports={WebSocket:r.WebSocket||r.MozWebSocket,usingBrowserWebSocket:!0,defaultBinaryType:"arraybuffer"}},74442:(e,t,n)=>{const r=n(86496),i=n(69743),o=n(81830),a=n(82281),{pick:s}=n(16839),{WebSocket:l,usingBrowserWebSocket:c,defaultBinaryType:u}=n(60866),h=n(11227)("engine.io-client:websocket"),f="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class p extends r{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),t=this.opts.protocols,n=f?{}:s(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=c&&!f?t?new l(e,t):new l(e):new l(e,t,n)}catch(e){return this.emit("error",e)}this.ws.binaryType=this.socket.binaryType||u,this.addEventListeners()}addEventListeners(){const e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}}write(e){const t=this;this.writable=!1;let n=e.length,r=0;const o=n;for(;r<o;r++)!function(e){i.encodePacket(e,t.supportsBinary,(function(r){const i={};!c&&(e.options&&(i.compress=e.options.compress),t.opts.perMessageDeflate)&&("string"==typeof r?Buffer.byteLength(r):r.length)<t.opts.perMessageDeflate.threshold&&(i.compress=!1);try{c?t.ws.send(r):t.ws.send(r,i)}catch(e){h("websocket closed before onclose event")}--n||(t.emit("flush"),setTimeout((function(){t.writable=!0,t.emit("drain")}),0))}))}(e[r])}onClose(){r.prototype.onClose.call(this)}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const t=this.opts.secure?"wss":"ws";let n="";return this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=a()),this.supportsBinary||(e.b64=1),e=o.encode(e),e.length&&(e="?"+e),t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+e}check(){return!(!l||"__initialize"in l&&this.name===p.prototype.name)}}e.exports=p},16839:e=>{e.exports.pick=(e,...t)=>t.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{})},72777:(e,t,n)=>{const r=n(38058),i=n(83549);e.exports=function(e){const t=e.xdomain,n=e.xscheme,o=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||r))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&o)return new XDomainRequest}catch(e){}if(!t)try{return new(i[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}},31712:e=>{const t=Object.create(null);t.open="0",t.close="1",t.ping="2",t.pong="3",t.message="4",t.upgrade="5",t.noop="6";const n=Object.create(null);Object.keys(t).forEach((e=>{n[t[e]]=e})),e.exports={PACKET_TYPES:t,PACKET_TYPES_REVERSE:n,ERROR_PACKET:{type:"error",data:"parser error"}}},44965:(e,t,n)=>{const{PACKET_TYPES_REVERSE:r,ERROR_PACKET:i}=n(31712);let o;"function"==typeof ArrayBuffer&&(o=n(33704));const a=(e,t)=>{if(o){const n=o.decode(e);return s(n,t)}return{base64:!0,data:e}},s=(e,t)=>"blob"===t&&e instanceof ArrayBuffer?new Blob([e]):e;e.exports=(e,t)=>{if("string"!=typeof e)return{type:"message",data:s(e,t)};const n=e.charAt(0);return"b"===n?{type:"message",data:a(e.substring(1),t)}:r[n]?e.length>1?{type:r[n],data:e.substring(1)}:{type:r[n]}:i}},22929:(e,t,n)=>{const{PACKET_TYPES:r}=n(31712),i="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),o="function"==typeof ArrayBuffer,a=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+e)},n.readAsDataURL(e)};e.exports=({type:e,data:t},n,s)=>{return i&&t instanceof Blob?n?s(t):a(t,s):o&&(t instanceof ArrayBuffer||(l=t,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(l):l&&l.buffer instanceof ArrayBuffer))?n?s(t):a(new Blob([t]),s):s(r[e]+(t||""));var l}},69743:(e,t,n)=>{const r=n(22929),i=n(44965),o=String.fromCharCode(30);e.exports={protocol:4,encodePacket:r,encodePayload:(e,t)=>{const n=e.length,i=new Array(n);let a=0;e.forEach(((e,s)=>{r(e,!1,(e=>{i[s]=e,++a===n&&t(i.join(o))}))}))},decodePacket:i,decodePayload:(e,t)=>{const n=e.split(o),r=[];for(let e=0;e<n.length;e++){const o=i(n[e],t);if(r.push(o),"error"===o.type)break}return r}}},26729:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||e,a),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var l,c,u=this._events[s],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,o),!0;case 6:return u.fn.call(u.context,t,r,i,o,a),!0}for(c=1,l=new Array(h-1);c<h;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var f,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),h){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,i);break;default:if(!l)for(f=1,l=new Array(h-1);f<h;f++)l[f-1]=arguments[f];u[c].fn.apply(u[c].context,l)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==t||i&&!s[l].once||r&&s[l].context!==r)&&c.push(s[l]);c.length?this._events[o]=1===c.length?c[0]:c:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},17187:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}m(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&m(e,"error",t,{once:!0})}(e,i)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function c(e,t,n,r){var i,o,a,c;if(s(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=l(e))>0&&a.length>i&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=a.length,c=u,console&&console.warn&&console.warn(c)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=u.bind(r);return i.listener=n,r.wrapFn=i,i}function f(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):d(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function d(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function m(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=o[e];if(void 0===l)return!1;if("function"==typeof l)r(l,this,t);else{var c=l.length,u=d(l,c);for(n=0;n<c;++n)r(u[n],this,t)}return!0},o.prototype.addListener=function(e,t){return c(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return c(this,e,t,!0)},o.prototype.once=function(e,t){return s(t),this.on(e,h(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,h(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,o,a;if(s(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return f(this,e,!0)},o.prototype.rawListeners=function(e){return f(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},58367:function(e,t){!function(e){"use strict";var t="function"==typeof WeakSet,n=Object.keys;function r(e,t){return e===t||e!=e&&t!=t}function i(e){return e.constructor===Object||null==e.constructor}function o(e){return!!e&&"function"==typeof e.then}function a(e){return!(!e||!e.$$typeof)}var s=t?function(){return new WeakSet}:function(){var e=[];return{add:function(t){e.push(t)},has:function(t){return-1!==e.indexOf(t)}}};function l(e){return function(t){var n=e||t;return function(e,t,r){void 0===r&&(r=s());var i=!!e&&"object"==typeof e,o=!!t&&"object"==typeof t;if(i||o){var a=i&&r.has(e),l=o&&r.has(t);if(a||l)return a&&l;i&&r.add(e),o&&r.add(t)}return n(e,t,r)}}}var c=Function.prototype.bind.call(Function.prototype.call,Object.prototype.hasOwnProperty);function u(e,t,r,i){var o=n(e),s=o.length;if(n(t).length!==s)return!1;if(s)for(var l=void 0;s-- >0;){if("_owner"===(l=o[s])){var u=a(e),h=a(t);if((u||h)&&u!==h)return!1}if(!c(t,l)||!r(e[l],t[l],i))return!1}return!0}var h="function"==typeof Map,f="function"==typeof Set;function p(e){var t="function"==typeof e?e(n):n;function n(e,n,a){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){if(i(e)&&i(n))return u(e,n,t,a);var s=Array.isArray(e),l=Array.isArray(n);return s||l?s===l&&function(e,t,n,r){var i=e.length;if(t.length!==i)return!1;for(;i-- >0;)if(!n(e[i],t[i],r))return!1;return!0}(e,n,t,a):(s=e instanceof Date,l=n instanceof Date,s||l?s===l&&r(e.getTime(),n.getTime()):(s=e instanceof RegExp,l=n instanceof RegExp,s||l?s===l&&function(e,t){return e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline&&e.unicode===t.unicode&&e.sticky===t.sticky&&e.lastIndex===t.lastIndex}(e,n):o(e)||o(n)?e===n:h&&(s=e instanceof Map,l=n instanceof Map,s||l)?s===l&&function(e,t,n,r){var i=e.size===t.size;if(i&&e.size){var o={};e.forEach((function(e,a){if(i){var s=!1,l=0;t.forEach((function(t,i){s||o[l]||(s=n(a,i,r)&&n(e,t,r))&&(o[l]=!0),l++})),i=s}}))}return i}(e,n,t,a):f&&(s=e instanceof Set,l=n instanceof Set,s||l)?s===l&&function(e,t,n,r){var i=e.size===t.size;if(i&&e.size){var o={};e.forEach((function(e){if(i){var a=!1,s=0;t.forEach((function(t){a||o[s]||(a=n(e,t,r))&&(o[s]=!0),s++})),i=a}}))}return i}(e,n,t,a):u(e,n,t,a)))}return e!=e&&n!=n}return n}var d=p(),m=p((function(){return r})),g=p(l()),y=p(l(r));e.circularDeepEqual=g,e.circularShallowEqual=y,e.createCustomEqual=p,e.deepEqual=d,e.sameValueZeroEqual=r,e.shallowEqual=m,Object.defineProperty(e,"__esModule",{value:!0})}(t)},19579:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n.p+"8b43027f47b20503057dfbbaa9401fef.eot"},17383:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n.p+"8b43027f47b20503057dfbbaa9401fef.eot"},71892:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n.p+"c1e38fd9e0e74ba58f7a2b77ef29fdd3.svg"},64384:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n.p+"1e59d2330b4c6deb84b340635ed36249.ttf"},1536:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n.p+"20fd1704ea223900efa9fd4e869efb08.woff2"},50786:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n.p+"f691f37e57f04c152e2315ab7dbad881.woff"},90218:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n.p+"50a7402731b12bcd9f1b4cc2a2d9cf6d.png"},93162:function(e,t,n){var r;void 0===(r=function(){"use strict";function t(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){s(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function i(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(e,n,a){var s=o.URL||o.webkitURL,l=document.createElement("a");n=n||e.name||"download",l.download=n,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?i(l):r(l.href)?t(e,n,a):i(l,l.target="_blank")):(l.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(l.href)}),4e4),setTimeout((function(){i(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,o){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,o),n);else if(r(e))t(e,n,o);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout((function(){i(a)}))}}:function(e,n,r,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,r);var s="application/octet-stream"===e.type,l=/constructor/i.test(o.HTMLElement)||o.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||s&&l||a)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},u.readAsDataURL(e)}else{var h=o.URL||o.webkitURL,f=h.createObjectURL(e);i?i.location=f:location.href=f,i=null,setTimeout((function(){h.revokeObjectURL(f)}),4e4)}});o.saveAs=s.saveAs=s,e.exports=s}.apply(t,[]))||(e.exports=r)},34444:e=>{function t(e){return e&&e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function n(e){return e}function r(e,r){const i=(r=r||{}).delimiter||".",o=r.maxDepth,a=r.transformKey||n,s={};return function e(n,l,c){c=c||1,Object.keys(n).forEach((function(u){const h=n[u],f=r.safe&&Array.isArray(h),p=Object.prototype.toString.call(h),d=t(h),m="[object Object]"===p||"[object Array]"===p,g=l?l+i+a(u):a(u);if(!f&&!d&&m&&Object.keys(h).length&&(!r.maxDepth||c<o))return e(h,g,c+1);s[g]=h}))}(e),s}e.exports=r,r.flatten=r,r.unflatten=function e(i,o){const a=(o=o||{}).delimiter||".",s=o.overwrite||!1,l=o.transformKey||n,c={};if(t(i)||"[object Object]"!==Object.prototype.toString.call(i))return i;function u(e){const t=Number(e);return isNaN(t)||-1!==e.indexOf(".")||o.object?e:t}return i=Object.keys(i).reduce((function(e,t){const n=Object.prototype.toString.call(i[t]);return"[object Object]"!==n&&"[object Array]"!==n||function(e){const t=Object.prototype.toString.call(e),n="[object Object]"===t;return!e||("[object Array]"===t?!e.length:n?!Object.keys(e).length:void 0)}(i[t])?(e[t]=i[t],e):function(e,t,n){return Object.keys(n).reduce((function(t,r){return t[e+a+r]=n[r],t}),t)}(t,e,r(i[t],o))}),{}),Object.keys(i).forEach((function(t){const n=t.split(a).map(l);let r=u(n.shift()),h=u(n[0]),f=c;for(;void 0!==h;){if("__proto__"===r)return;const e=Object.prototype.toString.call(f[r]),t="[object Object]"===e||"[object Array]"===e;if(!s&&!t&&void 0!==f[r])return;(s&&!t||!s&&null==f[r])&&(f[r]="number"!=typeof h||o.object?{}:[]),f=f[r],n.length>0&&(r=u(n.shift()),h=u(n[0]))}f[r]=e(i[t],o)})),c}},38058:e=>{try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},50080:e=>{"use strict";e.exports=function(e,t){if(t=t||100,6===(e=e.replace("#","")).length)var n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),i=parseInt(e.substring(4,6),16);else{var o=e.substring(0,1)+e.substring(0,1),a=e.substring(1,2)+e.substring(1,2),s=e.substring(2,3)+e.substring(2,3);n=parseInt(o,16),r=parseInt(a,16),i=parseInt(s,16)}return"rgba("+n+", "+r+", "+i+", "+t/100+")"}},8679:(e,t,n)=>{"use strict";var r=n(59864),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var c=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,d=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(d){var i=p(n);i&&i!==d&&e(t,i,r)}var a=u(n);h&&(a=a.concat(h(n)));for(var s=l(t),m=l(n),g=0;g<a.length;++g){var y=a[g];if(!(o[y]||r&&r[y]||m&&m[y]||s&&s[y])){var v=f(n,y);try{c(t,y,v)}catch(e){}}}}return t}},80645:(e,t)=>{t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,c=l>>1,u=-7,h=n?i-1:0,f=n?-1:1,p=e[t+h];for(h+=f,o=p&(1<<-u)-1,p>>=-u,u+=s;u>0;o=256*o+e[t+h],h+=f,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;u>0;a=256*a+e[t+h],h+=f,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,l,c=8*o-i-1,u=(1<<c)-1,h=u>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+h>=1?f/l:f*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(t*l-1)*Math.pow(2,i),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+p]=255&a,p+=d,a/=256,c-=8);e[n+p-d]|=128*m}},46400:(e,t,n)=>{"use strict";var r=n(93519);function i(e){var t=(r.nextPow2(e+1)>>>1)-1,n=e-t;return r.nextPow2(n)-1>=t?t:(t>>>1)+n}function o(e,t){if(e<=0)return 0;var n=i(e);return t>n?o(e-n-1,t-n-1):t===n?r.log2(e):o(n,t)}t.root=i,t.begin=function(e){return 0},t.end=function(e){return e-1},t.height=o,t.prev=function(e,t){return Math.max(t-1,0)},t.next=function(e,t){return Math.min(t+1,e-1)},t.parent=function e(t,n){if(t<=0)return-1;var r,o=i(t);return n>o?(r=e(t-o-1,n-o-1))<0?o:r+o+1:n===o?-1:(r=e(o,n))<0?o:r},t.left=function e(t,n){if(t<=0)return 0;var r=i(t);return n>r?e(t-r-1,n-r-1)+r+1:n===r?i(n):e(r,n)},t.right=function e(t,n){if(t<=0)return 0;var r=i(t);return n>r?e(t-r-1,n-r-1)+r+1:n===r?i(t-r-1)+r+1:e(r,n)},t.leaf=function(e,t){return 0===o(e,t)},t.lo=function(e,t){e|=0,t|=0;for(var n=0;e>1;){var r=i(e);if(t>r)n+=r+1,e-=r+1,t-=r+1;else{if(t===r)break;e=r}}return n},t.hi=function(e,t){e|=0,t|=0;for(var n=0;e>1;){var r=i(e);if(t>r)n+=r+1,e-=r+1,t-=r+1;else{if(t===r){n+=e-1;break}e=r}}return n}},93519:(e,t)=>{"use strict";function n(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}t.INT_BITS=32,t.INT_MAX=2147483647,t.INT_MIN=-1<<31,t.sign=function(e){return(e>0)-(e<0)},t.abs=function(e){var t=e>>31;return(e^t)-t},t.min=function(e,t){return t^(e^t)&-(e<t)},t.max=function(e,t){return e^(e^t)&-(e<t)},t.isPow2=function(e){return!(e&e-1||!e)},t.log2=function(e){var t,n;return t=(e>65535)<<4,t|=n=((e>>>=t)>255)<<3,t|=n=((e>>>=n)>15)<<2,(t|=n=((e>>>=n)>3)<<1)|(e>>>=n)>>1},t.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},t.popCount=function(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},t.countTrailingZeros=n,t.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,1+(e|=e>>>16)},t.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},t.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var r=new Array(256);!function(e){for(var t=0;t<256;++t){var n=t,r=t,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;e[t]=r<<i&255}}(r),t.reverse=function(e){return r[255&e]<<24|r[e>>>8&255]<<16|r[e>>>16&255]<<8|r[e>>>24&255]},t.interleave2=function(e,t){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))<<1},t.deinterleave2=function(e,t){return(e=65535&((e=16711935&((e=252645135&((e=858993459&((e=e>>>t&1431655765)|e>>>1))|e>>>2))|e>>>4))|e>>>16))<<16>>16},t.interleave3=function(e,t,n){return e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2),(e|=(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},t.deinterleave3=function(e,t){return(e=1023&((e=4278190335&((e=251719695&((e=3272356035&((e=e>>>t&1227133513)|e>>>2))|e>>>4))|e>>>8))|e>>>16))<<22>>22},t.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>n(e)+1}},16907:e=>{"use strict";e.exports=function(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=n;return t}},48738:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},80344:e=>{"use strict";e.exports=function(e){var t,n,r,i,o=e.length-1;return 0===e.length?function(){return 0}:1===e.length?function(){return e[0][1]}:(e=e.sort((function(e,t){return e[0]-t[0]})),t=e[0],r=function(t){var n=e[0],r=e[1];return n[1]+(t-n[0])*(r[1]-n[1])/(r[0]-n[0])},n=function(e,t,n){return t[1]+(e-t[0])*(n[1]-t[1])/(n[0]-t[0])},i=function(t){var n=e[o-1],r=e[o];return r[1]+(t-r[0])*(r[1]-n[1])/(r[0]-n[0])},function(a){var s;if(a<=t[0])return r(a);for(s=0;s<o;s+=1)if(a>e[s][0]&&a<=e[s+1][0])return n(a,e[s],e[s+1]);return i(a)})}},18552:(e,t,n)=>{var r=n(10852)(n(55639),"DataView");e.exports=r},1989:(e,t,n)=>{var r=n(51789),i=n(80401),o=n(57667),a=n(21327),s=n(81866);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},38407:(e,t,n)=>{var r=n(27040),i=n(14125),o=n(82117),a=n(67518),s=n(54705);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},57071:(e,t,n)=>{var r=n(10852)(n(55639),"Map");e.exports=r},83369:(e,t,n)=>{var r=n(24785),i=n(11285),o=n(96e3),a=n(49916),s=n(95265);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},53818:(e,t,n)=>{var r=n(10852)(n(55639),"Promise");e.exports=r},58525:(e,t,n)=>{var r=n(10852)(n(55639),"Set");e.exports=r},88668:(e,t,n)=>{var r=n(83369),i=n(90619),o=n(72385);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,e.exports=a},46384:(e,t,n)=>{var r=n(38407),i=n(37465),o=n(63779),a=n(67599),s=n(44758),l=n(34309);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=i,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=s,c.prototype.set=l,e.exports=c},62705:(e,t,n)=>{var r=n(55639).Symbol;e.exports=r},11149:(e,t,n)=>{var r=n(55639).Uint8Array;e.exports=r},70577:(e,t,n)=>{var r=n(10852)(n(55639),"WeakMap");e.exports=r},96874:e=>{e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},66193:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}},34963:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}},47443:(e,t,n)=>{var r=n(42118);e.exports=function(e,t){return!(null==e||!e.length)&&r(e,t,0)>-1}},1196:e=>{e.exports=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}},14636:(e,t,n)=>{var r=n(22545),i=n(35694),o=n(1469),a=n(44144),s=n(65776),l=n(36719),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),u=!n&&i(e),h=!n&&!u&&a(e),f=!n&&!u&&!h&&l(e),p=n||u||h||f,d=p?r(e.length,String):[],m=d.length;for(var g in e)!t&&!c.call(e,g)||p&&("length"==g||h&&("offset"==g||"parent"==g)||f&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,m))||d.push(g);return d}},29932:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},62488:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},82908:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},44286:e=>{e.exports=function(e){return e.split("")}},18470:(e,t,n)=>{var r=n(77813);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},89465:(e,t,n)=>{var r=n(38777);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},89881:(e,t,n)=>{var r=n(47816),i=n(99291)(r);e.exports=i},93239:(e,t,n)=>{var r=n(89881);e.exports=function(e,t){var n=!0;return r(e,(function(e,r,i){return n=!!t(e,r,i)})),n}},56029:(e,t,n)=>{var r=n(33448);e.exports=function(e,t,n){for(var i=-1,o=e.length;++i<o;){var a=e[i],s=t(a);if(null!=s&&(void 0===l?s==s&&!r(s):n(s,l)))var l=s,c=a}return c}},41848:e=>{e.exports=function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}},21078:(e,t,n)=>{var r=n(62488),i=n(37285);e.exports=function e(t,n,o,a,s){var l=-1,c=t.length;for(o||(o=i),s||(s=[]);++l<c;){var u=t[l];n>0&&o(u)?n>1?e(u,n-1,o,a,s):r(s,u):a||(s[s.length]=u)}return s}},28483:(e,t,n)=>{var r=n(25063)();e.exports=r},47816:(e,t,n)=>{var r=n(28483),i=n(3674);e.exports=function(e,t){return e&&r(e,t,i)}},97786:(e,t,n)=>{var r=n(71811),i=n(40327);e.exports=function(e,t){for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[i(t[n++])];return n&&n==o?e:void 0}},68866:(e,t,n)=>{var r=n(62488),i=n(1469);e.exports=function(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}},44239:(e,t,n)=>{var r=n(62705),i=n(89607),o=n(2333),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):o(e)}},53325:e=>{e.exports=function(e,t){return e>t}},13:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},42118:(e,t,n)=>{var r=n(41848),i=n(62722),o=n(42351);e.exports=function(e,t,n){return t==t?o(e,t,n):r(e,i,n)}},9454:(e,t,n)=>{var r=n(44239),i=n(37005);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},90939:(e,t,n)=>{var r=n(2492),i=n(37005);e.exports=function e(t,n,o,a,s){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!=t&&n!=n:r(t,n,o,a,e,s))}},2492:(e,t,n)=>{var r=n(46384),i=n(67114),o=n(18351),a=n(16096),s=n(64160),l=n(1469),c=n(44144),u=n(36719),h="[object Arguments]",f="[object Array]",p="[object Object]",d=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,m,g,y){var v=l(e),b=l(t),_=v?f:s(e),x=b?f:s(t),A=(_=_==h?p:_)==p,w=(x=x==h?p:x)==p,C=_==x;if(C&&c(e)){if(!c(t))return!1;v=!0,A=!1}if(C&&!A)return y||(y=new r),v||u(e)?i(e,t,n,m,g,y):o(e,t,_,n,m,g,y);if(!(1&n)){var E=A&&d.call(e,"__wrapped__"),S=w&&d.call(t,"__wrapped__");if(E||S){var T=E?e.value():e,B=S?t.value():t;return y||(y=new r),g(T,B,n,m,y)}}return!!C&&(y||(y=new r),a(e,t,n,m,g,y))}},2958:(e,t,n)=>{var r=n(46384),i=n(90939);e.exports=function(e,t,n,o){var a=n.length,s=a,l=!o;if(null==e)return!s;for(e=Object(e);a--;){var c=n[a];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++a<s;){var u=(c=n[a])[0],h=e[u],f=c[1];if(l&&c[2]){if(void 0===h&&!(u in e))return!1}else{var p=new r;if(o)var d=o(h,f,u,e,t,p);if(!(void 0===d?i(f,h,3,o,p):d))return!1}}return!0}},62722:e=>{e.exports=function(e){return e!=e}},28458:(e,t,n)=>{var r=n(23560),i=n(15346),o=n(13218),a=n(80346),s=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,h=c.hasOwnProperty,f=RegExp("^"+u.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?f:s).test(a(e))}},38749:(e,t,n)=>{var r=n(44239),i=n(41780),o=n(37005),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!a[r(e)]}},67206:(e,t,n)=>{var r=n(91573),i=n(16432),o=n(6557),a=n(1469),s=n(39601);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?a(e)?i(e[0],e[1]):r(e):s(e)}},280:(e,t,n)=>{var r=n(25726),i=n(86916),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},70433:e=>{e.exports=function(e,t){return e<t}},69199:(e,t,n)=>{var r=n(89881),i=n(98612);e.exports=function(e,t){var n=-1,o=i(e)?Array(e.length):[];return r(e,(function(e,r,i){o[++n]=t(e,r,i)})),o}},91573:(e,t,n)=>{var r=n(2958),i=n(1499),o=n(42634);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},16432:(e,t,n)=>{var r=n(90939),i=n(27361),o=n(79095),a=n(15403),s=n(89162),l=n(42634),c=n(40327);e.exports=function(e,t){return a(e)&&s(t)?l(c(e),t):function(n){var a=i(n,e);return void 0===a&&a===t?o(n,e):r(t,a,3)}}},82689:(e,t,n)=>{var r=n(29932),i=n(97786),o=n(67206),a=n(69199),s=n(71131),l=n(7518),c=n(85022),u=n(6557),h=n(1469);e.exports=function(e,t,n){t=t.length?r(t,(function(e){return h(e)?function(t){return i(t,1===e.length?e[0]:e)}:e})):[u];var f=-1;t=r(t,l(o));var p=a(e,(function(e,n,i){return{criteria:r(t,(function(t){return t(e)})),index:++f,value:e}}));return s(p,(function(e,t){return c(e,t,n)}))}},40371:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},79152:(e,t,n)=>{var r=n(97786);e.exports=function(e){return function(t){return r(t,e)}}},40098:e=>{var t=Math.ceil,n=Math.max;e.exports=function(e,r,i,o){for(var a=-1,s=n(t((r-e)/(i||1)),0),l=Array(s);s--;)l[o?s:++a]=e,e+=i;return l}},5976:(e,t,n)=>{var r=n(6557),i=n(45357),o=n(30061);e.exports=function(e,t){return o(i(e,t,r),e+"")}},56560:(e,t,n)=>{var r=n(75703),i=n(38777),o=n(6557),a=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;e.exports=a},14259:e=>{e.exports=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}},5076:(e,t,n)=>{var r=n(89881);e.exports=function(e,t){var n;return r(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}},71131:e=>{e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},22545:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},80531:(e,t,n)=>{var r=n(62705),i=n(29932),o=n(1469),a=n(33448),s=r?r.prototype:void 0,l=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(a(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},27561:(e,t,n)=>{var r=n(67990),i=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},7518:e=>{e.exports=function(e){return function(t){return e(t)}}},45652:(e,t,n)=>{var r=n(88668),i=n(47443),o=n(1196),a=n(74757),s=n(23593),l=n(21814);e.exports=function(e,t,n){var c=-1,u=i,h=e.length,f=!0,p=[],d=p;if(n)f=!1,u=o;else if(h>=200){var m=t?null:s(e);if(m)return l(m);f=!1,u=a,d=new r}else d=t?[]:p;e:for(;++c<h;){var g=e[c],y=t?t(g):g;if(g=n||0!==g?g:0,f&&y==y){for(var v=d.length;v--;)if(d[v]===y)continue e;t&&d.push(y),p.push(g)}else u(d,y,n)||(d!==p&&d.push(y),p.push(g))}return p}},74757:e=>{e.exports=function(e,t){return e.has(t)}},71811:(e,t,n)=>{var r=n(1469),i=n(15403),o=n(55514),a=n(79833);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:o(a(e))}},40180:(e,t,n)=>{var r=n(14259);e.exports=function(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:r(e,t,n)}},26393:(e,t,n)=>{var r=n(33448);e.exports=function(e,t){if(e!==t){var n=void 0!==e,i=null===e,o=e==e,a=r(e),s=void 0!==t,l=null===t,c=t==t,u=r(t);if(!l&&!u&&!a&&e>t||a&&s&&c&&!l&&!u||i&&s&&c||!n&&c||!o)return 1;if(!i&&!a&&!u&&e<t||u&&n&&o&&!i&&!a||l&&n&&o||!s&&o||!c)return-1}return 0}},85022:(e,t,n)=>{var r=n(26393);e.exports=function(e,t,n){for(var i=-1,o=e.criteria,a=t.criteria,s=o.length,l=n.length;++i<s;){var c=r(o[i],a[i]);if(c)return i>=l?c:c*("desc"==n[i]?-1:1)}return e.index-t.index}},14429:(e,t,n)=>{var r=n(55639)["__core-js_shared__"];e.exports=r},99291:(e,t,n)=>{var r=n(98612);e.exports=function(e,t){return function(n,i){if(null==n)return n;if(!r(n))return e(n,i);for(var o=n.length,a=t?o:-1,s=Object(n);(t?a--:++a<o)&&!1!==i(s[a],a,s););return n}}},25063:e=>{e.exports=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}}},98805:(e,t,n)=>{var r=n(40180),i=n(62689),o=n(83140),a=n(79833);e.exports=function(e){return function(t){t=a(t);var n=i(t)?o(t):void 0,s=n?n[0]:t.charAt(0),l=n?r(n,1).join(""):t.slice(1);return s[e]()+l}}},67740:(e,t,n)=>{var r=n(67206),i=n(98612),o=n(3674);e.exports=function(e){return function(t,n,a){var s=Object(t);if(!i(t)){var l=r(n,3);t=o(t),n=function(e){return l(s[e],e,s)}}var c=e(t,n,a);return c>-1?s[l?t[c]:c]:void 0}}},47445:(e,t,n)=>{var r=n(40098),i=n(16612),o=n(18601);e.exports=function(e){return function(t,n,a){return a&&"number"!=typeof a&&i(t,n,a)&&(n=a=void 0),t=o(t),void 0===n?(n=t,t=0):n=o(n),a=void 0===a?t<n?1:-1:o(a),r(t,n,a,e)}}},23593:(e,t,n)=>{var r=n(58525),i=n(50308),o=n(21814),a=r&&1/o(new r([,-0]))[1]==1/0?function(e){return new r(e)}:i;e.exports=a},38777:(e,t,n)=>{var r=n(10852),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},67114:(e,t,n)=>{var r=n(88668),i=n(82908),o=n(74757);e.exports=function(e,t,n,a,s,l){var c=1&n,u=e.length,h=t.length;if(u!=h&&!(c&&h>u))return!1;var f=l.get(e),p=l.get(t);if(f&&p)return f==t&&p==e;var d=-1,m=!0,g=2&n?new r:void 0;for(l.set(e,t),l.set(t,e);++d<u;){var y=e[d],v=t[d];if(a)var b=c?a(v,y,d,t,e,l):a(y,v,d,e,t,l);if(void 0!==b){if(b)continue;m=!1;break}if(g){if(!i(t,(function(e,t){if(!o(g,t)&&(y===e||s(y,e,n,a,l)))return g.push(t)}))){m=!1;break}}else if(y!==v&&!s(y,v,n,a,l)){m=!1;break}}return l.delete(e),l.delete(t),m}},18351:(e,t,n)=>{var r=n(62705),i=n(11149),o=n(77813),a=n(67114),s=n(68776),l=n(21814),c=r?r.prototype:void 0,u=c?c.valueOf:void 0;e.exports=function(e,t,n,r,c,h,f){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!h(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=s;case"[object Set]":var d=1&r;if(p||(p=l),e.size!=t.size&&!d)return!1;var m=f.get(e);if(m)return m==t;r|=2,f.set(e,t);var g=a(p(e),p(t),r,c,h,f);return f.delete(e),g;case"[object Symbol]":if(u)return u.call(e)==u.call(t)}return!1}},16096:(e,t,n)=>{var r=n(58234),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,o,a,s){var l=1&n,c=r(e),u=c.length;if(u!=r(t).length&&!l)return!1;for(var h=u;h--;){var f=c[h];if(!(l?f in t:i.call(t,f)))return!1}var p=s.get(e),d=s.get(t);if(p&&d)return p==t&&d==e;var m=!0;s.set(e,t),s.set(t,e);for(var g=l;++h<u;){var y=e[f=c[h]],v=t[f];if(o)var b=l?o(v,y,f,t,e,s):o(y,v,f,e,t,s);if(!(void 0===b?y===v||a(y,v,n,o,s):b)){m=!1;break}g||(g="constructor"==f)}if(m&&!g){var _=e.constructor,x=t.constructor;_==x||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof x&&x instanceof x||(m=!1)}return s.delete(e),s.delete(t),m}},31957:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},58234:(e,t,n)=>{var r=n(68866),i=n(99551),o=n(3674);e.exports=function(e){return r(e,o,i)}},45050:(e,t,n)=>{var r=n(37019);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},1499:(e,t,n)=>{var r=n(89162),i=n(3674);e.exports=function(e){for(var t=i(e),n=t.length;n--;){var o=t[n],a=e[o];t[n]=[o,a,r(a)]}return t}},10852:(e,t,n)=>{var r=n(28458),i=n(47801);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},85924:(e,t,n)=>{var r=n(5569)(Object.getPrototypeOf,Object);e.exports=r},89607:(e,t,n)=>{var r=n(62705),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},99551:(e,t,n)=>{var r=n(34963),i=n(70479),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),r(a(e),(function(t){return o.call(e,t)})))}:i;e.exports=s},64160:(e,t,n)=>{var r=n(18552),i=n(57071),o=n(53818),a=n(58525),s=n(70577),l=n(44239),c=n(80346),u="[object Map]",h="[object Promise]",f="[object Set]",p="[object WeakMap]",d="[object DataView]",m=c(r),g=c(i),y=c(o),v=c(a),b=c(s),_=l;(r&&_(new r(new ArrayBuffer(1)))!=d||i&&_(new i)!=u||o&&_(o.resolve())!=h||a&&_(new a)!=f||s&&_(new s)!=p)&&(_=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case m:return d;case g:return u;case y:return h;case v:return f;case b:return p}return t}),e.exports=_},47801:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},222:(e,t,n)=>{var r=n(71811),i=n(35694),o=n(1469),a=n(65776),s=n(41780),l=n(40327);e.exports=function(e,t,n){for(var c=-1,u=(t=r(t,e)).length,h=!1;++c<u;){var f=l(t[c]);if(!(h=null!=e&&n(e,f)))break;e=e[f]}return h||++c!=u?h:!!(u=null==e?0:e.length)&&s(u)&&a(f,u)&&(o(e)||i(e))}},62689:e=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},51789:(e,t,n)=>{var r=n(94536);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},80401:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},57667:(e,t,n)=>{var r=n(94536),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},21327:(e,t,n)=>{var r=n(94536),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},81866:(e,t,n)=>{var r=n(94536);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},37285:(e,t,n)=>{var r=n(62705),i=n(35694),o=n(1469),a=r?r.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||i(e)||!!(a&&e&&e[a])}},65776:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},16612:(e,t,n)=>{var r=n(77813),i=n(98612),o=n(65776),a=n(13218);e.exports=function(e,t,n){if(!a(n))return!1;var s=typeof t;return!!("number"==s?i(n)&&o(t,n.length):"string"==s&&t in n)&&r(n[t],e)}},15403:(e,t,n)=>{var r=n(1469),i=n(33448),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||a.test(e)||!o.test(e)||null!=t&&e in Object(t)}},37019:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},15346:(e,t,n)=>{var r,i=n(14429),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!o&&o in e}},25726:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},89162:(e,t,n)=>{var r=n(13218);e.exports=function(e){return e==e&&!r(e)}},27040:e=>{e.exports=function(){this.__data__=[],this.size=0}},14125:(e,t,n)=>{var r=n(18470),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():i.call(t,n,1),--this.size,0))}},82117:(e,t,n)=>{var r=n(18470);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},67518:(e,t,n)=>{var r=n(18470);e.exports=function(e){return r(this.__data__,e)>-1}},54705:(e,t,n)=>{var r=n(18470);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},24785:(e,t,n)=>{var r=n(1989),i=n(38407),o=n(57071);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},11285:(e,t,n)=>{var r=n(45050);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},96e3:(e,t,n)=>{var r=n(45050);e.exports=function(e){return r(this,e).get(e)}},49916:(e,t,n)=>{var r=n(45050);e.exports=function(e){return r(this,e).has(e)}},95265:(e,t,n)=>{var r=n(45050);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},68776:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},42634:e=>{e.exports=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}},24523:(e,t,n)=>{var r=n(88306);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},94536:(e,t,n)=>{var r=n(10852)(Object,"create");e.exports=r},86916:(e,t,n)=>{var r=n(5569)(Object.keys,Object);e.exports=r},31167:(e,t,n)=>{e=n.nmd(e);var r=n(31957),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i&&r.process,s=function(){try{return o&&o.require&&o.require("util").types||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=s},2333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5569:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},45357:(e,t,n)=>{var r=n(96874),i=Math.max;e.exports=function(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var o=arguments,a=-1,s=i(o.length-t,0),l=Array(s);++a<s;)l[a]=o[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=o[a];return c[t]=n(l),r(e,this,c)}}},55639:(e,t,n)=>{var r=n(31957),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},90619:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},72385:e=>{e.exports=function(e){return this.__data__.has(e)}},21814:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},30061:(e,t,n)=>{var r=n(56560),i=n(21275)(r);e.exports=i},21275:e=>{var t=Date.now;e.exports=function(e){var n=0,r=0;return function(){var i=t(),o=16-(i-r);if(r=i,o>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},37465:(e,t,n)=>{var r=n(38407);e.exports=function(){this.__data__=new r,this.size=0}},63779:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},67599:e=>{e.exports=function(e){return this.__data__.get(e)}},44758:e=>{e.exports=function(e){return this.__data__.has(e)}},34309:(e,t,n)=>{var r=n(38407),i=n(57071),o=n(83369);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!i||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(e,t),this.size=n.size,this}},42351:e=>{e.exports=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}},83140:(e,t,n)=>{var r=n(44286),i=n(62689),o=n(676);e.exports=function(e){return i(e)?o(e):r(e)}},55514:(e,t,n)=>{var r=n(24523),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(o,"$1"):n||e)})),t}));e.exports=a},40327:(e,t,n)=>{var r=n(33448);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},80346:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},67990:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},676:e=>{var t="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",n="\\ud83c[\\udffb-\\udfff]",r="[^\\ud800-\\udfff]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",o="[\\ud800-\\udbff][\\udc00-\\udfff]",a="(?:"+t+"|"+n+")?",s="[\\ufe0e\\ufe0f]?",l=s+a+"(?:\\u200d(?:"+[r,i,o].join("|")+")"+s+a+")*",c="(?:"+[r+t+"?",t,i,o,"[\\ud800-\\udfff]"].join("|")+")",u=RegExp(n+"(?="+n+")|"+c+l,"g");e.exports=function(e){return e.match(u)||[]}},75703:e=>{e.exports=function(e){return function(){return e}}},23279:(e,t,n)=>{var r=n(13218),i=n(7771),o=n(14841),a=Math.max,s=Math.min;e.exports=function(e,t,n){var l,c,u,h,f,p,d=0,m=!1,g=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var n=l,r=c;return l=c=void 0,d=t,h=e.apply(r,n)}function b(e){return d=e,f=setTimeout(x,t),m?v(e):h}function _(e){var n=e-p;return void 0===p||n>=t||n<0||g&&e-d>=u}function x(){var e=i();if(_(e))return A(e);f=setTimeout(x,function(e){var n=t-(e-p);return g?s(n,u-(e-d)):n}(e))}function A(e){return f=void 0,y&&l?v(e):(l=c=void 0,h)}function w(){var e=i(),n=_(e);if(l=arguments,c=this,p=e,n){if(void 0===f)return b(p);if(g)return clearTimeout(f),f=setTimeout(x,t),v(p)}return void 0===f&&(f=setTimeout(x,t)),h}return t=o(t)||0,r(n)&&(m=!!n.leading,u=(g="maxWait"in n)?a(o(n.maxWait)||0,t):u,y="trailing"in n?!!n.trailing:y),w.cancel=function(){void 0!==f&&clearTimeout(f),d=0,l=p=c=f=void 0},w.flush=function(){return void 0===f?h:A(i())},w}},77813:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},711:(e,t,n)=>{var r=n(66193),i=n(93239),o=n(67206),a=n(1469),s=n(16612);e.exports=function(e,t,n){var l=a(e)?r:i;return n&&s(e,t,n)&&(t=void 0),l(e,o(t,3))}},13311:(e,t,n)=>{var r=n(67740)(n(30998));e.exports=r},30998:(e,t,n)=>{var r=n(41848),i=n(67206),o=n(40554),a=Math.max;e.exports=function(e,t,n){var s=null==e?0:e.length;if(!s)return-1;var l=null==n?0:o(n);return l<0&&(l=a(s+l,0)),r(e,i(t,3),l)}},94654:(e,t,n)=>{var r=n(21078),i=n(35161);e.exports=function(e,t){return r(i(e,t),1)}},27361:(e,t,n)=>{var r=n(97786);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},79095:(e,t,n)=>{var r=n(13),i=n(222);e.exports=function(e,t){return null!=e&&i(e,t,r)}},6557:e=>{e.exports=function(e){return e}},35694:(e,t,n)=>{var r=n(9454),i=n(37005),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},1469:e=>{var t=Array.isArray;e.exports=t},98612:(e,t,n)=>{var r=n(23560),i=n(41780);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},51584:(e,t,n)=>{var r=n(44239),i=n(37005);e.exports=function(e){return!0===e||!1===e||i(e)&&"[object Boolean]"==r(e)}},44144:(e,t,n)=>{e=n.nmd(e);var r=n(55639),i=n(95062),o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,s=a&&a.exports===o?r.Buffer:void 0,l=(s?s.isBuffer:void 0)||i;e.exports=l},18446:(e,t,n)=>{var r=n(90939);e.exports=function(e,t){return r(e,t)}},23560:(e,t,n)=>{var r=n(44239),i=n(13218);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},41780:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},7654:(e,t,n)=>{var r=n(81763);e.exports=function(e){return r(e)&&e!=+e}},14293:e=>{e.exports=function(e){return null==e}},81763:(e,t,n)=>{var r=n(44239),i=n(37005);e.exports=function(e){return"number"==typeof e||i(e)&&"[object Number]"==r(e)}},13218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},37005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},68630:(e,t,n)=>{var r=n(44239),i=n(85924),o=n(37005),a=Function.prototype,s=Object.prototype,l=a.toString,c=s.hasOwnProperty,u=l.call(Object);e.exports=function(e){if(!o(e)||"[object Object]"!=r(e))return!1;var t=i(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==u}},47037:(e,t,n)=>{var r=n(44239),i=n(1469),o=n(37005);e.exports=function(e){return"string"==typeof e||!i(e)&&o(e)&&"[object String]"==r(e)}},33448:(e,t,n)=>{var r=n(44239),i=n(37005);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},36719:(e,t,n)=>{var r=n(38749),i=n(7518),o=n(31167),a=o&&o.isTypedArray,s=a?i(a):r;e.exports=s},3674:(e,t,n)=>{var r=n(14636),i=n(280),o=n(98612);e.exports=function(e){return o(e)?r(e):i(e)}},10928:e=>{e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},35161:(e,t,n)=>{var r=n(29932),i=n(67206),o=n(69199),a=n(1469);e.exports=function(e,t){return(a(e)?r:o)(e,i(t,3))}},66604:(e,t,n)=>{var r=n(89465),i=n(47816),o=n(67206);e.exports=function(e,t){var n={};return t=o(t,3),i(e,(function(e,i,o){r(n,i,t(e,i,o))})),n}},6162:(e,t,n)=>{var r=n(56029),i=n(53325),o=n(6557);e.exports=function(e){return e&&e.length?r(e,o,i):void 0}},84753:(e,t,n)=>{var r=n(56029),i=n(53325),o=n(67206);e.exports=function(e,t){return e&&e.length?r(e,o(t,2),i):void 0}},88306:(e,t,n)=>{var r=n(83369);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},53632:(e,t,n)=>{var r=n(56029),i=n(70433),o=n(6557);e.exports=function(e){return e&&e.length?r(e,o,i):void 0}},22762:(e,t,n)=>{var r=n(56029),i=n(67206),o=n(70433);e.exports=function(e,t){return e&&e.length?r(e,i(t,2),o):void 0}},50308:e=>{e.exports=function(){}},7771:(e,t,n)=>{var r=n(55639);e.exports=function(){return r.Date.now()}},39601:(e,t,n)=>{var r=n(40371),i=n(79152),o=n(15403),a=n(40327);e.exports=function(e){return o(e)?r(a(e)):i(e)}},96026:(e,t,n)=>{var r=n(47445)();e.exports=r},59704:(e,t,n)=>{var r=n(82908),i=n(67206),o=n(5076),a=n(1469),s=n(16612);e.exports=function(e,t,n){var l=a(e)?r:o;return n&&s(e,t,n)&&(t=void 0),l(e,i(t,3))}},89734:(e,t,n)=>{var r=n(21078),i=n(82689),o=n(5976),a=n(16612),s=o((function(e,t){if(null==e)return[];var n=t.length;return n>1&&a(e,t[0],t[1])?t=[]:n>2&&a(t[0],t[1],t[2])&&(t=[t[0]]),i(e,r(t,1),[])}));e.exports=s},70479:e=>{e.exports=function(){return[]}},95062:e=>{e.exports=function(){return!1}},23493:(e,t,n)=>{var r=n(23279),i=n(13218);e.exports=function(e,t,n){var o=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return i(n)&&(o="leading"in n?!!n.leading:o,a="trailing"in n?!!n.trailing:a),r(e,t,{leading:o,maxWait:t,trailing:a})}},18601:(e,t,n)=>{var r=n(14841);e.exports=function(e){return e?Infinity===(e=r(e))||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},40554:(e,t,n)=>{var r=n(18601);e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},14841:(e,t,n)=>{var r=n(27561),i=n(13218),o=n(33448),a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=s.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):a.test(e)?NaN:+e}},79833:(e,t,n)=>{var r=n(80531);e.exports=function(e){return null==e?"":r(e)}},45578:(e,t,n)=>{var r=n(67206),i=n(45652);e.exports=function(e,t){return e&&e.length?i(e,r(t,2)):[]}},11700:(e,t,n)=>{var r=n(98805)("toUpperCase");e.exports=r},6158:function(e){e.exports=function(){"use strict";var e,t,n;function r(r,i){if(e)if(t){var o="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk); self.onerror = null;",a={};e(a),n=i(a),"undefined"!=typeof window&&window&&window.URL&&window.URL.createObjectURL&&(n.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else t=i;else e=i}return r(0,(function(e){var t="2.8.1",n=r;function r(e,t,n,r){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=r,this.p2x=n,this.p2y=r}r.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},r.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},r.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},r.prototype.solveCurveX=function(e,t){var n,r,i,o,a;for(void 0===t&&(t=1e-6),i=e,a=0;a<8;a++){if(o=this.sampleCurveX(i)-e,Math.abs(o)<t)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if((i=e)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-e)<t)return i;e>o?n=i:r=i,i=.5*(r-n)+n}return i},r.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var i=o;function o(e,t){this.x=e,this.y=t}o.prototype={clone:function(){return new o(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=n*this.x+t*this.y;return this.x=t*this.x-n*this.y,this.y=r,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),i=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=t.x+n*(this.x-t.x)-r*(this.y-t.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(e){return e instanceof o?e:Array.isArray(e)?new o(e[0],e[1]):e};var a="undefined"!=typeof self?self:{};const s=Math.PI/180,l=180/Math.PI;function c(e){return e*s}function u(e){return e*l}const h=[[0,0],[1,0],[1,1],[0,1]];function f(e){if(e<=0)return 0;if(e>=1)return 1;const t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function p(e,t,r,i){const o=new n(e,t,r,i);return function(e){return o.solve(e)}}const d=p(.25,.1,.25,1);function m(e,t,n){return Math.min(n,Math.max(t,e))}function g(e,t,n){return(n=m((n-e)/(t-e),0,1))*n*(3-2*n)}function y(e,t,n){const r=n-t,i=((e-t)%r+r)%r+t;return i===t?n:i}function v(e,t,n){if(!e.length)return n(null,[]);let r=e.length;const i=new Array(e.length);let o=null;e.forEach(((e,a)=>{t(e,((e,t)=>{e&&(o=e),i[a]=t,0==--r&&n(o,i)}))}))}function b(e){const t=[];for(const n in e)t.push(e[n]);return t}function _(e,...t){for(const n of t)for(const t in n)e[t]=n[t];return e}let x=1;function A(){return x++}function w(){return function e(t){return t?(t^Math.random()*(16>>t/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function C(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function E(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function S(e,t){e.forEach((e=>{t[e]&&(t[e]=t[e].bind(t))}))}function T(e,t){return-1!==e.indexOf(t,e.length-t.length)}function B(e,t,n){const r={};for(const i in e)r[i]=t.call(n||this,e[i],i,e);return r}function k(e,t,n){const r={};for(const i in e)t.call(n||this,e[i],i,e)&&(r[i]=e[i]);return r}function M(e){return Array.isArray(e)?e.map(M):"object"==typeof e&&e?B(e,M):e}const P={};function I(e){P[e]||("undefined"!=typeof console&&console.warn(e),P[e]=!0)}function O(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function D(e){let t=0;for(let n,r,i=0,o=e.length,a=o-1;i<o;a=i++)n=e[i],r=e[a],t+=(r.x-n.x)*(n.y+r.y);return t}function z(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function L(e){const t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((e,n,r,i)=>{const o=r||i;return t[n]=!o||o.toLowerCase(),""})),t["max-age"]){const e=parseInt(t["max-age"],10);isNaN(e)?delete t["max-age"]:t["max-age"]=e}return t}let R,F,U,N,j=null;function V(e){if(null==j){const t=e.navigator?e.navigator.userAgent:null;j=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return j}function G(e){try{const t=a[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch(e){return!1}}const q={now:()=>void 0!==U?U:a.performance.now(),setNow(e){U=e},restoreNow(){U=void 0},frame(e){const t=a.requestAnimationFrame(e);return{cancel:()=>a.cancelAnimationFrame(t)}},getImageData(e,t=0){const{width:n,height:r}=e;N||(N=a.document.createElement("canvas"));const i=N.getContext("2d");if(!i)throw new Error("failed to create canvas 2d context");return(n>N.width||r>N.height)&&(N.width=n,N.height=r),i.clearRect(-t,-t,n+2*t,r+2*t),i.drawImage(e,0,0,n,r),i.getImageData(-t,-t,n+2*t,r+2*t)},resolveURL:e=>(R||(R=a.document.createElement("a")),R.href=e,R.href),get devicePixelRatio(){return a.devicePixelRatio},get prefersReducedMotion(){return!!a.matchMedia&&(null==F&&(F=a.matchMedia("(prefers-reduced-motion: reduce)")),F.matches)}};let W;const H={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==W){const e=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{W=null!=process.env.API_URL_REGEX?new RegExp(process.env.API_URL_REGEX):e}catch(t){W=e}}return W},get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},$={supported:!1,testSupport:function(e){!Y&&Z&&(K?J(e):X=e)}};let X,Z,Y=!1,K=!1;function J(e){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,Z),e.isContextLost())return;$.supported=!0}catch(e){}e.deleteTexture(t),Y=!0}a.document&&(Z=a.document.createElement("img"),Z.onload=function(){X&&J(X),X=null,K=!0},Z.onerror=function(){Y=!0,X=null},Z.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Q="01",ee="NO_ACCESS_TOKEN";function te(e){return 0===e.indexOf("mapbox:")}function ne(e){return H.API_URL_REGEX.test(e)}const re=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ie(e){const t=e.match(re);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function oe(e){const t=e.params.length?`?${e.params.join("&")}`:"";return`${e.protocol}://${e.authority}${e.path}${t}`}function ae(e){if(!e)return null;const t=e.split(".");if(!t||3!==t.length)return null;try{return JSON.parse(decodeURIComponent(a.atob(t[1]).split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join("")))}catch(e){return null}}class se{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(e){const t=ae(H.ACCESS_TOKEN);let n="";return n=t&&t.u?a.btoa(encodeURIComponent(t.u).replace(/%([0-9A-F]{2})/g,((e,t)=>String.fromCharCode(Number("0x"+t))))):H.ACCESS_TOKEN||"",e?`mapbox.eventData.${e}:${n}`:`mapbox.eventData:${n}`}fetchEventData(){const e=G("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{const e=a.localStorage.getItem(t);e&&(this.eventData=JSON.parse(e));const r=a.localStorage.getItem(n);r&&(this.anonId=r)}catch(e){I("Unable to read from LocalStorage")}}saveEventData(){const e=G("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{a.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&a.localStorage.setItem(t,JSON.stringify(this.eventData))}catch(e){I("Unable to write to LocalStorage")}}processRequests(e){}postEvent(e,n,r,i){if(!H.EVENTS_URL)return;const o=ie(H.EVENTS_URL);o.params.push(`access_token=${i||H.ACCESS_TOKEN||""}`);const a={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:t,skuId:Q,userId:this.anonId},s=n?_(a,n):a,l={url:oe(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=Be(l,(e=>{this.pendingRequest=null,r(e),this.saveEventData(),this.processRequests(i)}))}queueRequest(e,t){this.queue.push(e),this.processRequests(t)}}const le=new class extends se{constructor(e){super("appUserTurnstile"),this._customAccessToken=e}postTurnstileEvent(e,t){H.EVENTS_URL&&H.ACCESS_TOKEN&&Array.isArray(e)&&e.some((e=>te(e)||ne(e)))&&this.queueRequest(Date.now(),t)}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const t=ae(H.ACCESS_TOKEN),n=t?t.u:H.ACCESS_TOKEN;let r=n!==this.eventData.tokenU;E(this.anonId)||(this.anonId=w(),r=!0);const i=this.queue.shift();if(this.eventData.lastSuccess){const e=new Date(this.eventData.lastSuccess),t=new Date(i),n=(i-this.eventData.lastSuccess)/864e5;r=r||n>=1||n<-1||e.getDate()!==t.getDate()}else r=!0;r?this.postEvent(i,{"enabled.telemetry":!1},(e=>{e||(this.eventData.lastSuccess=i,this.eventData.tokenU=n)}),e):this.processRequests()}},ce=le.postTurnstileEvent.bind(le),ue=new class extends se{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(e,t,n,r){this.skuToken=t,this.errorCb=r,H.EVENTS_URL&&(n||H.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},n):this.errorCb(new Error(ee)))}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:n}=this.queue.shift();t&&this.success[t]||(this.anonId||this.fetchEventData(),E(this.anonId)||(this.anonId=w()),this.postEvent(n,{skuToken:this.skuToken},(e=>{e?this.errorCb(e):t&&(this.success[t]=!0)}),e))}},he=ue.postMapLoadEvent.bind(ue),fe=new class extends se{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(e,t,n,r){if(!H.API_URL||!H.SESSION_PATH)return;const i=ie(H.API_URL+H.SESSION_PATH);i.params.push(`sku=${t||""}`),i.params.push(`access_token=${r||H.ACCESS_TOKEN||""}`);const o={url:oe(i),headers:{"Content-Type":"text/plain"}};this.pendingRequest=ke(o,(e=>{this.pendingRequest=null,n(e),this.saveEventData(),this.processRequests(r)}))}getSessionAPI(e,t,n,r){this.skuToken=t,this.errorCb=r,H.SESSION_PATH&&H.API_URL&&(n||H.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},n):this.errorCb(new Error(ee)))}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:n}=this.queue.shift();t&&this.success[t]||this.getSession(n,this.skuToken,(e=>{e?this.errorCb(e):t&&(this.success[t]=!0)}),e)}},pe=fe.getSessionAPI.bind(fe),de=new Set,me="mapbox-tiles";let ge,ye,ve=500,be=50;function _e(){a.caches&&!ge&&(ge=a.caches.open(me))}function xe(e){const t=e.indexOf("?");return t<0?e:e.slice(0,t)}let Ae=1/0;const we={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(we);class Ce extends Error{constructor(e,t,n){401===t&&ne(n)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(e),this.status=t,this.url=n}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Ee=z()?()=>self.worker&&self.worker.referrer:()=>("blob:"===a.location.protocol?a.parent:a).location.href,Se=function(e,t){if(!(/^file:/.test(n=e.url)||/^file:/.test(Ee())&&!/^\w+:/.test(n))){if(a.fetch&&a.Request&&a.AbortController&&a.Request.prototype.hasOwnProperty("signal"))return function(e,t){const n=new a.AbortController,r=new a.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:Ee(),signal:n.signal});let i=!1,o=!1;const s=(l=r.url).indexOf("sku=")>0&&ne(l);var l;"json"===e.type&&r.headers.set("Accept","application/json");const c=(n,i,l)=>{if(o)return;if(n&&"SecurityError"!==n.message&&I(n),i&&l)return u(i);const c=Date.now();a.fetch(r).then((n=>{if(n.ok){const e=s?n.clone():null;return u(n,e,c)}return t(new Ce(n.statusText,n.status,e.url))})).catch((e=>{20!==e.code&&t(new Error(e.message))}))},u=(n,s,l)=>{("arrayBuffer"===e.type?n.arrayBuffer():"json"===e.type?n.json():n.text()).then((e=>{o||(s&&l&&function(e,t,n){if(_e(),!ge)return;const r={status:t.status,statusText:t.statusText,headers:new a.Headers};t.headers.forEach(((e,t)=>r.headers.set(t,e)));const i=L(t.headers.get("Cache-Control")||"");if(i["no-store"])return;i["max-age"]&&r.headers.set("Expires",new Date(n+1e3*i["max-age"]).toUTCString());const o=r.headers.get("Expires");o&&(new Date(o).getTime()-n<42e4||function(e,t){if(void 0===ye)try{new Response(new ReadableStream),ye=!0}catch(e){ye=!1}ye?t(e.body):e.blob().then(t)}(t,(t=>{const n=new a.Response(t,r);_e(),ge&&ge.then((t=>t.put(xe(e.url),n))).catch((e=>I(e.message)))})))}(r,s,l),i=!0,t(null,e,n.headers.get("Cache-Control"),n.headers.get("Expires")))})).catch((e=>{o||t(new Error(e.message))}))};return s?function(e,t){if(_e(),!ge)return t(null);const n=xe(e.url);ge.then((e=>{e.match(n).then((r=>{const i=function(e){if(!e)return!1;const t=new Date(e.headers.get("Expires")||0),n=L(e.headers.get("Cache-Control")||"");return t>Date.now()&&!n["no-cache"]}(r);e.delete(n),i&&e.put(n,r.clone()),t(null,r,i)})).catch(t)})).catch(t)}(r,c):c(null,null),{cancel:()=>{o=!0,i||n.abort()}}}(e,t);if(z()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var n;return function(e,t){const n=new a.XMLHttpRequest;n.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(n.responseType="arraybuffer");for(const t in e.headers)n.setRequestHeader(t,e.headers[t]);return"json"===e.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===e.credentials,n.onerror=()=>{t(new Error(n.statusText))},n.onload=()=>{if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){let r=n.response;if("json"===e.type)try{r=JSON.parse(n.response)}catch(e){return t(e)}t(null,r,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else t(new Ce(n.statusText,n.status,e.url))},n.send(e.body),{cancel:()=>n.abort()}}(e,t)},Te=function(e,t){return Se(_(e,{type:"arrayBuffer"}),t)},Be=function(e,t){return Se(_(e,{method:"POST"}),t)},ke=function(e,t){return Se(_(e,{method:"GET"}),t)};function Me(e){const t=a.document.createElement("a");return t.href=e,t.protocol===a.document.location.protocol&&t.host===a.document.location.host}const Pe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Ie,Oe;Ie=[],Oe=0;const De=function(e,t){if($.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),Oe>=H.MAX_PARALLEL_IMAGE_REQUESTS){const n={requestParameters:e,callback:t,cancelled:!1,cancel(){this.cancelled=!0}};return Ie.push(n),n}Oe++;let n=!1;const r=()=>{if(!n)for(n=!0,Oe--;Ie.length&&Oe<H.MAX_PARALLEL_IMAGE_REQUESTS;){const e=Ie.shift(),{requestParameters:t,callback:n,cancelled:r}=e;r||(e.cancel=De(t,n).cancel)}},i=Te(e,((e,n,i,o)=>{r(),e?t(e):n&&(a.createImageBitmap?function(e,t){const n=new a.Blob([new Uint8Array(e)],{type:"image/png"});a.createImageBitmap(n).then((e=>{t(null,e)})).catch((e=>{t(new Error(`Could not load image because of ${e.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))}))}(n,((e,n)=>t(e,n,i,o))):function(e,t){const n=new a.Image,r=a.URL;n.onload=()=>{t(null,n),r.revokeObjectURL(n.src),n.onload=null,a.requestAnimationFrame((()=>{n.src=Pe}))},n.onerror=()=>t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const i=new a.Blob([new Uint8Array(e)],{type:"image/png"});n.src=e.byteLength?r.createObjectURL(i):Pe}(n,((e,n)=>t(e,n,i,o))))}));return{cancel:()=>{i.cancel(),r()}}};function ze(e,t,n){n[e]&&-1!==n[e].indexOf(t)||(n[e]=n[e]||[],n[e].push(t))}function Le(e,t,n){if(n&&n[e]){const r=n[e].indexOf(t);-1!==r&&n[e].splice(r,1)}}class Re{constructor(e,t={}){_(this,t),this.type=e}}class Fe extends Re{constructor(e,t={}){super("error",_({error:e},t))}}class Ue{on(e,t){return this._listeners=this._listeners||{},ze(e,t,this._listeners),this}off(e,t){return Le(e,t,this._listeners),Le(e,t,this._oneTimeListeners),this}once(e,t){return t?(this._oneTimeListeners=this._oneTimeListeners||{},ze(e,t,this._oneTimeListeners),this):new Promise((t=>this.once(e,t)))}fire(e,t){"string"==typeof e&&(e=new Re(e,t||{}));const n=e.type;if(this.listens(n)){e.target=this;const t=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];for(const n of t)n.call(this,e);const r=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];for(const t of r)Le(n,t,this._oneTimeListeners),t.call(this,e);const i=this._eventedParent;i&&(_(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),i.fire(e))}else e instanceof Fe&&console.error(e.error);return this}listens(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}setEventedParent(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}var Ne=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":0.1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":true,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"cross-faded"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"cross-faded":{"type":"property-type"},"cross-faded-data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function je(e,...t){for(const n of t)for(const t in n)e[t]=n[t];return e}function Ve(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Ge(e){if(Array.isArray(e))return e.map(Ge);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const n in e)t[n]=Ge(e[n]);return t}return Ve(e)}class qe extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class We{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[e,n]of t)this.bindings[e]=n}concat(e){return new We(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const He={kind:"null"},$e={kind:"number"},Xe={kind:"string"},Ze={kind:"boolean"},Ye={kind:"color"},Ke={kind:"object"},Je={kind:"value"},Qe={kind:"collator"},et={kind:"formatted"},tt={kind:"resolvedImage"};function nt(e,t){return{kind:"array",itemType:e,N:t}}function rt(e){if("array"===e.kind){const t=rt(e.itemType);return"number"==typeof e.N?`array<${t}, ${e.N}>`:"value"===e.itemType.kind?"array":`array<${t}>`}return e.kind}const it=[He,$e,Xe,Ze,Ye,et,Ke,nt(Je),tt];function ot(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!ot(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(const e of it)if(!ot(e,t))return null}return`Expected ${rt(e)} but found ${rt(t)} instead.`}function at(e,t){return t.some((t=>t.kind===e.kind))}function st(e,t){return t.some((t=>"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e))}function lt(e){var t={exports:{}};return e(t,t.exports),t.exports}var ct=lt((function(e,t){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(e){return(e=Math.round(e))<0?0:e>255?255:e}function i(e){return r("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function o(e){return(t="%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))<0?0:t>1?1:t;var t}function a(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}try{t.parseCSSColor=function(e){var t,s=e.replace(/ /g,"").toLowerCase();if(s in n)return n[s].slice();if("#"===s[0])return 4===s.length?(t=parseInt(s.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===s.length&&(t=parseInt(s.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var l=s.indexOf("("),c=s.indexOf(")");if(-1!==l&&c+1===s.length){var u=s.substr(0,l),h=s.substr(l+1,c-(l+1)).split(","),f=1;switch(u){case"rgba":if(4!==h.length)return null;f=o(h.pop());case"rgb":return 3!==h.length?null:[i(h[0]),i(h[1]),i(h[2]),f];case"hsla":if(4!==h.length)return null;f=o(h.pop());case"hsl":if(3!==h.length)return null;var p=(parseFloat(h[0])%360+360)%360/360,d=o(h[1]),m=o(h[2]),g=m<=.5?m*(d+1):m+d-m*d,y=2*m-g;return[r(255*a(y,g,p+1/3)),r(255*a(y,g,p)),r(255*a(y,g,p-1/3)),f];default:return null}}return null}}catch(e){}}));class ut{constructor(e,t,n,r=1){this.r=e,this.g=t,this.b=n,this.a=r}static parse(e){if(!e)return;if(e instanceof ut)return e;if("string"!=typeof e)return;const t=ct.parseCSSColor(e);return t?new ut(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3]):void 0}toString(){const[e,t,n,r]=this.toArray();return`rgba(${Math.round(e)},${Math.round(t)},${Math.round(n)},${r})`}toArray(){const{r:e,g:t,b:n,a:r}=this;return 0===r?[0,0,0,0]:[255*e/r,255*t/r,255*n/r,r]}}ut.black=new ut(0,0,0,1),ut.white=new ut(1,1,1,1),ut.transparent=new ut(0,0,0,0),ut.red=new ut(1,0,0,1),ut.blue=new ut(0,0,1,1);class ht{constructor(e,t,n){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ft{constructor(e,t,n,r,i){this.text=e.normalize?e.normalize():e,this.image=t,this.scale=n,this.fontStack=r,this.textColor=i}}class pt{constructor(e){this.sections=e}static fromString(e){return new pt([new ft(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((e=>0!==e.text.length||e.image&&0!==e.image.name.length))}static factory(e){return e instanceof pt?e:pt.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map((e=>e.text)).join("")}serialize(){const e=["format"];for(const t of this.sections){if(t.image){e.push(["image",t.image.name]);continue}e.push(t.text);const n={};t.fontStack&&(n["text-font"]=["literal",t.fontStack.split(",")]),t.scale&&(n["font-scale"]=t.scale),t.textColor&&(n["text-color"]=["rgba"].concat(t.textColor.toArray())),e.push(n)}return e}}class dt{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new dt({name:e,available:!1}):null}serialize(){return["image",this.name]}}function mt(e,t,n,r){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:`Invalid rgba value [${[e,t,n,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof r?[e,t,n,r]:[e,t,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function gt(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof ut)return!0;if(e instanceof ht)return!0;if(e instanceof pt)return!0;if(e instanceof dt)return!0;if(Array.isArray(e)){for(const t of e)if(!gt(t))return!1;return!0}if("object"==typeof e){for(const t in e)if(!gt(e[t]))return!1;return!0}return!1}function yt(e){if(null===e)return He;if("string"==typeof e)return Xe;if("boolean"==typeof e)return Ze;if("number"==typeof e)return $e;if(e instanceof ut)return Ye;if(e instanceof ht)return Qe;if(e instanceof pt)return et;if(e instanceof dt)return tt;if(Array.isArray(e)){const t=e.length;let n;for(const t of e){const e=yt(t);if(n){if(n===e)continue;n=Je;break}n=e}return nt(n||Je,t)}return Ke}function vt(e){const t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof ut||e instanceof pt||e instanceof dt?e.toString():JSON.stringify(e)}class bt{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(2!==e.length)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!gt(e[1]))return t.error("invalid value");const n=e[1];let r=yt(n);const i=t.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new bt(r,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof ut?["rgba"].concat(this.value.toArray()):this.value instanceof pt?this.value.serialize():this.value}}class _t{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const xt={string:Xe,number:$e,boolean:Ze,object:Ke};class At{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let n,r=1;const i=e[0];if("array"===i){let i,o;if(e.length>2){const n=e[1];if("string"!=typeof n||!(n in xt)||"object"===n)return t.error('The item type argument of "array" must be one of string, number, boolean',1);i=xt[n],r++}else i=Je;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);o=e[2],r++}n=nt(i,o)}else n=xt[i];const o=[];for(;r<e.length;r++){const n=t.parse(e[r],r,Je);if(!n)return null;o.push(n)}return new At(n,o)}evaluate(e){for(let t=0;t<this.args.length;t++){const n=this.args[t].evaluate(e);if(!ot(this.type,yt(n)))return n;if(t===this.args.length-1)throw new _t(`Expected value to be of type ${rt(this.type)}, but found ${rt(yt(n))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}serialize(){const e=this.type,t=[e.kind];if("array"===e.kind){const n=e.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){t.push(n.kind);const r=e.N;("number"==typeof r||this.args.length>1)&&t.push(r)}}return t.concat(this.args.map((e=>e.serialize())))}}class wt{constructor(e){this.type=et,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[1];if(!Array.isArray(n)&&"object"==typeof n)return t.error("First argument must be an image or text section.");const r=[];let i=!1;for(let n=1;n<=e.length-1;++n){const o=e[n];if(i&&"object"==typeof o&&!Array.isArray(o)){i=!1;let e=null;if(o["font-scale"]&&(e=t.parse(o["font-scale"],1,$e),!e))return null;let n=null;if(o["text-font"]&&(n=t.parse(o["text-font"],1,nt(Xe)),!n))return null;let a=null;if(o["text-color"]&&(a=t.parse(o["text-color"],1,Ye),!a))return null;const s=r[r.length-1];s.scale=e,s.font=n,s.textColor=a}else{const o=t.parse(e[n],1,Je);if(!o)return null;const a=o.type.kind;if("string"!==a&&"value"!==a&&"null"!==a&&"resolvedImage"!==a)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,r.push({content:o,scale:null,font:null,textColor:null})}}return new wt(r)}evaluate(e){return new pt(this.sections.map((t=>{const n=t.content.evaluate(e);return yt(n)===tt?new ft("",n,null,null,null):new ft(vt(n),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)})))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const t of this.sections){e.push(t.content.serialize());const n={};t.scale&&(n["font-scale"]=t.scale.serialize()),t.font&&(n["text-font"]=t.font.serialize()),t.textColor&&(n["text-color"]=t.textColor.serialize()),e.push(n)}return e}}class Ct{constructor(e){this.type=tt,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected two arguments.");const n=t.parse(e[1],1,Xe);return n?new Ct(n):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),n=dt.fromString(t);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(t)>-1),n}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Et={"to-boolean":Ze,"to-color":Ye,"to-number":$e,"to-string":Xe};class St{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[0];if(("to-boolean"===n||"to-string"===n)&&2!==e.length)return t.error("Expected one argument.");const r=Et[n],i=[];for(let n=1;n<e.length;n++){const r=t.parse(e[n],n,Je);if(!r)return null;i.push(r)}return new St(r,i)}evaluate(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){let t,n;for(const r of this.args){if(t=r.evaluate(e),n=null,t instanceof ut)return t;if("string"==typeof t){const n=e.parseColor(t);if(n)return n}else if(Array.isArray(t)&&(n=t.length<3||t.length>4?`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:mt(t[0],t[1],t[2],t[3]),!n))return new ut(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new _t(n||`Could not parse color from value '${"string"==typeof t?t:String(JSON.stringify(t))}'`)}if("number"===this.type.kind){let t=null;for(const n of this.args){if(t=n.evaluate(e),null===t)return 0;const r=Number(t);if(!isNaN(r))return r}throw new _t(`Could not convert ${JSON.stringify(t)} to number.`)}return"formatted"===this.type.kind?pt.fromString(vt(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?dt.fromString(vt(this.args[0].evaluate(e))):vt(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}serialize(){if("formatted"===this.type.kind)return new wt([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Ct(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild((t=>{e.push(t.serialize())})),e}}const Tt=["Unknown","Point","LineString","Polygon"];class Bt{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&"id"in this.feature&&this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Tt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,t=this.featureDistanceData.scale,{x:n,y:r}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(n*t-e[0])+this.featureDistanceData.bearing[1]*(r*t-e[1])}return 0}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=ut.parse(e)),t}}class kt{constructor(e,t,n,r){this.name=e,this.type=t,this._evaluate=n,this.args=r}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map((e=>e.serialize())))}static parse(e,t){const n=e[0],r=kt.definitions[n];if(!r)return t.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const i=Array.isArray(r)?r[0]:r.type,o=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=o.filter((([t])=>!Array.isArray(t)||t.length===e.length-1));let s=null;for(const[r,o]of a){s=new Jt(t.registry,t.path,null,t.scope);const a=[];let l=!1;for(let t=1;t<e.length;t++){const n=e[t],i=Array.isArray(r)?r[t-1]:r.type,o=s.parse(n,1+a.length,i);if(!o){l=!0;break}a.push(o)}if(!l)if(Array.isArray(r)&&r.length!==a.length)s.error(`Expected ${r.length} arguments, but found ${a.length} instead.`);else{for(let e=0;e<a.length;e++){const t=Array.isArray(r)?r[e]:r.type,n=a[e];s.concat(e+1).checkSubtype(t,n.type)}if(0===s.errors.length)return new kt(n,i,o,a)}}if(1===a.length)t.errors.push(...s.errors);else{const n=(a.length?a:o).map((([e])=>{return t=e,Array.isArray(t)?`(${t.map(rt).join(", ")})`:`(${rt(t.type)}...)`;var t})).join(" | "),r=[];for(let n=1;n<e.length;n++){const i=t.parse(e[n],1+r.length);if(!i)return null;r.push(rt(i.type))}t.error(`Expected arguments of type ${n}, but found (${r.join(", ")}) instead.`)}return null}static register(e,t){kt.definitions=t;for(const n in t)e[n]=kt}}class Mt{constructor(e,t,n){this.type=Qe,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(2!==e.length)return t.error("Expected one argument.");const n=e[1];if("object"!=typeof n||Array.isArray(n))return t.error("Collator options argument must be an object.");const r=t.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,Ze);if(!r)return null;const i=t.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,Ze);if(!i)return null;let o=null;return n.locale&&(o=t.parse(n.locale,1,Xe),!o)?null:new Mt(r,i,o)}evaluate(e){return new ht(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const Pt=8192;function It(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function Ot(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function Dt(e,t){const n=(180+e[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,i=Math.pow(2,t.z);return[Math.round(n*i*Pt),Math.round(r*i*Pt)]}function zt(e,t,n){const r=e[0]-t[0],i=e[1]-t[1],o=e[0]-n[0],a=e[1]-n[1];return r*a-o*i==0&&r*o<=0&&i*a<=0}function Lt(e,t){let n=!1;for(let a=0,s=t.length;a<s;a++){const s=t[a];for(let t=0,a=s.length;t<a-1;t++){if(zt(e,s[t],s[t+1]))return!1;(i=s[t])[1]>(r=e)[1]!=(o=s[t+1])[1]>r[1]&&r[0]<(o[0]-i[0])*(r[1]-i[1])/(o[1]-i[1])+i[0]&&(n=!n)}}var r,i,o;return n}function Rt(e,t){for(let n=0;n<t.length;n++)if(Lt(e,t[n]))return!0;return!1}function Ft(e,t,n,r){const i=r[0]-n[0],o=r[1]-n[1],a=(e[0]-n[0])*o-i*(e[1]-n[1]),s=(t[0]-n[0])*o-i*(t[1]-n[1]);return a>0&&s<0||a<0&&s>0}function Ut(e,t,n){for(const c of n)for(let n=0;n<c.length-1;++n)if(0!=(s=[(a=c[n+1])[0]-(o=c[n])[0],a[1]-o[1]])[0]*(l=[(i=t)[0]-(r=e)[0],i[1]-r[1]])[1]-s[1]*l[0]&&Ft(r,i,o,a)&&Ft(o,a,r,i))return!0;var r,i,o,a,s,l;return!1}function Nt(e,t){for(let n=0;n<e.length;++n)if(!Lt(e[n],t))return!1;for(let n=0;n<e.length-1;++n)if(Ut(e[n],e[n+1],t))return!1;return!0}function jt(e,t){for(let n=0;n<t.length;n++)if(Nt(e,t[n]))return!0;return!1}function Vt(e,t,n){const r=[];for(let i=0;i<e.length;i++){const o=[];for(let r=0;r<e[i].length;r++){const a=Dt(e[i][r],n);It(t,a),o.push(a)}r.push(o)}return r}function Gt(e,t,n){const r=[];for(let i=0;i<e.length;i++){const o=Vt(e[i],t,n);r.push(o)}return r}function qt(e,t,n,r){if(e[0]<n[0]||e[0]>n[2]){const t=.5*r;let i=e[0]-n[0]>t?-r:n[0]-e[0]>t?r:0;0===i&&(i=e[0]-n[2]>t?-r:n[2]-e[0]>t?r:0),e[0]+=i}It(t,e)}function Wt(e,t,n,r){const i=Math.pow(2,r.z)*Pt,o=[r.x*Pt,r.y*Pt],a=[];if(!e)return a;for(const r of e)for(const e of r){const r=[e.x+o[0],e.y+o[1]];qt(r,t,n,i),a.push(r)}return a}function Ht(e,t,n,r){const i=Math.pow(2,r.z)*Pt,o=[r.x*Pt,r.y*Pt],a=[];if(!e)return a;for(const n of e){const e=[];for(const r of n){const n=[r.x+o[0],r.y+o[1]];It(t,n),e.push(n)}a.push(e)}if(t[2]-t[0]<=i/2){(s=t)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const e of a)for(const r of e)qt(r,t,n,i)}var s;return a}class $t{constructor(e,t){this.type=Ze,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(gt(e[1])){const t=e[1];if("FeatureCollection"===t.type)for(let e=0;e<t.features.length;++e){const n=t.features[e].geometry.type;if("Polygon"===n||"MultiPolygon"===n)return new $t(t,t.features[e].geometry)}else if("Feature"===t.type){const e=t.geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new $t(t,t.geometry)}else if("Polygon"===t.type||"MultiPolygon"===t.type)return new $t(t,t)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if(!i)return!1;if("Polygon"===t.type){const o=Vt(t.coordinates,r,i),a=Wt(e.geometry(),n,r,i);if(!Ot(n,r))return!1;for(const e of a)if(!Lt(e,o))return!1}if("MultiPolygon"===t.type){const o=Gt(t.coordinates,r,i),a=Wt(e.geometry(),n,r,i);if(!Ot(n,r))return!1;for(const e of a)if(!Rt(e,o))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if(!i)return!1;if("Polygon"===t.type){const o=Vt(t.coordinates,r,i),a=Ht(e.geometry(),n,r,i);if(!Ot(n,r))return!1;for(const e of a)if(!Nt(e,o))return!1}if("MultiPolygon"===t.type){const o=Gt(t.coordinates,r,i),a=Ht(e.geometry(),n,r,i);if(!Ot(n,r))return!1;for(const e of a)if(!jt(e,o))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function Xt(e){if(e instanceof kt){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof $t)return!1;let t=!0;return e.eachChild((e=>{t&&!Xt(e)&&(t=!1)})),t}function Zt(e){if(e instanceof kt&&"feature-state"===e.name)return!1;let t=!0;return e.eachChild((e=>{t&&!Zt(e)&&(t=!1)})),t}function Yt(e,t){if(e instanceof kt&&t.indexOf(e.name)>=0)return!1;let n=!0;return e.eachChild((e=>{n&&!Yt(e,t)&&(n=!1)})),n}class Kt{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");const n=e[1];return t.scope.has(n)?new Kt(n,t.scope.get(n)):t.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Jt{constructor(e,t=[],n,r=new We,i=[]){this.registry=e,this.path=t,this.key=t.map((e=>`[${e}]`)).join(""),this.scope=r,this.errors=i,this.expectedType=n}parse(e,t,n,r,i={}){return t?this.concat(t,n,r)._parse(e,i):this._parse(e,i)}_parse(e,t){function n(e,t,n){return"assert"===n?new At(t,[e]):"coerce"===n?new St(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=e[0];if("string"!=typeof r)return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const i=this.registry[r];if(i){let r=i.parse(e,this);if(!r)return null;if(this.expectedType){const e=this.expectedType,i=r.type;if("string"!==e.kind&&"number"!==e.kind&&"boolean"!==e.kind&&"object"!==e.kind&&"array"!==e.kind||"value"!==i.kind)if("color"!==e.kind&&"formatted"!==e.kind&&"resolvedImage"!==e.kind||"value"!==i.kind&&"string"!==i.kind){if(this.checkSubtype(e,i))return null}else r=n(r,e,t.typeAnnotation||"coerce");else r=n(r,e,t.typeAnnotation||"assert")}if(!(r instanceof bt)&&"resolvedImage"!==r.type.kind&&Qt(r)){const t=new Bt;try{r=new bt(r.type,r.evaluate(t))}catch(e){return this.error(e.message),null}}return r}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,t,n){const r="number"==typeof e?this.path.concat(e):this.path,i=n?this.scope.concat(n):this.scope;return new Jt(this.registry,r,t||null,i,this.errors)}error(e,...t){const n=`${this.key}${t.map((e=>`[${e}]`)).join("")}`;this.errors.push(new qe(n,e))}checkSubtype(e,t){const n=ot(e,t);return n&&this.error(n),n}}function Qt(e){if(e instanceof Kt)return Qt(e.boundExpression);if(e instanceof kt&&"error"===e.name)return!1;if(e instanceof Mt)return!1;if(e instanceof $t)return!1;const t=e instanceof St||e instanceof At;let n=!0;return e.eachChild((e=>{n=t?n&&Qt(e):n&&e instanceof bt})),!!n&&Xt(e)&&Yt(e,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function en(e,t){const n=e.length-1;let r,i,o=0,a=n,s=0;for(;o<=a;)if(s=Math.floor((o+a)/2),r=e[s],i=e[s+1],r<=t){if(s===n||t<i)return s;o=s+1}else{if(!(r>t))throw new _t("Input is not a number.");a=s-1}return 0}class tn{constructor(e,t,n){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[e,t]of n)this.labels.push(e),this.outputs.push(t)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");const n=t.parse(e[1],1,$e);if(!n)return null;const r=[];let i=null;t.expectedType&&"value"!==t.expectedType.kind&&(i=t.expectedType);for(let n=1;n<e.length;n+=2){const o=1===n?-1/0:e[n],a=e[n+1],s=n,l=n+1;if("number"!=typeof o)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(r.length&&r[r.length-1][0]>=o)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const c=t.parse(a,l,i);if(!c)return null;i=i||c.type,r.push([o,c])}return new tn(i,n,r)}evaluate(e){const t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);const i=t.length;return r>=t[i-1]?n[i-1].evaluate(e):n[en(t,r)].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}serialize(){const e=["step",this.input.serialize()];for(let t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}function nn(e,t,n){return e*(1-n)+t*n}var rn=Object.freeze({__proto__:null,number:nn,color:function(e,t,n){return new ut(nn(e.r,t.r,n),nn(e.g,t.g,n),nn(e.b,t.b,n),nn(e.a,t.a,n))},array:function(e,t,n){return e.map(((e,r)=>nn(e,t[r],n)))}});const on=.95047,an=1.08883,sn=4/29,ln=6/29,cn=3*ln*ln,un=Math.PI/180,hn=180/Math.PI;function fn(e){return e>.008856451679035631?Math.pow(e,1/3):e/cn+sn}function pn(e){return e>ln?e*e*e:cn*(e-sn)}function dn(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function mn(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function gn(e){const t=mn(e.r),n=mn(e.g),r=mn(e.b),i=fn((.4124564*t+.3575761*n+.1804375*r)/on),o=fn((.2126729*t+.7151522*n+.072175*r)/1);return{l:116*o-16,a:500*(i-o),b:200*(o-fn((.0193339*t+.119192*n+.9503041*r)/an)),alpha:e.a}}function yn(e){let t=(e.l+16)/116,n=isNaN(e.a)?t:t+e.a/500,r=isNaN(e.b)?t:t-e.b/200;return t=1*pn(t),n=on*pn(n),r=an*pn(r),new ut(dn(3.2404542*n-1.5371385*t-.4985314*r),dn(-.969266*n+1.8760108*t+.041556*r),dn(.0556434*n-.2040259*t+1.0572252*r),e.alpha)}function vn(e,t,n){const r=t-e;return e+n*(r>180||r<-180?r-360*Math.round(r/360):r)}const bn={forward:gn,reverse:yn,interpolate:function(e,t,n){return{l:nn(e.l,t.l,n),a:nn(e.a,t.a,n),b:nn(e.b,t.b,n),alpha:nn(e.alpha,t.alpha,n)}}},_n={forward:function(e){const{l:t,a:n,b:r}=gn(e),i=Math.atan2(r,n)*hn;return{h:i<0?i+360:i,c:Math.sqrt(n*n+r*r),l:t,alpha:e.a}},reverse:function(e){const t=e.h*un,n=e.c;return yn({l:e.l,a:Math.cos(t)*n,b:Math.sin(t)*n,alpha:e.alpha})},interpolate:function(e,t,n){return{h:vn(e.h,t.h,n),c:nn(e.c,t.c,n),l:nn(e.l,t.l,n),alpha:nn(e.alpha,t.alpha,n)}}};var xn=Object.freeze({__proto__:null,lab:bn,hcl:_n});class An{constructor(e,t,n,r,i){this.type=e,this.operator=t,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(const[e,t]of i)this.labels.push(e),this.outputs.push(t)}static interpolationFactor(e,t,r,i){let o=0;if("exponential"===e.name)o=wn(t,e.base,r,i);else if("linear"===e.name)o=wn(t,1,r,i);else if("cubic-bezier"===e.name){const a=e.controlPoints;o=new n(a[0],a[1],a[2],a[3]).solve(wn(t,1,r,i))}return o}static parse(e,t){let[n,r,i,...o]=e;if(!Array.isArray(r)||0===r.length)return t.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){const e=r[1];if("number"!=typeof e)return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:e}}else{if("cubic-bezier"!==r[0])return t.error(`Unknown interpolation type ${String(r[0])}`,1,0);{const e=r.slice(1);if(4!==e.length||e.some((e=>"number"!=typeof e||e<0||e>1)))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:e}}}if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(i=t.parse(i,2,$e),!i)return null;const a=[];let s=null;"interpolate-hcl"===n||"interpolate-lab"===n?s=Ye:t.expectedType&&"value"!==t.expectedType.kind&&(s=t.expectedType);for(let e=0;e<o.length;e+=2){const n=o[e],r=o[e+1],i=e+3,l=e+4;if("number"!=typeof n)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',i);if(a.length&&a[a.length-1][0]>=n)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',i);const c=t.parse(r,l,s);if(!c)return null;s=s||c.type,a.push([n,c])}return"number"===s.kind||"color"===s.kind||"array"===s.kind&&"number"===s.itemType.kind&&"number"==typeof s.N?new An(s,n,r,i,a):t.error(`Type ${rt(s)} is not interpolatable.`)}evaluate(e){const t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);const i=t.length;if(r>=t[i-1])return n[i-1].evaluate(e);const o=en(t,r),a=An.interpolationFactor(this.interpolation,r,t[o],t[o+1]),s=n[o].evaluate(e),l=n[o+1].evaluate(e);return"interpolate"===this.operator?rn[this.type.kind.toLowerCase()](s,l,a):"interpolate-hcl"===this.operator?_n.reverse(_n.interpolate(_n.forward(s),_n.forward(l),a)):bn.reverse(bn.interpolate(bn.forward(s),bn.forward(l),a))}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}serialize(){let e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const t=[this.operator,e,this.input.serialize()];for(let e=0;e<this.labels.length;e++)t.push(this.labels[e],this.outputs[e].serialize());return t}}function wn(e,t,n,r){const i=r-n,o=e-n;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}class Cn{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let n=null;const r=t.expectedType;r&&"value"!==r.kind&&(n=r);const i=[];for(const r of e.slice(1)){const e=t.parse(r,1+i.length,n,void 0,{typeAnnotation:"omit"});if(!e)return null;n=n||e.type,i.push(e)}const o=r&&i.some((e=>ot(r,e.type)));return new Cn(o?Je:n,i)}evaluate(e){let t,n=null,r=0;for(const i of this.args){if(r++,n=i.evaluate(e),n&&n instanceof dt&&!n.available&&(t||(t=n),n=null,r===this.args.length))return t;if(null!==n)break}return n}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}serialize(){const e=["coalesce"];return this.eachChild((t=>{e.push(t.serialize())})),e}}class En{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const n=[];for(let r=1;r<e.length-1;r+=2){const i=e[r];if("string"!=typeof i)return t.error(`Expected string, but found ${typeof i} instead.`,r);if(/[^a-zA-Z0-9_]/.test(i))return t.error("Variable names must contain only alphanumeric characters or '_'.",r);const o=t.parse(e[r+1],r+1);if(!o)return null;n.push([i,o])}const r=t.parse(e[e.length-1],e.length-1,t.expectedType,n);return r?new En(n,r):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[t,n]of this.bindings)e.push(t,n.serialize());return e.push(this.result.serialize()),e}}class Sn{constructor(e,t,n){this.type=e,this.index=t,this.input=n}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,$e),r=t.parse(e[2],2,nt(t.expectedType||Je));return n&&r?new Sn(r.type.itemType,n,r):null}evaluate(e){const t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new _t(`Array index out of bounds: ${t} < 0.`);if(t>=n.length)throw new _t(`Array index out of bounds: ${t} > ${n.length-1}.`);if(t!==Math.floor(t))throw new _t(`Array index must be an integer, but found ${t} instead.`);return n[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class Tn{constructor(e,t){this.type=Ze,this.needle=e,this.haystack=t}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,Je),r=t.parse(e[2],2,Je);return n&&r?at(n.type,[Ze,Xe,$e,He,Je])?new Tn(n,r):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${rt(n.type)} instead`):null}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(null==n)return!1;if(!st(t,["boolean","string","number","null"]))throw new _t(`Expected first argument to be of type boolean, string, number or null, but found ${rt(yt(t))} instead.`);if(!st(n,["string","array"]))throw new _t(`Expected second argument to be of type array or string, but found ${rt(yt(n))} instead.`);return n.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Bn{constructor(e,t,n){this.type=$e,this.needle=e,this.haystack=t,this.fromIndex=n}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,Je),r=t.parse(e[2],2,Je);if(!n||!r)return null;if(!at(n.type,[Ze,Xe,$e,He,Je]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${rt(n.type)} instead`);if(4===e.length){const i=t.parse(e[3],3,$e);return i?new Bn(n,r,i):null}return new Bn(n,r)}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!st(t,["boolean","string","number","null"]))throw new _t(`Expected first argument to be of type boolean, string, number or null, but found ${rt(yt(t))} instead.`);if(!st(n,["string","array"]))throw new _t(`Expected second argument to be of type array or string, but found ${rt(yt(n))} instead.`);if(this.fromIndex){const r=this.fromIndex.evaluate(e);return n.indexOf(t,r)}return n.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class kn{constructor(e,t,n,r,i,o){this.inputType=e,this.type=t,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return t.error("Expected an even number of arguments.");let n,r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);const i={},o=[];for(let a=2;a<e.length-1;a+=2){let s=e[a];const l=e[a+1];Array.isArray(s)||(s=[s]);const c=t.concat(a);if(0===s.length)return c.error("Expected at least one branch label.");for(const e of s){if("number"!=typeof e&&"string"!=typeof e)return c.error("Branch labels must be numbers or strings.");if("number"==typeof e&&Math.abs(e)>Number.MAX_SAFE_INTEGER)return c.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof e&&Math.floor(e)!==e)return c.error("Numeric branch labels must be integer values.");if(n){if(c.checkSubtype(n,yt(e)))return null}else n=yt(e);if(void 0!==i[String(e)])return c.error("Branch labels must be unique.");i[String(e)]=o.length}const u=t.parse(l,a,r);if(!u)return null;r=r||u.type,o.push(u)}const a=t.parse(e[1],1,Je);if(!a)return null;const s=t.parse(e[e.length-1],e.length-1,r);return s?"value"!==a.type.kind&&t.concat(1).checkSubtype(n,a.type)?null:new kn(n,r,a,i,o,s):null}evaluate(e){const t=this.input.evaluate(e);return(yt(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],t=Object.keys(this.cases).sort(),n=[],r={};for(const e of t){const t=r[this.cases[e]];void 0===t?(r[this.cases[e]]=n.length,n.push([this.cases[e],[e]])):n[t][1].push(e)}const i=e=>"number"===this.inputType.kind?Number(e):e;for(const[t,r]of n)e.push(1===r.length?i(r[0]):r.map(i)),e.push(this.outputs[t].serialize());return e.push(this.otherwise.serialize()),e}}class Mn{constructor(e,t,n){this.type=e,this.branches=t,this.otherwise=n}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return t.error("Expected an odd number of arguments.");let n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);const r=[];for(let i=1;i<e.length-1;i+=2){const o=t.parse(e[i],i,Ze);if(!o)return null;const a=t.parse(e[i+1],i+1,n);if(!a)return null;r.push([o,a]),n=n||a.type}const i=t.parse(e[e.length-1],e.length-1,n);return i?new Mn(n,r,i):null}evaluate(e){for(const[t,n]of this.branches)if(t.evaluate(e))return n.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,n]of this.branches)e(t),e(n);e(this.otherwise)}outputDefined(){return this.branches.every((([e,t])=>t.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild((t=>{e.push(t.serialize())})),e}}class Pn{constructor(e,t,n,r){this.type=e,this.input=t,this.beginIndex=n,this.endIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,Je),r=t.parse(e[2],2,$e);if(!n||!r)return null;if(!at(n.type,[nt(Je),Xe,Je]))return t.error(`Expected first argument to be of type array or string, but found ${rt(n.type)} instead`);if(4===e.length){const i=t.parse(e[3],3,$e);return i?new Pn(n.type,n,r,i):null}return new Pn(n.type,n,r)}evaluate(e){const t=this.input.evaluate(e),n=this.beginIndex.evaluate(e);if(!st(t,["string","array"]))throw new _t(`Expected first argument to be of type array or string, but found ${rt(yt(t))} instead.`);if(this.endIndex){const r=this.endIndex.evaluate(e);return t.slice(n,r)}return t.slice(n)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function In(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function On(e,t,n,r){return 0===r.compare(t,n)}function Dn(e,t,n){const r="=="!==e&&"!="!==e;return class i{constructor(e,t,n){this.type=Ze,this.lhs=e,this.rhs=t,this.collator=n,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}static parse(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");const n=e[0];let o=t.parse(e[1],1,Je);if(!o)return null;if(!In(n,o.type))return t.concat(1).error(`"${n}" comparisons are not supported for type '${rt(o.type)}'.`);let a=t.parse(e[2],2,Je);if(!a)return null;if(!In(n,a.type))return t.concat(2).error(`"${n}" comparisons are not supported for type '${rt(a.type)}'.`);if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error(`Cannot compare types '${rt(o.type)}' and '${rt(a.type)}'.`);r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new At(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new At(o.type,[a])));let s=null;if(4===e.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error("Cannot use collator to compare non-string types.");if(s=t.parse(e[3],3,Qe),!s)return null}return new i(o,a,s)}evaluate(i){const o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){const t=yt(o),n=yt(a);if(t.kind!==n.kind||"string"!==t.kind&&"number"!==t.kind)throw new _t(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${t.kind}, ${n.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const e=yt(o),n=yt(a);if("string"!==e.kind||"string"!==n.kind)return t(i,o,a)}return this.collator?n(i,o,a,this.collator.evaluate(i)):t(i,o,a)}eachChild(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}outputDefined(){return!0}serialize(){const t=[e];return this.eachChild((e=>{t.push(e.serialize())})),t}}}const zn=Dn("==",(function(e,t,n){return t===n}),On),Ln=Dn("!=",(function(e,t,n){return t!==n}),(function(e,t,n,r){return!On(0,t,n,r)})),Rn=Dn("<",(function(e,t,n){return t<n}),(function(e,t,n,r){return r.compare(t,n)<0})),Fn=Dn(">",(function(e,t,n){return t>n}),(function(e,t,n,r){return r.compare(t,n)>0})),Un=Dn("<=",(function(e,t,n){return t<=n}),(function(e,t,n,r){return r.compare(t,n)<=0})),Nn=Dn(">=",(function(e,t,n){return t>=n}),(function(e,t,n,r){return r.compare(t,n)>=0}));class jn{constructor(e,t,n,r,i){this.type=Xe,this.number=e,this.locale=t,this.currency=n,this.minFractionDigits=r,this.maxFractionDigits=i}static parse(e,t){if(3!==e.length)return t.error("Expected two arguments.");const n=t.parse(e[1],1,$e);if(!n)return null;const r=e[2];if("object"!=typeof r||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");let i=null;if(r.locale&&(i=t.parse(r.locale,1,Xe),!i))return null;let o=null;if(r.currency&&(o=t.parse(r.currency,1,Xe),!o))return null;let a=null;if(r["min-fraction-digits"]&&(a=t.parse(r["min-fraction-digits"],1,$e),!a))return null;let s=null;return r["max-fraction-digits"]&&(s=t.parse(r["max-fraction-digits"],1,$e),!s)?null:new jn(n,i,o,a,s)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class Vn{constructor(e){this.type=$e,this.input=e}static parse(e,t){if(2!==e.length)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const n=t.parse(e[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?t.error(`Expected argument of type string or array, but found ${rt(n.type)} instead.`):new Vn(n):null}evaluate(e){const t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new _t(`Expected value to be of type string or array, but found ${rt(yt(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild((t=>{e.push(t.serialize())})),e}}const Gn={"==":zn,"!=":Ln,">":Fn,"<":Rn,">=":Nn,"<=":Un,array:At,at:Sn,boolean:At,case:Mn,coalesce:Cn,collator:Mt,format:wt,image:Ct,in:Tn,"index-of":Bn,interpolate:An,"interpolate-hcl":An,"interpolate-lab":An,length:Vn,let:En,literal:bt,match:kn,number:At,"number-format":jn,object:At,slice:Pn,step:tn,string:At,"to-boolean":St,"to-color":St,"to-number":St,"to-string":St,var:Kt,within:$t};function qn(e,[t,n,r,i]){t=t.evaluate(e),n=n.evaluate(e),r=r.evaluate(e);const o=i?i.evaluate(e):1,a=mt(t,n,r,o);if(a)throw new _t(a);return new ut(t/255*o,n/255*o,r/255*o,o)}function Wn(e,t){return e in t}function Hn(e,t){const n=t[e];return void 0===n?null:n}function $n(e){return{type:e}}function Xn(e){return{result:"success",value:e}}function Zn(e){return{result:"error",value:e}}function Yn(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function Kn(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Jn(e){return!!e.expression&&e.expression.interpolated}function Qn(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function er(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function tr(e){return e}function nr(e,t){const n="color"===t.type,r=e.stops&&"object"==typeof e.stops[0][0],i=r||!(r||void 0!==e.property),o=e.type||(Jn(t)?"exponential":"interval");if(n&&((e=je({},e)).stops&&(e.stops=e.stops.map((e=>[e[0],ut.parse(e[1])]))),e.default=ut.parse(e.default?e.default:t.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!xn[e.colorSpace])throw new Error(`Unknown color space: ${e.colorSpace}`);let a,s,l;if("exponential"===o)a=ar;else if("interval"===o)a=or;else if("categorical"===o){a=ir,s=Object.create(null);for(const t of e.stops)s[t[0]]=t[1];l=typeof e.stops[0][0]}else{if("identity"!==o)throw new Error(`Unknown function type "${o}"`);a=sr}if(r){const n={},r=[];for(let t=0;t<e.stops.length;t++){const i=e.stops[t],o=i[0].zoom;void 0===n[o]&&(n[o]={zoom:o,type:e.type,property:e.property,default:e.default,stops:[]},r.push(o)),n[o].stops.push([i[0].value,i[1]])}const i=[];for(const e of r)i.push([n[e].zoom,nr(n[e],t)]);const o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:An.interpolationFactor.bind(void 0,o),zoomStops:i.map((e=>e[0])),evaluate:({zoom:n},r)=>ar({stops:i,base:e.base},t,n).evaluate(n,r)}}if(i){const n="exponential"===o?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:n,interpolationFactor:An.interpolationFactor.bind(void 0,n),zoomStops:e.stops.map((e=>e[0])),evaluate:({zoom:n})=>a(e,t,n,s,l)}}return{kind:"source",evaluate(n,r){const i=r&&r.properties?r.properties[e.property]:void 0;return void 0===i?rr(e.default,t.default):a(e,t,i,s,l)}}}function rr(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function ir(e,t,n,r,i){return rr(typeof n===i?r[n]:void 0,e.default,t.default)}function or(e,t,n){if("number"!==Qn(n))return rr(e.default,t.default);const r=e.stops.length;if(1===r)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[r-1][0])return e.stops[r-1][1];const i=en(e.stops.map((e=>e[0])),n);return e.stops[i][1]}function ar(e,t,n){const r=void 0!==e.base?e.base:1;if("number"!==Qn(n))return rr(e.default,t.default);const i=e.stops.length;if(1===i)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[i-1][0])return e.stops[i-1][1];const o=en(e.stops.map((e=>e[0])),n),a=function(e,t,n,r){const i=r-n,o=e-n;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}(n,r,e.stops[o][0],e.stops[o+1][0]),s=e.stops[o][1],l=e.stops[o+1][1];let c=rn[t.type]||tr;if(e.colorSpace&&"rgb"!==e.colorSpace){const t=xn[e.colorSpace];c=(e,n)=>t.reverse(t.interpolate(t.forward(e),t.forward(n),a))}return"function"==typeof s.evaluate?{evaluate(...e){const t=s.evaluate.apply(void 0,e),n=l.evaluate.apply(void 0,e);if(void 0!==t&&void 0!==n)return c(t,n,a)}}:c(s,l,a)}function sr(e,t,n){return"color"===t.type?n=ut.parse(n):"formatted"===t.type?n=pt.fromString(n.toString()):"resolvedImage"===t.type?n=dt.fromString(n.toString()):Qn(n)===t.type||"enum"===t.type&&t.values[n]||(n=void 0),rr(n,e.default,t.default)}kt.register(Gn,{error:[{kind:"error"},[Xe],(e,[t])=>{throw new _t(t.evaluate(e))}],typeof:[Xe,[Je],(e,[t])=>rt(yt(t.evaluate(e)))],"to-rgba":[nt($e,4),[Ye],(e,[t])=>t.evaluate(e).toArray()],rgb:[Ye,[$e,$e,$e],qn],rgba:[Ye,[$e,$e,$e,$e],qn],has:{type:Ze,overloads:[[[Xe],(e,[t])=>Wn(t.evaluate(e),e.properties())],[[Xe,Ke],(e,[t,n])=>Wn(t.evaluate(e),n.evaluate(e))]]},get:{type:Je,overloads:[[[Xe],(e,[t])=>Hn(t.evaluate(e),e.properties())],[[Xe,Ke],(e,[t,n])=>Hn(t.evaluate(e),n.evaluate(e))]]},"feature-state":[Je,[Xe],(e,[t])=>Hn(t.evaluate(e),e.featureState||{})],properties:[Ke,[],e=>e.properties()],"geometry-type":[Xe,[],e=>e.geometryType()],id:[Je,[],e=>e.id()],zoom:[$e,[],e=>e.globals.zoom],pitch:[$e,[],e=>e.globals.pitch||0],"distance-from-center":[$e,[],e=>e.distanceFromCenter()],"heatmap-density":[$e,[],e=>e.globals.heatmapDensity||0],"line-progress":[$e,[],e=>e.globals.lineProgress||0],"sky-radial-progress":[$e,[],e=>e.globals.skyRadialProgress||0],accumulated:[Je,[],e=>void 0===e.globals.accumulated?null:e.globals.accumulated],"+":[$e,$n($e),(e,t)=>{let n=0;for(const r of t)n+=r.evaluate(e);return n}],"*":[$e,$n($e),(e,t)=>{let n=1;for(const r of t)n*=r.evaluate(e);return n}],"-":{type:$e,overloads:[[[$e,$e],(e,[t,n])=>t.evaluate(e)-n.evaluate(e)],[[$e],(e,[t])=>-t.evaluate(e)]]},"/":[$e,[$e,$e],(e,[t,n])=>t.evaluate(e)/n.evaluate(e)],"%":[$e,[$e,$e],(e,[t,n])=>t.evaluate(e)%n.evaluate(e)],ln2:[$e,[],()=>Math.LN2],pi:[$e,[],()=>Math.PI],e:[$e,[],()=>Math.E],"^":[$e,[$e,$e],(e,[t,n])=>Math.pow(t.evaluate(e),n.evaluate(e))],sqrt:[$e,[$e],(e,[t])=>Math.sqrt(t.evaluate(e))],log10:[$e,[$e],(e,[t])=>Math.log(t.evaluate(e))/Math.LN10],ln:[$e,[$e],(e,[t])=>Math.log(t.evaluate(e))],log2:[$e,[$e],(e,[t])=>Math.log(t.evaluate(e))/Math.LN2],sin:[$e,[$e],(e,[t])=>Math.sin(t.evaluate(e))],cos:[$e,[$e],(e,[t])=>Math.cos(t.evaluate(e))],tan:[$e,[$e],(e,[t])=>Math.tan(t.evaluate(e))],asin:[$e,[$e],(e,[t])=>Math.asin(t.evaluate(e))],acos:[$e,[$e],(e,[t])=>Math.acos(t.evaluate(e))],atan:[$e,[$e],(e,[t])=>Math.atan(t.evaluate(e))],min:[$e,$n($e),(e,t)=>Math.min(...t.map((t=>t.evaluate(e))))],max:[$e,$n($e),(e,t)=>Math.max(...t.map((t=>t.evaluate(e))))],abs:[$e,[$e],(e,[t])=>Math.abs(t.evaluate(e))],round:[$e,[$e],(e,[t])=>{const n=t.evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[$e,[$e],(e,[t])=>Math.floor(t.evaluate(e))],ceil:[$e,[$e],(e,[t])=>Math.ceil(t.evaluate(e))],"filter-==":[Ze,[Xe,Je],(e,[t,n])=>e.properties()[t.value]===n.value],"filter-id-==":[Ze,[Je],(e,[t])=>e.id()===t.value],"filter-type-==":[Ze,[Xe],(e,[t])=>e.geometryType()===t.value],"filter-<":[Ze,[Xe,Je],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r<i}],"filter-id-<":[Ze,[Je],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n<r}],"filter->":[Ze,[Xe,Je],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r>i}],"filter-id->":[Ze,[Je],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n>r}],"filter-<=":[Ze,[Xe,Je],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r<=i}],"filter-id-<=":[Ze,[Je],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n<=r}],"filter->=":[Ze,[Xe,Je],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r>=i}],"filter-id->=":[Ze,[Je],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n>=r}],"filter-has":[Ze,[Je],(e,[t])=>t.value in e.properties()],"filter-has-id":[Ze,[],e=>null!==e.id()&&void 0!==e.id()],"filter-type-in":[Ze,[nt(Xe)],(e,[t])=>t.value.indexOf(e.geometryType())>=0],"filter-id-in":[Ze,[nt(Je)],(e,[t])=>t.value.indexOf(e.id())>=0],"filter-in-small":[Ze,[Xe,nt(Je)],(e,[t,n])=>n.value.indexOf(e.properties()[t.value])>=0],"filter-in-large":[Ze,[Xe,nt(Je)],(e,[t,n])=>function(e,t,n,r){for(;n<=r;){const i=n+r>>1;if(t[i]===e)return!0;t[i]>e?r=i-1:n=i+1}return!1}(e.properties()[t.value],n.value,0,n.value.length-1)],all:{type:Ze,overloads:[[[Ze,Ze],(e,[t,n])=>t.evaluate(e)&&n.evaluate(e)],[$n(Ze),(e,t)=>{for(const n of t)if(!n.evaluate(e))return!1;return!0}]]},any:{type:Ze,overloads:[[[Ze,Ze],(e,[t,n])=>t.evaluate(e)||n.evaluate(e)],[$n(Ze),(e,t)=>{for(const n of t)if(n.evaluate(e))return!0;return!1}]]},"!":[Ze,[Ze],(e,[t])=>!t.evaluate(e)],"is-supported-script":[Ze,[Xe],(e,[t])=>{const n=e.globals&&e.globals.isSupportedScript;return!n||n(t.evaluate(e))}],upcase:[Xe,[Xe],(e,[t])=>t.evaluate(e).toUpperCase()],downcase:[Xe,[Xe],(e,[t])=>t.evaluate(e).toLowerCase()],concat:[Xe,$n(Je),(e,t)=>t.map((t=>vt(t.evaluate(e)))).join("")],"resolved-locale":[Xe,[Qe],(e,[t])=>t.evaluate(e).resolvedLocale()]});class lr{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Bt,this._defaultValue=t?function(e){return"color"===e.type&&er(e.default)?new ut(0,0,0,0):"color"===e.type?ut.parse(e.default)||null:void 0===e.default?null:e.default}(t):null,this._enumValues=t&&"enum"===t.type?t.values:null}evaluateWithoutErrorHandling(e,t,n,r,i,o,a,s){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this._evaluator.canonical=r||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null,this.expression.evaluate(this._evaluator)}evaluate(e,t,n,r,i,o,a,s){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null;try{const e=this.expression.evaluate(this._evaluator);if(null==e||"number"==typeof e&&e!=e)return this._defaultValue;if(this._enumValues&&!(e in this._enumValues))throw new _t(`Expected value to be one of ${Object.keys(this._enumValues).map((e=>JSON.stringify(e))).join(", ")}, but found ${JSON.stringify(e)} instead.`);return e}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}function cr(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in Gn}function ur(e,t){const n=new Jt(Gn,[],t?function(e){const t={color:Ye,string:Xe,number:$e,enum:Xe,boolean:Ze,formatted:et,resolvedImage:tt};return"array"===e.type?nt(t[e.value]||Je,e.length):t[e.type]}(t):void 0),r=n.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return r?Xn(new lr(r,t)):Zn(n.errors)}class hr{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!Zt(t.expression)}evaluateWithoutErrorHandling(e,t,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,o)}evaluate(e,t,n,r,i,o){return this._styleExpression.evaluate(e,t,n,r,i,o)}}class fr{constructor(e,t,n,r){this.kind=e,this.zoomStops=n,this._styleExpression=t,this.isStateDependent="camera"!==e&&!Zt(t.expression),this.interpolationType=r}evaluateWithoutErrorHandling(e,t,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,o)}evaluate(e,t,n,r,i,o){return this._styleExpression.evaluate(e,t,n,r,i,o)}interpolationFactor(e,t,n){return this.interpolationType?An.interpolationFactor(this.interpolationType,e,t,n):0}}function pr(e,t){if("error"===(e=ur(e,t)).result)return e;const n=e.value.expression,r=Xt(n);if(!r&&!Yn(t))return Zn([new qe("","data expressions not supported")]);const i=Yt(n,["zoom","pitch","distance-from-center"]);if(!i&&!Kn(t))return Zn([new qe("","zoom expressions not supported")]);const o=mr(n);return o||i?o instanceof qe?Zn([o]):o instanceof An&&!Jn(t)?Zn([new qe("",'"interpolate" expressions cannot be used with this property')]):Xn(o?new fr(r?"camera":"composite",e.value,o.labels,o instanceof An?o.interpolation:void 0):new hr(r?"constant":"source",e.value)):Zn([new qe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class dr{constructor(e,t){this._parameters=e,this._specification=t,je(this,nr(this._parameters,this._specification))}static deserialize(e){return new dr(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function mr(e){let t=null;if(e instanceof En)t=mr(e.result);else if(e instanceof Cn){for(const n of e.args)if(t=mr(n),t)break}else(e instanceof tn||e instanceof An)&&e.input instanceof kt&&"zoom"===e.input.name&&(t=e);return t instanceof qe||e.eachChild((e=>{const n=mr(e);n instanceof qe?t=n:!t&&n?t=new qe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&n&&t!==n&&(t=new qe("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),t}class gr{constructor(e,t,n,r){this.message=(e?`${e}: `:"")+n,r&&(this.identifier=r),null!=t&&t.__line__&&(this.line=t.__line__)}}function yr(e){const t=e.key,n=e.value,r=e.valueSpec||{},i=e.objectElementValidators||{},o=e.style,a=e.styleSpec;let s=[];const l=Qn(n);if("object"!==l)return[new gr(t,n,`object expected, ${l} found`)];for(const e in n){const l=e.split(".")[0],c=r[l]||r["*"];let u;i[l]?u=i[l]:r[l]?u=Yr:i["*"]?u=i["*"]:r["*"]&&(u=Yr),u?s=s.concat(u({key:(t?`${t}.`:t)+e,value:n[e],valueSpec:c,style:o,styleSpec:a,object:n,objectKey:e},n)):s.push(new gr(t,n[e],`unknown property "${e}"`))}for(const e in r)i[e]||r[e].required&&void 0===r[e].default&&void 0===n[e]&&s.push(new gr(t,n,`missing required property "${e}"`));return s}function vr(e){const t=e.value,n=e.valueSpec,r=e.style,i=e.styleSpec,o=e.key,a=e.arrayElementValidator||Yr;if("array"!==Qn(t))return[new gr(o,t,`array expected, ${Qn(t)} found`)];if(n.length&&t.length!==n.length)return[new gr(o,t,`array length ${n.length} expected, length ${t.length} found`)];if(n["min-length"]&&t.length<n["min-length"])return[new gr(o,t,`array length at least ${n["min-length"]} expected, length ${t.length} found`)];let s={type:n.value,values:n.values,minimum:n.minimum,maximum:n.maximum,function:void 0};i.$version<7&&(s.function=n.function),"object"===Qn(n.value)&&(s=n.value);let l=[];for(let e=0;e<t.length;e++)l=l.concat(a({array:t,arrayIndex:e,value:t[e],valueSpec:s,style:r,styleSpec:i,key:`${o}[${e}]`}));return l}function br(e){const t=e.key,n=e.value,r=e.valueSpec;let i=Qn(n);if("number"===i&&n!=n&&(i="NaN"),"number"!==i)return[new gr(t,n,`number expected, ${i} found`)];if("minimum"in r){let i=r.minimum;if("array"===Qn(r.minimum)&&(i=r.minimum[e.arrayIndex]),n<i)return[new gr(t,n,`${n} is less than the minimum value ${i}`)]}if("maximum"in r){let i=r.maximum;if("array"===Qn(r.maximum)&&(i=r.maximum[e.arrayIndex]),n>i)return[new gr(t,n,`${n} is greater than the maximum value ${i}`)]}return[]}function _r(e){const t=e.valueSpec,n=Ve(e.value.type);let r,i,o,a={};const s="categorical"!==n&&void 0===e.value.property,l=!s,c="array"===Qn(e.value.stops)&&"array"===Qn(e.value.stops[0])&&"object"===Qn(e.value.stops[0][0]),u=yr({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===n)return[new gr(e.key,e.value,'identity function may not have a "stops" property')];let t=[];const r=e.value;return t=t.concat(vr({key:e.key,value:r,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:h})),"array"===Qn(r)&&0===r.length&&t.push(new gr(e.key,r,"array must have at least one stop")),t},default:function(e){return Yr({key:e.key,value:e.value,valueSpec:t,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===n&&s&&u.push(new gr(e.key,e.value,'missing required property "property"')),"identity"===n||e.value.stops||u.push(new gr(e.key,e.value,'missing required property "stops"')),"exponential"===n&&e.valueSpec.expression&&!Jn(e.valueSpec)&&u.push(new gr(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!Yn(e.valueSpec)?u.push(new gr(e.key,e.value,"property functions not supported")):s&&!Kn(e.valueSpec)&&u.push(new gr(e.key,e.value,"zoom functions not supported"))),"categorical"!==n&&!c||void 0!==e.value.property||u.push(new gr(e.key,e.value,'"property" property is required')),u;function h(e){let n=[];const r=e.value,s=e.key;if("array"!==Qn(r))return[new gr(s,r,`array expected, ${Qn(r)} found`)];if(2!==r.length)return[new gr(s,r,`array length 2 expected, length ${r.length} found`)];if(c){if("object"!==Qn(r[0]))return[new gr(s,r,`object expected, ${Qn(r[0])} found`)];if(void 0===r[0].zoom)return[new gr(s,r,"object stop key must have zoom")];if(void 0===r[0].value)return[new gr(s,r,"object stop key must have value")];const t=Ve(r[0].zoom);if("number"!=typeof t)return[new gr(s,r[0].zoom,"stop zoom values must be numbers")];if(o&&o>t)return[new gr(s,r[0].zoom,"stop zoom values must appear in ascending order")];t!==o&&(o=t,i=void 0,a={}),n=n.concat(yr({key:`${s}[0]`,value:r[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:br,value:f}}))}else n=n.concat(f({key:`${s}[0]`,value:r[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},r));return cr(Ge(r[1]))?n.concat([new gr(`${s}[1]`,r[1],"expressions are not allowed in function stops.")]):n.concat(Yr({key:`${s}[1]`,value:r[1],valueSpec:t,style:e.style,styleSpec:e.styleSpec}))}function f(e,o){const s=Qn(e.value),l=Ve(e.value),c=null!==e.value?e.value:o;if(r){if(s!==r)return[new gr(e.key,c,`${s} stop domain type must match previous stop domain type ${r}`)]}else r=s;if("number"!==s&&"string"!==s&&"boolean"!==s&&"number"!=typeof l&&"string"!=typeof l&&"boolean"!=typeof l)return[new gr(e.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==n){let r=`number expected, ${s} found`;return Yn(t)&&void 0===n&&(r+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new gr(e.key,c,r)]}return"categorical"!==n||"number"!==s||"number"==typeof l&&isFinite(l)&&Math.floor(l)===l?"categorical"!==n&&"number"===s&&"number"==typeof l&&"number"==typeof i&&void 0!==i&&l<i?[new gr(e.key,c,"stop domain values must appear in ascending order")]:(i=l,"categorical"===n&&l in a?[new gr(e.key,c,"stop domain values must be unique")]:(a[l]=!0,[])):[new gr(e.key,c,`integer expected, found ${String(l)}`)]}}function xr(e){const t=("property"===e.expressionContext?pr:ur)(Ge(e.value),e.valueSpec);if("error"===t.result)return t.value.map((t=>new gr(`${e.key}${t.key}`,e.value,t.message)));const n=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!n.outputDefined())return[new gr(e.key,e.value,`Invalid data expression for "${e.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===e.expressionContext&&"layout"===e.propertyType&&!Zt(n))return[new gr(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext)return Ar(n,e);if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!Yt(n,["zoom","feature-state"]))return[new gr(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!Xt(n))return[new gr(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ar(e,t){const n=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(t.valueSpec&&t.valueSpec.expression)for(const e of t.valueSpec.expression.parameters)n.delete(e);if(0===n.size)return[];const r=[];return e instanceof kt&&n.has(e.name)?[new gr(t.key,t.value,`["${e.name}"] expression is not supported in a filter for a ${t.object.type} layer with id: ${t.object.id}`)]:(e.eachChild((e=>{r.push(...Ar(e,t))})),r)}function wr(e){const t=e.key,n=e.value,r=e.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(Ve(n))&&i.push(new gr(t,n,`expected one of [${r.values.join(", ")}], ${JSON.stringify(n)} found`)):-1===Object.keys(r.values).indexOf(Ve(n))&&i.push(new gr(t,n,`expected one of [${Object.keys(r.values).join(", ")}], ${JSON.stringify(n)} found`)),i}function Cr(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!Cr(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}function Er(e,t="fill"){if(null==e)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Cr(e)||(e=Ir(e));const n=e;let r=!0;try{r=function(e){if(!Br(e))return e;let t=Ge(e);return Tr(t),t=Sr(t),t}(n)}catch(e){console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(n,null,2)}\n        `)}const i=Ne[`filter_${t}`],o=ur(r,i);let a=null;if("error"===o.result)throw new Error(o.value.map((e=>`${e.key}: ${e.message}`)).join(", "));a=(e,t,n)=>o.value.evaluate(e,t,{},n);let s=null,l=null;if(r!==n){const e=ur(n,i);if("error"===e.result)throw new Error(e.value.map((e=>`${e.key}: ${e.message}`)).join(", "));s=(t,n,r,i,o)=>e.value.evaluate(t,n,{},r,void 0,void 0,i,o),l=!Xt(e.value.expression)}return a=a,{filter:a,dynamicFilter:s||void 0,needGeometry:Pr(r),needFeature:!!l}}function Sr(e){if(!Array.isArray(e))return e;const t=function(e){if(kr.has(e[0]))for(let t=1;t<e.length;t++)if(Br(e[t]))return!0;return e}(e);return!0===t?t:t.map((e=>Sr(e)))}function Tr(e){let t=!1;const n=[];if("case"===e[0]){for(let r=1;r<e.length-1;r+=2)t=t||Br(e[r]),n.push(e[r+1]);n.push(e[e.length-1])}else if("match"===e[0]){t=t||Br(e[1]);for(let t=2;t<e.length-1;t+=2)n.push(e[t+1]);n.push(e[e.length-1])}else if("step"===e[0]){t=t||Br(e[1]);for(let t=1;t<e.length-1;t+=2)n.push(e[t+1])}t&&(e.length=0,e.push("any",...n));for(let t=1;t<e.length;t++)Tr(e[t])}function Br(e){if(!Array.isArray(e))return!1;if("pitch"===(t=e[0])||"distance-from-center"===t)return!0;var t;for(let t=1;t<e.length;t++)if(Br(e[t]))return!0;return!1}const kr=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Mr(e,t){return e<t?-1:e>t?1:0}function Pr(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(let t=1;t<e.length;t++)if(Pr(e[t]))return!0;return!1}function Ir(e){if(!e)return!0;const t=e[0];return e.length<=1?"any"!==t:"=="===t?Or(e[1],e[2],"=="):"!="===t?Lr(Or(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?Or(e[1],e[2],t):"any"===t?(n=e.slice(1),["any"].concat(n.map(Ir))):"all"===t?["all"].concat(e.slice(1).map(Ir)):"none"===t?["all"].concat(e.slice(1).map(Ir).map(Lr)):"in"===t?Dr(e[1],e.slice(2)):"!in"===t?Lr(Dr(e[1],e.slice(2))):"has"===t?zr(e[1]):"!has"===t?Lr(zr(e[1])):"within"!==t||e;var n}function Or(e,t,n){switch(e){case"$type":return[`filter-type-${n}`,t];case"$id":return[`filter-id-${n}`,t];default:return[`filter-${n}`,e,t]}}function Dr(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((e=>typeof e!=typeof t[0]))?["filter-in-large",e,["literal",t.sort(Mr)]]:["filter-in-small",e,["literal",t]]}}function zr(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Lr(e){return["!",e]}function Rr(e){return Cr(Ge(e.value))?xr(je({},e,{expressionContext:"filter",valueSpec:e.styleSpec[`filter_${e.layerType||"fill"}`]})):Fr(e)}function Fr(e){const t=e.value,n=e.key;if("array"!==Qn(t))return[new gr(n,t,`array expected, ${Qn(t)} found`)];const r=e.styleSpec;let i,o=[];if(t.length<1)return[new gr(n,t,"filter array must have at least 1 element")];switch(o=o.concat(wr({key:`${n}[0]`,value:t[0],valueSpec:r.filter_operator,style:e.style,styleSpec:e.styleSpec})),Ve(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===Ve(t[1])&&o.push(new gr(n,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":3!==t.length&&o.push(new gr(n,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(i=Qn(t[1]),"string"!==i&&o.push(new gr(`${n}[1]`,t[1],`string expected, ${i} found`)));for(let a=2;a<t.length;a++)i=Qn(t[a]),"$type"===Ve(t[1])?o=o.concat(wr({key:`${n}[${a}]`,value:t[a],valueSpec:r.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&o.push(new gr(`${n}[${a}]`,t[a],`string, number, or boolean expected, ${i} found`));break;case"any":case"all":case"none":for(let r=1;r<t.length;r++)o=o.concat(Fr({key:`${n}[${r}]`,value:t[r],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=Qn(t[1]),2!==t.length?o.push(new gr(n,t,`filter array for "${t[0]}" operator must have 2 elements`)):"string"!==i&&o.push(new gr(`${n}[1]`,t[1],`string expected, ${i} found`));break;case"within":i=Qn(t[1]),2!==t.length?o.push(new gr(n,t,`filter array for "${t[0]}" operator must have 2 elements`)):"object"!==i&&o.push(new gr(`${n}[1]`,t[1],`object expected, ${i} found`))}return o}function Ur(e,t){const n=e.key,r=e.style,i=e.styleSpec,o=e.value,a=e.objectKey,s=i[`${t}_${e.layerType}`];if(!s)return[];const l=a.match(/^(.*)-transition$/);if("paint"===t&&l&&s[l[1]]&&s[l[1]].transition)return Yr({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});const c=e.valueSpec||s[a];if(!c)return[new gr(n,o,`unknown property "${a}"`)];let u;if("string"===Qn(o)&&Yn(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(o)))return[new gr(n,o,`"${a}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(u[1])} }\`.`)];const h=[];return"symbol"===e.layerType&&("text-field"===a&&r&&!r.glyphs&&h.push(new gr(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&er(Ge(o))&&"identity"===Ve(o.type)&&h.push(new gr(n,o,'"text-font" does not support identity functions'))),h.concat(Yr({key:e.key,value:o,valueSpec:c,style:r,styleSpec:i,expressionContext:"property",propertyType:t,propertyKey:a}))}function Nr(e){return Ur(e,"paint")}function jr(e){return Ur(e,"layout")}function Vr(e){let t=[];const n=e.value,r=e.key,i=e.style,o=e.styleSpec;n.type||n.ref||t.push(new gr(r,n,'either "type" or "ref" is required'));let a=Ve(n.type);const s=Ve(n.ref);if(n.id){const o=Ve(n.id);for(let a=0;a<e.arrayIndex;a++){const e=i.layers[a];Ve(e.id)===o&&t.push(new gr(r,n.id,`duplicate layer id "${n.id}", previously used at line ${e.id.__line__}`))}}if("ref"in n){let e;["type","source","source-layer","filter","layout"].forEach((e=>{e in n&&t.push(new gr(r,n[e],`"${e}" is prohibited for ref layers`))})),i.layers.forEach((t=>{Ve(t.id)===s&&(e=t)})),e?e.ref?t.push(new gr(r,n.ref,"ref cannot reference another ref layer")):a=Ve(e.type):"string"==typeof s&&t.push(new gr(r,n.ref,`ref layer "${s}" not found`))}else if("background"!==a&&"sky"!==a)if(n.source){const e=i.sources&&i.sources[n.source],o=e&&Ve(e.type);e?"vector"===o&&"raster"===a?t.push(new gr(r,n.source,`layer "${n.id}" requires a raster source`)):"raster"===o&&"raster"!==a?t.push(new gr(r,n.source,`layer "${n.id}" requires a vector source`)):"vector"!==o||n["source-layer"]?"raster-dem"===o&&"hillshade"!==a?t.push(new gr(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==a||!n.paint||!n.paint["line-gradient"]||"geojson"===o&&e.lineMetrics||t.push(new gr(r,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new gr(r,n,`layer "${n.id}" must specify a "source-layer"`)):t.push(new gr(r,n.source,`source "${n.source}" not found`))}else t.push(new gr(r,n,'missing required property "source"'));return t=t.concat(yr({key:r,value:n,valueSpec:o.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Yr({key:`${r}.type`,value:n.type,valueSpec:o.layer.type,style:e.style,styleSpec:e.styleSpec,object:n,objectKey:"type"}),filter:e=>Rr(je({layerType:a},e)),layout:e=>yr({layer:n,key:e.key,value:e.value,valueSpec:{},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>jr(je({layerType:a},e))}}),paint:e=>yr({layer:n,key:e.key,value:e.value,valueSpec:{},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>Nr(je({layerType:a},e))}})}})),t}function Gr(e){const t=e.value,n=e.key,r=Qn(t);return"string"!==r?[new gr(n,t,`string expected, ${r} found`)]:[]}const qr={promoteId:function({key:e,value:t}){if("string"===Qn(t))return Gr({key:e,value:t});{const n=[];for(const r in t)n.push(...Gr({key:`${e}.${r}`,value:t[r]}));return n}}};function Wr(e){const t=e.value,n=e.key,r=e.styleSpec,i=e.style;if(!t.type)return[new gr(n,t,'"type" is required')];const o=Ve(t.type);let a;switch(o){case"vector":case"raster":case"raster-dem":return a=yr({key:n,value:t,valueSpec:r[`source_${o.replace("-","_")}`],style:e.style,styleSpec:r,objectElementValidators:qr}),a;case"geojson":if(a=yr({key:n,value:t,valueSpec:r.source_geojson,style:i,styleSpec:r,objectElementValidators:qr}),t.cluster)for(const e in t.clusterProperties){const[r,i]=t.clusterProperties[e],o="string"==typeof r?[r,["accumulated"],["get",e]]:r;a.push(...xr({key:`${n}.${e}.map`,value:i,expressionContext:"cluster-map"})),a.push(...xr({key:`${n}.${e}.reduce`,value:o,expressionContext:"cluster-reduce"}))}return a;case"video":return yr({key:n,value:t,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return yr({key:n,value:t,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new gr(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return wr({key:`${n}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}}function Hr(e){const t=e.value,n=e.styleSpec,r=n.light,i=e.style;let o=[];const a=Qn(t);if(void 0===t)return o;if("object"!==a)return o=o.concat([new gr("light",t,`object expected, ${a} found`)]),o;for(const e in t){const a=e.match(/^(.*)-transition$/);o=o.concat(a&&r[a[1]]&&r[a[1]].transition?Yr({key:e,value:t[e],valueSpec:n.transition,style:i,styleSpec:n}):r[e]?Yr({key:e,value:t[e],valueSpec:r[e],style:i,styleSpec:n}):[new gr(e,t[e],`unknown property "${e}"`)])}return o}function $r(e){const t=e.value,n=e.key,r=e.style,i=e.styleSpec,o=i.terrain;let a=[];const s=Qn(t);if(void 0===t)return a;if("object"!==s)return a=a.concat([new gr("terrain",t,`object expected, ${s} found`)]),a;for(const e in t){const n=e.match(/^(.*)-transition$/);a=a.concat(n&&o[n[1]]&&o[n[1]].transition?Yr({key:e,value:t[e],valueSpec:i.transition,style:r,styleSpec:i}):o[e]?Yr({key:e,value:t[e],valueSpec:o[e],style:r,styleSpec:i}):[new gr(e,t[e],`unknown property "${e}"`)])}if(t.source){const e=r.sources&&r.sources[t.source],i=e&&Ve(e.type);e?"raster-dem"!==i&&a.push(new gr(n,t.source,`terrain cannot be used with a source of type ${String(i)}, it only be used with a "raster-dem" source type`)):a.push(new gr(n,t.source,`source "${t.source}" not found`))}else a.push(new gr(n,t,'terrain is missing required property "source"'));return a}function Xr(e){const t=e.value,n=e.style,r=e.styleSpec,i=r.fog;let o=[];const a=Qn(t);if(void 0===t)return o;if("object"!==a)return o=o.concat([new gr("fog",t,`object expected, ${a} found`)]),o;for(const e in t){const a=e.match(/^(.*)-transition$/);o=o.concat(a&&i[a[1]]&&i[a[1]].transition?Yr({key:e,value:t[e],valueSpec:r.transition,style:n,styleSpec:r}):i[e]?Yr({key:e,value:t[e],valueSpec:i[e],style:n,styleSpec:r}):[new gr(e,t[e],`unknown property "${e}"`)])}return o}const Zr={"*":()=>[],array:vr,boolean:function(e){const t=e.value,n=e.key,r=Qn(t);return"boolean"!==r?[new gr(n,t,`boolean expected, ${r} found`)]:[]},number:br,color:function(e){const t=e.key,n=e.value,r=Qn(n);return"string"!==r?[new gr(t,n,`color expected, ${r} found`)]:null===ct.parseCSSColor(n)?[new gr(t,n,`color expected, "${n}" found`)]:[]},enum:wr,filter:Rr,function:_r,layer:Vr,object:yr,source:Wr,light:Hr,terrain:$r,fog:Xr,string:Gr,formatted:function(e){return 0===Gr(e).length?[]:xr(e)},resolvedImage:function(e){return 0===Gr(e).length?[]:xr(e)},projection:function(e){const t=e.value,n=e.styleSpec,r=n.projection,i=e.style;let o=[];const a=Qn(t);if("object"===a)for(const e in t)o=o.concat(Yr({key:e,value:t[e],valueSpec:r[e],style:i,styleSpec:n}));else"string"!==a&&(o=o.concat([new gr("projection",t,`object or string expected, ${a} found`)]));return o}};function Yr(e){const t=e.value,n=e.valueSpec,r=e.styleSpec;return n.expression&&er(Ve(t))?_r(e):n.expression&&cr(Ge(t))?xr(e):n.type&&Zr[n.type]?Zr[n.type](e):yr(je({},e,{valueSpec:n.type?r[n.type]:n}))}function Kr(e){const t=e.value,n=e.key,r=Gr(e);return r.length||(-1===t.indexOf("{fontstack}")&&r.push(new gr(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&r.push(new gr(n,t,'"glyphs" url must include a "{range}" token'))),r}function Jr(e,t=Ne){return ti(Yr({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:Kr,"*":()=>[]}}))}const Qr=e=>ti(Nr(e)),ei=e=>ti(jr(e));function ti(e){return e.slice().sort(((e,t)=>e.line&&t.line?e.line-t.line:0))}function ni(e,t){let n=!1;if(t&&t.length)for(const r of t)e.fire(new Fe(new Error(r.message))),n=!0;return n}var ri=ii;function ii(e,t,n){var r=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var i=new Int32Array(this.arrayBuffer);e=i[0],this.d=(t=i[1])+2*(n=i[2]);for(var o=0;o<this.d*this.d;o++){var a=i[3+o],s=i[3+o+1];r.push(a===s?null:i.subarray(a,s))}var l=i[3+r.length+1];this.keys=i.subarray(i[3+r.length],l),this.bboxes=i.subarray(l),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var c=0;c<this.d*this.d;c++)r.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;var u=n/t*e;this.min=-u,this.max=e+u}ii.prototype.insert=function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},ii.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ii.prototype._insertCell=function(e,t,n,r,i,o){this.cells[i].push(o)},ii.prototype.query=function(e,t,n,r,i){var o=this.min,a=this.max;if(e<=o&&t<=o&&a<=n&&a<=r&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(e,t,n,r,this._queryCell,s,{},i),s},ii.prototype._queryCell=function(e,t,n,r,i,o,a,s){var l=this.cells[i];if(null!==l)for(var c=this.keys,u=this.bboxes,h=0;h<l.length;h++){var f=l[h];if(void 0===a[f]){var p=4*f;(s?s(u[p+0],u[p+1],u[p+2],u[p+3]):e<=u[p+2]&&t<=u[p+3]&&n>=u[p+0]&&r>=u[p+1])?(a[f]=!0,o.push(c[f])):a[f]=!1}}},ii.prototype._forEachCell=function(e,t,n,r,i,o,a,s){for(var l=this._convertToCellCoord(e),c=this._convertToCellCoord(t),u=this._convertToCellCoord(n),h=this._convertToCellCoord(r),f=l;f<=u;f++)for(var p=c;p<=h;p++){var d=this.d*p+f;if((!s||s(this._convertFromCellCoord(f),this._convertFromCellCoord(p),this._convertFromCellCoord(f+1),this._convertFromCellCoord(p+1)))&&i.call(this,e,t,n,r,d,o,a,s))return}},ii.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},ii.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},ii.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(t+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=t,a=0;a<e.length;a++){var s=e[a];i[3+a]=o,i.set(s,o),o+=s.length}return i[3+e.length]=o,i.set(this.keys,o),i[3+e.length+1]=o+=this.keys.length,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};const oi={};function ai(e,t={}){oi[e.name]={klass:e,omit:t.omit||[]}}ai(Object),ri.serialize=function(e,t){const n=e.toArrayBuffer();return t&&t.push(n),{buffer:n}},ri.deserialize=function(e){return new ri(e.buffer)},Object.defineProperty(ri,"name",{value:"Grid"}),ai(ri),ai(ut),ai(Error),ai(Ce),ai(dt),ai(dr),ai(lr,{omit:["_evaluator"]}),ai(fr),ai(hr),ai(kt,{omit:["_evaluate"]});for(const e in Gn)oi[Gn[e].name]||ai(Gn[e]);function si(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function li(e){return a.ImageBitmap&&e instanceof a.ImageBitmap}function ci(e,t){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(si(e)||li(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){const n=e;return t&&t.push(n.buffer),n}if(e instanceof a.ImageData)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){const n=[];for(const r of e)n.push(ci(r,t));return n}if("object"==typeof e){const n=e.constructor,r=n.name;if(!oi[r])throw new Error(`can't serialize object of unregistered class ${r}`);const i=n.serialize?n.serialize(e,t):{};if(!n.serialize){for(const n in e)e.hasOwnProperty(n)&&(oi[r].omit.indexOf(n)>=0||(i[n]=ci(e[n],t)));e instanceof Error&&(i.message=e.message)}if(i.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==r&&(i.$name=r),i}throw new Error("can't serialize object of type "+typeof e)}function ui(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||si(e)||li(e)||ArrayBuffer.isView(e)||e instanceof a.ImageData)return e;if(Array.isArray(e))return e.map(ui);if("object"==typeof e){const t=e.$name||"Object",{klass:n}=oi[t];if(!n)throw new Error(`can't deserialize unregistered class ${t}`);if(n.deserialize)return n.deserialize(e);const r=Object.create(n.prototype);for(const t of Object.keys(e))"$name"!==t&&(r[t]=ui(e[t]));return r}throw new Error("can't deserialize object of type "+typeof e)}class hi{constructor(){this.first=!0}update(e,t){const n=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=n,!0))}}const fi=e=>e>=1536&&e<=1791,pi=e=>e>=1872&&e<=1919,di=e=>e>=2208&&e<=2303,mi=e=>e>=11904&&e<=12031,gi=e=>e>=12032&&e<=12255,yi=e=>e>=12272&&e<=12287,vi=e=>e>=12288&&e<=12351,bi=e=>e>=12352&&e<=12447,_i=e=>e>=12448&&e<=12543,xi=e=>e>=12544&&e<=12591,Ai=e=>e>=12704&&e<=12735,wi=e=>e>=12736&&e<=12783,Ci=e=>e>=12784&&e<=12799,Ei=e=>e>=12800&&e<=13055,Si=e=>e>=13056&&e<=13311,Ti=e=>e>=13312&&e<=19903,Bi=e=>e>=19968&&e<=40959,ki=e=>e>=40960&&e<=42127,Mi=e=>e>=42128&&e<=42191,Pi=e=>e>=44032&&e<=55215,Ii=e=>e>=63744&&e<=64255,Oi=e=>e>=64336&&e<=65023,Di=e=>e>=65040&&e<=65055,zi=e=>e>=65072&&e<=65103,Li=e=>e>=65104&&e<=65135,Ri=e=>e>=65136&&e<=65279,Fi=e=>e>=65280&&e<=65519;function Ui(e){for(const t of e)if(Vi(t.charCodeAt(0)))return!0;return!1}function Ni(e){for(const t of e)if(!ji(t.charCodeAt(0)))return!1;return!0}function ji(e){return!(fi(e)||pi(e)||di(e)||Oi(e)||Ri(e))}function Vi(e){return!(746!==e&&747!==e&&(e<4352||!(Ai(e)||xi(e)||zi(e)&&!(e>=65097&&e<=65103)||Ii(e)||Si(e)||mi(e)||wi(e)||!(!vi(e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||Ti(e)||Bi(e)||Ei(e)||(e=>e>=12592&&e<=12687)(e)||(e=>e>=43360&&e<=43391)(e)||(e=>e>=55216&&e<=55295)(e)||(e=>e>=4352&&e<=4607)(e)||Pi(e)||bi(e)||yi(e)||(e=>e>=12688&&e<=12703)(e)||gi(e)||Ci(e)||_i(e)&&12540!==e||!(!Fi(e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!Li(e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||(e=>e>=5120&&e<=5759)(e)||(e=>e>=6320&&e<=6399)(e)||Di(e)||(e=>e>=19904&&e<=19967)(e)||ki(e)||Mi(e))))}function Gi(e){return!(Vi(e)||function(e){return!!((e=>e>=128&&e<=255)(e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||(e=>e>=8192&&e<=8303)(e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||(e=>e>=8448&&e<=8527)(e)||(e=>e>=8528&&e<=8591)(e)||(e=>e>=8960&&e<=9215)(e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||(e=>e>=9216&&e<=9279)(e)&&9251!==e||(e=>e>=9280&&e<=9311)(e)||(e=>e>=9312&&e<=9471)(e)||(e=>e>=9632&&e<=9727)(e)||(e=>e>=9728&&e<=9983)(e)&&!(e>=9754&&e<=9759)||(e=>e>=11008&&e<=11263)(e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||vi(e)||_i(e)||(e=>e>=57344&&e<=63743)(e)||zi(e)||Li(e)||Fi(e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function qi(e){return e>=1424&&e<=2303||Oi(e)||Ri(e)}function Wi(e,t){return!(!t&&qi(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||(e=>e>=6016&&e<=6143)(e))}function Hi(e){for(const t of e)if(qi(t.charCodeAt(0)))return!0;return!1}const $i="deferred",Xi="loading",Zi="loaded";let Yi=null,Ki="unavailable",Ji=null;const Qi=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(Ki="error"),Yi&&Yi(e)};function eo(){to.fire(new Re("pluginStateChange",{pluginStatus:Ki,pluginURL:Ji}))}const to=new Ue,no=function(){return Ki},ro=function(){if(Ki!==$i||!Ji)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ki=Xi,eo(),Ji&&Te({url:Ji},(e=>{e?Qi(e):(Ki=Zi,eo())}))},io={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Ki===Zi||null!=io.applyArabicShaping,isLoading:()=>Ki===Xi,setState(e){Ki=e.pluginStatus,Ji=e.pluginURL},isParsed:()=>null!=io.applyArabicShaping&&null!=io.processBidirectionalText&&null!=io.processStyledBidirectionalText,getPluginURL:()=>Ji};class oo{constructor(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition,this.pitch=t.pitch):(this.now=0,this.fadeDuration=0,this.zoomHistory=new hi,this.transition={},this.pitch=0)}isSupportedScript(e){return function(e,t){for(const n of e)if(!Wi(n.charCodeAt(0),t))return!1;return!0}(e,io.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,t=e-Math.floor(e),n=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*t}}}class ao{constructor(e,t){this.property=e,this.value=t,this.expression=function(e,t){if(er(e))return new dr(e,t);if(cr(e)){const n=pr(e,t);if("error"===n.result)throw new Error(n.value.map((e=>`${e.key}: ${e.message}`)).join(", "));return n.value}{let n=e;return"string"==typeof e&&"color"===t.type&&(n=ut.parse(e)),{kind:"constant",evaluate:()=>n}}}(void 0===t?e.specification.default:t,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,t,n){return this.property.possiblyEvaluate(this,e,t,n)}}class so{constructor(e){this.property=e,this.value=new ao(e,void 0)}transitioned(e,t){return new co(this.property,this.value,t,_({},e.transition,this.transition),e.now)}untransitioned(){return new co(this.property,this.value,null,{},0)}}class lo{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return M(this._values[e].value.value)}setValue(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new so(this._values[e].property)),this._values[e].value=new ao(this._values[e].property,null===t?void 0:M(t))}getTransition(e){return M(this._values[e].transition)}setTransition(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new so(this._values[e].property)),this._values[e].transition=M(t)||void 0}serialize(){const e={};for(const t of Object.keys(this._values)){const n=this.getValue(t);void 0!==n&&(e[t]=n);const r=this.getTransition(t);void 0!==r&&(e[`${t}-transition`]=r)}return e}transitioned(e,t){const n=new uo(this._properties);for(const r of Object.keys(this._values))n._values[r]=this._values[r].transitioned(e,t._values[r]);return n}untransitioned(){const e=new uo(this._properties);for(const t of Object.keys(this._values))e._values[t]=this._values[t].untransitioned();return e}}class co{constructor(e,t,n,r,i){const o=r.delay||0,a=r.duration||0;i=i||0,this.property=e,this.value=t,this.begin=i+o,this.end=this.begin+a,e.specification.transition&&(r.delay||r.duration)&&(this.prior=n)}possiblyEvaluate(e,t,n){const r=e.now||0,i=this.value.possiblyEvaluate(e,t,n),o=this.prior;if(o){if(r>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(r<this.begin)return o.possiblyEvaluate(e,t,n);{const a=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(e,t,n),i,f(a))}}return i}}class uo{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,t,n){const r=new po(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].possiblyEvaluate(e,t,n);return r}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class ho{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return M(this._values[e].value)}setValue(e,t){this._values[e]=new ao(this._values[e].property,null===t?void 0:M(t))}serialize(){const e={};for(const t of Object.keys(this._values)){const n=this.getValue(t);void 0!==n&&(e[t]=n)}return e}possiblyEvaluate(e,t,n){const r=new po(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].possiblyEvaluate(e,t,n);return r}}class fo{constructor(e,t,n){this.property=e,this.value=t,this.parameters=n}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,t,n,r){return this.property.evaluate(this.value,this.parameters,e,t,n,r)}}class po{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class mo{constructor(e){this.specification=e}possiblyEvaluate(e,t){return e.expression.evaluate(t)}interpolate(e,t,n){const r=rn[this.specification.type];return r?r(e,t,n):e}}class go{constructor(e,t){this.specification=e,this.overrides=t}possiblyEvaluate(e,t,n,r){return new fo(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},n,r)}:e.expression,t)}interpolate(e,t,n){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new fo(this,{kind:"constant",value:void 0},e.parameters);const r=rn[this.specification.type];return r?new fo(this,{kind:"constant",value:r(e.value.value,t.value.value,n)},e.parameters):e}evaluate(e,t,n,r,i,o){return"constant"===e.kind?e.value:e.evaluate(t,n,r,i,o)}}class yo extends go{possiblyEvaluate(e,t,n,r){if(void 0===e.value)return new fo(this,{kind:"constant",value:void 0},t);if("constant"===e.expression.kind){const i=e.expression.evaluate(t,null,{},n,r),o="resolvedImage"===e.property.specification.type&&"string"!=typeof i?i.name:i,a=this._calculate(o,o,o,t);return new fo(this,{kind:"constant",value:a},t)}if("camera"===e.expression.kind){const n=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t);return new fo(this,{kind:"constant",value:n},t)}return new fo(this,e.expression,t)}evaluate(e,t,n,r,i,o){if("source"===e.kind){const a=e.evaluate(t,n,r,i,o);return this._calculate(a,a,a,t)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},n,r),e.evaluate({zoom:Math.floor(t.zoom)},n,r),e.evaluate({zoom:Math.floor(t.zoom)+1},n,r),t):e.value}_calculate(e,t,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t,other:n}:{from:n,to:t,other:e}}interpolate(e){return e}}class vo{constructor(e){this.specification=e}possiblyEvaluate(e,t,n,r){if(void 0!==e.value){if("constant"===e.expression.kind){const i=e.expression.evaluate(t,null,{},n,r);return this._calculate(i,i,i,t)}return this._calculate(e.expression.evaluate(new oo(Math.floor(t.zoom-1),t)),e.expression.evaluate(new oo(Math.floor(t.zoom),t)),e.expression.evaluate(new oo(Math.floor(t.zoom+1),t)),t)}}_calculate(e,t,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}}interpolate(e){return e}}class bo{constructor(e){this.specification=e}possiblyEvaluate(e,t,n,r){return!!e.expression.evaluate(t,null,{},n,r)}interpolate(){return!1}}class _o{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const t in e){const n=e[t];n.specification.overridable&&this.overridableProperties.push(t);const r=this.defaultPropertyValues[t]=new ao(n,void 0),i=this.defaultTransitionablePropertyValues[t]=new so(n);this.defaultTransitioningPropertyValues[t]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=r.possiblyEvaluate({})}}}function xo(e,t){return 256*(e=m(Math.floor(e),0,255))+m(Math.floor(t),0,255)}ai(go),ai(mo),ai(yo),ai(vo),ai(bo);const Ao={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class wo{constructor(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Co{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Eo(e,t=1){let n=0,r=0;return{members:e.map((e=>{const i=Ao[e.type].BYTES_PER_ELEMENT,o=n=So(n,Math.max(t,i)),a=e.components||1;return r=Math.max(r,i),n+=i*a,{name:e.name,type:e.type,components:a,offset:o}})),size:So(n,Math.max(r,t)),alignment:t}}function So(e,t){return Math.ceil(e/t)*t}class To extends Co{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const r=2*e;return this.int16[r+0]=t,this.int16[r+1]=n,e}}To.prototype.bytesPerElement=4,ai(To);class Bo extends Co{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}emplace(e,t,n,r){const i=3*e;return this.int16[i+0]=t,this.int16[i+1]=n,this.int16[i+2]=r,e}}Bo.prototype.bytesPerElement=6,ai(Bo);class ko extends Co{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const o=4*e;return this.int16[o+0]=t,this.int16[o+1]=n,this.int16[o+2]=r,this.int16[o+3]=i,e}}ko.prototype.bytesPerElement=8,ai(ko);class Mo extends Co{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,r,i,o,a)}emplace(e,t,n,r,i,o,a,s){const l=6*e,c=12*e,u=3*e;return this.int16[l+0]=t,this.int16[l+1]=n,this.uint8[c+4]=r,this.uint8[c+5]=i,this.uint8[c+6]=o,this.uint8[c+7]=a,this.float32[u+2]=s,e}}Mo.prototype.bytesPerElement=12,ai(Mo);class Po extends Co{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}emplace(e,t,n,r){const i=3*e;return this.float32[i+0]=t,this.float32[i+1]=n,this.float32[i+2]=r,e}}Po.prototype.bytesPerElement=12,ai(Po);class Io extends Co{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s,l,c){const u=this.length;return this.resize(u+1),this.emplace(u,e,t,n,r,i,o,a,s,l,c)}emplace(e,t,n,r,i,o,a,s,l,c,u){const h=10*e;return this.uint16[h+0]=t,this.uint16[h+1]=n,this.uint16[h+2]=r,this.uint16[h+3]=i,this.uint16[h+4]=o,this.uint16[h+5]=a,this.uint16[h+6]=s,this.uint16[h+7]=l,this.uint16[h+8]=c,this.uint16[h+9]=u,e}}Io.prototype.bytesPerElement=20,ai(Io);class Oo extends Co{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s){const l=this.length;return this.resize(l+1),this.emplace(l,e,t,n,r,i,o,a,s)}emplace(e,t,n,r,i,o,a,s,l){const c=8*e;return this.uint16[c+0]=t,this.uint16[c+1]=n,this.uint16[c+2]=r,this.uint16[c+3]=i,this.uint16[c+4]=o,this.uint16[c+5]=a,this.uint16[c+6]=s,this.uint16[c+7]=l,e}}Oo.prototype.bytesPerElement=16,ai(Oo);class Do extends Co{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i,o)}emplace(e,t,n,r,i,o,a){const s=6*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,e}}Do.prototype.bytesPerElement=12,ai(Do);class zo extends Co{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s,l,c,u,h,f,p,d,m){const g=this.length;return this.resize(g+1),this.emplace(g,e,t,n,r,i,o,a,s,l,c,u,h,f,p,d,m)}emplace(e,t,n,r,i,o,a,s,l,c,u,h,f,p,d,m,g){const y=16*e;return this.int16[y+0]=t,this.int16[y+1]=n,this.int16[y+2]=r,this.int16[y+3]=i,this.uint16[y+4]=o,this.uint16[y+5]=a,this.uint16[y+6]=s,this.uint16[y+7]=l,this.int16[y+8]=c,this.int16[y+9]=u,this.int16[y+10]=h,this.int16[y+11]=f,this.int16[y+12]=p,this.int16[y+13]=d,this.int16[y+14]=m,this.int16[y+15]=g,e}}zo.prototype.bytesPerElement=32,ai(zo);class Lo extends Co{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint32[1*e+0]=t,e}}Lo.prototype.bytesPerElement=4,ai(Lo);class Ro extends Co{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s,l,c,u,h,f){const p=this.length;return this.resize(p+1),this.emplace(p,e,t,n,r,i,o,a,s,l,c,u,h,f)}emplace(e,t,n,r,i,o,a,s,l,c,u,h,f,p){const d=20*e,m=10*e;return this.int16[d+0]=t,this.int16[d+1]=n,this.int16[d+2]=r,this.int16[d+3]=i,this.int16[d+4]=o,this.float32[m+3]=a,this.float32[m+4]=s,this.float32[m+5]=l,this.float32[m+6]=c,this.int16[d+14]=u,this.uint32[m+8]=h,this.uint16[d+18]=f,this.uint16[d+19]=p,e}}Ro.prototype.bytesPerElement=40,ai(Ro);class Fo extends Co{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,r,i,o,a)}emplace(e,t,n,r,i,o,a,s){const l=8*e;return this.int16[l+0]=t,this.int16[l+1]=n,this.int16[l+2]=r,this.int16[l+4]=i,this.int16[l+5]=o,this.int16[l+6]=a,this.int16[l+7]=s,e}}Fo.prototype.bytesPerElement=16,ai(Fo);class Uo extends Co{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,i)}emplace(e,t,n,r,i,o){const a=4*e,s=8*e;return this.float32[a+0]=t,this.float32[a+1]=n,this.float32[a+2]=r,this.int16[s+6]=i,this.int16[s+7]=o,e}}Uo.prototype.bytesPerElement=16,ai(Uo);class No extends Co{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const o=12*e,a=3*e;return this.uint8[o+0]=t,this.uint8[o+1]=n,this.float32[a+1]=r,this.float32[a+2]=i,e}}No.prototype.bytesPerElement=12,ai(No);class jo extends Co{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}emplace(e,t,n,r){const i=3*e;return this.uint16[i+0]=t,this.uint16[i+1]=n,this.uint16[i+2]=r,e}}jo.prototype.bytesPerElement=6,ai(jo);class Vo extends Co{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s,l,c,u,h,f,p,d,m,g,y,v,b,_){const x=this.length;return this.resize(x+1),this.emplace(x,e,t,n,r,i,o,a,s,l,c,u,h,f,p,d,m,g,y,v,b,_)}emplace(e,t,n,r,i,o,a,s,l,c,u,h,f,p,d,m,g,y,v,b,_,x){const A=30*e,w=15*e,C=60*e;return this.int16[A+0]=t,this.int16[A+1]=n,this.int16[A+2]=r,this.float32[w+2]=i,this.float32[w+3]=o,this.uint16[A+8]=a,this.uint16[A+9]=s,this.uint32[w+5]=l,this.uint32[w+6]=c,this.uint32[w+7]=u,this.uint16[A+16]=h,this.uint16[A+17]=f,this.uint16[A+18]=p,this.float32[w+10]=d,this.float32[w+11]=m,this.uint8[C+48]=g,this.uint8[C+49]=y,this.uint8[C+50]=v,this.uint32[w+13]=b,this.int16[A+28]=_,this.uint8[C+58]=x,e}}Vo.prototype.bytesPerElement=60,ai(Vo);class Go extends Co{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s,l,c,u,h,f,p,d,m,g,y,v,b,_,x,A,w,C,E,S,T,B,k){const M=this.length;return this.resize(M+1),this.emplace(M,e,t,n,r,i,o,a,s,l,c,u,h,f,p,d,m,g,y,v,b,_,x,A,w,C,E,S,T,B,k)}emplace(e,t,n,r,i,o,a,s,l,c,u,h,f,p,d,m,g,y,v,b,_,x,A,w,C,E,S,T,B,k,M){const P=38*e,I=19*e;return this.int16[P+0]=t,this.int16[P+1]=n,this.int16[P+2]=r,this.float32[I+2]=i,this.float32[I+3]=o,this.int16[P+8]=a,this.int16[P+9]=s,this.int16[P+10]=l,this.int16[P+11]=c,this.int16[P+12]=u,this.int16[P+13]=h,this.uint16[P+14]=f,this.uint16[P+15]=p,this.uint16[P+16]=d,this.uint16[P+17]=m,this.uint16[P+18]=g,this.uint16[P+19]=y,this.uint16[P+20]=v,this.uint16[P+21]=b,this.uint16[P+22]=_,this.uint16[P+23]=x,this.uint16[P+24]=A,this.uint16[P+25]=w,this.uint16[P+26]=C,this.uint16[P+27]=E,this.uint16[P+28]=S,this.uint32[I+15]=T,this.float32[I+16]=B,this.float32[I+17]=k,this.float32[I+18]=M,e}}Go.prototype.bytesPerElement=76,ai(Go);class qo extends Co{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.float32[1*e+0]=t,e}}qo.prototype.bytesPerElement=4,ai(qo);class Wo extends Co{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,r,i,o,a)}emplace(e,t,n,r,i,o,a,s){const l=7*e;return this.float32[l+0]=t,this.float32[l+1]=n,this.float32[l+2]=r,this.float32[l+3]=i,this.float32[l+4]=o,this.float32[l+5]=a,this.float32[l+6]=s,e}}Wo.prototype.bytesPerElement=28,ai(Wo);class Ho extends Co{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,i)}emplace(e,t,n,r,i,o){const a=5*e;return this.float32[a+0]=t,this.float32[a+1]=n,this.float32[a+2]=r,this.float32[a+3]=i,this.float32[a+4]=o,e}}Ho.prototype.bytesPerElement=20,ai(Ho);class $o extends Co{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const o=6*e;return this.uint32[3*e+0]=t,this.uint16[o+2]=n,this.uint16[o+3]=r,this.uint16[o+4]=i,e}}$o.prototype.bytesPerElement=12,ai($o);class Xo extends Co{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const r=2*e;return this.uint16[r+0]=t,this.uint16[r+1]=n,e}}Xo.prototype.bytesPerElement=4,ai(Xo);class Zo extends Co{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint16[1*e+0]=t,e}}Zo.prototype.bytesPerElement=2,ai(Zo);class Yo extends Co{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const r=2*e;return this.float32[r+0]=t,this.float32[r+1]=n,e}}Yo.prototype.bytesPerElement=8,ai(Yo);class Ko extends Co{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const o=4*e;return this.float32[o+0]=t,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,e}}Ko.prototype.bytesPerElement=16,ai(Ko);class Jo extends Co{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,r,i,o,a)}emplace(e,t,n,r,i,o,a,s){const l=8*e,c=4*e;return this.int16[l+0]=t,this.int16[l+1]=n,this.int16[l+2]=r,this.int16[l+3]=i,this.int16[l+4]=o,this.int16[l+5]=a,this.float32[c+3]=s,e}}Jo.prototype.bytesPerElement=16,ai(Jo);class Qo extends wo{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}Qo.prototype.size=12;class ea extends Do{get(e){return new Qo(this,e)}}ai(ea);class ta extends wo{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}ta.prototype.size=40;class na extends Ro{get(e){return new ta(this,e)}}ai(na);class ra extends wo{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(e){this._structArray.uint8[this._pos1+49]=e}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(e){this._structArray.uint8[this._pos1+50]=e}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(e){this._structArray.uint32[this._pos4+13]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(e){this._structArray.uint8[this._pos1+58]=e}}ra.prototype.size=60;class ia extends Vo{get(e){return new ra(this,e)}}ai(ia);class oa extends wo{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(e){this._structArray.uint32[this._pos4+15]=e}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}oa.prototype.size=76;class aa extends Go{get(e){return new oa(this,e)}}ai(aa);class sa extends qo{getoffsetX(e){return this.float32[1*e+0]}}ai(sa);class la extends Bo{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}ai(la);class ca extends wo{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}ca.prototype.size=12;class ua extends $o{get(e){return new ca(this,e)}}ai(ua);class ha extends wo{get a_centroid_pos0(){return this._structArray.uint16[this._pos2+0]}get a_centroid_pos1(){return this._structArray.uint16[this._pos2+1]}}ha.prototype.size=4;class fa extends Xo{get(e){return new ha(this,e)}}ai(fa);class pa extends wo{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}get a_scale(){return this._structArray.float32[this._pos4+3]}}pa.prototype.size=16;class da extends Jo{get(e){return new pa(this,e)}}ai(da);const ma=Eo([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),ga=Eo([{name:"a_dash_to",components:4,type:"Uint16"},{name:"a_dash_from",components:4,type:"Uint16"}]);var ya=lt((function(e){e.exports=function(e,t){var n,r,i,o,a,s,l,c;for(r=e.length-(n=3&e.length),i=t,a=3432918353,s=461845907,c=0;c<r;)l=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,i=27492+(65535&(o=5*(65535&(i=(i^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&e.charCodeAt(c+2))<<16;case 2:l^=(255&e.charCodeAt(c+1))<<8;case 1:i^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(c)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return i^=e.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}})),va=lt((function(e){e.exports=function(e,t){for(var n,r=e.length,i=t^r,o=0;r>=4;)n=1540483477*(65535&(n=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:i^=(255&e.charCodeAt(o+2))<<16;case 2:i^=(255&e.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0}})),ba=ya,_a=va;ba.murmur3=ya,ba.murmur2=_a;class xa{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,t,n,r){this.ids.push(Aa(e)),this.positions.push(t,n,r)}getPositions(e){const t=Aa(e);let n=0,r=this.ids.length-1;for(;n<r;){const e=n+r>>1;this.ids[e]>=t?r=e:n=e+1}const i=[];for(;this.ids[n]===t;)i.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return i}static serialize(e,t){const n=new Float64Array(e.ids),r=new Uint32Array(e.positions);return wa(n,r,0,n.length-1),t&&t.push(n.buffer,r.buffer),{ids:n,positions:r}}static deserialize(e){const t=new xa;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t}}function Aa(e){const t=+e;return!isNaN(t)&&Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:ba(String(e))}function wa(e,t,n,r){for(;n<r;){const i=e[n+r>>1];let o=n-1,a=r+1;for(;;){do{o++}while(e[o]<i);do{a--}while(e[a]>i);if(o>=a)break;Ca(e,o,a),Ca(t,3*o,3*a),Ca(t,3*o+1,3*a+1),Ca(t,3*o+2,3*a+2)}a-n<r-a?(wa(e,t,n,a),n=a+1):(wa(e,t,a+1,r),r=a)}}function Ca(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}ai(xa);class Ea{constructor(e,t){this.gl=e.gl,this.location=t}}class Sa extends Ea{constructor(e,t){super(e,t),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class Ta extends Ea{constructor(e,t){super(e,t),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class Ba extends Ea{constructor(e,t){super(e,t),this.current=ut.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const ka=new Float32Array(16),Ma=new Float32Array(9),Pa=new Float32Array(4);function Ia(e){return[xo(255*e.r,255*e.g),xo(255*e.b,255*e.a)]}class Oa{constructor(e,t,n){this.value=e,this.uniformNames=t.map((e=>`u_${e}`)),this.type=n}setUniform(e,t,n){e.set(n.constantOr(this.value))}getBinding(e,t,n){return"color"===this.type?new Ba(e,t):new Sa(e,t)}}class Da{constructor(e,t){this.uniformNames=t.map((e=>`u_${e}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,t){this.pixelRatioFrom=t.pixelRatio||1,this.pixelRatioTo=e.pixelRatio||1,this.patternFrom=t.tl.concat(t.br),this.patternTo=e.tl.concat(e.br)}setUniform(e,t,n,r){const i="u_pattern_to"===r||"u_dash_to"===r?this.patternTo:"u_pattern_from"===r||"u_dash_from"===r?this.patternFrom:"u_pixel_ratio_to"===r?this.pixelRatioTo:"u_pixel_ratio_from"===r?this.pixelRatioFrom:null;i&&e.set(i)}getBinding(e,t,n){return"u_pattern_from"===n||"u_pattern_to"===n||"u_dash_from"===n||"u_dash_to"===n?new Ta(e,t):new Sa(e,t)}}class za{constructor(e,t,n,r){this.expression=e,this.type=n,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:`a_${e}`,type:"Float32",components:"color"===n?2:1,offset:0}))),this.paintVertexArray=new r}populatePaintArray(e,t,n,r,i,o){const a=this.paintVertexArray.length,s=this.expression.evaluate(new oo(0),t,{},i,r,o);this.paintVertexArray.resize(e),this._setPaintValue(a,e,s)}updatePaintArray(e,t,n,r,i){const o=this.expression.evaluate({zoom:0},n,r,void 0,i);this._setPaintValue(e,t,o)}_setPaintValue(e,t,n){if("color"===this.type){const r=Ia(n);for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,r[0],r[1])}else{for(let r=e;r<t;r++)this.paintVertexArray.emplace(r,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class La{constructor(e,t,n,r,i,o){this.expression=e,this.uniformNames=t.map((e=>`u_${e}_t`)),this.type=n,this.useIntegerZoom=r,this.zoom=i,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:`a_${e}`,type:"Float32",components:"color"===n?4:2,offset:0}))),this.paintVertexArray=new o}populatePaintArray(e,t,n,r,i,o){const a=this.expression.evaluate(new oo(this.zoom),t,{},i,r,o),s=this.expression.evaluate(new oo(this.zoom+1),t,{},i,r,o),l=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(l,e,a,s)}updatePaintArray(e,t,n,r,i){const o=this.expression.evaluate({zoom:this.zoom},n,r,void 0,i),a=this.expression.evaluate({zoom:this.zoom+1},n,r,void 0,i);this._setPaintValue(e,t,o,a)}_setPaintValue(e,t,n,r){if("color"===this.type){const i=Ia(n),o=Ia(r);for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,i[0],i[1],o[0],o[1])}else{for(let i=e;i<t;i++)this.paintVertexArray.emplace(i,n,r);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(r))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,t){const n=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,r=m(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);e.set(r)}getBinding(e,t,n){return new Sa(e,t)}}class Ra{constructor(e,t,n,r,i,o,a){this.expression=e,this.type=n,this.useIntegerZoom=r,this.zoom=i,this.layerId=a,this.paintVertexAttributes=("array"===n?ga:ma).members;for(let e=0;e<t.length;++e);this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o}populatePaintArray(e,t,n){const r=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(r,e,t.patterns&&t.patterns[this.layerId],n)}updatePaintArray(e,t,n,r,i,o){this._setPaintValues(e,t,n.patterns&&n.patterns[this.layerId],o)}_setPaintValues(e,t,n,r){if(!r||!n)return;const{min:i,mid:o,max:a}=n,s=r[i],l=r[o],c=r[a];if(s&&l&&c)for(let n=e;n<t;n++)this._setPaintValue(this.zoomInPaintVertexArray,n,l,s),this._setPaintValue(this.zoomOutPaintVertexArray,n,l,c)}_setPaintValue(e,t,n,r){e.emplace(t,n.tl[0],n.tl[1],n.br[0],n.br[1],r.tl[0],r.tl[1],r.br[0],r.br[1],n.pixelRatio,r.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Fa{constructor(e,t,n=(()=>!0)){this.binders={},this._buffers=[];const r=[];for(const i in e.paint._values){if(!n(i))continue;const o=e.paint.get(i);if(!(o instanceof fo&&Yn(o.property.specification)))continue;const a=ja(i,e.type),s=o.value,l=o.property.specification.type,c=o.property.useIntegerZoom,u=o.property.specification["property-type"],h="cross-faded"===u||"cross-faded-data-driven"===u,f="line-dasharray"===String(i)&&"constant"!==e.layout.get("line-cap").value.kind;if("constant"!==s.kind||f)if("source"===s.kind||f||h){const n=qa(i,l,"source");this.binders[i]=h?new Ra(s,a,l,c,t,n,e.id):new za(s,a,l,n),r.push(`/a_${i}`)}else{const e=qa(i,l,"composite");this.binders[i]=new La(s,a,l,c,t,e),r.push(`/z_${i}`)}else this.binders[i]=h?new Da(s.value,a):new Oa(s.value,a,l),r.push(`/u_${i}`)}this.cacheKey=r.sort().join("")}getMaxValue(e){const t=this.binders[e];return t instanceof za||t instanceof La?t.maxValue:0}populatePaintArrays(e,t,n,r,i,o){for(const a in this.binders){const s=this.binders[a];(s instanceof za||s instanceof La||s instanceof Ra)&&s.populatePaintArray(e,t,n,r,i,o)}}setConstantPatternPositions(e,t){for(const n in this.binders){const r=this.binders[n];r instanceof Da&&r.setConstantPatternPositions(e,t)}}updatePaintArrays(e,t,n,r,i,o){let a=!1;for(const s in e){const l=t.getPositions(s);for(const t of l){const l=n.feature(t.index);for(const n in this.binders){const c=this.binders[n];if((c instanceof za||c instanceof La||c instanceof Ra)&&!0===c.expression.isStateDependent){const u=r.paint.get(n);c.expression=u.value,c.updatePaintArray(t.start,t.end,l,e[s],i,o),a=!0}}}}return a}defines(){const e=[];for(const t in this.binders){const n=this.binders[t];(n instanceof Oa||n instanceof Da)&&e.push(...n.uniformNames.map((e=>`#define HAS_UNIFORM_${e}`)))}return e}getBinderAttributes(){const e=[];for(const t in this.binders){const n=this.binders[t];if(n instanceof za||n instanceof La||n instanceof Ra)for(let t=0;t<n.paintVertexAttributes.length;t++)e.push(n.paintVertexAttributes[t].name)}return e}getBinderUniforms(){const e=[];for(const t in this.binders){const n=this.binders[t];if(n instanceof Oa||n instanceof Da||n instanceof La)for(const t of n.uniformNames)e.push(t)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,t){const n=[];for(const r in this.binders){const i=this.binders[r];if(i instanceof Oa||i instanceof Da||i instanceof La)for(const o of i.uniformNames)if(t[o]){const a=i.getBinding(e,t[o],o);n.push({name:o,property:r,binding:a})}}return n}setUniforms(e,t,n,r){for(const{name:e,property:i,binding:o}of t)this.binders[i].setUniform(o,r,n.get(i),e)}updatePaintBuffers(e){this._buffers=[];for(const t in this.binders){const n=this.binders[t];if(e&&n instanceof Ra){const t=2===e.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;t&&this._buffers.push(t)}else(n instanceof za||n instanceof La)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}}upload(e){for(const t in this.binders){const n=this.binders[t];(n instanceof za||n instanceof La||n instanceof Ra)&&n.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const t=this.binders[e];(t instanceof za||t instanceof La||t instanceof Ra)&&t.destroy()}}}class Ua{constructor(e,t,n=(()=>!0)){this.programConfigurations={};for(const r of e)this.programConfigurations[r.id]=new Fa(r,t,n);this.needsUpload=!1,this._featureMap=new xa,this._bufferOffset=0}populatePaintArrays(e,t,n,r,i,o,a){for(const n in this.programConfigurations)this.programConfigurations[n].populatePaintArrays(e,t,r,i,o,a);void 0!==t.id&&this._featureMap.add(t.id,n,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,t,n,r,i){for(const o of n)this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(e,this._featureMap,t,o,r,i)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}const Na={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"line-dasharray":["dash_to","dash_from"]};function ja(e,t){return Na[e]||[e.replace(`${t}-`,"").replace(/-/g,"_")]}const Va={"line-pattern":{source:Io,composite:Io},"fill-pattern":{source:Io,composite:Io},"fill-extrusion-pattern":{source:Io,composite:Io},"line-dasharray":{source:Oo,composite:Oo}},Ga={color:{source:Yo,composite:Ko},number:{source:qo,composite:Yo}};function qa(e,t,n){const r=Va[e];return r&&r[n]||Ga[t][n]}ai(Oa),ai(Da),ai(za),ai(Ra),ai(La),ai(Fa,{omit:["_buffers"]}),ai(Ua);const Wa="-transition";class Ha extends Ue{constructor(e,t){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==e.type&&(this.metadata=(e=e).metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&"sky"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),t.layout&&(this._unevaluatedLayout=new ho(t.layout)),t.paint)){this._transitionablePaint=new lo(t.paint);for(const t in e.paint)this.setPaintProperty(t,e.paint[t],{validate:!1});for(const t in e.layout)this.setLayoutProperty(t,e.layout[t],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new po(t.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,t,n={}){null!=t&&this._validate(ei,`layers.${this.id}.layout.${e}`,e,t,n)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}getPaintProperty(e){return T(e,Wa)?this._transitionablePaint.getTransition(e.slice(0,-Wa.length)):this._transitionablePaint.getValue(e)}setPaintProperty(e,t,n={}){if(null!=t&&this._validate(Qr,`layers.${this.id}.paint.${e}`,e,t,n))return!1;if(T(e,Wa))return this._transitionablePaint.setTransition(e.slice(0,-Wa.length),t||void 0),!1;{const n=this._transitionablePaint._values[e],r="cross-faded-data-driven"===n.property.specification["property-type"],i=n.value.isDataDriven(),o=n.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);const a=this._transitionablePaint._values[e].value;return a.isDataDriven()||i||r||this._handleOverridablePaintPropertyUpdate(e,o,a)}}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getProgramConfiguration(e){return null}_handleOverridablePaintPropertyUpdate(e,t,n){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,t){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),k(e,((e,t)=>!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)))}_validate(e,t,n,r,i={}){return(!i||!1!==i.validate)&&ni(this,e.call(Jr,{key:t,layerType:this.type,objectKey:n,value:r,styleSpec:Ne,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const t=this.paint.get(e);if(t instanceof fo&&Yn(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Er(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const $a=Eo([{name:"a_pos",components:2,type:"Int16"}],4),Xa=Eo([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"},{name:"a_scale",components:1,type:"Float32"}]);class Za{constructor(e=[]){this.segments=e}prepareSegment(e,t,n,r){let i=this.segments[this.segments.length-1];return e>Za.MAX_VERTEX_ARRAY_LENGTH&&I(`Max vertices per segment is ${Za.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!i||i.vertexLength+e>Za.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==r)&&(i={vertexOffset:t.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==r&&(i.sortKey=r),this.segments.push(i)),i}get(){return this.segments}destroy(){for(const e of this.segments)for(const t in e.vaos)e.vaos[t].destroy()}static simpleSegment(e,t,n,r){return new Za([{vertexOffset:e,primitiveOffset:t,vertexLength:n,primitiveLength:r,vaos:{},sortKey:0}])}}Za.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ai(Za);var Ya=8192;class Ka{constructor(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof Qa?new Qa(e.lng,e.lat):Qa.convert(e),this}setSouthWest(e){return this._sw=e instanceof Qa?new Qa(e.lng,e.lat):Qa.convert(e),this}extend(e){const t=this._sw,n=this._ne;let r,i;if(e instanceof Qa)r=e,i=e;else{if(!(e instanceof Ka))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(Ka.convert(e)):this.extend(Qa.convert(e)):this;if(r=e._sw,i=e._ne,!r||!i)return this}return t||n?(t.lng=Math.min(r.lng,t.lng),t.lat=Math.min(r.lat,t.lat),n.lng=Math.max(i.lng,n.lng),n.lat=Math.max(i.lat,n.lat)):(this._sw=new Qa(r.lng,r.lat),this._ne=new Qa(i.lng,i.lat)),this}getCenter(){return new Qa((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Qa(this.getWest(),this.getNorth())}getSouthEast(){return new Qa(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:t,lat:n}=Qa.convert(e);let r=this._sw.lng<=t&&t<=this._ne.lng;return this._sw.lng>this._ne.lng&&(r=this._sw.lng>=t&&t>=this._ne.lng),this._sw.lat<=n&&n<=this._ne.lat&&r}static convert(e){return!e||e instanceof Ka?e:new Ka(e)}}const Ja=6371008.8;class Qa{constructor(e,t){if(isNaN(e)||isNaN(t))throw new Error(`Invalid LngLat object: (${e}, ${t})`);if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Qa(y(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const t=Math.PI/180,n=this.lat*t,r=e.lat*t,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((e.lng-this.lng)*t);return Ja*Math.acos(Math.min(i,1))}toBounds(e=0){const t=360*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return new Ka(new Qa(this.lng-n,this.lat-t),new Qa(this.lng+n,this.lat+t))}static convert(e){if(e instanceof Qa)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new Qa(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new Qa(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const es=2*Math.PI*Ja;function ts(e){return es*Math.cos(e*Math.PI/180)}function ns(e){return(180+e)/360}function rs(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function is(e,t){return e/ts(t)}function os(e){return 360*e-180}function as(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function ss(e,t){return e*ts(as(t))}const ls=85.051129;class cs{constructor(e,t,n=0){this.x=+e,this.y=+t,this.z=+n}static fromLngLat(e,t=0){const n=Qa.convert(e);return new cs(ns(n.lng),rs(n.lat),is(t,n.lat))}toLngLat(){return new Qa(os(this.x),as(this.y))}toAltitude(){return ss(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/es*(e=as(this.y),1/Math.cos(e*Math.PI/180));var e}}function us(e,t,n,r,o,a,s,l,c){const u=(t+r)/2,h=(n+o)/2,f=new i(u,h);l(f),function(e,t,n,r,i,o){const a=n-i,s=r-o;return Math.abs((r-t)*a-(n-e)*s)/Math.hypot(a,s)}(f.x,f.y,a.x,a.y,s.x,s.y)>=c?(us(e,t,n,u,h,a,f,l,c),us(e,u,h,r,o,f,s,l,c)):e.push(s)}function hs(e,t,n){let r=e[0],i=r.x,o=r.y;t(r);const a=[r];for(let s=1;s<e.length;s++){const l=e[s],{x:c,y:u}=l;t(l),us(a,i,o,c,u,r,l,t,n),i=c,o=u,r=l}return a}const fs=Math.pow(2,14)-1,ps=-fs-1;function ds(e,t){const n=Math.round(e.x*t),r=Math.round(e.y*t);return e.x=m(n,ps,fs),e.y=m(r,ps,fs),(n<e.x||n>e.x+1||r<e.y||r>e.y+1)&&I("Geometry exceeds allowed extent, reduce your vector tile buffer size"),e}function ms(e,t,n){const r=e.loadGeometry(),i=e.extent,o=Ya/i;if(t&&n&&n.projection.isReprojectedInTileSpace){const o=1<<t.z,{scale:a,x:s,y:l,projection:c}=n,u=e=>{const n=os((t.x+e.x/i)/o),r=as((t.y+e.y/i)/o),u=c.project(n,r);e.x=(u.x*a-s)*i,e.y=(u.y*a-l)*i};for(let t=0;t<r.length;t++)if(1!==e.type)r[t]=hs(r[t],u,1);else{const e=[];for(const n of r[t])n.x<0||n.x>=i||n.y<0||n.y>=i||(u(n),e.push(n));r[t]=e}}for(const e of r)for(const t of e)ds(t,o);return r}function gs(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?ms(e):[]}}function ys(e,t,n,r,i){e.emplaceBack(2*t+(r+1)/2,2*n+(i+1)/2)}function vs(e,t,n,r){const i=16384;e.emplaceBack(t.x,t.y,t.z,n[0]*i,n[1]*i,n[2]*i,r)}class bs{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.projection=e.projection,this.layoutVertexArray=new To,this.indexArray=new jo,this.segments=new Za,this.programConfigurations=new Ua(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,n,r){const i=this.layers[0],o=[];let a=null;"circle"===i.type&&(a=i.layout.get("circle-sort-key"));for(const{feature:t,id:i,index:s,sourceLayerIndex:l}of e){const e=this.layers[0]._featureFilter.needGeometry,c=gs(t,e);if(!this.layers[0]._featureFilter.filter(new oo(this.zoom),c,n))continue;const u=a?a.evaluate(c,{},n):void 0,h={id:i,properties:t.properties,type:t.type,sourceLayerIndex:l,index:s,geometry:e?c.geometry:ms(t,n,r),patterns:{},sortKey:u};o.push(h)}a&&o.sort(((e,t)=>e.sortKey-t.sortKey));let s=null;"globe"===r.projection.name&&(this.globeExtVertexArray=new da,s=r.projection);for(const r of o){const{geometry:i,index:o,sourceLayerIndex:a}=r,l=e[o].feature;this.addFeature(r,i,o,t.availableImages,n,s),t.featureIndex.insert(l,i,o,a,this.index)}}update(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,$a.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,Xa.members))),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(e,t,n,r,i,o){for(const n of t)for(const t of n){const n=t.x,r=t.y;if(n<0||n>=Ya||r<0||r>=Ya)continue;if(o){const e=o.projectTilePoint(n,r,i),t=o.upVector(i,n,r),a=as((r/Ya+i.y)/(1<<i.z)),s=o.pixelsPerMeter(a,1)/is(1,a),l=this.globeExtVertexArray;vs(l,e,t,s),vs(l,e,t,s),vs(l,e,t,s),vs(l,e,t,s)}const a=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),s=a.vertexLength;ys(this.layoutVertexArray,n,r,-1,-1),ys(this.layoutVertexArray,n,r,1,-1),ys(this.layoutVertexArray,n,r,1,1),ys(this.layoutVertexArray,n,r,-1,1),this.indexArray.emplaceBack(s,s+1,s+2),this.indexArray.emplaceBack(s,s+3,s+2),a.vertexLength+=4,a.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{},r,i)}}function _s(e,t){for(let n=0;n<e.length;n++)if(ks(t,e[n]))return!0;for(let n=0;n<t.length;n++)if(ks(e,t[n]))return!0;return!!Cs(e,t)}function xs(e,t,n){return!!ks(e,t)||!!Ss(t,e,n)}function As(e,t){if(1===e.length)return Bs(t,e[0]);for(let n=0;n<t.length;n++){const r=t[n];for(let t=0;t<r.length;t++)if(ks(e,r[t]))return!0}for(let n=0;n<e.length;n++)if(Bs(t,e[n]))return!0;for(let n=0;n<t.length;n++)if(Cs(e,t[n]))return!0;return!1}function ws(e,t,n){if(e.length>1){if(Cs(e,t))return!0;for(let r=0;r<t.length;r++)if(Ss(t[r],e,n))return!0}for(let r=0;r<e.length;r++)if(Ss(e[r],t,n))return!0;return!1}function Cs(e,t){if(0===e.length||0===t.length)return!1;for(let n=0;n<e.length-1;n++){const r=e[n],i=e[n+1];for(let e=0;e<t.length-1;e++)if(Es(r,i,t[e],t[e+1]))return!0}return!1}function Es(e,t,n,r){return O(e,n,r)!==O(t,n,r)&&O(e,t,n)!==O(e,t,r)}function Ss(e,t,n){const r=n*n;if(1===t.length)return e.distSqr(t[0])<r;for(let n=1;n<t.length;n++)if(Ts(e,t[n-1],t[n])<r)return!0;return!1}function Ts(e,t,n){const r=t.distSqr(n);if(0===r)return e.distSqr(t);const i=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/r;return e.distSqr(i<0?t:i>1?n:n.sub(t)._mult(i)._add(t))}function Bs(e,t){let n,r,i,o=!1;for(let a=0;a<e.length;a++){n=e[a];for(let e=0,a=n.length-1;e<n.length;a=e++)r=n[e],i=n[a],r.y>t.y!=i.y>t.y&&t.x<(i.x-r.x)*(t.y-r.y)/(i.y-r.y)+r.x&&(o=!o)}return o}function ks(e,t){let n=!1;for(let r=0,i=e.length-1;r<e.length;i=r++){const o=e[r],a=e[i];o.y>t.y!=a.y>t.y&&t.x<(a.x-o.x)*(t.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function Ms(e,t,n,r,o){for(const i of e)if(t<=i.x&&n<=i.y&&r>=i.x&&o>=i.y)return!0;const a=[new i(t,n),new i(t,o),new i(r,o),new i(r,n)];if(e.length>2)for(const t of a)if(ks(e,t))return!0;for(let t=0;t<e.length-1;t++)if(Ps(e[t],e[t+1],a))return!0;return!1}function Ps(e,t,n){const r=n[0],i=n[2];if(e.x<r.x&&t.x<r.x||e.x>i.x&&t.x>i.x||e.y<r.y&&t.y<r.y||e.y>i.y&&t.y>i.y)return!1;const o=O(e,t,n[0]);return o!==O(e,t,n[1])||o!==O(e,t,n[2])||o!==O(e,t,n[3])}function Is(e,t,n){const r=t.paint.get(e).value;return"constant"===r.kind?r.value:n.programConfigurations.get(t.id).getMaxValue(e)}function Os(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Ds(e,t,n,r,o){if(!t[0]&&!t[1])return e;const a=i.convert(t)._mult(o);"viewport"===n&&a._rotate(-r);const s=[];for(let t=0;t<e.length;t++)s.push(e[t].sub(a));return s}function zs(e,t,n,r){const o=i.convert(e)._mult(r);return"viewport"===t&&o._rotate(-n),o}ai(bs,{omit:["layers"]});const Ls=new _o({"circle-sort-key":new go(Ne.layout_circle["circle-sort-key"])});var Rs={paint:new _o({"circle-radius":new go(Ne.paint_circle["circle-radius"]),"circle-color":new go(Ne.paint_circle["circle-color"]),"circle-blur":new go(Ne.paint_circle["circle-blur"]),"circle-opacity":new go(Ne.paint_circle["circle-opacity"]),"circle-translate":new mo(Ne.paint_circle["circle-translate"]),"circle-translate-anchor":new mo(Ne.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new mo(Ne.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new mo(Ne.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new go(Ne.paint_circle["circle-stroke-width"]),"circle-stroke-color":new go(Ne.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new go(Ne.paint_circle["circle-stroke-opacity"])}),layout:Ls},Fs=1e-6,Us="undefined"!=typeof Float32Array?Float32Array:Array;function Ns(){var e=new Us(9);return Us!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function js(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Vs(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],f=t[9],p=t[10],d=t[11],m=t[12],g=t[13],y=t[14],v=t[15],b=n[0],_=n[1],x=n[2],A=n[3];return e[0]=b*r+_*s+x*h+A*m,e[1]=b*i+_*l+x*f+A*g,e[2]=b*o+_*c+x*p+A*y,e[3]=b*a+_*u+x*d+A*v,e[4]=(b=n[4])*r+(_=n[5])*s+(x=n[6])*h+(A=n[7])*m,e[5]=b*i+_*l+x*f+A*g,e[6]=b*o+_*c+x*p+A*y,e[7]=b*a+_*u+x*d+A*v,e[8]=(b=n[8])*r+(_=n[9])*s+(x=n[10])*h+(A=n[11])*m,e[9]=b*i+_*l+x*f+A*g,e[10]=b*o+_*c+x*p+A*y,e[11]=b*a+_*u+x*d+A*v,e[12]=(b=n[12])*r+(_=n[13])*s+(x=n[14])*h+(A=n[15])*m,e[13]=b*i+_*l+x*f+A*g,e[14]=b*o+_*c+x*p+A*y,e[15]=b*a+_*u+x*d+A*v,e}function Gs(e,t,n){var r,i,o,a,s,l,c,u,h,f,p,d,m=n[0],g=n[1],y=n[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*y+t[12],e[13]=t[1]*m+t[5]*g+t[9]*y+t[13],e[14]=t[2]*m+t[6]*g+t[10]*y+t[14],e[15]=t[3]*m+t[7]*g+t[11]*y+t[15]):(i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],f=t[9],p=t[10],d=t[11],e[0]=r=t[0],e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=h,e[9]=f,e[10]=p,e[11]=d,e[12]=r*m+s*g+h*y+t[12],e[13]=i*m+l*g+f*y+t[13],e[14]=o*m+c*g+p*y+t[14],e[15]=a*m+u*g+d*y+t[15]),e}function qs(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Ws(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],l=t[7],c=t[8],u=t[9],h=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+c*r,e[5]=a*i+u*r,e[6]=s*i+h*r,e[7]=l*i+f*r,e[8]=c*i-o*r,e[9]=u*i-a*r,e[10]=h*i-s*r,e[11]=f*i-l*r,e}function Hs(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],c=t[8],u=t[9],h=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-c*r,e[1]=a*i-u*r,e[2]=s*i-h*r,e[3]=l*i-f*r,e[8]=o*r+c*i,e[9]=a*r+u*i,e[10]=s*r+h*i,e[11]=l*r+f*i,e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var $s=Vs;function Xs(){var e=new Us(3);return Us!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Zs(e){var t=new Us(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ys(e){return Math.hypot(e[0],e[1],e[2])}function Ks(e,t,n){var r=new Us(3);return r[0]=e,r[1]=t,r[2]=n,r}function Js(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function Qs(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function el(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function tl(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function nl(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function rl(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function il(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function ol(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function al(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function sl(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],l=n[2];return e[0]=i*l-o*s,e[1]=o*a-r*l,e[2]=r*s-i*a,e}function ll(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return e[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/(a=a||1),e[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,e[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,e}function cl(e,t,n){var r=n[0],i=n[1],o=n[2],a=t[0],s=t[1],l=t[2],c=i*l-o*s,u=o*a-r*l,h=r*s-i*a,f=i*h-o*u,p=o*c-r*h,d=r*u-i*c,m=2*n[3];return u*=m,h*=m,p*=2,d*=2,e[0]=a+(c*=m)+(f*=2),e[1]=s+u+p,e[2]=l+h+d,e}var ul,hl=Qs,fl=el,pl=Ys;function dl(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e}function ml(){var e=new Us(4);return Us!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function gl(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function yl(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+a*s,e[1]=i*l+o*s,e[2]=o*l-i*s,e[3]=a*l-r*s,e}Xs(),ul=new Us(4),Us!=Float32Array&&(ul[0]=0,ul[1]=0,ul[2]=0,ul[3]=0),Xs(),Ks(1,0,0),Ks(0,1,0),ml(),ml(),Ns();class vl{constructor(e,t){this.points=e,this.planes=t}static fromInvProjectionMatrix(e,t,n,r){const i=Math.pow(2,n),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((n=>{const o=dl([],n,e),a=1/o[3]/t*i;return function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}(o,o,[a,a,r?1/o[3]:a,a])})),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((e=>{const t=ol([],sl([],hl([],o[e[0]],o[e[1]]),hl([],o[e[2]],o[e[1]]))),n=-al(t,o[e[1]]);return t.concat(n)}));return new vl(o,a)}}class bl{constructor(e,t){this.min=e,this.max=t,this.center=rl([],Js([],this.min,this.max),.5)}quadrant(e){const t=[e%2==0,e<2],n=Zs(this.min),r=Zs(this.max);for(let e=0;e<t.length;e++)n[e]=t[e]?this.min[e]:this.center[e],r[e]=t[e]?this.center[e]:this.max[e];return r[2]=this.max[2],new bl(n,r)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}distanceZ(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}getCorners(){const e=this.min,t=this.max;return[[e[0],e[1],e[2]],[t[0],e[1],e[2]],[t[0],t[1],e[2]],[e[0],t[1],e[2]],[e[0],e[1],t[2]],[t[0],e[1],t[2]],[t[0],t[1],t[2]],[e[0],t[1],t[2]]]}intersects(e){const t=this.getCorners();let n=!0;for(let r=0;r<e.planes.length;r++){const i=e.planes[r];let o=0;for(let e=0;e<t.length;e++)o+=al(i,t[e])+i[3]>=0;if(0===o)return 0;o!==t.length&&(n=!1)}if(n)return 2;for(let t=0;t<3;t++){let n=Number.MAX_VALUE,r=-Number.MAX_VALUE;for(let i=0;i<e.points.length;i++){const o=e.points[i][t]-this.min[t];n=Math.min(n,o),r=Math.max(r,o)}if(r<0||n>this.max[t]-this.min[t])return 0}return 1}}function _l(e,t,n,r,i,o,a,s,l){if(o&&e.queryGeometry.isAboveHorizon)return!1;o&&(l*=e.pixelToTileUnitsFactor);for(const c of t)for(const t of c){const c=t.add(s),u=i&&n.elevation?n.elevation.exaggeration()*i.getElevationAt(c.x,c.y,!0):0,h=o?c:xl(c,u,r),f=o?e.tilespaceRays.map((e=>Cl(e,u))):e.queryGeometry.screenGeometry,p=dl([],[t.x,t.y,u,1],r);if(!a&&o?l*=p[3]/n.cameraToCenterDistance:a&&!o&&(l*=n.cameraToCenterDistance/p[3]),xs(f,h,l))return!0}return!1}function xl(e,t,n){const r=dl([],[e.x,e.y,t,1],n);return new i(r[0]/r[3],r[1]/r[3])}const Al=Ks(0,0,0),wl=Ks(0,0,1);function Cl(e,t){const n=Xs();return Al[2]=t,e.intersectsPlane(Al,wl,n),new i(n[0],n[1])}class El extends bs{}function Sl(e,{width:t,height:n},r,i){if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==t*n*r)throw new RangeError("mismatched image size")}else i=new Uint8Array(t*n*r);return e.width=t,e.height=n,e.data=i,e}function Tl(e,t,n){const{width:r,height:i}=t;r===e.width&&i===e.height||(Bl(e,t,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,r),height:Math.min(e.height,i)},n),e.width=r,e.height=i,e.data=t.data)}function Bl(e,t,n,r,i,o){if(0===i.width||0===i.height)return t;if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range destination coordinates for image copy");const a=e.data,s=t.data;for(let l=0;l<i.height;l++){const c=((n.y+l)*e.width+n.x)*o,u=((r.y+l)*t.width+r.x)*o;for(let e=0;e<i.width*o;e++)s[u+e]=a[c+e]}return t}ai(El,{omit:["layers"]});class kl{constructor(e,t){Sl(this,e,1,t)}resize(e){Tl(this,new kl(e),1)}clone(){return new kl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,n,r,i){Bl(e,t,n,r,i,1)}}class Ml{constructor(e,t){Sl(this,e,4,t)}resize(e){Tl(this,new Ml(e),4)}replace(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Ml({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,n,r,i){Bl(e,t,n,r,i,4)}}ai(kl),ai(Ml);var Pl={paint:new _o({"heatmap-radius":new go(Ne.paint_heatmap["heatmap-radius"]),"heatmap-weight":new go(Ne.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new mo(Ne.paint_heatmap["heatmap-intensity"]),"heatmap-color":new bo(Ne.paint_heatmap["heatmap-color"]),"heatmap-opacity":new mo(Ne.paint_heatmap["heatmap-opacity"])})};function Il(e){const t={},n=e.resolution||256,r=e.clips?e.clips.length:1,i=e.image||new Ml({width:n,height:r}),o=(n,r,o)=>{t[e.evaluationKey]=o;const a=e.expression.evaluate(t);i.data[n+r+0]=Math.floor(255*a.r/a.a),i.data[n+r+1]=Math.floor(255*a.g/a.a),i.data[n+r+2]=Math.floor(255*a.b/a.a),i.data[n+r+3]=Math.floor(255*a.a)};if(e.clips)for(let t=0,i=0;t<r;++t,i+=4*n)for(let r=0,a=0;r<n;r++,a+=4){const s=r/(n-1),{start:l,end:c}=e.clips[t];o(i,a,l*(1-s)+c*s)}else for(let e=0,t=0;e<n;e++,t+=4)o(0,t,e/(n-1));return i}var Ol={paint:new _o({"hillshade-illumination-direction":new mo(Ne.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new mo(Ne.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new mo(Ne.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new mo(Ne.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new mo(Ne.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new mo(Ne.paint_hillshade["hillshade-accent-color"])})};const Dl=Eo([{name:"a_pos",components:2,type:"Int16"}],4),{members:zl}=Dl;var Ll=Fl,Rl=Fl;function Fl(e,t,n){n=n||2;var r,i,o,a,s,l,c,u=t&&t.length,h=u?t[0]*n:e.length,f=Ul(e,0,h,n,!0),p=[];if(!f||f.next===f.prev)return p;if(u&&(f=function(e,t,n,r){var i,o,a,s=[];for(i=0,o=t.length;i<o;i++)(a=Ul(e,t[i]*r,i<o-1?t[i+1]*r:e.length,r,!1))===a.next&&(a.steiner=!0),s.push(Yl(a));for(s.sort(Hl),i=0;i<s.length;i++)n=Nl(n=$l(s[i],n),n.next);return n}(e,t,f,n)),e.length>80*n){r=o=e[0],i=a=e[1];for(var d=n;d<h;d+=n)(s=e[d])<r&&(r=s),(l=e[d+1])<i&&(i=l),s>o&&(o=s),l>a&&(a=l);c=0!==(c=Math.max(o-r,a-i))?1/c:0}return jl(f,p,n,r,i,c),p}function Ul(e,t,n,r,i){var o,a;if(i===cc(e,t,n,r)>0)for(o=t;o<n;o+=r)a=ac(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=ac(o,e[o],e[o+1],a);return a&&ec(a,a.next)&&(sc(a),a=a.next),a}function Nl(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!ec(r,r.next)&&0!==Ql(r.prev,r,r.next))r=r.next;else{if(sc(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function jl(e,t,n,r,i,o,a){if(e){!a&&o&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=Zl(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,l,c=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<c&&(s++,r=r.nextZ);t++);for(l=c;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(e,r,i,o);for(var s,l,c=e;e.prev!==e.next;)if(s=e.prev,l=e.next,o?Gl(e,r,i,o):Vl(e))t.push(s.i/n),t.push(e.i/n),t.push(l.i/n),sc(e),e=l.next,c=l.next;else if((e=l)===c){a?1===a?jl(e=ql(Nl(e),t,n),t,n,r,i,o,2):2===a&&Wl(e,t,n,r,i,o):jl(Nl(e),t,n,r,i,o,1);break}}}function Vl(e){var t=e.prev,n=e,r=e.next;if(Ql(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(Kl(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Ql(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Gl(e,t,n,r){var i=e.prev,o=e,a=e.next;if(Ql(i,o,a)>=0)return!1;for(var s=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,c=Zl(i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,t,n,r),u=Zl(s,l,t,n,r),h=e.prevZ,f=e.nextZ;h&&h.z>=c&&f&&f.z<=u;){if(h!==e.prev&&h!==e.next&&Kl(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&Ql(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,f!==e.prev&&f!==e.next&&Kl(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Ql(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;h&&h.z>=c;){if(h!==e.prev&&h!==e.next&&Kl(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&Ql(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;f&&f.z<=u;){if(f!==e.prev&&f!==e.next&&Kl(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Ql(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function ql(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!ec(i,o)&&tc(i,r,r.next,o)&&ic(i,o)&&ic(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),sc(r),sc(r.next),r=e=o),r=r.next}while(r!==e);return Nl(r)}function Wl(e,t,n,r,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Jl(a,s)){var l=oc(a,s);return a=Nl(a,a.next),l=Nl(l,l.next),jl(a,t,n,r,i,o),void jl(l,t,n,r,i,o)}s=s.next}a=a.next}while(a!==e)}function Hl(e,t){return e.x-t.x}function $l(e,t){var n=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n;var l,c=n,u=n.x,h=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=u&&i!==r.x&&Kl(o<h?i:a,o,u,h,o<h?a:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),ic(r,e)&&(l<f||l===f&&(r.x>n.x||r.x===n.x&&Xl(n,r)))&&(n=r,f=l)),r=r.next}while(r!==c);return n}(e,t);if(!n)return t;var r=oc(n,e),i=Nl(n,n.next);return Nl(r,r.next),t===n?i:t}function Xl(e,t){return Ql(e.prev,e,t.prev)<0&&Ql(t.next,e,e.next)<0}function Zl(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Yl(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Kl(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function Jl(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&tc(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(ic(e,t)&&ic(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(Ql(e.prev,e,t.prev)||Ql(e,t.prev,t))||ec(e,t)&&Ql(e.prev,e,e.next)>0&&Ql(t.prev,t,t.next)>0)}function Ql(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function ec(e,t){return e.x===t.x&&e.y===t.y}function tc(e,t,n,r){var i=rc(Ql(e,t,n)),o=rc(Ql(e,t,r)),a=rc(Ql(n,r,e)),s=rc(Ql(n,r,t));return i!==o&&a!==s||!(0!==i||!nc(e,n,t))||!(0!==o||!nc(e,r,t))||!(0!==a||!nc(n,e,r))||!(0!==s||!nc(n,t,r))}function nc(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function rc(e){return e>0?1:e<0?-1:0}function ic(e,t){return Ql(e.prev,e,e.next)<0?Ql(e,t,e.next)>=0&&Ql(e,e.prev,t)>=0:Ql(e,t,e.prev)<0||Ql(e,e.next,t)<0}function oc(e,t){var n=new lc(e.i,e.x,e.y),r=new lc(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function ac(e,t,n,r){var i=new lc(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function sc(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function lc(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function cc(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}function uc(e,t,n,r,i){hc(e,t,n||0,r||e.length-1,i||pc)}function hc(e,t,n,r,i){for(;r>n;){if(r-n>600){var o=r-n+1,a=t-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);hc(e,t,Math.max(n,Math.floor(t-a*l/o+c)),Math.min(r,Math.floor(t+(o-a)*l/o+c)),i)}var u=e[t],h=n,f=r;for(fc(e,n,t),i(e[r],u)>0&&fc(e,n,r);h<f;){for(fc(e,h,f),h++,f--;i(e[h],u)<0;)h++;for(;i(e[f],u)>0;)f--}0===i(e[n],u)?fc(e,n,f):fc(e,++f,r),f<=t&&(n=f+1),t<=f&&(r=f-1)}}function fc(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function pc(e,t){return e<t?-1:e>t?1:0}function dc(e,t){const n=e.length;if(n<=1)return[e];const r=[];let i,o;for(let t=0;t<n;t++){const n=D(e[t]);0!==n&&(e[t].area=Math.abs(n),void 0===o&&(o=n<0),o===n<0?(i&&r.push(i),i=[e[t]]):i.push(e[t]))}if(i&&r.push(i),t>1)for(let e=0;e<r.length;e++)r[e].length<=t||(uc(r[e],t,1,r[e].length-1,mc),r[e]=r[e].slice(0,t));return r}function mc(e,t){return t.area-e.area}function gc(e,t,n){const r=n.patternDependencies;let i=!1;for(const n of t){const t=n.paint.get(`${e}-pattern`);t.isConstant()||(i=!0);const o=t.constantOr(null);o&&(i=!0,r[o.to]=!0,r[o.from]=!0)}return i}function yc(e,t,n,r,i){const o=i.patternDependencies;for(const a of t){const t=a.paint.get(`${e}-pattern`).value;if("constant"!==t.kind){let e=t.evaluate({zoom:r-1},n,{},i.availableImages),s=t.evaluate({zoom:r},n,{},i.availableImages),l=t.evaluate({zoom:r+1},n,{},i.availableImages);e=e&&e.name?e.name:e,s=s&&s.name?s.name:s,l=l&&l.name?l.name:l,o[e]=!0,o[s]=!0,o[l]=!0,n.patterns[a.id]={min:e,mid:s,max:l}}}return n}Fl.deviation=function(e,t,n,r){var i=t&&t.length,o=Math.abs(cc(e,0,i?t[0]*n:e.length,n));if(i)for(var a=0,s=t.length;a<s;a++)o-=Math.abs(cc(e,t[a]*n,a<s-1?t[a+1]*n:e.length,n));var l=0;for(a=0;a<r.length;a+=3){var c=r[a]*n,u=r[a+1]*n,h=r[a+2]*n;l+=Math.abs((e[c]-e[h])*(e[u+1]-e[c+1])-(e[c]-e[u])*(e[h+1]-e[c+1]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},Fl.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[i][o][a]);i>0&&n.holes.push(r+=e[i-1].length)}return n},Ll.default=Rl;class vc{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new To,this.indexArray=new jo,this.indexArray2=new Xo,this.programConfigurations=new Ua(e.layers,e.zoom),this.segments=new Za,this.segments2=new Za,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.projection=e.projection}populate(e,t,n,r){this.hasPattern=gc("fill",this.layers,t);const i=this.layers[0].layout.get("fill-sort-key"),o=[];for(const{feature:a,id:s,index:l,sourceLayerIndex:c}of e){const e=this.layers[0]._featureFilter.needGeometry,u=gs(a,e);if(!this.layers[0]._featureFilter.filter(new oo(this.zoom),u,n))continue;const h=i?i.evaluate(u,{},n,t.availableImages):void 0,f={id:s,properties:a.properties,type:a.type,sourceLayerIndex:c,index:l,geometry:e?u.geometry:ms(a,n,r),patterns:{},sortKey:h};o.push(f)}i&&o.sort(((e,t)=>e.sortKey-t.sortKey));for(const r of o){const{geometry:i,index:o,sourceLayerIndex:a}=r;if(this.hasPattern){const e=yc("fill",this.layers,r,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(r,i,o,n,{},t.availableImages);t.featureIndex.insert(e[o].feature,i,o,a,this.index)}}update(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}addFeatures(e,t,n,r,i){for(const e of this.patternFeatures)this.addFeature(e,e.geometry,e.index,t,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,zl),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,t,n,r,i,o=[]){for(const e of dc(t,500)){let t=0;for(const n of e)t+=n.length;const n=this.segments.prepareSegment(t,this.layoutVertexArray,this.indexArray),r=n.vertexLength,i=[],o=[];for(const t of e){if(0===t.length)continue;t!==e[0]&&o.push(i.length/2);const n=this.segments2.prepareSegment(t.length,this.layoutVertexArray,this.indexArray2),r=n.vertexLength;this.layoutVertexArray.emplaceBack(t[0].x,t[0].y),this.indexArray2.emplaceBack(r+t.length-1,r),i.push(t[0].x),i.push(t[0].y);for(let e=1;e<t.length;e++)this.layoutVertexArray.emplaceBack(t[e].x,t[e].y),this.indexArray2.emplaceBack(r+e-1,r+e),i.push(t[e].x),i.push(t[e].y);n.vertexLength+=t.length,n.primitiveLength+=t.length}const a=Ll(i,o);for(let e=0;e<a.length;e+=3)this.indexArray.emplaceBack(r+a[e],r+a[e+1],r+a[e+2]);n.vertexLength+=t,n.primitiveLength+=a.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,o,r)}}ai(vc,{omit:["layers","patternFeatures"]});const bc=new _o({"fill-sort-key":new go(Ne.layout_fill["fill-sort-key"])});var _c={paint:new _o({"fill-antialias":new mo(Ne.paint_fill["fill-antialias"]),"fill-opacity":new go(Ne.paint_fill["fill-opacity"]),"fill-color":new go(Ne.paint_fill["fill-color"]),"fill-outline-color":new go(Ne.paint_fill["fill-outline-color"]),"fill-translate":new mo(Ne.paint_fill["fill-translate"]),"fill-translate-anchor":new mo(Ne.paint_fill["fill-translate-anchor"]),"fill-pattern":new yo(Ne.paint_fill["fill-pattern"])}),layout:bc};const xc=Eo([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Ac=Eo([{name:"a_centroid_pos",components:2,type:"Uint16"}]),wc=Eo([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Cc}=xc;var Ec=Sc;function Sc(e,t,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=i,e.readFields(Tc,this,t)}function Tc(e,t,n){1==e?t.id=n.readVarint():2==e?function(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var r=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[r]=i}}(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function Bc(e){for(var t,n,r=0,i=0,o=e.length,a=o-1;i<o;a=i++)r+=((n=e[a]).x-(t=e[i]).x)*(t.y+n.y);return r}Sc.types=["Unknown","Point","LineString","Polygon"],Sc.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,r=1,o=0,a=0,s=0,l=[];e.pos<n;){if(o<=0){var c=e.readVarint();r=7&c,o=c>>3}if(o--,1===r||2===r)a+=e.readSVarint(),s+=e.readSVarint(),1===r&&(t&&l.push(t),t=[]),t.push(new i(a,s));else{if(7!==r)throw new Error("unknown command "+r);t&&t.push(t[0].clone())}}return t&&l.push(t),l},Sc.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,l=1/0,c=-1/0;e.pos<t;){if(r<=0){var u=e.readVarint();n=7&u,r=u>>3}if(r--,1===n||2===n)(i+=e.readSVarint())<a&&(a=i),i>s&&(s=i),(o+=e.readSVarint())<l&&(l=o),o>c&&(c=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,l,s,c]},Sc.prototype.toGeoJSON=function(e,t,n){var r,i,o=this.extent*Math.pow(2,n),a=this.extent*e,s=this.extent*t,l=this.loadGeometry(),c=Sc.types[this.type];function u(e){for(var t=0;t<e.length;t++){var n=e[t];e[t]=[360*(n.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(r=0;r<l.length;r++)h[r]=l[r][0];u(l=h);break;case 2:for(r=0;r<l.length;r++)u(l[r]);break;case 3:for(l=function(e){var t=e.length;if(t<=1)return[e];for(var n,r,i=[],o=0;o<t;o++){var a=Bc(e[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[e[o]]):n.push(e[o]))}return n&&i.push(n),i}(l),r=0;r<l.length;r++)for(i=0;i<l[r].length;i++)u(l[r][i])}1===l.length?l=l[0]:c="Multi"+c;var f={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(f.id=this.id),f};var kc=Mc;function Mc(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Pc,this,t),this.length=this._features.length}function Pc(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(function(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}(n))}function Ic(e,t,n){if(3===e){var r=new kc(n,n.readVarint()+n.pos);r.length&&(t[r.name]=r)}}Mc.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new Ec(this._pbf,t,this.extent,this._keys,this._values)};var Oc={VectorTile:function(e,t){this.layers=e.readFields(Ic,{},t)},VectorTileFeature:Ec,VectorTileLayer:kc};function Dc(e,t,n,r){const o=[],a=0===r?(e,t,n,r,o,a)=>{e.push(new i(a,n+(a-t)/(r-t)*(o-n)))}:(e,t,n,r,o,a)=>{e.push(new i(t+(a-n)/(o-n)*(r-t),a))};for(const i of e){const e=[];for(const o of i){if(o.length<=2)continue;const i=[];for(let e=0;e<o.length-1;e++){const s=o[e].x,l=o[e].y,c=o[e+1].x,u=o[e+1].y,h=0===r?s:l,f=0===r?c:u;h<t?f>t&&a(i,s,l,c,u,t):h>n?f<n&&a(i,s,l,c,u,n):i.push(o[e]),f<t&&h>=t&&a(i,s,l,c,u,t),f>n&&h<=n&&a(i,s,l,c,u,n)}let s=o[o.length-1];const l=0===r?s.x:s.y;l>=t&&l<=n&&i.push(s),i.length&&(s=i[i.length-1],i[0].x===s.x&&i[0].y===s.y||i.push(i[0]),e.push(i))}e.length&&o.push(e)}return o}const zc=Oc.VectorTileFeature.types,Lc=Math.pow(2,13);function Rc(e,t,n,r,i,o,a,s){e.emplaceBack((t<<1)+a,(n<<1)+o,(Math.floor(r*Lc)<<1)+i,Math.round(s))}function Fc(e,t,n){const r=16384;e.emplaceBack(t.x,t.y,t.z,n[0]*r,n[1]*r,n[2]*r)}class Uc{constructor(){this.acc=new i(0,0),this.polyCount=[]}startRing(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new i(e.x,e.y),this.max=new i(e.x,e.y))}append(e,t){this.currentPolyCount.edges++,this.acc._add(e);const n=this.min,r=this.max;e.x<n.x?n.x=e.x:e.x>r.x&&(r.x=e.x),e.y<n.y?n.y=e.y:e.y>r.y&&(r.y=e.y),((0===e.x||e.x===Ya)&&e.x===t.x)!=((0===e.y||e.y===Ya)&&e.y===t.y)&&this.processBorderOverlap(e,t),t.x<0!=e.x<0&&this.addBorderIntersection(0,nn(t.y,e.y,(0-t.x)/(e.x-t.x))),t.x>Ya!=e.x>Ya&&this.addBorderIntersection(1,nn(t.y,e.y,(Ya-t.x)/(e.x-t.x))),t.y<0!=e.y<0&&this.addBorderIntersection(2,nn(t.x,e.x,(0-t.y)/(e.y-t.y))),t.y>Ya!=e.y>Ya&&this.addBorderIntersection(3,nn(t.x,e.x,(Ya-t.y)/(e.y-t.y)))}addBorderIntersection(e,t){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const n=this.borders[e];t<n[0]&&(n[0]=t),t>n[1]&&(n[1]=t)}processBorderOverlap(e,t){if(e.x===t.x){if(e.y===t.y)return;const n=0===e.x?0:1;this.addBorderIntersection(n,t.y),this.addBorderIntersection(n,e.y)}else{const n=0===e.y?2:3;this.addBorderIntersection(n,t.x),this.addBorderIntersection(n,e.x)}}centroid(){const e=this.polyCount.reduce(((e,t)=>e+t.edges),0);return 0!==e?this.acc.div(e)._round():new i(0,0)}span(){return new i(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce(((e,t)=>e+ +(t[0]!==Number.MAX_VALUE)),0)}}class Nc{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.projection=e.projection,this.layoutVertexArray=new ko,this.centroidVertexArray=new fa,this.indexArray=new jo,this.programConfigurations=new Ua(e.layers,e.zoom),this.segments=new Za,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.enableTerrain=e.enableTerrain}populate(e,t,n,r){this.features=[],this.hasPattern=gc("fill-extrusion",this.layers,t),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(e){const t=Math.exp(Math.PI*(1-e.y/(1<<e.z)*2));return 80150034*t/(t*t+1)/Ya/(1<<e.z)}(n);for(const{feature:i,id:o,index:a,sourceLayerIndex:s}of e){const e=this.layers[0]._featureFilter.needGeometry,l=gs(i,e);if(!this.layers[0]._featureFilter.filter(new oo(this.zoom),l,n))continue;const c={id:o,sourceLayerIndex:s,index:a,geometry:e?l.geometry:ms(i,n,r),properties:i.properties,type:i.type,patterns:{}},u=this.layoutVertexArray.length;this.hasPattern?this.features.push(yc("fill-extrusion",this.layers,c,this.zoom,t)):this.addFeature(c,c.geometry,a,n,{},t.availableImages,r),t.featureIndex.insert(i,c.geometry,a,s,this.index,u)}this.sortBorders()}addFeatures(e,t,n,r,i){for(const e of this.features){const{geometry:o}=e;this.addFeature(e,o,e.index,t,n,r,i)}this.sortBorders()}update(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Cc),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=e.createVertexBuffer(this.layoutVertexExtArray,wc.members,!0))),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,Ac.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,t,n,r,o,a,s){const l=[new i(0,0),new i(Ya,Ya)],c=s.projection,u="globe"===c.name,h=this.enableTerrain&&!u?new Uc:null;u&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new ea);const f=dc(t,500);for(let e=f.length-1;e>=0;e--){const t=f[e];(0===t.length||(p=t[0]).every((e=>e.x<=0))||p.every((e=>e.x>=Ya))||p.every((e=>e.y<=0))||p.every((e=>e.y>=Ya)))&&f.splice(e,1)}var p;let d;if(u){const e=11.25,t=1<<r.z,n=os(r.x/t),o=os((r.x+1)/t),a=as(r.y/t),s=as((r.y+1)/t);d=function(e,t,n,r,o=0,a){const s=[];if(!e.length||!n||!r)return s;const l=(e,t)=>{for(const n of e)s.push({polygon:n,bounds:t})},c=Math.ceil(Math.log2(n)),u=Math.ceil(Math.log2(r)),h=c-u,f=[];for(let e=0;e<Math.abs(h);e++)f.push(h>0?0:1);for(let e=0;e<Math.min(c,u);e++)f.push(0),f.push(1);let p=e;if(p=Dc(p,t[0].y-o,t[1].y+o,1),p=Dc(p,t[0].x-o,t[1].x+o,0),!p.length)return s;const d=[];for(f.length?d.push({polygons:p,bounds:t,depth:0}):l(p,t);d.length;){const e=d.pop(),t=e.depth,n=f[t],r=e.bounds[0],s=e.bounds[1],c=0===n?r.x:r.y,u=0===n?s.x:s.y,h=a?a(n,c,u):.5*(c+u),p=Dc(e.polygons,c-o,h+o,n),m=Dc(e.polygons,h-o,u+o,n);if(p.length){const e=[r,new i(0===n?h:s.x,1===n?h:s.y)];f.length>t+1?d.push({polygons:p,bounds:e,depth:t+1}):l(p,e)}if(m.length){const e=[new i(0===n?h:r.x,1===n?h:r.y),s];f.length>t+1?d.push({polygons:m,bounds:e,depth:t+1}):l(m,e)}}return s}(f,l,Math.ceil((o-n)/e),Math.ceil((a-s)/e),1,((e,n,i)=>{if(0===e)return.5*(n+i);{const e=as((r.y+n/Ya)/t);return(rs(.5*(as((r.y+i/Ya)/t)+e))*t-r.y)*Ya}}))}else{d=[];for(const e of f)d.push({polygon:e,bounds:l})}for(const t of d){const n=t.polygon;let i=0,o=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(let e=0;e<n.length;e++){const a=n[e];if(0===a.length)continue;i+=a.length;let s=0;h&&h.startRing(a[0]);for(let e=0;e<a.length;e++){const n=a[e];if(e>=1){const i=a[e-1];if(!jc(n,i,t.bounds)){h&&h.append(n,i),o.vertexLength+4>Za.MAX_VERTEX_ARRAY_LENGTH&&(o=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const e=n.sub(i)._perp(),t=e.x/(Math.abs(e.x)+Math.abs(e.y)),a=e.y>0?1:0,l=i.dist(n);s+l>32768&&(s=0),Rc(this.layoutVertexArray,n.x,n.y,t,a,0,0,s),Rc(this.layoutVertexArray,n.x,n.y,t,a,0,1,s),s+=l,Rc(this.layoutVertexArray,i.x,i.y,t,a,0,0,s),Rc(this.layoutVertexArray,i.x,i.y,t,a,0,1,s);const f=o.vertexLength;if(this.indexArray.emplaceBack(f,f+2,f+1),this.indexArray.emplaceBack(f+1,f+2,f+3),o.vertexLength+=4,o.primitiveLength+=2,u){const e=this.layoutVertexExtArray,t=c.projectTilePoint(n.x,n.y,r),o=c.projectTilePoint(i.x,i.y,r),a=c.upVector(r,n.x,n.y),s=c.upVector(r,i.x,i.y);Fc(e,t,a),Fc(e,t,a),Fc(e,o,s),Fc(e,o,s)}}}}}if(o.vertexLength+i>Za.MAX_VERTEX_ARRAY_LENGTH&&(o=this.segments.prepareSegment(i,this.layoutVertexArray,this.indexArray)),"Polygon"!==zc[e.type])continue;const a=[],s=[],l=o.vertexLength;for(let e=0;e<n.length;e++){const t=n[e];if(0!==t.length){t!==n[0]&&s.push(a.length/2);for(let e=0;e<t.length;e++){const n=t[e];Rc(this.layoutVertexArray,n.x,n.y,0,0,1,1,0),a.push(n.x),a.push(n.y),h&&h.currentPolyCount.top++,u&&Fc(this.layoutVertexExtArray,c.projectTilePoint(n.x,n.y,r),c.upVector(r,n.x,n.y))}}}const f=Ll(a,s);for(let e=0;e<f.length;e+=3)this.indexArray.emplaceBack(l+f[e],l+f[e+2],l+f[e+1]);o.primitiveLength+=f.length/3,o.vertexLength+=i}if(h&&h.polyCount.length>0){if(h.borders){h.vertexArrayOffset=this.centroidVertexArray.length;const e=h.borders,t=this.featuresOnBorder.push(h)-1;for(let n=0;n<4;n++)e[n][0]!==Number.MAX_VALUE&&this.borders[n].push(t)}this.encodeCentroid(h.borders?void 0:h.centroid(),h)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,o,a,r)}sortBorders(){for(let e=0;e<4;e++)this.borders[e].sort(((t,n)=>this.featuresOnBorder[t].borders[e][0]-this.featuresOnBorder[n].borders[e][0]))}encodeCentroid(e,t,n=!0){let r,i;if(e)if(0!==e.y){const n=t.span()._mult(this.tileToMeter);r=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(n.x/10)),i=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(n.y/10))}else r=Math.ceil(7*(e.x+450)),i=0;else r=0,i=+n;let o=n?this.centroidVertexArray.length:t.vertexArrayOffset;for(const e of t.polyCount){n&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*e.edges+e.top);for(let t=0;t<2*e.edges;t++)this.centroidVertexArray.emplace(o++,0,i),this.centroidVertexArray.emplace(o++,r,i);for(let t=0;t<e.top;t++)this.centroidVertexArray.emplace(o++,r,i)}}}function jc(e,t,n){return e.x===t.x&&(e.x<n[0].x||e.x>n[1].x)||e.y===t.y&&(e.y<n[0].y||e.y>n[1].y)}ai(Nc,{omit:["layers","features"]}),ai(Uc);var Vc={paint:new _o({"fill-extrusion-opacity":new mo(Ne["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new go(Ne["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new mo(Ne["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new mo(Ne["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new yo(Ne["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new go(Ne["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new go(Ne["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new mo(Ne["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Gc(e,t){return e.x*t.x+e.y*t.y}function qc(e,t){if(1===e.length){let n=0;const r=t[n++];let i;for(;!i||r.equals(i);)if(i=t[n++],!i)return 1/0;for(;n<t.length;n++){const o=t[n],a=e[0],s=i.sub(r),l=o.sub(r),c=a.sub(r),u=Gc(s,s),h=Gc(s,l),f=Gc(l,l),p=Gc(c,s),d=Gc(c,l),m=u*f-h*h,g=(f*p-h*d)/m,y=(u*d-h*p)/m,v=r.z*(1-g-y)+i.z*g+o.z*y;if(isFinite(v))return v}return 1/0}{let e=1/0;for(const n of t)e=Math.min(e,n.z);return e}}function Wc(e){const t=new i(e[0],e[1]);return t.z=e[2],t}function Hc(e,t,n,r,i,o,a,s){const l=a*i.getElevationAt(e,t,!0,!0),c=0!==o[0],u=c?0===o[1]?a*(o[0]/7-450):a*function(e,t,n){const r=Math.floor(t[0]/8),i=Math.floor(t[1]/8),o=10*(t[0]-8*r),a=10*(t[1]-8*i),s=e.getElevationAt(r,i,!0,!0),l=e.getMeterToDEM(n),c=Math.floor(.5*(o*l-1)),u=Math.floor(.5*(a*l-1)),h=e.tileCoordToPixel(r,i),f=2*c+1,p=2*u+1,d=function(e,t,n,r,i){return[e.getElevationAtPixel(t,n,!0),e.getElevationAtPixel(t+i,n,!0),e.getElevationAtPixel(t,n+i,!0),e.getElevationAtPixel(t+r,n+i,!0)]}(e,h.x-c,h.y-u,f,p),m=Math.abs(d[0]-d[1]),g=Math.abs(d[2]-d[3]),y=Math.abs(d[0]-d[2])+Math.abs(d[1]-d[3]),v=Math.min(.25,.5*l*(m+g)/f),b=Math.min(.25,.5*l*y/p);return s+Math.max(v*o,b*a)}(i,o,s):l;return{base:l+(0===n)?-1:n,top:c?Math.max(u+r,l+n+2):l+r}}const $c=Eo([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:Xc}=$c,Zc=Eo([{name:"a_packed",components:3,type:"Float32"}]),{members:Yc}=Zc,Kc=Oc.VectorTileFeature.types,Jc=Math.cos(Math.PI/180*37.5);class Qc{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.projection=e.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((e=>{this.gradients[e.id]={}})),this.layoutVertexArray=new Mo,this.layoutVertexArray2=new Po,this.indexArray=new jo,this.programConfigurations=new Ua(e.layers,e.zoom),this.segments=new Za,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,n,r){this.hasPattern=gc("line",this.layers,t);const i=this.layers[0].layout.get("line-sort-key"),o=[];for(const{feature:t,id:a,index:s,sourceLayerIndex:l}of e){const e=this.layers[0]._featureFilter.needGeometry,c=gs(t,e);if(!this.layers[0]._featureFilter.filter(new oo(this.zoom),c,n))continue;const u=i?i.evaluate(c,{},n):void 0,h={id:a,properties:t.properties,type:t.type,sourceLayerIndex:l,index:s,geometry:e?c.geometry:ms(t,n,r),patterns:{},sortKey:u};o.push(h)}i&&o.sort(((e,t)=>e.sortKey-t.sortKey));const{lineAtlas:a,featureIndex:s}=t,l=this.addConstantDashes(a);for(const r of o){const{geometry:i,index:o,sourceLayerIndex:c}=r;if(l&&this.addFeatureDashes(r,a),this.hasPattern){const e=yc("line",this.layers,r,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(r,i,o,n,a.positions,t.availableImages);s.insert(e[o].feature,i,o,c,this.index)}}addConstantDashes(e){let t=!1;for(const n of this.layers){const r=n.paint.get("line-dasharray").value,i=n.layout.get("line-cap").value;if("constant"!==r.kind||"constant"!==i.kind)t=!0;else{const t=i.value,n=r.value;if(!n)continue;e.addDash(n.from,t),e.addDash(n.to,t),n.other&&e.addDash(n.other,t)}}return t}addFeatureDashes(e,t){const n=this.zoom;for(const r of this.layers){const i=r.paint.get("line-dasharray").value,o=r.layout.get("line-cap").value;if("constant"===i.kind&&"constant"===o.kind)continue;let a,s,l,c,u,h;if("constant"===i.kind){const e=i.value;if(!e)continue;a=e.other||e.to,s=e.to,l=e.from}else a=i.evaluate({zoom:n-1},e),s=i.evaluate({zoom:n},e),l=i.evaluate({zoom:n+1},e);"constant"===o.kind?c=u=h=o.value:(c=o.evaluate({zoom:n-1},e),u=o.evaluate({zoom:n},e),h=o.evaluate({zoom:n+1},e)),t.addDash(a,c),t.addDash(s,u),t.addDash(l,h);const f=t.getKey(a,c),p=t.getKey(s,u),d=t.getKey(l,h);e.patterns[r.id]={min:f,mid:p,max:d}}}update(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}addFeatures(e,t,n,r,i){for(const e of this.patternFeatures)this.addFeature(e,e.geometry,e.index,t,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Yc)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Xc),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,t,n,r,i,o){const a=this.layers[0].layout,s=a.get("line-join").evaluate(e,{}),l=a.get("line-cap").evaluate(e,{}),c=a.get("line-miter-limit"),u=a.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const n of t)this.addLine(n,e,s,l,c,u);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,o,r)}addLine(e,t,n,r,i,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let t=0;t<e.length-1;t++)this.totalDistance+=e[t].dist(e[t+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const a="Polygon"===Kc[t.type];let s=e.length;for(;s>=2&&e[s-1].equals(e[s-2]);)s--;let l=0;for(;l<s-1&&e[l].equals(e[l+1]);)l++;if(s<(a?3:2))return;"bevel"===n&&(i=1.05);const c=this.overscaling<=16?122880/(512*this.overscaling):0,u=this.segments.prepareSegment(10*s,this.layoutVertexArray,this.indexArray);let h,f,p,d,m;this.e1=this.e2=-1,a&&(h=e[s-2],m=e[l].sub(h)._unit()._perp());for(let t=l;t<s;t++){if(p=t===s-1?a?e[l+1]:void 0:e[t+1],p&&e[t].equals(p))continue;m&&(d=m),h&&(f=h),h=e[t],m=p?p.sub(h)._unit()._perp():d,d=d||m;let g=d.add(m);0===g.x&&0===g.y||g._unit();const y=d.x*m.x+d.y*m.y,v=g.x*m.x+g.y*m.y,b=0!==v?1/v:1/0,_=2*Math.sqrt(2-2*v),x=v<Jc&&f&&p,A=d.x*m.y-d.y*m.x>0;if(x&&t>l){const e=h.dist(f);if(e>2*c){const t=h.sub(h.sub(f)._mult(c/e)._round());this.updateDistance(f,t),this.addCurrentVertex(t,d,0,0,u),f=t}}const w=f&&p;let C=w?n:a?"butt":r;if(w&&"round"===C&&(b<o?C="miter":b<=2&&(C="fakeround")),"miter"===C&&b>i&&(C="bevel"),"bevel"===C&&(b>2&&(C="flipbevel"),b<i&&(C="miter")),f&&this.updateDistance(f,h),"miter"===C)g._mult(b),this.addCurrentVertex(h,g,0,0,u);else if("flipbevel"===C){if(b>100)g=m.mult(-1);else{const e=b*d.add(m).mag()/d.sub(m).mag();g._perp()._mult(e*(A?-1:1))}this.addCurrentVertex(h,g,0,0,u),this.addCurrentVertex(h,g.mult(-1),0,0,u)}else if("bevel"===C||"fakeround"===C){const e=-Math.sqrt(b*b-1),t=A?e:0,n=A?0:e;if(f&&this.addCurrentVertex(h,d,t,n,u),"fakeround"===C){const e=Math.round(180*_/Math.PI/20);for(let t=1;t<e;t++){let n=t/e;if(.5!==n){const e=n-.5;n+=n*e*(n-1)*((1.0904+y*(y*(3.55645-1.43519*y)-3.2452))*e*e+(.848013+y*(.215638*y-1.06021)))}const r=m.sub(d)._mult(n)._add(d)._unit()._mult(A?-1:1);this.addHalfVertex(h,r.x,r.y,!1,A,0,u)}}p&&this.addCurrentVertex(h,m,-t,-n,u)}else if("butt"===C)this.addCurrentVertex(h,g,0,0,u);else if("square"===C){const e=f?1:-1;f||this.addCurrentVertex(h,g,e,e,u),this.addCurrentVertex(h,g,0,0,u),f&&this.addCurrentVertex(h,g,e,e,u)}else"round"===C&&(f&&(this.addCurrentVertex(h,d,0,0,u),this.addCurrentVertex(h,d,1,1,u,!0)),p&&(this.addCurrentVertex(h,m,-1,-1,u,!0),this.addCurrentVertex(h,m,0,0,u)));if(x&&t<s-1){const e=h.dist(p);if(e>2*c){const t=h.add(p.sub(h)._mult(c/e)._round());this.updateDistance(h,t),this.addCurrentVertex(t,m,0,0,u),h=t}}}}addCurrentVertex(e,t,n,r,i,o=!1){const a=t.y*r-t.x,s=-t.y-t.x*r;this.addHalfVertex(e,t.x+t.y*n,t.y-t.x*n,o,!1,n,i),this.addHalfVertex(e,a,s,o,!0,-r,i)}addHalfVertex({x:e,y:t},n,r,i,o,a,s){this.layoutVertexArray.emplaceBack((e<<1)+(i?1:0),(t<<1)+(o?1:0),Math.round(63*n)+128,Math.round(63*r)+128,1+(0===a?0:a<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineSoFar);const l=s.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),s.primitiveLength++),o?this.e2=l:this.e1=l}updateScaledDistance(){if(this.lineClips){const e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}ai(Qc,{omit:["layers","patternFeatures"]});const eu=new _o({"line-cap":new go(Ne.layout_line["line-cap"]),"line-join":new go(Ne.layout_line["line-join"]),"line-miter-limit":new mo(Ne.layout_line["line-miter-limit"]),"line-round-limit":new mo(Ne.layout_line["line-round-limit"]),"line-sort-key":new go(Ne.layout_line["line-sort-key"])});var tu={paint:new _o({"line-opacity":new go(Ne.paint_line["line-opacity"]),"line-color":new go(Ne.paint_line["line-color"]),"line-translate":new mo(Ne.paint_line["line-translate"]),"line-translate-anchor":new mo(Ne.paint_line["line-translate-anchor"]),"line-width":new go(Ne.paint_line["line-width"]),"line-gap-width":new go(Ne.paint_line["line-gap-width"]),"line-offset":new go(Ne.paint_line["line-offset"]),"line-blur":new go(Ne.paint_line["line-blur"]),"line-dasharray":new yo(Ne.paint_line["line-dasharray"]),"line-pattern":new yo(Ne.paint_line["line-pattern"]),"line-gradient":new bo(Ne.paint_line["line-gradient"])}),layout:eu};const nu=new class extends go{possiblyEvaluate(e,t){return t=new oo(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),super.possiblyEvaluate(e,t)}evaluate(e,t,n,r){return t=_({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(e,t,n,r)}}(tu.paint.properties["line-width"].specification);function ru(e,t){return t>0?t+2*e:e}nu.useIntegerZoom=!0;const iu=Eo([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"},{name:"a_z_tile_anchor",components:4,type:"Int16"}],4),ou=Eo([{name:"a_projected_pos",components:3,type:"Float32"}],4);Eo([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const au=Eo([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),su=Eo([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Eo([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const lu=Eo([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),cu=Eo([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Eo([{name:"triangle",components:3,type:"Uint16"}]),Eo([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Eo([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Eo([{type:"Float32",name:"offsetX"}]),Eo([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var uu=24;const hu=128;function fu(e,t){const{expression:n}=t;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new oo(e+1))};if("source"===n.kind)return{kind:"source"};{const{zoomStops:t,interpolationType:r}=n;let i=0;for(;i<t.length&&t[i]<=e;)i++;i=Math.max(0,i-1);let o=i;for(;o<t.length&&t[o]<e+1;)o++;o=Math.min(t.length-1,o);const a=t[i],s=t[o];return"composite"===n.kind?{kind:"composite",minZoom:a,maxZoom:s,interpolationType:r}:{kind:"camera",minZoom:a,maxZoom:s,minSize:n.evaluate(new oo(a)),maxSize:n.evaluate(new oo(s)),interpolationType:r}}}function pu(e,{uSize:t,uSizeT:n},{lowerSize:r,upperSize:i}){return"source"===e.kind?r/hu:"composite"===e.kind?nn(r/hu,i/hu,n):t}function du(e,t){let n=0,r=0;if("constant"===e.kind)r=e.layoutSize;else if("source"!==e.kind){const{interpolationType:i,minZoom:o,maxZoom:a}=e,s=i?m(An.interpolationFactor(i,t,o,a),0,1):0;"camera"===e.kind?r=nn(e.minSize,e.maxSize,s):n=s}return{uSizeT:n,uSize:r}}var mu=Object.freeze({__proto__:null,getSizeData:fu,evaluateSizeForFeature:pu,evaluateSizeForZoom:du,SIZE_PACK_FACTOR:hu});function gu(e,t,n){return e.sections.forEach((e=>{e.text=function(e,t,n){const r=t.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?e=e.toLocaleUpperCase():"lowercase"===r&&(e=e.toLocaleLowerCase()),io.applyArabicShaping&&(e=io.applyArabicShaping(e)),e}(e.text,t,n)})),e}const yu={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function vu(e){return""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e}function bu(e){return""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e}var _u=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,c=l>>1,u=-7,h=n?i-1:0,f=n?-1:1,p=e[t+h];for(h+=f,o=p&(1<<-u)-1,p>>=-u,u+=s;u>0;o=256*o+e[t+h],h+=f,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;u>0;a=256*a+e[t+h],h+=f,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)},xu=function(e,t,n,r,i,o){var a,s,l,c=8*o-i-1,u=(1<<c)-1,h=u>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+h>=1?f/l:f*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(t*l-1)*Math.pow(2,i),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+p]=255&a,p+=d,a/=256,c-=8);e[n+p-d]|=128*m},Au=wu;function wu(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}wu.Varint=0,wu.Fixed64=1,wu.Bytes=2,wu.Fixed32=5;var Cu=4294967296,Eu=1/Cu,Su="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Tu(e){return e.type===wu.Bytes?e.readVarint()+e.pos:e.pos+1}function Bu(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function ku(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=e;i--)n.buf[i+r]=n.buf[i]}function Mu(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function Pu(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function Iu(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function Ou(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function Du(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function zu(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function Lu(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function Ru(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function Fu(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function Uu(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function Nu(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function ju(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function Vu(e,t,n){t.glyphs=[],1===e&&n.readMessage(Gu,t)}function Gu(e,t,n){if(3===e){const{id:e,bitmap:r,width:i,height:o,left:a,top:s,advance:l}=n.readMessage(qu,{});t.glyphs.push({id:e,bitmap:new kl({width:i+6,height:o+6},r),metrics:{width:i,height:o,left:a,top:s,advance:l}})}else 4===e?t.ascender=n.readSVarint():5===e&&(t.descender=n.readSVarint())}function qu(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}function Wu(e){let t=0,n=0;for(const r of e)t+=r.w*r.h,n=Math.max(n,r.w);e.sort(((e,t)=>t.h-e.h));const r=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),n),h:1/0}];let i=0,o=0;for(const t of e)for(let e=r.length-1;e>=0;e--){const n=r[e];if(!(t.w>n.w||t.h>n.h)){if(t.x=n.x,t.y=n.y,o=Math.max(o,t.y+t.h),i=Math.max(i,t.x+t.w),t.w===n.w&&t.h===n.h){const t=r.pop();e<r.length&&(r[e]=t)}else t.h===n.h?(n.x+=t.w,n.w-=t.w):t.w===n.w?(n.y+=t.h,n.h-=t.h):(r.push({x:n.x+t.w,y:n.y,w:n.w-t.w,h:t.h}),n.y+=t.h,n.h-=t.h);break}}return{w:i,h:o,fill:t/(i*o)||0}}wu.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,e(i,t,this),this.pos===o&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Uu(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=ju(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Uu(this.buf,this.pos)+Uu(this.buf,this.pos+4)*Cu;return this.pos+=8,e},readSFixed64:function(){var e=Uu(this.buf,this.pos)+ju(this.buf,this.pos+4)*Cu;return this.pos+=8,e},readFloat:function(){var e=_u(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=_u(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,r=this.buf;return t=127&(n=r[this.pos++]),n<128?t:(t|=(127&(n=r[this.pos++]))<<7,n<128?t:(t|=(127&(n=r[this.pos++]))<<14,n<128?t:(t|=(127&(n=r[this.pos++]))<<21,n<128?t:function(e,t,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return Bu(e,r,t);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return Bu(e,r,t);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return Bu(e,r,t);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return Bu(e,r,t);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return Bu(e,r,t);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return Bu(e,r,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=r[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&Su?function(e,t,n){return Su.decode(e.subarray(t,n))}(this.buf,t,e):function(e,t,n){for(var r="",i=t;i<n;){var o,a,s,l=e[i],c=null,u=l>239?4:l>223?3:l>191?2:1;if(i+u>n)break;1===u?l<128&&(c=l):2===u?128==(192&(o=e[i+1]))&&(c=(31&l)<<6|63&o)<=127&&(c=null):3===u?(a=e[i+2],128==(192&(o=e[i+1]))&&128==(192&a)&&((c=(15&l)<<12|(63&o)<<6|63&a)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(a=e[i+2],s=e[i+3],128==(192&(o=e[i+1]))&&128==(192&a)&&128==(192&s)&&((c=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,r+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),r+=String.fromCharCode(c),i+=u}return r}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==wu.Bytes)return e.push(this.readVarint(t));var n=Tu(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==wu.Bytes)return e.push(this.readSVarint());var t=Tu(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==wu.Bytes)return e.push(this.readBoolean());var t=Tu(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==wu.Bytes)return e.push(this.readFloat());var t=Tu(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==wu.Bytes)return e.push(this.readDouble());var t=Tu(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==wu.Bytes)return e.push(this.readFixed32());var t=Tu(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==wu.Bytes)return e.push(this.readSFixed32());var t=Tu(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==wu.Bytes)return e.push(this.readFixed64());var t=Tu(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==wu.Bytes)return e.push(this.readSFixed64());var t=Tu(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===wu.Varint)for(;this.buf[this.pos++]>127;);else if(t===wu.Bytes)this.pos=this.readVarint()+this.pos;else if(t===wu.Fixed32)this.pos+=4;else{if(t!==wu.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Nu(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Nu(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Nu(this.buf,-1&e,this.pos),Nu(this.buf,Math.floor(e*Eu),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Nu(this.buf,-1&e,this.pos),Nu(this.buf,Math.floor(e*Eu),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var n,r;if(e>=0?(n=e%4294967296|0,r=e/4294967296|0):(r=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:(n=0,r=r+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,n.buf[n.pos]=127&(e>>>=7)}(n,0,t),function(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(r,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,n){for(var r,i,o=0;o<t.length;o++){if((r=t.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):i=r;continue}if(r<56320){e[n++]=239,e[n++]=191,e[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(e[n++]=239,e[n++]=191,e[n++]=189,i=null);r<128?e[n++]=r:(r<2048?e[n++]=r>>6|192:(r<65536?e[n++]=r>>12|224:(e[n++]=r>>18|240,e[n++]=r>>12&63|128),e[n++]=r>>6&63|128),e[n++]=63&r|128)}return n}(this.buf,e,this.pos);var n=this.pos-t;n>=128&&ku(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),xu(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),xu(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&ku(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,wu.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,Mu,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,Pu,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,Du,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,Iu,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,Ou,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,zu,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,Lu,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,Ru,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,Fu,t)},writeBytesField:function(e,t){this.writeTag(e,wu.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,wu.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,wu.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,wu.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,wu.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,wu.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,wu.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,wu.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,wu.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,wu.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};class Hu{constructor(e,{pixelRatio:t,version:n,stretchX:r,stretchY:i,content:o}){this.paddedRect=e,this.pixelRatio=t,this.stretchX=r,this.stretchY=i,this.content=o,this.version=n}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class $u{constructor(e,t){const n={},r={};this.haveRenderCallbacks=[];const i=[];this.addImages(e,n,i),this.addImages(t,r,i);const{w:o,h:a}=Wu(i),s=new Ml({width:o||1,height:a||1});for(const t in e){const r=e[t],i=n[t].paddedRect;Ml.copy(r.data,s,{x:0,y:0},{x:i.x+1,y:i.y+1},r.data)}for(const e in t){const n=t[e],i=r[e].paddedRect,o=i.x+1,a=i.y+1,l=n.data.width,c=n.data.height;Ml.copy(n.data,s,{x:0,y:0},{x:o,y:a},n.data),Ml.copy(n.data,s,{x:0,y:c-1},{x:o,y:a-1},{width:l,height:1}),Ml.copy(n.data,s,{x:0,y:0},{x:o,y:a+c},{width:l,height:1}),Ml.copy(n.data,s,{x:l-1,y:0},{x:o-1,y:a},{width:1,height:c}),Ml.copy(n.data,s,{x:0,y:0},{x:o+l,y:a},{width:1,height:c})}this.image=s,this.iconPositions=n,this.patternPositions=r}addImages(e,t,n){for(const r in e){const i=e[r],o={x:0,y:0,w:i.data.width+2,h:i.data.height+2};n.push(o),t[r]=new Hu(o,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(r)}}patchUpdatedImages(e,t){this.haveRenderCallbacks=this.haveRenderCallbacks.filter((t=>e.hasImage(t))),e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const n in e.updatedImages)this.patchUpdatedImage(this.iconPositions[n],e.getImage(n),t),this.patchUpdatedImage(this.patternPositions[n],e.getImage(n),t)}patchUpdatedImage(e,t,n){if(!e||!t)return;if(e.version===t.version)return;e.version=t.version;const[r,i]=e.tl;n.update(t.data,void 0,{x:r,y:i})}}ai(Hu),ai($u);const Xu={horizontal:1,vertical:2,horizontalOnly:3};class Zu{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,t){const n=new Zu;return n.scale=e||1,n.fontStack=t,n}static forImage(e){const t=new Zu;return t.imageName=e,t}}class Yu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,t){const n=new Yu;for(let r=0;r<e.sections.length;r++){const i=e.sections[r];i.image?n.addImageSection(i):n.addTextSection(i,t)}return n}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSections(){return this.sections}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(e){this.text=function(e,t){let n="";for(let r=0;r<e.length;r++){const i=e.charCodeAt(r+1)||null,o=e.charCodeAt(r-1)||null;n+=!t&&(i&&Gi(i)&&!yu[e[r+1]]||o&&Gi(o)&&!yu[e[r-1]])||!yu[e[r]]?e[r]:yu[e[r]]}return n}(this.text,e)}trim(){let e=0;for(let t=0;t<this.text.length&&Ju[this.text.charCodeAt(t)];t++)e++;let t=this.text.length;for(let n=this.text.length-1;n>=0&&n>=e&&Ju[this.text.charCodeAt(n)];n--)t--;this.text=this.text.substring(e,t),this.sectionIndex=this.sectionIndex.slice(e,t)}substring(e,t){const n=new Yu;return n.text=this.text.substring(e,t),n.sectionIndex=this.sectionIndex.slice(e,t),n.sections=this.sections,n}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((e,t)=>Math.max(e,this.sections[t].scale)),0)}addTextSection(e,t){this.text+=e.text,this.sections.push(Zu.forText(e.scale,e.fontStack||t));const n=this.sections.length-1;for(let t=0;t<e.text.length;++t)this.sectionIndex.push(n)}addImageSection(e){const t=e.image?e.image.name:"";if(0===t.length)return void I("Can't add FormattedSection with an empty image.");const n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(Zu.forImage(t)),this.sectionIndex.push(this.sections.length-1)):I("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Ku(e,t,n,r,i,o,a,s,l,c,u,h,f,p,d,m){const g=Yu.fromFeature(e,i);let y;h===Xu.vertical&&g.verticalizePunctuation(f);const{processBidirectionalText:v,processStyledBidirectionalText:b}=io;if(v&&1===g.sections.length){y=[];const e=v(g.toString(),oh(g,c,o,t,r,p,d));for(const t of e){const e=new Yu;e.text=t,e.sections=g.sections;for(let n=0;n<t.length;n++)e.sectionIndex.push(0);y.push(e)}}else if(b){y=[];const e=b(g.text,g.sectionIndex,oh(g,c,o,t,r,p,d));for(const t of e){const e=new Yu;e.text=t[0],e.sectionIndex=t[1],e.sections=g.sections,y.push(e)}}else y=function(e,t){const n=[],r=e.text;let i=0;for(const r of t)n.push(e.substring(i,r)),i=r;return i<r.length&&n.push(e.substring(i,r.length)),n}(g,oh(g,c,o,t,r,p,d));const _=[],x={positionedLines:_,text:g.toString(),top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:h,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(e,t,n,r,i,o,a,s,l,c,u,h){let f=0,p=0,d=0;const m="right"===s?1:"left"===s?0:.5;let g=!1;for(const e of i){const n=e.getSections();for(const e of n){if(e.imageName)continue;const n=t[e.fontStack];if(n&&(g=void 0!==n.ascender&&void 0!==n.descender,!g))break}if(!g)break}let y=0;for(const a of i){a.trim();const i=a.getMaxScale(),s=(i-1)*uu,b={positionedGlyphs:[],lineOffset:0};e.positionedLines[y]=b;const _=b.positionedGlyphs;let x=0;if(!a.length()){p+=o,++y;continue}let A=0,w=0;for(let o=0;o<a.length();o++){const s=a.getSection(o),d=a.getSectionIndex(o),m=a.getCharCode(o);let y=s.scale,b=null,C=null,E=null,S=uu,T=0;const B=!(l===Xu.horizontal||!u&&!Vi(m)||u&&(Ju[m]||(v=m,fi(v)||pi(v)||di(v)||Oi(v)||Ri(v))));if(s.imageName){const t=r[s.imageName];if(!t)continue;E=s.imageName,e.iconsInText=e.iconsInText||!0,C=t.paddedRect;const n=t.displaySize;y=y*uu/h,b={width:n[0],height:n[1],left:1,top:-3,advance:B?n[1]:n[0],localGlyph:!1},T=g?-b.height*y:i*uu-17-n[1]*y,S=b.advance;const o=(B?n[0]:n[1])*y-uu*i;o>0&&o>x&&(x=o)}else{const e=n[s.fontStack];if(!e)continue;e[m]&&(C=e[m]);const r=t[s.fontStack];if(!r)continue;const o=r.glyphs[m];if(!o)continue;if(b=o.metrics,S=8203!==m?uu:0,g){const e=void 0!==r.ascender?Math.abs(r.ascender):0,t=void 0!==r.descender?Math.abs(r.descender):0,n=(e+t)*y;A<n&&(A=n,w=(e-t)/2*y),T=-e*y}else T=(i-y)*uu-17}B?(e.verticalizable=!0,_.push({glyph:m,imageName:E,x:f,y:p+T,vertical:B,scale:y,localGlyph:b.localGlyph,fontStack:s.fontStack,sectionIndex:d,metrics:b,rect:C}),f+=S*y+c):(_.push({glyph:m,imageName:E,x:f,y:p+T,vertical:B,scale:y,localGlyph:b.localGlyph,fontStack:s.fontStack,sectionIndex:d,metrics:b,rect:C}),f+=b.advance*y+c)}0!==_.length&&(d=Math.max(f-c,d),g?sh(_,m,x,w,o*i/2):sh(_,m,x,0,o/2)),f=0;const C=o*i+x;b.lineOffset=Math.max(x,s),p+=C,++y}var v;const b=p,{horizontalAlign:_,verticalAlign:x}=ah(a);(function(e,t,n,r,i,o){const a=(t-n)*i,s=-o*r;for(const t of e)for(const e of t.positionedGlyphs)e.x+=a,e.y+=s})(e.positionedLines,m,_,x,d,b),e.top+=-x*b,e.bottom=e.top+b,e.left+=-_*d,e.right=e.left+d,e.hasBaseline=g}(x,t,n,r,y,a,s,l,h,c,f,m),!function(e){for(const t of e)if(0!==t.positionedGlyphs.length)return!1;return!0}(_)&&x}const Ju={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Qu={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function eh(e,t,n,r,i,o){if(t.imageName){const e=r[t.imageName];return e?e.displaySize[0]*t.scale*uu/o+i:0}{const r=n[t.fontStack],o=r&&r.glyphs[e];return o?o.metrics.advance*t.scale+i:0}}function th(e,t,n,r){const i=Math.pow(e-t,2);return r?e<t?i/2:2*i:i+Math.abs(n)*n}function nh(e,t,n){let r=0;return 10===e&&(r-=1e4),n&&(r+=150),40!==e&&65288!==e||(r+=50),41!==t&&65289!==t||(r+=50),r}function rh(e,t,n,r,i,o){let a=null,s=th(t,n,i,o);for(const e of r){const r=th(t-e.x,n,i,o)+e.badness;r<=s&&(a=e,s=r)}return{index:e,x:t,priorBreak:a,badness:s}}function ih(e){return e?ih(e.priorBreak).concat(e.index):[]}function oh(e,t,n,r,i,o,a){if("point"!==o)return[];if(!e)return[];const s=[],l=function(e,t,n,r,i,o){let a=0;for(let n=0;n<e.length();n++){const s=e.getSection(n);a+=eh(e.getCharCode(n),s,r,i,t,o)}return a/Math.max(1,Math.ceil(a/n))}(e,t,n,r,i,a),c=e.text.indexOf("")>=0;let u=0;for(let n=0;n<e.length();n++){const o=e.getSection(n),f=e.getCharCode(n);if(Ju[f]||(u+=eh(f,o,r,i,t,a)),n<e.length()-1){const t=!((h=f)<11904||!(Ai(h)||xi(h)||zi(h)||Ii(h)||Si(h)||mi(h)||wi(h)||vi(h)||Ti(h)||Bi(h)||Ei(h)||Fi(h)||bi(h)||yi(h)||gi(h)||Ci(h)||_i(h)||Di(h)||Mi(h)||ki(h)));(Qu[f]||t||o.imageName)&&s.push(rh(n+1,u,l,s,nh(f,e.getCharCode(n+1),t&&c),!1))}}var h;return ih(rh(e.length(),u,l,s,0,!0))}function ah(e){let t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function sh(e,t,n,r,i){if(!(t||n||r||i))return;const o=e.length-1,a=e[o],s=(a.x+a.metrics.advance*a.scale)*t;for(let t=0;t<=o;t++)e[t].x-=s,e[t].y+=n+r+i}function lh(e,t,n){const{horizontalAlign:r,verticalAlign:i}=ah(n),o=t[0]-e.displaySize[0]*r,a=t[1]-e.displaySize[1]*i;return{image:e,top:a,bottom:a+e.displaySize[1],left:o,right:o+e.displaySize[0]}}function ch(e,t,n,r,i,o){const a=e.image;let s;if(a.content){const e=a.content,t=a.pixelRatio||1;s=[e[0]/t,e[1]/t,a.displaySize[0]-e[2]/t,a.displaySize[1]-e[3]/t]}const l=t.left*o,c=t.right*o;let u,h,f,p;"width"===n||"both"===n?(p=i[0]+l-r[3],h=i[0]+c+r[1]):(p=i[0]+(l+c-a.displaySize[0])/2,h=p+a.displaySize[0]);const d=t.top*o,m=t.bottom*o;return"height"===n||"both"===n?(u=i[1]+d-r[0],f=i[1]+m+r[2]):(u=i[1]+(d+m-a.displaySize[1])/2,f=u+a.displaySize[1]),{image:a,top:u,right:h,bottom:f,left:p,collisionPadding:s}}class uh extends i{constructor(e,t,n,r,i){super(e,t),this.angle=r,this.z=n,void 0!==i&&(this.segment=i)}clone(){return new uh(this.x,this.y,this.z,this.angle,this.segment)}}function hh(e,t,n,r,i){if(void 0===t.segment)return!0;let o=t,a=t.segment+1,s=0;for(;s>-n/2;){if(a--,a<0)return!1;s-=e[a].dist(o),o=e[a]}s+=e[a].dist(e[a+1]),a++;const l=[];let c=0;for(;s<n/2;){const t=e[a],n=e[a+1];if(!n)return!1;let o=e[a-1].angleTo(t)-t.angleTo(n);for(o=Math.abs((o+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:o}),c+=o;s-l[0].distance>r;)c-=l.shift().angleDelta;if(c>i)return!1;a++,s+=t.dist(n)}return!0}function fh(e){let t=0;for(let n=0;n<e.length-1;n++)t+=e[n].dist(e[n+1]);return t}function ph(e,t,n){return e?.6*t*n:0}function dh(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function mh(e,t,n,r,i,o){const a=ph(n,i,o),s=dh(n,r)*o;let l=0;const c=fh(e)/2;for(let n=0;n<e.length-1;n++){const r=e[n],i=e[n+1],o=r.dist(i);if(l+o>c){const u=(c-l)/o,h=nn(r.x,i.x,u),f=nn(r.y,i.y,u),p=new uh(h,f,0,i.angleTo(r),n);return!a||hh(e,p,s,a,t)?p:void 0}l+=o}}function gh(e,t,n,r,i,o,a,s,l){const c=ph(r,o,a),u=dh(r,i),h=u*a,f=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;return t-h<t/4&&(t=h+t/4),yh(e,f?t/2*s%t:(u/2+2*o)*a*s%t,t,c,n,h,f,!1,l)}function yh(e,t,n,r,i,o,a,s,l){const c=o/2,u=fh(e);let h=0,f=t-n,p=[];for(let t=0;t<e.length-1;t++){const a=e[t],s=e[t+1],d=a.dist(s),m=s.angleTo(a);for(;f+n<h+d;){f+=n;const g=(f-h)/d,y=nn(a.x,s.x,g),v=nn(a.y,s.y,g);if(y>=0&&y<l&&v>=0&&v<l&&f-c>=0&&f+c<=u){const n=new uh(y,v,0,m,t);n._round(),r&&!hh(e,n,o,r,i)||p.push(n)}}h+=d}return s||p.length||a||(p=yh(e,h/2,n,r,i,o,a,!0,l)),p}function vh(e,t,n,r,o){const a=[];for(let s=0;s<e.length;s++){const l=e[s];let c;for(let e=0;e<l.length-1;e++){let s=l[e],u=l[e+1];s.x<t&&u.x<t||(s.x<t?s=new i(t,s.y+(t-s.x)/(u.x-s.x)*(u.y-s.y))._round():u.x<t&&(u=new i(t,s.y+(t-s.x)/(u.x-s.x)*(u.y-s.y))._round()),s.y<n&&u.y<n||(s.y<n?s=new i(s.x+(n-s.y)/(u.y-s.y)*(u.x-s.x),n)._round():u.y<n&&(u=new i(s.x+(n-s.y)/(u.y-s.y)*(u.x-s.x),n)._round()),s.x>=r&&u.x>=r||(s.x>=r?s=new i(r,s.y+(r-s.x)/(u.x-s.x)*(u.y-s.y))._round():u.x>=r&&(u=new i(r,s.y+(r-s.x)/(u.x-s.x)*(u.y-s.y))._round()),s.y>=o&&u.y>=o||(s.y>=o?s=new i(s.x+(o-s.y)/(u.y-s.y)*(u.x-s.x),o)._round():u.y>=o&&(u=new i(s.x+(o-s.y)/(u.y-s.y)*(u.x-s.x),o)._round()),c&&s.equals(c[c.length-1])||(c=[s],a.push(c)),c.push(u)))))}}return a}ai(uh);const bh=1e20;function _h(e,t,n,r,i,o,a,s,l){for(let c=t;c<t+r;c++)xh(e,n*o+c,o,i,a,s,l);for(let c=n;c<n+i;c++)xh(e,c*o+t,1,r,a,s,l)}function xh(e,t,n,r,i,o,a){o[0]=0,a[0]=-bh,a[1]=bh,i[0]=e[t];for(let s=1,l=0,c=0;s<r;s++){i[s]=e[t+s*n];const r=s*s;do{const e=o[l];c=(i[s]-i[e]+r-e*e)/(s-e)/2}while(c<=a[l]&&--l>-1);l++,o[l]=s,a[l]=c,a[l+1]=bh}for(let s=0,l=0;s<r;s++){for(;a[l+1]<s;)l++;const r=o[l],c=s-r;e[t+s*n]=i[r]+c*c}}const Ah={none:0,ideographs:1,all:2};class wh{constructor(e,t,n){this.requestManager=e,this.localGlyphMode=t,this.localFontFamily=n,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(e){this.url=e}getGlyphs(e,t){const n=[];for(const t in e)for(const r of e[t])n.push({stack:t,id:r});v(n,(({stack:e,id:t},n)=>{let r=this.entries[e];r||(r=this.entries[e]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let i=r.glyphs[t];if(void 0!==i)return void n(null,{stack:e,id:t,glyph:i});if(i=this._tinySDF(r,e,t),i)return r.glyphs[t]=i,void n(null,{stack:e,id:t,glyph:i});const o=Math.floor(t/256);if(256*o>65535)return void n(new Error("glyphs > 65535 not supported"));if(r.ranges[o])return void n(null,{stack:e,id:t,glyph:i});let a=r.requests[o];a||(a=r.requests[o]=[],wh.loadGlyphRange(e,o,this.url,this.requestManager,((e,t)=>{if(t){r.ascender=t.ascender,r.descender=t.descender;for(const e in t.glyphs)this._doesCharSupportLocalGlyph(+e)||(r.glyphs[+e]=t.glyphs[+e]);r.ranges[o]=!0}for(const n of a)n(e,t);delete r.requests[o]}))),a.push(((r,i)=>{r?n(r):i&&n(null,{stack:e,id:t,glyph:i.glyphs[t]||null})}))}),((e,n)=>{if(e)t(e);else if(n){const e={};for(const{stack:t,id:r,glyph:i}of n)void 0===e[t]&&(e[t]={}),void 0===e[t].glyphs&&(e[t].glyphs={}),e[t].glyphs[r]=i&&{id:i.id,bitmap:i.bitmap.clone(),metrics:i.metrics},e[t].ascender=this.entries[t].ascender,e[t].descender=this.entries[t].descender;t(null,e)}}))}_doesCharSupportLocalGlyph(e){return this.localGlyphMode!==Ah.none&&(this.localGlyphMode===Ah.all?!!this.localFontFamily:!!this.localFontFamily&&(Bi(e)||Pi(e)||bi(e)||_i(e)||vi(e)))}_tinySDF(e,t,n){const r=this.localFontFamily;if(!r||!this._doesCharSupportLocalGlyph(n))return;let i=e.tinySDF;if(!i){let n="400";/bold/i.test(t)?n="900":/medium/i.test(t)?n="500":/light/i.test(t)&&(n="200"),i=e.tinySDF=new wh.TinySDF({fontFamily:r,fontWeight:n,fontSize:48,buffer:6,radius:16}),i.fontWeight=n}if(this.localGlyphs[i.fontWeight][n])return this.localGlyphs[i.fontWeight][n];const o=String.fromCharCode(n),{data:a,width:s,height:l,glyphWidth:c,glyphHeight:u,glyphLeft:h,glyphTop:f,glyphAdvance:p}=i.draw(o);return this.localGlyphs[i.fontWeight][n]={id:n,bitmap:new kl({width:s,height:l},a),metrics:{width:c/2,height:u/2,left:h/2,top:f/2-27,advance:p/2,localGlyph:!0}}}}function Ch(e,t,n,r){const o=[],a=e.image,s=a.pixelRatio,l=a.paddedRect.w-2,c=a.paddedRect.h-2,u=e.right-e.left,h=e.bottom-e.top,f=a.stretchX||[[0,l]],p=a.stretchY||[[0,c]],d=(e,t)=>e+t[1]-t[0],m=f.reduce(d,0),g=p.reduce(d,0),y=l-m,v=c-g;let b=0,_=m,x=0,A=g,w=0,C=y,E=0,S=v;if(a.content&&r){const e=a.content;b=Eh(f,0,e[0]),x=Eh(p,0,e[1]),_=Eh(f,e[0],e[2]),A=Eh(p,e[1],e[3]),w=e[0]-b,E=e[1]-x,C=e[2]-e[0]-_,S=e[3]-e[1]-A}const T=(r,o,l,c)=>{const f=Th(r.stretch-b,_,u,e.left),p=Bh(r.fixed-w,C,r.stretch,m),d=Th(o.stretch-x,A,h,e.top),y=Bh(o.fixed-E,S,o.stretch,g),v=Th(l.stretch-b,_,u,e.left),T=Bh(l.fixed-w,C,l.stretch,m),B=Th(c.stretch-x,A,h,e.top),k=Bh(c.fixed-E,S,c.stretch,g),M=new i(f,d),P=new i(v,d),I=new i(v,B),O=new i(f,B),D=new i(p/s,y/s),z=new i(T/s,k/s),L=t*Math.PI/180;if(L){const e=Math.sin(L),t=Math.cos(L),n=[t,-e,e,t];M._matMult(n),P._matMult(n),O._matMult(n),I._matMult(n)}const R=r.stretch+r.fixed,F=o.stretch+o.fixed;return{tl:M,tr:P,bl:O,br:I,tex:{x:a.paddedRect.x+1+R,y:a.paddedRect.y+1+F,w:l.stretch+l.fixed-R,h:c.stretch+c.fixed-F},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:D,pixelOffsetBR:z,minFontScaleX:C/s/u,minFontScaleY:S/s/h,isSDF:n}};if(r&&(a.stretchX||a.stretchY)){const e=Sh(f,y,m),t=Sh(p,v,g);for(let n=0;n<e.length-1;n++){const r=e[n],i=e[n+1];for(let e=0;e<t.length-1;e++)o.push(T(r,t[e],i,t[e+1]))}}else o.push(T({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:l+1},{fixed:0,stretch:c+1}));return o}function Eh(e,t,n){let r=0;for(const i of e)r+=Math.max(t,Math.min(n,i[1]))-Math.max(t,Math.min(n,i[0]));return r}function Sh(e,t,n){const r=[{fixed:-1,stretch:0}];for(const[t,n]of e){const e=r[r.length-1];r.push({fixed:t-e.stretch,stretch:e.stretch}),r.push({fixed:t-e.stretch,stretch:e.stretch+(n-t)})}return r.push({fixed:t+1,stretch:n}),r}function Th(e,t,n,r){return e/t*n+r}function Bh(e,t,n,r){return e-t*n/r}function kh(e,t,n,r){const i=t+e.positionedLines[r].lineOffset;return 0===r?n+i/2:n+(i+(t+e.positionedLines[r-1].lineOffset))/2}wh.loadGlyphRange=function(e,t,n,r,i){const o=256*t,a=o+255,s=r.transformRequest(r.normalizeGlyphsURL(n).replace("{fontstack}",e).replace("{range}",`${o}-${a}`),we.Glyphs);Te(s,((e,t)=>{if(e)i(e);else if(t){const e={},n=function(e){return new Au(e).readFields(Vu,{})}(t);for(const t of n.glyphs)e[t.id]=t;i(null,{glyphs:e,ascender:n.ascender,descender:n.descender})}}))},wh.TinySDF=class{constructor({fontSize:e=24,buffer:t=3,radius:n=8,cutoff:r=.25,fontFamily:i="sans-serif",fontWeight:o="normal",fontStyle:a="normal"}){this.buffer=t,this.cutoff=r,this.radius=n;const s=this.size=e+4*t,l=this._createCanvas(s),c=this.ctx=l.getContext("2d",{willReadFrequently:!0});c.font=`${a} ${o} ${e}px ${i}`,c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s)}_createCanvas(e){const t=document.createElement("canvas");return t.width=t.height=e,t}draw(e){const{width:t,actualBoundingBoxAscent:n,actualBoundingBoxDescent:r,actualBoundingBoxLeft:i,actualBoundingBoxRight:o}=this.ctx.measureText(e),a=Math.floor(n),s=Math.min(this.size-this.buffer,Math.ceil(o-i)),l=Math.min(this.size-this.buffer,Math.ceil(n)+Math.ceil(r)),c=s+2*this.buffer,u=l+2*this.buffer,h=c*u,f=new Uint8ClampedArray(h),p={data:f,width:c,height:u,glyphWidth:s,glyphHeight:l,glyphTop:a,glyphLeft:0,glyphAdvance:t};if(0===s||0===l)return p;const{ctx:d,buffer:m,gridInner:g,gridOuter:y}=this;d.clearRect(m,m,s,l),d.fillText(e,m,m+a+1);const v=d.getImageData(m,m,s,l);y.fill(bh,0,h),g.fill(0,0,h);for(let e=0;e<l;e++)for(let t=0;t<s;t++){const n=v.data[4*(e*s+t)+3]/255;if(0===n)continue;const r=(e+m)*c+t+m;if(1===n)y[r]=0,g[r]=bh;else{const e=.5-n;y[r]=e>0?e*e:0,g[r]=e<0?e*e:0}}_h(y,0,0,c,u,c,this.f,this.v,this.z),_h(g,m,m,s,l,c,this.f,this.v,this.z);for(let e=0;e<h;e++){const t=Math.sqrt(y[e])-Math.sqrt(g[e]);f[e]=Math.round(255-255*(t/this.radius+this.cutoff))}return p}};class Mh{constructor(e=[],t=Ph){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let e=(this.length>>1)-1;e>=0;e--)this._down(e)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:n}=this,r=t[e];for(;e>0;){const i=e-1>>1,o=t[i];if(n(r,o)>=0)break;t[e]=o,e=i}t[e]=r}_down(e){const{data:t,compare:n}=this,r=this.length>>1,i=t[e];for(;e<r;){let r=1+(e<<1),o=t[r];const a=r+1;if(a<this.length&&n(t[a],o)<0&&(r=a,o=t[a]),n(o,i)>=0)break;t[e]=o,e=r}t[e]=i}}function Ph(e,t){return e<t?-1:e>t?1:0}function Ih(e,t=1,n=!1){let r=1/0,o=1/0,a=-1/0,s=-1/0;const l=e[0];for(let e=0;e<l.length;e++){const t=l[e];(!e||t.x<r)&&(r=t.x),(!e||t.y<o)&&(o=t.y),(!e||t.x>a)&&(a=t.x),(!e||t.y>s)&&(s=t.y)}const c=Math.min(a-r,s-o);let u=c/2;const h=new Mh([],Oh);if(0===c)return new i(r,o);for(let t=r;t<a;t+=c)for(let n=o;n<s;n+=c)h.push(new Dh(t+u,n+u,u,e));let f=function(e){let t=0,n=0,r=0;const i=e[0];for(let e=0,o=i.length,a=o-1;e<o;a=e++){const o=i[e],s=i[a],l=o.x*s.y-s.x*o.y;n+=(o.x+s.x)*l,r+=(o.y+s.y)*l,t+=3*l}return new Dh(n/t,r/t,0,e)}(e),p=h.length;for(;h.length;){const r=h.pop();(r.d>f.d||!f.d)&&(f=r,n&&console.log("found best %d after %d probes",Math.round(1e4*r.d)/1e4,p)),r.max-f.d<=t||(u=r.h/2,h.push(new Dh(r.p.x-u,r.p.y-u,u,e)),h.push(new Dh(r.p.x+u,r.p.y-u,u,e)),h.push(new Dh(r.p.x-u,r.p.y+u,u,e)),h.push(new Dh(r.p.x+u,r.p.y+u,u,e)),p+=4)}return n&&(console.log(`num probes: ${p}`),console.log(`best distance: ${f.d}`)),f.p}function Oh(e,t){return t.max-e.max}function Dh(e,t,n,r){this.p=new i(e,t),this.h=n,this.d=function(e,t){let n=!1,r=1/0;for(let i=0;i<t.length;i++){const o=t[i];for(let t=0,i=o.length,a=i-1;t<i;a=t++){const i=o[t],s=o[a];i.y>e.y!=s.y>e.y&&e.x<(s.x-i.x)*(e.y-i.y)/(s.y-i.y)+i.x&&(n=!n),r=Math.min(r,Ts(e,i,s))}}return(n?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}const zh=Number.POSITIVE_INFINITY,Lh=Math.sqrt(2);function Rh(e,t){return t[1]!==zh?function(e,t,n){let r=0,i=0;switch(t=Math.abs(t),n=Math.abs(n),e){case"top-right":case"top-left":case"top":i=n-7;break;case"bottom-right":case"bottom-left":case"bottom":i=7-n}switch(e){case"top-right":case"bottom-right":case"right":r=-t;break;case"top-left":case"bottom-left":case"left":r=t}return[r,i]}(e,t[0],t[1]):function(e,t){let n=0,r=0;t<0&&(t=0);const i=t/Lh;switch(e){case"top-right":case"top-left":r=i-7;break;case"bottom-right":case"bottom-left":r=7-i;break;case"bottom":r=7-t;break;case"top":r=t-7}switch(e){case"top-right":case"bottom-right":n=-i;break;case"top-left":case"bottom-left":n=i;break;case"left":n=t;break;case"right":n=-t}return[n,r]}(e,t[0])}function Fh(e,t,n,r,i,o,a,s,l,c){e.createArrays(),e.tilePixelRatio=Ya/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;const u=e.layers[0].layout,h=e.layers[0]._unevaluatedLayout._values,f={};if("composite"===e.textSizeData.kind){const{minZoom:t,maxZoom:n}=e.textSizeData;f.compositeTextSizes=[h["text-size"].possiblyEvaluate(new oo(t),s),h["text-size"].possiblyEvaluate(new oo(n),s)]}if("composite"===e.iconSizeData.kind){const{minZoom:t,maxZoom:n}=e.iconSizeData;f.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new oo(t),s),h["icon-size"].possiblyEvaluate(new oo(n),s)]}f.layoutTextSize=h["text-size"].possiblyEvaluate(new oo(l+1),s),f.layoutIconSize=h["icon-size"].possiblyEvaluate(new oo(l+1),s),f.textMaxSize=h["text-size"].possiblyEvaluate(new oo(18),s);const p="map"===u.get("text-rotation-alignment")&&"point"!==u.get("symbol-placement"),d=u.get("text-size");for(const o of e.features){const l=u.get("text-font").evaluate(o,{},s).join(","),h=d.evaluate(o,{},s),m=f.layoutTextSize.evaluate(o,{},s),g=(f.layoutIconSize.evaluate(o,{},s),{horizontal:{},vertical:void 0}),y=o.text;let v,b=[0,0];if(y){const r=y.toString(),a=u.get("text-letter-spacing").evaluate(o,{},s)*uu,c=u.get("text-line-height").evaluate(o,{},s)*uu,f=Ni(r)?a:0,d=u.get("text-anchor").evaluate(o,{},s),v=u.get("text-variable-anchor");if(!v){const e=u.get("text-radial-offset").evaluate(o,{},s);b=e?Rh(d,[e*uu,zh]):u.get("text-offset").evaluate(o,{},s).map((e=>e*uu))}let _=p?"center":u.get("text-justify").evaluate(o,{},s);const x=u.get("symbol-placement"),A="point"===x,w="point"===x?u.get("text-max-width").evaluate(o,{},s)*uu:0,C=o=>{e.allowVerticalPlacement&&Ui(r)&&(g.vertical=Ku(y,t,n,i,l,w,c,d,o,f,b,Xu.vertical,!0,x,m,h))};if(!p&&v){const e="auto"===_?v.map((e=>Uh(e))):[_];let r=!1;for(let o=0;o<e.length;o++){const a=e[o];if(!g.horizontal[a])if(r)g.horizontal[a]=g.horizontal[0];else{const e=Ku(y,t,n,i,l,w,c,"center",a,f,b,Xu.horizontal,!1,x,m,h);e&&(g.horizontal[a]=e,r=1===e.positionedLines.length)}}C("left")}else{if("auto"===_&&(_=Uh(d)),A||u.get("text-writing-mode").indexOf("horizontal")>=0||!Ui(r)){const e=Ku(y,t,n,i,l,w,c,d,_,f,b,Xu.horizontal,!1,x,m,h);e&&(g.horizontal[_]=e)}C("point"===x?"left":_)}}let _=!1;if(o.icon&&o.icon.name){const t=r[o.icon.name];t&&(v=lh(i[o.icon.name],u.get("icon-offset").evaluate(o,{},s),u.get("icon-anchor").evaluate(o,{},s)),_=t.sdf,void 0===e.sdfIcons?e.sdfIcons=t.sdf:e.sdfIcons!==t.sdf&&I("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(t.pixelRatio!==e.pixelRatio||0!==u.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0))}const x=Gh(g.horizontal)||g.vertical;e.iconsInText||(e.iconsInText=!!x&&x.iconsInText),(x||v)&&Nh(e,o,g,v,r,f,m,0,b,_,a,s,c)}o&&e.generateCollisionDebugBuffers(l,e.collisionBoxArray)}function Uh(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Nh(e,t,n,r,i,o,a,s,l,u,h,f,p){let d=o.textMaxSize.evaluate(t,{},f);void 0===d&&(d=a);const m=e.layers[0].layout,g=m.get("icon-offset").evaluate(t,{},f),y=Gh(n.horizontal)||n.vertical,v=a/24,b=e.tilePixelRatio*d/24,_=(B=e.overscaling,e.zoom>18&&B>2&&(B>>=1),Math.max(Ya/(512*B),1)*m.get("symbol-spacing")),x=m.get("text-padding")*e.tilePixelRatio,A=m.get("icon-padding")*e.tilePixelRatio,w=c(m.get("text-max-angle")),C="map"===m.get("text-rotation-alignment")&&"point"!==m.get("symbol-placement"),E="map"===m.get("icon-rotation-alignment")&&"point"!==m.get("symbol-placement"),S=m.get("symbol-placement"),T=_/2;var B;const k=m.get("icon-text-fit");let M;r&&"none"!==k&&(e.allowVerticalPlacement&&n.vertical&&(M=ch(r,n.vertical,k,m.get("icon-text-fit-padding"),g,v)),y&&(r=ch(r,y,k,m.get("icon-text-fit-padding"),g,v)));const P=(a,s,c)=>{if(s.x<0||s.x>=Ya||s.y<0||s.y>=Ya)return;const{x:d,y:m,z:y}=p.projectTilePoint(s.x,s.y,c),v=new uh(d,m,y,0,void 0);!function(e,t,n,r,i,o,a,s,l,c,u,h,f,p,d,m,g,y,v,b,_,x,A,w,C){const E=e.addToLineVertexArray(t,r);let S,T,B,k,M,P,O,D=0,z=0,L=0,R=0,F=-1,U=-1;const N={};let j=ba(""),V=0,G=0;if(void 0===l._unevaluatedLayout.getValue("text-radial-offset")?[V,G]=l.layout.get("text-offset").evaluate(_,{},C).map((e=>e*uu)):(V=l.layout.get("text-radial-offset").evaluate(_,{},C)*uu,G=zh),e.allowVerticalPlacement&&i.vertical){const e=i.vertical;if(d)P=Wh(e),s&&(O=Wh(s));else{const r=l.layout.get("text-rotate").evaluate(_,{},C)+90;B=qh(c,n,t,u,h,f,e,p,r,m),s&&(k=qh(c,n,t,u,h,f,s,y,r))}}if(o){const r=l.layout.get("icon-rotate").evaluate(_,{},C),i="none"!==l.layout.get("icon-text-fit"),a=Ch(o,r,A,i),p=s?Ch(s,r,A,i):void 0;T=qh(c,n,t,u,h,f,o,y,r),D=4*a.length;const d=e.iconSizeData;let m=null;"source"===d.kind?(m=[hu*l.layout.get("icon-size").evaluate(_,{},C)],m[0]>jh&&I(`${e.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===d.kind&&(m=[hu*x.compositeIconSizes[0].evaluate(_,{},C),hu*x.compositeIconSizes[1].evaluate(_,{},C)],(m[0]>jh||m[1]>jh)&&I(`${e.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),e.addSymbols(e.icon,a,m,b,v,_,!1,n,t,E.lineStartIndex,E.lineLength,-1,w,C),F=e.icon.placedSymbolArray.length-1,p&&(z=4*p.length,e.addSymbols(e.icon,p,m,b,v,_,Xu.vertical,n,t,E.lineStartIndex,E.lineLength,-1,w,C),U=e.icon.placedSymbolArray.length-1)}for(const r in i.horizontal){const o=i.horizontal[r];S||(j=ba(o.text),d?M=Wh(o):S=qh(c,n,t,u,h,f,o,p,l.layout.get("text-rotate").evaluate(_,{},C),m));const s=1===o.positionedLines.length;if(L+=Vh(e,n,t,o,a,l,d,_,m,E,i.vertical?Xu.horizontal:Xu.horizontalOnly,s?Object.keys(i.horizontal):[r],N,F,x,w,C),s)break}i.vertical&&(R+=Vh(e,n,t,i.vertical,a,l,d,_,m,E,Xu.vertical,["vertical"],N,U,x,w,C));let q=-1;const W=(e,t)=>e?Math.max(e,t):t;q=W(M,q),q=W(P,q),q=W(O,q);const H=q>-1?1:0;e.glyphOffsetArray.length>=ef.MAX_GLYPHS&&I("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==_.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,_.sortKey),e.symbolInstances.emplaceBack(n.x,n.y,n.z,t.x,t.y,N.right>=0?N.right:-1,N.center>=0?N.center:-1,N.left>=0?N.left:-1,N.vertical>=0?N.vertical:-1,F,U,j,void 0!==S?S:e.collisionBoxArray.length,void 0!==S?S+1:e.collisionBoxArray.length,void 0!==B?B:e.collisionBoxArray.length,void 0!==B?B+1:e.collisionBoxArray.length,void 0!==T?T:e.collisionBoxArray.length,void 0!==T?T+1:e.collisionBoxArray.length,k||e.collisionBoxArray.length,k?k+1:e.collisionBoxArray.length,u,L,R,D,z,H,0,V,G,q)}(e,s,v,a,n,r,i,M,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,x,C,l,0,A,E,g,t,o,u,h,f)};if("line"===S)for(const i of vh(t.geometry,0,0,Ya,Ya)){const t=gh(i,_,w,n.vertical||y,r,24,b,e.overscaling,Ya);for(const n of t){const t=y;t&&Hh(e,t.text,T,n)||P(i,n,f)}}else if("line-center"===S){for(const e of t.geometry)if(e.length>1){const t=mh(e,w,n.vertical||y,r,24,b);t&&P(e,t,f)}}else if("Polygon"===t.type)for(const e of dc(t.geometry,0)){const t=Ih(e,16);P(e[0],new uh(t.x,t.y,0,0,void 0),f)}else if("LineString"===t.type)for(const e of t.geometry)P(e,new uh(e[0].x,e[0].y,0,0,void 0),f);else if("Point"===t.type)for(const e of t.geometry)for(const t of e)P([t],new uh(t.x,t.y,0,0,void 0),f)}const jh=32640;function Vh(e,t,n,r,o,a,s,l,c,u,h,f,p,d,m,g,y){const v=function(e,t,n,r,o,a,s,l){const c=[];if(0===t.positionedLines.length)return c;const u=r.layout.get("text-rotate").evaluate(a,{})*Math.PI/180,h=function(e){const t=e[0],n=e[1],r=t*n;return r>0?[t,-n]:r<0?[-t,n]:0===t?[n,t]:[n,-t]}(n);let f=Math.abs(t.top-t.bottom);for(const e of t.positionedLines)f-=e.lineOffset;const p=t.positionedLines.length,d=f/p;let m=t.top-n[1];for(let e=0;e<p;++e){const r=t.positionedLines[e];m=kh(t,d,m,e);for(const e of r.positionedGlyphs){if(!e.rect)continue;const r=e.rect||{};let a=4,f=!0,p=1,d=0;if(e.imageName){const t=s[e.imageName];if(!t)continue;if(t.sdf){I("SDF images are not supported in formatted text and will be ignored.");continue}f=!1,p=t.pixelRatio,a=1/p}const g=(o||l)&&e.vertical,y=e.metrics.advance*e.scale/2,v=e.metrics,b=e.rect;if(null===b)continue;l&&t.verticalizable&&(d=e.imageName?y-e.metrics.width*e.scale/2:0);const _=o?[e.x+y,e.y]:[0,0];let x=[0,0],A=[0,0],w=!1;o||(g?(A=[e.x+y+h[0],e.y+h[1]-d],w=!0):x=[e.x+y+n[0],e.y+n[1]-d]);const C=b.w*e.scale/(p*(e.localGlyph?2:1)),E=b.h*e.scale/(p*(e.localGlyph?2:1));let S,T,B,k;if(g){const t=e.y-m,n=new i(-y,y-t),r=-Math.PI/2,o=new i(...A);S=new i(-y+x[0],x[1]),S._rotateAround(r,n)._add(o),S.x+=-t+y,S.y-=(v.left-a)*e.scale;const s=e.imageName?v.advance*e.scale:uu*e.scale,l=String.fromCharCode(e.glyph);vu(l)?S.x+=(1-a)*e.scale:bu(l)?S.x+=s-v.height*e.scale+(-a-1)*e.scale:S.x+=e.imageName||v.width+2*a===b.w&&v.height+2*a===b.h?(s-E)/2:(s-(v.height+2*a)*e.scale)/2,T=new i(S.x,S.y-C),B=new i(S.x+E,S.y),k=new i(S.x+E,S.y-C)}else{const t=(v.left-a)*e.scale-y+x[0],n=(-v.top-a)*e.scale+x[1],r=t+C,o=n+E;S=new i(t,n),T=new i(r,n),B=new i(t,o),k=new i(r,o)}if(u){let e;e=o?new i(0,0):w?new i(h[0],h[1]):new i(n[0],n[1]),S._rotateAround(u,e),T._rotateAround(u,e),B._rotateAround(u,e),k._rotateAround(u,e)}const M=new i(0,0),P=new i(0,0);c.push({tl:S,tr:T,bl:B,br:k,tex:r,writingMode:t.writingMode,glyphOffset:_,sectionIndex:e.sectionIndex,isSDF:f,pixelOffsetTL:M,pixelOffsetBR:P,minFontScaleX:0,minFontScaleY:0})}}return c}(0,r,c,a,s,l,o,e.allowVerticalPlacement),b=e.textSizeData;let _=null;"source"===b.kind?(_=[hu*a.layout.get("text-size").evaluate(l,{},y)],_[0]>jh&&I(`${e.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===b.kind&&(_=[hu*m.compositeTextSizes[0].evaluate(l,{},y),hu*m.compositeTextSizes[1].evaluate(l,{},y)],(_[0]>jh||_[1]>jh)&&I(`${e.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),e.addSymbols(e.text,v,_,c,s,l,h,t,n,u.lineStartIndex,u.lineLength,d,g,y);for(const t of f)p[t]=e.text.placedSymbolArray.length-1;return 4*v.length}function Gh(e){for(const t in e)return e[t];return null}function qh(e,t,n,r,o,a,s,l,u,h){let f=s.top,p=s.bottom,d=s.left,m=s.right;const g=s.collisionPadding;if(g&&(d-=g[0],f-=g[1],m+=g[2],p+=g[3]),u){const e=new i(d,f),t=new i(m,f),n=new i(d,p),r=new i(m,p),o=c(u);let a=new i(0,0);h&&(a=new i(h[0],h[1])),e._rotateAround(o,a),t._rotateAround(o,a),n._rotateAround(o,a),r._rotateAround(o,a),d=Math.min(e.x,t.x,n.x,r.x),m=Math.max(e.x,t.x,n.x,r.x),f=Math.min(e.y,t.y,n.y,r.y),p=Math.max(e.y,t.y,n.y,r.y)}return e.emplaceBack(t.x,t.y,t.z,n.x,n.y,d,f,m,p,l,r,o,a),e.length-1}function Wh(e){e.collisionPadding&&(e.top-=e.collisionPadding[1],e.bottom+=e.collisionPadding[3]);const t=e.bottom-e.top;return t>0?Math.max(10,t):null}function Hh(e,t,n,r){const i=e.compareText;if(t in i){const e=i[t];for(let t=e.length-1;t>=0;t--)if(r.dist(e[t])<n)return!0}else i[t]=[];return i[t].push(r),!1}const $h=Oc.VectorTileFeature.types,Xh=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Zh(e,t,n,r,i,o,a,s,l,c,u,h,f,p,d,m){const g=u?Math.min(jh,Math.round(u[0])):0,y=u?Math.min(jh,Math.round(u[1])):0;e.emplaceBack(t,n,Math.round(32*a),Math.round(32*s),l,c,(g<<1)+(h?1:0),y,16*f,16*p,256*d,256*m,r,i,o,0)}function Yh(e,t,n){e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n)}function Kh(e){for(const t of e.sections)if(Hi(t.text))return!0;return!1}class Jh{constructor(e){this.layoutVertexArray=new zo,this.indexArray=new jo,this.programConfigurations=e,this.segments=new Za,this.dynamicLayoutVertexArray=new Po,this.opacityVertexArray=new Lo,this.placedSymbolArray=new ia}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,t,n,r){this.isEmpty()||(n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,iu.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,ou.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Xh,!0),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}ai(Jh);class Qh{constructor(e,t,n){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new n,this.segments=new Za,this.collisionVertexArray=new No,this.collisionVertexArrayExt=new Po}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,au.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,su.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}ai(Qh);class ef{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=js([]),this.placementViewportMatrix=js([]);const t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=fu(this.zoom,t["text-size"]),this.iconSizeData=fu(this.zoom,t["icon-size"]);const n=this.layers[0].layout,r=n.get("symbol-sort-key"),i=n.get("symbol-z-order");this.canOverlap=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==i&&void 0!==r.constantOr(1),this.sortFeaturesByY=("viewport-y"===i||"auto"===i&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=n.get("text-writing-mode").map((e=>Xu[e])),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.sourceID=e.sourceID,this.projection=e.projection}createArrays(){this.text=new Jh(new Ua(this.layers,this.zoom,(e=>/^text/.test(e)))),this.icon=new Jh(new Ua(this.layers,this.zoom,(e=>/^icon/.test(e)))),this.glyphOffsetArray=new sa,this.lineVertexArray=new la,this.symbolInstances=new aa}calculateGlyphDependencies(e,t,n,r,i){for(let n=0;n<e.length;n++)if(t[e.charCodeAt(n)]=!0,r&&i){const r=yu[e.charAt(n)];r&&(t[r.charCodeAt(0)]=!0)}}populate(e,t,n,r){const i=this.layers[0],o=i.layout,a=o.get("text-font"),s=o.get("text-field"),l=o.get("icon-image"),c=("constant"!==s.value.kind||s.value.value instanceof pt&&!s.value.value.isEmpty()||s.value.value.toString().length>0)&&("constant"!==a.value.kind||a.value.value.length>0),u="constant"!==l.value.kind||!!l.value.value||Object.keys(l.parameters).length>0,h=o.get("symbol-sort-key");if(this.features=[],!c&&!u)return;const f=t.iconDependencies,p=t.glyphDependencies,d=t.availableImages,m=new oo(this.zoom);for(const{feature:t,id:s,index:l,sourceLayerIndex:g}of e){const e=i._featureFilter.needGeometry,y=gs(t,e);if(!i._featureFilter.filter(m,y,n))continue;let v,b;if(e||(y.geometry=ms(t,n,r)),c){const e=i.getValueAndResolveTokens("text-field",y,n,d),t=pt.factory(e);Kh(t)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===no()||this.hasRTLText&&io.isParsed())&&(v=gu(t,i,y))}if(u){const e=i.getValueAndResolveTokens("icon-image",y,n,d);b=e instanceof dt?e:dt.fromString(e)}if(!v&&!b)continue;const _=this.sortFeaturesByKey?h.evaluate(y,{},n):void 0;if(this.features.push({id:s,text:v,icon:b,index:l,sourceLayerIndex:g,geometry:y.geometry,properties:t.properties,type:$h[t.type],sortKey:_}),b&&(f[b.name]=!0),v){const e=a.evaluate(y,{},n).join(","),t="map"===o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Xu.vertical)>=0;for(const n of v.sections)if(n.image)f[n.image.name]=!0;else{const r=Ui(v.toString()),i=n.fontStack||e,o=p[i]=p[i]||{};this.calculateGlyphDependencies(n.text,o,t,this.allowVerticalPlacement,r)}}}"line"===o.get("symbol-placement")&&(this.features=function(e){const t={},n={},r=[];let i=0;function o(t){r.push(e[t]),i++}function a(e,t,i){const o=n[e];return delete n[e],n[t]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(i[0]),o}function s(e,n,i){const o=t[n];return delete t[n],t[e]=o,r[o].geometry[0].shift(),r[o].geometry[0]=i[0].concat(r[o].geometry[0]),o}function l(e,t,n){const r=n?t[0][t[0].length-1]:t[0][0];return`${e}:${r.x}:${r.y}`}for(let c=0;c<e.length;c++){const u=e[c],h=u.geometry,f=u.text?u.text.toString():null;if(!f){o(c);continue}const p=l(f,h),d=l(f,h,!0);if(p in n&&d in t&&n[p]!==t[d]){const e=s(p,d,h),i=a(p,d,r[e].geometry);delete t[p],delete n[d],n[l(f,r[i].geometry,!0)]=i,r[e].geometry=null}else p in n?a(p,d,h):d in t?s(p,d,h):(o(c),t[p]=i-1,n[d]=i-1)}return r.filter((e=>e.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((e,t)=>e.sortKey-t.sortKey))}update(e,t,n,r){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,n,r),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,n,r))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,t){const n=this.lineVertexArray.length,r=e.segment;if(void 0!==r){let n=e.dist(t[r+1]),i=e.dist(t[r]);const o={};for(let e=r+1;e<t.length;e++)o[e]={x:t[e].x,y:t[e].y,tileUnitDistanceFromAnchor:n},e<t.length-1&&(n+=t[e+1].dist(t[e]));for(let e=r||0;e>=0;e--)o[e]={x:t[e].x,y:t[e].y,tileUnitDistanceFromAnchor:i},e>0&&(i+=t[e-1].dist(t[e]));for(let e=0;e<t.length;e++){const t=o[e];this.lineVertexArray.emplaceBack(t.x,t.y,t.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}addSymbols(e,t,n,r,i,o,a,s,l,c,u,h,f,p){const d=e.indexArray,m=e.layoutVertexArray,g=e.segments.prepareSegment(4*t.length,m,d,this.canOverlap?o.sortKey:void 0),y=this.glyphOffsetArray.length,v=g.vertexLength,b=this.allowVerticalPlacement&&a===Xu.vertical?Math.PI/2:0,_=o.text&&o.text.sections;for(let r=0;r<t.length;r++){const{tl:i,tr:a,bl:c,br:u,tex:h,pixelOffsetTL:y,pixelOffsetBR:v,minFontScaleX:x,minFontScaleY:A,glyphOffset:w,isSDF:C,sectionIndex:E}=t[r],S=g.vertexLength,T=w[1];Zh(m,s.x,s.y,s.z,l.x,l.y,i.x,T+i.y,h.x,h.y,n,C,y.x,y.y,x,A),Zh(m,s.x,s.y,s.z,l.x,l.y,a.x,T+a.y,h.x+h.w,h.y,n,C,v.x,y.y,x,A),Zh(m,s.x,s.y,s.z,l.x,l.y,c.x,T+c.y,h.x,h.y+h.h,n,C,y.x,v.y,x,A),Zh(m,s.x,s.y,s.z,l.x,l.y,u.x,T+u.y,h.x+h.w,h.y+h.h,n,C,v.x,v.y,x,A),Yh(e.dynamicLayoutVertexArray,s,b),d.emplaceBack(S,S+1,S+2),d.emplaceBack(S+1,S+2,S+3),g.vertexLength+=4,g.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(w[0]),r!==t.length-1&&E===t[r+1].sectionIndex||e.programConfigurations.populatePaintArrays(m.length,o,o.index,{},f,p,_&&_[E])}e.placedSymbolArray.emplaceBack(s.x,s.y,s.z,l.x,l.y,y,this.glyphOffsetArray.length-y,v,c,u,l.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],a,0,!1,0,h,0)}_commitLayoutVertex(e,t,n,r,i,o,a){e.emplaceBack(t,n,r,i,o,Math.round(a.x),Math.round(a.y))}_addCollisionDebugVertices(e,t,n,r,o,a,s){const l=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),c=l.vertexLength,u=s.tileAnchorX,h=s.tileAnchorY;for(let e=0;e<4;e++)n.collisionVertexArray.emplaceBack(0,0,0,0);n.collisionVertexArrayExt.emplaceBack(t,-e.padding,-e.padding),n.collisionVertexArrayExt.emplaceBack(t,e.padding,-e.padding),n.collisionVertexArrayExt.emplaceBack(t,e.padding,e.padding),n.collisionVertexArrayExt.emplaceBack(t,-e.padding,e.padding),this._commitLayoutVertex(n.layoutVertexArray,r,o,a,u,h,new i(e.x1,e.y1)),this._commitLayoutVertex(n.layoutVertexArray,r,o,a,u,h,new i(e.x2,e.y1)),this._commitLayoutVertex(n.layoutVertexArray,r,o,a,u,h,new i(e.x2,e.y2)),this._commitLayoutVertex(n.layoutVertexArray,r,o,a,u,h,new i(e.x1,e.y2)),l.vertexLength+=4;const f=n.indexArray;f.emplaceBack(c,c+1),f.emplaceBack(c+1,c+2),f.emplaceBack(c+2,c+3),f.emplaceBack(c+3,c),l.primitiveLength+=4}_addTextDebugCollisionBoxes(e,t,n,r,i,o){for(let a=r;a<i;a++){const r=n.get(a),i=this.getSymbolInstanceTextSize(e,o,t,a);this._addCollisionDebugVertices(r,i,this.textCollisionBox,r.projectedAnchorX,r.projectedAnchorY,r.projectedAnchorZ,o)}}_addIconDebugCollisionBoxes(e,t,n,r,i,o){for(let a=r;a<i;a++){const r=n.get(a),i=this.getSymbolInstanceIconSize(e,t,a);this._addCollisionDebugVertices(r,i,this.iconCollisionBox,r.projectedAnchorX,r.projectedAnchorY,r.projectedAnchorZ,o)}}generateCollisionDebugBuffers(e,t){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Qh(Fo,lu.members,Xo),this.iconCollisionBox=new Qh(Fo,lu.members,Xo);const n=du(this.iconSizeData,e),r=du(this.textSizeData,e);for(let i=0;i<this.symbolInstances.length;i++){const o=this.symbolInstances.get(i);this._addTextDebugCollisionBoxes(r,e,t,o.textBoxStartIndex,o.textBoxEndIndex,o),this._addTextDebugCollisionBoxes(r,e,t,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._addIconDebugCollisionBoxes(n,e,t,o.iconBoxStartIndex,o.iconBoxEndIndex,o),this._addIconDebugCollisionBoxes(n,e,t,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o)}}getSymbolInstanceTextSize(e,t,n,r){const i=this.text.placedSymbolArray.get(t.rightJustifiedTextSymbolIndex>=0?t.rightJustifiedTextSymbolIndex:t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.leftJustifiedTextSymbolIndex>=0?t.leftJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex>=0?t.verticalPlacedTextSymbolIndex:r),o=pu(this.textSizeData,e,i)/uu;return this.tilePixelRatio*o}getSymbolInstanceIconSize(e,t,n){const r=this.icon.placedSymbolArray.get(n),i=pu(this.iconSizeData,e,r);return this.tilePixelRatio*i}_commitDebugCollisionVertexUpdate(e,t,n){e.emplaceBack(t,-n,-n),e.emplaceBack(t,n,-n),e.emplaceBack(t,n,n),e.emplaceBack(t,-n,n)}_updateTextDebugCollisionBoxes(e,t,n,r,i,o){for(let a=r;a<i;a++){const r=n.get(a),i=this.getSymbolInstanceTextSize(e,o,t,a);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,i,r.padding)}}_updateIconDebugCollisionBoxes(e,t,n,r,i){for(let o=r;o<i;o++){const r=n.get(o),i=this.getSymbolInstanceIconSize(e,t,o);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,i,r.padding)}}updateCollisionDebugBuffers(e,t){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const n=du(this.iconSizeData,e),r=du(this.textSizeData,e);for(let i=0;i<this.symbolInstances.length;i++){const o=this.symbolInstances.get(i);this._updateTextDebugCollisionBoxes(r,e,t,o.textBoxStartIndex,o.textBoxEndIndex,o),this._updateTextDebugCollisionBoxes(r,e,t,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._updateIconDebugCollisionBoxes(n,e,t,o.iconBoxStartIndex,o.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(n,e,t,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,t,n,r,i,o,a,s,l){const c={};for(let r=t;r<n;r++){const t=e.get(r);c.textBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,padding:t.padding,projectedAnchorX:t.projectedAnchorX,projectedAnchorY:t.projectedAnchorY,projectedAnchorZ:t.projectedAnchorZ,tileAnchorX:t.tileAnchorX,tileAnchorY:t.tileAnchorY},c.textFeatureIndex=t.featureIndex;break}for(let t=r;t<i;t++){const n=e.get(t);c.verticalTextBox={x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,padding:n.padding,projectedAnchorX:n.projectedAnchorX,projectedAnchorY:n.projectedAnchorY,projectedAnchorZ:n.projectedAnchorZ,tileAnchorX:n.tileAnchorX,tileAnchorY:n.tileAnchorY},c.verticalTextFeatureIndex=n.featureIndex;break}for(let t=o;t<a;t++){const n=e.get(t);c.iconBox={x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,padding:n.padding,projectedAnchorX:n.projectedAnchorX,projectedAnchorY:n.projectedAnchorY,projectedAnchorZ:n.projectedAnchorZ,tileAnchorX:n.tileAnchorX,tileAnchorY:n.tileAnchorY},c.iconFeatureIndex=n.featureIndex;break}for(let t=s;t<l;t++){const n=e.get(t);c.verticalIconBox={x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,padding:n.padding,projectedAnchorX:n.projectedAnchorX,projectedAnchorY:n.projectedAnchorY,projectedAnchorZ:n.projectedAnchorZ,tileAnchorX:n.tileAnchorX,tileAnchorY:n.tileAnchorY},c.verticalIconFeatureIndex=n.featureIndex;break}return c}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let t=0;t<this.symbolInstances.length;t++){const n=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,t){const n=e.placedSymbolArray.get(t),r=n.vertexStartIndex+4*n.numGlyphs;for(let t=n.vertexStartIndex;t<r;t+=4)e.indexArray.emplaceBack(t,t+1,t+2),e.indexArray.emplaceBack(t+1,t+2,t+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const t=Math.sin(e),n=Math.cos(e),r=[],i=[],o=[];for(let e=0;e<this.symbolInstances.length;++e){o.push(e);const a=this.symbolInstances.get(e);r.push(0|Math.round(t*a.tileAnchorX+n*a.tileAnchorY)),i.push(a.featureIndex)}return o.sort(((e,t)=>r[e]-r[t]||i[t]-i[e])),o}addToSortKeyRanges(e,t){const n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===t?n.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const e of this.symbolInstanceIndexes){const t=this.symbolInstances.get(e);this.featureSortOrder.push(t.featureIndex),[t.rightJustifiedTextSymbolIndex,t.centerJustifiedTextSymbolIndex,t.leftJustifiedTextSymbolIndex].forEach(((e,t,n)=>{e>=0&&n.indexOf(e)===t&&this.addIndicesForPlacedSymbol(this.text,e)})),t.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,t.verticalPlacedTextSymbolIndex),t.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.placedIconSymbolIndex),t.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}ai(ef,{omit:["layers","collisionBoxArray","features","compareText"]}),ef.MAX_GLYPHS=65535,ef.addDynamicAttributes=Yh;const tf=new _o({"symbol-placement":new mo(Ne.layout_symbol["symbol-placement"]),"symbol-spacing":new mo(Ne.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new mo(Ne.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new go(Ne.layout_symbol["symbol-sort-key"]),"symbol-z-order":new mo(Ne.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new mo(Ne.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new mo(Ne.layout_symbol["icon-ignore-placement"]),"icon-optional":new mo(Ne.layout_symbol["icon-optional"]),"icon-rotation-alignment":new mo(Ne.layout_symbol["icon-rotation-alignment"]),"icon-size":new go(Ne.layout_symbol["icon-size"]),"icon-text-fit":new mo(Ne.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new mo(Ne.layout_symbol["icon-text-fit-padding"]),"icon-image":new go(Ne.layout_symbol["icon-image"]),"icon-rotate":new go(Ne.layout_symbol["icon-rotate"]),"icon-padding":new mo(Ne.layout_symbol["icon-padding"]),"icon-keep-upright":new mo(Ne.layout_symbol["icon-keep-upright"]),"icon-offset":new go(Ne.layout_symbol["icon-offset"]),"icon-anchor":new go(Ne.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new mo(Ne.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new mo(Ne.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new mo(Ne.layout_symbol["text-rotation-alignment"]),"text-field":new go(Ne.layout_symbol["text-field"]),"text-font":new go(Ne.layout_symbol["text-font"]),"text-size":new go(Ne.layout_symbol["text-size"]),"text-max-width":new go(Ne.layout_symbol["text-max-width"]),"text-line-height":new go(Ne.layout_symbol["text-line-height"]),"text-letter-spacing":new go(Ne.layout_symbol["text-letter-spacing"]),"text-justify":new go(Ne.layout_symbol["text-justify"]),"text-radial-offset":new go(Ne.layout_symbol["text-radial-offset"]),"text-variable-anchor":new mo(Ne.layout_symbol["text-variable-anchor"]),"text-anchor":new go(Ne.layout_symbol["text-anchor"]),"text-max-angle":new mo(Ne.layout_symbol["text-max-angle"]),"text-writing-mode":new mo(Ne.layout_symbol["text-writing-mode"]),"text-rotate":new go(Ne.layout_symbol["text-rotate"]),"text-padding":new mo(Ne.layout_symbol["text-padding"]),"text-keep-upright":new mo(Ne.layout_symbol["text-keep-upright"]),"text-transform":new go(Ne.layout_symbol["text-transform"]),"text-offset":new go(Ne.layout_symbol["text-offset"]),"text-allow-overlap":new mo(Ne.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new mo(Ne.layout_symbol["text-ignore-placement"]),"text-optional":new mo(Ne.layout_symbol["text-optional"])});var nf={paint:new _o({"icon-opacity":new go(Ne.paint_symbol["icon-opacity"]),"icon-color":new go(Ne.paint_symbol["icon-color"]),"icon-halo-color":new go(Ne.paint_symbol["icon-halo-color"]),"icon-halo-width":new go(Ne.paint_symbol["icon-halo-width"]),"icon-halo-blur":new go(Ne.paint_symbol["icon-halo-blur"]),"icon-translate":new mo(Ne.paint_symbol["icon-translate"]),"icon-translate-anchor":new mo(Ne.paint_symbol["icon-translate-anchor"]),"text-opacity":new go(Ne.paint_symbol["text-opacity"]),"text-color":new go(Ne.paint_symbol["text-color"],{runtimeType:Ye,getOverride:e=>e.textColor,hasOverride:e=>!!e.textColor}),"text-halo-color":new go(Ne.paint_symbol["text-halo-color"]),"text-halo-width":new go(Ne.paint_symbol["text-halo-width"]),"text-halo-blur":new go(Ne.paint_symbol["text-halo-blur"]),"text-translate":new mo(Ne.paint_symbol["text-translate"]),"text-translate-anchor":new mo(Ne.paint_symbol["text-translate-anchor"])}),layout:tf};class rf{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:He,this.defaultValue=e}evaluate(e){if(e.formattedSection){const t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}ai(rf,{omit:["defaultValue"]});class of extends Ha{constructor(e){super(e,nf)}recalculate(e,t){super.recalculate(e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const n=this.layout.get("text-writing-mode");if(n){const e=[];for(const t of n)e.indexOf(t)<0&&e.push(t);this.layout._values["text-writing-mode"]=e}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(e,t,n,r){const i=this.layout.get(e).evaluate(t,{},n,r),o=this._unevaluatedLayout._values[e];return o.isDataDriven()||cr(o.value)||!i?i:function(e,t){return t.replace(/{([^{}]+)}/g,((t,n)=>n in e?String(e[n]):""))}(t.properties,i)}createBucket(e){return new ef(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of nf.paint.overridableProperties){if(!of.hasPaintOverride(this.layout,e))continue;const t=this.paint.get(e),n=new rf(t),r=new lr(n,t.property.specification);let i=null;i="constant"===t.value.kind||"source"===t.value.kind?new hr("source",r):new fr("composite",r,t.value.zoomStops,t.value._interpolationType),this.paint._values[e]=new fo(t.property,i,t.parameters)}}_handleOverridablePaintPropertyUpdate(e,t,n){return!(!this.layout||t.isDataDriven()||n.isDataDriven())&&of.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,t){const n=e.get("text-field"),r=nf.paint.properties[t];let i=!1;const o=e=>{for(const t of e)if(r.overrides&&r.overrides.hasOverride(t))return void(i=!0)};if("constant"===n.value.kind&&n.value.value instanceof pt)o(n.value.value.sections);else if("source"===n.value.kind){const e=t=>{i||(t instanceof bt&&yt(t.value)===et?o(t.value.sections):t instanceof wt?o(t.sections):t.eachChild(e))},t=n.value;t._styleExpression&&e(t._styleExpression.expression)}return i}getProgramConfiguration(e){return new Fa(this,e)}}var af={paint:new _o({"background-color":new mo(Ne.paint_background["background-color"]),"background-pattern":new vo(Ne.paint_background["background-pattern"]),"background-opacity":new mo(Ne.paint_background["background-opacity"])})},sf={paint:new _o({"raster-opacity":new mo(Ne.paint_raster["raster-opacity"]),"raster-hue-rotate":new mo(Ne.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new mo(Ne.paint_raster["raster-brightness-min"]),"raster-brightness-max":new mo(Ne.paint_raster["raster-brightness-max"]),"raster-saturation":new mo(Ne.paint_raster["raster-saturation"]),"raster-contrast":new mo(Ne.paint_raster["raster-contrast"]),"raster-resampling":new mo(Ne.paint_raster["raster-resampling"]),"raster-fade-duration":new mo(Ne.paint_raster["raster-fade-duration"])})};class lf extends Ha{constructor(e){super(e,{}),this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}var cf={paint:new _o({"sky-type":new mo(Ne.paint_sky["sky-type"]),"sky-atmosphere-sun":new mo(Ne.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new mo(Ne.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new mo(Ne.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new mo(Ne.paint_sky["sky-gradient-radius"]),"sky-gradient":new bo(Ne.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new mo(Ne.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new mo(Ne.paint_sky["sky-atmosphere-color"]),"sky-opacity":new mo(Ne.paint_sky["sky-opacity"])})};function uf(e,t,n){const r=[0,0,1],i=gl([]);return function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);e[0]=r*l-o*s,e[1]=i*l+a*s,e[2]=o*l+r*s,e[3]=a*l-i*s}(i,i,n?-c(e)+Math.PI:c(e)),yl(i,i,-c(t)),cl(r,r,i),ol(r,r)}const hf={circle:class extends Ha{constructor(e){super(e,Rs)}createBucket(e){return new bs(e)}queryRadius(e){const t=e;return Is("circle-radius",this,t)+Is("circle-stroke-width",this,t)+Os(this.paint.get("circle-translate"))}queryIntersectsFeature(e,t,n,r,i,o,a,s){const l=zs(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),c=this.paint.get("circle-radius").evaluate(t,n)+this.paint.get("circle-stroke-width").evaluate(t,n);return _l(e,r,o,a,s,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),l,c)}getProgramIds(){return["circle"]}getProgramConfiguration(e){return new Fa(this,e)}},heatmap:class extends Ha{createBucket(e){return new El(e)}constructor(e){super(e,Pl),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"heatmap-color"===e&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Il({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(e){return Is("heatmap-radius",this,e)}queryIntersectsFeature(e,t,n,r,o,a,s,l){const c=this.paint.get("heatmap-radius").evaluate(t,n);return _l(e,r,a,s,l,!0,!0,new i(0,0),c)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(e){return new Fa(this,e)}},hillshade:class extends Ha{constructor(e){super(e,Ol)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Ha{constructor(e){super(e,_c)}getProgramIds(){const e=this.paint.get("fill-pattern"),t=e&&e.constantOr(1),n=[t?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&n.push(t&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),n}getProgramConfiguration(e){return new Fa(this,e)}recalculate(e,t){super.recalculate(e,t);const n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new vc(e)}queryRadius(){return Os(this.paint.get("fill-translate"))}queryIntersectsFeature(e,t,n,r,i,o){return!e.queryGeometry.isAboveHorizon&&As(Ds(e.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),r)}isTileClipped(){return!0}},"fill-extrusion":class extends Ha{constructor(e){super(e,Vc)}createBucket(e){return new Nc(e)}queryRadius(){return Os(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(e){return new Fa(this,e)}queryIntersectsFeature(e,t,n,r,o,a,s,l,c){const u=zs(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),h=this.paint.get("fill-extrusion-height").evaluate(t,n),f=this.paint.get("fill-extrusion-base").evaluate(t,n),p=[0,0],d=l&&a.elevation,m=a.elevation?a.elevation.exaggeration():1,g=e.tile.getBucket(this);if(d&&g instanceof Nc){const e=g.centroidVertexArray,t=c+1;if(t<e.length){const n=e.get(t);p[0]=n.a_centroid_pos0,p[1]=n.a_centroid_pos1}}if(0===p[0]&&1===p[1])return!1;const y=function(e,t,n,r,o,a,s,l,c){return a?function(e,t,n,r,i,o,a,s,l){const c=[],u=[],h=[0,0,0,1];for(const f of e){const e=[],p=[];for(const c of f){const u=c.x+r.x,f=c.y+r.y,d=Hc(u,f,t,n,o,a,s,l);h[0]=u,h[1]=f,h[2]=d.base,h[3]=1,dl(h,h,i),h[3]=Math.max(h[3],1e-5);const m=Wc([h[0]/h[3],h[1]/h[3],h[2]/h[3]]);h[0]=u,h[1]=f,h[2]=d.top,h[3]=1,dl(h,h,i),h[3]=Math.max(h[3],1e-5);const g=Wc([h[0]/h[3],h[1]/h[3],h[2]/h[3]]);e.push(m),p.push(g)}c.push(e),u.push(p)}return[c,u]}(e,t,n,r,o,a,s,l,c):function(e,t,n,r,o){const a=[],s=[],l=o[8]*t,c=o[9]*t,u=o[10]*t,h=o[11]*t,f=o[8]*n,p=o[9]*n,d=o[10]*n,m=o[11]*n;for(const t of e){const e=[],n=[];for(const a of t){const t=a.x+r.x,s=a.y+r.y,g=o[0]*t+o[4]*s+o[12],y=o[1]*t+o[5]*s+o[13],v=o[2]*t+o[6]*s+o[14],b=o[3]*t+o[7]*s+o[15],_=g+l,x=y+c,A=v+u,w=Math.max(b+h,1e-5),C=g+f,E=y+p,S=v+d,T=Math.max(b+m,1e-5),B=new i(_/w,x/w);B.z=A/w,e.push(B);const k=new i(C/T,E/T);k.z=S/T,n.push(k)}a.push(e),s.push(n)}return[a,s]}(e,t,n,r,o)}(r,f,h,u,s,d?l:null,p,m,a.center.lat),v=e.queryGeometry;return function(e,t,n){let r=1/0;As(n,t)&&(r=qc(n,t[0]));for(let i=0;i<t.length;i++){const o=t[i],a=e[i];for(let e=0;e<o.length-1;e++){const t=o[e],i=[t,o[e+1],a[e+1],a[e],t];_s(n,i)&&(r=Math.min(r,qc(n,i)))}}return r!==1/0&&r}(y[0],y[1],v.isPointQuery()?v.screenBounds:v.screenGeometry)}},line:class extends Ha{constructor(e){super(e,tu),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(e){if("line-gradient"===e){const e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=e._styleExpression&&e._styleExpression.expression instanceof tn,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(e,t){super.recalculate(e,t),this.paint._values["line-floorwidth"]=nu.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new Qc(e)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(e){return new Fa(this,e)}queryRadius(e){const t=e,n=ru(Is("line-width",this,t),Is("line-gap-width",this,t)),r=Is("line-offset",this,t);return n/2+Math.abs(r)+Os(this.paint.get("line-translate"))}queryIntersectsFeature(e,t,n,r,o,a){if(e.queryGeometry.isAboveHorizon)return!1;const s=Ds(e.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),l=e.pixelToTileUnitsFactor/2*ru(this.paint.get("line-width").evaluate(t,n),this.paint.get("line-gap-width").evaluate(t,n)),c=this.paint.get("line-offset").evaluate(t,n);return c&&(r=function(e,t){const n=[],r=new i(0,0);for(let i=0;i<e.length;i++){const o=e[i],a=[];for(let e=0;e<o.length;e++){const n=o[e-1],i=o[e],s=o[e+1],l=0===e?r:i.sub(n)._unit()._perp(),c=e===o.length-1?r:s.sub(i)._unit()._perp(),u=l._add(c)._unit();u._mult(1/(u.x*c.x+u.y*c.y)),a.push(u._mult(t)._add(i))}n.push(a)}return n}(r,c*e.pixelToTileUnitsFactor)),function(e,t,n){for(let r=0;r<t.length;r++){const i=t[r];if(e.length>=3)for(let t=0;t<i.length;t++)if(ks(e,i[t]))return!0;if(ws(e,i,n))return!0}return!1}(s,r,l)}isTileClipped(){return!0}},symbol:of,background:class extends Ha{constructor(e){super(e,af)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Ha{constructor(e){super(e,sf)}getProgramIds(){return["raster"]}},sky:class extends Ha{constructor(e){super(e,cf),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"sky-gradient"===e?this._updateColorRamp():"sky-atmosphere-sun"!==e&&"sky-atmosphere-halo-color"!==e&&"sky-atmosphere-color"!==e&&"sky-atmosphere-sun-intensity"!==e||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Il({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(e){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const t=e.style.light.properties.get("position");return this._lightPosition.azimuthal!==t.azimuthal||this._lightPosition.polar!==t.polar}return!1}getCenter(e,t){if("atmosphere"===this.paint.get("sky-type")){const n=this.paint.get("sky-atmosphere-sun"),r=!n,i=e.style.light,o=i.properties.get("position");return r&&"viewport"===i.properties.get("anchor")&&I("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),r?uf(o.azimuthal,90-o.polar,t):uf(n[0],90-n[1],t)}const n=this.paint.get("sky-gradient-center");return uf(n[0],90-n[1],t)}is3D(){return!1}isSky(){return!0}markSkyboxValid(e){this._skyboxInvalidated=!1,this._lightPosition=e.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const e=this.paint.get("sky-type");return"atmosphere"===e?["skyboxCapture","skybox"]:"gradient"===e?["skyboxGradient"]:null}}};class ff{constructor(e,t,n,r){this.context=e,this.format=n,this.texture=e.gl.createTexture(),this.update(t,r)}update(e,t,n){const{width:r,height:i}=e,{context:o}=this,{gl:s}=o,{HTMLImageElement:l,HTMLCanvasElement:c,HTMLVideoElement:u,ImageData:h,ImageBitmap:f}=a;if(s.bindTexture(s.TEXTURE_2D,this.texture),o.pixelStoreUnpackFlipY.set(!1),o.pixelStoreUnpack.set(1),o.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!t||!1!==t.premultiply)),n||this.size&&this.size[0]===r&&this.size[1]===i){const{x:t,y:o}=n||{x:0,y:0};e instanceof l||e instanceof c||e instanceof u||e instanceof h||f&&e instanceof f?s.texSubImage2D(s.TEXTURE_2D,0,t,o,s.RGBA,s.UNSIGNED_BYTE,e):s.texSubImage2D(s.TEXTURE_2D,0,t,o,r,i,s.RGBA,s.UNSIGNED_BYTE,e.data)}else this.size=[r,i],e instanceof l||e instanceof c||e instanceof u||e instanceof h||f&&e instanceof f?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,e):s.texImage2D(s.TEXTURE_2D,0,this.format,r,i,0,this.format,s.UNSIGNED_BYTE,e.data);this.useMipmap=Boolean(t&&t.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&s.generateMipmap(s.TEXTURE_2D)}bind(e,t){const{context:n}=this,{gl:r}=n;r.bindTexture(r.TEXTURE_2D,this.texture),e!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,this.useMipmap?e===r.NEAREST?r.NEAREST_MIPMAP_NEAREST:r.LINEAR_MIPMAP_NEAREST:e),this.filter=e),t!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,t),this.wrap=t)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class pf{constructor(e,t){this.width=e,this.height=t,this.nextRow=0,this.image=new kl({width:e,height:t}),this.positions={},this.uploaded=!1}getDash(e,t){const n=this.getKey(e,t);return this.positions[n]}trim(){const e=this.width,t=this.height=C(this.nextRow);this.image.resize({width:e,height:t})}getKey(e,t){return e.join(",")+t}getDashRanges(e,t,n){const r=[];let i=e.length%2==1?-e[e.length-1]*n:0,o=e[0]*n,a=!0;r.push({left:i,right:o,isDash:a,zeroLength:0===e[0]});let s=e[0];for(let t=1;t<e.length;t++){a=!a;const l=e[t];i=s*n,s+=l,o=s*n,r.push({left:i,right:o,isDash:a,zeroLength:0===l})}return r}addRoundDash(e,t,n){const r=t/2;for(let t=-n;t<=n;t++){const i=this.width*(this.nextRow+n+t);let o=0,a=e[o];for(let s=0;s<this.width;s++){s/a.right>1&&(a=e[++o]);const l=Math.abs(s-a.left),c=Math.abs(s-a.right),u=Math.min(l,c);let h;const f=t/n*(r+1);if(a.isDash){const e=r-Math.abs(f);h=Math.sqrt(u*u+e*e)}else h=r-Math.sqrt(u*u+f*f);this.image.data[i+s]=Math.max(0,Math.min(255,h+128))}}}addRegularDash(e,t){for(let t=e.length-1;t>=0;--t){const n=e[t],r=e[t+1];n.zeroLength?e.splice(t,1):r&&r.isDash===n.isDash&&(r.left=n.left,e.splice(t,1))}const n=e[0],r=e[e.length-1];n.isDash===r.isDash&&(n.left=r.left-this.width,r.right=n.right+this.width);const i=this.width*this.nextRow;let o=0,a=e[o];for(let n=0;n<this.width;n++){n/a.right>1&&(a=e[++o]);const r=Math.abs(n-a.left),s=Math.abs(n-a.right),l=Math.min(r,s);this.image.data[i+n]=Math.max(0,Math.min(255,(a.isDash?l:-l)+t+128))}}addDash(e,t){const n=this.getKey(e,t);if(this.positions[n])return this.positions[n];const r="round"===t,i=r?7:0,o=2*i+1;if(this.nextRow+o>this.height)return I("LineAtlas out of space"),null;0===e.length&&e.push(1);let a=0;for(let t=0;t<e.length;t++)e[t]<0&&(I("Negative value is found in line dasharray, replacing values with 0"),e[t]=0),a+=e[t];if(0!==a){const n=this.width/a,o=this.getDashRanges(e,this.width,n);r?this.addRoundDash(o,n,i):this.addRegularDash(o,"square"===t?.5*n:0)}const s=this.nextRow+i;this.nextRow+=o;const l={tl:[s,i],br:[a,0]};return this.positions[n]=l,l}}ai(pf);class df{constructor(e){this._callback=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){this._channel=void 0,this._callback=()=>{}}}const mf=a.performance;function gf(e){const t=e?e.url.toString():void 0;return mf.getEntriesByName(t)}class yf{constructor(){this.tasks={},this.taskQueue=[],S(["process"],this),this.invoker=new df(this.process),this.nextId=0}add(e,t){const n=this.nextId++,r=function({type:e,isSymbolTile:t,zoom:n}){return n=n||0,"message"===e?0:"maybePrepare"!==e||t?"parseTile"!==e||t?"parseTile"===e&&t?300-n:"maybePrepare"===e&&t?400-n:500:200-n:100-n}(t);if(0===r){z();try{e()}finally{}return{cancel:()=>{}}}return this.tasks[n]={fn:e,metadata:t,priority:r,id:n},this.taskQueue.push(n),this.invoker.trigger(),{cancel:()=>{delete this.tasks[n]}}}process(){z();try{if(this.taskQueue=this.taskQueue.filter((e=>!!this.tasks[e])),!this.taskQueue.length)return;const e=this.pick();if(null===e)return;const t=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!t)return;t.fn()}finally{}}pick(){let e=null,t=1/0;for(let n=0;n<this.taskQueue.length;n++){const r=this.tasks[this.taskQueue[n]];r.priority<t&&(t=r.priority,e=n)}if(null===e)return null;const n=this.taskQueue[e];return this.taskQueue.splice(e,1),n}remove(){this.invoker.remove()}}const vf=Eo([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_merc_pos",components:2},{type:"Float32",name:"a_uv",components:2}]),bf=Eo([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:_f}=vf,xf=Eo([{name:"a_pos_3",components:3,type:"Int16"}]);var Af=Eo([{name:"a_pos",type:"Int16",components:2}]);const wf=Ya/Math.PI/2,Cf=-wf,Ef=wf,Sf=[new bl([Cf,Cf,Cf],[Ef,Ef,Ef]),new bl([Cf,Cf,Cf],[0,0,Ef]),new bl([0,Cf,Cf],[Ef,0,Ef]),new bl([Cf,0,Cf],[0,Ef,Ef]),new bl([0,0,Cf],[Ef,Ef,Ef])];class Tf{constructor(e,t,n){this.a=hl([],e,n),this.b=hl([],t,n),this.center=n;const r=ol([],this.a),i=ol([],this.b);this.angle=Math.acos(al(r,i))}}function Bf(e,t){if(0===e.angle)return null;let n;return n=0===e.a[t]?1/e.angle*.5*Math.PI:1/e.angle*Math.atan(e.b[t]/e.a[t]/Math.sin(e.angle)-1/Math.tan(e.angle)),n<0||n>1?null:function(e,t,n,r){const i=Math.sin(n);return e*(Math.sin((1-r)*n)/i)+t*(Math.sin(r*n)/i)}(e.a[t],e.b[t],e.angle,m(n,0,1))+e.center[t]}function kf(e){if(e.z<=1)return Sf[e.z+2*e.y+e.x];const[t,n]=Pf(e),r=[Of(t[0],t[1]),Of(t[0],n[1]),Of(n[0],t[1]),Of(n[0],n[1])],i=[Ef,Ef,Ef],o=[Cf,Cf,Cf];for(const e of r)i[0]=Math.min(i[0],e[0]),i[1]=Math.min(i[1],e[1]),i[2]=Math.min(i[2],e[2]),o[0]=Math.max(o[0],e[0]),o[1]=Math.max(o[1],e[1]),o[2]=Math.max(o[2],e[2]);return new bl(i,o)}function Mf(e,t,n){const r=t/e.worldSize,i=(e,t)=>{rl(e,e,r),rl(t,t,r)},o=Number.MAX_VALUE,a=[-o,-o,-o],s=[o,o,o],l=Ff(e);if(n.z<=1){const e=kf(n).getCorners();for(let t=0;t<e.length;t++)ll(e[t],e[t],l),tl(s,s,e[t]),nl(a,a,e[t]);return i(s,a),new bl(s,a)}const[u,h]=Pf(n),f=new Ka;f.setSouthWest([u[1],h[0]]),f.setNorthEast([h[1],u[0]]);const p=[Of(f.getSouth(),f.getWest()),Of(f.getSouth(),f.getEast()),Of(f.getNorth(),f.getEast()),Of(f.getNorth(),f.getWest())];for(let e=0;e<p.length;e++)ll(p[e],p[e],l),tl(s,s,p[e]),nl(a,a,p[e]);if(f.contains(e.center))return a[2]=0,i(s,a),new bl(s,a);const d=[l[12],l[13],l[14]],g=e.center.lng,y=m(e.center.lat,-85.051129,ls),v=[ns(g),rs(y)],b=f.getCenter().lng,_=m(f.getCenter().lat,-85.051129,ls),x=[ns(b),rs(_)];let A=new Array(3),w=0;const C=v[0]-x[0],E=v[1]-x[1];if(Math.abs(C)>Math.abs(E))w=C>=0?1:3,A=d;else{w=E>=0?0:2;const e=[l[4],l[5],l[6]];let t;t=E>=0?-Math.sin(c(f.getSouth()))*wf:-Math.sin(c(f.getNorth()))*wf,A=il(A,d,e,t)}const S=p[w],T=p[(w+1)%4],B=new Tf(S,T,A),k=[Bf(B,0)||S[0],Bf(B,1)||S[1],Bf(B,2)||S[2]];return s[2]=Math.min(S[2],T[2]),tl(s,s,k),nl(a,a,k),i(s,a),new bl(s,a)}function Pf(e){const t=1<<e.z,n=e.x/t,r=(e.x+1)/t,i=(e.y+1)/t;return[[as(e.y/t),os(n)],[as(i),os(r)]]}function If(e,t,n,r=wf){return n=c(n),[e*Math.sin(n)*r,-t*r,e*Math.cos(n)*r]}function Of(e,t,n){return If(Math.cos(c(e)),Math.sin(c(e)),t,n)}function Df(e,t,n){const r=Math.pow(2,n.z),i=(e/Ya+n.x)/r;return Of(as((t/Ya+n.y)/r),os(i))}function zf(e){return 16383/Math.max(...hl([],e.max,e.min))}function Lf(e){const t=js(new Float64Array(16)),n=zf(e);var r,i;return qs(t,t,[n,n,n]),Gs(t,t,((r=[])[0]=-(i=e.min)[0],r[1]=-i[1],r[2]=-i[2],r)),t}function Rf(e,t,n,r,i){const o=function(e){const t=Ya/(2*Math.PI);return e/(2*Math.PI)/t}(n),a=[e,t,-n/(2*Math.PI)],s=js(new Float64Array(16));return Gs(s,s,a),qs(s,s,[o,o,o]),Ws(s,s,c(-i)),Hs(s,s,c(-r)),s}function Ff(e){const{x:t,y:n}=e.point,{lng:r,lat:i}=e._center;return Rf(t,n,e.worldSize,r,i)}const Uf=c(85),Nf=Math.cos(Uf),jf=Math.sin(Uf);function Vf(e,t,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[e*r-2*Math.PI*6378137/2,t*r-2*Math.PI*6378137/2]}class Gf{constructor(e,t,n){this.z=e,this.x=t,this.y=n,this.key=Hf(0,e,e,t,n)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,t){const n=function(e,t,n){var r=Vf(256*e,256*(t=Math.pow(2,n)-t-1),n),i=Vf(256*(e+1),256*(t+1),n);return r[0]+","+r[1]+","+i[0]+","+i[1]}(this.x,this.y,this.z),r=function(e,t,n){let r,i="";for(let o=e;o>0;o--)r=1<<o-1,i+=(t&r?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",r).replace("{bbox-epsg-3857}",n)}toString(){return`${this.z}/${this.x}/${this.y}`}}class qf{constructor(e,t){this.wrap=e,this.canonical=t,this.key=Hf(e,t.z,t.z,t.x,t.y)}}class Wf{constructor(e,t,n,r,i){this.overscaledZ=e,this.wrap=t,this.canonical=new Gf(n,+r,+i),this.key=0===t&&e===n?this.canonical.key:Hf(t,e,n,r,i)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const t=this.canonical.z-e;return e>this.canonical.z?new Wf(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Wf(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)}calculateScaledKey(e,t=!0){if(this.overscaledZ===e&&t)return this.key;if(e>this.canonical.z)return Hf(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y);{const n=this.canonical.z-e;return Hf(this.wrap*+t,e,e,this.canonical.x>>n,this.canonical.y>>n)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;const t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}children(e){if(this.overscaledZ>=e)return[new Wf(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const t=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new Wf(t,this.wrap,t,n,r),new Wf(t,this.wrap,t,n+1,r),new Wf(t,this.wrap,t,n,r+1),new Wf(t,this.wrap,t,n+1,r+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new Wf(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new Wf(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new qf(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Hf(e,t,n,r,i){const o=1<<Math.min(n,22);let a=o*(i%o)+r%o;return e&&n<22&&(a+=o*o*((e<0?-2*e-1:2*e)%(1<<2*(22-n)))),16*(32*a+n)+(t-n)}function $f(e,t){if(!t.isReprojectedInTileSpace)return{scale:1<<e.z,x:e.x,y:e.y,x2:e.x+1,y2:e.y+1,projection:t};const n=Math.pow(2,-e.z),r=e.x*n,i=(e.x+1)*n,o=e.y*n,a=(e.y+1)*n,s=os(r),l=os(i),c=as(o),u=as(a),h=t.project(s,c),f=t.project(l,c),p=t.project(l,u),d=t.project(s,u);let m=Math.min(h.x,f.x,p.x,d.x),g=Math.min(h.y,f.y,p.y,d.y),y=Math.max(h.x,f.x,p.x,d.x),v=Math.max(h.y,f.y,p.y,d.y);const b=n/16;function _(e,n,r,i,o,a){const s=(r+o)/2,l=(i+a)/2,c=t.project(os(s),as(l)),u=Math.max(0,m-c.x,g-c.y,c.x-y,c.y-v);m=Math.min(m,c.x),y=Math.max(y,c.x),g=Math.min(g,c.y),v=Math.max(v,c.y),u>b&&(_(e,c,r,i,s,l),_(c,n,s,l,o,a))}_(h,f,r,o,i,o),_(f,p,i,o,i,a),_(p,d,i,a,r,a),_(d,h,r,a,r,o),m-=b,g-=b,y+=b,v+=b;const x=1/Math.max(y-m,v-g);return{scale:x,x:m*x,y:g*x,x2:y*x,y2:v*x,projection:t}}ai(Gf),ai(Wf,{omit:["projMatrix"]});class Xf{constructor(e){this._stringToNumber={},this._numberToString=[];for(let t=0;t<e.length;t++){const n=e[t];this._stringToNumber[n]=t,this._numberToString[t]=n}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}const Zf=["tile","layer","source","sourceLayer","state"];class Yf{constructor(e,t,n,r,i){this.type="Feature",this._vectorTileFeature=e,this._z=t,this._x=n,this._y=r,this.properties=e.properties,this.id=i}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={type:"Feature",geometry:this.geometry,properties:this.properties};void 0!==this.id&&(e.id=this.id);for(const t of Zf)void 0!==this[t]&&(e[t]=this[t]);return e}}const Kf=32,Jf=33,Qf=new Uint16Array(8184);for(let e=0;e<2046;e++){let t=e+2,n=0,r=0,i=0,o=0,a=0,s=0;for(1&t?i=o=a=Kf:n=r=s=Kf;(t>>=1)>1;){const e=n+i>>1,l=r+o>>1;1&t?(i=n,o=r,n=a,r=s):(n=i,r=o,i=a,o=s),a=e,s=l}const l=4*e;Qf[l+0]=n,Qf[l+1]=r,Qf[l+2]=i,Qf[l+3]=o}const ep=new Uint16Array(2178),tp=new Uint8Array(1089),np=new Uint16Array(1089);function rp(e){return 0===e?-.03125:32===e?.03125:0}var ip=Eo([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const op={type:2,extent:Ya,loadGeometry:()=>[[new i(0,0),new i(8193,0),new i(8193,8193),new i(0,8193),new i(0,0)]]};class ap{constructor(e,t,n,r,i){this.tileID=e,this.uid=A(),this.uses=0,this.tileSize=t,this.tileZoom=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=i,this.expiredRequestCount=0,this.state="loading",r&&r.transform&&(this.projection=r.transform.projection)}registerFadeDuration(e){const t=e+this.timeAdded;t<q.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=$f(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(e,t,n){if(this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){const n={};if(!t)return n;for(const r of e){const e=r.layerIds.map((e=>t.getLayer(e))).filter(Boolean);if(0!==e.length){r.layers=e,r.stateDependentLayerIds&&(r.stateDependentLayers=r.stateDependentLayerIds.map((t=>e.filter((e=>e.id===t))[0])));for(const t of e)n[t.id]=r}}return n}(e.buckets,t.style),this.hasSymbolBuckets=!1;for(const e in this.buckets){const t=this.buckets[e];if(t instanceof ef){if(this.hasSymbolBuckets=!0,!n)break;t.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const e in this.buckets){const t=this.buckets[e];if(t instanceof ef&&t.hasRTLText){this.hasRTLText=!0,io.isLoading()||io.isLoaded()||"deferred"!==no()||ro();break}}this.queryPadding=0;for(const e in this.buckets){const n=this.buckets[e];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(e).queryRadius(n))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas)}else this.collisionBoxArray=new na}unloadVectorData(){if(this.hasData()){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugIndexBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(e){return this.buckets[e.id]}upload(e){for(const t in this.buckets){const n=this.buckets[t];n.uploadPending()&&n.upload(e)}const t=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ff(e,this.imageAtlas.image,t.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ff(e,this.glyphAtlasImage,t.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new ff(e,this.lineAtlas.image,t.ALPHA),this.lineAtlas.uploaded=!0)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,t,n,r,i,o,a,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:r,pixelPosMatrix:a,transform:o,params:i,tileTransform:this.tileTransform},e,t,n):{}}querySourceFeatures(e,t){const n=this.latestFeatureIndex;if(!n||!n.rawTileData)return;const r=n.loadVTLayers(),i=t?t.sourceLayer:"",o=r._geojsonTileLayer||r[i];if(!o)return;const a=Er(t&&t.filter),{z:s,x:l,y:c}=this.tileID.canonical,u={z:s,x:l,y:c};for(let t=0;t<o.length;t++){const r=o.feature(t);if(a.needGeometry){const e=gs(r,!0);if(!a.filter(new oo(this.tileID.overscaledZ),e,this.tileID.canonical))continue}else if(!a.filter(new oo(this.tileID.overscaledZ),r))continue;const h=n.getId(r,i),f=new Yf(r,s,l,c,h);f.tile=u,e.push(f)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const t=this.expirationTime;if(e.cacheControl){const t=L(e.cacheControl);t["max-age"]&&(this.expirationTime=Date.now()+1e3*t["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const e=Date.now();let n=!1;if(this.expirationTime>e)n=!1;else if(t)if(this.expirationTime<t)n=!0;else{const r=this.expirationTime-t;r?this.expirationTime=e+Math.max(r,3e4):n=!0}else n=!0;n?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,t){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(e).length||!t)return;const n=this.latestFeatureIndex.loadVTLayers(),r=t.style.listImages();for(const i in this.buckets){if(!t.style.hasLayer(i))continue;const o=this.buckets[i],a=o.layers[0].sourceLayer||"_geojsonTileLayer",s=n[a],l=e[a];if(!s||!l||0===Object.keys(l).length)continue;if(o.update(l,s,r,this.imageAtlas&&this.imageAtlas.patternPositions||{}),o instanceof Qc||o instanceof vc){const e=t.style._getSourceCache(o.layers[0].source);t._terrain&&t._terrain.enabled&&e&&o.programConfigurations.needsUpload&&t._terrain._clearRenderCacheForTile(e.id,this.tileID)}const c=t&&t.style&&t.style.getLayer(i);c&&(this.queryPadding=Math.max(this.queryPadding,c.queryRadius(o)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<q.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=q.now()+e}setTexture(e,t){const n=t.context,r=n.gl;this.texture=t.getTileTexture(e.width),this.texture?this.texture.update(e,{useMipmap:!0}):(this.texture=new ff(n,e,r.RGBA,{useMipmap:!0}),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),n.extTextureFilterAnisotropic&&r.texParameterf(r.TEXTURE_2D,n.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,n.extTextureFilterAnisotropicMax))}setDependencies(e,t){const n={};for(const e of t)n[e]=!0;this.dependencies[e]=n}hasDependency(e,t){for(const n of e){const e=this.dependencies[n];if(e)for(const n of t)if(e[n])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(e,t){if(!t||"mercator"===t.name||this._tileDebugBuffer)return;const n=ms(op,this.tileID.canonical,this.tileTransform)[0],r=new To,i=new Zo;for(let e=0;e<n.length;e++){const{x:t,y:o}=n[e];r.emplaceBack(t,o),i.emplaceBack(e)}i.emplaceBack(0),this._tileDebugIndexBuffer=e.createIndexBuffer(i),this._tileDebugBuffer=e.createVertexBuffer(r,Af.members),this._tileDebugSegments=Za.simpleSegment(0,0,r.length,i.length)}_makeTileBoundsBuffers(e,t){if(this._tileBoundsBuffer||!t||"mercator"===t.name)return;const n=ms(op,this.tileID.canonical,this.tileTransform)[0];let r,i;if(this.isRaster){const e=function(e,t){const n=$f(e,t),r=Math.pow(2,e.z);for(let i=0;i<Jf;i++)for(let o=0;o<Jf;o++){const a=os((e.x+(o+rp(o))/Kf)/r),s=as((e.y+(i+rp(i))/Kf)/r),l=t.project(a,s),c=i*Jf+o;ep[2*c+0]=Math.round((l.x*n.scale-n.x)*Ya),ep[2*c+1]=Math.round((l.y*n.scale-n.y)*Ya)}tp.fill(0),np.fill(0);for(let e=2045;e>=0;e--){const t=4*e,n=Qf[t+0],r=Qf[t+1],i=Qf[t+2],o=Qf[t+3],a=n+i>>1,s=r+o>>1,l=a+s-r,c=s+n-a,u=r*Jf+n,h=o*Jf+i,f=s*Jf+a,p=Math.hypot((ep[2*u+0]+ep[2*h+0])/2-ep[2*f+0],(ep[2*u+1]+ep[2*h+1])/2-ep[2*f+1])>=16;if(tp[f]=tp[f]||(p?1:0),e<1022){const e=(r+c>>1)*Jf+(n+l>>1),t=(o+c>>1)*Jf+(i+l>>1);tp[f]=tp[f]||tp[e]||tp[t]}}const i=new ko,o=new jo;let a=0;function s(e,t){const n=t*Jf+e;return 0===np[n]&&(i.emplaceBack(ep[2*n+0],ep[2*n+1],e*Ya/Kf,t*Ya/Kf),np[n]=++a),np[n]-1}function l(e,t,n,r,i,a){const c=e+n>>1,u=t+r>>1;if(Math.abs(e-i)+Math.abs(t-a)>1&&tp[u*Jf+c])l(i,a,e,t,c,u),l(n,r,i,a,c,u);else{const l=s(e,t),c=s(n,r),u=s(i,a);o.emplaceBack(l,c,u)}}return l(0,0,Kf,Kf,Kf,0),l(Kf,Kf,0,0,0,Kf),{vertices:i,indices:o}}(this.tileID.canonical,t);r=e.vertices,i=e.indices}else{r=new ko,i=new jo;for(const{x:e,y:t}of n)r.emplaceBack(e,t,0,0);const e=Ll(r.int16,void 0,4);for(let t=0;t<e.length;t+=3)i.emplaceBack(e[t],e[t+1],e[t+2])}this._tileBoundsBuffer=e.createVertexBuffer(r,ip.members),this._tileBoundsIndexBuffer=e.createIndexBuffer(i),this._tileBoundsSegments=Za.simpleSegment(0,0,r.length,i.length)}_makeGlobeTileDebugBuffers(e,t){if(this._globeTileDebugBorderBuffer||this._globeTileDebugTextBuffer||!t||"globe"!==t.name)return;const n=this.tileID.canonical,r=Lf(kf(n));this._makeGlobeTileDebugBorderBuffer(e,n,r),this._makeGlobeTileDebugTextBuffer(e,n,r)}_makeGlobeTileDebugBorderBuffer(e,t,n){const r=new To,i=new Zo,o=new Bo,a=(e,a,s,l,c)=>{const u=(s-e)/(c-1),h=(l-a)/(c-1),f=r.length;for(let s=0;s<c;s++){const l=e+s*u,c=a+s*h;r.emplaceBack(l,c);const p=Df(l,c,t),d=ll(p,p,n);o.emplaceBack(d[0],d[1],d[2]),i.emplaceBack(f+s)}},s=Ya;a(0,0,s,0,16),a(s,0,s,s,16),a(s,s,0,s,16),a(0,s,0,0,16),this._tileDebugIndexBuffer=e.createIndexBuffer(i),this._tileDebugBuffer=e.createVertexBuffer(r,Af.members),this._globeTileDebugBorderBuffer=e.createVertexBuffer(o,xf.members),this._tileDebugSegments=Za.simpleSegment(0,0,r.length,i.length)}_makeGlobeTileDebugTextBuffer(e,t,n){const r=new To,i=new jo,o=new Bo,a=25;i.reserve(32),r.reserve(a),o.reserve(a);const s=(e,t)=>a*e+t;for(let e=0;e<a;e++){const i=2048*e;for(let e=0;e<a;e++){const a=2048*e;r.emplaceBack(a,i);const s=Df(a,i,t),l=ll(s,s,n);o.emplaceBack(l[0],l[1],l[2])}}for(let e=0;e<4;e++)for(let t=0;t<4;t++){const n=s(e,t),r=s(e,t+1),o=s(e+1,t),a=s(e+1,t+1);i.emplaceBack(n,r,o),i.emplaceBack(o,r,a)}this._tileDebugTextIndexBuffer=e.createIndexBuffer(i),this._tileDebugTextBuffer=e.createVertexBuffer(r,Af.members),this._globeTileDebugTextBuffer=e.createVertexBuffer(o,xf.members),this._tileDebugTextSegments=Za.simpleSegment(0,0,a,32)}}class sp{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,t,n){const r=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][r]=this.stateChanges[e][r]||{},_(this.stateChanges[e][r],n),null===this.deletedStates[e]){this.deletedStates[e]={};for(const t in this.state[e])t!==r&&(this.deletedStates[e][t]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][r]){this.deletedStates[e][r]={};for(const t in this.state[e][r])n[t]||(this.deletedStates[e][r][t]=null)}else for(const t in n)this.deletedStates[e]&&this.deletedStates[e][r]&&null===this.deletedStates[e][r][t]&&delete this.deletedStates[e][r][t]}removeFeatureState(e,t,n){if(null===this.deletedStates[e])return;const r=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},n&&void 0!==t)null!==this.deletedStates[e][r]&&(this.deletedStates[e][r]=this.deletedStates[e][r]||{},this.deletedStates[e][r][n]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][r])for(n in this.deletedStates[e][r]={},this.stateChanges[e][r])this.deletedStates[e][r][n]=null;else this.deletedStates[e][r]=null;else this.deletedStates[e]=null}getState(e,t){const n=String(t),r=_({},(this.state[e]||{})[n],(this.stateChanges[e]||{})[n]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const n=this.deletedStates[e][t];if(null===n)return{};for(const e in n)delete r[e]}return r}initializeTileState(e,t){e.setFeatureState(this.state,t)}coalesceChanges(e,t){const n={};for(const e in this.stateChanges){this.state[e]=this.state[e]||{};const t={};for(const n in this.stateChanges[e])this.state[e][n]||(this.state[e][n]={}),_(this.state[e][n],this.stateChanges[e][n]),t[n]=this.state[e][n];n[e]=t}for(const e in this.deletedStates){this.state[e]=this.state[e]||{};const t={};if(null===this.deletedStates[e])for(const n in this.state[e])t[n]={},this.state[e][n]={};else for(const n in this.deletedStates[e]){if(null===this.deletedStates[e][n])this.state[e][n]={};else for(const t of Object.keys(this.deletedStates[e][n]))delete this.state[e][n][t];t[n]=this.state[e][n]}n[e]=n[e]||{},_(n[e],t)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(const r in e)e[r].setFeatureState(n,t)}}class lp{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,t){const n=this.toIdx(e,t);return{min:this.minimums[n],max:this.maximums[n]}}isLeaf(e,t){return this.leaves[this.toIdx(e,t)]}toIdx(e,t){return t*this.size+e}}function cp(e,t,n,r){let i=0,o=Number.MAX_VALUE;for(let a=0;a<3;a++)if(Math.abs(r[a])<1e-15){if(n[a]<e[a]||n[a]>t[a])return null}else{const s=1/r[a];let l=(e[a]-n[a])*s,c=(t[a]-n[a])*s;if(l>c){const e=l;l=c,c=e}if(l>i&&(i=l),c<o&&(o=c),i>o)return null}return i}function up(e,t,n,r,i,o,a,s,l,c,u){const h=r-e,f=i-t,p=o-n,d=a-e,m=s-t,g=l-n,y=u[1]*g-u[2]*m,v=u[2]*d-u[0]*g,b=u[0]*m-u[1]*d,_=h*y+f*v+p*b;if(Math.abs(_)<1e-15)return null;const x=1/_,A=c[0]-e,w=c[1]-t,C=c[2]-n,E=(A*y+w*v+C*b)*x;if(E<0||E>1)return null;const S=w*p-C*f,T=C*h-A*p,B=A*f-w*h,k=(u[0]*S+u[1]*T+u[2]*B)*x;return k<0||E+k>1?null:(d*S+m*T+g*B)*x}function hp(e,t,n){return(e-t)/(n-t)}function fp(e,t,n,r,i,o,a,s,l){const c=1<<n,u=o-r,h=a-i,f=(e+1)/c*u+r,p=(t+0)/c*h+i,d=(t+1)/c*h+i;s[0]=(e+0)/c*u+r,s[1]=p,l[0]=f,l[1]=d}class pp{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const t=function(e){const t=Math.ceil(Math.log2(e.dim/8)),n=[];let r=Math.ceil(Math.pow(2,t));const i=1/r,o=(e,t,n,r,i)=>{const o=r?1:0,a=(e+1)*n-o,s=t*n,l=(t+1)*n-o;i[0]=e*n,i[1]=s,i[2]=a,i[3]=l};let a=new lp(r);const s=[];for(let t=0;t<r*r;t++){o(t%r,Math.floor(t/r),i,!1,s);const n=mp(s[0],s[1],e),l=mp(s[2],s[1],e),c=mp(s[2],s[3],e),u=mp(s[0],s[3],e);a.minimums.push(Math.min(n,l,c,u)),a.maximums.push(Math.max(n,l,c,u)),a.leaves.push(1)}for(n.push(a),r/=2;r>=1;r/=2){const e=n[n.length-1];a=new lp(r);for(let t=0;t<r*r;t++){o(t%r,Math.floor(t/r),2,!0,s);const n=e.getElevation(s[0],s[1]),i=e.getElevation(s[2],s[1]),l=e.getElevation(s[2],s[3]),c=e.getElevation(s[0],s[3]),u=e.isLeaf(s[0],s[1]),h=e.isLeaf(s[2],s[1]),f=e.isLeaf(s[2],s[3]),p=e.isLeaf(s[0],s[3]),d=Math.min(n.min,i.min,l.min,c.min),m=Math.max(n.max,i.max,l.max,c.max),g=u&&h&&f&&p;a.maximums.push(m),a.minimums.push(d),a.leaves.push(m-d<=5&&g?1:0)}n.push(a)}return n}(this.dem),n=t.length-1,r=t[n];this._addNode(r.minimums[0],r.maximums[0],r.leaves[0]),this._construct(t,0,0,n,0)}raycastRoot(e,t,n,r,i,o,a=1){return cp([e,t,-100],[n,r,this.maximums[0]*a],i,o)}raycast(e,t,n,r,i,o,a=1){if(!this.nodeCount)return null;const s=this.raycastRoot(e,t,n,r,i,o,a);if(null==s)return null;const l=[],c=[],u=[],h=[],f=[{idx:0,t:s,nodex:0,nodey:0,depth:0}];for(;f.length>0;){const{idx:s,t:p,nodex:d,nodey:m,depth:g}=f.pop();if(this.leaves[s]){fp(d,m,g,e,t,n,r,u,h);const s=1<<g,l=(d+0)/s,c=(d+1)/s,f=(m+0)/s,y=(m+1)/s,v=mp(l,f,this.dem)*a,b=mp(c,f,this.dem)*a,_=mp(c,y,this.dem)*a,x=mp(l,y,this.dem)*a,A=up(u[0],u[1],v,h[0],u[1],b,h[0],h[1],_,i,o),w=up(h[0],h[1],_,u[0],h[1],x,u[0],u[1],v,i,o),C=Math.min(null!==A?A:Number.MAX_VALUE,null!==w?w:Number.MAX_VALUE);if(C!==Number.MAX_VALUE)return C;{const e=il([],i,o,p);if(dp(v,b,x,_,hp(e[0],u[0],h[0]),hp(e[1],u[1],h[1]))>=e[2])return p}continue}let y=0;for(let f=0;f<this._siblingOffset.length;f++){fp((d<<1)+this._siblingOffset[f][0],(m<<1)+this._siblingOffset[f][1],g+1,e,t,n,r,u,h),u[2]=-100,h[2]=this.maximums[this.childOffsets[s]+f]*a;const p=cp(u,h,i,o);if(null!=p){const e=p;l[f]=e;let t=!1;for(let n=0;n<y&&!t;n++)e>=l[c[n]]&&(c.splice(n,0,f),t=!0);t||(c[y]=f),y++}}for(let e=0;e<y;e++){const t=c[e];f.push({idx:this.childOffsets[s]+t,t:l[t],nodex:(d<<1)+this._siblingOffset[t][0],nodey:(m<<1)+this._siblingOffset[t][1],depth:g+1})}}return null}_addNode(e,t,n){return this.minimums.push(e),this.maximums.push(t),this.leaves.push(n),this.childOffsets.push(0),this.nodeCount++}_construct(e,t,n,r,i){if(1===e[r].isLeaf(t,n))return;this.childOffsets[i]||(this.childOffsets[i]=this.nodeCount);const o=r-1,a=e[o];let s=0,l=0;for(let e=0;e<this._siblingOffset.length;e++){const r=2*t+this._siblingOffset[e][0],i=2*n+this._siblingOffset[e][1],o=a.getElevation(r,i),c=a.isLeaf(r,i),u=this._addNode(o.min,o.max,c);c&&(s|=1<<e),l||(l=u)}for(let r=0;r<this._siblingOffset.length;r++)s&1<<r||this._construct(e,2*t+this._siblingOffset[r][0],2*n+this._siblingOffset[r][1],o,l+r)}}function dp(e,t,n,r,i,o){return nn(nn(e,n,o),nn(t,r,o),i)}function mp(e,t,n){const r=n.dim,i=m(e*r-.5,0,r-1),o=m(t*r-.5,0,r-1),a=Math.floor(i),s=Math.floor(o),l=Math.min(a+1,r-1),c=Math.min(s+1,r-1);return dp(n.get(a,s),n.get(l,s),n.get(a,c),n.get(l,c),i-a,o-s)}const gp={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class yp{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,t,n,r=!1,i=!1){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return I(`"${n}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=t.height;const o=this.dim=t.height-2,a=new Uint32Array(t.data.buffer);if(this.pixels=new Uint8Array(t.data.buffer),this.encoding=n||"mapbox",this.borderReady=r,!r){for(let e=0;e<o;e++)a[this._idx(-1,e)]=a[this._idx(0,e)],a[this._idx(o,e)]=a[this._idx(o-1,e)],a[this._idx(e,-1)]=a[this._idx(e,0)],a[this._idx(e,o)]=a[this._idx(e,o-1)];a[this._idx(-1,-1)]=a[this._idx(0,0)],a[this._idx(o,-1)]=a[this._idx(o-1,0)],a[this._idx(-1,o)]=a[this._idx(0,o-1)],a[this._idx(o,o)]=a[this._idx(o-1,o-1)],i&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new pp(this)}get(e,t,n=!1){n&&(e=m(e,-1,this.dim),t=m(t,-1,this.dim));const r=4*this._idx(e,t);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(this.pixels[r],this.pixels[r+1],this.pixels[r+2])}static getUnpackVector(e){return gp[e]}get unpackVector(){return gp[this.encoding]}_idx(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}_unpackMapbox(e,t,n){return(256*e*256+256*t+n)/10-1e4}_unpackTerrarium(e,t,n){return 256*e+t+n/256-32768}static pack(e,t){const n=[0,0,0,0],r=yp.getUnpackVector(t);let i=Math.floor((e+r[3])/r[2]);return n[2]=i%256,i=Math.floor(i/256),n[1]=i%256,i=Math.floor(i/256),n[0]=i,n}getPixels(){return new Ml({width:this.stride,height:this.stride},this.pixels)}backfillBorder(e,t,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let r=t*this.dim,i=t*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(t){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}const s=-t*this.dim,l=-n*this.dim;for(let t=o;t<a;t++)for(let n=r;n<i;n++){const r=4*this._idx(n,t),i=4*this._idx(n+s,t+l);this.pixels[r+0]=e.pixels[i+0],this.pixels[r+1]=e.pixels[i+1],this.pixels[r+2]=e.pixels[i+2],this.pixels[r+3]=e.pixels[i+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}ai(yp),ai(pp,{omit:["dem"]});class vp{constructor(e,t){this.max=e,this.onRemove=t,this.reset()}reset(){for(const e in this.data)for(const t of this.data[e])t.timeout&&clearTimeout(t.timeout),this.onRemove(t.value);return this.data={},this.order=[],this}add(e,t,n){const r=e.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);const i={value:t,timeout:void 0};if(void 0!==n&&(i.timeout=setTimeout((()=>{this.remove(e,i)}),n)),this.data[r].push(i),this.order.push(r),this.order.length>this.max){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}getByKey(e){const t=this.data[e];return t?t[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,t){if(!this.has(e))return this;const n=e.wrapped().key,r=void 0===t?0:this.data[n].indexOf(t),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(e){const t=[];for(const n in this.data)for(const r of this.data[n])e(r.value)||t.push(r);for(const e of t)this.remove(e.value.tileID,e)}}class bp{constructor(e,t,n){this.func=e,this.mask=t,this.range=n}}bp.ReadOnly=!1,bp.ReadWrite=!0,bp.disabled=new bp(519,bp.ReadOnly,[0,1]);const _p=7680;class xp{constructor(e,t,n,r,i,o){this.test=e,this.ref=t,this.mask=n,this.fail=r,this.depthFail=i,this.pass=o}}xp.disabled=new xp({func:519,mask:0},0,0,_p,_p,_p);class Ap{constructor(e,t,n){this.blendFunction=e,this.blendColor=t,this.mask=n}}Ap.Replace=[1,0],Ap.disabled=new Ap(Ap.Replace,ut.transparent,[!1,!1,!1,!1]),Ap.unblended=new Ap(Ap.Replace,ut.transparent,[!0,!0,!0,!0]),Ap.alphaBlended=new Ap([1,771],ut.transparent,[!0,!0,!0,!0]);const wp=1029,Cp=2305;class Ep{constructor(e,t,n){this.enable=e,this.mode=t,this.frontFace=n}}Ep.disabled=new Ep(!1,wp,Cp),Ep.backCCW=new Ep(!0,wp,Cp),Ep.backCW=new Ep(!0,wp,2304),Ep.frontCW=new Ep(!0,1028,2304),Ep.frontCCW=new Ep(!0,1028,Cp);class Sp extends Ue{constructor(e,t,n){super(),this.id=e,this._onlySymbols=n,t.on("data",(e=>{"source"===e.dataType&&"metadata"===e.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))})),t.on("error",(()=>{this._sourceErrored=!0})),this._source=t,this._tiles={},this._cache=new vp(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=t.minTileCacheSize,this._maxTileCacheSize=t.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new sp,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(e){this.map=e,this._minTileCacheSize=void 0===this._minTileCacheSize&&e?e._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&e?e._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const e in this._tiles){const t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(e,t){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,t)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,(()=>{}))}_abortTile(e){if(this._source.abortTile)return this._source.abortTile(e,(()=>{}))}serialize(){return this._source.serialize()}prepare(e){if(this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._source.prepareTile)for(const t in this._tiles){const n=this._tiles[t];this._source.prepareTile(n)&&this.map.painter.terrain&&this.map.painter.terrain._clearRenderCacheForTile(this.id,n.tileID),n.upload(e),n.prepare(this.map.style.imageManager)}else for(const t in this._tiles){const n=this._tiles[t];n.upload(e),n.prepare(this.map.style.imageManager)}}getIds(){return b(this._tiles).map((e=>e.tileID)).sort(Tp).map((e=>e.key))}getRenderableIds(e){const t=[];for(const n in this._tiles)this._isIdRenderable(+n,e)&&t.push(this._tiles[n]);return e?t.sort(((e,t)=>{const n=e.tileID,r=t.tileID,o=new i(n.canonical.x,n.canonical.y)._rotate(this.transform.angle),a=new i(r.canonical.x,r.canonical.y)._rotate(this.transform.angle);return n.overscaledZ-r.overscaledZ||a.y-o.y||a.x-o.x})).map((e=>e.tileID.key)):t.map((e=>e.tileID)).sort(Tp).map((e=>e.key))}hasRenderableParent(e){const t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}_isIdRenderable(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(+e,"reloading")}}_reloadTile(e,t){const n=this._tiles[e];n&&("loading"!==n.state&&(n.state=t),this._loadTile(n,this._tileLoaded.bind(this,n,e,t)))}_tileLoaded(e,t,n,r){if(r)if(e.state="errored",404!==r.status)this._source.fire(new Fe(r,{tile:e}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const e=this.map.painter.terrain;this.update(this.transform,e.getScaledDemTileSize(),!0),e.resetTileLookupCache(this.id)}else this.update(this.transform);else e.timeAdded=q.now(),"expired"===n&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(t,e),"raster-dem"===this._source.type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new Re("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}_backfillDEM(e){const t=this.getRenderableIds();for(let r=0;r<t.length;r++){const i=t[r];if(e.neighboringTiles&&e.neighboringTiles[i]){const t=this.getTileByID(i);n(e,t),n(t,e)}}function n(e,t){if(!e.dem||e.dem.borderReady)return;e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0;let n=t.tileID.canonical.x-e.tileID.canonical.x;const r=t.tileID.canonical.y-e.tileID.canonical.y,i=Math.pow(2,e.tileID.canonical.z),o=t.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,n,r),e.neighboringTiles&&e.neighboringTiles[o]&&(e.neighboringTiles[o].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,t,n,r){for(const i in this._tiles){let o=this._tiles[i];if(r[i]||!o.hasData()||o.tileID.overscaledZ<=t||o.tileID.overscaledZ>n)continue;let a=o.tileID;for(;o&&o.tileID.overscaledZ>t+1;){const e=o.tileID.scaledTo(o.tileID.overscaledZ-1);o=this._tiles[e.key],o&&o.hasData()&&(a=e)}let s=a;for(;s.overscaledZ>t;)if(s=s.scaledTo(s.overscaledZ-1),e[s.key]){r[a.key]=a;break}}}findLoadedParent(e,t){if(e.key in this._loadedParentTiles){const n=this._loadedParentTiles[e.key];return n&&n.tileID.overscaledZ>=t?n:null}for(let n=e.overscaledZ-1;n>=t;n--){const t=e.scaledTo(n),r=this._getLoadedTile(t);if(r)return r}}_getLoadedTile(e){const t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}updateCacheSize(e,t){t=t||this._source.tileSize;const n=Math.ceil(e.width/t)+1,r=Math.ceil(e.height/t)+1,i=Math.floor(n*r*5),o="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,i):i,a="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,o):o;this._cache.setMaxSize(a)}handleWrapJump(e){const t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){const e={};for(const n in this._tiles){const r=this._tiles[n];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+t),e[r.tileID.key]=r}this._tiles=e;for(const e in this._timers)clearTimeout(this._timers[e]),delete this._timers[e];for(const e in this._tiles)this._setTileReloadTimer(+e,this._tiles[e])}}update(e,t,n){if(this.transform=e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage)return;if(this.usedForTerrain&&!n)return;let r;this.updateCacheSize(e,t),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?r=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((e=>new Wf(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y))):(r=e.coveringTiles({tileSize:t||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!n,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(r=r.filter((e=>this._source.hasTile(e))))):r=[];const i=this._updateRetainedTiles(r);if(Bp(this._source.type)&&0!==r.length){const e={},t={},n=Object.keys(i);for(const r of n){const n=i[r],o=this._tiles[r];if(!o||o.fadeEndTime&&o.fadeEndTime<=q.now())continue;const a=this.findLoadedParent(n,Math.max(n.overscaledZ-Sp.maxOverzooming,this._source.minzoom));a&&(this._addTile(a.tileID),e[a.tileID.key]=a.tileID),t[r]=n}const o=r[r.length-1].overscaledZ;for(const e in this._tiles){const n=this._tiles[e];if(i[e]||!n.hasData())continue;let r=n.tileID;for(;r.overscaledZ>o;){r=r.scaledTo(r.overscaledZ-1);const o=this._tiles[r.key];if(o&&o.hasData()&&t[r.key]){i[e]=n.tileID;break}}}for(const t in e)i[t]||(this._coveredTiles[t]=!0,i[t]=e[t])}for(const e in i)this._tiles[e].clearFadeHold();const o=function(e,t){const n=[];for(const r in e)r in t||n.push(r);return n}(this._tiles,i);for(const e of o){const t=this._tiles[e];t.hasSymbolBuckets&&!t.holdingForFade()?t.setHoldDuration(this.map._fadeDuration):t.hasSymbolBuckets&&!t.symbolFadeFinished()||this._removeTile(+e)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}_updateRetainedTiles(e){const t={};if(0===e.length)return t;const n={},r=e.reduce(((e,t)=>Math.min(e,t.overscaledZ)),1/0),i=e[0].overscaledZ,o=Math.max(i-Sp.maxOverzooming,this._source.minzoom),a=Math.max(i+Sp.maxUnderzooming,this._source.minzoom),s={};for(const n of e){const e=this._addTile(n);t[n.key]=n,e.hasData()||r<this._source.maxzoom&&(s[n.key]=n)}this._retainLoadedChildren(s,r,a,t);for(const r of e){let e=this._tiles[r.key];if(e.hasData())continue;if(r.canonical.z>=this._source.maxzoom){const e=r.children(this._source.maxzoom)[0],n=this.getTile(e);if(n&&n.hasData()){t[e.key]=e;continue}}else{const e=r.children(this._source.maxzoom);if(t[e[0].key]&&t[e[1].key]&&t[e[2].key]&&t[e[3].key])continue}let i=e.wasRequested();for(let a=r.overscaledZ-1;a>=o;--a){const o=r.scaledTo(a);if(n[o.key])break;if(n[o.key]=!0,e=this.getTile(o),!e&&i&&(e=this._addTile(o)),e&&(t[o.key]=o,i=e.wasRequested(),e.hasData()))break}}return t}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const t=[];let n,r=this._tiles[e].tileID;for(;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){n=this._loadedParentTiles[r.key];break}t.push(r.key);const e=r.scaledTo(r.overscaledZ-1);if(n=this._getLoadedTile(e),n)break;r=e}for(const e of t)this._loadedParentTiles[e]=n}}_addTile(e){let t=this._tiles[e.key];if(t)return this._source.prepareTile&&this._source.prepareTile(t),t;t=this._cache.getAndRemove(e),t&&(this._setTileReloadTimer(e.key,t),t.tileID=e,this._state.initializeTileState(t,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,t)));const n=Boolean(t);if(!n){const n=this.map?this.map.painter:null;t=new ap(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,n,this._isRaster),this._source.prepareTile&&this._source.prepareTile(t)||this._loadTile(t,this._tileLoaded.bind(this,t,e.key,t.state))}return t?(t.uses++,this._tiles[e.key]=t,n||this._source.fire(new Re("dataloading",{tile:t,coord:t.tileID,dataType:"source"})),t):null}_setTileReloadTimer(e,t){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const n=t.getExpiryTimeout();n&&(this._timers[e]=setTimeout((()=>{this._reloadTile(e,"expired"),delete this._timers[e]}),n))}_removeTile(e){const t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(e,t,n){const r=[],i=this.transform;if(!i)return r;for(const o in this._tiles){const a=this._tiles[o];if(n&&a.clearQueryDebugViz(),a.holdingForFade())continue;const s=e.containsTile(a,i,t);s&&r.push(s)}return r}getVisibleCoordinates(e){const t=this.getRenderableIds(e).map((e=>this._tiles[e].tileID));for(const e of t)e.projMatrix=this.transform.calculateProjMatrix(e.toUnwrapped());return t}hasTransition(){if(this._source.hasTransition())return!0;if(Bp(this._source.type))for(const e in this._tiles){const t=this._tiles[e];if(void 0!==t.fadeEndTime&&t.fadeEndTime>=q.now())return!0}return!1}setFeatureState(e,t,n){this._state.updateState(e=e||"_geojsonTileLayer",t,n)}removeFeatureState(e,t,n){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,n)}getFeatureState(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}setDependencies(e,t,n){const r=this._tiles[e];r&&r.setDependencies(t,n)}reloadTilesForDependencies(e,t){for(const n in this._tiles)this._tiles[n].hasDependency(e,t)&&this._reloadTile(+n,"reloading");this._cache.filter((n=>!n.hasDependency(e,t)))}_preloadTiles(e,t){const n=new Map,r=Array.isArray(e)?e:[e],i=this.map.painter.terrain,o=this.usedForTerrain&&i?i.getScaledDemTileSize():this._source.tileSize;for(const e of r){const t=e.coveringTiles({tileSize:o,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const e of t)n.set(e.key,e);this.usedForTerrain&&e.updateElevation(!1)}v(Array.from(n.values()),((e,t)=>{const n=new ap(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(n,(e=>{"raster-dem"===this._source.type&&n.dem&&this._backfillDEM(n),t(e,n)}))}),t)}}function Tp(e,t){const n=Math.abs(2*e.wrap)-+(e.wrap<0),r=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||r-n||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function Bp(e){return"raster"===e||"image"===e||"video"===e}Sp.maxOverzooming=10,Sp.maxUnderzooming=3;class kp{constructor(e,t,n){this._demTile=e,this._dem=this._demTile.dem,this._scale=t,this._offset=n}static create(e,t,n){const r=n||e.findDEMTileFor(t);if(!r||!r.dem)return;const i=r.dem,o=r.tileID,a=1<<t.canonical.z-o.canonical.z;return new kp(r,r.tileSize/Ya/a,[(t.canonical.x/a-o.canonical.x)*i.dim,(t.canonical.y/a-o.canonical.y)*i.dim])}tileCoordToPixel(e,t){const n=t*this._scale+this._offset[1],r=Math.floor(e*this._scale+this._offset[0]),o=Math.floor(n);return new i(r,o)}getElevationAt(e,t,n,r){const i=e*this._scale+this._offset[0],o=t*this._scale+this._offset[1],a=Math.floor(i),s=Math.floor(o),l=this._dem;return r=!!r,n?nn(nn(l.get(a,s,r),l.get(a,s+1,r),o-s),nn(l.get(a+1,s,r),l.get(a+1,s+1,r),o-s),i-a):l.get(a,s,r)}getElevationAtPixel(e,t,n){return this._dem.get(e,t,!!n)}getMeterToDEM(e){return(1<<this._demTile.tileID.canonical.z)*is(1,e)*this._dem.stride}}class Mp{constructor(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new ri(Ya,16,0),this.featureIndexArray=new ua,this.promoteId=t}insert(e,t,n,r,i,o=0){const a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i,o);const s=this.grid;for(let e=0;e<t.length;e++){const n=t[e],r=[1/0,1/0,-1/0,-1/0];for(let e=0;e<n.length;e++){const t=n[e];r[0]=Math.min(r[0],t.x),r[1]=Math.min(r[1],t.y),r[2]=Math.max(r[2],t.x),r[3]=Math.max(r[3],t.y)}r[0]<Ya&&r[1]<Ya&&r[2]>=0&&r[3]>=0&&s.insert(a,r[0],r[1],r[2],r[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Oc.VectorTile(new Au(this.rawTileData)).layers,this.sourceLayerCoder=new Xf(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const e in this.vtLayers)this.vtFeatures[e]=[]}return this.vtLayers}query(e,t,n,r){this.loadVTLayers();const i=e.params||{},o=Er(i.filter),a=e.tileResult,s=e.transform,l=a.bufferedTilespaceBounds,c=this.grid.query(l.min.x,l.min.y,l.max.x,l.max.y,((e,t,n,r)=>Ms(a.bufferedTilespaceGeometry,e,t,n,r)));c.sort(Ip);let u=null;s.elevation&&c.length>0&&(u=kp.create(s.elevation,this.tileID));const h={};let f;for(let s=0;s<c.length;s++){const l=c[s];if(l===f)continue;f=l;const p=this.featureIndexArray.get(l);let d=null;this.loadMatchingFeature(h,p,o,i.layers,i.availableImages,t,n,r,((t,n,r,i=0)=>(d||(d=ms(t,this.tileID.canonical,e.tileTransform)),n.queryIntersectsFeature(a,t,r,d,this.z,e.transform,e.pixelPosMatrix,u,i))))}return h}loadMatchingFeature(e,t,n,r,i,o,a,s,l){const{featureIndex:c,bucketIndex:u,sourceLayerIndex:h,layoutVertexArrayOffset:f}=t,p=this.bucketLayerIDs[u];if(r&&!function(e,t){for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1}(r,p))return;const d=this.sourceLayerCoder.decode(h),m=this.vtLayers[d].feature(c);if(n.needGeometry){const e=gs(m,!0);if(!n.filter(new oo(this.tileID.overscaledZ),e,this.tileID.canonical))return}else if(!n.filter(new oo(this.tileID.overscaledZ),m))return;const g=this.getId(m,d);for(let t=0;t<p.length;t++){const n=p[t];if(r&&r.indexOf(n)<0)continue;const u=o[n];if(!u)continue;let h={};void 0!==g&&s&&(h=s.getState(u.sourceLayer||"_geojsonTileLayer",g));const d=_({},a[n]);d.paint=Pp(d.paint,u.paint,m,h,i),d.layout=Pp(d.layout,u.layout,m,h,i);const y=!l||l(m,u,h,f);if(!y)continue;const v=new Yf(m,this.z,this.x,this.y,g);v.layer=d;let b=e[n];void 0===b&&(b=e[n]=[]),b.push({featureIndex:c,feature:v,intersectionZ:y})}}lookupSymbolFeatures(e,t,n,r,i,o,a,s){const l={};this.loadVTLayers();const c=Er(i);for(const i of e)this.loadMatchingFeature(l,{bucketIndex:n,sourceLayerIndex:r,featureIndex:i,layoutVertexArrayOffset:0},c,o,a,s,t);return l}loadFeature(e){const{featureIndex:t,sourceLayerIndex:n}=e;this.loadVTLayers();const r=this.sourceLayerCoder.decode(n),i=this.vtFeatures[r];if(i[t])return i[t];const o=this.vtLayers[r].feature(t);return i[t]=o,o}hasLayer(e){for(const t of this.bucketLayerIDs)for(const n of t)if(e===n)return!0;return!1}getId(e,t){let n=e.id;return this.promoteId&&(n=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[t]],"boolean"==typeof n&&(n=Number(n))),n}}function Pp(e,t,n,r,i){return B(e,((e,o)=>{const a=t instanceof po?t.get(o):null;return a&&a.evaluate?a.evaluate(n,r,i):a}))}function Ip(e,t){return t-e}ai(Mp,{omit:["rawTileData","sourceLayerCoder"]});class Op{constructor(e){const t={},n=[];for(const r in e){const i=e[r],o=t[r]={};for(const e in i.glyphs){const t=i.glyphs[+e];if(!t||0===t.bitmap.width||0===t.bitmap.height)continue;const r=t.metrics.localGlyph?2:1,a={x:0,y:0,w:t.bitmap.width+2*r,h:t.bitmap.height+2*r};n.push(a),o[e]=a}}const{w:r,h:i}=Wu(n),o=new kl({width:r||1,height:i||1});for(const n in e){const r=e[n];for(const e in r.glyphs){const i=r.glyphs[+e];if(!i||0===i.bitmap.width||0===i.bitmap.height)continue;const a=t[n][e],s=i.metrics.localGlyph?2:1;kl.copy(i.bitmap,o,{x:0,y:0},{x:a.x+s,y:a.y+s},i.bitmap)}}this.image=o,this.positions=t}}ai(Op);class Dp{constructor(e){this.tileID=new Wf(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.tileZoom=e.tileZoom,this.uid=e.uid,this.zoom=e.zoom,this.canonical=e.tileID.canonical,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId,this.enableTerrain=!!e.enableTerrain,this.isSymbolTile=e.isSymbolTile,this.tileTransform=$f(e.tileID.canonical,e.projection),this.projection=e.projection}parse(e,t,n,r,i){this.status="parsing",this.data=e,this.collisionBoxArray=new na;const o=new Xf(Object.keys(e.layers).sort()),a=new Mp(this.tileID,this.promoteId);a.bucketLayerIDs=[];const s={},l=new pf(256,256),c={featureIndex:a,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:l,availableImages:n},u=t.familiesBySource[this.source];for(const t in u){const r=e.layers[t];if(!r)continue;let i=!1,l=!1;for(const e of u[t])"symbol"===e[0].type?i=!0:l=!0;if(!0===this.isSymbolTile&&!i)continue;if(!1===this.isSymbolTile&&!l)continue;1===r.version&&I(`Vector tile source "${this.source}" layer "${t}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const h=o.encode(t),f=[];for(let e=0;e<r.length;e++){const n=r.feature(e),i=a.getId(n,t);f.push({feature:n,id:i,index:e,sourceLayerIndex:h})}for(const e of u[t]){const t=e[0];void 0!==this.isSymbolTile&&"symbol"===t.type!==this.isSymbolTile||t.minzoom&&this.zoom<Math.floor(t.minzoom)||t.maxzoom&&this.zoom>=t.maxzoom||"none"!==t.visibility&&(zp(e,this.zoom,n),(s[t.id]=t.createBucket({index:a.bucketLayerIDs.length,layers:e,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:h,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.name,availableImages:n})).populate(f,c,this.tileID.canonical,this.tileTransform),a.bucketLayerIDs.push(e.map((e=>e.id))))}}let h,f,p,d;l.trim();const m={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},g=B(c.glyphDependencies,(e=>Object.keys(e).map(Number)));Object.keys(g).length?r.send("getGlyphs",{uid:this.uid,stacks:g},((e,t)=>{h||(h=e,f=t,_.call(this))}),void 0,!1,m):f={};const y=Object.keys(c.iconDependencies);y.length?r.send("getImages",{icons:y,source:this.source,tileID:this.tileID,type:"icons"},((e,t)=>{h||(h=e,p=t,_.call(this))}),void 0,!1,m):p={};const v=Object.keys(c.patternDependencies);function _(){if(h)return i(h);if(f&&p&&d){const e=new Op(f),t=new $u(p,d);for(const r in s){const i=s[r];i instanceof ef?(zp(i.layers,this.zoom,n),Fh(i,f,e.positions,p,t.iconPositions,this.showCollisionBoxes,n,this.tileID.canonical,this.tileZoom,this.projection)):i.hasPattern&&(i instanceof Qc||i instanceof vc||i instanceof Nc)&&(zp(i.layers,this.zoom,n),i.addFeatures(c,this.tileID.canonical,t.patternPositions,n,this.tileTransform))}this.status="done",i(null,{buckets:b(s).filter((e=>!e.isEmpty())),featureIndex:a,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,lineAtlas:l,imageAtlas:t,glyphMap:this.returnDependencies?f:null,iconMap:this.returnDependencies?p:null,glyphPositions:this.returnDependencies?e.positions:null})}}v.length?r.send("getImages",{icons:v,source:this.source,tileID:this.tileID,type:"patterns"},((e,t)=>{h||(h=e,d=t,_.call(this))}),void 0,!1,m):d={},_.call(this)}}function zp(e,t,n){const r=new oo(t);for(const t of e)t.recalculate(r,n)}class Lp{constructor(e){this.entries={},this.scheduler=e}request(e,t,n,r){const i=this.entries[e]=this.entries[e]||{callbacks:[]};if(i.result){const[e,n]=i.result;return this.scheduler?this.scheduler.add((()=>{r(e,n)}),t):r(e,n),()=>{}}return i.callbacks.push(r),i.cancel||(i.cancel=n(((n,r)=>{i.result=[n,r];for(const e of i.callbacks)this.scheduler?this.scheduler.add((()=>{e(n,r)}),t):e(n,r);setTimeout((()=>delete this.entries[e]),3e3)}))),()=>{i.result||(i.callbacks=i.callbacks.filter((e=>e!==r)),i.callbacks.length||(i.cancel(),delete this.entries[e]))}}}function Rp(e,t,n){const r=JSON.stringify(e.request);return e.data&&(this.deduped.entries[r]={result:[null,e.data]}),this.deduped.request(r,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom},(t=>{const r=Te(e.request,((e,r,i,o)=>{e?t(e):r&&t(null,{vectorTile:n?void 0:new Oc.VectorTile(new Au(r)),rawData:r,cacheControl:i,expires:o})}));return()=>{r.cancel(),t()}}),t)}const Fp=js(new Float32Array(16));class Up{constructor(e){this.name=e.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(e,t){return{x:0,y:0,z:0}}unproject(e,t){return new Qa(0,0)}projectTilePoint(e,t,n){return{x:e,y:t,z:0}}locationPoint(e,t){return e._coordinatePoint(e.locationCoordinate(t),!1)}pixelsPerMeter(e,t){return is(1,e)*t}farthestPixelDistance(e){return function(e,t){const n=e.fovAboveCenter,r=e.elevation?e.elevation.getMinElevationBelowMSL()*t:0,i=(e._camera.position[2]*e.worldSize-r)/Math.cos(e._pitch),o=Math.sin(n)*i/Math.sin(Math.max(Math.PI/2-e._pitch-n,.01)),a=Math.sin(e._pitch)*o+i;return Math.min(1.01*a,i*(1/e._horizonShift))}(e,e.pixelsPerMeter)}pointCoordinate(e,t,n,r){const o=e.horizonLineFromTop(!1),a=new i(t,Math.max(o,n));return e.rayIntersectionCoordinate(e.pointRayIntersection(a,r))}createInversionMatrix(e,t){return Fp}createTileMatrix(e,t,n){let r,i,o;const a=n.canonical,s=js(new Float64Array(16));if(this.isReprojectedInTileSpace){const l=$f(a,this);r=1,i=l.x+n.wrap*l.scale,o=l.y,qs(s,s,[r/l.scale,r/l.scale,e.pixelsPerMeter/t])}else r=t/e.zoomScale(a.z),i=(a.x+Math.pow(2,a.z)*n.wrap)*r,o=a.y*r;return Gs(s,s,[i,o,0]),qs(s,s,[r/Ya,r/Ya,1]),s}upVector(e,t,n){return[0,0,1]}upVectorScale(e,t,n){return{metersToTile:1,metersToLabelSpace:1}}}class Np extends Up{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(e,t){return{x:ns(e),y:rs(t),z:0}}unproject(e,t){const n=os(e),r=as(t);return new Qa(n,r)}}class jp extends Up{constructor(e){super(e),this.range=[4,7],this.center=e.center||[-96,37.5];const[t,n]=this.parallels=e.parallels||[29.5,45.5],r=Math.sin(c(t));this.n=(r+Math.sin(c(n)))/2,this.c=1+r*(2*this.n-r),this.r0=Math.sqrt(this.c)/this.n}project(e,t){const{n,c:r,r0:i}=this,o=c(e-this.center[0]),a=c(t),s=Math.sqrt(r-2*n*Math.sin(a))/n;return{x:s*Math.sin(o*n),y:s*Math.cos(o*n)-i,z:0}}unproject(e,t){const{n,c:r,r0:i}=this,o=i+t;let a=Math.atan2(e,Math.abs(o))*Math.sign(o);o*n<0&&(a-=Math.PI*Math.sign(e)*Math.sign(o));const s=c(this.center[0])*n;a=y(a,-Math.PI-s,Math.PI-s);const l=u(a/n)+this.center[0],h=Math.asin(m((r-(e*e+o*o)*n*n)/(2*n),-1,1)),f=m(u(h),-85.051129,ls);return new Qa(l,f)}}const Vp=1.340264,Gp=-.081106,qp=893e-6,Wp=.003796,Hp=Math.sqrt(3)/2;class $p extends Up{project(e,t){t=t/180*Math.PI,e=e/180*Math.PI;const n=Math.asin(Hp*Math.sin(t)),r=n*n,i=r*r*r;return{x:.5*(e*Math.cos(n)/(Hp*(Vp+3*Gp*r+i*(7*qp+9*Wp*r)))/Math.PI+.5),y:1-.5*(n*(Vp+Gp*r+i*(qp+Wp*r))/Math.PI+1),z:0}}unproject(e,t){e=(2*e-.5)*Math.PI;let n=t=(2*(1-t)-1)*Math.PI,r=n*n,i=r*r*r;for(let e,o,a,s=0;s<12&&(o=n*(Vp+Gp*r+i*(qp+Wp*r))-t,a=Vp+3*Gp*r+i*(7*qp+9*Wp*r),e=o/a,n=m(n-e,-Math.PI/3,Math.PI/3),r=n*n,i=r*r*r,!(Math.abs(e)<1e-12));++s);const o=Hp*e*(Vp+3*Gp*r+i*(7*qp+9*Wp*r))/Math.cos(n),a=Math.asin(Math.sin(n)/Hp),s=m(180*o/Math.PI,-180,180),l=m(180*a/Math.PI,-85.051129,ls);return new Qa(s,l)}}class Xp extends Up{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0}project(e,t){return{x:.5+e/360,y:.5-t/360,z:0}}unproject(e,t){const n=360*(e-.5),r=m(360*(.5-t),-85.051129,ls);return new Qa(n,r)}}const Zp=Math.PI/2;function Yp(e){return Math.tan((Zp+e)/2)}class Kp extends Up{constructor(e){super(e),this.center=e.center||[0,30];const[t,n]=this.parallels=e.parallels||[30,30],r=c(t),i=c(n),o=Math.cos(r);this.n=r===i?Math.sin(r):Math.log(o/Math.cos(i))/Math.log(Yp(i)/Yp(r)),this.f=o*Math.pow(Yp(r),this.n)/this.n}project(e,t){t=c(t),e=c(e-this.center[0]);const n=1e-6,{n:r,f:i}=this;i>0?t<-Zp+n&&(t=-Zp+n):t>Zp-n&&(t=Zp-n);const o=i/Math.pow(Yp(t),r),a=o*Math.sin(r*e),s=i-o*Math.cos(r*e);return{x:.5*(a/Math.PI+.5),y:1-.5*(s/Math.PI+.5),z:0}}unproject(e,t){e=(2*e-.5)*Math.PI,t=(2*(1-t)-.5)*Math.PI;const{n,f:r}=this,i=r-t,o=Math.sign(i),a=Math.sign(n)*Math.sqrt(e*e+i*i);let s=Math.atan2(e,Math.abs(i))*o;i*n<0&&(s-=Math.PI*Math.sign(e)*o);const l=m(u(s/n)+this.center[0],-180,180),c=m(u(2*Math.atan(Math.pow(r/a,1/n))-Zp),-85.051129,ls);return new Qa(l,c)}}const Jp=c(ls);class Qp extends Up{project(e,t){const n=(t=c(t))*t,r=n*n;return{x:.5*((e=c(e))*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791))/Math.PI+.5),y:1-.5*(t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))/Math.PI+1),z:0}}unproject(e,t){e=(2*e-.5)*Math.PI;let n=t=(2*(1-t)-1)*Math.PI,r=25,i=0,o=n*n;do{o=n*n;const e=o*o;i=(n*(1.007226+o*(.015085+e*(.028874*o-.044475-.005916*e)))-t)/(1.007226+o*(.045255+e*(.259866*o-.311325-.005916*11*e))),n=m(n-i,-Jp,Jp)}while(Math.abs(i)>1e-6&&--r>0);o=n*n;const a=m(u(e/(.8707+o*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979))),-180,180),s=u(n);return new Qa(a,s)}}const ed=c(ls);class td extends Up{project(e,t){t=c(t),e=c(e);const n=Math.cos(t),r=2/Math.PI,i=Math.acos(n*Math.cos(e/2)),o=Math.sin(i)/i,a=.5*(e*r+2*n*Math.sin(e/2)/o)||0,s=.5*(t+Math.sin(t)/o)||0;return{x:.5*(a/Math.PI+.5),y:1-.5*(s/Math.PI+1),z:0}}unproject(e,t){let n=e=(2*e-.5)*Math.PI,r=t=(2*(1-t)-1)*Math.PI,i=25;const o=1e-6;let a=0,s=0;do{const i=Math.cos(r),o=Math.sin(r),l=2*o*i,c=o*o,u=i*i,h=Math.cos(n/2),f=Math.sin(n/2),p=2*h*f,d=f*f,g=1-u*h*h,y=g?1/g:0,v=g?Math.acos(i*h)*Math.sqrt(1/g):0,b=.5*(2*v*i*f+2*n/Math.PI)-e,_=.5*(v*o+r)-t,x=.5*y*(u*d+v*i*h*c)+1/Math.PI,A=y*(p*l/4-v*o*f),w=.125*y*(l*f-v*o*u*p),C=.5*y*(c*h+v*d*i)+.5,E=A*w-C*x;a=(_*A-b*C)/E,s=(b*w-_*x)/E,n=m(n-a,-Math.PI,Math.PI),r=m(r-s,-ed,ed)}while((Math.abs(a)>o||Math.abs(s)>o)&&--i>0);return new Qa(u(n),u(r))}}class nd extends Up{constructor(e){super(e),this.center=e.center||[0,0],this.parallels=e.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(c(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(e,t){const{scale:n,cosPhi:r}=this;return{x:c(e)*r*n+.5,y:-Math.sin(c(t))/r*n+.5,z:0}}unproject(e,t){const{scale:n,cosPhi:r}=this,i=-(t-.5)/n,o=m(u((e-.5)/n)/r,-180,180),a=Math.asin(m(i*r,-1,1)),s=m(u(a),-85.051129,ls);return new Qa(o,s)}}e.ARRAY_TYPE=Us,e.AUTH_ERR_MSG=ee,e.Aabb=bl,e.Actor=class{constructor(e,t,n){this.target=e,this.parent=t,this.mapId=n,this.callbacks={},this.cancelCallbacks={},S(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=z()?e:a,this.scheduler=new yf}send(e,t,n,r,i=!1,o){const a=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(n.metadata=o,this.callbacks[a]=n);const s=V(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:e,hasCallback:!!n,targetMapId:r,mustQueue:i,sourceMapId:this.mapId,data:ci(t,s)},s),{cancel:()=>{n&&delete this.callbacks[a],this.target.postMessage({id:a,type:"<cancel>",targetMapId:r,sourceMapId:this.mapId})}}}receive(e){const t=e.data,n=t.id;if(n&&(!t.targetMapId||this.mapId===t.targetMapId))if("<cancel>"===t.type){const e=this.cancelCallbacks[n];delete this.cancelCallbacks[n],e&&e.cancel()}else if(t.mustQueue||z()){const e=this.callbacks[n];this.cancelCallbacks[n]=this.scheduler.add((()=>this.processTask(n,t)),e&&e.metadata||{type:"message"})}else this.processTask(n,t)}processTask(e,t){if("<response>"===t.type){const n=this.callbacks[e];delete this.callbacks[e],n&&(t.error?n(ui(t.error)):n(null,ui(t.data)))}else{const n=V(this.globalScope)?void 0:[],r=t.hasCallback?(t,r)=>{delete this.cancelCallbacks[e],this.target.postMessage({id:e,type:"<response>",sourceMapId:this.mapId,error:t?ci(t):null,data:ci(r,n)},n)}:e=>{},i=ui(t.data);if(this.parent[t.type])this.parent[t.type](t.sourceMapId,i,r);else if(this.parent.getWorkerSource){const e=t.type.split(".");this.parent.getWorkerSource(t.sourceMapId,e[0],i.source)[e[1]](i,r)}else r(new Error(`Could not find function ${t.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},e.CanonicalTileID=Gf,e.Color=ut,e.ColorMode=Ap,e.CullFaceMode=Ep,e.DEMData=yp,e.DataConstantProperty=mo,e.DedupedRequest=Lp,e.DepthMode=bp,e.EXTENT=Ya,e.Elevation=class{isDataAvailableAtPoint(e){const t=this._source();if(!t||e.y<0||e.y>1)return!1;const n=t.getSource().maxzoom,r=1<<n,i=Math.floor(e.x),o=Math.floor((e.x-i)*r),a=Math.floor(e.y*r),s=this.findDEMTileFor(new Wf(n,i,n,o,a));return!(!s||!s.dem)}getAtPointOrZero(e,t=0){return this.getAtPoint(e,t)||0}getAtPoint(e,t,n=!0){null==t&&(t=null);const r=this._source();if(!r)return t;if(e.y<0||e.y>1)return t;const i=r.getSource().maxzoom,o=1<<i,a=Math.floor(e.x),s=e.x-a,l=new Wf(i,a,i,Math.floor(s*o),Math.floor(e.y*o)),c=this.findDEMTileFor(l);if(!c||!c.dem)return t;const u=c.dem,h=1<<c.tileID.canonical.z,f=(s*h-c.tileID.canonical.x)*u.dim,p=(e.y*h-c.tileID.canonical.y)*u.dim,d=Math.floor(f),m=Math.floor(p);return(n?this.exaggeration():1)*nn(nn(u.get(d,m),u.get(d,m+1),p-m),nn(u.get(d+1,m),u.get(d+1,m+1),p-m),f-d)}getAtTileOffset(e,t,n){const r=1<<e.canonical.z;return this.getAtPointOrZero(new cs(e.wrap+(e.canonical.x+t/Ya)/r,(e.canonical.y+n/Ya)/r))}getAtTileOffsetFunc(e,t,n,r){return i=>{const o=this.getAtTileOffset(e,i.x,i.y),a=r.upVector(e.canonical,i.x,i.y);return rl(a,a,o*r.upVectorScale(e.canonical,t,n).metersToTile),a}}getForTilePoints(e,t,n,r){const i=kp.create(this,e,r);return!!i&&(t.forEach((e=>{e[2]=this.exaggeration()*i.getElevationAt(e[0],e[1],n)})),!0)}getMinMaxForTile(e){const t=this.findDEMTileFor(e);if(!t||!t.dem)return null;const n=t.dem.tree,r=t.tileID,i=1<<e.canonical.z-r.canonical.z;let o=e.canonical.x/i-r.canonical.x,a=e.canonical.y/i-r.canonical.y,s=0;for(let t=0;t<e.canonical.z-r.canonical.z&&!n.leaves[s];t++){o*=2,a*=2;const e=2*Math.floor(a)+Math.floor(o);s=n.childOffsets[s]+e,o%=1,a%=1}return{min:this.exaggeration()*n.minimums[s],max:this.exaggeration()*n.maximums[s]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(e,t,n){throw new Error("Pure virtual method called.")}pointCoordinate(e){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(e){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},e.ErrorEvent=Fe,e.EvaluationParameters=oo,e.Event=Re,e.Evented=Ue,e.FillExtrusionBucket=Nc,e.Frustum=vl,e.GLOBE_RADIUS=wf,e.GlobeSharedBuffers=class{constructor(e){this._createGrid(e),this._createPoles(e),this._createAtmosphere(e)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const e of this._poleSegments)e.destroy();this._gridSegments.destroy(),this.atmosphereVertexBuffer.destroy(),this.atmosphereIndexBuffer.destroy(),this.atmosphereSegments.destroy(),this._wireframeIndexBuffer&&(this._wireframeIndexBuffer.destroy(),this._wireframeSegments.destroy())}_createGrid(e){const t=new To,n=new jo,r=65;for(let e=0;e<r;e++)for(let n=0;n<r;n++)t.emplaceBack(n,e);for(let e=0;e<64;e++)for(let t=0;t<64;t++){const i=e*r+t;n.emplaceBack(i+1,i,i+r),n.emplaceBack(i+r,i+r+1,i+1)}this._gridBuffer=e.createVertexBuffer(t,Af.members),this._gridIndexBuffer=e.createIndexBuffer(n,!0),this._gridSegments=Za.simpleSegment(0,0,4225,8192)}_createPoles(e){const t=new jo;for(let e=0;e<=64;e++)t.emplaceBack(0,e+1,e+2);this._poleIndexBuffer=e.createIndexBuffer(t,!0);const n=new Wo,r=new Wo;this._poleSegments=[];for(let e=0,t=0;e<5;e++){const i=1<<e,o=512*i/Math.PI/2,a=360/i;n.emplaceBack(0,-o,0,0,0,.5,0),r.emplaceBack(0,-o,0,0,0,.5,1);for(let e=0;e<=64;e++){const t=e/64,i=nn(0,a,t),[s,l,c]=If(Nf,jf,i,o);n.emplaceBack(s,l,c,0,0,t,0),r.emplaceBack(s,l,c,0,0,t,1)}this._poleSegments.push(Za.simpleSegment(t,0,66,64)),t+=66}this._poleNorthVertexBuffer=e.createVertexBuffer(n,_f,!1),this._poleSouthVertexBuffer=e.createVertexBuffer(r,_f,!1)}_createAtmosphere(e){const t=new Ho;t.emplaceBack(-1,1,1,0,0),t.emplaceBack(1,1,1,1,0),t.emplaceBack(1,-1,1,1,1),t.emplaceBack(-1,-1,1,0,1);const n=new jo;n.emplaceBack(0,1,2),n.emplaceBack(2,3,0),this.atmosphereVertexBuffer=e.createVertexBuffer(t,bf.members),this.atmosphereIndexBuffer=e.createIndexBuffer(n),this.atmosphereSegments=Za.simpleSegment(0,0,4,2)}getGridBuffers(){return[this._gridBuffer,this._gridIndexBuffer,this._gridSegments]}getPoleBuffers(e){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[e]]}getWirefameBuffers(e){if(!this._wireframeSegments){const t=new Xo,n=64,r=n+1;for(let e=0;e<n;e++)for(let i=0;i<n;i++){const n=e*r+i;t.emplaceBack(n,n+1),t.emplaceBack(n,n+r),t.emplaceBack(n,n+r+1)}this._wireframeIndexBuffer=e.createIndexBuffer(t),this._wireframeSegments=Za.simpleSegment(0,0,n*n,t.length)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments]}},e.GlyphManager=wh,e.ImagePosition=Hu,e.LineAtlas=pf,e.LngLat=Qa,e.LngLatBounds=Ka,e.LocalGlyphMode=Ah,e.MAX_MERCATOR_LATITUDE=ls,e.MercatorCoordinate=cs,e.ONE_EM=uu,e.OverscaledTileID=Wf,e.Properties=_o,e.RGBAImage=Ml,e.Ray=class{constructor(e,t){this.pos=e,this.dir=t}intersectsPlane(e,t,n){const r=al(t,this.dir);if(Math.abs(r)<1e-6)return!1;const i=((e[0]-this.pos[0])*t[0]+(e[1]-this.pos[1])*t[1]+(e[2]-this.pos[2])*t[2])/r;return n[0]=this.pos[0]+this.dir[0]*i,n[1]=this.pos[1]+this.dir[1]*i,n[2]=this.pos[2]+this.dir[2]*i,!0}closestPointOnSphere(e,t,n){if(function(e,t){var n=e[0],r=e[1],i=e[2],o=t[0],a=t[1],s=t[2];return Math.abs(n-o)<=Fs*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=Fs*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-s)<=Fs*Math.max(1,Math.abs(i),Math.abs(s))}(this.pos,e)||0===t)return n[0]=n[1]=n[2]=0,!1;const[r,i,o]=this.dir,a=this.pos[0]-e[0],s=this.pos[1]-e[1],l=this.pos[2]-e[2],c=r*r+i*i+o*o,u=2*(a*r+s*i+l*o),h=u*u-4*c*(a*a+s*s+l*l-t*t);if(h<0){const e=Math.max(-u/2,0),c=a+r*e,h=s+i*e,f=l+o*e,p=Math.hypot(c,h,f);return n[0]=c*t/p,n[1]=h*t/p,n[2]=f*t/p,!1}{const e=(-u-Math.sqrt(h))/(2*c);if(e<0){const e=Math.hypot(a,s,l);return n[0]=a*t/e,n[1]=s*t/e,n[2]=l*t/e,!1}return n[0]=a+r*e,n[1]=s+i*e,n[2]=l+o*e,!0}}},e.RequestManager=class{constructor(e,t,n){this._transformRequestFn=e,this._customAccessToken=t,this._silenceAuthErrors=!!n,this._createSkuToken()}_createSkuToken(){const e=function(){let e="";for(let t=0;t<10;t++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Q,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}normalizeStyleURL(e,t){if(!te(e))return e;const n=ie(e);return n.path=`/styles/v1${n.path}`,this._makeAPIURL(n,this._customAccessToken||t)}normalizeGlyphsURL(e,t){if(!te(e))return e;const n=ie(e);return n.path=`/fonts/v1${n.path}`,this._makeAPIURL(n,this._customAccessToken||t)}normalizeSourceURL(e,t){if(!te(e))return e;const n=ie(e);return n.path=`/v4/${n.authority}.json`,n.params.push("secure"),this._makeAPIURL(n,this._customAccessToken||t)}normalizeSpriteURL(e,t,n,r){const i=ie(e);return te(e)?(i.path=`/styles/v1${i.path}/sprite${t}${n}`,this._makeAPIURL(i,this._customAccessToken||r)):(i.path+=`${t}${n}`,oe(i))}normalizeTileURL(e,t,n){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!te(e))return e;const r=ie(e);r.path=r.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${t||n&&"raster"!==r.authority&&512===n?"@2x":""}${$.supported?".webp":"$1"}`),"raster"===r.authority?r.path=`/${H.RASTER_URL_PREFIX}${r.path}`:(r.path=r.path.replace(/^.+\/v4\//,"/"),r.path=`/${H.TILE_URL_VERSION}${r.path}`);const i=this._customAccessToken||function(e){for(const t of e){const e=t.match(/^access_token=(.*)$/);if(e)return e[1]}return null}(r.params)||H.ACCESS_TOKEN;return H.REQUIRE_ACCESS_TOKEN&&i&&this._skuToken&&r.params.push(`sku=${this._skuToken}`),this._makeAPIURL(r,i)}canonicalizeTileURL(e,t){const n=ie(e);if(!n.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!n.path.match(/\.[\w]+$/))return e;let r="mapbox://";n.path.match(/^\/raster\/v1\//)?r+=`raster/${n.path.replace(`/${H.RASTER_URL_PREFIX}/`,"")}`:r+=`tiles/${n.path.replace(`/${H.TILE_URL_VERSION}/`,"")}`;let i=n.params;return t&&(i=i.filter((e=>!e.match(/^access_token=/)))),i.length&&(r+=`?${i.join("&")}`),r}canonicalizeTileset(e,t){const n=!!t&&te(t),r=[];for(const t of e.tiles||[])ne(t)?r.push(this.canonicalizeTileURL(t,n)):r.push(t);return r}_makeAPIURL(e,t){const n="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",r=ie(H.API_URL);if(e.protocol=r.protocol,e.authority=r.authority,"http"===e.protocol){const t=e.params.indexOf("secure");t>=0&&e.params.splice(t,1)}if("/"!==r.path&&(e.path=`${r.path}${e.path}`),!H.REQUIRE_ACCESS_TOKEN)return oe(e);if(t=t||H.ACCESS_TOKEN,!this._silenceAuthErrors){if(!t)throw new Error(`An API access token is required to use Mapbox GL. ${n}`);if("s"===t[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${n}`)}return e.params=e.params.filter((e=>-1===e.indexOf("access_token"))),e.params.push(`access_token=${t||""}`),oe(e)}},e.ResourceType=we,e.SegmentVector=Za,e.SourceCache=Sp,e.StencilMode=xp,e.StructArrayLayout1ui2=Zo,e.StructArrayLayout2f1f2i16=Uo,e.StructArrayLayout2i4=To,e.StructArrayLayout2ui4=Xo,e.StructArrayLayout3f12=Po,e.StructArrayLayout3ui6=jo,e.StructArrayLayout4i8=ko,e.Texture=ff,e.Tile=ap,e.Transitionable=lo,e.Uniform1f=Sa,e.Uniform1i=class extends Ea{constructor(e,t){super(e,t),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))}},e.Uniform2f=class extends Ea{constructor(e,t){super(e,t),this.current=[0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))}},e.Uniform3f=class extends Ea{constructor(e,t){super(e,t),this.current=[0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))}},e.Uniform4f=Ta,e.UniformColor=Ba,e.UniformMatrix2f=class extends Ea{constructor(e,t){super(e,t),this.current=Pa}set(e){for(let t=0;t<4;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix2fv(this.location,!1,e);break}}},e.UniformMatrix3f=class extends Ea{constructor(e,t){super(e,t),this.current=Ma}set(e){for(let t=0;t<9;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix3fv(this.location,!1,e);break}}},e.UniformMatrix4f=class extends Ea{constructor(e,t){super(e,t),this.current=ka}set(e){if(e[12]!==this.current[12]||e[0]!==this.current[0])return this.current=e,void this.gl.uniformMatrix4fv(this.location,!1,e);for(let t=1;t<16;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix4fv(this.location,!1,e);break}}},e.UnwrappedTileID=qf,e.ValidationError=gr,e.VectorTileWorkerSource=class extends Ue{constructor(e,t,n,r,i){super(),this.actor=e,this.layerIndex=t,this.availableImages=n,this.loadVectorData=i||Rp,this.loading={},this.loaded={},this.deduped=new Lp(e.scheduler),this.isSpriteLoaded=r,this.scheduler=e.scheduler}loadTile(e,t){const n=e.uid,r=e&&e.request,i=r&&r.collectResourceTiming,o=this.loading[n]=new Dp(e);o.abort=this.loadVectorData(e,((a,s)=>{const l=!this.loading[n];if(delete this.loading[n],l||a||!s)return o.status="done",l||(this.loaded[n]=o),t(a);const c=s.rawData,u={};s.expires&&(u.expires=s.expires),s.cacheControl&&(u.cacheControl=s.cacheControl),o.vectorTile=s.vectorTile||new Oc.VectorTile(new Au(c));const h=()=>{o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,((e,n)=>{if(e||!n)return t(e);const o={};if(i){const e=gf(r);e.length>0&&(o.resourceTiming=JSON.parse(JSON.stringify(e)))}t(null,_({rawTileData:c.slice(0)},n,u,o))}))};this.isSpriteLoaded?h():this.once("isSpriteLoaded",(()=>{this.scheduler?this.scheduler.add(h,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom}):h()})),this.loaded=this.loaded||{},this.loaded[n]=o}))}reloadTile(e,t){const n=this.loaded,r=e.uid,i=this;if(n&&n[r]){const o=n[r];o.showCollisionBoxes=e.showCollisionBoxes,o.enableTerrain=!!e.enableTerrain,o.projection=e.projection,o.tileTransform=$f(e.tileID.canonical,e.projection);const a=(e,n)=>{const r=o.reloadCallback;r&&(delete o.reloadCallback,o.parse(o.vectorTile,i.layerIndex,this.availableImages,i.actor,r)),t(e,n)};"parsing"===o.status?o.reloadCallback=a:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,a):a())}}abortTile(e,t){const n=e.uid,r=this.loading[n];r&&(r.abort&&r.abort(),delete this.loading[n]),t()}removeTile(e,t){const n=this.loaded,r=e.uid;n&&n[r]&&delete n[r],t()}},e.WritingMode=Xu,e.ZoomHistory=hi,e.add=Js,e.addDynamicAttributes=Yh,e.adjoint=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8];return e[0]=a*u-s*c,e[1]=i*c-r*u,e[2]=r*s-i*a,e[3]=s*l-o*u,e[4]=n*u-i*l,e[5]=i*o-n*s,e[6]=o*c-a*l,e[7]=r*l-n*c,e[8]=n*a-r*o,e},e.asyncAll=v,e.bezier=p,e.bindAll=S,e.boundsAttributes=ip,e.bufferConvexPolygon=function(e,t){const n=[];for(let r=0;r<e.length;r++){const i=y(r-1,-1,e.length-1),o=y(r+1,-1,e.length-1),a=e[r],s=e[o],l=e[i].sub(a).unit(),c=s.sub(a).unit(),u=c.angleWithSep(l.x,l.y),h=l.add(c).unit().mult(-1*t/Math.sin(u/2));n.push(a.add(h))}return n},e.cacheEntryPossiblyAdded=function(e){Ae++,Ae>be&&(e.getActor().send("enforceCacheSizeLimit",ve),Ae=0)},e.calculateGlobeLabelMatrix=function(e,t){const{lng:n,lat:r}=e._center,i=Rf(0,0,e.worldSize/e._projectionScaler,n,r);return Vs(i,i,function(e){const t=js(new Float64Array(16)),n=1/zf(e);return Gs(t,t,e.min),qs(t,t,[n,n,n]),t}(kf(t)))},e.calculateGlobeMatrix=Ff,e.calculateGlobeMercatorMatrix=function(e){const t=e.worldSize,n=e.point,r=is(1,e.center.lat)*t,i=e.pixelsPerMeter,o=t/(r/e.pixelsPerMeter),a=js(new Float64Array(16));return Gs(a,a,[n.x,n.y,0]),qs(a,a,[o,o,i]),Float32Array.from(a)},e.circumferenceAtLatitude=ts,e.clamp=m,e.clearTileCache=function(e){const t=a.caches.delete(me);e&&t.catch(e).then((()=>e()))},e.clipLine=vh,e.clone=function(e){var t=new Us(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.clone$1=M,e.collisionCircleLayout=cu,e.config=H,e.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},e.create=function(){var e=new Us(16);return Us!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.create$1=Ns,e.createExpression=ur,e.createLayout=Eo,e.createStyleLayer=function(e){return"custom"===e.type?new lf(e):new hf[e.type](e)},e.cross=sl,e.degToRad=c,e.div=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},e.dot=al,e.earthRadius=Ja,e.ease=d,e.easeCubicInOut=f,e.emitValidationErrors=ni,e.endsWith=T,e.enforceCacheSizeLimit=function(e){_e(),ge&&ge.then((t=>{t.keys().then((n=>{for(let r=0;r<n.length-e;r++)t.delete(n[r])}))}))},e.evaluateSizeForFeature=pu,e.evaluateSizeForZoom=du,e.evaluateVariableOffset=Rh,e.evented=to,e.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},e.exactEquals$1=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},e.exported=q,e.exported$1=$,e.extend=_,e.extend$1=je,e.filterObject=k,e.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},e.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,l=i+i,c=n*a,u=r*a,h=r*s,f=i*a,p=i*s,d=i*l,m=o*a,g=o*s,y=o*l;return e[0]=1-h-d,e[1]=u+y,e[2]=f-g,e[3]=0,e[4]=u-y,e[5]=1-c-d,e[6]=p+m,e[7]=0,e[8]=f+g,e[9]=p-m,e[10]=1-c-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.furthestTileCorner=function(e){const t=Math.round((e+45+360)%360/90)%4;return h[t]},e.getAABBPointSquareDist=function(e,t,n){let r=0;for(let i=0;i<2;++i){const o=n?n[i]:0;e[i]>o&&(r+=(e[i]-o)*(e[i]-o)),t[i]<o&&(r+=(o-t[i])*(o-t[i]))}return r},e.getAnchorAlignment=ah,e.getAnchorJustification=Uh,e.getBounds=function(e){let t=1/0,n=1/0,r=-1/0,o=-1/0;for(const i of e)t=Math.min(t,i.x),n=Math.min(n,i.y),r=Math.max(r,i.x),o=Math.max(o,i.y);return{min:new i(t,n),max:new i(r,o)}},e.getColumn=function(e,t){return[e[4*t],e[4*t+1],e[4*t+2],e[4*t+3]]},e.getGridMatrix=function(e,t){const[n,r]=t,i=.015625;return[0,(r[1]-n[1])*i,1<<e.z,(r[0]-n[0])*i,0,e.y,n[0],n[1],i]},e.getImage=De,e.getJSON=function(e,t){return Se(_(e,{type:"json"}),t)},e.getMapSessionAPI=pe,e.getPerformanceMeasurement=gf,e.getProjection=function(e){const t=e.parallels,n=!!t&&Math.abs(t[0]+t[1])<.01;switch(e.name){case"mercator":return new Np(e);case"equirectangular":return new Xp(e);case"naturalEarth":return new Qp(e);case"equalEarth":return new $p(e);case"winkelTripel":return new td(e);case"albers":return n?new nd(e):new jp(e);case"lambertConformalConic":return n?new nd(e):new Kp(e)}throw new Error(`Invalid projection name: ${e.name}`)},e.getRTLTextPluginStatus=no,e.getReferrer=Ee,e.getTilePoint=function(e,{x:t,y:n},r=0){return new i(((t-r)*e.scale-e.x)*Ya,(n*e.scale-e.y)*Ya)},e.getTileVec3=function(e,t,n=0){return Ks(((t.x-n)*e.scale-e.x)*Ya,(t.y*e.scale-e.y)*Ya,ss(t.z,t.y))},e.getVideo=function(e,t){const n=a.document.createElement("video");n.muted=!0,n.onloadstart=function(){t(null,n)};for(let t=0;t<e.length;t++){const r=a.document.createElement("source");Me(e[t])||(n.crossOrigin="Anonymous"),r.src=e[t],n.appendChild(r)}return{cancel:()=>{}}},e.globeECEFOrigin=function(e,t){const n=[0,0,0];return ll(n,n,Lf(kf(t.canonical))),ll(n,n,e),n},e.globePixelsToTileUnits=function(e,t){return Ya/(512*Math.pow(2,e))*zf(kf(t))},e.globePoleMatrixForTile=function(e,t,n){const r=js(new Float64Array(16)),i=1<<e,o=360*(t/i-.5),a=n.point,s=n.worldSize/(n.tileSize*i);return Gs(r,r,[a.x,a.y,-n.worldSize/Math.PI/2]),qs(r,r,[s,s,s]),Ws(r,r,c(-n._center.lat)),Hs(r,r,c(-n._center.lng+o)),Float32Array.from(r)},e.globeTileLatLngCorners=Pf,e.globeToMercatorTransition=function(e){return g(5,6,e)},e.identity=js,e.identity$1=gl,e.invert=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],h=t[9],f=t[10],p=t[11],d=t[12],m=t[13],g=t[14],y=t[15],v=n*s-r*a,b=n*l-i*a,_=n*c-o*a,x=r*l-i*s,A=r*c-o*s,w=i*c-o*l,C=u*m-h*d,E=u*g-f*d,S=u*y-p*d,T=h*g-f*m,B=h*y-p*m,k=f*y-p*g,M=v*k-b*B+_*T+x*S-A*E+w*C;return M?(e[0]=(s*k-l*B+c*T)*(M=1/M),e[1]=(i*B-r*k-o*T)*M,e[2]=(m*w-g*A+y*x)*M,e[3]=(f*A-h*w-p*x)*M,e[4]=(l*S-a*k-c*E)*M,e[5]=(n*k-i*S+o*E)*M,e[6]=(g*_-d*w-y*b)*M,e[7]=(u*w-f*_+p*b)*M,e[8]=(a*B-s*S+c*C)*M,e[9]=(r*S-n*B-o*C)*M,e[10]=(d*A-m*_+y*v)*M,e[11]=(h*_-u*A-p*v)*M,e[12]=(s*E-a*T-l*C)*M,e[13]=(n*T-r*E+i*C)*M,e[14]=(m*b-d*x-g*v)*M,e[15]=(u*x-h*b+f*v)*M,e):null},e.isMapAuthenticated=function(e){return de.has(e)},e.isMapboxURL=te,e.isSafariWithAntialiasingBug=function(e){const t=e.navigator?e.navigator.userAgent:null;return!!V(e)&&t&&(t.match("Version/15.4")||t.match("Version/15.5")||t.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},e.latFromMercatorY=as,e.len=pl,e.length=Ys,e.length$1=function(e){return Math.hypot(e[0],e[1],e[2],e[3])},e.loadVectorTile=Rp,e.makeRequest=Se,e.mercatorXfromLng=ns,e.mercatorYfromLat=rs,e.mercatorZfromAltitude=is,e.mul=$s,e.mul$1=fl,e.multiply=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],f=n[0],p=n[1],d=n[2],m=n[3],g=n[4],y=n[5],v=n[6],b=n[7],_=n[8];return e[0]=f*r+p*a+d*c,e[1]=f*i+p*s+d*u,e[2]=f*o+p*l+d*h,e[3]=m*r+g*a+y*c,e[4]=m*i+g*s+y*u,e[5]=m*o+g*l+y*h,e[6]=v*r+b*a+_*c,e[7]=v*i+b*s+_*u,e[8]=v*o+b*l+_*h,e},e.multiply$1=Vs,e.multiply$2=el,e.nextPowerOfTwo=C,e.normalize=ol,e.normalize$1=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),e[0]=n*a,e[1]=r*a,e[2]=i*a,e[3]=o*a,e},e.number=nn,e.ortho=function(e,t,n,r,i,o,a){var s=1/(t-n),l=1/(r-i),c=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*l,e[14]=(a+o)*c,e[15]=1,e},e.pbf=Au,e.perspective=function(e,t,n,r,i){var o,a=1/Math.tan(t/2);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(e[10]=(i+r)*(o=1/(r-i)),e[14]=2*i*r*o):(e[10]=-1,e[14]=-2*r),e},e.pick=function(e,t){const n={};for(let r=0;r<t.length;r++){const i=t[r];i in e&&(n[i]=e[i])}return n},e.plugin=io,e.pointGeometry=i,e.polygonIntersectsBox=Ms,e.polygonIntersectsPolygon=_s,e.polygonizeBounds=function(e,t,n=0,r=!0){const o=new i(n,n),a=e.sub(o),s=t.add(o),l=[a,new i(s.x,a.y),s,new i(a.x,s.y)];return r&&l.push(a),l},e.posAttributes=Af,e.postMapLoadEvent=he,e.postTurnstileEvent=ce,e.potpack=Wu,e.prevPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},e.radToDeg=u,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.registerForPluginStateChange=function(e){return e({pluginStatus:Ki,pluginURL:Ji}),to.on("pluginStateChange",e),e},e.removeAuthState=function(e){de.delete(e)},e.renderColorRamp=Il,e.rotateX=Ws,e.rotateX$1=yl,e.rotateY=Hs,e.rotateZ=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],c=t[4],u=t[5],h=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+c*r,e[1]=a*i+u*r,e[2]=s*i+h*r,e[3]=l*i+f*r,e[4]=c*i-o*r,e[5]=u*i-a*r,e[6]=h*i-s*r,e[7]=f*i-l*r,e},e.rotateZ$1=function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+i*s,e[1]=i*l-r*s,e[2]=o*l+a*s,e[3]=a*l-o*s,e},e.scale=qs,e.scale$1=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},e.scale$2=rl,e.scaleAndAdd=il,e.setCacheLimits=function(e,t){ve=e,be=t},e.setColumn=function(e,t,n){e[4*t+0]=n[0],e[4*t+1]=n[1],e[4*t+2]=n[2],e[4*t+3]=n[3]},e.setRTLTextPlugin=function(e,t,n=!1){if(Ki===$i||Ki===Xi||Ki===Zi)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ji=q.resolveURL(e),Ki=$i,Yi=t,eo(),n||ro()},e.smoothstep=g,e.spec=Ne,e.storeAuthState=function(e,t){t?de.add(e):de.delete(e)},e.sub=hl,e.subtract=Qs,e.symbolSize=mu,e.tileAABB=function(e,t,n,r,i,o,a,s,l){if("globe"===l.name)return Mf(e,t,new Gf(n,r,i));const c=$f({z:n,x:r,y:i},l);return new bl([(o+c.x/c.scale)*t,t*(c.y/c.scale),a],[(o+c.x2/c.scale)*t,t*(c.y2/c.scale),s])},e.tileTransform=$f,e.transformMat3=function(e,t,n){var r=t[0],i=t[1],o=t[2];return e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8],e},e.transformMat4=ll,e.transformMat4$1=dl,e.transformQuat=cl,e.translate=Gs,e.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},e.triggerPluginCompletionEvent=Qi,e.uniqueId=A,e.validateCustomStyleLayer=function(e){const t=[],n=e.id;return void 0===n&&t.push({message:`layers.${n}: missing required property "id"`}),void 0===e.render&&t.push({message:`layers.${n}: missing required method "render"`}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:`layers.${n}: property "renderingMode" must be either "2d" or "3d"`}),t},e.validateFilter=e=>ti(Rr(e)),e.validateFog=e=>ti(Xr(e)),e.validateLayer=e=>ti(Vr(e)),e.validateLight=e=>ti(Hr(e)),e.validateSource=e=>ti(Wr(e)),e.validateStyle=Jr,e.validateTerrain=e=>ti($r(e)),e.values=b,e.vectorTile=Oc,e.version=t,e.warnOnce=I,e.window=a,e.wrap=y})),r(0,(function(e){function t(e){if("number"==typeof e||"boolean"==typeof e||"string"==typeof e||null==e)return JSON.stringify(e);if(Array.isArray(e)){let n="[";for(const r of e)n+=`${t(r)},`;return`${n}]`}let n="{";for(const r of Object.keys(e).sort())n+=`${r}:${t(e[r])},`;return`${n}}`}function n(n){let r="";for(const i of e.refProperties)r+=`/${t(n[i])}`;return r}class r{constructor(e){this.keyCache={},e&&this.replace(e)}replace(e){this._layerConfigs={},this._layers={},this.update(e,[])}update(t,r){for(const n of t)this._layerConfigs[n.id]=n,(this._layers[n.id]=e.createStyleLayer(n)).compileFilter(),this.keyCache[n.id]&&delete this.keyCache[n.id];for(const e of r)delete this.keyCache[e],delete this._layerConfigs[e],delete this._layers[e];this.familiesBySource={};const i=function(e,t){const r={};for(let i=0;i<e.length;i++){const o=t&&t[e[i].id]||n(e[i]);t&&(t[e[i].id]=o);let a=r[o];a||(a=r[o]=[]),a.push(e[i])}const i=[];for(const e in r)i.push(r[e]);return i}(e.values(this._layerConfigs),this.keyCache);for(const e of i){const t=e.map((e=>this._layers[e.id])),n=t[0];if("none"===n.visibility)continue;const r=n.source||"";let i=this.familiesBySource[r];i||(i=this.familiesBySource[r]={});const o=n.sourceLayer||"_geojsonTileLayer";let a=i[o];a||(a=i[o]=[]),a.push(t)}}}class i{loadTile(t,n){const{uid:r,encoding:i,rawImageData:o,padding:a,buildQuadTree:s}=t,l=e.window.ImageBitmap&&o instanceof e.window.ImageBitmap?this.getImageData(o,a):o;n(null,new e.DEMData(r,l,i,a<1,s))}getImageData(e,t){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);const n=this.offscreenCanvasContext.getImageData(-t,-t,e.width+2*t,e.height+2*t);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),n}}var o=function e(t,n){var r,i=t&&t.type;if("FeatureCollection"===i)for(r=0;r<t.features.length;r++)e(t.features[r],n);else if("GeometryCollection"===i)for(r=0;r<t.geometries.length;r++)e(t.geometries[r],n);else if("Feature"===i)e(t.geometry,n);else if("Polygon"===i)a(t.coordinates,n);else if("MultiPolygon"===i)for(r=0;r<t.coordinates.length;r++)a(t.coordinates[r],n);return t};function a(e,t){if(0!==e.length){s(e[0],t);for(var n=1;n<e.length;n++)s(e[n],!t)}}function s(e,t){for(var n=0,r=0,i=0,o=e.length,a=o-1;i<o;a=i++){var s=(e[i][0]-e[a][0])*(e[a][1]+e[i][1]),l=n+s;r+=Math.abs(n)>=Math.abs(s)?n-l+s:s-l+n,n=l}n+r>=0!=!!t&&e.reverse()}const l=e.vectorTile.VectorTileFeature.prototype.toGeoJSON;class c{constructor(t){this._feature=t,this.extent=e.EXTENT,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))}loadGeometry(){if(1===this._feature.type){const t=[];for(const n of this._feature.geometry)t.push([new e.pointGeometry(n[0],n[1])]);return t}{const t=[];for(const n of this._feature.geometry){const r=[];for(const t of n)r.push(new e.pointGeometry(t[0],t[1]));t.push(r)}return t}}toGeoJSON(e,t,n){return l.call(this,e,t,n)}}class u{constructor(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=t.length,this._features=t}feature(e){return new c(this._features[e])}}var h=e.vectorTile.VectorTileFeature,f=p;function p(e,t){this.options=t||{},this.features=e,this.length=e.length}function d(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}p.prototype.feature=function(e){return new d(this.features[e],this.options.extent)},d.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var n=0;n<t.length;n++){for(var r=t[n],i=[],o=0;o<r.length;o++)i.push(new e.pointGeometry(r[o][0],r[o][1]));this.geometry.push(i)}return this.geometry},d.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<e.length;o++)for(var a=e[o],s=0;s<a.length;s++){var l=a[s];t=Math.min(t,l.x),n=Math.max(n,l.x),r=Math.min(r,l.y),i=Math.max(i,l.y)}return[t,r,n,i]},d.prototype.toGeoJSON=h.prototype.toGeoJSON;var m=y,g=f;function y(t){var n=new e.pbf;return function(e,t){for(var n in e.layers)t.writeMessage(3,v,e.layers[n])}(t,n),n.finish()}function v(e,t){var n;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<e.length;n++)r.feature=e.feature(n),t.writeMessage(2,b,r);var i=r.keys;for(n=0;n<i.length;n++)t.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)t.writeMessage(4,C,o[n])}function b(e,t){var n=e.feature;void 0!==n.id&&t.writeVarintField(1,n.id),t.writeMessage(2,_,e),t.writeVarintField(3,n.type),t.writeMessage(4,w,n)}function _(e,t){var n=e.feature,r=e.keys,i=e.values,o=e.keycache,a=e.valuecache;for(var s in n.properties){var l=n.properties[s],c=o[s];if(null!==l){void 0===c&&(r.push(s),o[s]=c=r.length-1),t.writeVarint(c);var u=typeof l;"string"!==u&&"boolean"!==u&&"number"!==u&&(l=JSON.stringify(l));var h=u+":"+l,f=a[h];void 0===f&&(i.push(l),a[h]=f=i.length-1),t.writeVarint(f)}}}function x(e,t){return(t<<3)+(7&e)}function A(e){return e<<1^e>>31}function w(e,t){for(var n=e.loadGeometry(),r=e.type,i=0,o=0,a=n.length,s=0;s<a;s++){var l=n[s],c=1;1===r&&(c=l.length),t.writeVarint(x(1,c));for(var u=3===r?l.length-1:l.length,h=0;h<u;h++){1===h&&1!==r&&t.writeVarint(x(2,u-1));var f=l[h].x-i,p=l[h].y-o;t.writeVarint(A(f)),t.writeVarint(A(p)),i+=f,o+=p}3===r&&t.writeVarint(x(7,1))}}function C(e,t){var n=typeof e;"string"===n?t.writeStringField(1,e):"boolean"===n?t.writeBooleanField(7,e):"number"===n&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}function E(e,t,n,r,i,o){if(i-r<=n)return;const a=r+i>>1;S(e,t,a,r,i,o%2),E(e,t,n,r,a-1,o+1),E(e,t,n,a+1,i,o+1)}function S(e,t,n,r,i,o){for(;i>r;){if(i-r>600){const a=i-r+1,s=n-r+1,l=Math.log(a),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(a-c)/a)*(s-a/2<0?-1:1);S(e,t,n,Math.max(r,Math.floor(n-s*c/a+u)),Math.min(i,Math.floor(n+(a-s)*c/a+u)),o)}const a=t[2*n+o];let s=r,l=i;for(T(e,t,r,n),t[2*i+o]>a&&T(e,t,r,i);s<l;){for(T(e,t,s,l),s++,l--;t[2*s+o]<a;)s++;for(;t[2*l+o]>a;)l--}t[2*r+o]===a?T(e,t,r,l):(l++,T(e,t,l,i)),l<=n&&(r=l+1),n<=l&&(i=l-1)}}function T(e,t,n,r){B(e,n,r),B(t,2*n,2*r),B(t,2*n+1,2*r+1)}function B(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function k(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}m.fromVectorTileJs=y,m.fromGeojsonVt=function(e,t){t=t||{};var n={};for(var r in e)n[r]=new f(e[r].features,t),n[r].name=r,n[r].version=t.version,n[r].extent=t.extent;return y({layers:n})},m.GeoJSONWrapper=g;const M=e=>e[0],P=e=>e[1];class I{constructor(e,t=M,n=P,r=64,i=Float64Array){this.nodeSize=r,this.points=e;const o=e.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(e.length),s=this.coords=new i(2*e.length);for(let r=0;r<e.length;r++)a[r]=r,s[2*r]=t(e[r]),s[2*r+1]=n(e[r]);E(a,s,r,0,a.length-1,0)}range(e,t,n,r){return function(e,t,n,r,i,o,a){const s=[0,e.length-1,0],l=[];let c,u;for(;s.length;){const h=s.pop(),f=s.pop(),p=s.pop();if(f-p<=a){for(let a=p;a<=f;a++)c=t[2*a],u=t[2*a+1],c>=n&&c<=i&&u>=r&&u<=o&&l.push(e[a]);continue}const d=Math.floor((p+f)/2);c=t[2*d],u=t[2*d+1],c>=n&&c<=i&&u>=r&&u<=o&&l.push(e[d]);const m=(h+1)%2;(0===h?n<=c:r<=u)&&(s.push(p),s.push(d-1),s.push(m)),(0===h?i>=c:o>=u)&&(s.push(d+1),s.push(f),s.push(m))}return l}(this.ids,this.coords,e,t,n,r,this.nodeSize)}within(e,t,n){return function(e,t,n,r,i,o){const a=[0,e.length-1,0],s=[],l=i*i;for(;a.length;){const c=a.pop(),u=a.pop(),h=a.pop();if(u-h<=o){for(let i=h;i<=u;i++)k(t[2*i],t[2*i+1],n,r)<=l&&s.push(e[i]);continue}const f=Math.floor((h+u)/2),p=t[2*f],d=t[2*f+1];k(p,d,n,r)<=l&&s.push(e[f]);const m=(c+1)%2;(0===c?n-i<=p:r-i<=d)&&(a.push(h),a.push(f-1),a.push(m)),(0===c?n+i>=p:r+i>=d)&&(a.push(f+1),a.push(u),a.push(m))}return s}(this.ids,this.coords,e,t,n,this.nodeSize)}}const O={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},D=Math.fround||(z=new Float32Array(1),e=>(z[0]=+e,z[0]));var z;class L{constructor(e){this.options=q(Object.create(O),e),this.trees=new Array(this.options.maxZoom+1)}load(e){const{log:t,minZoom:n,maxZoom:r,nodeSize:i}=this.options;t&&console.time("total time");const o=`prepare ${e.length} points`;t&&console.time(o),this.points=e;let a=[];for(let t=0;t<e.length;t++)e[t].geometry&&a.push(F(e[t],t));this.trees[r+1]=new I(a,W,H,i,Float32Array),t&&console.timeEnd(o);for(let e=r;e>=n;e--){const n=+Date.now();a=this._cluster(a,e),this.trees[e]=new I(a,W,H,i,Float32Array),t&&console.log("z%d: %d clusters in %dms",e,a.length,+Date.now()-n)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let n=((e[0]+180)%360+360)%360-180;const r=Math.max(-90,Math.min(90,e[1]));let i=180===e[2]?180:((e[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,i=180;else if(n>i){const e=this.getClusters([n,r,180,o],t),a=this.getClusters([-180,r,i,o],t);return e.concat(a)}const a=this.trees[this._limitZoom(t)],s=a.range(j(n),V(o),j(i),V(r)),l=[];for(const e of s){const t=a.points[e];l.push(t.numPoints?U(t):this.points[t.index])}return l}getChildren(e){const t=this._getOriginId(e),n=this._getOriginZoom(e),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);const o=i.points[t];if(!o)throw new Error(r);const a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=i.within(o.x,o.y,a),l=[];for(const t of s){const n=i.points[t];n.parentId===e&&l.push(n.numPoints?U(n):this.points[n.index])}if(0===l.length)throw new Error(r);return l}getLeaves(e,t,n){const r=[];return this._appendLeaves(r,e,t=t||10,n=n||0,0),r}getTile(e,t,n){const r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),{extent:o,radius:a}=this.options,s=a/o,l=(n-s)/i,c=(n+1+s)/i,u={features:[]};return this._addTileFeatures(r.range((t-s)/i,l,(t+1+s)/i,c),r.points,t,n,i,u),0===t&&this._addTileFeatures(r.range(1-s/i,l,1,c),r.points,i,n,i,u),t===i-1&&this._addTileFeatures(r.range(0,l,s/i,c),r.points,-1,n,i,u),u.features.length?u:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t}_appendLeaves(e,t,n,r,i){const o=this.getChildren(t);for(const t of o){const o=t.properties;if(o&&o.cluster?i+o.point_count<=r?i+=o.point_count:i=this._appendLeaves(e,o.cluster_id,n,r,i):i<r?i++:e.push(t),e.length===n)break}return i}_addTileFeatures(e,t,n,r,i,o){for(const a of e){const e=t[a],s=e.numPoints;let l,c,u;if(s)l=N(e),c=e.x,u=e.y;else{const t=this.points[e.index];l=t.properties,c=j(t.geometry.coordinates[0]),u=V(t.geometry.coordinates[1])}const h={type:1,geometry:[[Math.round(this.options.extent*(c*i-n)),Math.round(this.options.extent*(u*i-r))]],tags:l};let f;s?f=e.id:this.options.generateId?f=e.index:this.points[e.index].id&&(f=this.points[e.index].id),void 0!==f&&(h.id=f),o.features.push(h)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(+e,this.options.maxZoom+1))}_cluster(e,t){const n=[],{radius:r,extent:i,reduce:o,minPoints:a}=this.options,s=r/(i*Math.pow(2,t));for(let r=0;r<e.length;r++){const i=e[r];if(i.zoom<=t)continue;i.zoom=t;const l=this.trees[t+1],c=l.within(i.x,i.y,s),u=i.numPoints||1;let h=u;for(const e of c){const n=l.points[e];n.zoom>t&&(h+=n.numPoints||1)}if(h>u&&h>=a){let e=i.x*u,a=i.y*u,s=o&&u>1?this._map(i,!0):null;const f=(r<<5)+(t+1)+this.points.length;for(const n of c){const r=l.points[n];if(r.zoom<=t)continue;r.zoom=t;const c=r.numPoints||1;e+=r.x*c,a+=r.y*c,r.parentId=f,o&&(s||(s=this._map(i,!0)),o(s,this._map(r)))}i.parentId=f,n.push(R(e/h,a/h,f,h,s))}else if(n.push(i),h>1)for(const e of c){const r=l.points[e];r.zoom<=t||(r.zoom=t,n.push(r))}}return n}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t){if(e.numPoints)return t?q({},e.properties):e.properties;const n=this.points[e.index].properties,r=this.options.map(n);return t&&r===n?q({},r):r}}function R(e,t,n,r,i){return{x:D(e),y:D(t),zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function F(e,t){const[n,r]=e.geometry.coordinates;return{x:D(j(n)),y:D(V(r)),zoom:1/0,index:t,parentId:-1}}function U(e){return{type:"Feature",id:e.id,properties:N(e),geometry:{type:"Point",coordinates:[(t=e.x,360*(t-.5)),G(e.y)]}};var t}function N(e){const t=e.numPoints,n=t>=1e4?`${Math.round(t/1e3)}k`:t>=1e3?Math.round(t/100)/10+"k":t;return q(q({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:n})}function j(e){return e/360+.5}function V(e){const t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function G(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function q(e,t){for(const n in t)e[n]=t[n];return e}function W(e){return e.x}function H(e){return e.y}function $(e,t,n,r){for(var i,o=r,a=n-t>>1,s=n-t,l=e[t],c=e[t+1],u=e[n],h=e[n+1],f=t+3;f<n;f+=3){var p=X(e[f],e[f+1],l,c,u,h);if(p>o)i=f,o=p;else if(p===o){var d=Math.abs(f-a);d<s&&(i=f,s=d)}}o>r&&(i-t>3&&$(e,t,i,r),e[i+2]=o,n-i>3&&$(e,i,n,r))}function X(e,t,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var l=((e-n)*a+(t-r)*s)/(a*a+s*s);l>1?(n=i,r=o):l>0&&(n+=a*l,r+=s*l)}return(a=e-n)*a+(s=t-r)*s}function Z(e,t,n,r){var i={id:void 0===e?null:e,type:t,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,n=e.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)Y(e,t);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<t.length;r++)Y(e,t[r]);else if("MultiPolygon"===n)for(r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)Y(e,t[r][i])}(i),i}function Y(e,t){for(var n=0;n<t.length;n+=3)e.minX=Math.min(e.minX,t[n]),e.minY=Math.min(e.minY,t[n+1]),e.maxX=Math.max(e.maxX,t[n]),e.maxY=Math.max(e.maxY,t[n+1])}function K(e,t,n,r){if(t.geometry){var i=t.geometry.coordinates,o=t.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],l=t.id;if(n.promoteId?l=t.properties[n.promoteId]:n.generateId&&(l=r||0),"Point"===o)J(i,s);else if("MultiPoint"===o)for(var c=0;c<i.length;c++)J(i[c],s);else if("LineString"===o)Q(i,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(c=0;c<i.length;c++)Q(i[c],s=[],a,!1),e.push(Z(l,"LineString",s,t.properties));return}ee(i,s,a,!1)}else if("Polygon"===o)ee(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(c=0;c<t.geometry.geometries.length;c++)K(e,{id:l,geometry:t.geometry.geometries[c],properties:t.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<i.length;c++){var u=[];ee(i[c],u,a,!0),s.push(u)}}e.push(Z(l,o,s,t.properties))}}function J(e,t){t.push(te(e[0])),t.push(ne(e[1])),t.push(0)}function Q(e,t,n,r){for(var i,o,a=0,s=0;s<e.length;s++){var l=te(e[s][0]),c=ne(e[s][1]);t.push(l),t.push(c),t.push(0),s>0&&(a+=r?(i*c-l*o)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(c-o,2))),i=l,o=c}var u=t.length-3;t[2]=1,$(t,0,u,n),t[u+2]=1,t.size=Math.abs(a),t.start=0,t.end=t.size}function ee(e,t,n,r){for(var i=0;i<e.length;i++){var o=[];Q(e[i],o,n,r),t.push(o)}}function te(e){return e/360+.5}function ne(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function re(e,t,n,r,i,o,a,s){if(r/=t,o>=(n/=t)&&a<r)return e;if(a<n||o>=r)return null;for(var l=[],c=0;c<e.length;c++){var u=e[c],h=u.geometry,f=u.type,p=0===i?u.minX:u.minY,d=0===i?u.maxX:u.maxY;if(p>=n&&d<r)l.push(u);else if(!(d<n||p>=r)){var m=[];if("Point"===f||"MultiPoint"===f)ie(h,m,n,r,i);else if("LineString"===f)oe(h,m,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===f)se(h,m,n,r,i,!1);else if("Polygon"===f)se(h,m,n,r,i,!0);else if("MultiPolygon"===f)for(var g=0;g<h.length;g++){var y=[];se(h[g],y,n,r,i,!0),y.length&&m.push(y)}if(m.length){if(s.lineMetrics&&"LineString"===f){for(g=0;g<m.length;g++)l.push(Z(u.id,f,m[g],u.tags));continue}"LineString"!==f&&"MultiLineString"!==f||(1===m.length?(f="LineString",m=m[0]):f="MultiLineString"),"Point"!==f&&"MultiPoint"!==f||(f=3===m.length?"Point":"MultiPoint"),l.push(Z(u.id,f,m,u.tags))}}}return l.length?l:null}function ie(e,t,n,r,i){for(var o=0;o<e.length;o+=3){var a=e[o+i];a>=n&&a<=r&&(t.push(e[o]),t.push(e[o+1]),t.push(e[o+2]))}}function oe(e,t,n,r,i,o,a){for(var s,l,c=ae(e),u=0===i?ce:ue,h=e.start,f=0;f<e.length-3;f+=3){var p=e[f],d=e[f+1],m=e[f+2],g=e[f+3],y=e[f+4],v=0===i?p:d,b=0===i?g:y,_=!1;a&&(s=Math.sqrt(Math.pow(p-g,2)+Math.pow(d-y,2))),v<n?b>n&&(l=u(c,p,d,g,y,n),a&&(c.start=h+s*l)):v>r?b<r&&(l=u(c,p,d,g,y,r),a&&(c.start=h+s*l)):le(c,p,d,m),b<n&&v>=n&&(l=u(c,p,d,g,y,n),_=!0),b>r&&v<=r&&(l=u(c,p,d,g,y,r),_=!0),!o&&_&&(a&&(c.end=h+s*l),t.push(c),c=ae(e)),a&&(h+=s)}var x=e.length-3;p=e[x],d=e[x+1],m=e[x+2],(v=0===i?p:d)>=n&&v<=r&&le(c,p,d,m),x=c.length-3,o&&x>=3&&(c[x]!==c[0]||c[x+1]!==c[1])&&le(c,c[0],c[1],c[2]),c.length&&t.push(c)}function ae(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function se(e,t,n,r,i,o){for(var a=0;a<e.length;a++)oe(e[a],t,n,r,i,o,!1)}function le(e,t,n,r){e.push(t),e.push(n),e.push(r)}function ce(e,t,n,r,i,o){var a=(o-t)/(r-t);return e.push(o),e.push(n+(i-n)*a),e.push(1),a}function ue(e,t,n,r,i,o){var a=(o-n)/(i-n);return e.push(t+(r-t)*a),e.push(o),e.push(1),a}function he(e,t){for(var n=[],r=0;r<e.length;r++){var i,o=e[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=fe(o.geometry,t);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(fe(o.geometry[s],t))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var l=[],c=0;c<o.geometry[s].length;c++)l.push(fe(o.geometry[s][c],t));i.push(l)}n.push(Z(o.id,a,i,o.tags))}return n}function fe(e,t){var n=[];n.size=e.size,void 0!==e.start&&(n.start=e.start,n.end=e.end);for(var r=0;r<e.length;r+=3)n.push(e[r]+t,e[r+1],e[r+2]);return n}function pe(e,t){if(e.transformed)return e;var n,r,i,o=1<<e.z,a=e.x,s=e.y;for(n=0;n<e.features.length;n++){var l=e.features[n],c=l.geometry,u=l.type;if(l.geometry=[],1===u)for(r=0;r<c.length;r+=2)l.geometry.push(de(c[r],c[r+1],t,o,a,s));else for(r=0;r<c.length;r++){var h=[];for(i=0;i<c[r].length;i+=2)h.push(de(c[r][i],c[r][i+1],t,o,a,s));l.geometry.push(h)}}return e.transformed=!0,e}function de(e,t,n,r,i,o){return[Math.round(n*(e*r-i)),Math.round(n*(t*r-o))]}function me(e,t,n,r,i){for(var o=t===i.maxZoom?0:i.tolerance/((1<<t)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){a.numFeatures++,ge(a,e[s],o,i);var l=e[s].minX,c=e[s].minY,u=e[s].maxX,h=e[s].maxY;l<a.minX&&(a.minX=l),c<a.minY&&(a.minY=c),u>a.maxX&&(a.maxX=u),h>a.maxY&&(a.maxY=h)}return a}function ge(e,t,n,r){var i=t.geometry,o=t.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===o)ye(a,i,e,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)ye(a,i[s],e,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<i.length;l++){var c=i[l];for(s=0;s<c.length;s++)ye(a,c[s],e,n,!0,0===s)}if(a.length){var u=t.tags||null;if("LineString"===o&&r.lineMetrics){for(var h in u={},t.tags)u[h]=t.tags[h];u.mapbox_clip_start=i.start/i.size,u.mapbox_clip_end=i.end/i.size}var f={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:u};null!==t.id&&(f.id=t.id),e.features.push(f)}}function ye(e,t,n,r,i,o){var a=r*r;if(r>0&&t.size<(i?a:r))n.numPoints+=t.length/3;else{for(var s=[],l=0;l<t.length;l+=3)(0===r||t[l+2]>a)&&(n.numSimplified++,s.push(t[l]),s.push(t[l+1])),n.numPoints++;i&&function(e,t){for(var n=0,r=0,i=e.length,o=i-2;r<i;o=r,r+=2)n+=(e[r]-e[o])*(e[r+1]+e[o+1]);if(n>0===t)for(r=0,i=e.length;r<i/2;r+=2){var a=e[r],s=e[r+1];e[r]=e[i-2-r],e[r+1]=e[i-1-r],e[i-2-r]=a,e[i-1-r]=s}}(s,o),e.push(s)}}function ve(e,t){var n=(t=this.options=function(e,t){for(var n in t)e[n]=t[n];return e}(Object.create(this.options),t)).debug;if(n&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(e,t){var n=[];if("FeatureCollection"===e.type)for(var r=0;r<e.features.length;r++)K(n,e.features[r],t,r);else K(n,"Feature"===e.type?e:{geometry:e},t);return n}(e,t);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(r=function(e,t){var n=t.buffer/t.extent,r=e,i=re(e,1,-1-n,n,0,-1,2,t),o=re(e,1,1-n,2+n,0,-1,2,t);return(i||o)&&(r=re(e,1,-n,1+n,0,-1,2,t)||[],i&&(r=he(i,1).concat(r)),o&&(r=r.concat(he(o,-1)))),r}(r,t)).length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function be(e,t,n){return 32*((1<<e)*n+t)+e}function _e(e,t){const n=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);const r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return t(null,null);const i=new u(r.features);let o=m(i);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),t(null,{vectorTile:i,rawData:o.buffer})}ve.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ve.prototype.splitTile=function(e,t,n,r,i,o,a){for(var s=[e,t,n,r],l=this.options,c=l.debug;s.length;){r=s.pop(),n=s.pop(),t=s.pop(),e=s.pop();var u=1<<t,h=be(t,n,r),f=this.tiles[h];if(!f&&(c>1&&console.time("creation"),f=this.tiles[h]=me(e,t,n,r,l),this.tileCoords.push({z:t,x:n,y:r}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,r,f.numFeatures,f.numPoints,f.numSimplified),console.timeEnd("creation"));var p="z"+t;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(f.source=e,i){if(t===l.maxZoom||t===i)continue;var d=1<<i-t;if(n!==Math.floor(o/d)||r!==Math.floor(a/d))continue}else if(t===l.indexMaxZoom||f.numPoints<=l.indexMaxPoints)continue;if(f.source=null,0!==e.length){c>1&&console.time("clipping");var m,g,y,v,b,_,x=.5*l.buffer/l.extent,A=.5-x,w=.5+x,C=1+x;m=g=y=v=null,b=re(e,u,n-x,n+w,0,f.minX,f.maxX,l),_=re(e,u,n+A,n+C,0,f.minX,f.maxX,l),e=null,b&&(m=re(b,u,r-x,r+w,1,f.minY,f.maxY,l),g=re(b,u,r+A,r+C,1,f.minY,f.maxY,l),b=null),_&&(y=re(_,u,r-x,r+w,1,f.minY,f.maxY,l),v=re(_,u,r+A,r+C,1,f.minY,f.maxY,l),_=null),c>1&&console.timeEnd("clipping"),s.push(m||[],t+1,2*n,2*r),s.push(g||[],t+1,2*n,2*r+1),s.push(y||[],t+1,2*n+1,2*r),s.push(v||[],t+1,2*n+1,2*r+1)}}},ve.prototype.getTile=function(e,t,n){var r=this.options,i=r.extent,o=r.debug;if(e<0||e>24)return null;var a=1<<e,s=be(e,t=(t%a+a)%a,n);if(this.tiles[s])return pe(this.tiles[s],i);o>1&&console.log("drilling down to z%d-%d-%d",e,t,n);for(var l,c=e,u=t,h=n;!l&&c>0;)c--,u=Math.floor(u/2),h=Math.floor(h/2),l=this.tiles[be(c,u,h)];return l&&l.source?(o>1&&console.log("found parent tile z%d-%d-%d",c,u,h),o>1&&console.time("drilling down"),this.splitTile(l.source,c,u,h,e,t,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?pe(this.tiles[s],i):null):null};class xe extends e.VectorTileWorkerSource{constructor(e,t,n,r,i){super(e,t,n,r,_e),i&&(this.loadGeoJSON=i)}loadData(t,n){const r=t&&t.request,i=r&&r.collectResourceTiming;this.loadGeoJSON(t,((a,s)=>{if(a||!s)return n(a);if("object"!=typeof s)return n(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`));{o(s,!0);try{if(t.filter){const n=e.createExpression(t.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===n.result)throw new Error(n.value.map((e=>`${e.key}: ${e.message}`)).join(", "));const r=s.features.filter((e=>n.value.evaluate({zoom:0},e)));s={type:"FeatureCollection",features:r}}this._geoJSONIndex=t.cluster?new L(function({superclusterOptions:t,clusterProperties:n}){if(!n||!t)return t;const r={},i={},o={accumulated:null,zoom:0},a={properties:null},s=Object.keys(n);for(const t of s){const[o,a]=n[t],s=e.createExpression(a),l=e.createExpression("string"==typeof o?[o,["accumulated"],["get",t]]:o);r[t]=s.value,i[t]=l.value}return t.map=e=>{a.properties=e;const t={};for(const e of s)t[e]=r[e].evaluate(o,a);return t},t.reduce=(e,t)=>{a.properties=t;for(const t of s)o.accumulated=e[t],e[t]=i[t].evaluate(o,a)},t}(t)).load(s.features):function(e,t){return new ve(e,t)}(s,t.geojsonVtOptions)}catch(a){return n(a)}this.loaded={};const l={};if(i){const n=e.getPerformanceMeasurement(r);n&&(l.resourceTiming={},l.resourceTiming[t.source]=JSON.parse(JSON.stringify(n)))}n(null,l)}}))}reloadTile(e,t){const n=this.loaded;return n&&n[e.uid]?super.reloadTile(e,t):this.loadTile(e,t)}loadGeoJSON(t,n){if(t.request)e.getJSON(t.request,n);else{if("string"!=typeof t.data)return n(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`));try{return n(null,JSON.parse(t.data))}catch(e){return n(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(e){t(e)}}getClusterChildren(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(e){t(e)}}getClusterLeaves(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(e){t(e)}}}class Ae{constructor(t){this.self=t,this.actor=new e.Actor(t,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=e.getProjection({name:"mercator"}),this.workerSourceTypes={vector:e.VectorTileWorkerSource,geojson:xe},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(e,t)=>{if(this.workerSourceTypes[e])throw new Error(`Worker source with name "${e}" already registered.`);this.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=t=>{if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}}clearCaches(e,t,n){delete this.layerIndexes[e],delete this.availableImages[e],delete this.workerSources[e],delete this.demWorkerSources[e],n()}checkIfReady(e,t,n){n()}setReferrer(e,t){this.referrer=t}spriteLoaded(t,n){this.isSpriteLoaded[t]=n;for(const r in this.workerSources[t]){const i=this.workerSources[t][r];for(const t in i)i[t]instanceof e.VectorTileWorkerSource&&(i[t].isSpriteLoaded=n,i[t].fire(new e.Event("isSpriteLoaded")))}}setImages(e,t,n){this.availableImages[e]=t;for(const n in this.workerSources[e]){const r=this.workerSources[e][n];for(const e in r)r[e].availableImages=t}n()}enableTerrain(e,t,n){this.terrain=t,n()}setProjection(t,n){this.projections[t]=e.getProjection(n)}setLayers(e,t,n){this.getLayerIndex(e).replace(t),n()}updateLayers(e,t,n){this.getLayerIndex(e).update(t.layers,t.removedIds),n()}loadTile(t,n,r){const i=this.enableTerrain?e.extend({enableTerrain:this.terrain},n):n;i.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,n.type,n.source).loadTile(i,r)}loadDEMTile(t,n,r){const i=this.enableTerrain?e.extend({buildQuadTree:this.terrain},n):n;this.getDEMWorkerSource(t,n.source).loadTile(i,r)}reloadTile(t,n,r){const i=this.enableTerrain?e.extend({enableTerrain:this.terrain},n):n;i.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,n.type,n.source).reloadTile(i,r)}abortTile(e,t,n){this.getWorkerSource(e,t.type,t.source).abortTile(t,n)}removeTile(e,t,n){this.getWorkerSource(e,t.type,t.source).removeTile(t,n)}removeSource(e,t,n){if(!this.workerSources[e]||!this.workerSources[e][t.type]||!this.workerSources[e][t.type][t.source])return;const r=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==r.removeSource?r.removeSource(t,n):n()}loadWorkerSource(e,t,n){try{this.self.importScripts(t.url),n()}catch(e){n(e.toString())}}syncRTLPluginState(t,n,r){try{e.plugin.setState(n);const t=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=t){this.self.importScripts(t);const n=e.plugin.isParsed();r(n?void 0:new Error(`RTL Text Plugin failed to import scripts from ${t}`),n)}}catch(e){r(e.toString())}}getAvailableImages(e){let t=this.availableImages[e];return t||(t=[]),t}getLayerIndex(e){let t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new r),t}getWorkerSource(e,t,n){return this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),this.workerSources[e][t][n]||(this.workerSources[e][t][n]=new this.workerSourceTypes[t]({send:(t,n,r,i,o,a)=>{this.actor.send(t,n,r,e,o,a)},scheduler:this.actor.scheduler},this.getLayerIndex(e),this.getAvailableImages(e),this.isSpriteLoaded[e])),this.workerSources[e][t][n]}getDEMWorkerSource(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new i),this.demWorkerSources[e][t]}enforceCacheSizeLimit(t,n){e.enforceCacheSizeLimit(n)}getWorkerPerformanceMetrics(e,t,n){n(void 0,void 0)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new Ae(self)),Ae})),r(0,(function(e){var t=n;function n(e){return!function(e){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{t=new Worker(r),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(r),e}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");if(!t)return!1;var n=t.getImageData(0,0,1,1);return n&&n.width===e.width}()?(void 0===r[t=e&&e.failIfMajorPerformanceCaveat]&&(r[t]=function(e){var t,r=function(e){var t=document.createElement("canvas"),r=Object.create(n.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=e,t.getContext("webgl",r)||t.getContext("experimental-webgl",r)}(e);if(!r)return!1;try{t=r.createShader(r.VERTEX_SHADER)}catch(e){return!1}return!(!t||r.isContextLost())&&(r.shaderSource(t,"void main() {}"),r.compileShader(t),!0===r.getShaderParameter(t,r.COMPILE_STATUS))}(t)),r[t]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var t}(e)}var r={};function i(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!i(e[n],t[n]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!i(e[n],t[n]))return!1;return!0}return e===t}function o(t,n,r){const i=e.window.document.createElement(t);return void 0!==n&&(i.className=n),r&&r.appendChild(i),i}function a(t,n,r){const i=e.window.document.createElementNS("http://www.w3.org/2000/svg",t);for(const e of Object.keys(n))i.setAttributeNS(null,e,n[e]);return r&&r.appendChild(i),i}n.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const s=e.window.document&&e.window.document.documentElement.style,l=s&&void 0!==s.userSelect?"userSelect":"WebkitUserSelect";let c;function u(){s&&l&&(c=s[l],s[l]="none")}function h(){s&&l&&(s[l]=c)}function f(t){t.preventDefault(),t.stopPropagation(),e.window.removeEventListener("click",f,!0)}function p(){e.window.addEventListener("click",f,!0),e.window.setTimeout((()=>{e.window.removeEventListener("click",f,!0)}),0)}function d(e,t){const n=e.getBoundingClientRect();return y(e,n,t)}function m(e,t){const n=e.getBoundingClientRect(),r=[];for(let i=0;i<t.length;i++)r.push(y(e,n,t[i]));return r}function g(t){return void 0!==e.window.InstallTrigger&&2===t.button&&t.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button}function y(t,n,r){const i=t.offsetWidth===n.width?1:t.offsetWidth/n.width;return new e.pointGeometry((r.clientX-n.left)*i,(r.clientY-n.top)*i)}function v(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*o-i*r;return a?(e[0]=o*(a=1/a),e[1]=-r*a,e[2]=-i*a,e[3]=n*a,e):null}function b(e){const{userImage:t}=e;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}class _ extends e.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:e,callback:t}of this.requestors)this._notify(e,t);this.requestors=[]}}hasImage(e){return!!this.getImage(e)}getImage(e){return this.images[e]}addImage(e,t){this._validate(e,t)&&(this.images[e]=t)}_validate(t,n){let r=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "stretchX" value`))),r=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "stretchY" value`))),r=!1),this._validateContent(n.content,n)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "content" value`))),r=!1),r}_validateStretch(e,t){if(!e)return!0;let n=0;for(const r of e){if(r[0]<n||r[1]<r[0]||t<r[1])return!1;n=r[1]}return!0}_validateContent(e,t){return!(e&&(4!==e.length||e[0]<0||t.data.width<e[0]||e[1]<0||t.data.height<e[1]||e[2]<0||t.data.width<e[2]||e[3]<0||t.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))}updateImage(e,t){t.version=this.images[e].version+1,this.images[e]=t,this.updatedImages[e]=!0}removeImage(e){const t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e,t){let n=!0;if(!this.isLoaded())for(const t of e)this.images[t]||(n=!1);this.isLoaded()||n?this._notify(e,t):this.requestors.push({ids:e,callback:t})}_notify(t,n){const r={};for(const n of t){this.images[n]||this.fire(new e.Event("styleimagemissing",{id:n}));const t=this.images[n];t?r[n]={data:t.data.clone(),pixelRatio:t.pixelRatio,sdf:t.sdf,version:t.version,stretchX:t.stretchX,stretchY:t.stretchY,content:t.content,hasRenderCallback:Boolean(t.userImage&&t.userImage.render)}:e.warnOnce(`Image "${n}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}n(null,r)}getPixelSize(){const{width:e,height:t}=this.atlasImage;return{width:e,height:t}}getPattern(t){const n=this.patterns[t],r=this.getImage(t);if(!r)return null;if(n&&n.position.version===r.version)return n.position;if(n)n.position.version=r.version;else{const n={w:r.data.width+2,h:r.data.height+2,x:0,y:0},i=new e.ImagePosition(n,r);this.patterns[t]={bin:n,position:i}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const n=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(t,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const e in this.patterns)t.push(this.patterns[e].bin);const{w:n,h:r}=e.potpack(t),i=this.atlasImage;i.resize({width:n||1,height:r||1});for(const t in this.patterns){const{bin:n}=this.patterns[t],r=n.x+1,o=n.y+1,a=this.images[t].data,s=a.width,l=a.height;e.RGBAImage.copy(a,i,{x:0,y:0},{x:r,y:o},{width:s,height:l}),e.RGBAImage.copy(a,i,{x:0,y:l-1},{x:r,y:o-1},{width:s,height:1}),e.RGBAImage.copy(a,i,{x:0,y:0},{x:r,y:o+l},{width:s,height:1}),e.RGBAImage.copy(a,i,{x:s-1,y:0},{x:r-1,y:o},{width:1,height:l}),e.RGBAImage.copy(a,i,{x:0,y:0},{x:r+s,y:o},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const t of e){if(this.callbackDispatchedThisFrame[t])continue;this.callbackDispatchedThisFrame[t]=!0;const e=this.images[t];b(e)&&this.updateImage(t,e)}}}const x=new e.Properties({anchor:new e.DataConstantProperty(e.spec.light.anchor),position:new class{constructor(){this.specification=e.spec.light.position}possiblyEvaluate(t,n){return function([t,n,r]){const i=e.degToRad(n+90),o=e.degToRad(r);return{x:t*Math.cos(i)*Math.sin(o),y:t*Math.sin(i)*Math.sin(o),z:t*Math.cos(o),azimuthal:n,polar:r}}(t.expression.evaluate(n))}interpolate(t,n,r){return{x:e.number(t.x,n.x,r),y:e.number(t.y,n.y,r),z:e.number(t.z,n.z,r),azimuthal:e.number(t.azimuthal,n.azimuthal,r),polar:e.number(t.polar,n.polar,r)}}},color:new e.DataConstantProperty(e.spec.light.color),intensity:new e.DataConstantProperty(e.spec.light.intensity)}),A="-transition";class w extends e.Evented{constructor(t){super(),this._transitionable=new e.Transitionable(x),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,n={}){if(!this._validate(e.validateLight,t,n))for(const n in t){const r=t[n];e.endsWith(n,A)?this._transitionable.setTransition(n.slice(0,-A.length),r):this._transitionable.setValue(n,r)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(t,n,r){return(!r||!1!==r.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}const C=new e.Properties({source:new e.DataConstantProperty(e.spec.terrain.source),exaggeration:new e.DataConstantProperty(e.spec.terrain.exaggeration)}),E="-transition";class S extends e.Evented{constructor(t,n){super(),this._transitionable=new e.Transitionable(C),this.set(t),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=n}get(){return this._transitionable.serialize()}set(t){for(const n in t){const r=t[n];e.endsWith(n,E)?this._transitionable.setTransition(n.slice(0,-E.length),r):this._transitionable.setValue(n,r)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}}function T(t,n,r,i){const o=e.smoothstep(45,65,r),[a,s]=B(t,i),l=e.length(n);let c=1-Math.min(1,Math.exp((l-a)/(s-a)*-6));return c*=c*c,c=Math.min(1,1.00747*c),c*o*t.alpha}function B(e,t){const n=.5/Math.tan(.5*t);return[e.range[0]+n,e.range[1]+n]}const k=new e.Properties({range:new e.DataConstantProperty(e.spec.fog.range),color:new e.DataConstantProperty(e.spec.fog.color),"horizon-blend":new e.DataConstantProperty(e.spec.fog["horizon-blend"])}),M="-transition";class P extends e.Evented{constructor(t,n){super(),this._transitionable=new e.Transitionable(k),this.set(t),this._transitioning=this._transitionable.untransitioned(),this._transform=n}get state(){return{range:this.properties.get("range"),horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(t,n={}){if(!this._validate(e.validateFog,t,n))for(const n in t){const r=t[n];e.endsWith(n,M)?this._transitionable.setTransition(n.slice(0,-M.length),r):this._transitionable.setValue(n,r)}}getOpacity(t){if(!this._transform.projection.supportsFog)return 0;const n=this.properties&&this.properties.get("color")||1;return e.smoothstep(45,65,t)*n.a}getOpacityAtLatLng(t,n){return this._transform.projection.supportsFog?function(t,n,r){const i=e.MercatorCoordinate.fromLngLat(n),o=r.elevation?r.elevation.getAtPointOrZero(i):0,a=[i.x,i.y,o];return e.transformMat4(a,a,r.mercatorFogMatrix),T(t,a,r.pitch,r._fov)}(this.state,t,n):0}getFovAdjustedRange(e){return this._transform.projection.supportsFog?B(this.state,e):[0,1]}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(t,n,r){return(!r||!1!==r.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}class I{constructor(t,n){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=e.uniqueId();const r=this.workerPool.acquire(this.id);for(let e=0;e<r.length;e++){const t=new I.Actor(r[e],n,this.id);t.name=`Worker ${e}`,this.actors.push(t)}this.ready=!1,this.broadcast("checkIfReady",null,(()=>{this.ready=!0}))}broadcast(t,n,r){e.asyncAll(this.actors,((e,r)=>{e.send(t,n,r)}),r=r||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((e=>{e.remove()})),this.actors=[],this.workerPool.release(this.id)}}function O(t,n,r){return n*(e.EXTENT/(t.tileSize*Math.pow(2,r-t.tileID.overscaledZ)))}I.Actor=e.Actor;class D{constructor(e,t,n,r){this.screenBounds=e,this.cameraPoint=t,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=n,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this.screenGeometry.map((e=>r.pointCoordinate3D(e))),this.cameraGeometry=this.bufferedCameraGeometry(0)}static createFromScreenPoints(t,n){let r,i;if(t instanceof e.pointGeometry||"number"==typeof t[0]){const o=e.pointGeometry.convert(t);r=[e.pointGeometry.convert(t)],i=n.isPointAboveHorizon(o)}else{const o=e.pointGeometry.convert(t[0]),a=e.pointGeometry.convert(t[1]);r=[o,a],i=e.polygonizeBounds(o,a).every((e=>n.isPointAboveHorizon(e)))}return new D(r,n.getCameraPoint(),i,n)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(t){return e.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],t)}bufferedCameraGeometry(t){const n=this.screenBounds[0],r=1===this.screenBounds.length?this.screenBounds[0].add(new e.pointGeometry(1,1)):this.screenBounds[1],i=e.polygonizeBounds(n,r,0,!1);return this.cameraPoint.y>r.y&&(this.cameraPoint.x>n.x&&this.cameraPoint.x<r.x?i.splice(3,0,this.cameraPoint):this.cameraPoint.x>=r.x?i[2]=this.cameraPoint:this.cameraPoint.x<=n.x&&(i[3]=this.cameraPoint)),e.bufferConvexPolygon(i,t)}containsTile(t,n,r){const i=t.queryPadding+1,o=t.tileID.wrap,a=r?this._bufferedCameraMercator(i,n).map((n=>e.getTilePoint(t.tileTransform,n,o))):this._bufferedScreenMercator(i,n).map((n=>e.getTilePoint(t.tileTransform,n,o))),s=this.screenGeometryMercator.map((n=>e.getTileVec3(t.tileTransform,n,o))),l=s.map((t=>new e.pointGeometry(t[0],t[1]))),c=n.getFreeCameraOptions().position||new e.MercatorCoordinate(0,0,0),u=e.getTileVec3(t.tileTransform,c,o),h=s.map((t=>{const n=e.sub(t,t,u);return e.normalize(n,n),new e.Ray(u,n)})),f=O(t,1,n.zoom);if(e.polygonIntersectsBox(a,0,0,e.EXTENT,e.EXTENT))return{queryGeometry:this,tilespaceGeometry:l,tilespaceRays:h,bufferedTilespaceGeometry:a,bufferedTilespaceBounds:(p=e.getBounds(a),p.min.x=e.clamp(p.min.x,0,e.EXTENT),p.min.y=e.clamp(p.min.y,0,e.EXTENT),p.max.x=e.clamp(p.max.x,0,e.EXTENT),p.max.y=e.clamp(p.max.y,0,e.EXTENT),p),tile:t,tileID:t.tileID,pixelToTileUnitsFactor:f};var p}_bufferedScreenMercator(e,t){const n=z(e);if(this._screenRaycastCache[n])return this._screenRaycastCache[n];{const r=this.bufferedScreenGeometry(e).map((e=>t.pointCoordinate3D(e)));return this._screenRaycastCache[n]=r,r}}_bufferedCameraMercator(e,t){const n=z(e);if(this._cameraRaycastCache[n])return this._cameraRaycastCache[n];{const r=this.bufferedCameraGeometry(e).map((e=>t.pointCoordinate3D(e)));return this._cameraRaycastCache[n]=r,r}}}function z(e){return 100*e|0}function L(t,n,r){const i=function(i,o){if(i)return r(i);if(o){const i=e.pick(e.extend(o,t),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);o.vector_layers&&(i.vectorLayers=o.vector_layers,i.vectorLayerIds=i.vectorLayers.map((e=>e.id))),i.tiles=n.canonicalizeTileset(i,t.url),r(null,i)}};return t.url?e.getJSON(n.transformRequest(n.normalizeSourceURL(t.url),e.ResourceType.Source),i):e.exported.frame((()=>i(null,t)))}class R{constructor(t,n,r){this.bounds=e.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=n||0,this.maxzoom=r||24}validateBounds(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(t){const n=Math.pow(2,t.z),r=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*n),i=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*n),o=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*n),a=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*n);return t.x>=r&&t.x<o&&t.y>=i&&t.y<a}}class F{constructor(e,t,n){this.context=e;const r=e.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||t.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const U={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class N{constructor(e,t,n,r){this.length=t.length,this.attributes=n,this.itemSize=t.bytesPerElement,this.dynamicDraw=r,this.context=e;const i=e.gl;this.buffer=i.createBuffer(),e.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||t.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,t){for(let n=0;n<this.attributes.length;n++){const r=t.attributes[this.attributes[n].name];void 0!==r&&e.enableVertexAttribArray(r)}}setVertexAttribPointers(e,t,n){for(let r=0;r<this.attributes.length;r++){const i=this.attributes[r],o=t.attributes[i.name];void 0!==o&&e.vertexAttribPointer(o,i.components,e[U[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class j{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class V extends j{getDefault(){return e.Color.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class G extends j{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class q extends j{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class W extends j{getDefault(){return[!0,!0,!0,!0]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class H extends j{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class $ extends j{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class X extends j{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class Z extends j{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class Y extends j{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}class K extends j{getDefault(){return[0,1]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class J extends j{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}class Q extends j{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class ee extends j{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}class te extends j{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class ne extends j{getDefault(){return e.Color.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class re extends j{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class ie extends j{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}class oe extends j{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class ae extends j{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class se extends j{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class le extends j{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class ce extends j{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class ue extends j{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class he extends j{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class fe extends j{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class pe extends j{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class de extends j{getDefault(){return null}set(e){const t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class me extends j{constructor(e){super(e),this.vao=e.extVertexArrayObject}getDefault(){return null}set(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)}}class ge extends j{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class ye extends j{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class ve extends j{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class be extends j{constructor(e,t){super(e),this.context=e,this.parent=t}getDefault(){return null}}class _e extends be{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class xe extends be{attachment(){return this.gl.DEPTH_ATTACHMENT}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,this.attachment(),t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Ae extends xe{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class we{constructor(e,t,n,r){this.context=e,this.width=t,this.height=n;const i=this.framebuffer=e.gl.createFramebuffer();this.colorAttachment=new _e(e,i),r&&(this.depthAttachment=new xe(e,i))}destroy(){const e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){const t=this.depthAttachment.get();t&&e.deleteRenderbuffer(t)}e.deleteFramebuffer(this.framebuffer)}}class Ce{constructor(e){this.gl=e,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new V(this),this.clearDepth=new G(this),this.clearStencil=new q(this),this.colorMask=new W(this),this.depthMask=new H(this),this.stencilMask=new $(this),this.stencilFunc=new X(this),this.stencilOp=new Z(this),this.stencilTest=new Y(this),this.depthRange=new K(this),this.depthTest=new J(this),this.depthFunc=new Q(this),this.blend=new ee(this),this.blendFunc=new te(this),this.blendColor=new ne(this),this.blendEquation=new re(this),this.cullFace=new ie(this),this.cullFaceSide=new oe(this),this.frontFace=new ae(this),this.program=new se(this),this.activeTexture=new le(this),this.viewport=new ce(this),this.bindFramebuffer=new ue(this),this.bindRenderbuffer=new he(this),this.bindTexture=new fe(this),this.bindVertexBuffer=new pe(this),this.bindElementBuffer=new de(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new me(this),this.pixelStoreUnpack=new ge(this),this.pixelStoreUnpackPremultiplyAlpha=new ye(this),this.pixelStoreUnpackFlipY=new ve(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extTextureHalfFloat=e.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(e.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=e.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=e.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,t){return new F(this,e,t)}createVertexBuffer(e,t,n){return new N(this,e,t,n)}createRenderbuffer(e,t,n){const r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,e,t,n),this.bindRenderbuffer.set(null),i}createFramebuffer(e,t,n){return new we(this,e,t,n)}clear({color:e,depth:t,stencil:n}){const r=this.gl;let i=0;e&&(i|=r.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==t&&(i|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(t),this.depthMask.set(!0)),void 0!==n&&(i|=r.STENCIL_BUFFER_BIT,this.clearStencil.set(n),this.stencilMask.set(255)),r.clear(i)}setCullFace(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(t){i(t.blendFunction,e.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Ee extends e.Evented{constructor(t,n,r,i){super(),this.id=t,this.dispatcher=r,this.setEventedParent(i),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},n),e.extend(this,e.pick(n,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=L(this._options,this.map._requestManager,((t,n)=>{this._tileJSONRequest=null,this._loaded=!0,t?this.fire(new e.ErrorEvent(t)):n&&(e.extend(this,n),n.bounds&&(this.tileBounds=new R(n.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(n.tiles),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return e.extend({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(t,n){const r=e.exported.devicePixelRatio>=2,i=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),r,this.tileSize);t.request=e.getImage(this.map._requestManager.transformRequest(i,e.ResourceType.Tile),((r,i,o,a)=>(delete t.request,t.aborted?(t.state="unloaded",n(null)):r?(t.state="errored",n(r)):i?(this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:o,expires:a}),t.setTexture(i,this.map.painter),t.state="loaded",e.cacheEntryPossiblyAdded(this.dispatcher),void n(null)):n(null))))}static loadTileData(e,t,n){e.setTexture(t,n)}static unloadTileData(e,t){e.texture&&t.saveTileTexture(e.texture)}abortTile(e,t){e.request&&(e.request.cancel(),delete e.request),t()}unloadTile(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()}hasTransition(){return!1}}let Se;function Te(t,n,r,i,o,a,s,l){const c=[t,r,o,n,i,a,1,1,1],u=[s,l,1],h=e.adjoint([],c),[f,p,d]=e.transformMat3(u,u,e.transpose(h,h));return e.multiply(c,[f,0,0,0,p,0,0,0,d],c)}class Be extends e.Evented{constructor(e,t,n,r){super(),this.id=e,this.dispatcher=n,this.coordinates=t.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(r),this.options=t}load(t){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),((n,r)=>{if(this._loaded=!0,n)this.fire(new e.ErrorEvent(n));else if(r){const{HTMLImageElement:n}=e.window;this.image=r instanceof n?e.exported.getImageData(r):r,this.width=this.image.width,this.height=this.image.height,t&&(this.coordinates=t),this._finishLoading()}}))}loaded(){return this._loaded}updateImage(e){return this.image&&e.url?(this.options.url=e.url,this.load(e.coordinates),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this.texture&&this.texture.destroy()}setCoordinates(t){this.coordinates=t,this._boundsArray=void 0;const n=t.map(e.MercatorCoordinate.fromLngLat);return this.tileID=function(t){let n=1/0,r=1/0,i=-1/0,o=-1/0;for(const e of t)n=Math.min(n,e.x),r=Math.min(r,e.y),i=Math.max(i,e.x),o=Math.max(o,e.y);const a=Math.max(i-n,o-r),s=Math.max(0,Math.floor(-Math.log(a)/Math.LN2)),l=Math.pow(2,s);return new e.CanonicalTileID(s,Math.floor((n+i)/2*l),Math.floor((r+o)/2*l))}(n),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(t){for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture)}if(this._boundsArray)return;const n=e.tileTransform(this.tileID,this.map.transform.projection),[r,i,o,a]=this.coordinates.map((t=>{const r=n.projection.project(t[0],t[1]);return e.getTilePoint(n,r)._round()}));this.perspectiveTransform=function(t,n,r,i,o,a,s,l,c,u){const h=Te(0,0,t,0,0,n,t,n),f=Te(r,i,o,a,s,l,c,u);return e.multiply(f,e.adjoint(h,h),f),[f[6]/f[8]*t/e.EXTENT,f[7]/f[8]*n/e.EXTENT]}(this.width,this.height,r.x,r.y,i.x,i.y,a.x,a.y,o.x,o.y);const s=this._boundsArray=new e.StructArrayLayout4i8;s.emplaceBack(r.x,r.y,0,0),s.emplaceBack(i.x,i.y,e.EXTENT,0),s.emplaceBack(a.x,a.y,0,e.EXTENT),s.emplaceBack(o.x,o.y,e.EXTENT,e.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=t.createVertexBuffer(s,e.boundsAttributes.members),this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const t=this.map.painter.context,n=t.gl;this.texture?this.texture.update(this.image):(this.texture=new e.Texture(t,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this._prepareData(t)}loadTile(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const ke={vector:class extends e.Evented{constructor(t,n,r,i){if(super(),this.id=t,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(n,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(i),this._tileWorkers={},this._deduped=new e.DedupedRequest}load(){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=L(this._options,this.map._requestManager,((t,n)=>{this._tileJSONRequest=null,this._loaded=!0,t?this.fire(new e.ErrorEvent(t)):n&&(e.extend(this,n),n.bounds&&(this.tileBounds=new R(n.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(n.tiles,this.map._requestManager._customAccessToken),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.cancel(),e();const t=this.map.style._getSourceCaches(this.id);for(const e of t)e.clearTiles();this.load()}setTiles(e){return this.setSourceProperty((()=>{this._options.tiles=e})),this}setUrl(e){return this.setSourceProperty((()=>{this.url=e,this._options.url=e})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return e.extend({},this._options)}loadTile(t,n){const r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme)),i={request:this.map._requestManager.transformRequest(r,e.ResourceType.Tile),data:void 0,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:t.isSymbolTile};if(i.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state)"loading"===t.state?t.reloadCallback=n:t.request=t.actor.send("reloadTile",i,o.bind(this));else if(t.actor=this._tileWorkers[r]=this._tileWorkers[r]||this.dispatcher.getActor(),this.dispatcher.ready)t.request=t.actor.send("loadTile",i,o.bind(this),void 0,!0);else{const n=e.loadVectorTile.call({deduped:this._deduped},i,((e,n)=>{e||!n?o.call(this,e):(i.data={cacheControl:n.cacheControl,expires:n.expires,rawData:n.rawData.slice(0)},t.actor&&t.actor.send("loadTile",i,o.bind(this),void 0,!0))}),!0);t.request={cancel:n}}function o(r,i){return delete t.request,t.aborted?n(null):r&&404!==r.status?n(r):(i&&i.resourceTiming&&(t.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&t.setExpiryData(i),t.loadVectorData(i,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id})}unloadTile(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}},raster:Ee,"raster-dem":class extends Ee{constructor(t,n,r,i){super(t,n,r,i),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox"}loadTile(t,n){const r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function i(e,r){e&&(t.state="errored",n(e)),r&&(t.dem=r,t.dem.onDeserialize(),t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0,t.state="loaded",n(null))}t.request=e.getImage(this.map._requestManager.transformRequest(r,e.ResourceType.Tile),function(r,o,a,s){if(delete t.request,t.aborted)t.state="unloaded",n(null);else if(r)t.state="errored",n(r);else if(o){this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:a,expires:s});const n=e.window.ImageBitmap&&o instanceof e.window.ImageBitmap&&(null==Se&&(Se=e.window.OffscreenCanvas&&new e.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof e.window.createImageBitmap),Se),r=1-(o.width-e.prevPowerOfTwo(o.width))/2;r<1||t.neighboringTiles||(t.neighboringTiles=this._getNeighboringTiles(t.tileID));const l=n?o:e.exported.getImageData(o,r),c={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:l,encoding:this.encoding,padding:r};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",c,i.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(t){const n=t.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,o=0===n.x?t.wrap-1:t.wrap,a=(n.x+1+r)%r,s=n.x+1===r?t.wrap+1:t.wrap,l={};return l[new e.OverscaledTileID(t.overscaledZ,o,n.z,i,n.y).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(l[new e.OverscaledTileID(t.overscaledZ,o,n.z,i,n.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<r&&(l[new e.OverscaledTileID(t.overscaledZ,o,n.z,i,n.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),l}unloadTile(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded"}},geojson:class extends e.Evented{constructor(t,n,r,i){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=r.getActor(),this.setEventedParent(i),this._data=n.data,this._options=e.extend({},n),this._collectResourceTiming=n.collectResourceTiming,void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId;const o=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*o,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*o,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?n.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,n.clusterMinPoints||2),extent:e.EXTENT,radius:(void 0!==n.clusterRadius?n.clusterRadius:50)*o,log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions)}onAdd(e){this.map=e,this.setData(this._data)}setData(e){return this._data=e,this._updateWorkerData(),this}getClusterExpansionZoom(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this}getClusterChildren(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this}getClusterLeaves(e,t,n,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:n},r),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new e.Event("dataloading",{dataType:"source"})),this._loaded=!1;const t=e.extend({},this.workerOptions),n=this._data;"string"==typeof n?(t.request=this.map._requestManager.transformRequest(e.exported.resolveURL(n),e.ResourceType.Source),t.request.collectResourceTiming=this._collectResourceTiming):t.data=JSON.stringify(n),this._pendingLoad=this.actor.send(`${this.type}.loadData`,t,((t,n)=>{if(this._loaded=!0,this._pendingLoad=null,t)this.fire(new e.ErrorEvent(t));else{const t={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&n&&n.resourceTiming&&n.resourceTiming[this.id]&&(t.resourceTiming=n.resourceTiming[this.id]),this.fire(new e.Event("data",t)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)}))}loaded(){return this._loaded}loadTile(t,n){const r=t.actor?"reloadTile":"loadTile";t.actor=this.actor,t.request=this.actor.send(r,{type:this.type,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},((e,i)=>(delete t.request,t.unloadVectorData(),t.aborted?n(null):e?n(e):(t.loadVectorData(i,this.map.painter,"reloadTile"===r),n(null)))),void 0,"loadTile"===r)}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0}unloadTile(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return e.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Be{constructor(e,t,n,r){super(e,t,n,r),this.roundZoom=!0,this.type="video",this.options=t}load(){this._loaded=!1;const t=this.options;this.urls=[];for(const n of t.urls)this.urls.push(this.map._requestManager.transformRequest(n,e.ResourceType.Source).url);e.getVideo(this.urls,((t,n)=>{this._loaded=!0,t?this.fire(new e.ErrorEvent(t)):n&&(this.video=n,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const n=this.video.seekable;t<n.start(0)||t>n.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${n.start(0)} and ${n.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const t=this.map.painter.context,n=t.gl;this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(t,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(t)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Be,canvas:class extends Be{constructor(t,n,r,i){super(t,n,r,i),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some((e=>!Array.isArray(e)||2!==e.length||e.some((e=>"number"!=typeof e))))||this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'missing required property "coordinates"'))),n.animate&&"boolean"!=typeof n.animate&&this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),n.canvas?"string"==typeof n.canvas||n.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'missing required property "canvas"'))),this.options=n,this.animate=void 0===n.animate||n.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const n=this.map.painter.context;this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(n,this.canvas,n.gl.RGBA,{premultiply:!0}),this._prepareData(n)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}},custom:class extends e.Evented{constructor(t,n,r,i){super(),this.id=t,this.type="custom",this._dataType="raster",this._dispatcher=r,this._implementation=n,this.setEventedParent(i),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new e.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new e.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new R(this._implementation.bounds,this.minzoom,this.maxzoom)),n.update=this._update.bind(this),n.coveringTiles=this._coveringTiles.bind(this),e.extend(this,e.pick(n,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return e.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(t){this._map=t,this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(t),this.load()}onRemove(e){this._implementation.onRemove&&this._implementation.onRemove(e)}hasTile(e){if(this._implementation.hasTile){const{x:t,y:n,z:r}=e.canonical;return this._implementation.hasTile({x:t,y:n,z:r})}return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(t,n){const{x:r,y:i,z:o}=t.tileID.canonical,a=new e.window.AbortController,s=this._implementation.loadTile({x:r,y:i,z:o},{signal:a.signal});if(!s)return this.loadTileData(t,{width:this.tileSize,height:this.tileSize,data:null}),t.state="loaded",n(null);s.cancel=()=>a.abort(),t.request=s.then(function(r){return delete t.request,t.aborted?(t.state="unloaded",n(null)):r?function(t){return t instanceof e.window.ImageData||t instanceof e.window.ImageBitmap||t instanceof e.window.HTMLCanvasElement}(r)?(this.loadTileData(t,r),t.state="loaded",void n(null)):(t.state="errored",n(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`))):(this.loadTileData(t,{width:this.tileSize,height:this.tileSize,data:null}),t.state="loaded",n(null))}.bind(this)).catch((e=>{20!==e.code&&(t.state="errored",n(e))}))}loadTileData(e,t){Ee.loadTileData(e,t,this._map.painter)}unloadTileData(e){Ee.unloadTileData(e,this._map.painter)}prepareTile(e){if(!this._implementation.prepareTile)return null;const{x:t,y:n,z:r}=e.tileID.canonical,i=this._implementation.prepareTile({x:t,y:n,z:r});return i?(this.loadTileData(e,i),e.state="loaded",i):null}unloadTile(e,t){if(this.unloadTileData(e),this._implementation.unloadTile){const{x:t,y:n,z:r}=e.tileID.canonical;this._implementation.unloadTile({x:t,y:n,z:r})}t()}abortTile(e,t){e.request&&e.request.cancel&&(e.request.cancel(),delete e.request),t()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map((e=>({x:e.canonical.x,y:e.canonical.y,z:e.canonical.z})))}_update(){this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Me=function(t,n,r,i){const o=new ke[n.type](t,n,r,i);if(o.id!==t)throw new Error(`Expected Source id to be ${t} instead of ${o.id}`);return e.bindAll(["load","abort","unload","serialize","prepare"],o),o};function Pe(t,n){const r=e.identity([]);return e.scale(r,r,[.5*t.width,.5*-t.height,1]),e.translate(r,r,[1,-1,0]),e.multiply$1(r,r,t.calculateProjMatrix(n.toUnwrapped())),Float32Array.from(r)}function Ie(e,t,n,r,i,o,a,s=!1){const l=e.tilesIn(r,a,s);l.sort(De);const c=[];for(const r of l)c.push({wrappedTileID:r.tile.tileID.wrapped().key,queryResults:r.tile.queryRenderedFeatures(t,n,e._state,r,i,o,Pe(e.transform,r.tile.tileID),s)});const u=function(e){const t={},n={};for(const r of e){const e=r.queryResults,i=r.wrappedTileID,o=n[i]=n[i]||{};for(const n in e){const r=e[n],i=o[n]=o[n]||{},a=t[n]=t[n]||[];for(const e of r)i[e.featureIndex]||(i[e.featureIndex]=!0,a.push(e))}}return t}(c);for(const t in u)u[t].forEach((t=>{const n=t.feature,r=n.layer;r&&"background"!==r.type&&"sky"!==r.type&&(n.source=r.source,r["source-layer"]&&(n.sourceLayer=r["source-layer"]),n.state=void 0!==n.id?e.getFeatureState(r["source-layer"],n.id):{})}));return u}function Oe(e,t){const n=e.getRenderableIds().map((t=>e.getTileByID(t))),r=[],i={};for(let e=0;e<n.length;e++){const o=n[e],a=o.tileID.canonical.key;i[a]||(i[a]=!0,o.querySourceFeatures(r,t))}return r}function De(e,t){const n=e.tileID,r=t.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}function ze(){return null!=so.workerClass?new so.workerClass:new e.window.Worker(so.workerUrl)}const Le="mapboxgl_preloaded_worker_pool";class Re{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<Re.workerCount;)this.workers.push(new ze);return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((e=>{e.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Le]}numActive(){return Object.keys(this.active).length}}let Fe;function Ue(){return Fe||(Fe=new Re),Fe}function Ne(t,n){const r={};for(const e in t)"ref"!==e&&(r[e]=t[e]);return e.refProperties.forEach((e=>{e in n&&(r[e]=n[e])})),r}function je(e){e=e.slice();const t=Object.create(null);for(let n=0;n<e.length;n++)t[e[n].id]=e[n];for(let n=0;n<e.length;n++)"ref"in e[n]&&(e[n]=Ne(e[n],t[e[n].ref]));return e}Re.workerCount=2;const Ve={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Ge(e,t,n){n.push({command:Ve.addSource,args:[e,t[e]]})}function qe(e,t,n){t.push({command:Ve.removeSource,args:[e]}),n[e]=!0}function We(e,t,n,r){qe(e,n,r),Ge(e,t,n)}function He(e,t,n){let r;for(r in e[n])if(e[n].hasOwnProperty(r)&&"data"!==r&&!i(e[n][r],t[n][r]))return!1;for(r in t[n])if(t[n].hasOwnProperty(r)&&"data"!==r&&!i(e[n][r],t[n][r]))return!1;return!0}function $e(e,t,n,r,o,a){let s;for(s in t=t||{},e=e||{})e.hasOwnProperty(s)&&(i(e[s],t[s])||n.push({command:a,args:[r,s,t[s],o]}));for(s in t)t.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(i(e[s],t[s])||n.push({command:a,args:[r,s,t[s],o]}))}function Xe(e){return e.id}function Ze(e,t){return e[t.id]=t,e}class Ye{constructor(e,t){this.reset(e,t)}reset(e,t){this.points=e||[],this._distances=[0];for(let e=1;e<this.points.length;e++)this._distances[e]=this._distances[e-1]+this.points[e].dist(this.points[e-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(1===this.points.length)return this.points[0];t=e.clamp(t,0,1);let n=1,r=this._distances[n];const i=t*this.paddedLength+this.padding;for(;r<i&&n<this._distances.length;)r=this._distances[++n];const o=n-1,a=this._distances[o],s=r-a,l=s>0?(i-a)/s:0;return this.points[o].mult(1-l).add(this.points[n].mult(l))}}class Ke{constructor(e,t,n){const r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(e/n),this.yCellCount=Math.ceil(t/n);for(let e=0;e<this.xCellCount*this.yCellCount;e++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}insertCircle(e,t,n,r){this._forEachCell(t-r,n-r,t+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(n),this.circles.push(r)}_insertBoxCell(e,t,n,r,i,o){this.boxCells[i].push(o)}_insertCircleCell(e,t,n,r,i,o){this.circleCells[i].push(o)}_query(e,t,n,r,i,o){if(n<0||e>this.width||r<0||t>this.height)return!i&&[];const a=[];if(e<=0&&t<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(let e=0;e<this.boxKeys.length;e++)a.push({key:this.boxKeys[e],x1:this.bboxes[4*e],y1:this.bboxes[4*e+1],x2:this.bboxes[4*e+2],y2:this.bboxes[4*e+3]});for(let e=0;e<this.circleKeys.length;e++){const t=this.circles[3*e],n=this.circles[3*e+1],r=this.circles[3*e+2];a.push({key:this.circleKeys[e],x1:t-r,y1:n-r,x2:t+r,y2:n+r})}return o?a.filter(o):a}return this._forEachCell(e,t,n,r,this._queryCell,a,{hitTest:i,seenUids:{box:{},circle:{}}},o),i?a.length>0:a}_queryCircle(e,t,n,r,i){const o=e-n,a=e+n,s=t-n,l=t+n;if(a<0||o>this.width||l<0||s>this.height)return!r&&[];const c=[];return this._forEachCell(o,s,a,l,this._queryCellCircle,c,{hitTest:r,circle:{x:e,y:t,radius:n},seenUids:{box:{},circle:{}}},i),r?c.length>0:c}query(e,t,n,r,i){return this._query(e,t,n,r,!1,i)}hitTest(e,t,n,r,i){return this._query(e,t,n,r,!0,i)}hitTestCircle(e,t,n,r){return this._queryCircle(e,t,n,!0,r)}_queryCell(e,t,n,r,i,o,a,s){const l=a.seenUids,c=this.boxCells[i];if(null!==c){const i=this.bboxes;for(const u of c)if(!l.box[u]){l.box[u]=!0;const c=4*u;if(e<=i[c+2]&&t<=i[c+3]&&n>=i[c+0]&&r>=i[c+1]&&(!s||s(this.boxKeys[u]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[u],x1:i[c],y1:i[c+1],x2:i[c+2],y2:i[c+3]})}}}const u=this.circleCells[i];if(null!==u){const i=this.circles;for(const c of u)if(!l.circle[c]){l.circle[c]=!0;const u=3*c;if(this._circleAndRectCollide(i[u],i[u+1],i[u+2],e,t,n,r)&&(!s||s(this.circleKeys[c]))){if(a.hitTest)return o.push(!0),!0;{const e=i[u],t=i[u+1],n=i[u+2];o.push({key:this.circleKeys[c],x1:e-n,y1:t-n,x2:e+n,y2:t+n})}}}}}_queryCellCircle(e,t,n,r,i,o,a,s){const l=a.circle,c=a.seenUids,u=this.boxCells[i];if(null!==u){const e=this.bboxes;for(const t of u)if(!c.box[t]){c.box[t]=!0;const n=4*t;if(this._circleAndRectCollide(l.x,l.y,l.radius,e[n+0],e[n+1],e[n+2],e[n+3])&&(!s||s(this.boxKeys[t])))return o.push(!0),!0}}const h=this.circleCells[i];if(null!==h){const e=this.circles;for(const t of h)if(!c.circle[t]){c.circle[t]=!0;const n=3*t;if(this._circlesCollide(e[n],e[n+1],e[n+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[t])))return o.push(!0),!0}}}_forEachCell(e,t,n,r,i,o,a,s){const l=this._convertToXCellCoord(e),c=this._convertToYCellCoord(t),u=this._convertToXCellCoord(n),h=this._convertToYCellCoord(r);for(let f=l;f<=u;f++)for(let l=c;l<=h;l++)if(i.call(this,e,t,n,r,this.xCellCount*l+f,o,a,s))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,t,n,r,i,o){const a=r-e,s=i-t,l=n+o;return l*l>a*a+s*s}_circleAndRectCollide(e,t,n,r,i,o,a){const s=(o-r)/2,l=Math.abs(e-(r+s));if(l>s+n)return!1;const c=(a-i)/2,u=Math.abs(t-(i+c));if(u>c+n)return!1;if(l<=s||u<=c)return!0;const h=l-s,f=u-c;return h*h+f*f<=n*n}}const Je=Math.tan(85*Math.PI/180);function Qe(t,n,r,i,o,a){const s=e.create();if(r){if("globe"===o.projection.name)e.multiply$1(s,s,e.calculateGlobeLabelMatrix(o,n));else{const e=v([],a);s[0]=e[0],s[1]=e[1],s[4]=e[2],s[5]=e[3]}i||e.rotateZ(s,s,o.angle)}else e.multiply$1(s,o.labelPlaneMatrix,t);return s}function et(t,n,r,i,o,a){if(r){if("globe"===o.projection.name){const s=Qe(t,n,r,i,o,a);return e.invert(s,s),e.multiply$1(s,t,s),s}{const n=e.clone(t),r=e.identity([]);return r[0]=a[0],r[1]=a[1],r[4]=a[2],r[5]=a[3],e.multiply$1(n,n,r),i||e.rotateZ(n,n,-o.angle),n}}return o.glCoordMatrix}function tt(t,n,r=0){const i=[t.x,t.y,r,1];r?e.transformMat4$1(i,i,n):dt(i,i,n);const o=i[3];return{point:new e.pointGeometry(i[0]/o,i[1]/o),signedDistanceFromCamera:o}}function nt(t,n){const r=[t[0],t[1],t[2],1];e.transformMat4$1(r,r,n);const i=r[3];return{point:new e.pointGeometry(r[0]/i,r[1]/i),signedDistanceFromCamera:i}}function rt(e,t){return Math.min(.5+e/t*.5,1.5)}function it(e,t){const n=e[0]/e[3],r=e[1]/e[3];return n>=-t[0]&&n<=t[0]&&r>=-t[1]&&r<=t[1]}function ot(t,n,r,i,o,a,s,l,c,u){const h=r.transform,f=i?t.textSizeData:t.iconSizeData,p=e.evaluateSizeForZoom(f,r.transform.zoom),d=[256/r.width*2+1,256/r.height*2+1],m=i?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;m.clear();const g=t.lineVertexArray,y=i?t.text.placedSymbolArray:t.icon.placedSymbolArray,v=r.transform.width/r.transform.height;let b=!1;for(let i=0;i<y.length;i++){const _=y.get(i);if(_.writingMode!==e.WritingMode.vertical||b||0!==i&&y.get(i-1).writingMode===e.WritingMode.horizontal||(b=!0),(_.hidden||_.writingMode===e.WritingMode.vertical)&&!b){pt(_.numGlyphs,m);continue}b=!1;const x=new e.pointGeometry(_.tileAnchorX,_.tileAnchorY),A=c?c(x):[0,0,0],w=h.projection.projectTilePoint(x.x,x.y,u.canonical),C=[w.x+A[0],w.y+A[1],w.z+A[2]],E=[...C,1];if(e.transformMat4$1(E,E,n),!it(E,d)){pt(_.numGlyphs,m);continue}const S=rt(r.transform.cameraToCenterDistance,E[3]),T=e.evaluateSizeForFeature(f,p,_),B=s?T/S:T*S,k=tt(new e.pointGeometry(C[0],C[1]),o,C[2]);if(k.signedDistanceFromCamera<=0){pt(_.numGlyphs,m);continue}let M={};const P=s?null:c,I=lt(_,B,!1,l,n,o,a,t.glyphOffsetArray,g,m,k.point,x,M,v,P,h.projection,u);b=I.useVertical,P&&I.needsFlipping&&(M={}),(I.notEnoughRoom||b||I.needsFlipping&&lt(_,B,!0,l,n,o,a,t.glyphOffsetArray,g,m,k.point,x,M,v,P,h.projection,u).notEnoughRoom)&&pt(_.numGlyphs,m)}i?t.text.dynamicLayoutVertexBuffer.updateData(m):t.icon.dynamicLayoutVertexBuffer.updateData(m)}function at(e,t,n,r,i,o,a,s,l,c,u,h,f,p,d){const m=s.glyphStartIndex+s.numGlyphs,g=s.lineStartIndex,y=s.lineStartIndex+s.lineLength,v=t.getoffsetX(s.glyphStartIndex),b=t.getoffsetX(m-1),_=ht(e*v,n,r,i,o,a,s.segment,g,y,l,c,u,h,f,!0,p,d);if(!_)return null;const x=ht(e*b,n,r,i,o,a,s.segment,g,y,l,c,u,h,f,!0,p,d);return x?{first:_,last:x}:null}function st(t,n,r,i){return t.writingMode===e.WritingMode.horizontal&&Math.abs(r.y-n.y)>Math.abs(r.x-n.x)*i?{useVertical:!0}:t.writingMode===e.WritingMode.vertical?n.y<r.y?{needsFlipping:!0}:null:0!==t.flipState&&function(e,t,n){const r=(t.x-e.x)*n;return 0===r||Math.abs((t.y-e.y)/r)>Je}(n,r,i)?1===t.flipState?{needsFlipping:!0}:null:n.x>r.x?{needsFlipping:!0}:null}function lt(t,n,r,i,o,a,s,l,c,u,h,f,p,d,m,g,y){const v=n/24,b=t.lineOffsetX*v,_=t.lineOffsetY*v;let x;if(t.numGlyphs>1){const e=t.glyphStartIndex+t.numGlyphs,n=t.lineStartIndex,o=t.lineStartIndex+t.lineLength,u=at(v,l,b,_,r,h,f,t,c,a,p,m,!1,g,y);if(!u)return{notEnoughRoom:!0};const A=tt(u.first.point,s).point,w=tt(u.last.point,s).point;if(i&&!r){const e=st(t,A,w,d);if(t.flipState=e&&e.needsFlipping?1:2,e)return e}x=[u.first];for(let i=t.glyphStartIndex+1;i<e-1;i++)x.push(ht(v*l.getoffsetX(i),b,_,r,h,f,t.segment,n,o,c,a,p,m,!1,!1,g,y));x.push(u.last)}else{if(i&&!r){const n=tt(f,o).point,r=t.lineStartIndex+t.segment+1,i=new e.pointGeometry(c.getx(r),c.gety(r)),a=tt(i,o),s=st(t,n,a.signedDistanceFromCamera>0?a.point:ut(f,i,n,1,o,void 0,g,y.canonical),d);if(t.flipState=s&&s.needsFlipping?1:2,s)return s}const n=ht(v*l.getoffsetX(t.glyphStartIndex),b,_,r,h,f,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,c,a,p,m,!1,!1,g,y);if(!n)return{notEnoughRoom:!0};x=[n]}for(const t of x)e.addDynamicAttributes(u,t.point,t.angle);return{}}function ct(t,n,r,i,o){const a=i.projectTilePoint(t.x,t.y,n);if(!o)return tt(a,r,a.z);const s=o(t);return tt(new e.pointGeometry(a.x+s[0],a.y+s[1]),r,a.z+s[2])}function ut(e,t,n,r,i,o,a,s){const l=ct(e.add(e.sub(t)._unit()),s,i,a,o).point,c=n.sub(l);return n.add(c._mult(r/c.mag()))}function ht(t,n,r,i,o,a,s,l,c,u,h,f,p,d,m,g,y){const v=i?t-n:t+n;let b=v>0?1:-1,_=0;i&&(b*=-1,_=Math.PI),b<0&&(_+=Math.PI);let x=b>0?l+s:l+s+1,A=o,w=o,C=0,E=0;const S=Math.abs(v),T=[],B=[];let k=a;const M=()=>{const t=x-b;return 0===C?a:new e.pointGeometry(u.getx(t),u.gety(t))},P=()=>ut(M(),k,w,S-C+1,h,p,g,y.canonical);for(;C+E<=S;){if(x+=b,x<l||x>=c)return null;if(w=A,T.push(A),d&&B.push(k||M()),A=f[x],void 0===A){k=new e.pointGeometry(u.getx(x),u.gety(x));const t=ct(k,y.canonical,h,g,p);A=t.signedDistanceFromCamera>0?f[x]=t.point:P()}else k=null;C+=E,E=w.dist(A)}m&&p&&(k=k||new e.pointGeometry(u.getx(x),u.gety(x)),f[x]=A=void 0===f[x]?A:P(),E=w.dist(A));const I=(S-C)/E,O=A.sub(w),D=O.mult(I)._add(w);r&&D._add(O._unit()._perp()._mult(r*b));const z=_+Math.atan2(A.y-w.y,A.x-w.x);return T.push(D),d&&(k=k||new e.pointGeometry(u.getx(x),u.gety(x)),B.push(function(t,n,r){const i=1-r;return new e.pointGeometry(t.x*i+n.x*r,t.y*i+n.y*r)}(B.length>0?B[B.length-1]:k,k,I))),{point:D,angle:z,path:T,tilePath:B}}const ft=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function pt(e,t){for(let n=0;n<e;n++){const e=t.length;t.resize(e+4),t.float32.set(ft,3*e)}}function dt(e,t,n){const r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e[3]=n[3]*r+n[7]*i+n[15],e}const mt=100;class gt{constructor(e,t,n=new Ke(e.width+200,e.height+200,25),r=new Ke(e.width+200,e.height+200,25)){this.transform=e,this.grid=n,this.ignoredGrid=r,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+mt,this.screenBottomBoundary=e.height+mt,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.fogState=t}placeCollisionBox(e,t,n,r,i,o,a){let s=t.projectedAnchorX,l=t.projectedAnchorY,c=t.projectedAnchorZ;const u=t.elevation,h=t.tileID;if(u&&h){const e=this.transform.projection.upVector(h.canonical,t.tileAnchorX,t.tileAnchorY),n=this.transform.projection.upVectorScale(h.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;s+=e[0]*u*n,l+=e[1]*u*n,c+=e[2]*u*n}const f=this.projectAndGetPerspectiveRatio(o,[s,l,c],t.tileID,"globe"===this.transform.projection.name||!!u||this.transform.pitch>0),p=i*f.perspectiveRatio,d=(t.x1*e+n.x-t.padding)*p+f.point.x,m=(t.y1*e+n.y-t.padding)*p+f.point.y,g=(t.x2*e+n.x+t.padding)*p+f.point.x,y=(t.y2*e+n.y+t.padding)*p+f.point.y,v=f.perspectiveRatio<=.55||f.occluded;return!this.isInsideGrid(d,m,g,y)||!r&&this.grid.hitTest(d,m,g,y,a)||v?{box:[],offscreen:!1,occluded:f.occluded}:{box:[d,m,g,y],offscreen:this.isOffscreen(d,m,g,y),occluded:!1}}placeCollisionCircles(t,n,r,i,o,a,s,l,c,u,h,f,p,d){const m=[],g=this.transform.elevation,y=g?g.getAtTileOffsetFunc(d,this.transform.center.lat,this.transform.worldSize,this.transform.projection):e=>[0,0,0],v=new e.pointGeometry(n.tileAnchorX,n.tileAnchorY),b=this.transform.projection.projectTilePoint(n.tileAnchorX,n.tileAnchorY,d.canonical),_=y(v),x=[b.x+_[0],b.y+_[1],b.z+_[2]],A=this.projectAndGetPerspectiveRatio(a,[x[0],x[1],x[2]],d,"globe"===this.transform.projection.name||!!g||this.transform.pitch>0),{perspectiveRatio:w}=A,C=(u?o/w:o*w)/e.ONE_EM,E=tt(new e.pointGeometry(x[0],x[1]),s,x[2]).point,S=A.signedDistanceFromCamera>0?at(C,i,n.lineOffsetX*C,n.lineOffsetY*C,!1,E,v,n,r,s,{},g&&!u?y:null,u&&!!g,this.transform.projection,d):null;let T=!1,B=!1,k=!0;if(S&&!A.occluded){const n=.5*f*w+p,r=new e.pointGeometry(-100,-100),i=new e.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),o=new Ye,a=S.first,s=S.last;let u=[];for(let e=a.path.length-1;e>=1;e--)u.push(a.path[e]);for(let e=1;e<s.path.length;e++)u.push(s.path[e]);const d=2.5*n;if(l){const e=u.map(g?(e,t)=>{const n=y(t<a.path.length-1?a.tilePath[a.path.length-1-t]:s.tilePath[t-a.path.length+2]);return tt(e,l,n[2])}:e=>tt(e,l));u=e.some((e=>e.signedDistanceFromCamera<=0))?[]:e.map((e=>e.point))}let v=[];if(u.length>0){const t=u[0].clone(),n=u[0].clone();for(let e=1;e<u.length;e++)t.x=Math.min(t.x,u[e].x),t.y=Math.min(t.y,u[e].y),n.x=Math.max(n.x,u[e].x),n.y=Math.max(n.y,u[e].y);v=t.x>=r.x&&n.x<=i.x&&t.y>=r.y&&n.y<=i.y?[u]:n.x<r.x||t.x>i.x||n.y<r.y||t.y>i.y?[]:e.clipLine([u],r.x,r.y,i.x,i.y)}for(const e of v){o.reset(e,.25*n);let r=0;r=o.length<=.5*n?1:Math.ceil(o.paddedLength/d)+1;for(let e=0;e<r;e++){const i=e/Math.max(r-1,1),a=o.lerp(i),s=a.x+mt,l=a.y+mt;m.push(s,l,n,0);const u=s-n,f=l-n,p=s+n,d=l+n;if(k=k&&this.isOffscreen(u,f,p,d),B=B||this.isInsideGrid(u,f,p,d),!t&&this.grid.hitTestCircle(s,l,n,h)&&(T=!0,!c))return{circles:[],offscreen:!1,collisionDetected:T,occluded:!1}}}}return{circles:!c&&T||!B?[]:m,offscreen:k,collisionDetected:T,occluded:A.occluded}}queryRenderedSymbols(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const n=[];let r=1/0,i=1/0,o=-1/0,a=-1/0;for(const s of t){const t=new e.pointGeometry(s.x+mt,s.y+mt);r=Math.min(r,t.x),i=Math.min(i,t.y),o=Math.max(o,t.x),a=Math.max(a,t.y),n.push(t)}const s=this.grid.query(r,i,o,a).concat(this.ignoredGrid.query(r,i,o,a)),l={},c={};for(const t of s){const r=t.key;if(void 0===l[r.bucketInstanceId]&&(l[r.bucketInstanceId]={}),l[r.bucketInstanceId][r.featureIndex])continue;const i=[new e.pointGeometry(t.x1,t.y1),new e.pointGeometry(t.x2,t.y1),new e.pointGeometry(t.x2,t.y2),new e.pointGeometry(t.x1,t.y2)];e.polygonIntersectsPolygon(n,i)&&(l[r.bucketInstanceId][r.featureIndex]=!0,void 0===c[r.bucketInstanceId]&&(c[r.bucketInstanceId]=[]),c[r.bucketInstanceId].push(r.featureIndex))}return c}insertCollisionBox(e,t,n,r,i){(t?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:r,collisionGroupID:i},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,t,n,r,i){const o=t?this.ignoredGrid:this.grid,a={bucketInstanceId:n,featureIndex:r,collisionGroupID:i};for(let t=0;t<e.length;t+=4)o.insertCircle(a,e[t],e[t+1],e[t+2])}projectAndGetPerspectiveRatio(t,n,r,i){const o=[n[0],n[1],n[2],1];let a=!1;return n[2]||this.transform.pitch>0?(e.transformMat4$1(o,o,t),this.fogState&&r&&(a=function(t,n,r,i,o,a){const s=a.calculateFogTileMatrix(o),l=[n,r,i];return e.transformMat4(l,l,s),T(t,l,a.pitch,a._fov)}(this.fogState,n[0],n[1],n[2],r.toUnwrapped(),this.transform)>.9)):dt(o,o,t),{point:new e.pointGeometry((o[0]/o[3]+1)/2*this.transform.width+mt,(-o[1]/o[3]+1)/2*this.transform.height+mt),perspectiveRatio:Math.min(.5+this.transform.cameraToCenterDistance/o[3]*.5,1.5),signedDistanceFromCamera:o[3],occluded:i&&o[2]>o[3]||a}}isOffscreen(e,t,n,r){return n<mt||e>=this.screenRightBoundary||r<mt||t>this.screenBottomBoundary}isInsideGrid(e,t,n,r){return n>=0&&e<this.gridRightBoundary&&r>=0&&t<this.gridBottomBoundary}getViewportMatrix(){const t=e.identity([]);return e.translate(t,t,[-100,-100,0]),t}}class yt{constructor(e,t,n,r){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):r&&n?1:0,this.placed=n}isHidden(){return 0===this.opacity&&!this.placed}}class vt{constructor(e,t,n,r,i,o=!1){this.text=new yt(e?e.text:null,t,n,i),this.icon=new yt(e?e.icon:null,t,r,i),this.clipped=o}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class bt{constructor(e,t,n,r=!1){this.text=e,this.icon=t,this.skipFade=n,this.clipped=r}}class _t{constructor(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]}}class xt{constructor(e,t,n,r,i){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=i}}class At{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:e=>e.collisionGroupID===t}}return this.collisionGroups[e]}}function wt(t,n,r,i,o){const{horizontalAlign:a,verticalAlign:s}=e.getAnchorAlignment(t),l=-(a-.5)*n,c=-(s-.5)*r,u=e.evaluateVariableOffset(t,i);return new e.pointGeometry(l+u[0]*o,c+u[1]*o)}function Ct(t,n,r,i,o){const a=new e.pointGeometry(t,n);return r&&a._rotate(i?o:-o),a}class Et{constructor(e,t,n,r,i){this.transform=e.clone(),this.collisionIndex=new gt(this.transform,i),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=t,this.retainedQueryData={},this.collisionGroups=new At(n),this.collisionCircleArrays={},this.prevPlacement=r,r&&(r.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(t,n,r,i){const o=r.getBucket(n),a=r.latestFeatureIndex;if(!o||!a||n.id!==o.layerIds[0])return;const s=o.layers[0].layout,l=r.collisionBoxArray,c=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),u=r.tileSize/e.EXTENT,h=r.tileID.toUnwrapped(),f=this.transform.calculateProjMatrix(h),p="map"===s.get("text-pitch-alignment"),d="map"===s.get("text-rotation-alignment");n.compileFilter();const m=n.dynamicFilter(),g=n.dynamicFilterNeedsFeature(),y=this.transform.calculatePixelsToTileUnitsMatrix(r),v=Qe(f,r.tileID.canonical,p,d,this.transform,y);let b=null;if(p){const t=et(f,r.tileID.canonical,p,d,this.transform,y);b=e.multiply$1([],this.transform.labelPlaneMatrix,t)}let _=null;m&&r.latestFeatureIndex&&(_={unwrappedTileID:h,dynamicFilter:m,dynamicFilterNeedsFeature:g,featureIndex:r.latestFeatureIndex}),this.retainedQueryData[o.bucketInstanceId]=new xt(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,r.tileID);const x={bucket:o,layout:s,posMatrix:f,textLabelPlaneMatrix:v,labelToScreenMatrix:b,clippingData:_,scale:c,textPixelRatio:u,holdingForFade:r.holdingForFade(),collisionBoxArray:l,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:e.evaluateSizeForZoom(o.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(i)for(const e of o.sortKeyRanges){const{sortKey:n,symbolInstanceStart:r,symbolInstanceEnd:i}=e;t.push({sortKey:n,symbolInstanceStart:r,symbolInstanceEnd:i,parameters:x})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:x})}attemptAnchorPlacement(e,t,n,r,i,o,a,s,l,c,u,h,f,p,d,m,g,y){const v=[h.textOffset0,h.textOffset1],b=wt(e,n,r,v,i),_=this.collisionIndex.placeCollisionBox(i,t,Ct(b.x,b.y,o,a,this.transform.angle),u,s,l,c.predicate);if((!m||0!==this.collisionIndex.placeCollisionBox(p.getSymbolInstanceIconSize(y,this.transform.zoom,f),m,Ct(b.x,b.y,o,a,this.transform.angle),u,s,l,c.predicate).box.length)&&_.box.length>0){let t;return this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(t=this.prevPlacement.variableOffsets[h.crossTileID].anchor),this.variableOffsets[h.crossTileID]={textOffset:v,width:n,height:r,anchor:e,textScale:i,prevAnchor:t},this.markUsedJustification(p,e,h,d),p.allowVerticalPlacement&&(this.markUsedOrientation(p,d,h),this.placedOrientations[h.crossTileID]=d),{shift:b,placedGlyphBoxes:_}}}placeLayerBucketPart(t,n,r,i){const{bucket:o,layout:a,posMatrix:s,textLabelPlaneMatrix:l,labelToScreenMatrix:c,clippingData:u,textPixelRatio:h,holdingForFade:f,collisionBoxArray:p,partiallyEvaluatedTextSize:d,partiallyEvaluatedIconSize:m,collisionGroup:g}=t.parameters,y=a.get("text-optional"),v=a.get("icon-optional"),b=a.get("text-allow-overlap"),_=a.get("icon-allow-overlap"),x="map"===a.get("text-rotation-alignment"),A="map"===a.get("text-pitch-alignment"),w="none"!==a.get("icon-text-fit"),C="viewport-y"===a.get("symbol-z-order");let E=b&&(_||!o.hasIconData()||v),S=_&&(b||!o.hasTextData()||y);!o.collisionArrays&&p&&o.deserializeCollisionBoxes(p),r&&i&&o.updateCollisionDebugBuffers(this.transform.zoom,p);const T=(t,i,p)=>{if(u){const r={zoom:this.transform.zoom,pitch:this.transform.pitch};let i=null;if(u.dynamicFilterNeedsFeature){const e=this.retainedQueryData[o.bucketInstanceId];i=u.featureIndex.loadFeature({featureIndex:t.featureIndex,bucketIndex:e.bucketIndex,sourceLayerIndex:e.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,u.dynamicFilter)(r,i,this.retainedQueryData[o.bucketInstanceId].tileID.canonical,new e.pointGeometry(t.tileAnchorX,t.tileAnchorY),this.transform.calculateDistanceTileData(u.unwrappedTileID)))return this.placements[t.crossTileID]=new bt(!1,!1,!1,!0),void(n[t.crossTileID]=!0)}if(n[t.crossTileID])return;if(f)return void(this.placements[t.crossTileID]=new bt(!1,!1,!1));let C=!1,T=!1,B=!0,k=!1,M=!1,P=null,I={box:null,offscreen:null,occluded:null},O={box:null,offscreen:null,occluded:null},D=null,z=null,L=null,R=0,F=0,U=0;p.textFeatureIndex?R=p.textFeatureIndex:t.useRuntimeCollisionCircles&&(R=t.featureIndex),p.verticalTextFeatureIndex&&(F=p.verticalTextFeatureIndex);const N=e=>{e.tileID=this.retainedQueryData[o.bucketInstanceId].tileID,(this.transform.elevation||e.elevation)&&(e.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[o.bucketInstanceId].tileID,e.tileAnchorX,e.tileAnchorY):0)},j=p.textBox;if(j){N(j);const n=n=>{let r=e.WritingMode.horizontal;if(o.allowVerticalPlacement&&!n&&this.prevPlacement){const e=this.prevPlacement.placedOrientations[t.crossTileID];e&&(this.placedOrientations[t.crossTileID]=e,r=e,this.markUsedOrientation(o,r,t))}return r},r=(n,r)=>{if(o.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&p.verticalTextBox){for(const t of o.writingModes)if(t===e.WritingMode.vertical?(I=r(),O=I):I=n(),I&&I.box&&I.box.length)break}else I=n()};if(a.get("text-variable-anchor")){let l=a.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[t.crossTileID]){const e=this.prevPlacement.variableOffsets[t.crossTileID];l.indexOf(e.anchor)>0&&(l=l.filter((t=>t!==e.anchor)),l.unshift(e.anchor))}const c=(e,n,r)=>{const a=o.getSymbolInstanceTextSize(d,t,this.transform.zoom,i),c=(e.x2-e.x1)*a+2*e.padding,u=(e.y2-e.y1)*a+2*e.padding,f=w&&!_?n:null;f&&N(f);let p={box:[],offscreen:!1,occluded:!1};const y=b?2*l.length:l.length;for(let n=0;n<y;++n){const y=this.attemptAnchorPlacement(l[n%l.length],e,c,u,a,x,A,h,s,g,n>=l.length,t,i,o,r,f,d,m);if(y&&(p=y.placedGlyphBoxes,p&&p.box&&p.box.length)){C=!0,P=y.shift;break}}return p};r((()=>c(j,p.iconBox,e.WritingMode.horizontal)),(()=>{const n=p.verticalTextBox;return n&&N(n),o.allowVerticalPlacement&&!(I&&I.box&&I.box.length)&&t.numVerticalGlyphVertices>0&&n?c(n,p.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null,occluded:null}})),I&&(C=I.box,B=I.offscreen,k=I.occluded);const u=n(I&&I.box);if(!C&&this.prevPlacement){const e=this.prevPlacement.variableOffsets[t.crossTileID];e&&(this.variableOffsets[t.crossTileID]=e,this.markUsedJustification(o,e.anchor,t,u))}}else{const a=(n,r)=>{const a=o.getSymbolInstanceTextSize(d,t,this.transform.zoom,i),l=this.collisionIndex.placeCollisionBox(a,n,new e.pointGeometry(0,0),b,h,s,g.predicate);return l&&l.box&&l.box.length&&(this.markUsedOrientation(o,r,t),this.placedOrientations[t.crossTileID]=r),l};r((()=>a(j,e.WritingMode.horizontal)),(()=>{const n=p.verticalTextBox;return o.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&n?(N(n),a(n,e.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}})),n(I&&I.box&&I.box.length)}}if(D=I,C=D&&D.box&&D.box.length>0,B=D&&D.offscreen,k=D&&D.occluded,t.useRuntimeCollisionCircles){const n=o.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex),i=e.evaluateSizeForFeature(o.textSizeData,d,n),u=a.get("text-padding");z=this.collisionIndex.placeCollisionCircles(b,n,o.lineVertexArray,o.glyphOffsetArray,i,s,l,c,r,A,g.predicate,t.collisionCircleDiameter*i/e.ONE_EM,u,this.retainedQueryData[o.bucketInstanceId].tileID),C=b||z.circles.length>0&&!z.collisionDetected,B=B&&z.offscreen,k=z.occluded}if(p.iconFeatureIndex&&(U=p.iconFeatureIndex),p.iconBox){const t=t=>{N(t);const n=w&&P?Ct(P.x,P.y,x,A,this.transform.angle):new e.pointGeometry(0,0),r=o.getSymbolInstanceIconSize(m,this.transform.zoom,i);return this.collisionIndex.placeCollisionBox(r,t,n,_,h,s,g.predicate)};O&&O.box&&O.box.length&&p.verticalIconBox?(L=t(p.verticalIconBox),T=L.box.length>0):(L=t(p.iconBox),T=L.box.length>0),B=B&&L.offscreen,M=L.occluded}const V=y||0===t.numHorizontalGlyphVertices&&0===t.numVerticalGlyphVertices,G=v||0===t.numIconVertices;if(V||G?G?V||(T=T&&C):C=T&&C:T=C=T&&C,C&&D&&D.box&&this.collisionIndex.insertCollisionBox(D.box,a.get("text-ignore-placement"),o.bucketInstanceId,O&&O.box&&F?F:R,g.ID),T&&L&&this.collisionIndex.insertCollisionBox(L.box,a.get("icon-ignore-placement"),o.bucketInstanceId,U,g.ID),z&&(C&&this.collisionIndex.insertCollisionCircles(z.circles,a.get("text-ignore-placement"),o.bucketInstanceId,R,g.ID),r)){const e=o.bucketInstanceId;let t=this.collisionCircleArrays[e];void 0===t&&(t=this.collisionCircleArrays[e]=new _t);for(let e=0;e<z.circles.length;e+=4)t.circles.push(z.circles[e+0]),t.circles.push(z.circles[e+1]),t.circles.push(z.circles[e+2]),t.circles.push(z.collisionDetected?1:0)}const q="globe"!==this.transform.projection.name;E=E&&(q||!k),S=S&&(q||!M),this.placements[t.crossTileID]=new bt(C||E,T||S,B||o.justReloaded),n[t.crossTileID]=!0};if(C){const e=o.getSortedSymbolIndexes(this.transform.angle);for(let t=e.length-1;t>=0;--t){const n=e[t];T(o.symbolInstances.get(n),n,o.collisionArrays[n])}}else for(let e=t.symbolInstanceStart;e<t.symbolInstanceEnd;e++)T(o.symbolInstances.get(e),e,o.collisionArrays[e]);if(r&&o.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[o.bucketInstanceId];e.invert(t.invProjMatrix,s),t.viewportMatrix=this.collisionIndex.getViewportMatrix()}o.justReloaded=!1}markUsedJustification(t,n,r,i){let o;o=i===e.WritingMode.vertical?r.verticalPlacedTextSymbolIndex:{left:r.leftJustifiedTextSymbolIndex,center:r.centerJustifiedTextSymbolIndex,right:r.rightJustifiedTextSymbolIndex}[e.getAnchorJustification(n)];const a=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex,r.verticalPlacedTextSymbolIndex];for(const e of a)e>=0&&(t.text.placedSymbolArray.get(e).crossTileID=o>=0&&e!==o?0:r.crossTileID)}markUsedOrientation(t,n,r){const i=n===e.WritingMode.horizontal||n===e.WritingMode.horizontalOnly?n:0,o=n===e.WritingMode.vertical?n:0,a=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex];for(const e of a)t.text.placedSymbolArray.get(e).placedOrientation=i;r.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).placedOrientation=o)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const t=this.prevPlacement;let n=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;const r=t?t.symbolFadeChange(e):1,i=t?t.opacities:{},o=t?t.variableOffsets:{},a=t?t.placedOrientations:{};for(const e in this.placements){const t=this.placements[e],o=i[e];o?(this.opacities[e]=new vt(o,r,t.text,t.icon,null,t.clipped),n=n||t.text!==o.text.placed||t.icon!==o.icon.placed):(this.opacities[e]=new vt(null,r,t.text,t.icon,t.skipFade,t.clipped),n=n||t.text||t.icon)}for(const e in i){const t=i[e];if(!this.opacities[e]){const i=new vt(t,r,!1,!1);i.isHidden()||(this.opacities[e]=i,n=n||t.text.placed||t.icon.placed)}}for(const e in o)this.variableOffsets[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.variableOffsets[e]=o[e]);for(const e in a)this.placedOrientations[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.placedOrientations[e]=a[e]);n?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}updateLayerOpacities(e,t){const n={};for(const r of t){const t=r.getBucket(e);t&&r.latestFeatureIndex&&e.id===t.layerIds[0]&&this.updateBucketOpacities(t,n,r.collisionBoxArray)}}updateBucketOpacities(t,n,r){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const i=t.layers[0].layout,o=!!t.layers[0].dynamicFilter(),a=new vt(null,0,!1,!1,!0),s=i.get("text-allow-overlap"),l=i.get("icon-allow-overlap"),c=i.get("text-variable-anchor"),u="map"===i.get("text-rotation-alignment"),h="map"===i.get("text-pitch-alignment"),f="none"!==i.get("icon-text-fit"),p=new vt(null,0,s&&(l||!t.hasIconData()||i.get("icon-optional")),l&&(s||!t.hasTextData()||i.get("text-optional")),!0);!t.collisionArrays&&r&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(r);const d=(e,t,n)=>{for(let r=0;r<t/4;r++)e.opacityVertexArray.emplaceBack(n)};let m=0;for(let r=0;r<t.symbolInstances.length;r++){const i=t.symbolInstances.get(r),{numHorizontalGlyphVertices:s,numVerticalGlyphVertices:l,crossTileID:g}=i;let y=this.opacities[g];n[g]?y=a:y||(y=p,this.opacities[g]=y),n[g]=!0;const v=s>0||l>0,b=i.numIconVertices>0,_=this.placedOrientations[i.crossTileID],x=_===e.WritingMode.vertical,A=_===e.WritingMode.horizontal||_===e.WritingMode.horizontalOnly;if(!v&&!b||y.isHidden()||m++,v){const e=Dt(y.text);d(t.text,s,x?zt:e),d(t.text,l,A?zt:e);const n=y.text.isHidden();[i.rightJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.leftJustifiedTextSymbolIndex].forEach((e=>{e>=0&&(t.text.placedSymbolArray.get(e).hidden=n||x?1:0)})),i.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(i.verticalPlacedTextSymbolIndex).hidden=n||A?1:0);const r=this.variableOffsets[i.crossTileID];r&&this.markUsedJustification(t,r.anchor,i,_);const o=this.placedOrientations[i.crossTileID];o&&(this.markUsedJustification(t,"left",i,o),this.markUsedOrientation(t,o,i))}if(b){const e=Dt(y.icon);i.placedIconSymbolIndex>=0&&(d(t.icon,i.numIconVertices,x?zt:e),t.icon.placedSymbolArray.get(i.placedIconSymbolIndex).hidden=y.icon.isHidden()),i.verticalPlacedIconSymbolIndex>=0&&(d(t.icon,i.numVerticalIconVertices,A?zt:e),t.icon.placedSymbolArray.get(i.verticalPlacedIconSymbolIndex).hidden=y.icon.isHidden())}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const n=t.collisionArrays[r];if(n){let r=new e.pointGeometry(0,0),i=!0;if(n.textBox||n.verticalTextBox){if(c){const e=this.variableOffsets[g];e?(r=wt(e.anchor,e.width,e.height,e.textOffset,e.textScale),u&&r._rotate(h?this.transform.angle:-this.transform.angle)):i=!1}o&&(i=!y.clipped),n.textBox&&St(t.textCollisionBox.collisionVertexArray,y.text.placed,!i||x,r.x,r.y),n.verticalTextBox&&St(t.textCollisionBox.collisionVertexArray,y.text.placed,!i||A,r.x,r.y)}const a=i&&Boolean(!A&&n.verticalIconBox);n.iconBox&&St(t.iconCollisionBox.collisionVertexArray,y.icon.placed,a,f?r.x:0,f?r.y:0),n.verticalIconBox&&St(t.iconCollisionBox.collisionVertexArray,y.icon.placed,!a,f?r.x:0,f?r.y:0)}}}if(t.fullyClipped=0===m,t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=e.invProjMatrix,t.placementViewportMatrix=e.viewportMatrix,t.collisionCircleArray=e.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}symbolFadeChange(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,t){const n=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*n>e}setStale(){this.stale=!0}}function St(e,t,n,r,i){e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0)}const Tt=Math.pow(2,25),Bt=Math.pow(2,24),kt=Math.pow(2,17),Mt=Math.pow(2,16),Pt=Math.pow(2,9),It=Math.pow(2,8),Ot=Math.pow(2,1);function Dt(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;const t=e.placed?1:0,n=Math.floor(127*e.opacity);return n*Tt+t*Bt+n*kt+t*Mt+n*Pt+t*It+n*Ot+t}const zt=0;class Lt{constructor(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&void 0!==e.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,t,n,r,i){const o=this._bucketParts;for(;this._currentTileIndex<e.length;)if(t.getBucketParts(o,r,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort(((e,t)=>e.sortKey-t.sortKey)));this._currentPartIndex<o.length;){const e=o[this._currentPartIndex];if(t.placeLayerBucketPart(e,this._seenCrossTileIDs,n,0===e.symbolInstanceStart),this._currentPartIndex++,i())return!0}return!1}}class Rt{constructor(e,t,n,r,i,o,a,s){this.placement=new Et(e,i,o,a,s),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1}isDone(){return this._done}continuePlacement(t,n,r){const i=e.exported.now(),o=()=>{const t=e.exported.now()-i;return!this._forceFullPlacement&&t>2};for(;this._currentPlacementIndex>=0;){const e=n[t[this._currentPlacementIndex]],i=this.placement.collisionIndex.transform.zoom;if("symbol"===e.type&&(!e.minzoom||e.minzoom<=i)&&(!e.maxzoom||e.maxzoom>i)){if(this._inProgressLayer||(this._inProgressLayer=new Lt(e)),this._inProgressLayer.continuePlacement(r[e.source],this.placement,this._showCollisionBoxes,e,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const Ft=512/e.EXTENT/2;class Ut{constructor(e,t,n){this.tileID=e,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(let n=0;n<t.length;n++){const r=t.get(n),i=r.key;this.indexedSymbolInstances[i]||(this.indexedSymbolInstances[i]=[]),this.indexedSymbolInstances[i].push({crossTileID:r.crossTileID,coord:this.getScaledCoordinates(r,e)})}}getScaledCoordinates(t,n){const r=Ft/Math.pow(2,n.canonical.z-this.tileID.canonical.z);return{x:Math.floor((n.canonical.x*e.EXTENT+t.tileAnchorX)*r),y:Math.floor((n.canonical.y*e.EXTENT+t.tileAnchorY)*r)}}findMatches(e,t,n){const r=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z);for(let i=0;i<e.length;i++){const o=e.get(i);if(o.crossTileID)continue;const a=this.indexedSymbolInstances[o.key];if(!a)continue;const s=this.getScaledCoordinates(o,t);for(const e of a)if(Math.abs(e.coord.x-s.x)<=r&&Math.abs(e.coord.y-s.y)<=r&&!n[e.crossTileID]){n[e.crossTileID]=!0,o.crossTileID=e.crossTileID;break}}}}class Nt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class jt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const t=Math.round((e-this.lng)/360);if(0!==t)for(const e in this.indexes){const n=this.indexes[e],r={};for(const e in n){const i=n[e];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+t),r[i.tileID.key]=i}this.indexes[e]=r}this.lng=e}addBucket(e,t,n){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let e=0;e<t.symbolInstances.length;e++)t.symbolInstances.get(e).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const r=this.usedCrossTileIDs[e.overscaledZ];for(const n in this.indexes){const i=this.indexes[n];if(Number(n)>e.overscaledZ)for(const n in i){const o=i[n];o.tileID.isChildOf(e)&&o.findMatches(t.symbolInstances,e,r)}else{const o=i[e.scaledTo(Number(n)).key];o&&o.findMatches(t.symbolInstances,e,r)}}for(let e=0;e<t.symbolInstances.length;e++){const i=t.symbolInstances.get(e);i.crossTileID||(i.crossTileID=n.generate(),r[i.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new Ut(e,t.symbolInstances,t.bucketInstanceId),!0}removeBucketCrossTileIDs(e,t){for(const n in t.indexedSymbolInstances)for(const r of t.indexedSymbolInstances[n])delete this.usedCrossTileIDs[e][r.crossTileID]}removeStaleBuckets(e){let t=!1;for(const n in this.indexes){const r=this.indexes[n];for(const i in r)e[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],t=!0)}return t}}class Vt{constructor(){this.layerIndexes={},this.crossTileIDs=new Nt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,t,n,r){let i=this.layerIndexes[e.id];void 0===i&&(i=this.layerIndexes[e.id]=new jt);let o=!1;const a={};"globe"!==r.name&&i.handleWrapJump(n);for(const n of t){const t=n.getBucket(e);t&&e.id===t.layerIds[0]&&(t.bucketInstanceId||(t.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(n.tileID,t,this.crossTileIDs)&&(o=!0),a[t.bucketInstanceId]=!0)}return i.removeStaleBuckets(a)&&(o=!0),o}pruneUnusedLayers(e){const t={};e.forEach((e=>{t[e]=!0}));for(const e in this.layerIndexes)t[e]||delete this.layerIndexes[e]}}const Gt=(t,n)=>e.emitValidationErrors(t,n&&n.filter((e=>"source.canvas"!==e.identifier))),qt=e.pick(Ve,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Wt=e.pick(Ve,["setCenter","setZoom","setBearing","setPitch"]),Ht={version:8,layers:[],sources:{}},$t={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Xt extends e.Evented{constructor(t,n={}){super(),this.map=t,this.dispatcher=new I(Ue(),this),this.imageManager=new _,this.imageManager.setEventedParent(this),this.glyphManager=new e.GlyphManager(t._requestManager,n.localFontFamily?e.LocalGlyphMode.all:n.localIdeographFontFamily?e.LocalGlyphMode.ideographs:e.LocalGlyphMode.none,n.localFontFamily||n.localIdeographFontFamily),this.lineAtlas=new e.LineAtlas(256,512),this.crossTileSymbolIndex=new Vt,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());const r=this;this._rtlTextPluginCallback=Xt.registerForPluginStateChange((t=>{r.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},((t,n)=>{if(e.triggerPluginCompletionEvent(t),n&&n.every((e=>e)))for(const e in r._sourceCaches){const t=r._sourceCaches[e],n=t.getSource().type;"vector"!==n&&"geojson"!==n||t.reload()}}))})),this.on("data",(e=>{if("source"!==e.dataType||"metadata"!==e.sourceDataType)return;const t=this.getSource(e.sourceId);if(t&&t.vectorLayerIds)for(const e in this._layers){const n=this._layers[e];n.source===t.id&&this._validateLayer(n)}}))}loadURL(t,n={}){this.fire(new e.Event("dataloading",{dataType:"style"}));const r="boolean"==typeof n.validate?n.validate:!e.isMapboxURL(t);t=this.map._requestManager.normalizeStyleURL(t,n.accessToken);const i=this.map._requestManager.transformRequest(t,e.ResourceType.Style);this._request=e.getJSON(i,((t,n)=>{this._request=null,t?this.fire(new e.ErrorEvent(t)):n&&this._load(n,r)}))}loadJSON(t,n={}){this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.exported.frame((()=>{this._request=null,this._load(t,!1!==n.validate)}))}loadEmpty(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Ht,!1)}_updateLayerCount(e,t){const n=t?1:-1;e.is3D()&&(this._num3DLayers+=n),"circle"===e.type&&(this._numCircleLayers+=n),"symbol"===e.type&&(this._numSymbolLayers+=n)}_load(t,n){if(n&&Gt(this,e.validateStyle(t)))return;this._loaded=!0,this.stylesheet=t,this._updateMapProjection();for(const e in t.sources)this.addSource(e,t.sources[e],{validate:!1});this._changed=!1,t.sprite?this._loadSprite(t.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(t.glyphs);const r=je(this.stylesheet.layers);this._order=r.map((e=>e.id)),this._layers={},this._serializedLayers={};for(let t of r)t=e.createStyleLayer(t),t.setEventedParent(this,{layer:{id:t.id}}),this._layers[t.id]=t,this._serializedLayers[t.id]=t.serialize(),this._updateLayerCount(t,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new w(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(e){e?this.stylesheet.projection=e:delete this.stylesheet.projection,this.map._explicitProjection||this.map._updateProjection()}_updateMapProjection(){this.map._explicitProjection?this.applyProjectionUpdate():this.map._updateProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_loadSprite(t){this._spriteRequest=function(t,n,r){let i,o,a;const s=e.exported.devicePixelRatio>1?"@2x":"";let l=e.getJSON(n.transformRequest(n.normalizeSpriteURL(t,s,".json"),e.ResourceType.SpriteJSON),((e,t)=>{l=null,a||(a=e,i=t,u())})),c=e.getImage(n.transformRequest(n.normalizeSpriteURL(t,s,".png"),e.ResourceType.SpriteImage),((e,t)=>{c=null,a||(a=e,o=t,u())}));function u(){if(a)r(a);else if(i&&o){const t=e.exported.getImageData(o),n={};for(const r in i){const{width:o,height:a,x:s,y:l,sdf:c,pixelRatio:u,stretchX:h,stretchY:f,content:p}=i[r],d=new e.RGBAImage({width:o,height:a});e.RGBAImage.copy(t,d,{x:s,y:l},{x:0,y:0},{width:o,height:a}),n[r]={data:d,pixelRatio:u,sdf:c,stretchX:h,stretchY:f,content:p}}r(null,n)}}return{cancel(){l&&(l.cancel(),l=null),c&&(c.cancel(),c=null)}}}(t,this.map._requestManager,((t,n)=>{if(this._spriteRequest=null,t)this.fire(new e.ErrorEvent(t));else if(n)for(const e in n)this.imageManager.addImage(e,n[e]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new e.Event("data",{dataType:"style"}))}))}_validateLayer(t){const n=this.getSource(t.source);if(!n)return;const r=t.sourceLayer;r&&("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(r))&&this.fire(new e.ErrorEvent(new Error(`Source layer "${r}" does not exist on source "${n.id}" as specified by style layer "${t.id}"`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const e in this._sourceCaches)if(!this._sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(e){const t=[];for(const n of e){const e=this._layers[n];"custom"!==e.type&&t.push(e.serialize())}return t}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;if(this.fog&&this.fog.hasTransition())return!0;for(const e in this._sourceCaches)if(this._sourceCaches[e].hasTransition())return!0;for(const e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(e){return!!this.terrain&&$t[e.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(t){if(!this._loaded)return;const n=this._changed;if(this._changed){const e=Object.keys(this._updatedLayers),n=Object.keys(this._removedLayers);(e.length||n.length)&&this._updateWorkerLayers(e,n);for(const e in this._updatedSources){const t=this._updatedSources[e];"reload"===t?this._reloadSource(e):"clear"===t&&this._clearSource(e)}this._updateTilesForChangedImages();for(const e in this._updatedPaintProps)this._layers[e].updateTransitions(t);this.light.updateTransitions(t),this.fog&&this.fog.updateTransitions(t),this._resetUpdates()}const r={};for(const e in this._sourceCaches){const t=this._sourceCaches[e];r[e]=t.used,t.used=!1}for(const e of this._order){const n=this._layers[e];if(n.recalculate(t,this._availableImages),!n.isHidden(t.zoom)){const e=this._getLayerSourceCache(n);e&&(e.used=!0)}const r=this.map.painter;if(r){const e=n.getProgramIds();if(!e)continue;const i=n.getProgramConfiguration(t.zoom);for(const t of e)r.useProgram(t,i)}}for(const t in r){const n=this._sourceCaches[t];r[t]!==n.used&&n.getSource().fire(new e.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:n.getSource().id}))}this.light.recalculate(t),this.terrain&&this.terrain.recalculate(t),this.fog&&this.fog.recalculate(t),this.z=t.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),n&&this.fire(new e.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const t in this._sourceCaches)this._sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateWorkerLayers(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(t){if(this._checkLoaded(),Gt(this,e.validateStyle(t)))return!1;(t=e.clone$1(t)).layers=je(t.layers);const n=function(e,t){if(!e)return[{command:Ve.setStyle,args:[t]}];let n=[];try{if(!i(e.version,t.version))return[{command:Ve.setStyle,args:[t]}];i(e.center,t.center)||n.push({command:Ve.setCenter,args:[t.center]}),i(e.zoom,t.zoom)||n.push({command:Ve.setZoom,args:[t.zoom]}),i(e.bearing,t.bearing)||n.push({command:Ve.setBearing,args:[t.bearing]}),i(e.pitch,t.pitch)||n.push({command:Ve.setPitch,args:[t.pitch]}),i(e.sprite,t.sprite)||n.push({command:Ve.setSprite,args:[t.sprite]}),i(e.glyphs,t.glyphs)||n.push({command:Ve.setGlyphs,args:[t.glyphs]}),i(e.transition,t.transition)||n.push({command:Ve.setTransition,args:[t.transition]}),i(e.light,t.light)||n.push({command:Ve.setLight,args:[t.light]}),i(e.fog,t.fog)||n.push({command:Ve.setFog,args:[t.fog]}),i(e.projection,t.projection)||n.push({command:Ve.setProjection,args:[t.projection]});const r={},o=[];!function(e,t,n,r){let o;for(o in t=t||{},e=e||{})e.hasOwnProperty(o)&&(t.hasOwnProperty(o)||qe(o,n,r));for(o in t)t.hasOwnProperty(o)&&(e.hasOwnProperty(o)?i(e[o],t[o])||("geojson"===e[o].type&&"geojson"===t[o].type&&He(e,t,o)?n.push({command:Ve.setGeoJSONSourceData,args:[o,t[o].data]}):We(o,t,n,r)):Ge(o,t,n))}(e.sources,t.sources,o,r);const a=[];e.layers&&e.layers.forEach((e=>{e.source&&r[e.source]?n.push({command:Ve.removeLayer,args:[e.id]}):a.push(e)}));let s=e.terrain;s&&r[s.source]&&(n.push({command:Ve.setTerrain,args:[void 0]}),s=void 0),n=n.concat(o),i(s,t.terrain)||n.push({command:Ve.setTerrain,args:[t.terrain]}),function(e,t,n){t=t||[];const r=(e=e||[]).map(Xe),o=t.map(Xe),a=e.reduce(Ze,{}),s=t.reduce(Ze,{}),l=r.slice(),c=Object.create(null);let u,h,f,p,d,m,g;for(u=0,h=0;u<r.length;u++)f=r[u],s.hasOwnProperty(f)?h++:(n.push({command:Ve.removeLayer,args:[f]}),l.splice(l.indexOf(f,h),1));for(u=0,h=0;u<o.length;u++)f=o[o.length-1-u],l[l.length-1-u]!==f&&(a.hasOwnProperty(f)?(n.push({command:Ve.removeLayer,args:[f]}),l.splice(l.lastIndexOf(f,l.length-h),1)):h++,m=l[l.length-u],n.push({command:Ve.addLayer,args:[s[f],m]}),l.splice(l.length-u,0,f),c[f]=!0);for(u=0;u<o.length;u++)if(f=o[u],p=a[f],d=s[f],!c[f]&&!i(p,d))if(i(p.source,d.source)&&i(p["source-layer"],d["source-layer"])&&i(p.type,d.type)){for(g in $e(p.layout,d.layout,n,f,null,Ve.setLayoutProperty),$e(p.paint,d.paint,n,f,null,Ve.setPaintProperty),i(p.filter,d.filter)||n.push({command:Ve.setFilter,args:[f,d.filter]}),i(p.minzoom,d.minzoom)&&i(p.maxzoom,d.maxzoom)||n.push({command:Ve.setLayerZoomRange,args:[f,d.minzoom,d.maxzoom]}),p)p.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?$e(p[g],d[g],n,f,g.slice(6),Ve.setPaintProperty):i(p[g],d[g])||n.push({command:Ve.setLayerProperty,args:[f,g,d[g]]}));for(g in d)d.hasOwnProperty(g)&&!p.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?$e(p[g],d[g],n,f,g.slice(6),Ve.setPaintProperty):i(p[g],d[g])||n.push({command:Ve.setLayerProperty,args:[f,g,d[g]]}))}else n.push({command:Ve.removeLayer,args:[f]}),m=l[l.lastIndexOf(f)+1],n.push({command:Ve.addLayer,args:[d,m]})}(a,t.layers,n)}catch(e){console.warn("Unable to compute style diff:",e),n=[{command:Ve.setStyle,args:[t]}]}return n}(this.serialize(),t).filter((e=>!(e.command in Wt)));if(0===n.length)return!1;const r=n.filter((e=>!(e.command in qt)));if(r.length>0)throw new Error(`Unimplemented: ${r.map((e=>e.command)).join(", ")}.`);return n.forEach((e=>{"setTransition"!==e.command&&this[e.command].apply(this,e.args)})),this.stylesheet=t,this._updateMapProjection(),!0}addImage(t,n){return this.getImage(t)?this.fire(new e.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(t,n),this._afterImageUpdated(t),this)}updateImage(e,t){this.imageManager.updateImage(e,t)}getImage(e){return this.imageManager.getImage(e)}removeImage(t){return this.getImage(t)?(this.imageManager.removeImage(t),this._afterImageUpdated(t),this):this.fire(new e.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(t,n,r={}){if(this._checkLoaded(),void 0!==this.getSource(t))throw new Error("There is already a source with this ID");if(!n.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(n).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(e.validateSource,`sources.${t}`,n,null,r))return;this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);const i=Me(t,n,this.dispatcher,this);i.setEventedParent(this,(()=>({isSourceLoaded:this._isSourceCacheLoaded(t),source:i.serialize(),sourceId:t})));const o=n=>{const r=(n?"symbol:":"other:")+t,o=this._sourceCaches[r]=new e.SourceCache(r,i,n);(n?this._symbolSourceCaches:this._otherSourceCaches)[t]=o,o.style=this,o.onAdd(this.map)};o(!1),"vector"!==n.type&&"geojson"!==n.type||o(!0),i.onAdd&&i.onAdd(this.map),this._changed=!0}removeSource(t){this._checkLoaded();const n=this.getSource(t);if(!n)throw new Error("There is no source with this ID");for(const n in this._layers)if(this._layers[n].source===t)return this.fire(new e.ErrorEvent(new Error(`Source "${t}" cannot be removed while layer "${n}" is using it.`)));if(this.terrain&&this.terrain.get().source===t)return this.fire(new e.ErrorEvent(new Error(`Source "${t}" cannot be removed while terrain is using it.`)));const r=this._getSourceCaches(t);for(const t of r)delete this._sourceCaches[t.id],delete this._updatedSources[t.id],t.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:t.getSource().id})),t.setEventedParent(null),t.clearTiles();return delete this._otherSourceCaches[t],delete this._symbolSourceCaches[t],n.setEventedParent(null),n.onRemove&&n.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(e,t){this._checkLoaded(),this.getSource(e).setData(t),this._changed=!0}getSource(e){const t=this._getSourceCache(e);return t&&t.getSource()}addLayer(t,n,r={}){this._checkLoaded();const i=t.id;if(this.getLayer(i))return void this.fire(new e.ErrorEvent(new Error(`Layer with id "${i}" already exists on this map`)));let o;if("custom"===t.type){if(Gt(this,e.validateCustomStyleLayer(t)))return;o=e.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(i,t.source),t=e.clone$1(t),t=e.extend(t,{source:i})),this._validate(e.validateLayer,`layers.${i}`,t,{arrayIndex:-1},r))return;o=e.createStyleLayer(t),this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}}),this._serializedLayers[o.id]=o.serialize(),this._updateLayerCount(o,!0)}const a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)return void this.fire(new e.ErrorEvent(new Error(`Layer with id "${n}" does not exist on this map.`)));this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o;const s=this._getLayerSourceCache(o);if(this._removedLayers[i]&&o.source&&s&&"custom"!==o.type){const e=this._removedLayers[i];delete this._removedLayers[i],e.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",s.pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(t,n){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===n)return;const r=this._order.indexOf(t);this._order.splice(r,1);const i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new e.ErrorEvent(new Error(`Layer with id "${n}" does not exist on this map.`))):(this._order.splice(i,0,t),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(t){this._checkLoaded();const n=this._layers[t];if(!n)return void this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be removed.`)));n.setEventedParent(null),this._updateLayerCount(n,!1);const r=this._order.indexOf(t);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=n,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],n.onRemove&&n.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(e){return this._layers[e]}hasLayer(e){return e in this._layers}hasLayerType(e){for(const t in this._layers)if(this._layers[t].type===e)return!0;return!1}setLayerZoomRange(t,n,r){this._checkLoaded();const i=this.getLayer(t);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(t,n,r={}){this._checkLoaded();const o=this.getLayer(t);if(o){if(!i(o.filter,n))return null==n?(o.filter=void 0,void this._updateLayer(o)):void(this._validate(e.validateFilter,`layers.${o.id}.filter`,n,{layerType:o.type},r)||(o.filter=e.clone$1(n),this._updateLayer(o)))}else this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be filtered.`)))}getFilter(t){const n=this.getLayer(t);return n&&e.clone$1(n.filter)}setLayoutProperty(t,n,r,o={}){this._checkLoaded();const a=this.getLayer(t);a?i(a.getLayoutProperty(n),r)||(a.setLayoutProperty(n,r,o),this._updateLayer(a)):this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(t,n){const r=this.getLayer(t);if(r)return r.getLayoutProperty(n);this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style.`)))}setPaintProperty(t,n,r,o={}){this._checkLoaded();const a=this.getLayer(t);a?i(a.getPaintProperty(n),r)||(a.setPaintProperty(n,r,o)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(e,t){const n=this.getLayer(e);return n&&n.getPaintProperty(t)}setFeatureState(t,n){this._checkLoaded();const r=t.source,i=t.sourceLayer,o=this.getSource(r);if(!o)return void this.fire(new e.ErrorEvent(new Error(`The source '${r}' does not exist in the map's style.`)));const a=o.type;if("geojson"===a&&i)return void this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===a&&!i)return void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided.")));const s=this._getSourceCaches(r);for(const e of s)e.setFeatureState(i,t.id,n)}removeFeatureState(t,n){this._checkLoaded();const r=t.source,i=this.getSource(r);if(!i)return void this.fire(new e.ErrorEvent(new Error(`The source '${r}' does not exist in the map's style.`)));const o=i.type,a="vector"===o?t.sourceLayer:void 0;if("vector"===o&&!a)return void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(n&&"string"!=typeof t.id&&"number"!=typeof t.id)return void this.fire(new e.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const s=this._getSourceCaches(r);for(const e of s)e.removeFeatureState(a,t.id,n)}getFeatureState(t){this._checkLoaded();const n=t.source,r=t.sourceLayer,i=this.getSource(n);if(i){if("vector"!==i.type||r)return void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(n)[0].getFeatureState(r,t.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error(`The source '${n}' does not exist in the map's style.`)))}getTransition(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const t={};for(const e in this._sourceCaches){const n=this._sourceCaches[e].getSource();t[n.id]||(t[n.id]=n.serialize())}return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:t,layers:this._serializeLayers(this._order)},(e=>void 0!==e))}_updateLayer(e){this._updatedLayers[e.id]=!0;const t=this._getLayerSourceCache(e);e.source&&!this._updatedSources[e.source]&&t&&"raster"!==t.getSource().type&&(this._updatedSources[e.source]="reload",t.pause()),this._changed=!0,e.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(e){const t=e=>"fill-extrusion"===this._layers[e].type,n={},r=[];for(let i=this._order.length-1;i>=0;i--){const o=this._order[i];if(t(o)){n[o]=i;for(const t of e){const e=t[o];if(e)for(const t of e)r.push(t)}}}r.sort(((e,t)=>t.intersectionZ-e.intersectionZ));const i=[];for(let o=this._order.length-1;o>=0;o--){const a=this._order[o];if(t(a))for(let e=r.length-1;e>=0;e--){const t=r[e].feature;if(n[t.layer.id]<o)break;i.push(t),r.pop()}else for(const t of e){const e=t[a];if(e)for(const t of e)i.push(t.feature)}}return i}queryRenderedFeatures(t,n,r){n&&n.filter&&this._validate(e.validateFilter,"queryRenderedFeatures.filter",n.filter,null,n);const i={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const t of n.layers){const n=this._layers[t];if(!n)return this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be queried for features.`))),[];i[n.source]=!0}}const o=[];n.availableImages=this._availableImages;const a=n&&n.layers?n.layers.some((e=>{const t=this.getLayer(e);return t&&t.is3D()})):this.has3DLayers(),s=D.createFromScreenPoints(t,r);for(const e in this._sourceCaches){const t=this._sourceCaches[e].getSource().id;n.layers&&!i[t]||o.push(Ie(this._sourceCaches[e],this._layers,this._serializedLayers,s,n,r,a,!!this.map._showQueryGeometry))}return this.placement&&o.push(function(e,t,n,r,i,o,a){const s={},l=o.queryRenderedSymbols(r),c=[];for(const e of Object.keys(l).map(Number))c.push(a[e]);c.sort(De);for(const n of c){const r=n.featureIndex.lookupSymbolFeatures(l[n.bucketInstanceId],t,n.bucketIndex,n.sourceLayerIndex,i.filter,i.layers,i.availableImages,e);for(const e in r){const t=s[e]=s[e]||[],i=r[e];i.sort(((e,t)=>{const r=n.featureSortOrder;if(r){const n=r.indexOf(e.featureIndex);return r.indexOf(t.featureIndex)-n}return t.featureIndex-e.featureIndex}));for(const e of i)t.push(e)}}for(const t in s)s[t].forEach((r=>{const i=r.feature,o=n(e[t]).getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=o}));return s}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),s.screenGeometry,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(o)}querySourceFeatures(t,n){n&&n.filter&&this._validate(e.validateFilter,"querySourceFeatures.filter",n.filter,null,n);const r=this._getSourceCaches(t);let i=[];for(const e of r)i=i.concat(Oe(e,n));return i}addSourceType(e,t,n){return Xt.getSourceType(e)?n(new Error(`A source type called "${e}" already exists.`)):(Xt.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},n):n(null,null))}getLight(){return this.light.getLight()}setLight(t,n={}){this._checkLoaded();const r=this.light.getLight();let o=!1;for(const e in t)if(!i(t[e],r[e])){o=!0;break}if(!o)return;const a={now:e.exported.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,n),this.light.updateTransitions(a)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(t,n=1){if(this._checkLoaded(),!t)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if(1===n){if("object"==typeof t.source){const n="terrain-dem-src";this.addSource(n,t.source),t=e.clone$1(t),t=e.extend(t,{source:n})}if(this._validate(e.validateTerrain,"terrain",t))return}if(!this.terrain||this.terrain&&n!==this.terrain.drapeRenderMode)this._createTerrain(t,n);else{const n=this.terrain,r=n.get();for(const o in t)if(!i(t[o],r[o])){n.set(t),this.stylesheet.terrain=t;const r={now:e.exported.now(),transition:e.extend({duration:0},this.stylesheet.transition)};n.updateTransitions(r);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(t){const n=this.fog=new P(t,this.map.transform);this.stylesheet.fog=t;const r={now:e.exported.now(),transition:e.extend({duration:0},this.stylesheet.transition)};n.updateTransitions(r)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask((()=>{for(const e of this.map._markers)e._evaluateOpacity()}))}getFog(){return this.fog?this.fog.get():null}setFog(t){if(this._checkLoaded(),!t)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const n=this.fog,r=n.get();for(const o in t)if(!i(t[o],r[o])){n.set(t),this.stylesheet.fog=t;const r={now:e.exported.now(),transition:e.extend({duration:0},this.stylesheet.transition)};n.updateTransitions(r);break}}else this._createFog(t);this._markersNeedUpdate=!0}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const e=this._order.filter((e=>this.isLayerDraped(this._layers[e]))),t=this._order.filter((e=>!this.isLayerDraped(this._layers[e])));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...e),this._drapedFirstOrder.push(...t)}_createTerrain(t,n){const r=this.terrain=new S(t,n);this.stylesheet.terrain=t,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const i={now:e.exported.now(),transition:e.extend({duration:0},this.stylesheet.transition)};r.updateTransitions(i)}_force3DLayerUpdate(){for(const e in this._layers){const t=this._layers[e];"fill-extrusion"===t.type&&this._updateLayer(t)}}_forceSymbolLayerUpdate(){for(const e in this._layers){const t=this._layers[e];"symbol"===t.type&&this._updateLayer(t)}}_validate(t,n,r,i,o={}){return(!o||!1!==o.validate)&&Gt(this,t.call(e.validateStyle,e.extend({key:n,style:this.serialize(),value:r,styleSpec:e.spec},i)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const e in this._layers)this._layers[e].setEventedParent(null);for(const e in this._sourceCaches)this._sourceCaches[e].clearTiles(),this._sourceCaches[e].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(e){const t=this._getSourceCaches(e);for(const e of t)e.clearTiles()}_reloadSource(e){const t=this._getSourceCaches(e);for(const e of t)e.resume(),e.reload()}_updateSources(e){for(const t in this._sourceCaches)this._sourceCaches[t].update(e)}_generateCollisionBoxes(){for(const e in this._sourceCaches){const t=this._sourceCaches[e];t.resume(),t.reload()}}_updatePlacement(t,n,r,i,o=!1){let a=!1,s=!1;const l={};for(const e of this._order){const n=this._layers[e];if("symbol"!==n.type)continue;if(!l[n.source]){const e=this._getLayerSourceCache(n);if(!e)continue;l[n.source]=e.getRenderableIds(!0).map((t=>e.getTileByID(t))).sort(((e,t)=>t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)))}const r=this.crossTileSymbolIndex.addLayer(n,l[n.source],t.center.lng,t.projection);a=a||r}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),o=o||this._layerOrderChanged||0===r,this._layerOrderChanged&&this.fire(new e.Event("neworder")),(o||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.exported.now(),t.zoom))&&(this.pauseablePlacement=new Rt(t,this._order,o,n,r,i,this.placement,this.fog&&t.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.exported.now()),s=!0),a&&this.pauseablePlacement.placement.setStale()),s||a)for(const e of this._order){const t=this._layers[e];"symbol"===t.type&&this.placement.updateLayerOpacities(t,l[t.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.exported.now())}_releaseSymbolFadeTiles(){for(const e in this._sourceCaches)this._sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,t,n){this.imageManager.getImages(t.icons,n),this._updateTilesForChangedImages();const r=e=>{e&&e.setDependencies(t.tileID.key,t.type,t.icons)};r(this._otherSourceCaches[t.source]),r(this._symbolSourceCaches[t.source])}getGlyphs(e,t,n){this.glyphManager.getGlyphs(t.stacks,n)}getResource(t,n,r){return e.makeRequest(n,r)}_getSourceCache(e){return this._otherSourceCaches[e]}_getLayerSourceCache(e){return"symbol"===e.type?this._symbolSourceCaches[e.source]:this._otherSourceCaches[e.source]}_getSourceCaches(e){const t=[];return this._otherSourceCaches[e]&&t.push(this._otherSourceCaches[e]),this._symbolSourceCaches[e]&&t.push(this._symbolSourceCaches[e]),t}_isSourceCacheLoaded(t){const n=this._getSourceCaches(t);return 0===n.length?(this.fire(new e.ErrorEvent(new Error(`There is no source with ID '${t}'`))),!1):n.every((e=>e.loaded()))}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Xt.getSourceType=function(e){return ke[e]},Xt.setSourceType=function(e,t){ke[e]=t},Xt.registerForPluginStateChange=e.registerForPluginStateChange;var Zt="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0\n#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}\n#endif",Yt="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}";let Kt={},Jt={};Kt=nn("","\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {return currentElevation(apos);}\n#endif\nfloat unpack_depth(vec4 rgba_depth)\n{const vec4 bit_shift=vec4(1.0/(256.0*256.0*256.0),1.0/(256.0*256.0),1.0/256.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",!0),Jt=nn("#ifdef FOG\nuniform float u_fog_temporal_offset;float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif","#ifdef FOG\nuniform mat4 u_fog_matrix;vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",!0);const Qt=nn("\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}\n#ifdef TERRAIN\nhighp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(256.0*256.0*256.0,256.0*256.0,256.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/256.0,1.0/256.0,1.0/256.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}\n#endif","\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),en=Zt;var tn={background:nn("uniform vec4 u_color;uniform float u_opacity;void main() {vec4 out_color=u_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:nn("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_mix);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:nn("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;attribute float a_scale;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);\n#ifdef PROJECTION_GLOBE_VIEW\nvec2 scaled_extrude=extrude*a_scale;vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=scaled_extrude.x*surface_vectors[0]+scaled_extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);vec4 world_center=vec4(pos,1);\n#else \nmat3 surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\n#if defined(SCALE_WITH_MAP) && defined(PROJECTION_GLOBE_VIEW)\nview_scale*=a_scale;\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nvec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:nn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:nn("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\ngl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;attribute float a_scale;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);\n#ifdef PROJECTION_GLOBE_VIEW\nextrude*=a_scale;vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\nvec3 pos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:nn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:nn("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:nn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:nn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:nn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:nn("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:nn("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:nn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:nn("varying vec4 v_color;void main() {vec4 color=v_color;\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 pos=vec3(pos_nx.xy,h);\n#else\nvec3 pos=vec3(pos_nx.xy,t > 0.0 ? height : base);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(pos.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.rgb+=clamp(color.rgb*directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:nn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);out_color=out_color*v_lighting;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 p=vec3(pos_nx.xy,h);\n#else\nvec3 p=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:nn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos);float f=getElevation(v_pos+vec2(epsilon.x,0));float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float h=getElevation(v_pos+vec2(0,epsilon.y));float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:nn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:nn("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;uniform float u_mix;uniform vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;varying highp vec2 v_uv;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash_from\n#pragma mapbox: initialize lowp vec4 dash_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist_a=texture2D(u_dash_image,v_tex_a).a;float sdfdist_b=texture2D(u_dash_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfwidth=min(dash_from.z*u_scale.y,dash_to.z*u_scale.z);float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/sdfwidth;alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\n#ifdef RENDER_LINE_GRADIENT\nvec4 out_color=texture2D(u_gradient_image,v_uv);\n#else\nvec4 out_color=color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#ifdef RENDER_LINE_GRADIENT\nattribute vec3 a_packed;\n#else\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform mediump vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;varying highp vec2 v_uv;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash_from\n#pragma mapbox: initialize lowp vec4 dash_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];float a_linesofar=a_packed[2];highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);\n#endif\n#ifdef RENDER_LINE_DASH\nfloat tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;float scaleA=dash_from.z==0.0 ? 0.0 : tileZoomRatio/(dash_from.z*fromScale);float scaleB=dash_to.z==0.0 ? 0.0 : tileZoomRatio/(dash_to.z*toScale);float heightA=dash_from.y;float heightB=dash_to.y;v_tex_a=vec2(a_linesofar*scaleA/floorwidth,(-normal.y*heightA+dash_from.x+0.5)/u_texsize.y);v_tex_b=vec2(a_linesofar*scaleB/floorwidth,(-normal.y*heightB+dash_to.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:nn("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:nn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:nn("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_z_tile_anchor;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float anchor_z=a_z_tile_anchor.x;vec2 tile_anchor=a_z_tile_anchor.yz;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(vec3(a_pos,anchor_z)+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nvec3 world_pos=vec3(a_pos,anchor_z)+h;float globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point=u_matrix*vec4(a_pos+vec2(1,0),anchor_z,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(vec3(a_projected_pos.xy,anchor_z),mercator_pos,u_zoom_transition);\n#else\nvec3 proj_pos=vec3(a_projected_pos.xy,anchor_z);\n#endif\n#ifdef PROJECTED_POS_ON_VIEWPORT\nvec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xy,0.0,1.0);\n#else\nvec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xyz+h,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:nn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_z_tile_anchor;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float anchor_z=a_z_tile_anchor.x;vec2 tile_anchor=a_z_tile_anchor.yz;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(vec3(a_pos,anchor_z)+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nvec3 world_pos=vec3(a_pos,anchor_z)+h;float globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point=u_matrix*vec4(a_pos+vec2(1,0),anchor_z,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(vec3(a_projected_pos.xy,anchor_z),mercator_pos,u_zoom_transition);\n#else\nvec3 proj_pos=vec3(a_projected_pos.xy,anchor_z);\n#endif\n#ifdef PROJECTED_POS_ON_VIEWPORT\nvec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xy,0.0,1.0);\n#else\nvec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xyz+h,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:nn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_z_tile_anchor;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float anchor_z=a_z_tile_anchor.x;vec2 tile_anchor=a_z_tile_anchor.yz;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(vec3(a_pos,anchor_z)+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nvec3 world_pos=vec3(a_pos,anchor_z)+h;float globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),anchor_z,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(vec3(a_projected_pos.xy,anchor_z),mercator_pos,u_zoom_transition);\n#else\nvec3 proj_pos=vec3(a_projected_pos.xy,anchor_z);\n#endif\n#ifdef PROJECTED_POS_ON_VIEWPORT\nvec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xy,0.0,1.0);\n#else\nvec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xyz+h,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:nn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef FOG\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\nconst float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=u_skirt_height*u_skirt_height*wireframeOffset;\n#endif\nvec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n}"),terrainDepth:nn("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:nn("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Yt),skyboxGradient:nn("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Yt),skyboxCapture:nn("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:nn("uniform sampler2D u_image0;varying vec2 v_pos0;void main() {gl_FragColor=texture2D(u_image0,v_pos0);\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_merc_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 merc_pos=a_merc_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idy=u_grid_matrix[1][2];float S=u_grid_matrix[2][2];vec3 latLng=u_grid_matrix*vec3(a_pos,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=a_pos[0]*S;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;uv=uv*EXTENT;vec4 up_vector=vec4(elevationVector(uv),1.0);float height=elevation(uv);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nvec4 globe=u_globe_matrix*vec4(globe_pos+up_vector.xyz*height,1.0);vec4 mercator=vec4(0.0);if (u_zoom_transition > 0.0) {mercator=vec4(merc_pos,height,1.0);mercator.xy-=u_merc_center;mercator.x=wrap(mercator.x,-0.5,0.5);mercator=u_merc_matrix*mercator;}vec3 position=mix(globe.xyz,mercator.xyz,u_zoom_transition);gl_Position=u_proj_matrix*vec4(position,1.0);}"),globeAtmosphere:nn("uniform float u_opacity;uniform highp float u_fadeout_range;uniform vec3 u_start_color;uniform vec3 u_end_color;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;varying highp vec3 v_ray_dir;void main() {highp vec3 dir=normalize(v_ray_dir);highp vec3 closest_point=abs(dot(u_globe_pos,dir))*dir;float norm_dist_from_center=length(closest_point-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 1.0)\ndiscard;float t=clamp(1.0-sqrt(norm_dist_from_center-1.0)/u_fadeout_range,0.0,1.0);vec3 color=mix(u_start_color,u_end_color,1.0-t);gl_FragColor=vec4(color*t*u_opacity,u_opacity);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;varying highp vec3 v_ray_dir;void main() {v_ray_dir=mix(mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);gl_Position=vec4(a_pos,1.0);}")};function nn(e,t,n){const r=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,i=/uniform (highp |mediump |lowp )?([\w]+) ([\w]+)([\s]*)([\w]*)/g,o=t.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),a=e.match(i),s=t.match(i),l=Zt.match(i);let c=s?s.concat(a):a;n||(Kt.staticUniforms&&(c=Kt.staticUniforms.concat(c)),Jt.staticUniforms&&(c=Jt.staticUniforms.concat(c))),c&&(c=c.concat(l));const u={};return{fragmentSource:e=e.replace(r,((e,t,n,r,i)=>(u[i]=!0,"define"===t?`\n#ifndef HAS_UNIFORM_u_${i}\nvarying ${n} ${r} ${i};\n#else\nuniform ${n} ${r} u_${i};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${i}\n    ${n} ${r} ${i} = u_${i};\n#endif\n`))),vertexSource:t=t.replace(r,((e,t,n,r,i)=>{const o="float"===r?"vec2":"vec4",a=i.match(/color/)?"color":o;return u[i]?"define"===t?`\n#ifndef HAS_UNIFORM_u_${i}\nuniform lowp float u_${i}_t;\nattribute ${n} ${o} a_${i};\nvarying ${n} ${r} ${i};\n#else\nuniform ${n} ${r} u_${i};\n#endif\n`:"vec4"===a?`\n#ifndef HAS_UNIFORM_u_${i}\n    ${i} = a_${i};\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${i}\n    ${i} = unpack_mix_${a}(a_${i}, u_${i}_t);\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`:"define"===t?`\n#ifndef HAS_UNIFORM_u_${i}\nuniform lowp float u_${i}_t;\nattribute ${n} ${o} a_${i};\n#else\nuniform ${n} ${r} u_${i};\n#endif\n`:"vec4"===a?`\n#ifndef HAS_UNIFORM_u_${i}\n    ${n} ${r} ${i} = a_${i};\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${i}\n    ${n} ${r} ${i} = unpack_mix_${a}(a_${i}, u_${i}_t);\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`})),staticAttributes:o,staticUniforms:c}}class rn{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(e,t,n,r,i,o,a,s){this.context=e;let l=this.boundPaintVertexBuffers.length!==r.length;for(let e=0;!l&&e<r.length;e++)this.boundPaintVertexBuffers[e]!==r[e]&&(l=!0);e.extVertexArrayObject&&this.vao&&this.boundProgram===t&&this.boundLayoutVertexBuffer===n&&!l&&this.boundIndexBuffer===i&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===a&&this.boundDynamicVertexBuffer2===s?(e.bindVertexArrayOES.set(this.vao),a&&a.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind()):this.freshBind(t,n,r,i,o,a,s)}freshBind(e,t,n,r,i,o,a){let s;const l=e.numAttributes,c=this.context,u=c.gl;if(c.extVertexArrayObject)this.vao&&this.destroy(),this.vao=c.extVertexArrayObject.createVertexArrayOES(),c.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=c.currentNumAttributes||0;for(let e=l;e<s;e++)u.disableVertexAttribArray(e)}t.enableAttributes(u,e);for(const t of n)t.enableAttributes(u,e);o&&o.enableAttributes(u,e),a&&a.enableAttributes(u,e),t.bind(),t.setVertexAttribPointers(u,e,i);for(const t of n)t.bind(),t.setVertexAttribPointers(u,e,i);o&&(o.bind(),o.setVertexAttribPointers(u,e,i)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(u,e,i)),c.currentNumAttributes=l}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function on(t,n){const r=Math.pow(2,n.canonical.z),i=n.canonical.y;return[new e.MercatorCoordinate(0,i/r).toLngLat().lat,new e.MercatorCoordinate(0,(i+1)/r).toLngLat().lat]}function an(t,n,r,i,o,a,s){const l=t.context,c=l.gl,u=r.fbo;if(!u)return;t.prepareDrawTile();const h=t.useProgram("hillshade");l.activeTexture.set(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,u.colorAttachment.get());const f=((e,t,n,r)=>{const i=n.paint.get("hillshade-shadow-color"),o=n.paint.get("hillshade-highlight-color"),a=n.paint.get("hillshade-accent-color");let s=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);const l=!e.options.moving;return{u_matrix:r||e.transform.calculateProjMatrix(t.tileID.toUnwrapped(),l),u_image:0,u_latrange:on(0,t.tileID),u_light:[n.paint.get("hillshade-exaggeration"),s],u_shadow:i,u_highlight:o,u_accent:a}})(t,r,i,t.terrain?n.projMatrix:null);t.prepareDrawProgram(l,h,n.toUnwrapped());const{tileBoundsBuffer:p,tileBoundsIndexBuffer:d,tileBoundsSegments:m}=t.getTileBoundsBuffers(r);h.draw(l,c.TRIANGLES,o,a,s,e.CullFaceMode.disabled,f,i.id,p,d,m)}function sn(t,n,r){if(!n.needsDEMTextureUpload)return;const i=t.context,o=i.gl;i.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||t.getTileTexture(r.stride);const a=r.getPixels();n.demTexture?n.demTexture.update(a,{premultiply:!1}):n.demTexture=new e.Texture(i,a,o.RGBA,{premultiply:!1}),n.needsDEMTextureUpload=!1}function ln(t,n,r,i,o,a){const s=t.context,l=s.gl;if(!n.dem)return;const c=n.dem;if(s.activeTexture.set(l.TEXTURE1),sn(t,n,c),!n.demTexture)return;n.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);const u=c.dim;s.activeTexture.set(l.TEXTURE0);let h=n.fbo;if(!h){const t=new e.Texture(s,{width:u,height:u,data:null},l.RGBA);t.bind(l.LINEAR,l.CLAMP_TO_EDGE),h=n.fbo=s.createFramebuffer(u,u,!0),h.colorAttachment.set(t.texture)}s.bindFramebuffer.set(h.framebuffer),s.viewport.set([0,0,u,u]);const{tileBoundsBuffer:f,tileBoundsIndexBuffer:p,tileBoundsSegments:d}=t.getMercatorTileBoundsBuffers();t.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,i,o,a,e.CullFaceMode.disabled,((t,n)=>{const r=n.stride,i=e.create();return e.ortho(i,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(i,i,[0,-e.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[r,r],u_zoom:t.overscaledZ,u_unpack:n.unpackVector}})(n.tileID,c),r.id,f,p,d),n.needsHillshadePrepare=!1}const cn=(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image0:new e.Uniform1i(t,n.u_image0),u_skirt_height:new e.Uniform1f(t,n.u_skirt_height)}),un=(e,t)=>({u_matrix:e,u_image0:0,u_skirt_height:t}),hn=(e,t,n,r,i,o)=>({u_proj_matrix:Float32Array.from(e),u_globe_matrix:t,u_merc_matrix:n,u_zoom_transition:r,u_merc_center:i,u_image0:0,u_grid_matrix:o?Float32Array.from(o):new Float32Array(9)});function fn(e,t){return null!=e&&null!=t&&!(!e.hasData()||!t.hasData())&&null!=e.demTexture&&null!=t.demTexture&&e.tileID.key!==t.tileID.key}const pn=new class{constructor(){this.operations={}}newMorphing(e,t,n,r,i){if(e in this.operations){const t=this.operations[e];t.to.tileID.key!==n.tileID.key&&(t.queued=n)}else this.operations[e]={startTime:r,phase:0,duration:i,from:t,to:n,queued:null}}getMorphValuesForProxy(e){if(!(e in this.operations))return null;const t=this.operations[e];return{from:t.from,to:t.to,phase:t.phase}}update(e){for(const t in this.operations){const n=this.operations[t];for(n.phase=(e-n.startTime)/n.duration;n.phase>=1||!this._validOp(n);)if(!this._nextOp(n,e)){delete this.operations[t];break}}}_nextOp(e,t){return!!e.queued&&(e.from=e.to,e.to=e.queued,e.queued=null,e.phase=0,e.startTime=t,!0)}_validOp(e){return e.from.hasData()&&e.to.hasData()}},dn={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function mn(e,t){const n=1<<e.z;return!t&&(0===e.x||e.x===n-1)||0===e.y||e.y===n-1}const gn=e=>({u_matrix:e});function yn(t,n,r,i,o){if(o>0){const a=e.exported.now(),s=(a-t.timeAdded)/o,l=n?(a-n.timeAdded)/o:-1,c=r.getSource(),u=i.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),h=!n||Math.abs(n.tileID.overscaledZ-u)>Math.abs(t.tileID.overscaledZ-u),f=h&&t.refreshedUponExpiration?1:e.clamp(h?s:1-l,0,1);return t.refreshedUponExpiration&&s>=1&&(t.refreshedUponExpiration=!1),n?{opacity:1,mix:1-f}:{opacity:f,mix:0}}return{opacity:1,mix:0}}const vn=2*e.mercatorZfromAltitude(1,0)*e.GLOBE_RADIUS*Math.PI;class bn extends e.SourceCache{constructor(e){const t={type:"raster-dem",maxzoom:e.transform.maxZoom},n=new I(Ue(),null),r=Me("mock-dem",t,n,e.style);super("mock-dem",r,!1),r.setEventedParent(this),this._sourceLoaded=!0}_loadTile(e,t){e.state="loaded",t(null)}}class _n extends e.SourceCache{constructor(e){const t=Me("proxy",{type:"geojson",maxzoom:e.transform.maxZoom},new I(Ue(),null),e.style);super("proxy",t,!1),t.setEventedParent(this),this.map=this.getSource().map=e,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(t,n,r){if(t.freezeTileCoverage)return;this.transform=t;const i=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce(((n,r)=>{if(n[r.key]="",!this._tiles[r.key]){const n=new e.Tile(r,this._source.tileSize*r.overscaleFactor(),t.tileZoom);n.state="loaded",this._tiles[r.key]=n}return n}),{});for(const e in this._tiles)e in i||(this.freeFBO(e),this._tiles[e].unloadVectorData(),delete this._tiles[e])}freeFBO(e){const t=this.proxyCachedFBO[e];if(void 0!==t){const n=Object.values(t);this.renderCachePool.push(...n),delete this.proxyCachedFBO[e]}}deallocRenderCache(){this.renderCache.forEach((e=>e.fb.destroy())),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class xn extends e.OverscaledTileID{constructor(e,t,n){super(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y),this.proxyTileKey=t,this.projMatrix=n}}class An extends e.Elevation{constructor(t,n){super(),this.painter=t,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[r,i,o]=function(t){const n=new e.StructArrayLayout4i8,r=new e.StructArrayLayout3ui6,i=131;n.reserve(17161),r.reserve(33800);const o=e.EXTENT/128,a=e.EXTENT+o/2,s=a+o;for(let t=-o;t<s;t+=o)for(let r=-o;r<s;r+=o){const i=r<0||r>a||t<0||t>a?24575:0,o=e.clamp(Math.round(r),0,e.EXTENT),s=e.clamp(Math.round(t),0,e.EXTENT);n.emplaceBack(o+i,s,o,s)}const l=(e,t)=>{const n=t*i+e;r.emplaceBack(n+1,n,n+i),r.emplaceBack(n+i,n+i+1,n+1)};for(let e=1;e<129;e++)for(let t=1;t<129;t++)l(t,e);return[0,129].forEach((e=>{for(let t=0;t<130;t++)l(t,e),l(e,t)})),[n,r,32768]}(),a=t.context;this.gridBuffer=a.createVertexBuffer(r,e.boundsAttributes.members),this.gridIndexBuffer=a.createIndexBuffer(i),this.gridSegments=e.SegmentVector.simpleSegment(0,0,r.length,i.length),this.gridNoSkirtSegments=e.SegmentVector.simpleSegment(0,0,r.length,o),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new _n(n.map),this.orthoMatrix=e.create(),e.ortho(this.orthoMatrix,0,e.EXTENT,0,e.EXTENT,0,1);const s=a.gl;this._overlapStencilMode=new e.StencilMode({func:s.GEQUAL,mask:255},0,255,s.KEEP,s.KEEP,s.REPLACE),this._previousZoom=t.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=n,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new bn(n.map)}set style(e){e.on("data",this._onStyleDataEvent.bind(this)),e.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=e,this._checkRenderCacheEfficiency()}update(t,n,r){if(t&&t.terrain){this._style!==t&&(this.style=t),this.enabled=!0;const i=t.terrain.properties;this.sourceCache=0===t.terrain.drapeRenderMode?this._mockSourceCache:t._getSourceCache(i.get("source")),this._exaggeration=i.get("exaggeration");const o=()=>{this.sourceCache.used&&e.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const t=this.getScaledDemTileSize();this.sourceCache.update(n,t,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,o(),this._initializing=!0),o(),n.updateElevation(!r),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(n),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(e){this._findCoveringTileCache[e]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const t=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==t.efficiency&&e.warnOnce(`Terrain render cache efficiency is not optimal (${t.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${t.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(e){e.coord&&"source"===e.dataType?this._clearRenderCacheForTile(e.sourceCacheId,e.coord):"style"===e.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const e in this._style._sourceCaches)this._style._sourceCaches[e].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach((e=>e.fb.destroy())),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const e=2*this.proxySourceCache.getSource().tileSize;return[e,e]}set useVertexMorphing(e){this._useVertexMorphing=e}updateTileBinding(t){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const n=this.proxySourceCache,r=this.painter.transform;this._initializing&&(this._initializing=0===r._centerAltitude&&-1===this.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(r.center),-1),this._emptyDEMTextureDirty=!this._initializing);const i=this.proxyCoords=n.getIds().map((e=>{const t=n.getTileByID(e).tileID;return t.projMatrix=r.calculateProjMatrix(t.toUnwrapped()),t}));!function(t,n){const r=n.transform.pointCoordinate(n.transform.getCameraPoint()),i=new e.pointGeometry(r.x,r.y);t.sort(((t,n)=>{if(n.overscaledZ-t.overscaledZ)return n.overscaledZ-t.overscaledZ;const r=new e.pointGeometry(t.canonical.x+(1<<t.canonical.z)*t.wrap,t.canonical.y),o=new e.pointGeometry(n.canonical.x+(1<<n.canonical.z)*n.wrap,n.canonical.y),a=i.mult(1<<t.canonical.z);return a.x-=.5,a.y-=.5,a.distSqr(r)-a.distSqr(o)}))}(i,this.painter),this._previousZoom=r.zoom;const o=this.proxyToSource||{};this.proxyToSource={},i.forEach((e=>{this.proxyToSource[e.key]={}})),this.terrainTileForTile={};const a=this._style._sourceCaches;for(const e in a){const n=a[e];if(!n.used)continue;if(n!==this.sourceCache&&this.resetTileLookupCache(n.id),this._setupProxiedCoordsForOrtho(n,t[e],o),n.usedForTerrain)continue;const r=t[e];n.getSource().reparseOverscaled&&this._assignTerrainTiles(r)}this.proxiedCoords[n.id]=i.map((e=>new xn(e,e.key,this.orthoMatrix))),this._assignTerrainTiles(i),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(o),this.renderingToTexture=!1,this._updateTimestamp=e.exported.now();const s={};this._visibleDemTiles=[];for(const e of this.proxyCoords){const t=this.terrainTileForTile[e.key];if(!t)continue;const n=t.tileID.key;n in s||(this._visibleDemTiles.push(t),s[n]=n)}}_assignTerrainTiles(e){this._initializing||e.forEach((e=>{if(this.terrainTileForTile[e.key])return;const t=this._findTileCoveringTileID(e,this.sourceCache);t&&(this.terrainTileForTile[e.key]=t)}))}_prepareDEMTextures(){const e=this.painter.context,t=e.gl;for(const n in this.terrainTileForTile){const r=this.terrainTileForTile[n],i=r.dem;!i||r.demTexture&&!r.needsDEMTextureUpload||(e.activeTexture.set(t.TEXTURE1),sn(this.painter,r,i))}}_prepareDemTileUniforms(e,t,n,r){if(!t||null==t.demTexture)return!1;const i=e.tileID.canonical,o=Math.pow(2,t.tileID.canonical.z-i.z),a=r||"";return n[`u_dem_tl${a}`]=[i.x*o%1,i.y*o%1],n[`u_dem_scale${a}`]=o,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const t=this.painter.context,n=t.gl;if(!this._emptyDepthBufferTexture){const r=new e.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new e.Texture(t,r,n.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let e=0;const t=this._visibleDemTiles.reduce(((t,n)=>{if(!n.dem)return t;const r=n.dem.tree.minimums[0];return r>0&&e++,t+r}),0);return e?t/e:0}_updateEmptyDEMTexture(){const t=this.painter.context,n=t.gl;t.activeTexture.set(n.TEXTURE2);const r=this._getLoadedAreaMinimum(),i=new e.RGBAImage({width:1,height:1},new Uint8Array(e.DEMData.pack(r,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let o=this._emptyDEMTexture;return o?o.update(i,{premultiply:!1}):o=this._emptyDEMTexture=new e.Texture(t,i,n.RGBA,{premultiply:!1}),o}setupElevationDraw(t,n,r){const i=this.painter.context,o=i.gl,a=(s=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:e.DEMData.getUnpackVector(s),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0,u_tile_tl_up:[0,0,1],u_tile_tr_up:[0,0,1],u_tile_br_up:[0,0,1],u_tile_bl_up:[0,0,1],u_tile_up_scale:1});var s;a.u_dem_size=this.sourceCache.getSource().tileSize,a.u_exaggeration=this.exaggeration();const l=this.painter.transform,c=l.projection,u=t.tileID.canonical;a.u_tile_tl_up=c.upVector(u,0,0),a.u_tile_tr_up=c.upVector(u,e.EXTENT,0),a.u_tile_br_up=c.upVector(u,e.EXTENT,e.EXTENT),a.u_tile_bl_up=c.upVector(u,0,e.EXTENT),a.u_tile_up_scale=r&&r.useDenormalizedUpVectorScale?vn:c.upVectorScale(u,l.center.lat,l.worldSize).metersToTile;let h=null,f=null,p=1;if(r&&r.morphing&&this._useVertexMorphing){const e=r.morphing.srcDemTile,n=r.morphing.dstDemTile;p=r.morphing.phase,e&&n&&(this._prepareDemTileUniforms(t,e,a,"_prev")&&(f=e),this._prepareDemTileUniforms(t,n,a)&&(h=n))}if(f&&h?(i.activeTexture.set(o.TEXTURE2),h.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),i.activeTexture.set(o.TEXTURE4),f.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),a.u_dem_lerp=p):(h=this.terrainTileForTile[t.tileID.key],i.activeTexture.set(o.TEXTURE2),(this._prepareDemTileUniforms(t,h,a)?h.demTexture:this.emptyDEMTexture).bind(o.NEAREST,o.CLAMP_TO_EDGE)),i.activeTexture.set(o.TEXTURE3),r&&r.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),this._depthFBO&&(a.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),a.u_depth_size_inv=[1,1]),r&&r.useMeterToDem&&h){const t=(1<<h.tileID.canonical.z)*e.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;a.u_meter_to_dem=t}r&&r.labelPlaneMatrixInv&&(a.u_label_plane_matrix_inv=r.labelPlaneMatrixInv),n.setTerrainUniformValues(i,a)}renderToBackBuffer(t){const n=this.painter,r=this.painter.context;0!==t.length&&(r.bindFramebuffer.set(null),r.viewport.set([0,0,n.width,n.height]),this.renderingToTexture=!1,function(t,n,r,i,o){if("globe"===t.transform.projection.name)!function(t,n,r,i,o){const a=t.context,s=a.gl;let l,c;const u=t.options.showTerrainWireframe?2:0,h=(e,n)=>{if(c===e)return;const r=[dn[e],"PROJECTION_GLOBE_VIEW"];n&&r.push(dn[u]),l=t.useProgram("globeRaster",null,r),c=e},f=t.colorModeForRenderPass(),p=new e.DepthMode(s.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);pn.update(o);const d=t.transform,m=e.calculateGlobeMercatorMatrix(d),g=[e.mercatorXfromLng(d.center.lng),e.mercatorYfromLat(d.center.lat)],y=t.globeSharedBuffers;if((u?[!1,!0]:[!1]).forEach((u=>{c=-1;const v=u?s.LINES:s.TRIANGLES;for(const c of i){const i=r.getTile(c),b=e.StencilMode.disabled,_=n.prevTerrainTileForTile[c.key],x=n.terrainTileForTile[c.key];fn(_,x)&&pn.newMorphing(c.key,_,x,o,250),a.activeTexture.set(s.TEXTURE0),i.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE);const A=pn.getMorphValuesForProxy(c.key),w=A?1:0,C={useDenormalizedUpVectorScale:!0};A&&e.extend$1(C,{morphing:{srcDemTile:A.from,dstDemTile:A.to,phase:e.easeCubicInOut(A.phase)}});const E=Float32Array.from(d.globeMatrix),S=e.globeTileLatLngCorners(c.canonical),T=e.getGridMatrix(c.canonical,S),B=hn(d.projMatrix,E,m,e.globeToMercatorTransition(d.zoom),g,T);if(h(w,u),n.setupElevationDraw(i,l,C),t.prepareDrawProgram(a,l,c.toUnwrapped()),y){const[n,r,i]=u?y.getWirefameBuffers(t.context):y.getGridBuffers();l.draw(a,v,p,b,f,e.CullFaceMode.backCCW,B,"globe_raster",n,r,i)}}})),y){l=t.useProgram("globeRaster",null,["GLOBE_POLES","PROJECTION_GLOBE_VIEW"]);for(const o of i){const{x:i,y:c,z:u}=o.canonical,h=0===c,m=c===(1<<u)-1,[v,b,_,x]=y.getPoleBuffers(u);if(x&&(h||m)){const c=r.getTile(o);a.activeTexture.set(s.TEXTURE0),c.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE);let y=e.globePoleMatrixForTile(u,i,d);const A=(t,n)=>t.draw(a,s.TRIANGLES,p,e.StencilMode.disabled,f,e.CullFaceMode.disabled,hn(d.projMatrix,y,y,0,g),"globe_pole_raster",n,_,x);n.setupElevationDraw(c,l,{}),t.prepareDrawProgram(a,l,o.toUnwrapped()),h&&A(l,v),m&&(y=e.scale(e.create(),y,[1,-1,1]),A(l,b))}}}}(t,n,r,i,o);else{const a=t.context,s=a.gl;let l,c;const u=t.options.showTerrainWireframe?2:0,h=(e,n)=>{if(c===e)return;const r=[dn[e]];n&&r.push(dn[u]),l=t.useProgram("terrainRaster",null,r),c=e},f=t.colorModeForRenderPass(),p=new e.DepthMode(s.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);pn.update(o);const d=t.transform,m=6*Math.pow(1.5,22-d.zoom)*n.exaggeration();(u?[!1,!0]:[!1]).forEach((u=>{c=-1;const g=u?s.LINES:s.TRIANGLES,[y,v]=u?n.getWirefameBuffer():[n.gridIndexBuffer,n.gridSegments];for(const c of i){const i=r.getTile(c),b=e.StencilMode.disabled,_=n.prevTerrainTileForTile[c.key],x=n.terrainTileForTile[c.key];fn(_,x)&&pn.newMorphing(c.key,_,x,o,250),a.activeTexture.set(s.TEXTURE0),i.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST);const A=pn.getMorphValuesForProxy(c.key),w=A?1:0;let C;A&&(C={morphing:{srcDemTile:A.from,dstDemTile:A.to,phase:e.easeCubicInOut(A.phase)}});const E=un(c.projMatrix,mn(c.canonical,d.renderWorldCopies)?m/10:m);h(w,u),n.setupElevationDraw(i,l,C),t.prepareDrawProgram(a,l,c.toUnwrapped()),l.draw(a,g,p,b,f,e.CullFaceMode.backCCW,E,"terrain_raster",n.gridBuffer,y,v)}}))}}(n,this,this.proxySourceCache,t,this._updateTimestamp),this.renderingToTexture=!0,t.splice(0,t.length))}renderBatch(t){if(0===this._drapedRenderBatches.length)return t+1;this.renderingToTexture=!0;const n=this.painter,r=this.painter.context,i=this.proxySourceCache,o=this.proxiedCoords[i.id],a=this._drapedRenderBatches.shift(),s=[],l=n.style.order;let c=0;for(const u of o){const o=i.getTileByID(u.proxyTileKey),h=i.proxyCachedFBO[u.key]?i.proxyCachedFBO[u.key][t]:void 0,f=void 0!==h?i.renderCache[h]:this.pool[c++],p=void 0!==h;if(o.texture=f.tex,p&&!f.dirty){s.push(o.tileID);continue}let d;r.bindFramebuffer.set(f.fb.framebuffer),this.renderedToTile=!1,f.dirty&&(r.clear({color:e.Color.transparent,stencil:0}),f.dirty=!1);for(let e=a.start;e<=a.end;++e){const t=n.style._layers[l[e]];if(t.isHidden(n.transform.zoom))continue;const i=n.style._getLayerSourceCache(t),o=i?this.proxyToSource[u.key][i.id]:[u];if(!o)continue;const a=o;r.viewport.set([0,0,f.fb.width,f.fb.height]),d!==(i?i.id:null)&&(this._setupStencil(f,o,t,i),d=i?i.id:null),n.renderLayer(n,i,t,a)}this.renderedToTile?(f.dirty=!0,s.push(o.tileID)):p||--c,5===c&&(c=0,this.renderToBackBuffer(s))}return this.renderToBackBuffer(s),this.renderingToTexture=!1,r.bindFramebuffer.set(null),r.viewport.set([0,0,n.width,n.height]),a.end+1}postRender(){}renderCacheEfficiency(e){const t=e.order.length;if(0===t)return{efficiency:100};let n,r=0,i=0,o=!1;for(let a=0;a<t;++a){const t=e._layers[e.order[a]];this._style.isLayerDraped(t)?(o&&++r,++i):o||(o=!0,n=t.id)}return 0===i?{efficiency:100}:{efficiency:100*(1-r/i),firstUndrapedLayer:n}}getMinElevationBelowMSL(){let e=0;return this._visibleDemTiles.filter((e=>e.dem)).forEach((t=>{e=Math.min(e,t.dem.tree.minimums[0])})),0===e?e:(e-30)*this._exaggeration}raycast(e,t,n){if(!this._visibleDemTiles)return null;const r=this._visibleDemTiles.filter((e=>e.dem)).map((r=>{const i=r.tileID,o=Math.pow(2,i.overscaledZ),{x:a,y:s}=i.canonical,l=a/o,c=(a+1)/o,u=s/o,h=(s+1)/o;return{minx:l,miny:u,maxx:c,maxy:h,t:r.dem.tree.raycastRoot(l,u,c,h,e,t,n),tile:r}}));r.sort(((e,t)=>(null!==e.t?e.t:Number.MAX_VALUE)-(null!==t.t?t.t:Number.MAX_VALUE)));for(const i of r){if(null==i.t)return null;const r=i.tile.dem.tree.raycast(i.minx,i.miny,i.maxx,i.maxy,e,t,n);if(null!=r)return r}return null}_createFBO(){const t=this.painter.context,n=t.gl,r=this.drapeBufferSize;t.activeTexture.set(n.TEXTURE0);const i=new e.Texture(t,{width:r[0],height:r[1],data:null},n.RGBA);i.bind(n.LINEAR,n.CLAMP_TO_EDGE);const o=t.createFramebuffer(r[0],r[1],!1);return o.colorAttachment.set(i.texture),o.depthAttachment=new Ae(t,o.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=t.createRenderbuffer(t.gl.DEPTH_STENCIL,r[0],r[1]),this._stencilRef=0,o.depthAttachment.set(this._sharedDepthStencil),t.clear({stencil:0})):o.depthAttachment.set(this._sharedDepthStencil),t.extTextureFilterAnisotropic&&!t.extTextureFilterAnisotropicForceOff&&n.texParameterf(n.TEXTURE_2D,t.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.extTextureFilterAnisotropicMax),{fb:o,tex:i,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const e in this._style._sourceCaches)if(this._style._sourceCaches[e].hasTransition())return!0;return this._style.order.some((e=>{const t=this._style._layers[e],n=t.isHidden(this.painter.transform.zoom),r=t.getCrossfadeParameters(),i=!!r&&1!==r.t,o=t.hasTransition();return"custom"!==t.type&&!n&&(i||o)}))}_clearRasterFadeFromRenderCache(){let e=!1;for(const t in this._style._sourceCaches)if(this._style._sourceCaches[t]._source instanceof Ee){e=!0;break}if(e)for(let e=0;e<this._style.order.length;++e){const t=this._style._layers[this._style.order[e]],n=t.isHidden(this.painter.transform.zoom),r=this._style._getLayerSourceCache(t);if("raster"!==t.type||n||!r)continue;const i=t.paint.get("raster-fade-duration");for(const e of this.proxyCoords){const t=this.proxyToSource[e.key][r.id];if(t)for(const e of t){const t=yn(r.getTile(e),r.findLoadedParent(e,0),r,this.painter.transform,i);(1!==t.opacity||0!==t.mix)&&this._clearRenderCacheForTile(r.id,e)}}}}_setupDrapedRenderBatches(){const e=this._style.order,t=e.length;if(0===t)return;const n=[];let r,i=0,o=this._style._layers[e[i]];for(;!this._style.isLayerDraped(o)&&o.isHidden(this.painter.transform.zoom)&&++i<t;)o=this._style._layers[e[i]];for(;i<t;++i){const t=this._style._layers[e[i]];t.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(t)?void 0===r&&(r=i):void 0!==r&&(n.push({start:r,end:i-1}),r=void 0))}void 0!==r&&n.push({start:r,end:i-1}),this._drapedRenderBatches=n}_setupRenderCache(e){const t=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,t.renderCache.length>t.renderCachePool.length){const e=Object.values(t.proxyCachedFBO);t.proxyCachedFBO={};for(let n=0;n<e.length;++n){const r=Object.values(e[n]);t.renderCachePool.push(...r)}}return}this._clearRasterFadeFromRenderCache();const n=this.proxyCoords,r=this._tilesDirty;for(let i=n.length-1;i>=0;i--){const o=n[i];if(t.getTileByID(o.key),void 0!==t.proxyCachedFBO[o.key]){const n=e[o.key],i=this.proxyToSource[o.key];let a=0;for(const e in i){const t=i[e],o=n[e];if(!o||o.length!==t.length||t.some(((t,n)=>t!==o[n]||r[e]&&r[e].hasOwnProperty(t.key)))){a=-1;break}++a}for(const e in t.proxyCachedFBO[o.key])t.renderCache[t.proxyCachedFBO[o.key][e]].dirty=a<0||a!==Object.values(n).length}}const i=[...this._drapedRenderBatches];i.sort(((e,t)=>t.end-t.start-(e.end-e.start)));for(const e of i)for(const r of n){if(t.proxyCachedFBO[r.key])continue;let n=t.renderCachePool.pop();void 0===n&&t.renderCache.length<50&&(n=t.renderCache.length,t.renderCache.push(this._createFBO())),void 0!==n&&(t.proxyCachedFBO[r.key]={},t.proxyCachedFBO[r.key][e.start]=n,t.renderCache[n].dirty=!0)}this._tilesDirty={}}_setupStencil(e,t,n,r){if(!r||!this._sourceTilesOverlap[r.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const i=this.painter.context,o=i.gl;if(t.length<=1)return void(this._overlapStencilType=!1);let a;if(n.isTileClipped())a=t.length,this._overlapStencilMode.test={func:o.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(t[0].overscaledZ>t[t.length-1].overscaledZ))return void(this._overlapStencilType=!1);a=1,this._overlapStencilMode.test={func:o.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+a>255&&(i.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=a,this._overlapStencilMode.ref=this._stencilRef,n.isTileClipped()&&this._renderTileClippingMasks(t,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(t){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs.get(t.key)||0),this._overlapStencilMode):e.StencilMode.disabled}_renderTileClippingMasks(t,n){const r=this.painter,i=this.painter.context,o=i.gl;r._tileClippingMaskIDs.clear(),i.setColorMode(e.ColorMode.disabled),i.setDepthMode(e.DepthMode.disabled);const a=r.useProgram("clippingMask");for(const s of t){const t=--n;r._tileClippingMaskIDs.set(s.key,t),a.draw(i,o.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:o.ALWAYS,mask:0},t,255,o.KEEP,o.KEEP,o.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,gn(s.projMatrix),"$clipping",r.tileExtentBuffer,r.quadTriangleIndexBuffer,r.tileExtentSegments)}}pointCoordinate(t){const n=this.painter.transform;if(t.x<0||t.x>n.width||t.y<0||t.y>n.height)return null;const r=[t.x,t.y,1,1];e.transformMat4$1(r,r,n.pixelMatrixInverse),e.scale$1(r,r,1/r[3]),r[0]/=n.worldSize,r[1]/=n.worldSize;const i=n._camera.position,o=e.mercatorZfromAltitude(1,n.center.lat),a=[i[0],i[1],i[2]/o,0],s=e.subtract([],r.slice(0,3),a);e.normalize(s,s);const l=this.raycast(a,s,this._exaggeration);return null!==l&&l?(e.scaleAndAdd(a,a,s,l),a[3]=a[2],a[2]*=o,a):null}drawDepth(){const t=this.painter,n=t.context,r=this.proxySourceCache,i=Math.ceil(t.width),o=Math.ceil(t.height);if(!this._depthFBO||this._depthFBO.width===i&&this._depthFBO.height===o||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const t=n.gl,r=n.createFramebuffer(i,o,!0);n.activeTexture.set(t.TEXTURE0);const a=new e.Texture(n,{width:i,height:o,data:null},t.RGBA);a.bind(t.NEAREST,t.CLAMP_TO_EDGE),r.colorAttachment.set(a.texture);const s=n.createRenderbuffer(n.gl.DEPTH_COMPONENT16,i,o);r.depthAttachment.set(s),this._depthFBO=r,this._depthTexture=a}n.bindFramebuffer.set(this._depthFBO.framebuffer),n.viewport.set([0,0,i,o]),function(t,n,r,i){if("globe"===t.transform.projection.name)return;const o=t.context,a=o.gl;o.clear({depth:1});const s=t.useProgram("terrainDepth"),l=new e.DepthMode(a.LESS,e.DepthMode.ReadWrite,t.depthRangeFor3D);for(const t of i){const i=r.getTile(t),c=un(t.projMatrix,0);n.setupElevationDraw(i,s),s.draw(o,a.TRIANGLES,l,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.backCCW,c,"terrain_depth",n.gridBuffer,n.gridIndexBuffer,n.gridNoSkirtSegments)}}(t,this,r,this.proxyCoords)}_setupProxiedCoordsForOrtho(e,t,n){if(e.getSource()instanceof Be)return this._setupProxiedCoordsForImageSource(e,t,n);this._findCoveringTileCache[e.id]=this._findCoveringTileCache[e.id]||{};const r=this.proxiedCoords[e.id]=[],i=this.proxyCoords;for(let t=0;t<i.length;t++){const o=i[t],a=this._findTileCoveringTileID(o,e);if(a){const t=this._createProxiedId(o,a,n[o.key]&&n[o.key][e.id]);r.push(t),this.proxyToSource[o.key][e.id]=[t]}}let o=!1;for(let i=0;i<t.length;i++){const a=e.getTile(t[i]);if(!a||!a.hasData())continue;const s=this._findTileCoveringTileID(a.tileID,this.proxySourceCache);if(s&&s.tileID.canonical.z!==a.tileID.canonical.z){const t=this.proxyToSource[s.tileID.key][e.id],i=this._createProxiedId(s.tileID,a,n[s.tileID.key]&&n[s.tileID.key][e.id]);t?t.splice(t.length-1,0,i):this.proxyToSource[s.tileID.key][e.id]=[i],r.push(i),o=!0}}this._sourceTilesOverlap[e.id]=o}_setupProxiedCoordsForImageSource(t,n,r){if(!t.getSource().loaded())return;const i=this.proxiedCoords[t.id]=[],o=this.proxyCoords,a=t.getSource(),s=new e.pointGeometry(a.tileID.x,a.tileID.y)._div(1<<a.tileID.z),l=a.coordinates.map(e.MercatorCoordinate.fromLngLat).reduce(((e,t)=>(e.min.x=Math.min(e.min.x,t.x-s.x),e.min.y=Math.min(e.min.y,t.y-s.y),e.max.x=Math.max(e.max.x,t.x-s.x),e.max.y=Math.max(e.max.y,t.y-s.y),e)),{min:new e.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new e.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),c=(t,n)=>{const r=t.wrap+t.canonical.x/(1<<t.canonical.z),i=t.canonical.y/(1<<t.canonical.z),o=e.EXTENT/(1<<t.canonical.z),a=n.wrap+n.canonical.x/(1<<n.canonical.z),s=n.canonical.y/(1<<n.canonical.z);return r+o<a+l.min.x||r>a+l.max.x||i+o<s+l.min.y||i>s+l.max.y};for(let e=0;e<o.length;e++){const a=o[e];for(let e=0;e<n.length;e++){const o=t.getTile(n[e]);if(!o||!o.hasData())continue;if(c(a,o.tileID))continue;const s=this._createProxiedId(a,o,r[a.key]&&r[a.key][t.id]),l=this.proxyToSource[a.key][t.id];l?l.push(s):this.proxyToSource[a.key][t.id]=[s],i.push(s)}}}_createProxiedId(t,n,r){let i=this.orthoMatrix;if(r){const e=r.find((e=>e.key===n.tileID.key));if(e)return e}if(n.tileID.key!==t.key){const r=t.canonical.z-n.tileID.canonical.z;let o,a,s;i=e.create();const l=n.tileID.wrap-t.wrap<<t.overscaledZ;r>0?(o=e.EXTENT>>r,a=o*((n.tileID.canonical.x<<r)-t.canonical.x+l),s=o*((n.tileID.canonical.y<<r)-t.canonical.y)):(o=e.EXTENT<<-r,a=e.EXTENT*(n.tileID.canonical.x-(t.canonical.x+l<<-r)),s=e.EXTENT*(n.tileID.canonical.y-(t.canonical.y<<-r))),e.ortho(i,0,o,0,o,0,1),e.translate(i,i,[a,s,0])}return new xn(n.tileID,t.key,i)}_findTileCoveringTileID(t,n){let r=n.getTile(t);if(r&&r.hasData())return r;const i=this._findCoveringTileCache[n.id],o=i[t.key];if(r=o?n.getTileByID(o):null,r&&r.hasData()||null===o)return r;let a=r?r.tileID:t,s=a.overscaledZ;const l=n.getSource().minzoom,c=[];if(!o){const i=n.getSource().maxzoom;if(t.canonical.z>=i){const r=t.canonical.z-i;n.getSource().reparseOverscaled?(s=Math.max(t.canonical.z+2,n.transform.tileZoom),a=new e.OverscaledTileID(s,t.wrap,i,t.canonical.x>>r,t.canonical.y>>r)):0!==r&&(s=i,a=new e.OverscaledTileID(s,t.wrap,i,t.canonical.x>>r,t.canonical.y>>r))}a.key!==t.key&&(c.push(a.key),r=n.getTile(a))}const u=e=>{c.forEach((t=>{i[t]=e})),c.length=0};for(s-=1;s>=l&&(!r||!r.hasData());s--){r&&u(r.tileID.key);const e=a.calculateScaledKey(s);if(r=n.getTileByID(e),r&&r.hasData())break;const t=i[e];if(null===t)break;void 0===t?c.push(e):r=n.getTileByID(t)}return u(r?r.tileID.key:null),r&&r.hasData()?r:null}findDEMTileFor(e){return this.enabled?this._findTileCoveringTileID(e,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(e,t){let n=this._tilesDirty[e];n||(n=this._tilesDirty[e]={}),n[t.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const t=function(t){let n=0;const r=new e.StructArrayLayout2ui4,i=131;for(let e=1;e<129;e++){for(let t=1;t<129;t++)n=e*i+t,r.emplaceBack(n,n+1),r.emplaceBack(n,n+i),r.emplaceBack(n+1,n+i),128===e&&r.emplaceBack(n+i,n+i+1);r.emplaceBack(n+1,n+1+i)}return r}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(t),this.wireframeSegments=e.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,t.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}function wn(e){const t=[];for(let n=0;n<e.length;n++){if(null===e[n])continue;const r=e[n].split(" ");t.push(r.pop())}return t}class Cn{static cacheKey(e,t,n){let r=`${e}${n?n.cacheKey:""}`;for(const e of t)r+=`/${e}`;return r}constructor(t,n,r,i,o,a){const s=t.gl;this.program=s.createProgram();const l=wn(r.staticAttributes),c=i?i.getBinderAttributes():[],u=l.concat(c),h=r.staticUniforms?wn(r.staticUniforms):[],f=i?i.getBinderUniforms():[],p=h.concat(f),d=[];for(const e of p)d.indexOf(e)<0&&d.push(e);let m=i?i.defines():[];m=m.concat(a.map((e=>`#define ${e}`)));const g=m.concat("\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",en,Qt.fragmentSource,Jt.fragmentSource,r.fragmentSource).join("\n"),y=m.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",en,Qt.vertexSource,Jt.vertexSource,Kt.vertexSource,r.vertexSource).join("\n"),v=s.createShader(s.FRAGMENT_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);s.shaderSource(v,g),s.compileShader(v),s.attachShader(this.program,v);const b=s.createShader(s.VERTEX_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);s.shaderSource(b,y),s.compileShader(b),s.attachShader(this.program,b),this.attributes={};const _={};this.numAttributes=u.length;for(let e=0;e<this.numAttributes;e++)u[e]&&(s.bindAttribLocation(this.program,e,u[e]),this.attributes[u[e]]=e);s.linkProgram(this.program),s.deleteShader(b),s.deleteShader(v);for(let e=0;e<d.length;e++){const t=d[e];if(t&&!_[t]){const e=s.getUniformLocation(this.program,t);e&&(_[t]=e)}}this.fixedUniforms=o(t,_),this.binderUniforms=i?i.getUniforms(t,_):[],-1!==a.indexOf("TERRAIN")&&(this.terrainUniforms=((t,n)=>({u_dem:new e.Uniform1i(t,n.u_dem),u_dem_prev:new e.Uniform1i(t,n.u_dem_prev),u_dem_unpack:new e.Uniform4f(t,n.u_dem_unpack),u_dem_tl:new e.Uniform2f(t,n.u_dem_tl),u_dem_scale:new e.Uniform1f(t,n.u_dem_scale),u_dem_tl_prev:new e.Uniform2f(t,n.u_dem_tl_prev),u_dem_scale_prev:new e.Uniform1f(t,n.u_dem_scale_prev),u_dem_size:new e.Uniform1f(t,n.u_dem_size),u_dem_lerp:new e.Uniform1f(t,n.u_dem_lerp),u_exaggeration:new e.Uniform1f(t,n.u_exaggeration),u_depth:new e.Uniform1i(t,n.u_depth),u_depth_size_inv:new e.Uniform2f(t,n.u_depth_size_inv),u_meter_to_dem:new e.Uniform1f(t,n.u_meter_to_dem),u_label_plane_matrix_inv:new e.UniformMatrix4f(t,n.u_label_plane_matrix_inv),u_tile_tl_up:new e.Uniform3f(t,n.u_tile_tl_up),u_tile_tr_up:new e.Uniform3f(t,n.u_tile_tr_up),u_tile_br_up:new e.Uniform3f(t,n.u_tile_br_up),u_tile_bl_up:new e.Uniform3f(t,n.u_tile_bl_up),u_tile_up_scale:new e.Uniform1f(t,n.u_tile_up_scale)}))(t,_)),-1!==a.indexOf("FOG")&&(this.fogUniforms=((t,n)=>({u_fog_matrix:new e.UniformMatrix4f(t,n.u_fog_matrix),u_fog_range:new e.Uniform2f(t,n.u_fog_range),u_fog_color:new e.Uniform4f(t,n.u_fog_color),u_fog_horizon_blend:new e.Uniform1f(t,n.u_fog_horizon_blend),u_fog_temporal_offset:new e.Uniform1f(t,n.u_fog_temporal_offset)}))(t,_))}setTerrainUniformValues(e,t){if(!this.terrainUniforms)return;const n=this.terrainUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)n[e].set(t[e])}}setFogUniformValues(e,t){if(!this.fogUniforms)return;const n=this.fogUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)n[e].location&&n[e].set(t[e])}}draw(e,t,n,r,i,o,a,s,l,c,u,h,f,p,d,m){const g=e.gl;if(this.failedToCreate)return;e.program.set(this.program),e.setDepthMode(n),e.setStencilMode(r),e.setColorMode(i),e.setCullFace(o);for(const e of Object.keys(this.fixedUniforms))this.fixedUniforms[e].set(a[e]);p&&p.setUniforms(e,this.binderUniforms,h,{zoom:f});const y={[g.LINES]:2,[g.TRIANGLES]:3,[g.LINE_STRIP]:1}[t];for(const n of u.get()){const r=n.vaos||(n.vaos={});(r[s]||(r[s]=new rn)).bind(e,this,l,p?p.getPaintVertexBuffers():[],c,n.vertexOffset,d,m),g.drawElements(t,n.primitiveLength*y,g.UNSIGNED_SHORT,n.primitiveOffset*y*2)}}}function En(e,t,n){const r=1/O(n,1,t.transform.tileZoom),i=Math.pow(2,n.tileID.overscaledZ),o=n.tileSize*Math.pow(2,t.transform.tileZoom)/i,a=o*(n.tileID.canonical.x+n.tileID.wrap*i),s=o*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[r,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}const Sn=e.create(),Tn=(t,n,r,i,o,a,s,l,c)=>{const u=n.style.light,h=u.properties.get("position"),f=[h.x,h.y,h.z],p=e.create$1();"viewport"===u.properties.get("anchor")&&(e.fromRotation(p,-n.transform.angle),e.transformMat3(f,f,p));const d=u.properties.get("color"),m=n.transform,g={u_matrix:t,u_lightpos:f,u_lightintensity:u.properties.get("intensity"),u_lightcolor:[d.r,d.g,d.b],u_vertical_gradient:+r,u_opacity:i,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Sn,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0};return"globe"===m.projection.name&&(g.u_tile_id=[o.canonical.x,o.canonical.y,1<<o.canonical.z],g.u_zoom_transition=s,g.u_inv_rot_matrix=c,g.u_merc_center=l,g.u_up_dir=m.projection.upVector(new e.CanonicalTileID(0,0,0),l[0]*e.EXTENT,l[1]*e.EXTENT),g.u_height_lift=a),g},Bn=(t,n,r,i,o,a,s,l,c,u,h)=>{const f=Tn(t,n,r,i,o,l,c,u,h),p={u_height_factor:-Math.pow(2,o.overscaledZ)/s.tileSize/8};return e.extend(f,En(a,n,s),p)},kn=e=>({u_matrix:e}),Mn=(t,n,r,i)=>e.extend(kn(t),En(r,n,i)),Pn=(e,t)=>({u_matrix:e,u_world:t}),In=(t,n,r,i,o)=>e.extend(Mn(t,n,r,i),{u_world:o}),On=e.create(),Dn=(t,n,r,i,o,a)=>{const s=t.transform,l="globe"===s.projection.name;let c;if("map"===a.paint.get("circle-pitch-alignment"))if(l){const t=e.globePixelsToTileUnits(s.zoom,n.canonical);c=Float32Array.from([t,0,0,t])}else c=s.calculatePixelsToTileUnitsMatrix(r);else c=new Float32Array([s.pixelsToGLUnits[0],0,0,s.pixelsToGLUnits[1]]);const u={u_camera_to_center_distance:s.cameraToCenterDistance,u_matrix:t.translatePosMatrix(n.projMatrix,r,a.paint.get("circle-translate"),a.paint.get("circle-translate-anchor")),u_device_pixel_ratio:e.exported.devicePixelRatio,u_extrude_scale:c,u_inv_rot_matrix:On,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};return l&&(u.u_inv_rot_matrix=i,u.u_merc_center=o,u.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],u.u_zoom_transition=e.globeToMercatorTransition(s.zoom),u.u_up_dir=s.projection.upVector(n.canonical,o[0],o[1])),u},zn=e=>{const t=[];return"map"===e.paint.get("circle-pitch-alignment")&&t.push("PITCH_WITH_MAP"),"map"===e.paint.get("circle-pitch-scale")&&t.push("SCALE_WITH_MAP"),t},Ln=(t,n,r)=>{const i=e.EXTENT/r.tileSize;return{u_matrix:t,u_camera_to_center_distance:n.cameraToCenterDistance,u_extrude_scale:[n.pixelsToGLUnits[0]/i,n.pixelsToGLUnits[1]/i]}},Rn=(e,t,n=1)=>({u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:n}),Fn=e.create(),Un=(t,n,r,i,o,a,s)=>{const l=t.transform,c="globe"===l.projection.name,u=c?e.globePixelsToTileUnits(l.zoom,n.canonical):O(r,1,a),h={u_matrix:n.projMatrix,u_extrude_scale:u,u_intensity:s,u_inv_rot_matrix:Fn,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};return c&&(h.u_inv_rot_matrix=i,h.u_merc_center=o,h.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],h.u_zoom_transition=e.globeToMercatorTransition(l.zoom),h.u_up_dir=l.projection.upVector(n.canonical,o[0],o[1])),h},Nn=(e,t,n,r,i,o,a)=>{const s=e.transform,l=s.calculatePixelsToTileUnitsMatrix(t),c={u_matrix:Gn(e,t,n,i),u_pixels_to_tile_units:l,u_device_pixel_ratio:a,u_units_to_pixels:[1/s.pixelsToGLUnits[0],1/s.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:o,u_texsize:[0,0],u_scale:[0,0,0],u_mix:0,u_alpha_discard_threshold:0};if(qn(n)){const n=Vn(t,e.transform);c.u_texsize=t.lineAtlasTexture.size,c.u_scale=[n,r.fromScale,r.toScale],c.u_mix=r.t}return c},jn=(e,t,n,r,i,o)=>{const a=e.transform,s=Vn(t,a);return{u_matrix:Gn(e,t,n,i),u_texsize:t.imageAtlasTexture.size,u_pixels_to_tile_units:a.calculatePixelsToTileUnitsMatrix(t),u_device_pixel_ratio:o,u_image:0,u_scale:[s,r.fromScale,r.toScale],u_fade:r.t,u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Vn(e,t){return 1/O(e,1,t.tileZoom)}function Gn(e,t,n,r){return e.translatePosMatrix(r||t.tileID.projMatrix,t,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}function qn(e){const t=e.paint.get("line-dasharray").value;return t.value||"constant"!==t.kind}const Wn=(e,t,n,r,i,o)=>{return{u_matrix:e,u_tl_parent:t,u_scale_parent:n,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(s=i.paint.get("raster-saturation"),s>0?1-1/(1.001-s):-s),u_contrast_factor:(a=i.paint.get("raster-contrast"),a>0?1/(1-a):1+a),u_spin_weights:Hn(i.paint.get("raster-hue-rotate")),u_perspective_transform:o};var a,s};function Hn(e){e*=Math.PI/180;const t=Math.sin(e),n=Math.cos(e);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}const $n=e.create(),Xn=(t,n,r,i,o,a,s,l,c,u,h,f,p,d)=>{const m=o.transform,g={u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:m.cameraToCenterDistance,u_rotate_symbol:+r,u_aspect_ratio:m.width/m.height,u_fade_change:o.options.fadeDuration?o.symbolFadeChange:1,u_matrix:a,u_label_plane_matrix:s,u_coord_matrix:l,u_is_text:+c,u_pitch_with_map:+i,u_texsize:u,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:$n,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:$n};return"globe"===m.projection.name&&(g.u_tile_id=[h.canonical.x,h.canonical.y,1<<h.canonical.z],g.u_zoom_transition=f,g.u_inv_rot_matrix=d,g.u_merc_center=p,g.u_camera_forward=m._camera.forward(),g.u_ecef_origin=e.globeECEFOrigin(m.globeMatrix,h.toUnwrapped()),g.u_tile_matrix=Float32Array.from(m.globeMatrix)),g},Zn=(t,n,r,i,o,a,s,l,c,u,h,f,p,d,m)=>{const{cameraToCenterDistance:g,_pitch:y}=o.transform;return e.extend(Xn(t,n,r,i,o,a,s,l,c,u,f,p,d,m),{u_gamma_scale:i?g*Math.cos(o.terrain?0:y):1,u_device_pixel_ratio:e.exported.devicePixelRatio,u_is_halo:+h})},Yn=(t,n,r,i,o,a,s,l,c,u,h,f,p,d)=>e.extend(Zn(t,n,r,i,o,a,s,l,!0,c,!0,h,f,p,d),{u_texsize_icon:u,u_texture_icon:1}),Kn=(e,t,n)=>({u_matrix:e,u_opacity:t,u_color:n}),Jn=(t,n,r,i,o,a)=>e.extend(function(e,t,n,r){const i=n.imageManager.getPattern(e.from.toString()),o=n.imageManager.getPattern(e.to.toString()),{width:a,height:s}=n.imageManager.getPixelSize(),l=Math.pow(2,r.tileID.overscaledZ),c=r.tileSize*Math.pow(2,n.transform.tileZoom)/l,u=c*(r.tileID.canonical.x+r.tileID.wrap*l),h=c*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:i.tl,u_pattern_br_a:i.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[a,s],u_mix:t.t,u_pattern_size_a:i.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:t.fromScale,u_scale_b:t.toScale,u_tile_units_to_pixels:1/O(r,1,n.transform.tileZoom),u_pixel_coord_upper:[u>>16,h>>16],u_pixel_coord_lower:[65535&u,65535&h]}}(i,a,r,o),{u_matrix:t,u_opacity:n}),Qn={fillExtrusion:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_lightpos:new e.Uniform3f(t,n.u_lightpos),u_lightintensity:new e.Uniform1f(t,n.u_lightintensity),u_lightcolor:new e.Uniform3f(t,n.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,n.u_vertical_gradient),u_opacity:new e.Uniform1f(t,n.u_opacity),u_tile_id:new e.Uniform3f(t,n.u_tile_id),u_zoom_transition:new e.Uniform1f(t,n.u_zoom_transition),u_inv_rot_matrix:new e.UniformMatrix4f(t,n.u_inv_rot_matrix),u_merc_center:new e.Uniform2f(t,n.u_merc_center),u_up_dir:new e.Uniform3f(t,n.u_up_dir),u_height_lift:new e.Uniform1f(t,n.u_height_lift)}),fillExtrusionPattern:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_lightpos:new e.Uniform3f(t,n.u_lightpos),u_lightintensity:new e.Uniform1f(t,n.u_lightintensity),u_lightcolor:new e.Uniform3f(t,n.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,n.u_vertical_gradient),u_height_factor:new e.Uniform1f(t,n.u_height_factor),u_tile_id:new e.Uniform3f(t,n.u_tile_id),u_zoom_transition:new e.Uniform1f(t,n.u_zoom_transition),u_inv_rot_matrix:new e.UniformMatrix4f(t,n.u_inv_rot_matrix),u_merc_center:new e.Uniform2f(t,n.u_merc_center),u_up_dir:new e.Uniform3f(t,n.u_up_dir),u_height_lift:new e.Uniform1f(t,n.u_height_lift),u_image:new e.Uniform1i(t,n.u_image),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade),u_opacity:new e.Uniform1f(t,n.u_opacity)}),fill:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}),fillPattern:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image:new e.Uniform1i(t,n.u_image),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade)}),fillOutline:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_world:new e.Uniform2f(t,n.u_world)}),fillOutlinePattern:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_world:new e.Uniform2f(t,n.u_world),u_image:new e.Uniform1i(t,n.u_image),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade)}),circle:(t,n)=>({u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_extrude_scale:new e.UniformMatrix2f(t,n.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_inv_rot_matrix:new e.UniformMatrix4f(t,n.u_inv_rot_matrix),u_merc_center:new e.Uniform2f(t,n.u_merc_center),u_tile_id:new e.Uniform3f(t,n.u_tile_id),u_zoom_transition:new e.Uniform1f(t,n.u_zoom_transition),u_up_dir:new e.Uniform3f(t,n.u_up_dir)}),collisionBox:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_extrude_scale:new e.Uniform2f(t,n.u_extrude_scale)}),collisionCircle:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_inv_matrix:new e.UniformMatrix4f(t,n.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(t,n.u_viewport_size)}),debug:(t,n)=>({u_color:new e.UniformColor(t,n.u_color),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_overlay:new e.Uniform1i(t,n.u_overlay),u_overlay_scale:new e.Uniform1f(t,n.u_overlay_scale)}),clippingMask:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}),heatmap:(t,n)=>({u_extrude_scale:new e.Uniform1f(t,n.u_extrude_scale),u_intensity:new e.Uniform1f(t,n.u_intensity),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_inv_rot_matrix:new e.UniformMatrix4f(t,n.u_inv_rot_matrix),u_merc_center:new e.Uniform2f(t,n.u_merc_center),u_tile_id:new e.Uniform3f(t,n.u_tile_id),u_zoom_transition:new e.Uniform1f(t,n.u_zoom_transition),u_up_dir:new e.Uniform3f(t,n.u_up_dir)}),heatmapTexture:(t,n)=>({u_image:new e.Uniform1i(t,n.u_image),u_color_ramp:new e.Uniform1i(t,n.u_color_ramp),u_opacity:new e.Uniform1f(t,n.u_opacity)}),hillshade:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image:new e.Uniform1i(t,n.u_image),u_latrange:new e.Uniform2f(t,n.u_latrange),u_light:new e.Uniform2f(t,n.u_light),u_shadow:new e.UniformColor(t,n.u_shadow),u_highlight:new e.UniformColor(t,n.u_highlight),u_accent:new e.UniformColor(t,n.u_accent)}),hillshadePrepare:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image:new e.Uniform1i(t,n.u_image),u_dimension:new e.Uniform2f(t,n.u_dimension),u_zoom:new e.Uniform1f(t,n.u_zoom),u_unpack:new e.Uniform4f(t,n.u_unpack)}),line:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_pixels_to_tile_units:new e.UniformMatrix2f(t,n.u_pixels_to_tile_units),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,n.u_units_to_pixels),u_dash_image:new e.Uniform1i(t,n.u_dash_image),u_gradient_image:new e.Uniform1i(t,n.u_gradient_image),u_image_height:new e.Uniform1f(t,n.u_image_height),u_texsize:new e.Uniform2f(t,n.u_texsize),u_scale:new e.Uniform3f(t,n.u_scale),u_mix:new e.Uniform1f(t,n.u_mix),u_alpha_discard_threshold:new e.Uniform1f(t,n.u_alpha_discard_threshold)}),linePattern:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixels_to_tile_units:new e.UniformMatrix2f(t,n.u_pixels_to_tile_units),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_image:new e.Uniform1i(t,n.u_image),u_units_to_pixels:new e.Uniform2f(t,n.u_units_to_pixels),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade),u_alpha_discard_threshold:new e.Uniform1f(t,n.u_alpha_discard_threshold)}),raster:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_tl_parent:new e.Uniform2f(t,n.u_tl_parent),u_scale_parent:new e.Uniform1f(t,n.u_scale_parent),u_fade_t:new e.Uniform1f(t,n.u_fade_t),u_opacity:new e.Uniform1f(t,n.u_opacity),u_image0:new e.Uniform1i(t,n.u_image0),u_image1:new e.Uniform1i(t,n.u_image1),u_brightness_low:new e.Uniform1f(t,n.u_brightness_low),u_brightness_high:new e.Uniform1f(t,n.u_brightness_high),u_saturation_factor:new e.Uniform1f(t,n.u_saturation_factor),u_contrast_factor:new e.Uniform1f(t,n.u_contrast_factor),u_spin_weights:new e.Uniform3f(t,n.u_spin_weights),u_perspective_transform:new e.Uniform2f(t,n.u_perspective_transform)}),symbolIcon:(t,n)=>({u_is_size_zoom_constant:new e.Uniform1i(t,n.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,n.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,n.u_size_t),u_size:new e.Uniform1f(t,n.u_size),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_rotate_symbol:new e.Uniform1i(t,n.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,n.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,n.u_fade_change),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,n.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,n.u_coord_matrix),u_is_text:new e.Uniform1i(t,n.u_is_text),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_texsize:new e.Uniform2f(t,n.u_texsize),u_tile_id:new e.Uniform3f(t,n.u_tile_id),u_zoom_transition:new e.Uniform1f(t,n.u_zoom_transition),u_inv_rot_matrix:new e.UniformMatrix4f(t,n.u_inv_rot_matrix),u_merc_center:new e.Uniform2f(t,n.u_merc_center),u_camera_forward:new e.Uniform3f(t,n.u_camera_forward),u_tile_matrix:new e.UniformMatrix4f(t,n.u_tile_matrix),u_ecef_origin:new e.Uniform3f(t,n.u_ecef_origin),u_texture:new e.Uniform1i(t,n.u_texture)}),symbolSDF:(t,n)=>({u_is_size_zoom_constant:new e.Uniform1i(t,n.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,n.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,n.u_size_t),u_size:new e.Uniform1f(t,n.u_size),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_rotate_symbol:new e.Uniform1i(t,n.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,n.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,n.u_fade_change),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,n.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,n.u_coord_matrix),u_is_text:new e.Uniform1i(t,n.u_is_text),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_texsize:new e.Uniform2f(t,n.u_texsize),u_texture:new e.Uniform1i(t,n.u_texture),u_gamma_scale:new e.Uniform1f(t,n.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_tile_id:new e.Uniform3f(t,n.u_tile_id),u_zoom_transition:new e.Uniform1f(t,n.u_zoom_transition),u_inv_rot_matrix:new e.UniformMatrix4f(t,n.u_inv_rot_matrix),u_merc_center:new e.Uniform2f(t,n.u_merc_center),u_camera_forward:new e.Uniform3f(t,n.u_camera_forward),u_tile_matrix:new e.UniformMatrix4f(t,n.u_tile_matrix),u_ecef_origin:new e.Uniform3f(t,n.u_ecef_origin),u_is_halo:new e.Uniform1i(t,n.u_is_halo)}),symbolTextAndIcon:(t,n)=>({u_is_size_zoom_constant:new e.Uniform1i(t,n.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,n.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,n.u_size_t),u_size:new e.Uniform1f(t,n.u_size),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_rotate_symbol:new e.Uniform1i(t,n.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,n.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,n.u_fade_change),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,n.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,n.u_coord_matrix),u_is_text:new e.Uniform1i(t,n.u_is_text),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_texsize:new e.Uniform2f(t,n.u_texsize),u_texsize_icon:new e.Uniform2f(t,n.u_texsize_icon),u_texture:new e.Uniform1i(t,n.u_texture),u_texture_icon:new e.Uniform1i(t,n.u_texture_icon),u_gamma_scale:new e.Uniform1f(t,n.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(t,n.u_is_halo)}),background:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_opacity:new e.Uniform1f(t,n.u_opacity),u_color:new e.UniformColor(t,n.u_color)}),backgroundPattern:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_opacity:new e.Uniform1f(t,n.u_opacity),u_image:new e.Uniform1i(t,n.u_image),u_pattern_tl_a:new e.Uniform2f(t,n.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(t,n.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(t,n.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(t,n.u_pattern_br_b),u_texsize:new e.Uniform2f(t,n.u_texsize),u_mix:new e.Uniform1f(t,n.u_mix),u_pattern_size_a:new e.Uniform2f(t,n.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(t,n.u_pattern_size_b),u_scale_a:new e.Uniform1f(t,n.u_scale_a),u_scale_b:new e.Uniform1f(t,n.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(t,n.u_tile_units_to_pixels)}),terrainRaster:cn,terrainDepth:cn,skybox:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_sun_direction:new e.Uniform3f(t,n.u_sun_direction),u_cubemap:new e.Uniform1i(t,n.u_cubemap),u_opacity:new e.Uniform1f(t,n.u_opacity),u_temporal_offset:new e.Uniform1f(t,n.u_temporal_offset)}),skyboxGradient:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_color_ramp:new e.Uniform1i(t,n.u_color_ramp),u_center_direction:new e.Uniform3f(t,n.u_center_direction),u_radius:new e.Uniform1f(t,n.u_radius),u_opacity:new e.Uniform1f(t,n.u_opacity),u_temporal_offset:new e.Uniform1f(t,n.u_temporal_offset)}),skyboxCapture:(t,n)=>({u_matrix_3f:new e.UniformMatrix3f(t,n.u_matrix_3f),u_sun_direction:new e.Uniform3f(t,n.u_sun_direction),u_sun_intensity:new e.Uniform1f(t,n.u_sun_intensity),u_color_tint_r:new e.Uniform4f(t,n.u_color_tint_r),u_color_tint_m:new e.Uniform4f(t,n.u_color_tint_m),u_luminance:new e.Uniform1f(t,n.u_luminance)}),globeRaster:(t,n)=>({u_proj_matrix:new e.UniformMatrix4f(t,n.u_proj_matrix),u_globe_matrix:new e.UniformMatrix4f(t,n.u_globe_matrix),u_merc_matrix:new e.UniformMatrix4f(t,n.u_merc_matrix),u_zoom_transition:new e.Uniform1f(t,n.u_zoom_transition),u_merc_center:new e.Uniform2f(t,n.u_merc_center),u_image0:new e.Uniform1i(t,n.u_image0),u_grid_matrix:new e.UniformMatrix3f(t,n.u_grid_matrix)}),globeAtmosphere:(t,n)=>({u_frustum_tl:new e.Uniform3f(t,n.u_frustum_tl),u_frustum_tr:new e.Uniform3f(t,n.u_frustum_tr),u_frustum_br:new e.Uniform3f(t,n.u_frustum_br),u_frustum_bl:new e.Uniform3f(t,n.u_frustum_bl),u_globe_pos:new e.Uniform3f(t,n.u_globe_pos),u_globe_radius:new e.Uniform1f(t,n.u_globe_radius),u_opacity:new e.Uniform1f(t,n.u_opacity),u_fadeout_range:new e.Uniform1f(t,n.u_fadeout_range),u_start_color:new e.Uniform3f(t,n.u_start_color),u_end_color:new e.Uniform3f(t,n.u_end_color)})};let er;function tr(t,n,r,i,o,a,s){const l=t.context,c=l.gl,u=t.useProgram("collisionBox"),h=[];let f=0,p=0;for(let d=0;d<i.length;d++){const m=i[d],g=n.getTile(m),y=g.getBucket(r);if(!y)continue;let v=m.projMatrix;0===o[0]&&0===o[1]||(v=t.translatePosMatrix(m.projMatrix,g,o,a));const b=s?y.textCollisionBox:y.iconCollisionBox,_=y.collisionCircleArray;if(_.length>0){const n=e.create(),r=v;e.mul(n,y.placementInvProjMatrix,t.transform.glCoordMatrix),e.mul(n,n,y.placementViewportMatrix),h.push({circleArray:_,circleOffset:p,transform:r,invTransform:n}),f+=_.length/4,p=f}b&&(t.terrain&&t.terrain.setupElevationDraw(g,u),u.draw(l,c.LINES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,Ln(v,t.transform,g),r.id,b.layoutVertexBuffer,b.indexBuffer,b.segments,null,t.transform.zoom,null,b.collisionVertexBuffer,b.collisionVertexBufferExt))}if(!s||!h.length)return;const d=t.useProgram("collisionCircle"),m=new e.StructArrayLayout2f1f2i16;m.resize(4*f),m._trim();let g=0;for(const e of h)for(let t=0;t<e.circleArray.length/4;t++){const n=4*t,r=e.circleArray[n+0],i=e.circleArray[n+1],o=e.circleArray[n+2],a=e.circleArray[n+3];m.emplace(g++,r,i,o,a,0),m.emplace(g++,r,i,o,a,1),m.emplace(g++,r,i,o,a,2),m.emplace(g++,r,i,o,a,3)}(!er||er.length<2*f)&&(er=function(t){const n=2*t,r=new e.StructArrayLayout3ui6;r.resize(n),r._trim();for(let e=0;e<n;e++){const t=6*e;r.uint16[t+0]=4*e+0,r.uint16[t+1]=4*e+1,r.uint16[t+2]=4*e+2,r.uint16[t+3]=4*e+2,r.uint16[t+4]=4*e+3,r.uint16[t+5]=4*e+0}return r}(f));const y=l.createIndexBuffer(er,!0),v=l.createVertexBuffer(m,e.collisionCircleLayout.members,!0);for(const n of h){const i={u_matrix:n.transform,u_inv_matrix:n.invTransform,u_camera_to_center_distance:(b=t.transform).cameraToCenterDistance,u_viewport_size:[b.width,b.height]};d.draw(l,c.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,i,r.id,v,y,e.SegmentVector.simpleSegment(0,2*n.circleOffset,n.circleArray.length,n.circleArray.length/2),null,t.transform.zoom,null,null,null)}var b;v.destroy(),y.destroy()}const nr=e.create();function rr(t,n,r,i,o,a){const{horizontalAlign:s,verticalAlign:l}=e.getAnchorAlignment(t),c=-(s-.5)*n,u=-(l-.5)*r,h=e.evaluateVariableOffset(t,i);return new e.pointGeometry((c/o+h[0])*a,(u/o+h[1])*a)}function ir(t,n,r,i,o,a,s,l,c,u,h,f){const p=t.text.placedSymbolArray,d=t.text.dynamicLayoutVertexArray,m=t.icon.dynamicLayoutVertexArray,g={},y=l.projMatrix,v=a.elevation,b=f.upVectorScale(l.canonical,a.center.lat,a.worldSize);d.clear();for(let m=0;m<p.length;m++){const _=p.get(m),x=t.allowVerticalPlacement&&!_.placedOrientation,A=_.hidden||!_.crossTileID||x?null:i[_.crossTileID];if(A){const i=new e.pointGeometry(_.tileAnchorX,_.tileAnchorY),p=f.upVector(l.canonical,i.x,i.y),m=v?v.getAtTileOffset(l,i.x,i.y):0,x=nt([_.projectedAnchorX+m*p[0]*b.metersToTile,_.projectedAnchorY+m*p[1]*b.metersToTile,_.projectedAnchorZ+m*p[2]*b.metersToTile],r?y:s),w=rt(a.cameraToCenterDistance,x.signedDistanceFromCamera);let C=o.evaluateSizeForFeature(t.textSizeData,u,_)*w/e.ONE_EM;r&&(C*=t.tilePixelRatio/c);const{width:E,height:S,anchor:T,textOffset:B,textScale:k}=A,M=rr(T,E,S,B,k,C),P=r?tt(i.add(M),s,m*b.metersToLabelSpace).point:x.point.add(n?M.rotate(-a.angle):M),I=t.allowVerticalPlacement&&_.placedOrientation===e.WritingMode.vertical?Math.PI/2:0;for(let t=0;t<_.numGlyphs;t++)e.addDynamicAttributes(d,P,I);h&&_.associatedIconIndex>=0&&(g[_.associatedIconIndex]={shiftedAnchor:P,angle:I})}else pt(_.numGlyphs,d)}if(h){m.clear();const n=t.icon.placedSymbolArray;for(let t=0;t<n.length;t++){const r=n.get(t);if(r.hidden)pt(r.numGlyphs,m);else{const n=g[t];if(n)for(let t=0;t<r.numGlyphs;t++)e.addDynamicAttributes(m,n.shiftedAnchor,n.angle);else pt(r.numGlyphs,m)}}t.icon.dynamicLayoutVertexBuffer.updateData(m)}t.text.dynamicLayoutVertexBuffer.updateData(d)}function or(e,t,n){return n.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function ar(t,n,r,i,o,a,s,l,c,u,h,f){const p=t.context,d=p.gl,m=t.transform,g="map"===l,y="map"===c,v=g&&"point"!==r.layout.get("symbol-placement"),b=g&&!y&&!v,_=void 0!==r.layout.get("symbol-sort-key").constantOr(1);let x=!1;const A=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),w=[e.mercatorXfromLng(m.center.lng),e.mercatorYfromLat(m.center.lat)],C=r.layout.get("text-variable-anchor"),E="globe"===m.projection.name,S=E?e.globeToMercatorTransition(m.zoom):0,T=[],B=[];t.terrain&&y&&B.push("PITCH_WITH_MAP_TERRAIN"),E&&B.push("PROJECTION_GLOBE_VIEW");for(const l of i){const i=n.getTile(l),c=i.getBucket(r);if(!c||c.projection!==m.projection.name)continue;const h=o?c.text:c.icon;if(!h||c.fullyClipped||!h.segments.get().length)continue;const f=h.programConfigurations.get(r.id),p=o||c.sdfIcons,A=o?c.textSizeData:c.iconSizeData,E=y||0!==m.pitch,k=e.evaluateSizeForZoom(A,m.zoom);let M,P,I,O,D=[0,0],z=null;if(o){if(P=i.glyphAtlasTexture,I=d.LINEAR,M=i.glyphAtlasTexture.size,c.iconsInText){D=i.imageAtlasTexture.size,z=i.imageAtlasTexture;const e="composite"===A.kind||"camera"===A.kind;O=E||t.options.rotating||t.options.zooming||e?d.LINEAR:d.NEAREST}}else{const e=1!==r.layout.get("icon-size").constantOr(0)||c.iconsNeedLinear;P=i.imageAtlasTexture,I=p||t.options.rotating||t.options.zooming||e||E?d.LINEAR:d.NEAREST,M=i.imageAtlasTexture.size}const L=t.transform.calculatePixelsToTileUnitsMatrix(i),R=Qe(l.projMatrix,i.tileID.canonical,y,g,t.transform,L),F=t.terrain&&y&&v?e.invert(e.create(),R):nr,U=et(l.projMatrix,i.tileID.canonical,y,g,t.transform,L),N=C&&c.hasTextData(),j="none"!==r.layout.get("icon-text-fit")&&N&&c.hasIconData();if(v){const e=m.elevation,n=e?e.getAtTileOffsetFunc(l,m.center.lat,m.worldSize,m.projection):e=>[0,0,0];ot(c,l.projMatrix,t,o,R,U,y,u,n,l)}const V=v||o&&C||j,G=t.translatePosMatrix(l.projMatrix,i,a,s),q=V?nr:R,W=t.translatePosMatrix(U,i,a,s,!0),H=m.projection.createInversionMatrix(m,l.canonical),$=V?B.concat(["PROJECTED_POS_ON_VIEWPORT"]):B,X=p&&0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1);let Z;Z=p?c.iconsInText?Yn(A.kind,k,b,y,t,G,q,W,M,D,l,S,w,H):Zn(A.kind,k,b,y,t,G,q,W,o,M,!0,l,S,w,H):Xn(A.kind,k,b,y,t,G,q,W,o,M,l,S,w,H);const Y={program:t.useProgram(or(p,o,c),f,$),buffers:h,uniformValues:Z,atlasTexture:P,atlasTextureIcon:z,atlasInterpolation:I,atlasInterpolationIcon:O,isSDF:p,hasHalo:X,tile:i,labelPlaneMatrixInv:F};if(_&&c.canOverlap){x=!0;const t=h.segments.get();for(const n of t)T.push({segments:new e.SegmentVector([n]),sortKey:n.sortKey,state:Y})}else T.push({segments:h.segments,sortKey:0,state:Y})}x&&T.sort(((e,t)=>e.sortKey-t.sortKey));for(const e of T){const n=e.state;if(t.terrain&&t.terrain.setupElevationDraw(n.tile,n.program,{useDepthForOcclusion:!E,labelPlaneMatrixInv:n.labelPlaneMatrixInv}),p.activeTexture.set(d.TEXTURE0),n.atlasTexture.bind(n.atlasInterpolation,d.CLAMP_TO_EDGE),n.atlasTextureIcon&&(p.activeTexture.set(d.TEXTURE1),n.atlasTextureIcon&&n.atlasTextureIcon.bind(n.atlasInterpolationIcon,d.CLAMP_TO_EDGE)),n.isSDF){const i=n.uniformValues;n.hasHalo&&(i.u_is_halo=1,sr(n.buffers,e.segments,r,t,n.program,A,h,f,i)),i.u_is_halo=0}sr(n.buffers,e.segments,r,t,n.program,A,h,f,n.uniformValues)}}function sr(t,n,r,i,o,a,s,l,c){const u=i.context;o.draw(u,u.gl.TRIANGLES,a,s,l,e.CullFaceMode.disabled,c,r.id,t.layoutVertexBuffer,t.indexBuffer,n,r.paint,i.transform.zoom,t.programConfigurations.get(r.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function lr(t,n,r,i,o,a,s){const l=t.context.gl,c=r.paint.get("fill-pattern"),u=c&&c.constantOr(1),h=r.getCrossfadeParameters();let f,p,d,m,g;s?(p=u&&!r.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",f=l.LINES):(p=u?"fillPattern":"fill",f=l.TRIANGLES);for(const y of i){const i=n.getTile(y);if(u&&!i.patternsLoaded())continue;const v=i.getBucket(r);if(!v)continue;t.prepareDrawTile();const b=v.programConfigurations.get(r.id),_=t.useProgram(p,b);u&&(t.context.activeTexture.set(l.TEXTURE0),i.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),b.updatePaintBuffers(h));const x=c.constantOr(null);if(x&&i.imageAtlas){const e=i.imageAtlas,t=e.patternPositions[x.to.toString()],n=e.patternPositions[x.from.toString()];t&&n&&b.setConstantPatternPositions(t,n)}const A=t.translatePosMatrix(y.projMatrix,i,r.paint.get("fill-translate"),r.paint.get("fill-translate-anchor"));if(s){m=v.indexBuffer2,g=v.segments2;const e=t.terrain&&t.terrain.renderingToTexture?t.terrain.drapeBufferSize:[l.drawingBufferWidth,l.drawingBufferHeight];d="fillOutlinePattern"===p&&u?In(A,t,h,i,e):Pn(A,e)}else m=v.indexBuffer,g=v.segments,d=u?Mn(A,t,h,i):kn(A);t.prepareDrawProgram(t.context,_,y.toUnwrapped()),_.draw(t.context,f,o,t.stencilModeForClipping(y),a,e.CullFaceMode.disabled,d,r.id,v.layoutVertexBuffer,m,g,r.paint,t.transform.zoom,b)}}function cr(t,n,r,i,o,a,s){const l=t.context,c=l.gl,u=t.transform,h=r.paint.get("fill-extrusion-pattern"),f=h.constantOr(1),p=r.getCrossfadeParameters(),d=r.paint.get("fill-extrusion-opacity"),m=function(t){if("globe"!==t.projection.name)return 0;const n=Math.PI/32,r=Math.tan(n),i=e.earthRadius;return i*Math.sqrt(1+2*r*r)-i}(u),g="globe"===u.projection.name,y=g?e.globeToMercatorTransition(u.zoom):0,v=[e.mercatorXfromLng(u.center.lng),e.mercatorYfromLat(u.center.lat)],b=[];g&&b.push("PROJECTION_GLOBE_VIEW");for(const _ of i){const i=n.getTile(_),x=i.getBucket(r);if(!x||x.projection!==u.projection.name)continue;const A=x.programConfigurations.get(r.id),w=t.useProgram(f?"fillExtrusionPattern":"fillExtrusion",A,b);if(t.terrain){const e=t.terrain;if(t.style.terrainSetForDrapingOnly())e.setupElevationDraw(i,w,{useMeterToDem:!0});else{if(!x.enableTerrain)continue;if(e.setupElevationDraw(i,w,{useMeterToDem:!0}),ur(l,n,_,x,r,e),!x.centroidVertexBuffer){const e=w.attributes.a_centroid_pos;void 0!==e&&c.vertexAttrib2f(e,0,0)}}}f&&(t.context.activeTexture.set(c.TEXTURE0),i.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),A.updatePaintBuffers(p));const C=h.constantOr(null);if(C&&i.imageAtlas){const e=i.imageAtlas,t=e.patternPositions[C.to.toString()],n=e.patternPositions[C.from.toString()];t&&n&&A.setConstantPatternPositions(t,n)}const E=t.translatePosMatrix(_.projMatrix,i,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),S=u.projection.createInversionMatrix(u,_.canonical),T=r.paint.get("fill-extrusion-vertical-gradient"),B=f?Bn(E,t,T,d,_,p,i,m,y,v,S):Tn(E,t,T,d,_,m,y,v,S);t.prepareDrawProgram(l,w,_.toUnwrapped()),w.draw(l,l.gl.TRIANGLES,o,a,s,e.CullFaceMode.backCCW,B,r.id,x.layoutVertexBuffer,x.indexBuffer,x.segments,r.paint,t.transform.zoom,A,t.terrain?x.centroidVertexBuffer:null,g?x.layoutVertexExtBuffer:null)}}function ur(t,n,r,i,o,a){const s=[t=>{let n=t.canonical.x-1,r=t.wrap;return n<0&&(n=(1<<t.canonical.z)-1,r--),new e.OverscaledTileID(t.overscaledZ,r,t.canonical.z,n,t.canonical.y)},t=>{let n=t.canonical.x+1,r=t.wrap;return n===1<<t.canonical.z&&(n=0,r++),new e.OverscaledTileID(t.overscaledZ,r,t.canonical.z,n,t.canonical.y)},t=>new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,(0===t.canonical.y?1<<t.canonical.z:t.canonical.y)-1),t=>new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y===(1<<t.canonical.z)-1?0:t.canonical.y+1)],l=e=>{const t=n.getSource().minzoom,r=e=>{const t=n.getTileByID(e);if(t&&t.hasData())return t.getBucket(o)},i=[0,-1,1];for(const n of i){if(e.overscaledZ+n<t)continue;const i=r(e.calculateScaledKey(e.overscaledZ+n));if(i)return i}},c=[0,0,0],u=(t,n)=>(c[0]=Math.min(t.min.y,n.min.y),c[1]=Math.max(t.max.y,n.max.y),c[2]=e.EXTENT-n.min.x>t.max.x?n.min.x-e.EXTENT:t.max.x,c),h=(t,n)=>(c[0]=Math.min(t.min.x,n.min.x),c[1]=Math.max(t.max.x,n.max.x),c[2]=e.EXTENT-n.min.y>t.max.y?n.min.y-e.EXTENT:t.max.y,c),f=[(e,t)=>u(e,t),(e,t)=>u(t,e),(e,t)=>h(e,t),(e,t)=>h(t,e)],p=new e.pointGeometry(0,0);let d,m,g;const y=(t,n,i,o,s)=>{const l=[[o?i:t,o?t:i,0],[o?i:n,o?n:i,0]],c=s<0?e.EXTENT+s:s,u=[o?c:(t+n)/2,o?(t+n)/2:c,0];return 0===i&&s<0||0!==i&&s>0?a.getForTilePoints(g,[u],!0,m):l.push(u),a.getForTilePoints(r,l,!0,d),Math.max(l[0][2],l[1][2],u[2])/a.exaggeration()};for(let t=0;t<4;t++){const n=(t<2?1:5)-t,o=i.borders[t];if(0===o.length)continue;const c=g=s[t](r),u=l(c);if(!(u&&u instanceof e.FillExtrusionBucket&&u.enableTerrain))continue;if(i.borderDoneWithNeighborZ[t]===u.canonical.z&&u.borderDoneWithNeighborZ[n]===i.canonical.z)continue;if(m=a.findDEMTileFor(c),!m||!m.dem)continue;if(!d){const e=a.findDEMTileFor(r);if(!e||!e.dem)return;d=e}const h=u.borders[n];let v=0;const b=u.borderDoneWithNeighborZ[n]!==i.canonical.z;if(i.canonical.z===u.canonical.z){for(let r=0;r<o.length;r++){const a=i.featuresOnBorder[o[r]],s=a.borders[t];let l;for(;v<h.length&&(l=u.featuresOnBorder[h[v]],!(l.borders[n][1]>s[0]+3));)b&&u.encodeCentroid(void 0,l,!1),v++;if(l&&v<h.length){const r=v;let o=0;for(;!(l.borders[n][0]>s[1]-3)&&(o++,++v!==h.length);)l=u.featuresOnBorder[h[v]];if(l=u.featuresOnBorder[h[r]],a.intersectsCount()>1||l.intersectsCount()>1||1!==o){1!==o&&(v=r),i.encodeCentroid(void 0,a,!1),b&&u.encodeCentroid(void 0,l,!1);continue}const c=f[t](a,l),d=t%2?e.EXTENT-1:0;p.x=y(c[0],Math.min(e.EXTENT-1,c[1]),d,t<2,c[2]),p.y=0,i.encodeCentroid(p,a,!1),b&&u.encodeCentroid(p,l,!1)}else i.encodeCentroid(void 0,a,!1)}i.borderDoneWithNeighborZ[t]=u.canonical.z,i.needsCentroidUpdate=!0,b&&(u.borderDoneWithNeighborZ[n]=i.canonical.z,u.needsCentroidUpdate=!0)}else{for(const e of o)i.encodeCentroid(void 0,i.featuresOnBorder[e],!1);if(b){for(const e of h)u.encodeCentroid(void 0,u.featuresOnBorder[e],!1);u.borderDoneWithNeighborZ[n]=i.canonical.z,u.needsCentroidUpdate=!0}i.borderDoneWithNeighborZ[t]=u.canonical.z,i.needsCentroidUpdate=!0}}(i.needsCentroidUpdate||!i.centroidVertexBuffer&&0!==i.centroidVertexArray.length)&&i.uploadCentroid(t)}const hr=new e.Color(1,0,0,1),fr=new e.Color(0,1,0,1),pr=new e.Color(0,0,1,1),dr=new e.Color(1,0,1,1),mr=new e.Color(0,1,1,1);function gr(e,t,n,r){vr(e,0,t+n/2,e.transform.width,n,r)}function yr(e,t,n,r){vr(e,t-n/2,0,n,e.transform.height,r)}function vr(t,n,r,i,o,a){const s=t.context,l=s.gl;l.enable(l.SCISSOR_TEST),l.scissor(n*e.exported.devicePixelRatio,r*e.exported.devicePixelRatio,i*e.exported.devicePixelRatio,o*e.exported.devicePixelRatio),s.clear({color:a}),l.disable(l.SCISSOR_TEST)}function br(t,n,r){const i=t.context,o=i.gl,a="globe"===t.transform.projection.name,s=r.projMatrix,l=t.useProgram("debug",null,a?["PROJECTION_GLOBE_VIEW"]:null),c=n.getTileByID(r.key);t.terrain&&t.terrain.setupElevationDraw(c,l);const u=e.DepthMode.disabled,h=e.StencilMode.disabled,f=t.colorModeForRenderPass(),p="$debug";i.activeTexture.set(o.TEXTURE0),t.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),a?c._makeGlobeTileDebugBuffers(t.context,t.transform.projection):c._makeDebugTileBoundsBuffers(t.context,t.transform.projection);const d=c._tileDebugBuffer||t.debugBuffer,m=c._tileDebugIndexBuffer||t.debugIndexBuffer,g=c._tileDebugSegments||t.debugSegments;l.draw(i,o.LINE_STRIP,u,h,f,e.CullFaceMode.disabled,Rn(s,e.Color.red),p,d,m,g,null,null,null,c._globeTileDebugBorderBuffer);const y=c.latestRawTileData,v=Math.floor((y&&y.byteLength||0)/1024),b=n.getTile(r).tileSize,_=512/Math.min(b,512)*(r.overscaledZ/t.transform.zoom)*.5;let x=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(x+=` => ${r.overscaledZ}`),function(e,t){e.initDebugOverlayCanvas();const n=e.debugOverlayCanvas,r=e.context.gl,i=e.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,n.width,n.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(t,5,5),i.strokeText(t,5,5),e.debugOverlayTexture.update(n),e.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(t,`${x} ${v}kb`);const A=c._tileDebugTextBuffer||t.debugBuffer,w=c._tileDebugTextIndexBuffer||t.quadTriangleIndexBuffer,C=c._tileDebugTextSegments||t.debugSegments;l.draw(i,o.TRIANGLES,u,h,e.ColorMode.alphaBlended,e.CullFaceMode.disabled,Rn(s,e.Color.transparent,_),p,A,w,C,null,null,null,c._globeTileDebugTextBuffer)}const _r=e.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:xr}=_r;function Ar(e,t,n,r){e.emplaceBack(t,n,r)}class wr{constructor(t){this.vertexArray=new e.StructArrayLayout3f12,this.indices=new e.StructArrayLayout3ui6,Ar(this.vertexArray,-1,-1,1),Ar(this.vertexArray,1,-1,1),Ar(this.vertexArray,-1,1,1),Ar(this.vertexArray,1,1,1),Ar(this.vertexArray,-1,-1,-1),Ar(this.vertexArray,1,-1,-1),Ar(this.vertexArray,-1,1,-1),Ar(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=t.createVertexBuffer(this.vertexArray,xr),this.indexBuffer=t.createIndexBuffer(this.indices),this.segment=e.SegmentVector.simpleSegment(0,0,36,12)}}function Cr(t,n,r,i,o,a){const s=t.gl,l=n.paint.get("sky-atmosphere-color"),c=n.paint.get("sky-atmosphere-halo-color"),u=n.paint.get("sky-atmosphere-sun-intensity"),h=((e,t,n,r,i)=>({u_matrix_3f:e,u_sun_direction:t,u_sun_intensity:n,u_color_tint_r:[r.r,r.g,r.b,r.a],u_color_tint_m:[i.r,i.g,i.b,i.a],u_luminance:5e-5}))(e.fromMat4(e.create$1(),i),o,u,l,c);s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+a,n.skyboxTexture,0),r.draw(t,s.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.frontCW,h,"skyboxCapture",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}function Er(t,n){return e.transformMat4(t,t,n)}const Sr={symbol:function(t,n,r,i,o){if("translucent"!==t.renderPass)return;const a=e.StencilMode.disabled,s=t.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(t,n,r,i,o,a,s){const l=n.transform,c="map"===o,u="map"===a;for(const o of t){const t=i.getTile(o),a=t.getBucket(r);if(!a||a.projection!==l.projection.name||!a.text||!a.text.segments.get().length)continue;const h=e.evaluateSizeForZoom(a.textSizeData,l.zoom),f=n.transform.calculatePixelsToTileUnitsMatrix(t),p=Qe(o.projMatrix,t.tileID.canonical,u,c,n.transform,f),d="none"!==r.layout.get("icon-text-fit")&&a.hasIconData();if(h){const n=Math.pow(2,l.zoom-t.tileID.overscaledZ);ir(a,c,u,s,e.symbolSize,l,p,o,n,h,d,l.projection)}}}(i,t,r,n,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),o),0!==r.paint.get("icon-opacity").constantOr(1)&&ar(t,n,r,i,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),a,s),0!==r.paint.get("text-opacity").constantOr(1)&&ar(t,n,r,i,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),a,s),n.map.showCollisionBoxes&&(tr(t,n,r,i,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),tr(t,n,r,i,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))},circle:function(t,n,r,i){if("translucent"!==t.renderPass)return;const o=r.paint.get("circle-opacity"),a=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),l=void 0!==r.layout.get("circle-sort-key").constantOr(1);if(0===o.constantOr(1)&&(0===a.constantOr(1)||0===s.constantOr(1)))return;const c=t.context,u=c.gl,h=t.transform,f=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),p=e.StencilMode.disabled,d=t.colorModeForRenderPass(),m="globe"===h.projection.name,g=[e.mercatorXfromLng(h.center.lng),e.mercatorYfromLat(h.center.lat)],y=[];for(let o=0;o<i.length;o++){const a=i[o],s=n.getTile(a),c=s.getBucket(r);if(!c)continue;const u=c.programConfigurations.get(r.id),f=zn(r);m&&f.push("PROJECTION_GLOBE_VIEW");const p=t.useProgram("circle",u,f),d=c.layoutVertexBuffer,v=c.globeExtVertexBuffer,b=c.indexBuffer,_=h.projection.createInversionMatrix(h,a.canonical),x={programConfiguration:u,program:p,layoutVertexBuffer:d,globeExtVertexBuffer:v,indexBuffer:b,uniformValues:Dn(t,a,s,_,g,r),tile:s};if(l){const t=c.segments.get();for(const n of t)y.push({segments:new e.SegmentVector([n]),sortKey:n.sortKey,state:x})}else y.push({segments:c.segments,sortKey:0,state:x})}l&&y.sort(((e,t)=>e.sortKey-t.sortKey));const v={useDepthForOcclusion:!m};for(const n of y){const{programConfiguration:i,program:o,layoutVertexBuffer:a,globeExtVertexBuffer:s,indexBuffer:l,uniformValues:g,tile:y}=n.state,b=n.segments;t.terrain&&t.terrain.setupElevationDraw(y,o,v),t.prepareDrawProgram(c,o,y.tileID.toUnwrapped()),o.draw(c,u.TRIANGLES,f,p,d,e.CullFaceMode.disabled,g,r.id,a,l,b,r.paint,h.zoom,i,m?s:null)}},heatmap:function(t,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){const o=t.context,a=o.gl,s=e.StencilMode.disabled,l=new e.ColorMode([a.ONE,a.ONE],e.Color.transparent,[!0,!0,!0,!0]);!function(e,t,n){const r=e.gl;e.activeTexture.set(r.TEXTURE1),e.viewport.set([0,0,t.width/4,t.height/4]);let i=n.heatmapFbo;if(i)r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),e.bindFramebuffer.set(i.framebuffer);else{const o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),i=n.heatmapFbo=e.createFramebuffer(t.width/4,t.height/4,!1),function(e,t,n,r){const i=e.gl;i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t.width/4,t.height/4,0,i.RGBA,e.extRenderToTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:i.UNSIGNED_BYTE,null),r.colorAttachment.set(n)}(e,t,o,i)}}(o,t,r),o.clear({color:e.Color.transparent});const c=t.transform,u="globe"===c.projection.name,h=u?["PROJECTION_GLOBE_VIEW"]:null,f=[e.mercatorXfromLng(c.center.lng),e.mercatorYfromLat(c.center.lat)];for(let p=0;p<i.length;p++){const d=i[p];if(n.hasRenderableParent(d))continue;const m=n.getTile(d),g=m.getBucket(r);if(!g)continue;const y=g.programConfigurations.get(r.id),v=t.useProgram("heatmap",y,h),{zoom:b}=t.transform;t.terrain&&t.terrain.setupElevationDraw(m,v),t.prepareDrawProgram(o,v,d.toUnwrapped());const _=c.projection.createInversionMatrix(c,d.canonical);v.draw(o,a.TRIANGLES,e.DepthMode.disabled,s,l,e.CullFaceMode.disabled,Un(t,d,m,_,f,b,r.paint.get("heatmap-intensity")),r.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,r.paint,t.transform.zoom,y,u?g.globeExtVertexBuffer:null)}o.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,n){const r=t.context,i=r.gl,o=n.heatmapFbo;if(!o)return;r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);let a=n.colorRampTexture;a||(a=n.colorRampTexture=new e.Texture(r,n.colorRamp,i.RGBA)),a.bind(i.LINEAR,i.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(r,i.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,((e,t,n,r)=>({u_image:0,u_color_ramp:1,u_opacity:t.paint.get("heatmap-opacity")}))(0,n),n.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,n.paint,t.transform.zoom)}(t,r))},line:function(t,n,r,i){if("translucent"!==t.renderPass)return;const o=r.paint.get("line-opacity"),a=r.paint.get("line-width");if(0===o.constantOr(1)||0===a.constantOr(1))return;const s=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),l=t.colorModeForRenderPass(),c=t.terrain&&t.terrain.renderingToTexture?1:e.exported.devicePixelRatio,u=r.paint.get("line-dasharray"),h=u.constantOr(1),f=r.layout.get("line-cap"),p=r.paint.get("line-pattern"),d=p.constantOr(1),m=r.paint.get("line-gradient"),g=r.getCrossfadeParameters(),y=d?"linePattern":"line",v=t.context,b=v.gl,_=(e=>{const t=[];qn(e)&&t.push("RENDER_LINE_DASH"),e.paint.get("line-gradient")&&t.push("RENDER_LINE_GRADIENT");const n=e.paint.get("line-pattern").constantOr(1),r=1!==e.paint.get("line-opacity").constantOr(1);return!n&&r&&t.push("RENDER_LINE_ALPHA_DISCARD"),t})(r);let x=_.includes("RENDER_LINE_ALPHA_DISCARD");t.terrain&&t.terrain.clipOrMaskOverlapStencilType()&&(x=!1);for(const o of i){const i=n.getTile(o);if(d&&!i.patternsLoaded())continue;const a=i.getBucket(r);if(!a)continue;t.prepareDrawTile();const A=a.programConfigurations.get(r.id),w=t.useProgram(y,A,_),C=p.constantOr(null);if(C&&i.imageAtlas){const e=i.imageAtlas,t=e.patternPositions[C.to.toString()],n=e.patternPositions[C.from.toString()];t&&n&&A.setConstantPatternPositions(t,n)}const E=u.constantOr(null),S=f.constantOr(null);if(!d&&E&&S&&i.lineAtlas){const e=i.lineAtlas,t=e.getDash(E.to,S),n=e.getDash(E.from,S);t&&n&&A.setConstantPatternPositions(t,n)}const T=t.terrain?o.projMatrix:null,B=d?jn(t,i,r,g,T,c):Nn(t,i,r,g,T,a.lineClipsArray.length,c);if(m){const i=a.gradients[r.id];let s=i.texture;if(r.gradientVersion!==i.version){let l=256;if(r.stepInterpolant){const r=n.getSource().maxzoom,i=o.canonical.z===r?Math.ceil(1<<t.transform.maxZoom-o.canonical.z):1;l=e.clamp(e.nextPowerOfTwo(a.maxLineLength/e.EXTENT*1024*i),256,v.maxTextureSize)}i.gradient=e.renderColorRamp({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:l,image:i.gradient||void 0,clips:a.lineClipsArray}),i.texture?i.texture.update(i.gradient):i.texture=new e.Texture(v,i.gradient,b.RGBA),i.version=r.gradientVersion,s=i.texture}v.activeTexture.set(b.TEXTURE1),s.bind(r.stepInterpolant?b.NEAREST:b.LINEAR,b.CLAMP_TO_EDGE)}h&&(v.activeTexture.set(b.TEXTURE0),i.lineAtlasTexture.bind(b.LINEAR,b.REPEAT),A.updatePaintBuffers(g)),d&&(v.activeTexture.set(b.TEXTURE0),i.imageAtlasTexture.bind(b.LINEAR,b.CLAMP_TO_EDGE),A.updatePaintBuffers(g)),t.prepareDrawProgram(v,w,o.toUnwrapped());const k=n=>{w.draw(v,b.TRIANGLES,s,n,l,e.CullFaceMode.disabled,B,r.id,a.layoutVertexBuffer,a.indexBuffer,a.segments,r.paint,t.transform.zoom,A,a.layoutVertexBuffer2)};if(x){const n=t.stencilModeForClipping(o).ref;0===n&&t.terrain&&v.clear({stencil:0});const r={func:b.EQUAL,mask:255};B.u_alpha_discard_threshold=.8,k(new e.StencilMode(r,n,255,b.KEEP,b.KEEP,b.INVERT)),B.u_alpha_discard_threshold=0,k(new e.StencilMode(r,n,255,b.KEEP,b.KEEP,b.KEEP))}else k(t.stencilModeForClipping(o))}x&&(t.resetStencilClippingMasks(),t.terrain&&v.clear({stencil:0}))},fill:function(t,n,r,i){const o=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0===a.constantOr(1))return;const s=t.colorModeForRenderPass(),l=r.paint.get("fill-pattern"),c=t.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===o.constantOr(e.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(t.renderPass===c){const o=t.depthModeForSublayer(1,"opaque"===t.renderPass?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly);lr(t,n,r,i,o,s,!1)}if("translucent"===t.renderPass&&r.paint.get("fill-antialias")){const o=t.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,e.DepthMode.ReadOnly);lr(t,n,r,i,o,s,!0)}},"fill-extrusion":function(t,n,r,i){const o=r.paint.get("fill-extrusion-opacity");if(0!==o&&"translucent"===t.renderPass){const a=new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);if(1!==o||r.paint.get("fill-extrusion-pattern").constantOr(1))cr(t,n,r,i,a,e.StencilMode.disabled,e.ColorMode.disabled),cr(t,n,r,i,a,t.stencilModeFor3D(),t.colorModeForRenderPass()),t.resetStencilClippingMasks();else{const o=t.colorModeForRenderPass();cr(t,n,r,i,a,e.StencilMode.disabled,o)}}},hillshade:function(t,n,r,i){if("offscreen"!==t.renderPass&&"translucent"!==t.renderPass)return;const o=t.context,a=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),s=t.colorModeForRenderPass(),l=t.terrain&&t.terrain.renderingToTexture,[c,u]="translucent"!==t.renderPass||l?[{},i]:t.stencilConfigForOverlap(i);for(const i of u){const o=n.getTile(i);if(o.needsHillshadePrepare&&"offscreen"===t.renderPass)ln(t,o,r,a,e.StencilMode.disabled,s);else if("translucent"===t.renderPass){const e=l&&t.terrain?t.terrain.stencilModeForRTTOverlap(i):c[i.overscaledZ];an(t,i,o,r,a,e,s)}}o.viewport.set([0,0,t.width,t.height]),t.resetStencilClippingMasks()},raster:function(t,n,r,i,o,a){if("translucent"!==t.renderPass)return;if(0===r.paint.get("raster-opacity"))return;if(!i.length)return;const s=t.context,l=s.gl,c=n.getSource(),u=t.useProgram("raster"),h=t.colorModeForRenderPass(),f=t.terrain&&t.terrain.renderingToTexture,[p,d]=c instanceof Be||f?[{},i]:t.stencilConfigForOverlap(i),m=d[d.length-1].overscaledZ,g=!t.options.moving;for(const i of d){const o=f?e.DepthMode.disabled:t.depthModeForSublayer(i.overscaledZ-m,1===r.paint.get("raster-opacity")?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly,l.LESS),d=i.toUnwrapped(),y=n.getTile(i);if(f&&(!y||!y.hasData()))continue;const v=f?i.projMatrix:t.transform.calculateProjMatrix(d,g),b=t.terrain&&f?t.terrain.stencilModeForRTTOverlap(i):p[i.overscaledZ],_=a?0:r.paint.get("raster-fade-duration");y.registerFadeDuration(_);const x=n.findLoadedParent(i,0),A=yn(y,x,n,t.transform,_);let w,C;t.terrain&&t.terrain.prepareDrawTile();const E="nearest"===r.paint.get("raster-resampling")?l.NEAREST:l.LINEAR;s.activeTexture.set(l.TEXTURE0),y.texture.bind(E,l.CLAMP_TO_EDGE),s.activeTexture.set(l.TEXTURE1),x?(x.texture.bind(E,l.CLAMP_TO_EDGE),w=Math.pow(2,x.tileID.overscaledZ-y.tileID.overscaledZ),C=[y.tileID.canonical.x*w%1,y.tileID.canonical.y*w%1]):y.texture.bind(E,l.CLAMP_TO_EDGE);const S=Wn(v,C||[0,0],w||1,A,r,c instanceof Be?c.perspectiveTransform:[0,0]);if(t.prepareDrawProgram(s,u,d),c instanceof Be)c.boundsBuffer&&c.boundsSegments&&u.draw(s,l.TRIANGLES,o,e.StencilMode.disabled,h,e.CullFaceMode.disabled,S,r.id,c.boundsBuffer,t.quadTriangleIndexBuffer,c.boundsSegments);else{const{tileBoundsBuffer:n,tileBoundsIndexBuffer:i,tileBoundsSegments:a}=t.getTileBoundsBuffers(y);u.draw(s,l.TRIANGLES,o,b,h,e.CullFaceMode.disabled,S,r.id,n,i,a)}}t.resetStencilClippingMasks()},background:function(t,n,r,i){const o=r.paint.get("background-color"),a=r.paint.get("background-opacity");if(0===a)return;const s=t.context,l=s.gl,c=t.transform,u=c.tileSize,h=r.paint.get("background-pattern");if(t.isPatternMissing(h))return;const f=!h&&1===o.a&&1===a&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass!==f)return;const p=e.StencilMode.disabled,d=t.depthModeForSublayer(0,"opaque"===f?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly),m=t.colorModeForRenderPass(),g=t.useProgram(h?"backgroundPattern":"background");let y,v=i;v||(y=t.getBackgroundTiles(),v=Object.values(y).map((e=>e.tileID))),h&&(s.activeTexture.set(l.TEXTURE0),t.imageManager.bind(t.context));const b=r.getCrossfadeParameters();for(const f of v){const v=f.toUnwrapped(),_=i?f.projMatrix:t.transform.calculateProjMatrix(v);t.prepareDrawTile();const x=n?n.getTile(f):y?y[f.key]:new e.Tile(f,u,c.zoom,t),A=h?Jn(_,a,t,h,{tileID:f,tileSize:u},b):Kn(_,a,o);t.prepareDrawProgram(s,g,v);const{tileBoundsBuffer:w,tileBoundsIndexBuffer:C,tileBoundsSegments:E}=t.getTileBoundsBuffers(x);g.draw(s,l.TRIANGLES,d,p,m,e.CullFaceMode.disabled,A,r.id,w,C,E)}},sky:function(t,n,r){const i=t.transform,o="mercator"===i.projection.name||"globe"===i.projection.name?1:e.smoothstep(7,8,i.zoom),a=r.paint.get("sky-opacity")*o;if(0===a)return;const s=t.context,l=r.paint.get("sky-type"),c=new e.DepthMode(s.gl.LEQUAL,e.DepthMode.ReadOnly,[0,1]),u=t.frameCounter/1e3%1;"atmosphere"===l?"offscreen"===t.renderPass?r.needsSkyboxCapture(t)&&(function(t,n,r,i){const o=t.context,a=o.gl;let s=n.skyboxFbo;if(!s){s=n.skyboxFbo=o.createFramebuffer(32,32,!1),n.skyboxGeometry=new wr(o),n.skyboxTexture=o.gl.createTexture(),a.bindTexture(a.TEXTURE_CUBE_MAP,n.skyboxTexture),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MAG_FILTER,a.LINEAR);for(let e=0;e<6;++e)a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,a.RGBA,32,32,0,a.RGBA,a.UNSIGNED_BYTE,null)}o.bindFramebuffer.set(s.framebuffer),o.viewport.set([0,0,32,32]);const l=n.getCenter(t,!0),c=t.useProgram("skyboxCapture"),u=new Float64Array(16);e.identity(u),e.rotateY(u,u,.5*-Math.PI),Cr(o,n,c,u,l,0),e.identity(u),e.rotateY(u,u,.5*Math.PI),Cr(o,n,c,u,l,1),e.identity(u),e.rotateX(u,u,.5*-Math.PI),Cr(o,n,c,u,l,2),e.identity(u),e.rotateX(u,u,.5*Math.PI),Cr(o,n,c,u,l,3),e.identity(u),Cr(o,n,c,u,l,4),e.identity(u),e.rotateY(u,u,Math.PI),Cr(o,n,c,u,l,5),o.viewport.set([0,0,t.width,t.height])}(t,r),r.markSkyboxValid(t)):"sky"===t.renderPass&&function(t,n,r,i,o){const a=t.context,s=a.gl,l=t.transform,c=t.useProgram("skybox");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_CUBE_MAP,n.skyboxTexture);const u=((e,t,n,r,i)=>({u_matrix:e,u_sun_direction:t,u_cubemap:0,u_opacity:r,u_temporal_offset:i}))(l.skyboxMatrix,n.getCenter(t,!1),0,i,o);t.prepareDrawProgram(a,c),c.draw(a,s.TRIANGLES,r,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,u,"skybox",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(t,r,c,a,u):"gradient"===l&&"sky"===t.renderPass&&function(t,n,r,i,o){const a=t.context,s=a.gl,l=t.transform,c=t.useProgram("skyboxGradient");n.skyboxGeometry||(n.skyboxGeometry=new wr(a)),a.activeTexture.set(s.TEXTURE0);let u=n.colorRampTexture;u||(u=n.colorRampTexture=new e.Texture(a,n.colorRamp,s.RGBA)),u.bind(s.LINEAR,s.CLAMP_TO_EDGE);const h=((t,n,r,i,o)=>({u_matrix:t,u_color_ramp:0,u_center_direction:n,u_radius:e.degToRad(r),u_opacity:i,u_temporal_offset:o}))(l.skyboxMatrix,n.getCenter(t,!1),n.paint.get("sky-gradient-radius"),i,o);t.prepareDrawProgram(a,c),c.draw(a,s.TRIANGLES,r,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,h,"skyboxGradient",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(t,r,c,a,u)},debug:function(e,t,n){for(let r=0;r<n.length;r++)br(e,t,n[r])},custom:function(t,n,r){const i=t.context,o=r.implementation;if(t.transform.projection.unsupportedLayers&&t.transform.projection.unsupportedLayers.includes("custom"))e.warnOnce("Custom layers are not yet supported with non-mercator projections. Use mercator to enable custom layers.");else if("offscreen"===t.renderPass){const e=o.prerender;e&&(t.setCustomLayerDefaults(),i.setColorMode(t.colorModeForRenderPass()),e.call(o,i.gl,t.transform.customLayerMatrix()),i.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),i.setColorMode(t.colorModeForRenderPass()),i.setStencilMode(e.StencilMode.disabled);const n="3d"===o.renderingMode?new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,e.DepthMode.ReadOnly);i.setDepthMode(n),o.render(i.gl,t.transform.customLayerMatrix()),i.setDirty(),t.setBaseState(),i.bindFramebuffer.set(null)}}};class Tr{constructor(t,n){this.context=new Ce(t),this.transform=n,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=e.SourceCache.maxUnderzooming+e.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Vt,this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this._tileClippingMaskIDs=new Map,this._skippedStencilTileIDs=new Set}updateTerrain(e,t){const n=!!e&&!!e.terrain&&this.transform.projection.supportsTerrain;if(!(n||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new An(this,e));const r=this._terrain;this.transform.elevation=n?r:null,r.update(e,this.transform,t)}_updateFog(e){const t=e.fog;if(!t||t.getOpacity(this.transform.pitch)<1||t.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[n,r]=t.getFovAdjustedRange(this.transform._fov);if(n>r)return void(this.transform.fogCullDistSq=null);const i=n+.78*(r-n);this.transform.fogCullDistSq=i*i}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(t,n){if(this.width=t*e.exported.devicePixelRatio,this.height=n*e.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const e of this.style.order)this.style._layers[e].resize()}setup(){const t=this.context,n=new e.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(e.EXTENT,0),n.emplaceBack(0,e.EXTENT),n.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(n,e.posAttributes.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);const r=new e.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(e.EXTENT,0),r.emplaceBack(0,e.EXTENT),r.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=t.createVertexBuffer(r,e.posAttributes.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);const i=new e.StructArrayLayout2i4;i.emplaceBack(-1,-1),i.emplaceBack(1,-1),i.emplaceBack(-1,1),i.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(i,e.posAttributes.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);const o=new e.StructArrayLayout4i8;o.emplaceBack(0,0,0,0),o.emplaceBack(e.EXTENT,0,e.EXTENT,0),o.emplaceBack(0,e.EXTENT,0,e.EXTENT),o.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.mercatorBoundsBuffer=t.createVertexBuffer(o,e.boundsAttributes.members),this.mercatorBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);const a=new e.StructArrayLayout3ui6;a.emplaceBack(0,1,2),a.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(a);const s=new e.StructArrayLayout1ui2;for(const e of[0,1,3,2,0])s.emplaceBack(e);this.debugIndexBuffer=t.createIndexBuffer(s),this.emptyTexture=new e.Texture(t,new e.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),t.gl.RGBA),this.identityMat=e.create();const l=this.context.gl;this.stencilClearMode=new e.StencilMode({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO),this.loadTimeStamps.push(e.window.performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(e){return e._makeTileBoundsBuffers(this.context,this.transform.projection),e._tileBoundsBuffer?{tileBoundsBuffer:e._tileBoundsBuffer,tileBoundsIndexBuffer:e._tileBoundsIndexBuffer,tileBoundsSegments:e._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const t=this.context,n=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs.clear(),this._skippedStencilTileIDs.clear(),this.useProgram("clippingMask").draw(t,n.TRIANGLES,e.DepthMode.disabled,this.stencilClearMode,e.ColorMode.disabled,e.CullFaceMode.disabled,gn(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs.clear(),this._skippedStencilTileIDs.clear())}_renderTileClippingMasks(t,n,r){if(!n||this.currentStencilSource===n.id||!t.isTileClipped()||!r||0===r.length)return;const i=[];let o=!1;if(this._tileClippingMaskIDs&&!this.terrain){for(const e of r)if(this._tileClippingMaskIDs.has(e.key)||(o=!0),this._skippedStencilTileIDs.has(e.key)){if(!n.getTile(e).getBucket(t))continue;this._skippedStencilTileIDs.delete(e.key),i.push(e)}if(!o&&0===i.length)return}const a=this.context,s=a.gl;a.setColorMode(e.ColorMode.disabled),a.setDepthMode(e.DepthMode.disabled);const l=this.useProgram("clippingMask"),c=t=>{const r=n.getTile(t),{tileBoundsBuffer:i,tileBoundsIndexBuffer:o,tileBoundsSegments:c}=this.getTileBoundsBuffers(r);l.draw(a,s.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:s.GREATER,mask:255},this._tileClippingMaskIDs.get(t.key)||0,255,s.KEEP,s.KEEP,s.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,gn(t.projMatrix),"$clipping",i,o,c)};if(!o&&i.length>0)for(const e of i)c(e);else{(0===this._tileClippingMaskIDs.size||this.nextStencilID+r.length>256)&&this.clearStencil(),this._tileClippingMaskIDs.clear(),this._skippedStencilTileIDs.clear();for(const e of r)this._tileClippingMaskIDs.set(e.key,this.nextStencilID++),n.getTile(e).getBucket(t)?c(e):this._skippedStencilTileIDs.add(e.key)}0===this._skippedStencilTileIDs.size&&(this.currentStencilSource=n.id)}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,n=this.context.gl;return new e.StencilMode({func:n.NOTEQUAL,mask:255},t,255,n.KEEP,n.KEEP,n.REPLACE)}stencilModeForClipping(t){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(t);const n=this.context.gl;return new e.StencilMode({func:n.EQUAL,mask:255},this._tileClippingMaskIDs.get(t.key)||0,0,n.KEEP,n.KEEP,n.REPLACE)}stencilConfigForOverlap(t){const n=this.context.gl,r=t.sort(((e,t)=>t.overscaledZ-e.overscaledZ)),i=r[r.length-1].overscaledZ,o=r[0].overscaledZ-i+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();const t={};for(let r=0;r<o;r++)t[r+i]=new e.StencilMode({func:n.GEQUAL,mask:255},r+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=o,[t,r]}return[{[i]:e.StencilMode.disabled},r]}colorModeForRenderPass(){const t=this.context.gl;if(this._showOverdrawInspector){const n=1/8;return new e.ColorMode([t.CONSTANT_COLOR,t.ONE],new e.Color(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?e.ColorMode.unblended:e.ColorMode.alphaBlended}depthModeForSublayer(t,n,r){if(!this.opaquePassEnabledForLayer())return e.DepthMode.disabled;const i=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new e.DepthMode(r||this.context.gl.LEQUAL,n,[i,i])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,n){this.style=t,this.options=n,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.exported.now()),this.imageManager.beginFrame();const r=this.style.order,i=this.style._sourceCaches;for(const e in i){const t=i[e];t.used&&t.prepare(this.context)}const o={},a={},s={};for(const e in i){const t=i[e];o[e]=t.getVisibleCoordinates(),a[e]=o[e].slice().reverse(),s[e]=t.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let e=0;e<r.length;e++)if(this.style._layers[r[e]].is3D()){this.opaquePassCutoff=e;break}if(this.terrain&&(this.terrain.updateTileBinding(s),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new e.GlobeSharedBuffers(this.context)),!e.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const e of r){const n=this.style._layers[e],r=t._getLayerSourceCache(n);if(!n.hasOffscreenPass()||n.isHidden(this.transform.zoom))continue;const i=r?a[r.id]:void 0;("custom"===n.type||n.isSky()||i&&i.length)&&this.renderLayer(this,r,n,i)}this.depthRangeFor3D=[0,1-(t.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);let l=e.Color.transparent;if(this.style.fog&&this.style.fog.getOpacity(this.transform.pitch)&&(l=this.style.fog.properties.get("color")),this.context.clear({color:n.showOverdrawInspector?e.Color.black:l,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){const e=this.style._layers[r[this.currentLayer]],n=t._getLayerSourceCache(e);if(e.isSky())continue;const i=n?a[n.id]:void 0;this._renderTileClippingMasks(e,n,i),this.renderLayer(this,n,e,i)}if(this.renderPass="sky",(e.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<r.length;this.currentLayer++){const e=this.style._layers[r[this.currentLayer]],n=t._getLayerSourceCache(e);e.isSky()&&this.renderLayer(this,n,e,n?a[n.id]:void 0)}for("globe"===this.transform.projection.name&&function(t){const n=t.context,r=n.gl,i=t.transform,o=new e.DepthMode(r.LEQUAL,e.DepthMode.ReadOnly,[0,1]),a=t.useProgram("globeAtmosphere"),s=i.centerOffset,l=i._camera.getCameraToClipPerspective(i._fov,i.width/i.height,i._nearZ,i._farZ);l[8]=2*-s.x/i.width,l[9]=2*s.y/i.height;const c=e.invert([],l),u=e.mul([],c,i.projMatrix),h={u_frustum_tl:Er([-1,1,1],c),u_frustum_tr:Er([1,1,1],c),u_frustum_br:Er([1,-1,1],c),u_frustum_bl:Er([-1,-1,1],c),u_globe_pos:Er([i.globeMatrix[12],i.globeMatrix[13],i.globeMatrix[14]],u),u_globe_radius:i.worldSize/2/Math.PI-1,u_opacity:1-e.globeToMercatorTransition(i.zoom),u_fadeout_range:2,u_start_color:[1,1,1],u_end_color:[.0118,.7451,.9882]};t.prepareDrawProgram(n,a);const f=t.globeSharedBuffers;f&&a.draw(n,r.TRIANGLES,o,e.StencilMode.disabled,e.ColorMode.alphaBlended,e.CullFaceMode.backCW,h,"skybox",f.atmosphereVertexBuffer,f.atmosphereIndexBuffer,f.atmosphereSegments)}(this),this.renderPass="translucent",this.currentLayer=0;this.currentLayer<r.length;){const e=this.style._layers[r[this.currentLayer]],n=t._getLayerSourceCache(e);if(e.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(e)){if(e.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const i=n?("symbol"===e.type?s:a)[n.id]:void 0;this._renderTileClippingMasks(e,n,n?o[n.id]:void 0),this.renderLayer(this,n,e,i),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry){let n=null;e.values(this.style._layers).forEach((e=>{const r=t._getLayerSourceCache(e);r&&!e.isHidden(this.transform.zoom)&&(!n||n.getSource().maxzoom<r.getSource().maxzoom)&&(n=r)})),n&&this.options.showTileBoundaries&&Sr.debug(this,n,n.getVisibleCoordinates())}this.options.showPadding&&function(e){const t=e.transform.padding;gr(e,e.transform.height-(t.top||0),3,hr),gr(e,t.bottom||0,3,fr),yr(e,t.left||0,3,pr),yr(e,e.transform.width-(t.right||0),3,dr);const n=e.transform.centerPoint;!function(e,t,n,r){vr(e,t-1,n-10,2,20,r),vr(e,t-10,n-1,20,2,r)}(e,n.x,e.transform.height-n.y,mr)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(e.window.performance.now()),this.saveCanvasCopy())}renderLayer(e,t,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"sky"===n.type||"custom"===n.type||r&&r.length)&&(this.id=n.id,this.gpuTimingStart(n),e.transform.projection.unsupportedLayers&&e.transform.projection.unsupportedLayers.includes(n.type)||Sr[n.type](e,t,n,r,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(e){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;let n=this.gpuTimers[e.id];n||(n=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:t.createQueryEXT()}),n.calls++,t.beginQueryEXT(t.TIME_ELAPSED_EXT,n.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}collectGpuTimers(){const e=this.gpuTimers;return this.gpuTimers={},e}queryGpuTimers(e){const t={};for(const n in e){const r=e[n],i=this.context.extTimerQuery,o=i.getQueryObjectEXT(r.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(r.query),t[n]=o}return t}translatePosMatrix(t,n,r,i,o){if(!r[0]&&!r[1])return t;const a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){const e=Math.sin(a),t=Math.cos(a);r=[r[0]*t-r[1]*e,r[0]*e+r[1]*t]}const s=[o?r[0]:O(n,r[0],this.transform.zoom),o?r[1]:O(n,r[1],this.transform.zoom),0],l=new Float32Array(16);return e.translate(l,t,s),l}saveTileTexture(e){const t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const t=this._tileTextures[e];return t&&t.length>0?t.pop():null}isPatternMissing(e){if(!e)return!1;if(!e.from||!e.to)return!0;const t=this.imageManager.getPattern(e.from.toString()),n=this.imageManager.getPattern(e.to.toString());return!t||!n}currentGlobalDefines(){const e=this.terrain&&this.terrain.renderingToTexture,t=this.style&&this.style.fog,n=[];return this.terrain&&!this.terrain.renderingToTexture&&n.push("TERRAIN"),t&&!e&&0!==t.getOpacity(this.transform.pitch)&&n.push("FOG"),e&&n.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&n.push("OVERDRAW_INSPECTOR"),n}useProgram(e,t,n){this.cache=this.cache||{};const r=n||[],i=this.currentGlobalDefines().concat(r),o=Cn.cacheKey(e,i,t);return this.cache[o]||(this.cache[o]=new Cn(this.context,e,tn[e],t,Qn[e],i)),this.cache[o]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(e,t,n){if(this.terrain&&this.terrain.renderingToTexture)return;const r=this.style.fog;if(r){const i=r.getOpacity(this.transform.pitch);0!==i&&t.setFogUniformValues(e,((e,t,n,r)=>{const i=t.properties.get("color"),o=e.frameCounter/1e3%1,a=[i.r/i.a,i.g/i.a,i.b/i.a,r];return{u_fog_matrix:n?e.transform.calculateFogTileMatrix(n):e.identityMat,u_fog_range:t.getFovAdjustedRange(e.transform._fov),u_fog_color:a,u_fog_horizon_blend:t.properties.get("horizon-blend"),u_fog_temporal_offset:o}})(this,r,n,i))}}setTileLoadedFlag(e){this.tileLoaded=e}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const e=this.context.gl,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.copyTexImage2D(e.TEXTURE_2D,0,e.RGBA,0,0,e.drawingBufferWidth,e.drawingBufferHeight,0),t}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const e=this.style&&this.style.fog;return!!e&&0!==e.getOpacity(this.transform.pitch)}getBackgroundTiles(){const t=this._backgroundTiles,n=this._backgroundTiles={},r=this.transform.coveringTiles({tileSize:512});for(const i of r)n[i.key]=t[i.key]||new e.Tile(i,512,this.transform.tileZoom,this);return n}clearBackgroundTiles(){this._backgroundTiles={}}}class Br{constructor(e=0,t=0,n=0,r=0){if(isNaN(e)||e<0||isNaN(t)||t<0||isNaN(n)||n<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=t,this.left=n,this.right=r}interpolate(t,n,r){return null!=n.top&&null!=t.top&&(this.top=e.number(t.top,n.top,r)),null!=n.bottom&&null!=t.bottom&&(this.bottom=e.number(t.bottom,n.bottom,r)),null!=n.left&&null!=t.left&&(this.left=e.number(t.left,n.left,r)),null!=n.right&&null!=t.right&&(this.right=e.number(t.right,n.right,r)),this}getCenter(t,n){const r=e.clamp((this.left+t-this.right)/2,0,t),i=e.clamp((this.top+n-this.bottom)/2,0,n);return new e.pointGeometry(r,i)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new Br(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function kr(t,n){const r=e.getColumn(t,3);e.fromQuat(t,n),e.setColumn(t,3,r)}function Mr(t,n){const r=e.identity$1([]);return e.rotateZ$1(r,r,-n),e.rotateX$1(r,r,-t),r}function Pr(t,n){const r=[t[0],t[1],0],i=[n[0],n[1],0];if(e.length(r)>=1e-15){const t=e.normalize([],r);e.scale$2(i,t,e.dot(i,t)),n[0]=i[0],n[1]=i[1]}const o=e.cross([],n,t);if(e.len(o)<1e-15)return null;const a=Math.atan2(-o[1],o[0]);return Mr(Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2]),a)}class Ir{constructor(e,t){this.position=e,this.orientation=t}get position(){return this._position}set position(t){if(t){const n=t instanceof e.MercatorCoordinate?t:new e.MercatorCoordinate(t[0],t[1],t[2]);this._renderWorldCopies&&(n.x=e.wrap(n.x,0,1)),this._position=n}else this._position=null}lookAtPoint(t,n){if(this.orientation=null,!this.position)return;const r=this._elevation?this._elevation.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(t)):0,i=this.position,o=e.MercatorCoordinate.fromLngLat(t,r),a=[o.x-i.x,o.y-i.y,o.z-i.z];n||(n=[0,0,1]),n[2]=Math.abs(n[2]),this.orientation=Pr(a,n)}setPitchBearing(t,n){this.orientation=Mr(e.degToRad(t),e.degToRad(-n))}}class Or{constructor(t,n){this._transform=e.identity([]),this.orientation=n,this.position=t}get mercatorPosition(){const t=this.position;return new e.MercatorCoordinate(t[0],t[1],t[2])}get position(){const t=e.getColumn(this._transform,3);return[t[0],t[1],t[2]]}set position(t){var n;t&&e.setColumn(this._transform,3,[(n=t)[0],n[1],n[2],1])}get orientation(){return this._orientation}set orientation(t){this._orientation=t||e.identity$1([]),t&&kr(this._transform,this._orientation)}getPitchBearing(){const e=this.forward(),t=this.right();return{bearing:Math.atan2(-t[1],t[0]),pitch:Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2])}}setPitchBearing(e,t){this._orientation=Mr(e,t),kr(this._transform,this._orientation)}forward(){const t=e.getColumn(this._transform,2);return[-t[0],-t[1],-t[2]]}up(){const t=e.getColumn(this._transform,1);return[-t[0],-t[1],-t[2]]}right(){const t=e.getColumn(this._transform,0);return[t[0],t[1],t[2]]}getCameraToWorld(t,n){const r=new Float64Array(16);return e.invert(r,this.getWorldToCamera(t,n)),r}getWorldToCameraPosition(t,n,r){const i=this.position;e.scale$2(i,i,-t);const o=new Float64Array(16);return e.fromScaling(o,[r,r,r]),e.translate(o,o,i),o[10]*=n,o}getWorldToCamera(t,n){const r=new Float64Array(16),i=new Float64Array(4),o=this.position;return e.conjugate(i,this._orientation),e.scale$2(o,o,-t),e.fromQuat(r,i),e.translate(r,r,o),r[1]*=-1,r[5]*=-1,r[9]*=-1,r[13]*=-1,r[8]*=n,r[9]*=n,r[10]*=n,r[11]*=n,r}getCameraToClipPerspective(t,n,r,i){const o=new Float64Array(16);return e.perspective(o,t,n,r,i),o}getDistanceToElevation(t){const n=0===t?0:e.mercatorZfromAltitude(t,this.position[1]),r=this.forward();return(n-this.position[2])/r[2]}clone(){return new Or([...this.position],[...this.orientation])}}function Dr(t,n){const r=Lr(t),i=function(t,n,r,i,o){const a=new e.LngLat(r.lng-180*Rr,r.lat),s=new e.LngLat(r.lng+180*Rr,r.lat),l=t.project(a.lng,a.lat),c=t.project(s.lng,s.lat),u=-Math.atan2(c.y-l.y,c.x-l.x),h=e.MercatorCoordinate.fromLngLat(r);h.y=e.clamp(h.y,-.999975,.999975);const f=h.toLngLat(),p=t.project(f.lng,f.lat),d=e.MercatorCoordinate.fromLngLat(f);d.x+=Rr;const m=d.toLngLat(),g=t.project(m.lng,m.lat),y=Ur(g.x-p.x,g.y-p.y,u),v=e.MercatorCoordinate.fromLngLat(f);v.y+=Rr;const b=v.toLngLat(),_=t.project(b.lng,b.lat),x=Ur(_.x-p.x,_.y-p.y,u),A=Math.abs(y.x)/Math.abs(x.y),w=e.identity([]);e.rotateZ(w,w,-u*(1-(o?0:i)));const C=e.identity([]);return e.scale(C,C,[1,1-(1-A)*i,1]),C[4]=-x.x/x.y*i,e.rotateZ(C,C,u),e.multiply$1(C,w,C),C}(t.projection,0,t.center,r,n),o=zr(t);return e.scale(i,i,[o,o,1]),i}function zr(t){const n=t.projection,r=Lr(t),i=Fr(n,t.center),o=Fr(n,e.LngLat.convert(n.center));return Math.pow(2,i*r+(1-r)*o)}function Lr(t){const n=t.projection.range;if(!n)return 0;const r=Math.max(t.width,t.height),i=Math.log(r/1024)/Math.LN2;return e.smoothstep(n[0]+i,n[1]+i,t.zoom)}const Rr=1/4e4;function Fr(t,n){const r=e.clamp(n.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),i=new e.LngLat(n.lng-180*Rr,r),o=new e.LngLat(n.lng+180*Rr,r),a=t.project(i.lng,r),s=t.project(o.lng,r),l=e.MercatorCoordinate.fromLngLat(i),c=e.MercatorCoordinate.fromLngLat(o),u=s.x-a.x,h=s.y-a.y,f=c.x-l.x,p=c.y-l.y,d=Math.sqrt((f*f+p*p)/(u*u+h*h));return Math.log(d)/Math.LN2}function Ur(e,t,n){const r=Math.cos(n),i=Math.sin(n);return{x:e*r-t*i,y:e*i+t*r}}class Nr{constructor(t,n,r,i,o,a,s){this.tileSize=512,this._renderWorldCopies=void 0===o||o,this._minZoom=t||0,this._maxZoom=n||22,this._minPitch=null==r?0:r,this._maxPitch=null==i?60:i,this.setProjection(a),this.setMaxBounds(s),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Br,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Or,this._centerAltitude=0,this._centerAltitudeValidForExaggeration=0,this._averageElevation=0,this.cameraElevationReference="ground",this._projectionScaler=1,this._horizonShift=.1}clone(){const e=new Nr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return e._elevation=this._elevation,e._centerAltitude=this._centerAltitude,e._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,e.tileSize=this.tileSize,e.width=this.width,e.height=this.height,e.cameraElevationReference=this.cameraElevationReference,e._center=this._center,e._setZoom(this.zoom),e._seaLevelZoom=this._seaLevelZoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._nearZ=this._nearZ,e._farZ=this._farZ,e._averageElevation=this._averageElevation,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._camera=this._camera.clone(),e._calcMatrices(),e.freezeTileCoverage=this.freezeTileCoverage,e}get elevation(){return this._elevation}set elevation(e){this._elevation!==e&&(this._elevation=e,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(e){const t=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||t)&&this._updateCameraOnTerrain(),(e||t)&&this._constrainCameraAltitude(),this._calcMatrices()}getProjection(){return e.pick(this.projection,["name","center","parallels"])}setProjection(t){null==t&&(t={name:"mercator"}),this.projectionOptions=t;const n=this.projection?this.getProjection():void 0;this.projection=e.getProjection(t);const r=this.getProjection();return i(n,r)?null:(this._calcMatrices(),r)}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get cameraWorldSize(){const e=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.cameraWorldSize)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new e.pointGeometry(this.width,this.height)}get bearing(){return e.wrap(this.rotation,-180,180)}set bearing(e){this.rotation=e}get rotation(){return-this.angle/Math.PI*180}set rotation(t){const n=-t*Math.PI/180;var r;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=(r=new e.ARRAY_TYPE(4),e.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r),function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);e[0]=r*l+o*s,e[1]=i*l+a*s,e[2]=r*-s+o*l,e[3]=i*-s+a*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(t){const n=e.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(e){this._averageElevation=e,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(e){const t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._setZoom(t),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(e){this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=0);const e=this._elevation;this._centerAltitude=e.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=e.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const t=this._elevation,n=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],r=this.horizonLineFromTop();let i=0,o=0;for(let a=0;a<n.length;a++){const s=new e.pointGeometry(n[a][0]*this.width,r+n[a][1]*(this.height-r)),l=t.pointCoordinate(s);if(!l)continue;const c=1/Math.hypot(l[0]-this._camera.position[0],l[1]-this._camera.position[1]);i+=l[3]*c,o+=c}return 0===o?NaN:i/o}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const e=this._seaLevelZoom,t=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),n=this.pixelsPerMeter/this.worldSize*t,r=this._mercatorZfromZoom(e),i=this._mercatorZfromZoom(this._maxZoom),o=Math.max(r-n,i);this._setZoom(this._zoomFromMercatorZ(o))}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}computeZoomRelativeTo(t){const n=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,t.toAltitude()));let r;r=t.z<this._camera.position[2]?[n.x,n.y,n.z]:[t.x,t.y,t.z];const i=e.length(e.sub([],this._camera.position,r));return e.clamp(this._zoomFromMercatorZ(i),this._minZoom,this._maxZoom)}setFreeCameraOptions(t){if(!this.height)return;if(!t.position&&!t.orientation)return;this._updateCameraState();let n=!1;if(t.orientation&&!e.exactEquals(t.orientation,this._camera.orientation)&&(n=this._setCameraOrientation(t.orientation)),t.position){const r=[t.position.x,t.position.y,t.position.z];e.exactEquals$1(r,this._camera.position)||(this._setCameraPosition(r),n=!0)}n&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const t=this._camera.position,n=new Ir;return n.position=new e.MercatorCoordinate(t[0],t[1],t[2]),n.orientation=this._camera.orientation,n._elevation=this.elevation,n._renderWorldCopies=this.renderWorldCopies,n}_setCameraOrientation(t){if(!e.length$1(t))return!1;e.normalize$1(t,t);const n=e.transformQuat([],[0,0,-1],t),r=e.transformQuat([],[0,-1,0],t);if(r[2]<0)return!1;const i=Pr(n,r);return!!i&&(this._camera.orientation=i,!0)}_setCameraPosition(t){const n=this.zoomScale(this.minZoom)*this.tileSize,r=this.zoomScale(this.maxZoom)*this.tileSize,i=this.cameraToCenterDistance;t[2]=e.clamp(t[2],i/r,i/n),this._camera.position=t}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,t,n){this._unmodified=!1,this._edgeInsets.interpolate(e,t,n),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){const t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}getVisibleUnwrappedCoordinates(t){const n=[new e.UnwrappedTileID(0,t)];if(this.renderWorldCopies){const r=this.pointCoordinate(new e.pointGeometry(0,0)),i=this.pointCoordinate(new e.pointGeometry(this.width,0)),o=this.pointCoordinate(new e.pointGeometry(this.width,this.height)),a=this.pointCoordinate(new e.pointGeometry(0,this.height)),s=Math.floor(Math.min(r.x,i.x,o.x,a.x)),l=Math.floor(Math.max(r.x,i.x,o.x,a.x)),c=1;for(let r=s-c;r<=l+c;r++)0!==r&&n.push(new e.UnwrappedTileID(r,t))}return n}coveringTiles(t){let n=this.coveringZoomLevel(t);const r=n,i=this.elevation&&!t.isTerrainDEM,o="mercator"===this.projection.name;if(void 0!==t.minzoom&&n<t.minzoom)return[];void 0!==t.maxzoom&&n>t.maxzoom&&(n=t.maxzoom);const a=this.locationCoordinate(this.center),s=this.center.lat,l=1<<n,c=[l*a.x,l*a.y,0],u="globe"===this.projection.name,h=!u,f=e.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n,h),p=u?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),d=l*e.mercatorZfromAltitude(1,this.center.lat),m=this._camera.position[2]/e.mercatorZfromAltitude(1,this.center.lat),g=[l*p.x,l*p.y,m*(h?1:d)],y=this.cameraToCenterDistance/t.tileSize*(t.roundZoom?1:.502),v=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?n:0,b=t.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,_=t.isTerrainDEM?-b:this._elevation?this._elevation.getMinElevationBelowMSL():0,x=this.projection.isReprojectedInTileSpace?zr(this):1,A=t=>{const n=1/4e4,r=new e.MercatorCoordinate(t.x+n,t.y,t.z),i=new e.MercatorCoordinate(t.x,t.y+n,t.z),o=t.toLngLat(),a=r.toLngLat(),s=i.toLngLat(),l=this.locationCoordinate(o),c=this.locationCoordinate(a),u=this.locationCoordinate(s),h=Math.hypot(c.x-l.x,c.y-l.y),f=Math.hypot(u.x-l.x,u.y-l.y);return Math.sqrt(h*f)*x/n},w=t=>{const n=b,r=_;return{aabb:e.tileAABB(this,l,0,0,0,t,r,n,this.projection),zoom:0,x:0,y:0,minZ:r,maxZ:n,wrap:t,fullyVisible:!1}},C=[];let E=[];const S=n,T=t.reparseOverscaled?r:n,B=e=>e*e,k=B((m-this._centerAltitude)*d),M=e=>{if(!this._elevation||!e.tileID||!o)return;const t=this._elevation.getMinMaxForTile(e.tileID),n=e.aabb;t?(n.min[2]=t.min,n.max[2]=t.max,n.center[2]=(n.min[2]+n.max[2])/2):(e.shouldSplit=P(e),e.shouldSplit||(n.min[2]=n.max[2]=n.center[2]=this._centerAltitude))},P=t=>{if(t.zoom<v)return!0;if(t.zoom===S)return!1;if(null!=t.shouldSplit)return t.shouldSplit;const n=t.aabb.distanceX(g),o=t.aabb.distanceY(g);let a=k,l=1;if(u){a=B(t.aabb.distanceZ(g));const n=Math.pow(2,t.zoom),r=e.latFromMercatorY((t.y+1)/n),i=e.latFromMercatorY(t.y/n),o=Math.min(Math.max(s,r),i),c=e.circumferenceAtLatitude(o)/e.circumferenceAtLatitude(s);l=Math.min(c,1)}else if(i&&(a=B(t.aabb.distanceZ(g)*d)),this.projection.isReprojectedInTileSpace&&r<=5){const n=Math.pow(2,t.zoom),r=A(new e.MercatorCoordinate((t.x+.5)/n,(t.y+.5)/n));l=r>.85?1:r}const c=n*n+o*o+a;return c<B((1<<S-t.zoom)*y*l*((e,t)=>{if(t*B(.707)<e)return 1;const n=Math.sqrt(t/e);return n/(1.4144271570014144+(Math.pow(1.1,n-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(a,k),c))};if(this.renderWorldCopies)for(let e=1;e<=3;e++)C.push(w(-e)),C.push(w(e));for(C.push(w(0));C.length>0;){const r=C.pop(),a=r.x,s=r.y;let h=r.fullyVisible;if(!h){const e=r.aabb.intersects(f);if(0===e)continue;h=2===e}if(r.zoom!==S&&P(r))for(let t=0;t<4;t++){const n=(a<<1)+t%2,c=(s<<1)+(t>>1),f={aabb:o?r.aabb.quadrant(t):e.tileAABB(this,l,r.zoom+1,n,c,r.wrap,r.minZ,r.maxZ,this.projection),zoom:r.zoom+1,x:n,y:c,wrap:r.wrap,fullyVisible:h,tileID:void 0,shouldSplit:void 0,minZ:r.minZ,maxZ:r.maxZ};i&&!u&&(f.tileID=new e.OverscaledTileID(r.zoom+1===S?T:r.zoom+1,r.wrap,r.zoom+1,n,c),M(f)),C.push(f)}else{const i=r.zoom===S?T:r.zoom;if(t.minzoom&&t.minzoom>i)continue;const o=c[0]-(.5+a+(r.wrap<<r.zoom))*(1<<n-r.zoom),l=c[1]-.5-s,u=r.tileID?r.tileID:new e.OverscaledTileID(i,r.wrap,r.zoom,a,s);E.push({tileID:u,distanceSq:o*o+l*l})}}if(this.fogCullDistSq){const n=this.fogCullDistSq,r=this.horizonLineFromTop();E=E.filter((i=>{const o=[0,0,0,1],a=[e.EXTENT,e.EXTENT,0,1],s=this.calculateFogTileMatrix(i.tileID.toUnwrapped());e.transformMat4$1(o,o,s),e.transformMat4$1(a,a,s);const l=e.getAABBPointSquareDist(o,a);if(0===l)return!0;let c=!1;const u=this._elevation;if(u&&l>n&&0!==r){const n=this.calculateProjMatrix(i.tileID.toUnwrapped());let o;t.isTerrainDEM||(o=u.getMinMaxForTile(i.tileID)),o||(o={min:_,max:b});const a=e.furthestTileCorner(this.rotation),s=[a[0]*e.EXTENT,a[1]*e.EXTENT,o.max];e.transformMat4(s,s,n),c=(1-s[1])*this.height*.5<r}return l<n||c}))}return E.sort(((e,t)=>e.distanceSq-t.distanceSq)).map((e=>e.tileID))}resize(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(t){const n=e.clamp(t.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),r=this.projection.project(t.lng,n);return new e.pointGeometry(r.x*this.worldSize,r.y*this.worldSize)}unproject(e){return this.projection.unproject(e.x/this.worldSize,e.y/this.worldSize)}get point(){return this.project(this.center)}setLocationAtPoint(t,n){let r,i;const o=this.centerPoint;if("globe"===this.projection.name){const e=this.worldSize;r=(n.x-o.x)/e,i=(n.y-o.y)/e}else{const e=this.pointCoordinate(n),t=this.pointCoordinate(o);r=e.x-t.x,i=e.y-t.y}const a=this.locationCoordinate(t);this.setLocation(new e.MercatorCoordinate(a.x-r,a.y-i))}setLocation(e){this.center=this.coordinateLocation(e),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(e){return this.projection.locationPoint(this,e)}locationPoint3D(e){return this._coordinatePoint(this.locationCoordinate(e),!0)}pointLocation(e){return this.coordinateLocation(this.pointCoordinate(e))}pointLocation3D(e){return this.coordinateLocation(this.pointCoordinate3D(e))}locationCoordinate(t,n){const r=n?e.mercatorZfromAltitude(n,t.lat):void 0,i=this.projection.project(t.lng,t.lat);return new e.MercatorCoordinate(i.x,i.y,r)}coordinateLocation(e){return this.projection.unproject(e.x,e.y)}pointRayIntersection(t,n){const r=null!=n?n:this._centerAltitude,i=[t.x,t.y,0,1],o=[t.x,t.y,1,1];e.transformMat4$1(i,i,this.pixelMatrixInverse),e.transformMat4$1(o,o,this.pixelMatrixInverse);const a=o[3];e.scale$1(i,i,1/i[3]),e.scale$1(o,o,1/a);const s=i[2],l=o[2];return{p0:i,p1:o,t:s===l?0:(r-s)/(l-s)}}screenPointToMercatorRay(t){const n=[t.x,t.y,0,1],r=[t.x,t.y,1,1];return e.transformMat4$1(n,n,this.pixelMatrixInverse),e.transformMat4$1(r,r,this.pixelMatrixInverse),e.scale$1(n,n,1/n[3]),e.scale$1(r,r,1/r[3]),n[2]=e.mercatorZfromAltitude(n[2],this._center.lat)*this.worldSize,r[2]=e.mercatorZfromAltitude(r[2],this._center.lat)*this.worldSize,e.scale$1(n,n,1/this.worldSize),e.scale$1(r,r,1/this.worldSize),new e.Ray([n[0],n[1],n[2]],e.normalize([],e.sub([],r,n)))}rayIntersectionCoordinate(t){const{p0:n,p1:r,t:i}=t,o=e.mercatorZfromAltitude(n[2],this._center.lat),a=e.mercatorZfromAltitude(r[2],this._center.lat);return new e.MercatorCoordinate(e.number(n[0],r[0],i)/this.worldSize,e.number(n[1],r[1],i)/this.worldSize,e.number(o,a,i))}pointCoordinate(e,t=this._centerAltitude){return this.projection.pointCoordinate(this,e.x,e.y,t)}pointCoordinate3D(t){if(!this.elevation)return this.pointCoordinate(t);const n=this.elevation;let r=this.elevation.pointCoordinate(t);if(r)return new e.MercatorCoordinate(r[0],r[1],r[2]);let i=0,o=this.horizonLineFromTop();if(t.y>o)return this.pointCoordinate(t);const a=.02*o,s=t.clone();for(let t=0;t<10&&o-i>a;t++){s.y=e.number(i,o,.66);const t=n.pointCoordinate(s);t?(o=s.y,r=t):i=s.y}return r?new e.MercatorCoordinate(r[0],r[1],r[2]):this.pointCoordinate(t)}isPointAboveHorizon(e){if(this.elevation)return!this.elevation.pointCoordinate(e);{const t=this.horizonLineFromTop();return e.y<t}}_coordinatePoint(t,n){const r=n&&this.elevation?this.elevation.getAtPointOrZero(t,this._centerAltitude):this._centerAltitude,i=[t.x*this.worldSize,t.y*this.worldSize,r+t.toAltitude(),1];return e.transformMat4$1(i,i,this.pixelMatrix),i[3]>0?new e.pointGeometry(i[0]/i[3],i[1]/i[3]):new e.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getBounds(t,n){const r=new e.pointGeometry(this._edgeInsets.left,this._edgeInsets.top),i=new e.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top),o=new e.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom),a=new e.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom);let s=this.pointCoordinate(r,t),l=this.pointCoordinate(i,t);const c=this.pointCoordinate(o,n),u=this.pointCoordinate(a,n),h=(e,t)=>(t.y-e.y)/(t.x-e.x);return s.y>1&&l.y>=0?s=new e.MercatorCoordinate((1-u.y)/h(u,s)+u.x,1):s.y<0&&l.y<=1&&(s=new e.MercatorCoordinate(-u.y/h(u,s)+u.x,0)),l.y>1&&s.y>=0?l=new e.MercatorCoordinate((1-c.y)/h(c,l)+c.x,1):l.y<0&&s.y<=1&&(l=new e.MercatorCoordinate(-c.y/h(c,l)+c.x,0)),(new e.LngLatBounds).extend(this.coordinateLocation(s)).extend(this.coordinateLocation(l)).extend(this.coordinateLocation(u)).extend(this.coordinateLocation(c))}_getBounds3D(){const e=this.elevation;if(!e.visibleDemTiles.length)return this._getBounds(0,0);const t=e.visibleDemTiles.reduce(((e,t)=>{if(t.dem){const n=t.dem.tree;e.min=Math.min(e.min,n.minimums[0]),e.max=Math.max(e.max,n.maximums[0])}return e}),{min:Number.MAX_VALUE,max:0});return this._getBounds(t.min*e.exaggeration(),t.max*e.exaggeration())}getBounds(){return this._terrainEnabled()?this._getBounds3D():this._getBounds(0,0)}horizonLineFromTop(e=!0){const t=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,n=this.height/2-t*(1-this._horizonShift);return e?Math.max(0,n):n}getMaxBounds(){return this.maxBounds}setMaxBounds(t){this.maxBounds=t,this.minLat=-e.MAX_MERCATOR_LATITUDE,this.maxLat=e.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,t&&(this.minLat=t.getSouth(),this.maxLat=t.getNorth(),this.minLng=t.getWest(),this.maxLng=t.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=e.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=e.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=e.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=e.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(e,t){return this.projection.createTileMatrix(this,t,e)}calculateDistanceTileData(t){const n=t.key,r=this._distanceTileDataCache;if(r[n])return r[n];const i=t.canonical,o=1/this.height,a=this.cameraWorldSize/this.zoomScale(i.z),s=(i.x+Math.pow(2,i.z)*t.wrap)*a,l=i.y*a,c=this.point,u=this.angle,h=Math.sin(-u),f=-Math.cos(-u);return r[n]={bearing:[h,f],center:[(c.x-s)*o,(c.y-l)*o],scale:a/e.EXTENT*o},r[n]}calculateFogTileMatrix(t){const n=t.key,r=this._fogTileMatrixCache;if(r[n])return r[n];const i=this.calculatePosMatrix(t,this.cameraWorldSize);return e.multiply$1(i,this.worldToFogMatrix,i),r[n]=new Float32Array(i),r[n]}calculateProjMatrix(t,n=!1){const r=t.key,i=n?this._alignedProjMatrixCache:this._projMatrixCache;if(i[r])return i[r];const o=this.calculatePosMatrix(t,this.worldSize);return e.multiply$1(o,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:n?this.alignedProjMatrix:this.projMatrix,o),i[r]=new Float32Array(o),i[r]}calculatePixelsToTileUnitsMatrix(t){const n=t.tileID.key,r=this._pixelsToTileUnitsCache;if(r[n])return r[n];const i=function(t,n){const{scale:r}=t.tileTransform,i=r*e.EXTENT/(t.tileSize*Math.pow(2,n.zoom-t.tileID.overscaledZ+t.tileID.canonical.z));return o=new Float32Array(4),l=(a=n.inverseAdjustmentMatrix)[1],c=a[2],u=a[3],f=(s=[i,i])[1],o[0]=a[0]*(h=s[0]),o[1]=l*h,o[2]=c*f,o[3]=u*f,o;var o,a,s,l,c,u,h,f}(t,this);return r[n]=i,r[n]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation)return;const t=this._elevation;this._updateCameraState();const n=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,r=this._computeCameraPosition(n),i=this._camera.forward(),o=e.mercatorZfromAltitude(1,this._center.lat);r[2]/=o,i[2]/=o,e.normalize(i,i);const a=t.raycast(r,i,t.exaggeration());if(a){const t=e.scaleAndAdd([],r,i,a),n=new e.MercatorCoordinate(t[0],t[1],e.mercatorZfromAltitude(t[2],e.latFromMercatorY(t[1]))),s=(n.z+e.length([n.x-r[0],n.y-r[1],n.z-r[2]*o]))*this._projectionScaler;this._seaLevelZoom=this._zoomFromMercatorZ(s),this._centerAltitude=n.toAltitude(),this._center=this.coordinateLocation(n),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const t=this._elevation;this._updateCameraState();const n=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,r=this._computeCameraPosition(n),i=t.getAtPointOrZero(new e.MercatorCoordinate(...r)),o=this._minimumHeightOverTerrain()*Math.cos(e.degToRad(this._maxPitch)),a=this._camera.position[2]-this.pixelsPerMeter/this.worldSize*i;if(a<o){const t=this.locationCoordinate(this._center,this._centerAltitude),n=[t.x-r[0],t.y-r[1],t.z-r[2]],i=e.length(n);n[2]-=(o-a)/this._projectionScaler;const s=e.length(n);if(0===s)return;e.scale$2(n,n,i/s*this._projectionScaler),this._camera.position=[t.x-n[0],t.y-n[1],t.z*this._projectionScaler-n[2]],this._camera.orientation=Pr(n,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;if(this._constraining=!0,this.projection.isReprojectedInTileSpace){const t=this.center;return t.lat=e.clamp(t.lat,this.minLat,this.maxLat),!this.maxBounds&&this.renderWorldCopies||(t.lng=e.clamp(t.lng,this.minLng,this.maxLng)),this.center=t,void(this._constraining=!1)}const t=this._unmodified,{x:n,y:r}=this.point;let i=0,o=n,a=r;const s=this.width/2,l=this.height/2,c=this.worldMinY*this.scale,u=this.worldMaxY*this.scale;if(r-l<c&&(a=c+l),r+l>u&&(a=u-l),u-c<this.height&&(i=Math.max(i,this.height/(u-c)),a=(u+c)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const e=this.worldMinX*this.scale,t=this.worldMaxX*this.scale,r=this.worldSize/2-(e+t)/2;o=(n+r+this.worldSize)%this.worldSize-r,o-s<e&&(o=e+s),o+s>t&&(o=t-s),t-e<this.width&&(i=Math.max(i,this.width/(t-e)),o=(t+e)/2)}o===n&&a===r||(this.center=this.unproject(new e.pointGeometry(o,a))),i&&(this.zoom+=this.scaleZoom(i)),this._constrainCameraAltitude(),this._unmodified=t,this._constraining=!1}_minZoomForBounds(){let e=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(e=Math.max(e,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),e}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const t=this._fov/2,n=this.centerOffset,r=this.pixelsPerMeter;this._projectionScaler=r/(e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize),this.cameraToCenterDistance=.5/Math.tan(t)*this.height*this._projectionScaler,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const i=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?r:1),o=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);o[8]=2*-n.x/this.width,o[9]=2*n.y/this.height;let a=e.mul([],o,i);if(this.projection.isReprojectedInTileSpace){const t=this.locationCoordinate(this.center),n=e.identity([]);e.translate(n,n,[t.x*this.worldSize,t.y*this.worldSize,0]),e.multiply$1(n,n,Dr(this)),e.translate(n,n,[-t.x*this.worldSize,-t.y*this.worldSize,0]),e.multiply$1(a,a,n),this.inverseAdjustmentMatrix=function(e){const t=Dr(e,!0);return v([],[t[0],t[1],t[4],t[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=e.scale([],a,[this.worldSize,this.worldSize,this.worldSize/r,1]),this.projMatrix=a,this.invProjMatrix=e.invert(new Float64Array(16),this.projMatrix);const s=new Float32Array(16);e.identity(s),e.scale(s,s,[1,-1,1]),e.rotateX(s,s,this._pitch),e.rotateZ(s,s,this.angle);const l=e.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),c=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;l[8]=2*-n.x/this.width,l[9]=2*(n.y+c)/this.height,this.skyboxMatrix=e.multiply$1(s,l,s);const u=this.point,h=u.x,f=u.y,p=this.width%2/2,d=this.height%2/2,m=Math.cos(this.angle),g=Math.sin(this.angle),y=h-Math.round(h)+m*p+g*d,b=f-Math.round(f)+m*d+g*p,_=new Float64Array(a);if(e.translate(_,_,[y>.5?y-1:y,b>.5?b-1:b,0]),this.alignedProjMatrix=_,a=e.create(),e.scale(a,a,[this.width/2,-this.height/2,1]),e.translate(a,a,[1,-1,0]),this.labelPlaneMatrix=a,a=e.create(),e.scale(a,a,[1,-1,1]),e.translate(a,a,[-1,-1,0]),e.scale(a,a,[2/this.width,2/this.height,1]),this.glCoordMatrix=a,this.pixelMatrix=e.multiply$1(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},a=e.invert(new Float64Array(16),this.pixelMatrix),!a)throw new Error("failed to invert matrix");this.pixelMatrixInverse=a,this.globeMatrix="globe"===this.projection.name?e.calculateGlobeMatrix(this):a,this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const t=this.cameraWorldSize,n=this.cameraPixelsPerMeter,r=this._camera.position,i=1/this.height,o=[t,t,n];e.scale$2(o,o,i),e.scale$2(r,r,-1),e.multiply$2(r,r,o);const a=e.create();e.translate(a,a,r),e.scale(a,a,o),this.mercatorFogMatrix=a,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(t,n,i)}_computeCameraPosition(e){const t=(e=e||this.pixelsPerMeter)/this.pixelsPerMeter,n=this._camera.forward(),r=this.point,i=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*t-e/this.worldSize*this._centerAltitude;return[r.x/this.worldSize-n[0]*i,r.y/this.worldSize-n[1]*i,e/this.worldSize*this._centerAltitude-n[2]*i]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(t){const n=this._maxCameraBoundsDistance()*Math.cos(this._pitch),r=t[2];let i=1;r>0&&(i=Math.min((n-this._camera.position[2])/r,1)),this._camera.position=e.scaleAndAdd([],this._camera.position,t,i),this._updateStateFromCamera(),this.projection.wrap&&(this.center=this.center.wrap())}_updateStateFromCamera(){const t=this._camera.position,n=this._camera.forward(),{pitch:r,bearing:i}=this._camera.getPitchBearing(),o=e.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._projectionScaler,a=this._mercatorZfromZoom(this._maxZoom)*Math.cos(e.degToRad(this._maxPitch)),s=Math.max((t[2]-o)/Math.cos(r),a),l=this._zoomFromMercatorZ(s);e.scaleAndAdd(t,t,n,s),this._pitch=e.clamp(r,e.degToRad(this.minPitch),e.degToRad(this.maxPitch)),this.angle=e.wrap(i,-Math.PI,Math.PI),this._setZoom(e.clamp(l,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new e.MercatorCoordinate(t[0],t[1],t[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(e){return Math.pow(2,e)*this.tileSize}_mercatorZfromZoom(e){return this.cameraToCenterDistance/this._worldSizeFromZoom(e)}_minimumHeightOverTerrain(){const e=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(e)}_zoomFromMercatorZ(e){return this.scaleZoom(this.cameraToCenterDistance/(e*this.tileSize))}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(e.warnOnce("Terrain is not yet supported with alternate projections. Use mercator to enable terrain."),1))}anyCornerOffEdge(t,n){const r=Math.min(t.x,n.x),i=Math.max(t.x,n.x),o=Math.min(t.y,n.y),a=Math.max(t.y,n.y);if(o<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const s=[new e.pointGeometry(r,o),new e.pointGeometry(i,a),new e.pointGeometry(r,a),new e.pointGeometry(i,o)],l=this.renderWorldCopies?-3:0,c=this.renderWorldCopies?4:1;for(const e of s){const t=this.pointRayIntersection(e);if(t.t<0)return!0;const n=this.rayIntersectionCoordinate(t);if(n.x<l||n.y<0||n.x>c||n.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+e.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new e.pointGeometry(0,0),new e.pointGeometry(this.width,this.height))}zoomDeltaToMovement(t,n){const r=e.length(e.sub([],this._camera.position,t)),i=this._zoomFromMercatorZ(r)+n;return r-this._mercatorZfromZoom(i)}getCameraPoint(){const t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.pointGeometry(0,t))}}function jr(e,t){let n=!1,r=null;const i=()=>{r=null,n&&(e(),r=setTimeout(i,t),n=!1)};return()=>(n=!0,r||i(),r)}class Vr{constructor(t){this._hashName=t&&encodeURIComponent(t),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=jr(this._updateHashUnthrottled.bind(this),300)}addTo(t){return this._map=t,e.window.addEventListener("hashchange",this._onHashChange,!1),t.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),e.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(t){const n=this._map;if(!n)return"";const r=n.getCenter(),i=Math.round(100*n.getZoom())/100,o=Math.ceil((i*Math.LN2+Math.log(512/360/.5))/Math.LN10),a=Math.pow(10,o),s=Math.round(r.lng*a)/a,l=Math.round(r.lat*a)/a,c=n.getBearing(),u=n.getPitch();let h="";if(h+=t?`/${s}/${l}/${i}`:`${i}/${l}/${s}`,(c||u)&&(h+="/"+Math.round(10*c)/10),u&&(h+=`/${Math.round(u)}`),this._hashName){const t=this._hashName;let n=!1;const r=e.window.location.hash.slice(1).split("&").map((e=>{const r=e.split("=")[0];return r===t?(n=!0,`${r}=${h}`):e})).filter((e=>e));return n||r.push(`${t}=${h}`),`#${r.join("&")}`}return`#${h}`}_getCurrentHash(){const t=e.window.location.hash.replace("#","");if(this._hashName){let e;return t.split("&").map((e=>e.split("="))).forEach((t=>{t[0]===this._hashName&&(e=t)})),(e&&e[1]||"").split("/")}return t.split("/")}_onHashChange(){const e=this._map;if(!e)return!1;const t=this._getCurrentHash();if(t.length>=3&&!t.some((e=>isNaN(e)))){const n=e.dragRotate.isEnabled()&&e.touchZoomRotate.isEnabled()?+(t[3]||0):e.getBearing();return e.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:n,pitch:+(t[4]||0)}),!0}return!1}_updateHashUnthrottled(){const t=e.window.location.href.replace(/(#.+)?$/,this.getHashString());e.window.history.replaceState(e.window.history.state,null,t)}}const Gr={linearity:.3,easing:e.bezier(0,0,.3,1)},qr=e.extend({deceleration:2500,maxSpeed:1400},Gr),Wr=e.extend({deceleration:20,maxSpeed:1400},Gr),Hr=e.extend({deceleration:1e3,maxSpeed:360},Gr),$r=e.extend({deceleration:1e3,maxSpeed:90},Gr);class Xr{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.exported.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,n=e.exported.now();for(;t.length>0&&n-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const n={zoom:0,bearing:0,pitch:0,pan:new e.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:e}of this._inertiaBuffer)n.zoom+=e.zoomDelta||0,n.bearing+=e.bearingDelta||0,n.pitch+=e.pitchDelta||0,e.panDelta&&n.pan._add(e.panDelta),e.around&&(n.around=e.around),e.pinchAround&&(n.pinchAround=e.pinchAround);const r=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,i={};if(n.pan.mag()){const o=Yr(n.pan.mag(),r,e.extend({},qr,t||{}));i.offset=n.pan.mult(o.amount/n.pan.mag()),i.center=this._map.transform.center,Zr(i,o)}if(n.zoom){const e=Yr(n.zoom,r,Wr);i.zoom=this._map.transform.zoom+e.amount,Zr(i,e)}if(n.bearing){const t=Yr(n.bearing,r,Hr);i.bearing=this._map.transform.bearing+e.clamp(t.amount,-179,179),Zr(i,t)}if(n.pitch){const e=Yr(n.pitch,r,$r);i.pitch=this._map.transform.pitch+e.amount,Zr(i,e)}if(i.zoom||i.bearing){const e=void 0===n.pinchAround?n.around:n.pinchAround;i.around=e?this._map.unproject(e):this._map.getCenter()}return this.clear(),i.noMoveStart=!0,i}}function Zr(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function Yr(t,n,r){const{maxSpeed:i,linearity:o,deceleration:a}=r,s=e.clamp(t*o/(n/1e3),-i,i),l=Math.abs(s)/(a*o);return{easing:r.easing,duration:1e3*l,amount:s*(l/2)}}class Kr extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,n,r,i={}){const o=d(n.getCanvasContainer(),r),a=n.unproject(o);super(t,e.extend({point:o,lngLat:a,originalEvent:r},i)),this._defaultPrevented=!1,this.target=n}}class Jr extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,n,r){const i="touchend"===t?r.changedTouches:r.touches,o=m(n.getCanvasContainer(),i),a=o.map((e=>n.unproject(e))),s=o.reduce(((e,t,n,r)=>e.add(t.div(r.length))),new e.pointGeometry(0,0));super(t,{points:o,point:s,lngLats:a,lngLat:n.unproject(s),originalEvent:r}),this._defaultPrevented=!1}}class Qr extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,t,n){super(e,{originalEvent:n}),this._defaultPrevented=!1}}class ei{constructor(e,t){this._map=e,this._clickTolerance=t.clickTolerance}reset(){this._mousedownPos=void 0}wheel(e){return this._firePreventable(new Qr(e.type,this._map,e))}mousedown(e,t){return this._mousedownPos=t,this._firePreventable(new Kr(e.type,this._map,e))}mouseup(e){this._map.fire(new Kr(e.type,this._map,e))}preclick(t){const n=e.extend({},t);n.type="preclick",this._map.fire(new Kr(n.type,this._map,n))}click(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||(this.preclick(e),this._map.fire(new Kr(e.type,this._map,e)))}dblclick(e){return this._firePreventable(new Kr(e.type,this._map,e))}mouseover(e){this._map.fire(new Kr(e.type,this._map,e))}mouseout(e){this._map.fire(new Kr(e.type,this._map,e))}touchstart(e){return this._firePreventable(new Jr(e.type,this._map,e))}touchmove(e){this._map.fire(new Jr(e.type,this._map,e))}touchend(e){this._map.fire(new Jr(e.type,this._map,e))}touchcancel(e){this._map.fire(new Jr(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ti{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(e){this._map.fire(new Kr(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Kr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new Kr(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ni{constructor(e,t){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(u(),this._startPos=this._lastPos=t,this._active=!0)}mousemoveWindow(e,t){if(!this._active)return;const n=t;if(this._lastPos.equals(n)||!this._box&&n.dist(this._startPos)<this._clickTolerance)return;const r=this._startPos;this._lastPos=n,this._box||(this._box=o("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));const i=Math.min(r.x,n.x),a=Math.max(r.x,n.x),s=Math.min(r.y,n.y),l=Math.max(r.y,n.y);this._map._requestDomTask((()=>{this._box&&(this._box.style.transform=`translate(${i}px,${s}px)`,this._box.style.width=a-i+"px",this._box.style.height=l-s+"px")}))}mouseupWindow(t,n){if(!this._active)return;if(0!==t.button)return;const r=this._startPos,i=n;if(this.reset(),p(),r.x!==i.x||r.y!==i.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:e=>e.fitScreenCoordinates(r,i,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",t)}keydown(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),h(),delete this._startPos,delete this._lastPos}_fireEvent(t,n){return this._map.fire(new e.Event(t,{originalEvent:n}))}}function ri(e,t){const n={};for(let r=0;r<e.length;r++)n[e[r].identifier]=t[r];return n}class ii{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(t,n,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=t.timeStamp),r.length===this.numTouches&&(this.centroid=function(t){const n=new e.pointGeometry(0,0);for(const e of t)n._add(e);return n.div(t.length)}(n),this.touches=ri(r,n)))}touchmove(e,t,n){if(this.aborted||!this.centroid)return;const r=ri(n,t);for(const e in this.touches){const t=this.touches[e],n=r[e];(!n||n.dist(t)>30)&&(this.aborted=!0)}}touchend(e,t,n){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){const e=!this.aborted&&this.centroid;if(this.reset(),e)return e}}}class oi{constructor(e){this.singleTap=new ii(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(e,t,n){this.singleTap.touchstart(e,t,n)}touchmove(e,t,n){this.singleTap.touchmove(e,t,n)}touchend(e,t,n){const r=this.singleTap.touchend(e,t,n);if(r){const t=e.timeStamp-this.lastTime<500,n=!this.lastTap||this.lastTap.dist(r)<30;if(t&&n||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}}}class ai{constructor(){this._zoomIn=new oi({numTouches:1,numTaps:2}),this._zoomOut=new oi({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,t,n){this._zoomIn.touchstart(e,t,n),this._zoomOut.touchstart(e,t,n)}touchmove(e,t,n){this._zoomIn.touchmove(e,t,n),this._zoomOut.touchmove(e,t,n)}touchend(e,t,n){const r=this._zoomIn.touchend(e,t,n),i=this._zoomOut.touchend(e,t,n);return r?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(r)},{originalEvent:e})}):i?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(i)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const si={0:1,2:2};class li{constructor(e){this.reset(),this._clickTolerance=e.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(e,t){return!1}_move(e,t){return{}}mousedown(e,t){if(this._lastPoint)return;const n=g(e);this._correctButton(e,n)&&(this._lastPoint=t,this._eventButton=n)}mousemoveWindow(e,t){const n=this._lastPoint;if(n)if(e.preventDefault(),null!=this._eventButton&&function(e,t){const n=si[t];return void 0===e.buttons||(e.buttons&n)!==n}(e,this._eventButton))this.reset();else if(this._moved||!(t.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(n,t)}mouseupWindow(e){this._lastPoint&&g(e)===this._eventButton&&(this._moved&&p(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ci extends li{mousedown(e,t){super.mousedown(e,t),this._lastPoint&&(this._active=!0)}_correctButton(e,t){return 0===t&&!e.ctrlKey}_move(e,t){return{around:t,panDelta:t.sub(e)}}}class ui extends li{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const n=.8*(t.x-e.x);if(n)return this._active=!0,{bearingDelta:n}}contextmenu(e){e.preventDefault()}}class hi extends li{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const n=-.5*(t.y-e.y);if(n)return this._active=!0,{pitchDelta:n}}contextmenu(e){e.preventDefault()}}class fi{constructor(t,n){this._map=t,this._el=t.getCanvasContainer(),this._minTouches=1,this._clickTolerance=n.clickTolerance||1,this.reset(),e.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new e.pointGeometry(0,0)}touchstart(e,t,n){return this._calculateTransform(e,t,n)}touchmove(e,t,n){if(this._active&&!(n.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===n.length)return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return e.preventDefault(),this._calculateTransform(e,t,n)}}touchend(e,t,n){this._calculateTransform(e,t,n),this._active&&n.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,n,r){r.length>0&&(this._active=!0);const i=ri(r,n),o=new e.pointGeometry(0,0),a=new e.pointGeometry(0,0);let s=0;for(const e in i){const t=i[e],n=this._touches[e];n&&(o._add(t),a._add(t.sub(n)),s++,i[e]=t)}if(this._touches=i,s<this._minTouches||!a.mag())return;const l=a.div(s);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(s),panDelta:l}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=o("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){"hidden"===this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="visible"),this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show")}),500)}}class pi{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(e){}_move(e,t,n){return{}}touchstart(e,t,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([t[0],t[1]]))}touchmove(e,t,n){const r=this._firstTwoTouches;if(!r)return;e.preventDefault();const[i,o]=r,a=di(n,t,i),s=di(n,t,o);if(!a||!s)return;const l=this._aroundCenter?null:a.add(s).div(2);return this._move([a,s],l,e)}touchend(e,t,n){if(!this._firstTwoTouches)return;const[r,i]=this._firstTwoTouches,o=di(n,t,r),a=di(n,t,i);o&&a||(this._active&&p(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function di(e,t,n){for(let r=0;r<e.length;r++)if(e[r].identifier===n)return t[r]}function mi(e,t){return Math.log(e/t)/Math.LN2}class gi extends pi{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,t){const n=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(mi(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:mi(this._distance,n),pinchAround:t}}}function yi(e,t){return 180*e.angleWith(t)/Math.PI}class vi extends pi{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,t){const n=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:yi(this._vector,n),pinchAround:t}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const t=25/(Math.PI*this._minDiameter)*360,n=yi(e,this._startVector);return Math.abs(n)<t}}function bi(e){return Math.abs(e.y)>Math.abs(e.x)}class _i extends pi{constructor(e){super(),this._map=e}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(e){this._lastPoints=e,bi(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,t,n){const r=this._lastPoints;if(!r)return;const i=e[0].sub(r[0]),o=e[1].sub(r[1]);return this._map._cooperativeGestures&&n.touches.length<3||(this._valid=this.gestureBeginsVertically(i,o,n.timeStamp),!this._valid)?void 0:(this._lastPoints=e,this._active=!0,{pitchDelta:(i.y+o.y)/2*-.5})}gestureBeginsVertically(e,t,n){if(void 0!==this._valid)return this._valid;const r=e.mag()>=2,i=t.mag()>=2;if(!r&&!i)return;if(!r||!i)return null==this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;const o=e.y>0==t.y>0;return bi(e)&&bi(t)&&o}}const xi={panStep:100,bearingStep:15,pitchStep:10};class Ai{constructor(){const e=xi;this._panStep=e.panStep,this._bearingStep=e.bearingStep,this._pitchStep=e.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let t=0,n=0,r=0,i=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?n=-1:(e.preventDefault(),i=-1);break;case 39:e.shiftKey?n=1:(e.preventDefault(),i=1);break;case 38:e.shiftKey?r=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?r=-1:(e.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(n=0,r=0),{cameraAnimation:a=>{const s=a.getZoom();a.easeTo({duration:300,easeId:"keyboardHandler",easing:wi,zoom:t?Math.round(s)+t*(e.shiftKey?2:1):s,bearing:a.getBearing()+n*this._bearingStep,pitch:a.getPitch()+r*this._pitchStep,offset:[-i*this._panStep,-o*this._panStep],center:a.getCenter()},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function wi(e){return e*(2-e)}const Ci=4.000244140625;class Ei{constructor(t,n){this._map=t,this._el=t.getCanvasContainer(),this._handler=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,e.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert","_isFullscreen"],this)}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(t){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(t.ctrlKey||t.metaKey||this.isZooming()||this._isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let n=t.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const r=e.exported.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%Ci==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),t.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=t,this._delta-=n,this._active||this._start(t)),t.preventDefault()}_onTimeout(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const t=d(this._el,e);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:t,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const t=this._map.transform,n=()=>t._terrainEnabled()&&this._aroundCoord?t.computeZoomRelativeTo(this._aroundCoord):t.zoom;if(0!==this._delta){const e="wheel"===this._type&&Math.abs(this._delta)>Ci?this._wheelZoomRate:this._defaultZoomRate;let r=2/(1+Math.exp(-Math.abs(this._delta*e)));this._delta<0&&0!==r&&(r=1/r);const i=n(),o=Math.pow(2,i),a="number"==typeof this._targetZoom?t.zoomScale(this._targetZoom):o;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(a*r))),"wheel"===this._type&&(this._startZoom=n(),this._easing=this._smoothOutEasing(200)),this._delta=0}const r="number"==typeof this._targetZoom?this._targetZoom:n(),i=this._startZoom,o=this._easing;let a,s=!1;if("wheel"===this._type&&i&&o){const t=Math.min((e.exported.now()-this._lastWheelEventTime)/200,1),n=o(t);a=e.number(i,r,n),t<1?this._frameId||(this._frameId=!0):s=!0}else a=r,s=!0;return this._active=!0,s&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!s,zoomDelta:a-n(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let n=e.ease;if(this._prevEase){const t=this._prevEase,r=(e.exported.now()-t.start)/t.duration,i=t.easing(r+.01)-t.easing(r),o=.27/Math.sqrt(i*i+1e-4)*.01,a=Math.sqrt(.0729-o*o);n=e.bezier(o,a,.25,1)}return this._prevEase={start:e.exported.now(),duration:t,easing:n},n}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=o("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(e.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_isFullscreen(){return!!e.window.document.fullscreenElement||!!e.window.document.webkitFullscreenElement}_showBlockerAlert(){"hidden"===this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="visible"),this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show")}),200)}}class Si{constructor(e,t){this._clickZoom=e,this._tapZoom=t}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ti{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(e,t){return e.preventDefault(),{cameraAnimation:n=>{n.easeTo({duration:300,zoom:n.getZoom()+(e.shiftKey?-1:1),around:n.unproject(t)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Bi{constructor(){this._tap=new oi({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(e,t,n){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=t[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(e,t,n))}touchmove(e,t,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;const r=t[0],i=r.y-this._swipePoint.y;return this._swipePoint=r,e.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(e,t,n)}touchend(e,t,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(e,t,n)&&(this._tapTime=e.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ki{constructor(e,t,n){this._el=e,this._mousePan=t,this._touchPan=n}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Mi{constructor(e,t,n){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=t,this._mousePitch=n}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Pi{constructor(e,t,n,r){this._el=e,this._touchZoom=t,this._touchRotate=n,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ii=e=>e.zoom||e.drag||e.pitch||e.rotate;class Oi extends e.Event{}class Di{constructor(){this.constants=[1,1,.01],this.radius=0}setup(t,n){const r=e.sub([],n,t);this.radius=e.length(r[2]<0?e.div([],r,this.constants):[r[0],r[1],0])}projectRay(t){e.div(t,t,this.constants),e.normalize(t,t),e.mul$1(t,t,this.constants);const n=e.scale$2([],t,this.radius);if(n[2]>0){const t=e.scale$2([],[0,0,1],e.dot(n,[0,0,1])),r=e.scale$2([],e.normalize([],[n[0],n[1],0]),this.radius),i=e.add([],n,e.scale$2([],e.sub([],e.add([],r,t),n),2));n[0]=i[0],n[1]=i[1]}return n}}function zi(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}class Li{constructor(t,n){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Xr(t),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Di,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(n),e.bindAll(["handleEvent","handleWindowEvent"],this);const r=this._el;this._listeners=[[r,"touchstart",{passive:!0}],[r,"touchmove",{passive:!1}],[r,"touchend",void 0],[r,"touchcancel",void 0],[r,"mousedown",void 0],[r,"mousemove",void 0],[r,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[r,"mouseover",void 0],[r,"mouseout",void 0],[r,"dblclick",void 0],[r,"click",void 0],[r,"keydown",{capture:!1}],[r,"keyup",void 0],[r,"wheel",{passive:!1}],[r,"contextmenu",void 0],[e.window,"blur",void 0]];for(const[t,n,r]of this._listeners)t.addEventListener(n,t===e.window.document?this.handleWindowEvent:this.handleEvent,r)}destroy(){for(const[t,n,r]of this._listeners)t.removeEventListener(n,t===e.window.document?this.handleWindowEvent:this.handleEvent,r)}_addDefaultHandlers(e){const t=this._map,n=t.getCanvasContainer();this._add("mapEvent",new ei(t,e));const r=t.boxZoom=new ni(t,e);this._add("boxZoom",r);const i=new ai,o=new Ti;t.doubleClickZoom=new Si(o,i),this._add("tapZoom",i),this._add("clickZoom",o);const a=new Bi;this._add("tapDragZoom",a);const s=t.touchPitch=new _i(t);this._add("touchPitch",s);const l=new ui(e),c=new hi(e);t.dragRotate=new Mi(e,l,c),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);const u=new ci(e),h=new fi(t,e);t.dragPan=new ki(n,u,h),this._add("mousePan",u),this._add("touchPan",h,["touchZoom","touchRotate"]);const f=new vi,p=new gi;t.touchZoomRotate=new Pi(n,p,f,a),this._add("touchRotate",f,["touchPan","touchZoom"]),this._add("touchZoom",p,["touchPan","touchRotate"]),this._add("blockableMapEvent",new ti(t));const d=t.scrollZoom=new Ei(t,this);this._add("scrollZoom",d,["mousePan"]);const m=t.keyboard=new Ai;this._add("keyboard",m);for(const n of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])e.interactive&&e[n]&&t[n].enable(e[n])}_add(e,t,n){this._handlers.push({handlerName:e,handler:t,allowed:n}),this._handlersById[e]=t}stop(e){if(!this._updatingCamera){for(const{handler:e}of this._handlers)e.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ii(this._eventsInProgress)||this.isZooming()}_blockedByActive(e,t,n){for(const r in e)if(r!==n&&(!t||t.indexOf(r)<0))return!0;return!1}handleWindowEvent(e){this.handleEvent(e,`${e.type}Window`)}_getMapTouches(e){const t=[];for(const n of e)this._el.contains(n.target)&&t.push(n);return t}handleEvent(e,t){this._updatingCamera=!0;const n="renderFrame"===e.type,r=n?void 0:e,i={needsRenderFrame:!1},o={},a={},s=e.touches?this._getMapTouches(e.touches):void 0,l=s?m(this._el,s):n?void 0:d(this._el,e);for(const{handlerName:n,handler:c,allowed:u}of this._handlers){if(!c.isEnabled())continue;let h;this._blockedByActive(a,u,n)?c.reset():c[t||e.type]&&(h=c[t||e.type](e,l,s),this.mergeHandlerResult(i,o,h,n,r),h&&h.needsRenderFrame&&this._triggerRenderFrame()),(h||c.isActive())&&(a[n]=c)}const c={};for(const e in this._previousActiveHandlers)a[e]||(c[e]=r);this._previousActiveHandlers=a,(Object.keys(c).length||zi(i))&&(this._changes.push([i,o,c]),this._triggerRenderFrame()),(Object.keys(a).length||zi(i))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:u}=i;u&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],u(this._map))}mergeHandlerResult(t,n,r,i,o){if(!r)return;e.extend(t,r);const a={handlerName:i,originalEvent:r.originalEvent||o};void 0!==r.zoomDelta&&(n.zoom=a),void 0!==r.panDelta&&(n.drag=a),void 0!==r.pitchDelta&&(n.pitch=a),void 0!==r.bearingDelta&&(n.rotate=a)}_applyChanges(){const t={},n={},r={};for(const[i,o,a]of this._changes)i.panDelta&&(t.panDelta=(t.panDelta||new e.pointGeometry(0,0))._add(i.panDelta)),i.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+i.zoomDelta),i.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+i.bearingDelta),i.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+i.pitchDelta),void 0!==i.around&&(t.around=i.around),void 0!==i.aroundCoord&&(t.aroundCoord=i.aroundCoord),void 0!==i.pinchAround&&(t.pinchAround=i.pinchAround),i.noInertia&&(t.noInertia=i.noInertia),e.extend(n,o),e.extend(r,a);this._updateMapTransform(t,n,r),this._changes=[]}_updateMapTransform(t,n,r){const i=this._map,o=i.transform,a=e=>[e.x,e.y,e.z];if((e=>{const t=this._eventsInProgress.drag;return t&&!this._handlersById[t.handlerName].isActive()})()&&!zi(t)){const e=o.zoom;o.cameraElevationReference="sea",o.recenterOnTerrain(),o.cameraElevationReference="ground",e!==o.zoom&&this._map._update(!0)}if(!zi(t))return void this._fireEvents(n,r,!0);let{panDelta:s,zoomDelta:l,bearingDelta:c,pitchDelta:u,around:h,aroundCoord:f,pinchAround:p}=t;void 0!==p&&(h=p),(e=>n.drag&&!this._eventsInProgress.drag)()&&h&&(this._dragOrigin=a(o.pointCoordinate3D(h)),this._trackingEllipsoid.setup(o._camera.position,this._dragOrigin)),o.cameraElevationReference="sea",i._stop(!0),h=h||i.transform.centerPoint,c&&(o.bearing+=c),u&&(o.pitch+=u),o._updateCameraState();const d=[0,0,0];if(s){const t=o.pointCoordinate(h);if("globe"===o.projection.name){const n=e.latFromMercatorY(t.y),r=o.center.lat,i=Math.min(e.mercatorZfromAltitude(1,n)/e.mercatorZfromAltitude(1,r),2);s=s.rotate(-o.angle),d[0]=-s.x/o.worldSize*i,d[1]=-s.y/o.worldSize*i}else{const e=o.pointCoordinate(h.sub(s));t&&e&&(d[0]=e.x-t.x,d[1]=e.y-t.y)}}const m=o.zoom,g=[0,0,0];if(l){const t=a(f||o.pointCoordinate3D(h)),n={dir:e.normalize([],e.sub([],t,o._camera.position))};if(n.dir[2]<0){const r=o.zoomDeltaToMovement(t,l);e.scale$2(g,n.dir,r)}}const y=e.add(d,d,g);o._translateCameraConstrained(y),l&&Math.abs(o.zoom-m)>1e-4&&o.recenterOnTerrain(),o.cameraElevationReference="ground",this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(n,r,!0)}_fireEvents(t,n,r){const i=Ii(this._eventsInProgress),o=Ii(t),a={};for(const e in t){const{originalEvent:n}=t[e];this._eventsInProgress[e]||(a[`${e}start`]=n),this._eventsInProgress[e]=t[e]}!i&&o&&this._fireEvent("movestart",o.originalEvent);for(const e in a)this._fireEvent(e,a[e]);o&&this._fireEvent("move",o.originalEvent);for(const e in t){const{originalEvent:n}=t[e];this._fireEvent(e,n)}const s={};let l;for(const e in this._eventsInProgress){const{handlerName:t,originalEvent:r}=this._eventsInProgress[e];this._handlersById[t].isActive()||(delete this._eventsInProgress[e],l=n[t]||r,s[`${e}end`]=l)}for(const e in s)this._fireEvent(e,s[e]);const c=Ii(this._eventsInProgress);if(r&&(i||o)&&!c){this._updatingCamera=!0;const t=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),n=e=>0!==e&&-this._bearingSnap<e&&e<this._bearingSnap;t?(n(t.bearing||this._map.getBearing())&&(t.bearing=0),this._map.easeTo(t,{originalEvent:l})):(this._map.fire(new e.Event("moveend",{originalEvent:l})),n(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(t,n){this._map.fire(new e.Event(t,n?{originalEvent:n}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((e=>{this._frameId=void 0,this.handleEvent(new Oi("renderFrame",{timeStamp:e})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Ri="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Fi extends e.Evented{constructor(t,n){super(),this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=n.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}getCenter(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(e,t){return this.jumpTo({center:e},t)}panBy(t,n,r){return t=e.pointGeometry.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},n),r)}panTo(t,n,r){return this.easeTo(e.extend({center:t},n),r)}getZoom(){return this.transform.zoom}setZoom(e,t){return this.jumpTo({zoom:e},t),this}zoomTo(t,n,r){return this.easeTo(e.extend({zoom:t},n),r)}zoomIn(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}zoomOut(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}getBearing(){return this.transform.bearing}setBearing(e,t){return this.jumpTo({bearing:e},t),this}getPadding(){return this.transform.padding}setPadding(e,t){return this.jumpTo({padding:e},t),this}rotateTo(t,n,r){return this.easeTo(e.extend({bearing:t},n),r)}resetNorth(t,n){return this.rotateTo(0,e.extend({duration:1e3},t),n),this}resetNorthPitch(t,n){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},t),n),this}snapToNorth(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}getPitch(){return this.transform.pitch}setPitch(e,t){return this.jumpTo({pitch:e},t),this}cameraForBounds(t,n){t=e.LngLatBounds.convert(t);const r=n&&n.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),r,n)}_extendCameraOptions(t){const n={top:0,bottom:0,right:0,left:0};if("number"==typeof(t=e.extend({padding:n,offset:[0,0],maxZoom:this.transform.maxZoom},t)).padding){const e=t.padding;t.padding={top:e,bottom:e,right:e,left:e}}return t.padding=e.extend(n,t.padding),t}_cameraForBoxAndBearing(t,n,r,i){const o=this._extendCameraOptions(i),a=this.transform,s=a.padding,l=a.project(e.LngLat.convert(t)),c=a.project(e.LngLat.convert(n)),u=new e.pointGeometry(l.x,c.y),h=new e.pointGeometry(c.x,l.y),f=-e.degToRad(r),p=l.rotate(f),d=c.rotate(f),m=u.rotate(f),g=h.rotate(f),y=new e.pointGeometry(Math.max(p.x,d.x,m.x,g.x),Math.max(p.y,d.y,m.y,g.y)),v=new e.pointGeometry(Math.min(p.x,d.x,m.x,g.x),Math.min(p.y,d.y,m.y,g.y)),b=y.sub(v),_=(a.width-((s.left||0)+(s.right||0)+o.padding.left+o.padding.right))/b.x,x=(a.height-((s.top||0)+(s.bottom||0)+o.padding.top+o.padding.bottom))/b.y;if(x<0||_<0)return void e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const A=Math.min(a.scaleZoom(a.scale*Math.min(_,x)),o.maxZoom),w="number"==typeof o.offset.x&&"number"==typeof o.offset.y?new e.pointGeometry(o.offset.x,o.offset.y):e.pointGeometry.convert(o.offset),C=new e.pointGeometry((o.padding.left-o.padding.right)/2,(o.padding.top-o.padding.bottom)/2).rotate(r*Math.PI/180),E=w.add(C).mult(a.scale/a.zoomScale(A));return{center:a.unproject(l.add(c).div(2).sub(E)),zoom:A,bearing:r}}_cameraForBox(t,n,r,i,o){const a=this._extendCameraOptions(o);r=r||0,i=i||0,t=e.LngLat.convert(t),n=e.LngLat.convert(n);const s=this.transform.clone();s.padding=a.padding;const l=this.getFreeCameraOptions(),c=new e.LngLat(.5*(t.lng+n.lng),.5*(t.lat+n.lat)),u=.5*(r+i);if(s._camera.position[2]<e.mercatorZfromAltitude(u,c.lat))return void e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");l.lookAtPoint(c),s.setFreeCameraOptions(l);const h=e.MercatorCoordinate.fromLngLat(t),f=e.MercatorCoordinate.fromLngLat(n),p=s.pointRayIntersection(s.centerPoint,u),d=[(m=s.rayIntersectionCoordinate(p)).x,m.y,m.z];var m;const g=s.screenPointToMercatorRay(s.centerPoint),y="globe"!==s.projection.name;let v,b=0;do{const n=Math.floor(s.zoom),o=1<<n,a=Math.min(o*h.x,o*f.x),l=Math.min(o*h.y,o*f.y),c=Math.max(o*h.x,o*f.x),u=Math.max(o*h.y,o*f.y),p=new e.Aabb([a,l,r],[c,u,i]),m=e.Frustum.fromInvProjectionMatrix(s.invProjMatrix,s.worldSize,n,y);if(2!==p.intersects(m)){v&&(s._camera.position=e.scaleAndAdd([],s._camera.position,g.dir,-v),s._updateStateFromCamera());break}const b=e.sub([],s._camera.position,d);v=.5*e.length(b),s._camera.position=e.scaleAndAdd([],s._camera.position,g.dir,v);try{s._updateStateFromCamera()}catch(t){return void e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++b<10);return{center:s.center,zoom:s.zoom,bearing:s.bearing,pitch:s.pitch}}fitBounds(e,t,n){return this._fitInternal(this.cameraForBounds(e,t),t,n)}_raycastElevationBox(t,n){const r=this.transform.elevation;if(!r)return;const i=new e.pointGeometry(t.x,n.y),o=new e.pointGeometry(n.x,t.y),a=r.pointCoordinate(t);if(!a)return;const s=r.pointCoordinate(n);if(!s)return;const l=r.pointCoordinate(i);if(!l)return;const c=r.pointCoordinate(o);if(!c)return;const u=new e.MercatorCoordinate(a[0],a[1]).toLngLat(),h=new e.MercatorCoordinate(s[0],s[1]).toLngLat(),f=new e.MercatorCoordinate(l[0],l[1]).toLngLat(),p=new e.MercatorCoordinate(c[0],c[1]).toLngLat(),d=Math.min(u.lng,Math.min(h.lng,Math.min(f.lng,p.lng))),m=Math.min(u.lat,Math.min(h.lat,Math.min(f.lat,p.lat))),g=Math.max(u.lng,Math.max(h.lng,Math.max(f.lng,p.lng))),y=Math.max(u.lat,Math.max(h.lat,Math.max(f.lat,p.lat))),v=Math.min(a[3],Math.min(s[3],Math.min(l[3],c[3]))),b=Math.max(a[3],Math.max(s[3],Math.max(l[3],c[3])));return{minLngLat:new e.LngLat(d,m),maxLngLat:new e.LngLat(g,y),minAltitude:v,maxAltitude:b}}fitScreenCoordinates(t,n,r,i,o){let a,s,l,c;const u=e.pointGeometry.convert(t),h=e.pointGeometry.convert(n),f=this._raycastElevationBox(u,h);if(f)a=f.minLngLat,s=f.maxLngLat,l=f.minAltitude,c=f.maxAltitude;else{if(this.transform.anyCornerOffEdge(u,h))return this;a=this.transform.pointLocation(u),s=this.transform.pointLocation(h)}return this._fitInternal(0===this.transform.pitch?this._cameraForBoxAndBearing(this.transform.pointLocation(e.pointGeometry.convert(t)),this.transform.pointLocation(e.pointGeometry.convert(n)),r,i):this._cameraForBox(a,s,l,c,i),i,o)}_fitInternal(t,n,r){return t?(delete(n=e.extend(t,n)).padding,n.linear?this.easeTo(n,r):this.flyTo(n,r)):this}jumpTo(t,n){this.stop();const r=t.preloadOnly?this.transform.clone():this.transform;let i=!1,o=!1,a=!1;return"zoom"in t&&r.zoom!==+t.zoom&&(i=!0,r.zoom=+t.zoom),void 0!==t.center&&(r.center=e.LngLat.convert(t.center)),"bearing"in t&&r.bearing!==+t.bearing&&(o=!0,r.bearing=+t.bearing),"pitch"in t&&r.pitch!==+t.pitch&&(a=!0,r.pitch=+t.pitch),null==t.padding||r.isPaddingEqual(t.padding)||(r.padding=t.padding),t.preloadOnly?(this._preloadTiles(r),this):(this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),i&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),o&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),a&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||e.warnOnce(Ri),this.transform.getFreeCameraOptions()}setFreeCameraOptions(t,n){const r=this.transform;if(!r.projection.supportsFreeCamera)return e.warnOnce(Ri),this;this.stop();const i=r.zoom,o=r.pitch,a=r.bearing;r.setFreeCameraOptions(t);const s=i!==r.zoom,l=o!==r.pitch,c=a!==r.bearing;return this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),s&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),c&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),l&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n)),this}easeTo(t,n){this._stop(!1,t.easeId),(!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate||!t.essential&&e.exported.prefersReducedMotion)&&(t.duration=0);const r=this.transform,i=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in t?+t.zoom:i,c="bearing"in t?this._normalizeBearing(t.bearing,o):o,u="pitch"in t?+t.pitch:a,h="padding"in t?t.padding:r.padding,f=e.pointGeometry.convert(t.offset);let p,d,m;if("globe"===r.projection.name){const n=e.MercatorCoordinate.fromLngLat(r.center),i=f.rotate(-r.angle);n.x+=i.x/r.worldSize,n.y+=i.y/r.worldSize;const o=n.toLngLat(),a=e.LngLat.convert(t.center||o);this._normalizeCenter(a),p=r.centerPoint.add(i),d=new e.pointGeometry(n.x,n.y).mult(r.worldSize),m=new e.pointGeometry(e.mercatorXfromLng(a.lng),e.mercatorYfromLat(a.lat)).mult(r.worldSize).sub(d)}else{p=r.centerPoint.add(f);const n=r.pointLocation(p),i=e.LngLat.convert(t.center||n);this._normalizeCenter(i),d=r.project(n),m=r.project(i).sub(d)}const g=r.zoomScale(l-i);let y,v;t.around&&(y=e.LngLat.convert(t.around),v=r.locationPoint(y));const b=this._zooming||l!==i,_=this._rotating||o!==c,x=this._pitching||u!==a,A=!r.isPaddingEqual(h),w=r=>w=>{if(b&&(r.zoom=e.number(i,l,w)),_&&(r.bearing=e.number(o,c,w)),x&&(r.pitch=e.number(a,u,w)),A&&(r.interpolatePadding(s,h,w),p=r.centerPoint.add(f)),y)r.setLocationAtPoint(y,v);else{const e=r.zoomScale(r.zoom-i),t=l>i?Math.min(2,g):Math.max(.5,g),n=Math.pow(t,1-w),o=r.unproject(d.add(m.mult(w*n)).mult(e));r.setLocationAtPoint(r.renderWorldCopies?o.wrap():o,p)}return t.preloadOnly||this._fireMoveEvents(n),r};if(t.preloadOnly){const e=this._emulate(w,t.duration,r);return this._preloadTiles(e),this}const C={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=b,this._rotating=_,this._pitching=x,this._padding=A,this._easeId=t.easeId,this._prepareEase(n,t.noMoveStart,C),this._ease(w(r),(e=>{r.recenterOnTerrain(),this._afterEase(n,e)}),t),this}_prepareEase(t,n,r={}){this._moving=!0,this.transform.cameraElevationReference="sea",n||r.moving||this.fire(new e.Event("movestart",t)),this._zooming&&!r.zooming&&this.fire(new e.Event("zoomstart",t)),this._rotating&&!r.rotating&&this.fire(new e.Event("rotatestart",t)),this._pitching&&!r.pitching&&this.fire(new e.Event("pitchstart",t))}_fireMoveEvents(t){this.fire(new e.Event("move",t)),this._zooming&&this.fire(new e.Event("zoom",t)),this._rotating&&this.fire(new e.Event("rotate",t)),this._pitching&&this.fire(new e.Event("pitch",t))}_afterEase(t,n){if(this._easeId&&n&&this._easeId===n)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const r=this._zooming,i=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new e.Event("zoomend",t)),i&&this.fire(new e.Event("rotateend",t)),o&&this.fire(new e.Event("pitchend",t)),this.fire(new e.Event("moveend",t))}flyTo(t,n){if(!t.essential&&e.exported.prefersReducedMotion){const r=e.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(r,n)}this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);const r=this.transform,i=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in t?e.clamp(+t.zoom,r.minZoom,r.maxZoom):i,c="bearing"in t?this._normalizeBearing(t.bearing,o):o,u="pitch"in t?+t.pitch:a,h="padding"in t?t.padding:r.padding,f=r.zoomScale(l-i),p=e.pointGeometry.convert(t.offset);let d=r.centerPoint.add(p);const m=r.pointLocation(d),g=e.LngLat.convert(t.center||m);this._normalizeCenter(g);const y=r.project(m),v=r.project(g).sub(y);let b=t.curve;const _=Math.max(r.width,r.height),x=_/f,A=v.mag();if("minZoom"in t){const n=e.clamp(Math.min(t.minZoom,i,l),r.minZoom,r.maxZoom),o=_/r.zoomScale(n-i);b=Math.sqrt(o/A*2)}const w=b*b;function C(e){const t=(x*x-_*_+(e?-1:1)*w*w*A*A)/(2*(e?x:_)*w*A);return Math.log(Math.sqrt(t*t+1)-t)}function E(e){return(Math.exp(e)-Math.exp(-e))/2}function S(e){return(Math.exp(e)+Math.exp(-e))/2}const T=C(0);let B=function(e){return S(T)/S(T+b*e)},k=function(e){return _*((S(T)*(E(t=T+b*e)/S(t))-E(T))/w)/A;var t},M=(C(1)-T)/b;if(Math.abs(A)<1e-6||!isFinite(M)){if(Math.abs(_-x)<1e-6)return this.easeTo(t,n);const e=x<_?-1:1;M=Math.abs(Math.log(x/_))/b,k=function(){return 0},B=function(t){return Math.exp(e*b*t)}}t.duration="duration"in t?+t.duration:1e3*M/("screenSpeed"in t?+t.screenSpeed/b:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0);const P=o!==c,I=u!==a,O=!r.isPaddingEqual(h),D=r=>f=>{const m=f*M,b=1/B(m);r.zoom=1===f?l:i+r.scaleZoom(b),P&&(r.bearing=e.number(o,c,f)),I&&(r.pitch=e.number(a,u,f)),O&&(r.interpolatePadding(s,h,f),d=r.centerPoint.add(p));const _=1===f?g:r.unproject(y.add(v.mult(k(m))).mult(b));return r.setLocationAtPoint(r.renderWorldCopies?_.wrap():_,d),r._updateCameraOnTerrain(),t.preloadOnly||this._fireMoveEvents(n),r};if(t.preloadOnly){const e=this._emulate(D,t.duration,r);return this._preloadTiles(e),this}return this._zooming=!0,this._rotating=P,this._pitching=I,this._padding=O,this._prepareEase(n,!1),this._ease(D(r),(()=>this._afterEase(n)),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const e=this._onEaseEnd;this._onEaseEnd=void 0,e.call(this,t)}if(!e){const e=this.handlers;e&&e.stop(!1)}return this}_ease(t,n,r){!1===r.animate||0===r.duration?(t(1),n()):(this._easeStart=e.exported.now(),this._easeOptions=r,this._onEaseFrame=t,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const t=Math.min((e.exported.now()-this._easeStart)/this._easeOptions.duration,1),n=this._onEaseFrame;n&&n(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(t,n){t=e.wrap(t,-180,180);const r=Math.abs(t-n);return Math.abs(t-360-n)<r&&(t-=360),Math.abs(t+360-n)<r&&(t+=360),t}_normalizeCenter(e){const t=this.transform;if(!t.renderWorldCopies||t.maxBounds)return;const n=e.lng-t.center.lng;e.lng+=n>180?-360:n<-180?360:0}_emulate(e,t,n){const r=Math.ceil(15*t/1e3),i=[],o=e(n.clone());for(let e=0;e<=r;e++){const t=o(e/r);i.push(t.clone())}return i}}class Ui{constructor(t={}){this.options=t,e.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(e){const t=this.options&&this.options.compact;return this._map=e,this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=o("button","mapboxgl-ctrl-attrib-button",this._container),o("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=o("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(e,t){const n=this._map._getUIString(`AttributionControl.${t}`);e.setAttribute("aria-label",n),e.removeAttribute("title"),e.firstElementChild&&e.firstElementChild.setAttribute("title",n)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));const n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(t){const r=n.reduce(((e,t,r)=>(t.value&&(e+=`${t.key}=${t.value}${r<n.length-1?"&":""}`),e)),"?");t.href=`${e.config.FEEDBACK_URL}/${r}${this._map._hash?this._map._hash.getHashString(!0):""}`,t.rel="noopener nofollow",this._setElementTitle(t,"MapFeedback")}}_updateData(e){!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let e=[];if(this._map.style.stylesheet){const e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}const t=this._map.style._sourceCaches;for(const n in t){const r=t[n];if(r.used){const t=r.getSource();t.attribution&&e.indexOf(t.attribution)<0&&e.push(t.attribution)}}e.sort(((e,t)=>e.length-t.length)),e=e.filter(((t,n)=>{for(let r=n+1;r<e.length;r++)if(e[r].indexOf(t)>=0)return!1;return!0})),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=[...this.options.customAttribution,...e]:e.unshift(this.options.customAttribution));const n=e.join(" | ");n!==this._attribHTML&&(this._attribHTML=n,e.length?(this._innerContainer.innerHTML=n,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Ni{constructor(){e.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(e){this._map=e,this._container=o("div","mapboxgl-ctrl");const t=o("a","mapboxgl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://www.mapbox.com/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const e=this._map.style._sourceCaches;if(0===Object.entries(e).length)return!0;for(const t in e){const n=e[t].getSource();if(n.hasOwnProperty("mapbox_logo")&&!n.mapbox_logo)return!1}return!0}_updateCompact(){const e=this._container.children;if(e.length){const t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact")}}}class ji{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}remove(e){const t=this._currentlyRunning,n=t?this._queue.concat(t):this._queue;for(const t of n)if(t.id===e)return void(t.cancelled=!0)}run(e=0){const t=this._currentlyRunning=this._queue;this._queue=[];for(const n of t)if(!n.cancelled&&(n.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Vi(t,n,r){if(t=new e.LngLat(t.lng,t.lat),n){const i=new e.LngLat(t.lng-360,t.lat),o=new e.LngLat(t.lng+360,t.lat),a=360*Math.ceil(Math.abs(t.lng-r.center.lng)/360),s=r.locationPoint(t).distSqr(n),l=n.x<0||n.y<0||n.x>r.width||n.y>r.height;r.locationPoint(i).distSqr(n)<s&&(l||Math.abs(i.lng-r.center.lng)<a)?t=i:r.locationPoint(o).distSqr(n)<s&&(l||Math.abs(o.lng-r.center.lng)<a)&&(t=o)}for(;Math.abs(t.lng-r.center.lng)>180;){const e=r.locationPoint(t);if(e.x>=0&&e.y>=0&&e.x<=r.width&&e.y<=r.height)break;t.lng>r.center.lng?t.lng-=360:t.lng+=360}return t}const Gi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class qi extends e.Evented{constructor(t,n){if(super(),(t instanceof e.window.HTMLElement||n)&&(t=e.extend({element:t},n)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&"auto"!==t.pitchAlignment?t.pitchAlignment:this._rotationAlignment,this._updateMoving=()=>this._update(!0),t&&t.element)this._element=t.element,this._offset=e.pointGeometry.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=o("div");const n=41,r=27,i=a("svg",{display:"block",height:n*this._scale+"px",width:r*this._scale+"px",viewBox:`0 0 ${r} ${n}`},this._element),s=a("radialGradient",{id:"shadowGradient"},a("defs",{},i));a("stop",{offset:"10%","stop-opacity":.4},s),a("stop",{offset:"100%","stop-opacity":.05},s),a("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},i),a("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},i),a("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},i),a("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},i),this._offset=e.pointGeometry.convert(t&&t.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(e=>{e.preventDefault()})),this._element.addEventListener("mousedown",(e=>{e.preventDefault()}));const r=this._element.classList;for(const e in Gi)r.remove(`mapboxgl-marker-anchor-${e}`);r.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(e){return e===this._map||(this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._updateMoving),e.on("moveend",this._update),e.on("remove",this._clearFadeTimer),e._addMarker(this),this.setDraggable(this._draggable),this._update(),e.on("click",this._onMapClick)),this}remove(){const e=this._map;return e&&(e.off("click",this._onMapClick),e.off("move",this._updateMoving),e.off("moveend",this._update),e.off("mousedown",this._addDragHandler),e.off("touchstart",this._addDragHandler),e.off("mouseup",this._onUp),e.off("touchend",this._onUp),e.off("mousemove",this._onMove),e.off("touchmove",this._onMove),e.off("remove",this._clearFadeTimer),e._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const t=38.1,n=13.5,r=Math.sqrt(Math.pow(n,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[r,-1*(t-n+r)],"bottom-right":[-r,-1*(t-n+r)],left:[n,-1*(t-n)],right:[-n,-1*(t-n)]}:this._offset}this._popup=e,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(e){const t=e.code,n=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==n&&13!==n||this.togglePopup()}_onMapClick(e){const t=e.originalEvent.target,n=this._element;this._popup&&(t===n||n.contains(t))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const e=this._popup;return e?(e.isOpen()?(e.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(e.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_evaluateOpacity(){const e=this._map;if(!e)return;const t=this._pos;if(!t||t.x<0||t.x>e.transform.width||t.y<0||t.y>e.transform.height)return void this._clearFadeTimer();const n=e.unproject(t);let r=!1;if(e.transform._terrainEnabled()&&e.getTerrain()){const t=e.getFreeCameraOptions();if(t.position){const e=t.position.toLngLat();r=e.distanceTo(n)<.9*e.distanceTo(this._lngLat)}}const i=(1-e._queryFogOpacity(n))*(r?.2:1);this._element.style.opacity=`${i}`,this._popup&&this._popup._setOpacity(`${i}`),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const e=this._pos;if(!e)return;const t=this._offset.mult(this._scale),n=this._calculatePitch(),r=this._calculateRotation();this._element.style.transform=`\n            translate(${e.x}px, ${e.y}px) ${Gi[this._anchor]}\n            rotateX(${n}deg) rotateZ(${r}deg)\n            translate(${t.x}px, ${t.y}px)\n        `}_calculatePitch(){return"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?0:this._map&&"map"===this._pitchAlignment?this._map.getPitch():0}_calculateRotation(){return"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?this._rotation:this._map&&"map"===this._rotationAlignment?this._rotation-this._map.getBearing():0}_update(t){e.window.cancelAnimationFrame(this._updateFrameId);const n=this._map;n&&(n.transform.renderWorldCopies&&(this._lngLat=Vi(this._lngLat,this._pos,n.transform)),this._pos=n.project(this._lngLat),!0===t?this._updateFrameId=e.window.requestAnimationFrame((()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())})):this._pos=this._pos.round(),n._requestDomTask((()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),!n.getTerrain()&&!n.getFog()||this._fadeTimer||(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))})))}getOffset(){return this._offset}setOffset(t){return this._offset=e.pointGeometry.convert(t),this._update(),this}_onMove(t){const n=this._map;if(n){if(!this._isDragging){const e=this._clickTolerance||n._clickTolerance;this._isDragging=t.point.dist(this._pointerdownPos)>=e}this._isDragging&&(this._pos=t.point.sub(this._positionDelta),this._lngLat=n.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag")))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const t=this._map;t&&(t.off("mousemove",this._onMove),t.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"}_addDragHandler(e){const t=this._map;t&&this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos),this._pointerdownPos=e.point,this._state="pending",t.on("mousemove",this._onMove),t.on("touchmove",this._onMove),t.once("mouseup",this._onUp),t.once("touchend",this._onUp))}setDraggable(e){this._draggable=!!e;const t=this._map;return t&&(e?(t.on("mousedown",this._addDragHandler),t.on("touchstart",this._addDragHandler)):(t.off("mousedown",this._addDragHandler),t.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&"auto"!==e?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}class Wi{constructor(e){this.jumpTo(e)}getValue(t){if(t<=this._startTime)return this._start;if(t>=this._endTime)return this._end;const n=e.easeCubicInOut((t-this._startTime)/(this._endTime-this._startTime));return this._start*(1-n)+this._end*n}isEasing(e){return e>=this._startTime&&e<=this._endTime}jumpTo(e){this._startTime=-1/0,this._endTime=-1/0,this._start=e,this._end=e}easeTo(e,t,n){this._start=this.getValue(t),this._end=e,this._startTime=t,this._endTime=t+n}}const Hi={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},$i={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function Xi(e){e.parentNode&&e.parentNode.removeChild(e)}const Zi={showCompass:!0,showZoom:!0,visualizePitch:!1};class Yi{constructor(t,n,r=!1){this._clickTolerance=10,this.element=n,this.mouseRotate=new ui({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,r&&(this.mousePitch=new hi({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),n.addEventListener("mousedown",this.mousedown),n.addEventListener("touchstart",this.touchstart,{passive:!1}),n.addEventListener("touchmove",this.touchmove),n.addEventListener("touchend",this.touchend),n.addEventListener("touchcancel",this.reset)}down(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),u()}move(e,t){const n=this.map,r=this.mouseRotate.mousemoveWindow(e,t),i=r&&r.bearingDelta;if(i&&n.setBearing(n.getBearing()+i),this.mousePitch){const r=this.mousePitch.mousemoveWindow(e,t),i=r&&r.pitchDelta;i&&n.setPitch(n.getPitch()+i)}}off(){const e=this.element;e.removeEventListener("mousedown",this.mousedown),e.removeEventListener("touchstart",this.touchstart,{passive:!1}),e.removeEventListener("touchmove",this.touchmove),e.removeEventListener("touchend",this.touchend),e.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){h(),e.window.removeEventListener("mousemove",this.mousemove),e.window.removeEventListener("mouseup",this.mouseup)}mousedown(t){this.down(e.extend({},t,{ctrlKey:!0,preventDefault:()=>t.preventDefault()}),d(this.element,t)),e.window.addEventListener("mousemove",this.mousemove),e.window.addEventListener("mouseup",this.mouseup)}mousemove(e){this.move(e,d(this.element,e))}mouseup(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()}touchstart(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=m(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>e.preventDefault()},this._startPos))}touchmove(e){1!==e.targetTouches.length?this.reset():(this._lastPos=m(this.element,e.targetTouches)[0],this.move({preventDefault:()=>e.preventDefault()},this._lastPos))}touchend(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Ki={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1};let Ji,Qi=0,eo=!1;const to={maxWidth:100,unit:"metric"};function no(e,t,n){const r=n&&n.maxWidth||100,i=e._containerHeight/2,o=e._containerWidth/2-r/2,a=e.unproject([o,i]),s=e.unproject([o+r,i]),l=a.distanceTo(s);if(n&&"imperial"===n.unit){const n=3.2808*l;n>5280?ro(t,r,n/5280,e._getUIString("ScaleControl.Miles"),e):ro(t,r,n,e._getUIString("ScaleControl.Feet"),e)}else n&&"nautical"===n.unit?ro(t,r,l/1852,e._getUIString("ScaleControl.NauticalMiles"),e):l>=1e3?ro(t,r,l/1e3,e._getUIString("ScaleControl.Kilometers"),e):ro(t,r,l,e._getUIString("ScaleControl.Meters"),e)}function ro(e,t,n,r,i){const o=function(e){const t=Math.pow(10,`${Math.floor(e)}`.length-1);let n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(e){const t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(n),t*n}(n),a=o/n;i._requestDomTask((()=>{e.style.width=t*a+"px",e.innerHTML=`${o}&nbsp;${r}`}))}const io={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},oo=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ao(t=new e.pointGeometry(0,0),n="bottom"){if("number"==typeof t){const r=Math.round(Math.sqrt(.5*Math.pow(t,2)));switch(n){case"top":return new e.pointGeometry(0,t);case"top-left":return new e.pointGeometry(r,r);case"top-right":return new e.pointGeometry(-r,r);case"bottom":return new e.pointGeometry(0,-t);case"bottom-left":return new e.pointGeometry(r,-r);case"bottom-right":return new e.pointGeometry(-r,-r);case"left":return new e.pointGeometry(t,0);case"right":return new e.pointGeometry(-t,0)}return new e.pointGeometry(0,0)}return t instanceof e.pointGeometry||Array.isArray(t)?e.pointGeometry.convert(t):e.pointGeometry.convert(t[n]||[0,0])}const so={version:e.version,supported:t,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:class extends Fi{constructor(t){if(null!=(t=e.extend({},$i,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&t.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(t.antialias&&e.isSafariWithAntialiasingBug(e.window)&&(t.antialias=!1,e.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Nr(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies),t),this._interactive=t.interactive,this._minTileCacheSize=t.minTileCacheSize,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._antialias=t.antialias,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=t.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=t.collectResourceTiming,this._optimizeForTerrain=t.optimizeForTerrain,this._renderTaskQueue=new ji,this._domRenderTaskQueue=new ji,this._controls=[],this._markers=[],this._mapId=e.uniqueId(),this._locale=e.extend({},Hi,t.locale),this._clickTolerance=t.clickTolerance,this._cooperativeGestures=t.cooperativeGestures,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Wi(0),this._explicitProjection=null,this._requestManager=new e.RequestManager(t.transformRequest,t.accessToken,t.testMode),this._silenceAuthErrors=!!t.testMode,"string"==typeof t.container){if(this._container=e.window.document.getElementById(t.container),!this._container)throw new Error(`Container '${t.container}' not found.`)}else{if(!(t.container instanceof e.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}if(this._container.childNodes.length>0&&e.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),t.maxBounds&&this.setMaxBounds(t.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1),e.window.addEventListener("orientationchange",this._onWindowResize,!1),e.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1)),this.handlers=new Li(this,t),this._localFontFamily=t.localFontFamily,this._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&this.setStyle(t.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),t.projection&&this.setProjection(t.projection),this._hash=t.hash&&new Vr("string"==typeof t.hash&&t.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(this.resize(),this.fitBounds(t.bounds,e.extend({},t.fitBoundsOptions,{duration:0})))),this.resize(),t.attributionControl&&this.addControl(new Ui({customAttribution:t.customAttribution})),this._logoControl=new Ni,this.addControl(this._logoControl,t.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(t=>{this._update("style"===t.dataType),this.fire(new e.Event(`${t.dataType}data`,t))})),this.on("dataloading",(t=>{this.fire(new e.Event(`${t.dataType}dataloading`,t))}))}_getMapId(){return this._mapId}addControl(t,n){if(void 0===n&&(n=t.getDefaultPosition?t.getDefaultPosition():"top-right"),!t||!t.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const r=t.onAdd(this);this._controls.push(t);const i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this}removeControl(t){if(!t||!t.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(t);return n>-1&&this._controls.splice(n,1),t.onRemove(this),this}hasControl(e){return this._controls.indexOf(e)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(t){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const n=!this._moving;return n&&this.fire(new e.Event("movestart",t)).fire(new e.Event("move",t)),this.fire(new e.Event("resize",t)),n&&this.fire(new e.Event("moveend",t)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(t){return this.transform.setMaxBounds(e.LngLatBounds.convert(t)),this._update()}setMinZoom(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(t){if((t=null==t?85:t)>85)throw new Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(e){return this.transform.renderWorldCopies=e,this._update()}getProjection(){return this._explicitProjection?this._explicitProjection:this.style&&this.style.stylesheet&&this.style.stylesheet.projection?this.style.stylesheet.projection:{name:"mercator",center:[0,0]}}setProjection(e){return this._lazyInitEmptyStyle(),e?"string"==typeof e&&(e={name:e}):e=null,this._updateProjection(e)}_updateProjection(e){null===e&&(this._explicitProjection=null);const t=e||this.getProjection(),n=this.transform.setProjection(t);if(e&&(this._explicitProjection=this.transform.getProjection()),n){this.painter.clearBackgroundTiles();for(const e in this.style._sourceCaches)this.style._sourceCaches[e].clearTiles();this.style.applyProjectionUpdate(),this._update(!0)}return this}project(t){return this.transform.locationPoint3D(e.LngLat.convert(t))}unproject(t){return this.transform.pointLocation3D(e.pointGeometry.convert(t))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_createDelegatedListener(e,t,n){if("mouseenter"===e||"mouseover"===e){let r=!1;const i=i=>{const o=t.filter((e=>this.getLayer(e))),a=o.length?this.queryRenderedFeatures(i.point,{layers:o}):[];a.length?r||(r=!0,n.call(this,new Kr(e,this,i.originalEvent,{features:a}))):r=!1},o=()=>{r=!1};return{layers:new Set(t),listener:n,delegates:{mousemove:i,mouseout:o}}}if("mouseleave"===e||"mouseout"===e){let r=!1;const i=i=>{const o=t.filter((e=>this.getLayer(e)));(o.length?this.queryRenderedFeatures(i.point,{layers:o}):[]).length?r=!0:r&&(r=!1,n.call(this,new Kr(e,this,i.originalEvent)))},o=t=>{r&&(r=!1,n.call(this,new Kr(e,this,t.originalEvent)))};return{layers:new Set(t),listener:n,delegates:{mousemove:i,mouseout:o}}}{const r=e=>{const r=t.filter((e=>this.getLayer(e))),i=r.length?this.queryRenderedFeatures(e.point,{layers:r}):[];i.length&&(e.features=i,n.call(this,e),delete e.features)};return{layers:new Set(t),listener:n,delegates:{[e]:r}}}}on(e,t,n){if(void 0===n)return super.on(e,t);Array.isArray(t)||(t=[t]);const r=this._createDelegatedListener(e,t,n);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(r);for(const e in r.delegates)this.on(e,r.delegates[e]);return this}once(e,t,n){if(void 0===n)return super.once(e,t);Array.isArray(t)||(t=[t]);const r=this._createDelegatedListener(e,t,n);for(const e in r.delegates)this.once(e,r.delegates[e]);return this}off(e,t,n){if(void 0===n)return super.off(e,t);t=new Set(Array.isArray(t)?t:[t]);const r=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0},i=this._delegatedListeners?this._delegatedListeners[e]:void 0;return i&&(e=>{for(let i=0;i<e.length;i++){const o=e[i];if(o.listener===n&&r(o.layers,t)){for(const e in o.delegates)this.off(e,o.delegates[e]);return e.splice(i,1),this}}})(i),this}queryRenderedFeatures(t,n){return this.style?(void 0!==n||void 0===t||t instanceof e.pointGeometry||Array.isArray(t)||(n=t,t=void 0),this.style.queryRenderedFeatures(t=t||[[0,0],[this.transform.width,this.transform.height]],n=n||{},this.transform)):[]}querySourceFeatures(e,t){return this.style.querySourceFeatures(e,t)}queryTerrainElevation(t,n){const r=this.transform.elevation;return r?(n=e.extend({},{exaggerated:!0},n),r.getAtPoint(e.MercatorCoordinate.fromLngLat(t),null,n.exaggerated)):null}setStyle(t,n){return!1!==(n=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&n.localFontFamily===this._localFontFamily&&this.style&&t?(this._diffStyle(t,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._localFontFamily=n.localFontFamily,this._updateStyle(t,n))}_getUIString(e){const t=this._locale[e];if(null==t)throw new Error(`Missing UI string '${e}'`);return t}_updateStyle(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),e&&(this.style=new Xt(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Xt(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(t,n){if("string"==typeof t){const r=this._requestManager.normalizeStyleURL(t),i=this._requestManager.transformRequest(r,e.ResourceType.Style);e.getJSON(i,((t,r)=>{t?this.fire(new e.ErrorEvent(t)):r&&this._updateDiff(r,n)}))}else"object"==typeof t&&this._updateDiff(t,n)}_updateDiff(t,n){try{this.style.setState(t)&&this._update(!0)}catch(r){e.warnOnce(`Unable to perform style diff: ${r.message||r.error||r}.  Rebuilding the style from scratch.`),this._updateStyle(t,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(e.warnOnce("There is no style added to the map."),!1)}addSource(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}isSourceLoaded(e){return!!this.style&&this.style._isSourceCacheLoaded(e)}areTilesLoaded(){const e=this.style&&this.style._sourceCaches;for(const t in e){const n=e[t]._tiles;for(const e in n){const t=n[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}}return!0}addSourceType(e,t,n){this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,n)}removeSource(e){return this.style.removeSource(e),this._updateTerrain(),this._update(!0)}getSource(e){return this.style.getSource(e)}addImage(t,n,{pixelRatio:r=1,sdf:i=!1,stretchX:o,stretchY:a,content:s}={}){if(this._lazyInitEmptyStyle(),n instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&n instanceof e.window.ImageBitmap){const{width:l,height:c,data:u}=e.exported.getImageData(n);this.style.addImage(t,{data:new e.RGBAImage({width:l,height:c},u),pixelRatio:r,stretchX:o,stretchY:a,content:s,sdf:i,version:0})}else if(void 0===n.width||void 0===n.height)this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:l,height:c}=n,u=n;this.style.addImage(t,{data:new e.RGBAImage({width:l,height:c},new Uint8Array(u.data)),pixelRatio:r,stretchX:o,stretchY:a,content:s,sdf:i,version:0,userImage:u}),u.onAdd&&u.onAdd(this,t)}}updateImage(t,n){const r=this.style.getImage(t);if(!r)return void this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const i=n instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&n instanceof e.window.ImageBitmap?e.exported.getImageData(n):n,{width:o,height:a}=i;void 0!==o&&void 0!==a?o===r.data.width&&a===r.data.height?(r.data.replace(i.data,!(n instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&n instanceof e.window.ImageBitmap)),this.style.updateImage(t,r)):this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(e){this.style.removeImage(e)}loadImage(t,n){e.getImage(this._requestManager.transformRequest(t,e.ResourceType.Image),((t,r)=>{n(t,r instanceof e.window.HTMLImageElement?e.exported.getImageData(r):r)}))}listImages(){return this.style.listImages()}addLayer(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}moveLayer(e,t){return this.style.moveLayer(e,t),this._update(!0)}removeLayer(e){return this.style.removeLayer(e),this._update(!0)}getLayer(e){return this.style.getLayer(e)}setLayerZoomRange(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0)}setFilter(e,t,n={}){return this.style.setFilter(e,t,n),this._update(!0)}getFilter(e){return this.style.getFilter(e)}setPaintProperty(e,t,n,r={}){return this.style.setPaintProperty(e,t,n,r),this._update(!0)}getPaintProperty(e,t){return this.style.getPaintProperty(e,t)}setLayoutProperty(e,t,n,r={}){return this.style.setLayoutProperty(e,t,n,r),this._update(!0)}getLayoutProperty(e,t){return this.style.getLayoutProperty(e,t)}setLight(e,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(e){return this._lazyInitEmptyStyle(),!e&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(e),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(e){return this._lazyInitEmptyStyle(),this.style.setFog(e),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(t){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(e.LngLat.convert(t),this.transform):0}setFeatureState(e,t){return this.style.setFeatureState(e,t),this._update()}removeFeatureState(e,t){return this.style.removeFeatureState(e,t),this._update()}getFeatureState(e){return this.style.getFeatureState(e)}_updateContainerDimensions(){if(!this._container)return;const t=this._container.getBoundingClientRect().width||400,n=this._container.getBoundingClientRect().height||300;let r,i,o,a=this._container;for(;a&&(!i||!o);){const t=e.window.getComputedStyle(a).transform;t&&"none"!==t&&(r=t.match(/matrix.*\((.+)\)/)[1].split(", "),r[0]&&"0"!==r[0]&&"1"!==r[0]&&(i=r[0]),r[3]&&"0"!==r[3]&&"1"!==r[3]&&(o=r[3])),a=a.parentElement}this._containerWidth=i?Math.abs(t/i):t,this._containerHeight=o?Math.abs(n/o):n}_detectMissingCSS(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=o("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();const t=this._canvasContainer=o("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=o("canvas","mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const n=this._controlContainer=o("div","mapboxgl-control-container",e),r=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((e=>{r[e]=o("div",`mapboxgl-ctrl-${e}`,n)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(t,n){const r=e.exported.devicePixelRatio||1;this._canvas.width=r*Math.ceil(t),this._canvas.height=r*Math.ceil(n),this._canvas.style.width=`${t}px`,this._canvas.style.height=`${n}px`}_addMarker(e){this._markers.push(e)}_removeMarker(e){const t=this._markers.indexOf(e);-1!==t&&this._markers.splice(t,1)}_setupPainter(){const n=e.extend({},t.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n);r?(e.storeAuthState(r,!0),this.painter=new Tr(r,this.transform),this.on("data",(e=>{"source"===e.dataType&&this.painter.setTileLoadedFlag(!0)})),e.exported$1.testSupport(r)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:t}))}_contextRestored(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:t}))}_onMapScroll(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(e){return this._update(),this._renderTaskQueue.add(e)}_cancelRenderFrame(e){this._renderTaskQueue.remove(e)}_requestDomTask(e){!this.loaded()||this.loaded()&&!this.isMoving()?e():this._domRenderTaskQueue.add(e)}_render(t){let n;const r=this.painter.context.extTimerQuery,i=e.exported.now();if(this.listens("gpu-timing-frame")&&(n=r.createQueryEXT(),r.beginQueryEXT(r.TIME_ELAPSED_EXT,n)),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(t),this._domRenderTaskQueue.run(t),this._removed)return;let o=!1;const a=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const t=this.transform.zoom,n=this.transform.pitch,r=e.exported.now();this.style.zoomHistory.update(t,r);const i=new e.EvaluationParameters(t,{now:r,fadeDuration:a,pitch:n,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),s=i.crossFadingFactor();1===s&&s===this._crossFadingFactor||(o=!0,this._crossFadingFactor=s),this.style.update(i)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let s=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),s=this._updateAverageElevation(i),this.style._updateSources(this.transform),this._forceMarkerUpdate()):s=this._updateAverageElevation(i),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,a,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:a,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),speedIndexTiming:this.speedIndexTiming}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||o)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const t=e.exported.now()-i;r.endQueryEXT(r.TIME_ELAPSED_EXT,n),setTimeout((()=>{const i=r.getQueryObjectEXT(n,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(n),this.fire(new e.Event("gpu-timing-frame",{cpuTime:t,gpuTime:i}))}),50)}if(this.listens("gpu-timing-layer")){const t=this.painter.collectGpuTimers();setTimeout((()=>{const n=this.painter.queryGpuTimers(t);this.fire(new e.Event("gpu-timing-layer",{layerTimes:n}))}),50)}const l=this._sourcesDirty||this._styleDirty||this._placementDirty||s;if(l||this._repaint)this.triggerRepaint();else{const t=!this.isMoving()&&this.loaded();if(t&&(s=this._updateAverageElevation(i,!0)),s)this.triggerRepaint();else if(this._triggerFrame(!1),t&&(this.fire(new e.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const t=this._calculateSpeedIndex();this.fire(new e.Event("speedindexcompleted",{speedIndex:t})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||l||(this._fullyLoaded=!0,this._authenticate())}_forceMarkerUpdate(){for(const e of this._markers)e._update()}_updateAverageElevation(e,t=!1){const n=e=>(this.transform.averageElevation=e,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&n(0);if((t||e-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(e)){const t=this.transform.averageElevation;let r=this.transform.sampleAverageElevation(),i=!1;this.transform.elevation&&(i=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(r)?r=0:this._averageElevationLastSampledAt=e;const o=Math.abs(t-r);if(o>1){if(this._isInitialLoad||i)return this._averageElevation.jumpTo(r),n(r);this._averageElevation.easeTo(r,e,300)}else if(o>1e-4)return this._averageElevation.jumpTo(r),n(r)}return!!this._averageElevation.isEasing(e)&&n(this._averageElevation.getValue(e))}_authenticate(){e.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(t=>{if(t&&(t.message===e.AUTH_ERR_MSG||401===t.status)){const t=this.painter.context.gl;e.storeAuthState(t,!1),this._logoControl instanceof Ni&&this._logoControl._updateLogo(),t&&t.clear(t.DEPTH_BUFFER_BIT|t.COLOR_BUFFER_BIT|t.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new e.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),e.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(()=>{}))}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const e=this.painter.canvasCopy(),t=this.painter.getCanvasCopiesAndTimestamps();t.timeStamps.push(performance.now());const n=this.painter.context.gl,r=n.createFramebuffer();function i(e){n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);const t=new Uint8Array(n.drawingBufferWidth*n.drawingBufferHeight*4);return n.readPixels(0,0,n.drawingBufferWidth,n.drawingBufferHeight,n.RGBA,n.UNSIGNED_BYTE,t),t}return n.bindFramebuffer(n.FRAMEBUFFER,r),this._canvasPixelComparison(i(e),t.canvasCopies.map(i),t.timeStamps)}_canvasPixelComparison(e,t,n){let r=n[1]-n[0];const i=e.length/4;for(let o=0;o<t.length;o++){const a=t[o];let s=0;for(let t=0;t<a.length;t+=4)a[t]===e[t]&&a[t+1]===e[t+1]&&a[t+2]===e[t+2]&&a[t+3]===e[t+3]&&(s+=1);r+=(n[o+2]-n[o+1])*(1-s/i)}return r}remove(){this._hash&&this._hash.remove();for(const e of this._controls)e.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("orientationchange",this._onWindowResize,!1),e.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),Xi(this._canvasContainer),Xi(this._controlContainer),Xi(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),e.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new e.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(t){this._renderNextFrame=this._renderNextFrame||t,this.style&&!this._frame&&(this._frame=e.exported.frame((e=>{const t=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,t&&this._render(e)})))}_preloadTiles(t){const n=this.style?Object.values(this.style._sourceCaches):[];return e.asyncAll(n,((e,n)=>e._preloadTiles(t,n)),(()=>{this.triggerRepaint()})),this}_onWindowOnline(){this._update()}_onWindowResize(e){this._trackResize&&this.resize({originalEvent:e})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(e){this._showTerrainWireframe!==e&&(this._showTerrainWireframe=e,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(e){this._speedIndexTiming!==e&&(this._speedIndexTiming=e,this._update())}get showPadding(){return!!this._showPadding}set showPadding(e){this._showPadding!==e&&(this._showPadding=e,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}get repaint(){return!!this._repaint}set repaint(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(e){this._vertices=e,this._update()}_setCacheLimits(t,n){e.setCacheLimits(t,n)}get version(){return e.version}},NavigationControl:class{constructor(t){this.options=e.extend({},Zi,t),this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(e=>{this._map&&this._map.zoomIn({},{originalEvent:e})})),o("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(e=>{this._map&&this._map.zoomOut({},{originalEvent:e})})),o("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(e=>{const t=this._map;t&&(this.options.visualizePitch?t.resetNorthPitch({},{originalEvent:e}):t.resetNorth({},{originalEvent:e}))})),this._compassIcon=o("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const e=this._map;if(!e)return;const t=e.getZoom(),n=t===e.getMaxZoom(),r=t===e.getMinZoom();this._zoomInButton.disabled=n,this._zoomOutButton.disabled=r,this._zoomInButton.setAttribute("aria-disabled",n.toString()),this._zoomOutButton.setAttribute("aria-disabled",r.toString())}_rotateCompassArrow(){const e=this._map;if(!e)return;const t=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(e.transform.pitch*(Math.PI/180)),.5)}) rotateX(${e.transform.pitch}deg) rotateZ(${e.transform.angle*(180/Math.PI)}deg)`:`rotate(${e.transform.angle*(180/Math.PI)}deg)`;e._requestDomTask((()=>{this._compassIcon&&(this._compassIcon.style.transform=t)}))}onAdd(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),e.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&e.on("pitch",this._rotateCompassArrow),e.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Yi(e,this._compass,this.options.visualizePitch)),this._container}onRemove(){const e=this._map;e&&(this._container.remove(),this.options.showZoom&&e.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&e.off("pitch",this._rotateCompassArrow),e.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(e,t){const n=o("button",e,this._container);return n.type="button",n.addEventListener("click",t),n}_setButtonTitle(e,t){if(!this._map)return;const n=this._map._getUIString(`NavigationControl.${t}`);e.setAttribute("aria-label",n),e.firstElementChild&&e.firstElementChild.setAttribute("title",n)}},GeolocateControl:class extends e.Evented{constructor(t){super(),this.options=e.extend({},Ki,t),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=jr(this._updateMarkerRotation,20)}onAdd(t){var n;return this._map=t,this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-group"),n=this._setupUI,void 0!==Ji?n(Ji):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then((e=>{Ji="denied"!==e.state,n(Ji)})):(Ji=!!e.window.navigator.geolocation,n(Ji)),this._container}onRemove(){void 0!==this._geolocationWatchID&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,Qi=0,eo=!1}_isOutOfMapMaxBounds(e){const t=this._map.getMaxBounds(),n=e.coords;return!!t&&(n.longitude<t.getWest()||n.longitude>t.getEast()||n.latitude<t.getSouth()||n.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",t)),this._finish()}}_updateCamera(t){const n=new e.LngLat(t.coords.longitude,t.coords.latitude),r=t.coords.accuracy,i=this._map.getBearing(),o=e.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(r),o,{geolocateSource:!0})}_updateMarker(t){if(t){const n=new e.LngLat(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const e=this._map._containerHeight/2,t=this._map.unproject([0,e]),n=this._map.unproject([100,e]),r=t.distanceTo(n)/100,i=Math.ceil(2*this._accuracy/r);this._circleElement.style.width=`${i}px`,this._circleElement.style.height=`${i}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&eo)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",t)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(t){if(this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this._geolocateButton=o("button","mapboxgl-ctrl-geolocate",this._container),o("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===t){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",t)}else{const e=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=o("div","mapboxgl-user-location"),this._dotElement.appendChild(o("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(o("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new qi({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=o("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new qi({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(t=>{t.geolocateSource||"ACTIVE_LOCK"!==this._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new e.Event("trackuserlocationend")))}))}_onDeviceOrientation(e){this._userLocationDotMarker&&(e.webkitCompassHeading?this._heading=e.webkitCompassHeading:!0===e.absolute&&(this._heading=-1*e.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Qi--,eo=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let t;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Qi++,Qi>1?(t={maximumAge:6e5,timeout:0},eo=!0):(t=this.options.positionOptions,eo=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,t),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const t=()=>{e.window.addEventListener("ondeviceorientationabsolute"in e.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==e.window.DeviceMotionEvent&&"function"==typeof e.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((e=>{"granted"===e&&t()})).catch(console.error):t()}_clearWatch(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),e.window.removeEventListener("deviceorientation",this._onDeviceOrientation),e.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Ui,ScaleControl:class{constructor(t){this.options=e.extend({},to,t),e.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){no(this._map,this._container,this.options)}onAdd(e){return this._map=e,this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._onMove),this._map=void 0}setUnit(e){this.options.unit=e,no(this._map,this._container,this.options)}},FullscreenControl:class{constructor(t){this._fullscreen=!1,t&&t.container&&(t.container instanceof e.window.HTMLElement?this._container=t.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in e.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=o("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!e.window.document.fullscreenEnabled&&!e.window.document.webkitFullscreenEnabled)}_setupUI(){const t=this._fullscreenButton=o("button","mapboxgl-ctrl-fullscreen",this._controlContainer);o("span","mapboxgl-ctrl-icon",t).setAttribute("aria-hidden","true"),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",e)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(e.window.document.fullscreenElement||e.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends e.Evented{constructor(t){super(),this.options=e.extend(Object.create(io),t),e.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(t&&t.className?t.className.trim().split(/\s+/):[])}addTo(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&t.on("preclick",this._onClose),this.options.closeOnMove&&t.on("move",this._onClose),t.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(t.on("mousemove",this._onMouseEvent),t.on("mouseup",this._onMouseEvent),t._canvasContainer.classList.add("mapboxgl-track-pointer")):t.on("move",this._update),this.fire(new e.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const t=this._map;return t&&(t.off("move",this._update),t.off("move",this._onClose),t.off("preclick",this._onClose),t.off("click",this._onClose),t.off("remove",this.remove),t.off("mousemove",this._onMouseEvent),t.off("mouseup",this._onMouseEvent),t.off("drag",this._onMouseEvent),this._map=void 0),this.fire(new e.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(t){this._lngLat=e.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update();const n=this._map;return n&&(n.on("move",this._update),n.off("mousemove",this._onMouseEvent),n._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const e=this._map;return e&&(e.off("move",this._update),e.on("mousemove",this._onMouseEvent),e.on("drag",this._onMouseEvent),e._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(t){return this.setDOMContent(e.window.document.createTextNode(t))}setHTML(t){const n=e.window.document.createDocumentFragment(),r=e.window.document.createElement("body");let i;for(r.innerHTML=t;i=r.firstChild,i;)n.appendChild(i);return this.setDOMContent(n)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(e){return this.options.maxWidth=e,this._update(),this}setDOMContent(e){let t=this._content;if(t)for(;t.hasChildNodes();)t.firstChild&&t.removeChild(t.firstChild);else t=this._content=o("div","mapboxgl-popup-content",this._container||void 0);if(t.appendChild(e),this.options.closeButton){const e=this._closeButton=o("button","mapboxgl-popup-close-button",t);e.type="button",e.setAttribute("aria-label","Close popup"),e.setAttribute("aria-hidden","true"),e.innerHTML="&#215;",e.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(e){return this._classList.add(e),this._updateClassList(),this}removeClassName(e){return this._classList.delete(e),this._updateClassList(),this}setOffset(e){return this.options.offset=e,this._update(),this}toggleClassName(e){let t;return this._classList.delete(e)?t=!1:(this._classList.add(e),t=!0),this._updateClassList(),t}_onMouseEvent(e){this._update(e.point)}_getAnchor(e){if(this.options.anchor)return this.options.anchor;const t=this._map,n=this._container,r=this._pos;if(!t||!n||!r)return"bottom";const i=n.offsetWidth,o=n.offsetHeight,a=r.x<i/2,s=r.x>t.transform.width-i/2;if(r.y+e<o)return a?"top-left":s?"top-right":"top";if(r.y>t.transform.height-o){if(a)return"bottom-left";if(s)return"bottom-right"}return a?"left":s?"right":"bottom"}_updateClassList(){const e=this._container;if(!e)return;const t=[...this._classList];t.push("mapboxgl-popup"),this._anchor&&t.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&t.push("mapboxgl-popup-track-pointer"),e.className=t.join(" ")}_update(e){const t=this._map,n=this._content;if(!t||!this._lngLat&&!this._trackPointer||!n)return;let r=this._container;if(r||(r=this._container=o("div","mapboxgl-popup",t.getContainer()),this._tip=o("div","mapboxgl-popup-tip",r),r.appendChild(n)),this.options.maxWidth&&r.style.maxWidth!==this.options.maxWidth&&(r.style.maxWidth=this.options.maxWidth),t.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Vi(this._lngLat,this._pos,t.transform)),!this._trackPointer||e){const n=this._pos=this._trackPointer&&e?e:t.project(this._lngLat),r=ao(this.options.offset),i=this._anchor=this._getAnchor(r.y),o=ao(this.options.offset,i),a=n.add(o).round();t._requestDomTask((()=>{this._container&&i&&(this._container.style.transform=`${Gi[i]} translate(${a.x}px,${a.y}px)`)}))}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const e=this._container.querySelector(oo);e&&e.focus()}_onClose(){this.remove()}_setOpacity(e){this._content&&(this._content.style.opacity=e),this._tip&&(this._tip.style.opacity=e)}},Marker:qi,Style:Xt,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.pointGeometry,MercatorCoordinate:e.MercatorCoordinate,FreeCameraOptions:Ir,Evented:e.Evented,config:e.config,prewarm:function(){Ue().acquire(Le)},clearPrewarmedResources:function(){const e=Fe;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(Le),Fe=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(t){e.config.ACCESS_TOKEN=t},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(t){e.config.API_URL=t},get workerCount(){return Re.workerCount},set workerCount(e){Re.workerCount=e},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage(t){e.clearTileCache(t)},workerUrl:"",workerClass:null,setNow:e.exported.setNow,restoreNow:e.exported.restoreNow};return so})),n}()},57824:e=>{var t=1e3,n=60*t,r=60*n,i=24*r;function o(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,a){a=a||{};var s,l,c=typeof e;if("string"===c&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(o){var a=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return 6048e5*a;case"days":case"day":case"d":return a*i;case"hours":case"hour":case"hrs":case"hr":case"h":return a*r;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(e);if("number"===c&&isFinite(e))return a.long?(s=e,(l=Math.abs(s))>=i?o(s,l,i,"day"):l>=r?o(s,l,r,"hour"):l>=n?o(s,l,n,"minute"):l>=t?o(s,l,t,"second"):s+" ms"):function(e){var o=Math.abs(e);return o>=i?Math.round(e/i)+"d":o>=r?Math.round(e/r)+"h":o>=n?Math.round(e/n)+"m":o>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},38897:(e,t,n)=>{"use strict";var r=n(86239),i={body:"",args:[],thisVars:[],localVars:[]};function o(e){if(!e)return i;for(var t=0;t<e.args.length;++t){var n=e.args[t];e.args[t]=0===t?{name:n,lvalue:!0,rvalue:!!e.rvalue,count:e.count||1}:{name:n,lvalue:!1,rvalue:!0,count:1}}return e.thisVars||(e.thisVars=[]),e.localVars||(e.localVars=[]),e}function a(e){for(var t=[],n=0;n<e.args.length;++n)t.push("a"+n);return new Function("P",["return function ",e.funcName,"_ndarrayops(",t.join(","),") {P(",t.join(","),");return a0}"].join(""))(function(e){return r({args:e.args,pre:o(e.pre),body:o(e.body),post:o(e.proc),funcName:e.funcName})}(e))}var s={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var e in s){var n=s[e];t[e]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+n+"c"},funcName:e}),t[e+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a"+n+"=b"},rvalue:!0,funcName:e+"eq"}),t[e+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+n+"s"},funcName:e+"s"}),t[e+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a"+n+"=s"},rvalue:!0,funcName:e+"seq"})}}();var l={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var e in l){var n=l[e];t[e]=a({args:["array","array"],body:{args:["a","b"],body:"a="+n+"b"},funcName:e}),t[e+"eq"]=a({args:["array"],body:{args:["a"],body:"a="+n+"a"},rvalue:!0,count:2,funcName:e+"eq"})}}();var c={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var e in c){var n=c[e];t[e]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+n+"c"},funcName:e}),t[e+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+n+"s"},funcName:e+"s"}),t[e+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a=a"+n+"b"},rvalue:!0,count:2,funcName:e+"eq"}),t[e+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+n+"s"},rvalue:!0,count:2,funcName:e+"seq"})}}();var u=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var e=0;e<u.length;++e){var n=u[e];t[n]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:n}),t[n+"eq"]=a({args:["array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"eq"})}}();var h=["max","min","atan2","pow"];!function(){for(var e=0;e<h.length;++e){var n=h[e];t[n]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:n}),t[n+"s"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:n+"s"}),t[n+"eq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"eq"}),t[n+"seq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"seq"})}}();var f=["atan2","pow"];!function(){for(var e=0;e<f.length;++e){var n=f[e];t[n+"op"]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:n+"op"}),t[n+"ops"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:n+"ops"}),t[n+"opeq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"opeq"}),t[n+"opseq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"opseq"})}}(),t.any=r({args:["array"],pre:i,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),t.all=r({args:["array"],pre:i,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),t.sum=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),t.prod=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),t.norm2squared=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),t.norm2=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),t.norminf=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),t.norm1=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),t.sup=r({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.inf=r({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.argmin=r({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.argmax=r({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.random=a({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),t.assign=a({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),t.assigns=a({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),t.equals=r({args:["array","array"],pre:i,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},21943:(e,t,n)=>{"use strict";var r=n(62861),i=n(11895);e.exports=function(e,t){for(var n=[],o=e,a=1;Array.isArray(o);)n.push(o.length),a*=o.length,o=o[0];return 0===n.length?r():(t||(t=r(new Float64Array(a),n)),i(t,e),t)}},11895:(e,t,n)=>{e.exports=n(86239)({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},39219:(e,t,n)=>{"use strict";var r=n(62861),i=n(38897),o=n(90316);t.clone=function(e){var t=e.dtype;"generic"!==t&&"array"!==t||(t="double");var n=o.malloc(e.size,t),a=r(n,e.shape);return i.assign(a,e),a},t.malloc=function(e,t){t||(t="double");for(var n=1,i=new Array(e.length),a=e.length-1;a>=0;--a)i[a]=n,n*=e[a];return r(o.malloc(n,t),e,i,0)},t.free=function(e){"generic"!==e.dtype&&"array"!==e.dtype&&o.free(e.data)},t.zeros=function(e,t){t||(t="double");for(var n=1,i=new Array(e.length),a=e.length-1;a>=0;--a)i[a]=n,n*=e[a];var s=o.malloc(n,t);for(a=0;a<n;++a)s[a]=0;return r(s,e,i,0)},t.ones=function(e,t){t||(t="double");for(var n=1,i=new Array(e.length),a=e.length-1;a>=0;--a)i[a]=n,n*=e[a];var s=o.malloc(n,t);for(a=0;a<n;++a)s[a]=1;return r(s,e,i,0)},t.eye=function(e,t){var n,i;t||(t="double");var a=1,s=new Array(e.length);for(n=e.length-1;n>=0;--n)s[n]=a,a*=e[n];var l=o.malloc(a,t);for(n=0;n<a;++n)l[n]=0;var c=1/0,u=0;for(n=e.length-1;n>=0;n--)u+=s[n],c=Math.min(c,e[n]);for(n=0,i=0;n<c;n++,i+=u)l[i]=1;return r(l,e,s,0)}},71903:e=>{"use strict";e.exports=function(e,t,n){if(t|=0,0===e.dimension||e.shape[0]<=t||t<0)return null;var r=!!n,i=m(e.order,r,e.dtype);return r?i(e,t,n):i(e,t)},e.exports.compile=m;var t="d",n="o",r="T",i="L",o="H",a="X";function s(e){return"s"+e}function l(e){return"t"+e}function c(e){return"u"+e}function u(e){return"v"+e}function h(e){return"i"+e}function f(e){return"p"+e}function p(e){return"x"+e}var d={};function m(e,m,g){var y=e.join()+m+g;return d[y]||(d[y]=function(e,d,m){var g=(e=function(e){var t=e.slice();return t.splice(e.indexOf(0),1),t.unshift(0),t}(e)).length,y="generic"===m,v="ndSelect"+m+e.join("_")+"_"+(d?"cmp":"lex"),b=[],_=["a","K"];d&&_.push("C");for(var x=["d=a.data","o=a.offset|0","R=Math.random",r],A=0;A<2;++A)x.push(p(A)+"=0");for(A=0;A<g;++A)x.push(s(A)+"=a.shape["+A+"]|0",l(A)+"=a.stride["+A+"]|0",h(A)+"=0");for(A=1;A<g;++A)A>1?x.push(u(A)+"=("+l(A)+"-"+s(A-1)+"*"+l(A-1)+")|0",c(e[A])+"=("+l(e[A])+"-"+s(e[A-1])+"*"+l(e[A-1])+")|0"):x.push(u(A)+"="+l(A),c(e[A])+"="+l(e[A]));if(d)for(A=0;A<2;++A)x.push(f(A)+"=a.pick(0)");function w(i,o){b.push(p(0),"=",n,"+",l(e[0]),"*(",i,");",p(1),"=",n,"+",l(e[0]),"*(",o,");");for(var a=g-1;a>0;--a)b.push("for(",h(e[a]),"=0;",h(e[a]),"<",s(e[a]),";",h(e[a]),"++){");for(y?b.push(r,"=",t,".get(",p(0),");",t,".set(",p(0),",",t,".get(",p(1),"));",t,".set(",p(1),",",r,");"):b.push(r,"=",t,"[",p(0),"];",t,"[",p(0),"]=",t,"[",p(1),"];",t,"[",p(1),"]=",r,";"),a=1;a<g;++a)b.push(p(0),"+=",c(e[a]),";",p(1),"+=",c(e[a]),"}")}x.push("X=0","L=0","H="+s(e[0])+"-1"),b.push("while(",i,"<",o,"){",a,"=(","R","()*(",o,"-",i,"+1)+",i,")|0;"),w(a,o),b.push(a,"=",i,";","for(",h(0),"=",i,";",h(0),"<",o,";",h(0),"++){"),function(r,i,o){if(d)b.push(f(0),".offset=",n,"+",l(e[0]),"*(",i,");",f(1),".offset=",n,"+",l(e[0]),"*(","H",");",r,"=","C","(",f(0),",",f(1),");");else{b.push(p(0),"=",n,"+",l(0),"*(",i,");",p(1),"=",n,"+",l(0),"*(","H",");"),g>1&&b.push("_cmp:");for(var a=g-1;a>0;--a)b.push("for(",h(a),"=0;",h(a),"<",s(a),";",h(a),"++){");for(y?b.push(r,"=",t,".get(",p(0),")-",t,".get(",p(1),");"):b.push(r,"=",t,"[",p(0),"]-",t,"[",p(1),"];"),g>1&&b.push("if(",r,")break _cmp;"),a=1;a<g;++a)b.push(p(0),"+=",u(a),";",p(1),"+=",u(a),"}")}}(r,h(0)),b.push("if(",r,"<0){"),w(a,h(0)),b.push(a,"++;"),b.push("}}"),w(a,o),b.push("if(",a,"===","K","){",i,"=",a,";","break;","}else if(","K","<",a,"){",o,"=",a,"-1;","}else{",i,"=",a,"+1;","}","}"),d?b.push(f(0),".offset=",n,"+",i,"*",l(0),";","return ",f(0),";"):b.push("return ","a",".pick(",i,");");var C=["'use strict';function ",v,"(",_,"){","var ",x.join(),";",b.join(""),"};return ",v].join("");return new Function(C)()}(e,m,g))}},62861:(e,t,n)=>{var r=n(16907),i=n(48738),o="undefined"!=typeof Float64Array;function a(e,t){return e[0]-t[0]}function s(){var e,t=this.stride,n=new Array(t.length);for(e=0;e<n.length;++e)n[e]=[Math.abs(t[e]),e];n.sort(a);var r=new Array(n.length);for(e=0;e<r.length;++e)r[e]=n[e][1];return r}function l(e,t){var n=["View",t,"d",e].join("");t<0&&(n="View_Nil"+e);var i="generic"===e;if(-1===t){var o="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}";return new Function(o)()}if(0===t)return o="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(i?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(i?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}",new Function("TrivialArray",o)(c[e][0]);o=["'use strict'"];var a=r(t),l=a.map((function(e){return"i"+e})),u="this.offset+"+a.map((function(e){return"this.stride["+e+"]*i"+e})).join("+"),h=a.map((function(e){return"b"+e})).join(","),f=a.map((function(e){return"c"+e})).join(",");o.push("function "+n+"(a,"+h+","+f+",d){this.data=a","this.shape=["+h+"]","this.stride=["+f+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),o.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+a.map((function(e){return"this.shape["+e+"]"})).join("*"),"}})"),1===t?o.push("proto.order=[0]"):(o.push("Object.defineProperty(proto,'order',{get:"),t<4?(o.push("function "+n+"_order(){"),2===t?o.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&o.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):o.push("ORDER})")),o.push("proto.set=function "+n+"_set("+l.join(",")+",v){"),i?o.push("return this.data.set("+u+",v)}"):o.push("return this.data["+u+"]=v}"),o.push("proto.get=function "+n+"_get("+l.join(",")+"){"),i?o.push("return this.data.get("+u+")}"):o.push("return this.data["+u+"]}"),o.push("proto.index=function "+n+"_index(",l.join(),"){return "+u+"}"),o.push("proto.hi=function "+n+"_hi("+l.join(",")+"){return new "+n+"(this.data,"+a.map((function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")})).join(",")+","+a.map((function(e){return"this.stride["+e+"]"})).join(",")+",this.offset)}");var p=a.map((function(e){return"a"+e+"=this.shape["+e+"]"})),d=a.map((function(e){return"c"+e+"=this.stride["+e+"]"}));o.push("proto.lo=function "+n+"_lo("+l.join(",")+"){var b=this.offset,d=0,"+p.join(",")+","+d.join(","));for(var m=0;m<t;++m)o.push("if(typeof i"+m+"==='number'&&i"+m+">=0){d=i"+m+"|0;b+=c"+m+"*d;a"+m+"-=d}");for(o.push("return new "+n+"(this.data,"+a.map((function(e){return"a"+e})).join(",")+","+a.map((function(e){return"c"+e})).join(",")+",b)}"),o.push("proto.step=function "+n+"_step("+l.join(",")+"){var "+a.map((function(e){return"a"+e+"=this.shape["+e+"]"})).join(",")+","+a.map((function(e){return"b"+e+"=this.stride["+e+"]"})).join(",")+",c=this.offset,d=0,ceil=Math.ceil"),m=0;m<t;++m)o.push("if(typeof i"+m+"==='number'){d=i"+m+"|0;if(d<0){c+=b"+m+"*(a"+m+"-1);a"+m+"=ceil(-a"+m+"/d)}else{a"+m+"=ceil(a"+m+"/d)}b"+m+"*=d}");o.push("return new "+n+"(this.data,"+a.map((function(e){return"a"+e})).join(",")+","+a.map((function(e){return"b"+e})).join(",")+",c)}");var g=new Array(t),y=new Array(t);for(m=0;m<t;++m)g[m]="a[i"+m+"]",y[m]="b[i"+m+"]";for(o.push("proto.transpose=function "+n+"_transpose("+l+"){"+l.map((function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"})).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+g.join(",")+","+y.join(",")+",this.offset)}"),o.push("proto.pick=function "+n+"_pick("+l+"){var a=[],b=[],c=this.offset"),m=0;m<t;++m)o.push("if(typeof i"+m+"==='number'&&i"+m+">=0){c=(c+this.stride["+m+"]*i"+m+")|0}else{a.push(this.shape["+m+"]);b.push(this.stride["+m+"])}");return o.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),o.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+a.map((function(e){return"shape["+e+"]"})).join(",")+","+a.map((function(e){return"stride["+e+"]"})).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",o.join("\n"))(c[e],s)}var c={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};e.exports=function(e,t,n,r){if(void 0===e)return(0,c.array[0])([]);"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var a=t.length;if(void 0===n){n=new Array(a);for(var s=a-1,u=1;s>=0;--s)n[s]=u,u*=t[s]}if(void 0===r)for(r=0,s=0;s<a;++s)n[s]<0&&(r-=(t[s]-1)*n[s]);for(var h=function(e){if(i(e))return"buffer";if(o)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(e)?"array":"generic"}(e),f=c[h];f.length<=a+1;)f.push(l(h,f.length-1));return(0,f[a+1])(e,t,n,r)}},27418:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var a,s,l=i(e),c=1;c<arguments.length;c++){for(var u in a=Object(arguments[c]))n.call(a,u)&&(l[u]=a[u]);if(t){s=t(a);for(var h=0;h<s.length;h++)r.call(a,s[h])&&(l[s[h]]=a[s[h]])}}return l}},31528:function(e,t){var n,r,i;!function(o,a){"use strict";"object"==typeof e.exports?e.exports=a():(r=[],void 0===(i="function"==typeof(n=a)?n.apply(t,r):n)||(e.exports=i))}(0,(function(){"use strict";var e=Object.prototype.toString;function t(e,t){return null!=e&&Object.prototype.hasOwnProperty.call(e,t)}function n(e){if(!e)return!0;if(i(e)&&0===e.length)return!0;if("string"!=typeof e){for(var n in e)if(t(e,n))return!1;return!0}return!1}function r(t){return e.call(t)}var i=Array.isArray||function(t){return"[object Array]"===e.call(t)};function o(e){var t=parseInt(e);return t.toString()===e?t:e}function a(e){var a,s,l=function(e){return Object.keys(l).reduce((function(t,n){return"create"===n||"function"==typeof l[n]&&(t[n]=l[n].bind(l,e)),t}),{})};function c(e,t){if(a(e,t))return e[t]}function u(e,t,n,r){if("number"==typeof t&&(t=[t]),!t||0===t.length)return e;if("string"==typeof t)return u(e,t.split(".").map(o),n,r);var i=t[0],a=s(e,i);return 1===t.length?(void 0!==a&&r||(e[i]=n),a):(void 0===a&&("number"==typeof t[1]?e[i]=[]:e[i]={}),u(e[i],t.slice(1),n,r))}return a=(e=e||{}).includeInheritedProps?function(){return!0}:function(e,n){return"number"==typeof n&&Array.isArray(e)||t(e,n)},s=e.includeInheritedProps?function(e,t){"string"!=typeof t&&"number"!=typeof t&&(t=String(t));var n=c(e,t);if("__proto__"===t||"prototype"===t||"constructor"===t&&"function"==typeof n)throw new Error("For security reasons, object's magic properties cannot be set");return n}:function(e,t){return c(e,t)},l.has=function(n,r){if("number"==typeof r?r=[r]:"string"==typeof r&&(r=r.split(".")),!r||0===r.length)return!!n;for(var a=0;a<r.length;a++){var s=o(r[a]);if(!("number"==typeof s&&i(n)&&s<n.length||(e.includeInheritedProps?s in Object(n):t(n,s))))return!1;n=n[s]}return!0},l.ensureExists=function(e,t,n){return u(e,t,n,!0)},l.set=function(e,t,n,r){return u(e,t,n,r)},l.insert=function(e,t,n,r){var o=l.get(e,t);r=~~r,i(o)||(o=[],l.set(e,t,o)),o.splice(r,0,n)},l.empty=function(e,t){var o,s;if(!n(t)&&null!=e&&(o=l.get(e,t))){if("string"==typeof o)return l.set(e,t,"");if(function(e){return"boolean"==typeof e||"[object Boolean]"===r(e)}(o))return l.set(e,t,!1);if("number"==typeof o)return l.set(e,t,0);if(i(o))o.length=0;else{if(!function(e){return"object"==typeof e&&"[object Object]"===r(e)}(o))return l.set(e,t,null);for(s in o)a(o,s)&&delete o[s]}}},l.push=function(e,t){var n=l.get(e,t);i(n)||(n=[],l.set(e,t,n)),n.push.apply(n,Array.prototype.slice.call(arguments,2))},l.coalesce=function(e,t,n){for(var r,i=0,o=t.length;i<o;i++)if(void 0!==(r=l.get(e,t[i])))return r;return n},l.get=function(e,t,n){if("number"==typeof t&&(t=[t]),!t||0===t.length)return e;if(null==e)return n;if("string"==typeof t)return l.get(e,t.split("."),n);var r=o(t[0]),i=s(e,r);return void 0===i?n:1===t.length?i:l.get(e[r],t.slice(1),n)},l.del=function(e,t){if("number"==typeof t&&(t=[t]),null==e)return e;if(n(t))return e;if("string"==typeof t)return l.del(e,t.split("."));var r=o(t[0]);return s(e,r),a(e,r)?1!==t.length?l.del(e[r],t.slice(1)):(i(e)?e.splice(r,1):delete e[r],e):e},l}var s=a();return s.create=a,s.withInheritedProps=a({includeInheritedProps:!0}),s}))},81830:(e,t)=>{t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},64187:e=>{var t=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var r,i,o=e,a=e.indexOf("["),s=e.indexOf("]");-1!=a&&-1!=s&&(e=e.substring(0,a)+e.substring(a,s).replace(/:/g,";")+e.substring(s,e.length));for(var l,c,u=t.exec(e||""),h={},f=14;f--;)h[n[f]]=u[f]||"";return-1!=a&&-1!=s&&(h.source=o,h.host=h.host.substring(1,h.host.length-1).replace(/;/g,":"),h.authority=h.authority.replace("[","").replace("]","").replace(/;/g,":"),h.ipv6uri=!0),h.pathNames=(r=h.path,i=r.replace(/\/{2,9}/g,"/").split("/"),"/"!=r.substr(0,1)&&0!==r.length||i.splice(0,1),"/"==r.substr(r.length-1,1)&&i.splice(i.length-1,1),i),h.queryKey=(l=h.query,c={},l.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,n){t&&(c[t]=n)})),c),h}},75:function(e){(function(){var t,n,r,i,o,a;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(e.exports=function(){return(t()-o)/1e6},n=process.hrtime,i=(t=function(){var e;return 1e9*(e=n())[0]+e[1]})(),a=1e9*process.uptime(),o=i-a):Date.now?(e.exports=function(){return Date.now()-r},r=Date.now()):(e.exports=function(){return(new Date).getTime()-r},r=(new Date).getTime())}).call(this)},4061:(e,t,n)=>{"use strict";var r=n(43842);function i(e,t,n){var i,s,l,c;t=t||1;for(var u=0;u<e[0].length;u++){var h=e[0][u];(!u||h[0]<i)&&(i=h[0]),(!u||h[1]<s)&&(s=h[1]),(!u||h[0]>l)&&(l=h[0]),(!u||h[1]>c)&&(c=h[1])}var f=l-i,p=c-s,d=Math.min(f,p),m=d/2;if(0===d){var g=[i,s];return g.distance=0,g}for(var y=new r(void 0,o),v=i;v<l;v+=d)for(var b=s;b<c;b+=d)y.push(new a(v+m,b+m,m,e));var _=function(e){for(var t=0,n=0,r=0,i=e[0],o=0,s=i.length,l=s-1;o<s;l=o++){var c=i[o],u=i[l],h=c[0]*u[1]-u[0]*c[1];n+=(c[0]+u[0])*h,r+=(c[1]+u[1])*h,t+=3*h}return 0===t?new a(i[0][0],i[0][1],0,e):new a(n/t,r/t,0,e)}(e),x=new a(i+f/2,s+p/2,0,e);x.d>_.d&&(_=x);for(var A=y.length;y.length;){var w=y.pop();w.d>_.d&&(_=w,n&&console.log("found best %d after %d probes",Math.round(1e4*w.d)/1e4,A)),w.max-_.d<=t||(m=w.h/2,y.push(new a(w.x-m,w.y-m,m,e)),y.push(new a(w.x+m,w.y-m,m,e)),y.push(new a(w.x-m,w.y+m,m,e)),y.push(new a(w.x+m,w.y+m,m,e)),A+=4)}n&&(console.log("num probes: "+A),console.log("best distance: "+_.d));var C=[_.x,_.y];return C.distance=_.d,C}function o(e,t){return t.max-e.max}function a(e,t,n,r){this.x=e,this.y=t,this.h=n,this.d=function(e,t,n){for(var r=!1,i=1/0,o=0;o<n.length;o++)for(var a=n[o],l=0,c=a.length,u=c-1;l<c;u=l++){var h=a[l],f=a[u];h[1]>t!=f[1]>t&&e<(f[0]-h[0])*(t-h[1])/(f[1]-h[1])+h[0]&&(r=!r),i=Math.min(i,s(e,t,h,f))}return 0===i?0:(r?1:-1)*Math.sqrt(i)}(e,t,r),this.max=this.d+this.h*Math.SQRT2}function s(e,t,n,r){var i=n[0],o=n[1],a=r[0]-i,s=r[1]-o;if(0!==a||0!==s){var l=((e-i)*a+(t-o)*s)/(a*a+s*s);l>1?(i=r[0],o=r[1]):l>0&&(i+=a*l,o+=s*l)}return(a=e-i)*a+(s=t-o)*s}r.default&&(r=r.default),e.exports=i,e.exports.default=i},92703:(e,t,n)=>{"use strict";var r=n(50414);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},45697:(e,t,n)=>{e.exports=n(92703)()},50414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},54087:(e,t,n)=>{for(var r=n(75),i="undefined"==typeof window?n.g:window,o=["moz","webkit"],a="AnimationFrame",s=i["request"+a],l=i["cancel"+a]||i["cancelRequest"+a],c=0;!s&&c<o.length;c++)s=i[o[c]+"Request"+a],l=i[o[c]+"Cancel"+a]||i[o[c]+"CancelRequest"+a];if(!s||!l){var u=0,h=0,f=[];s=function(e){if(0===f.length){var t=r(),n=Math.max(0,16.666666666666668-(t-u));u=n+t,setTimeout((function(){var e=f.slice(0);f.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(u)}catch(e){setTimeout((function(){throw e}),0)}}),Math.round(n))}return f.push({handle:++h,callback:e,cancelled:!1}),h},l=function(e){for(var t=0;t<f.length;t++)f[t].handle===e&&(f[t].cancelled=!0)}}e.exports=function(e){return s.call(i,e)},e.exports.cancel=function(){l.apply(i,arguments)},e.exports.polyfill=function(e){e||(e=i),e.requestAnimationFrame=s,e.cancelAnimationFrame=l}},97596:(e,t,n)=>{"use strict";var r=n(95318);t.Z=function(e,t,n,r){var o=i.default.unstable_batchedUpdates?function(e){i.default.unstable_batchedUpdates(n,e)}:n;return e.addEventListener&&e.addEventListener(t,o,r),{remove:function(){e.removeEventListener&&e.removeEventListener(t,o)}}};var i=r(n(73935))},1775:e=>{"use strict";var t=Object.prototype.hasOwnProperty;function n(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function r(e,r){if(n(e,r))return!0;if("object"!=typeof e||null===e||"object"!=typeof r||null===r)return!1;var i=Object.keys(e),o=Object.keys(r);if(i.length!==o.length)return!1;for(var a=0;a<i.length;a++)if(!t.call(r,i[a])||!n(e[i[a]],r[i[a]]))return!1;return!0}e.exports=function(e,t,n){return!r(e.props,t)||!r(e.state,n)}},64448:(e,t,n)=>{"use strict";var r=n(67294),i=n(27418),o=n(63840);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));function s(e,t,n,r,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var l=!1,c=null,u=!1,h=null,f={onError:function(e){l=!0,c=e}};function p(e,t,n,r,i,o,a,u,h){l=!1,c=null,s.apply(f,arguments)}var d=null,m=null,g=null;function y(e,t,n){var r=e.type||"unknown-event";e.currentTarget=g(n),function(e,t,n,r,i,o,s,f,d){if(p.apply(this,arguments),l){if(!l)throw Error(a(198));var m=c;l=!1,c=null,u||(u=!0,h=m)}}(r,t,void 0,e),e.currentTarget=null}var v=null,b={};function _(){if(v)for(var e in b){var t=b[e],n=v.indexOf(e);if(!(-1<n))throw Error(a(96,e));if(!A[n]){if(!t.extractEvents)throw Error(a(97,e));for(var r in A[n]=t,n=t.eventTypes){var i=void 0,o=n[r],s=t,l=r;if(w.hasOwnProperty(l))throw Error(a(99,l));w[l]=o;var c=o.phasedRegistrationNames;if(c){for(i in c)c.hasOwnProperty(i)&&x(c[i],s,l);i=!0}else o.registrationName?(x(o.registrationName,s,l),i=!0):i=!1;if(!i)throw Error(a(98,r,e))}}}}function x(e,t,n){if(C[e])throw Error(a(100,e));C[e]=t,E[e]=t.eventTypes[n].dependencies}var A=[],w={},C={},E={};function S(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!b.hasOwnProperty(t)||b[t]!==r){if(b[t])throw Error(a(102,t));b[t]=r,n=!0}}n&&_()}var T=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),B=null,k=null,M=null;function P(e){if(e=m(e)){if("function"!=typeof B)throw Error(a(280));var t=e.stateNode;t&&(t=d(t),B(e.stateNode,e.type,t))}}function I(e){k?M?M.push(e):M=[e]:k=e}function O(){if(k){var e=k,t=M;if(M=k=null,P(e),t)for(e=0;e<t.length;e++)P(t[e])}}function D(e,t){return e(t)}function z(e,t,n,r,i){return e(t,n,r,i)}function L(){}var R=D,F=!1,U=!1;function N(){null===k&&null===M||(L(),O())}function j(e,t,n){if(U)return e(t,n);U=!0;try{return R(e,t,n)}finally{U=!1,N()}}var V=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,G=Object.prototype.hasOwnProperty,q={},W={};function H(e,t,n,r,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o}var $={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){$[e]=new H(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];$[t]=new H(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){$[e]=new H(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){$[e]=new H(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){$[e]=new H(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){$[e]=new H(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){$[e]=new H(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){$[e]=new H(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){$[e]=new H(e,5,!1,e.toLowerCase(),null,!1)}));var X=/[\-:]([a-z])/g;function Z(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(X,Z);$[t]=new H(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(X,Z);$[t]=new H(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(X,Z);$[t]=new H(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){$[e]=new H(e,1,!1,e.toLowerCase(),null,!1)})),$.xlinkHref=new H("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){$[e]=new H(e,1,!1,e.toLowerCase(),null,!0)}));var Y=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function K(e,t,n,r){var i=$.hasOwnProperty(t)?$[t]:null;(null!==i?0===i.type:!r&&2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1]))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!G.call(W,e)||!G.call(q,e)&&(V.test(e)?W[e]=!0:(q[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}Y.hasOwnProperty("ReactCurrentDispatcher")||(Y.ReactCurrentDispatcher={current:null}),Y.hasOwnProperty("ReactCurrentBatchConfig")||(Y.ReactCurrentBatchConfig={suspense:null});var J=/^(.*)[\\\/]/,Q="function"==typeof Symbol&&Symbol.for,ee=Q?Symbol.for("react.element"):60103,te=Q?Symbol.for("react.portal"):60106,ne=Q?Symbol.for("react.fragment"):60107,re=Q?Symbol.for("react.strict_mode"):60108,ie=Q?Symbol.for("react.profiler"):60114,oe=Q?Symbol.for("react.provider"):60109,ae=Q?Symbol.for("react.context"):60110,se=Q?Symbol.for("react.concurrent_mode"):60111,le=Q?Symbol.for("react.forward_ref"):60112,ce=Q?Symbol.for("react.suspense"):60113,ue=Q?Symbol.for("react.suspense_list"):60120,he=Q?Symbol.for("react.memo"):60115,fe=Q?Symbol.for("react.lazy"):60116,pe=Q?Symbol.for("react.block"):60121,de="function"==typeof Symbol&&Symbol.iterator;function me(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=de&&e[de]||e["@@iterator"])?e:null}function ge(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case ne:return"Fragment";case te:return"Portal";case ie:return"Profiler";case re:return"StrictMode";case ce:return"Suspense";case ue:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case ae:return"Context.Consumer";case oe:return"Context.Provider";case le:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case he:return ge(e.type);case pe:return ge(e.render);case fe:if(e=1===e._status?e._result:null)return ge(e)}return null}function ye(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,o=ge(e.type);n=null,r&&(n=ge(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(J,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}t+=n,e=e.return}while(e);return t}function ve(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function be(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function _e(e){e._valueTracker||(e._valueTracker=function(e){var t=be(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function xe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=be(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Ae(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function we(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=ve(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Ce(e,t){null!=(t=t.checked)&&K(e,"checked",t,!1)}function Ee(e,t){Ce(e,t);var n=ve(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Te(e,t.type,n):t.hasOwnProperty("defaultValue")&&Te(e,t.type,ve(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Se(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Te(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Be(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function ke(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ve(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Me(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Pe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:ve(n)}}function Ie(e,t){var n=ve(t.value),r=ve(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function De(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ze(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?De(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Le,Re,Fe=(Re=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((Le=Le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return Re(e,t)}))}:Re);function Ue(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function Ne(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var je={animationend:Ne("Animation","AnimationEnd"),animationiteration:Ne("Animation","AnimationIteration"),animationstart:Ne("Animation","AnimationStart"),transitionend:Ne("Transition","TransitionEnd")},Ve={},Ge={};function qe(e){if(Ve[e])return Ve[e];if(!je[e])return e;var t,n=je[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ge)return Ve[e]=n[t];return e}T&&(Ge=document.createElement("div").style,"AnimationEvent"in window||(delete je.animationend.animation,delete je.animationiteration.animation,delete je.animationstart.animation),"TransitionEvent"in window||delete je.transitionend.transition);var We=qe("animationend"),He=qe("animationiteration"),$e=qe("animationstart"),Xe=qe("transitionend"),Ze="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ye=new("function"==typeof WeakMap?WeakMap:Map);function Ke(e){var t=Ye.get(e);return void 0===t&&(t=new Map,Ye.set(e,t)),t}function Je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function et(e){if(Je(e)!==e)throw Error(a(188))}function tt(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Je(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return et(i),e;if(o===r)return et(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function nt(e,t){if(null==t)throw Error(a(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function rt(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var it=null;function ot(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)y(e,t[r],n[r]);else t&&y(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function at(e){if(null!==e&&(it=nt(it,e)),e=it,it=null,e){if(rt(e,ot),it)throw Error(a(95));if(u)throw e=h,u=!1,h=null,e}}function st(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function lt(e){if(!T)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}var ct=[];function ut(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>ct.length&&ct.push(e)}function ht(e,t,n,r){if(ct.length){var i=ct.pop();return i.topLevelType=e,i.eventSystemFlags=r,i.nativeEvent=t,i.targetInst=n,i}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}function ft(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=kn(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=st(e.nativeEvent);r=e.topLevelType;var o=e.nativeEvent,a=e.eventSystemFlags;0===n&&(a|=64);for(var s=null,l=0;l<A.length;l++){var c=A[l];c&&(c=c.extractEvents(r,t,o,i,a))&&(s=nt(s,c))}at(s)}}function pt(e,t,n){if(!n.has(e)){switch(e){case"scroll":$t(t,"scroll",!0);break;case"focus":case"blur":$t(t,"focus",!0),$t(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":lt(e)&&$t(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Ze.indexOf(e)&&Ht(e,t)}n.set(e,null)}}var dt,mt,gt,yt=!1,vt=[],bt=null,_t=null,xt=null,At=new Map,wt=new Map,Ct=[],Et="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),St="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Tt(e,t,n,r,i){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:i,container:r}}function Bt(e,t){switch(e){case"focus":case"blur":bt=null;break;case"dragenter":case"dragleave":_t=null;break;case"mouseover":case"mouseout":xt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":wt.delete(t.pointerId)}}function kt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=Tt(t,n,r,i,o),null!==t&&null!==(t=Mn(t))&&mt(t),e):(e.eventSystemFlags|=r,e)}function Mt(e){var t=kn(e.target);if(null!==t){var n=Je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Qe(n)))return e.blockedOn=t,void o.unstable_runWithPriority(e.priority,(function(){gt(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Pt(e){if(null!==e.blockedOn)return!1;var t=Kt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=Mn(t);return null!==n&&mt(n),e.blockedOn=t,!1}return!0}function It(e,t,n){Pt(e)&&n.delete(t)}function Ot(){for(yt=!1;0<vt.length;){var e=vt[0];if(null!==e.blockedOn){null!==(e=Mn(e.blockedOn))&&dt(e);break}var t=Kt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:vt.shift()}null!==bt&&Pt(bt)&&(bt=null),null!==_t&&Pt(_t)&&(_t=null),null!==xt&&Pt(xt)&&(xt=null),At.forEach(It),wt.forEach(It)}function Dt(e,t){e.blockedOn===t&&(e.blockedOn=null,yt||(yt=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Ot)))}function zt(e){function t(t){return Dt(t,e)}if(0<vt.length){Dt(vt[0],e);for(var n=1;n<vt.length;n++){var r=vt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==bt&&Dt(bt,e),null!==_t&&Dt(_t,e),null!==xt&&Dt(xt,e),At.forEach(t),wt.forEach(t),n=0;n<Ct.length;n++)(r=Ct[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ct.length&&null===(n=Ct[0]).blockedOn;)Mt(n),null===n.blockedOn&&Ct.shift()}var Lt={},Rt=new Map,Ft=new Map,Ut=["abort","abort",We,"animationEnd",He,"animationIteration",$e,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Xe,"transitionEnd","waiting","waiting"];function Nt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1],o="on"+(i[0].toUpperCase()+i.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[r],eventPriority:t},Ft.set(r,t),Rt.set(r,o),Lt[i]=o}}Nt("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Nt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Nt(Ut,2);for(var jt="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Vt=0;Vt<jt.length;Vt++)Ft.set(jt[Vt],0);var Gt=o.unstable_UserBlockingPriority,qt=o.unstable_runWithPriority,Wt=!0;function Ht(e,t){$t(t,e,!1)}function $t(e,t,n){var r=Ft.get(t);switch(void 0===r?2:r){case 0:r=Xt.bind(null,t,1,e);break;case 1:r=Zt.bind(null,t,1,e);break;default:r=Yt.bind(null,t,1,e)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Xt(e,t,n,r){F||L();var i=Yt,o=F;F=!0;try{z(i,e,t,n,r)}finally{(F=o)||N()}}function Zt(e,t,n,r){qt(Gt,Yt.bind(null,e,t,n,r))}function Yt(e,t,n,r){if(Wt)if(0<vt.length&&-1<Et.indexOf(e))e=Tt(null,e,t,n,r),vt.push(e);else{var i=Kt(e,t,n,r);if(null===i)Bt(e,r);else if(-1<Et.indexOf(e))e=Tt(i,e,t,n,r),vt.push(e);else if(!function(e,t,n,r,i){switch(t){case"focus":return bt=kt(bt,e,t,n,r,i),!0;case"dragenter":return _t=kt(_t,e,t,n,r,i),!0;case"mouseover":return xt=kt(xt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return At.set(o,kt(At.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,wt.set(o,kt(wt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r)){Bt(e,r),e=ht(e,r,null,t);try{j(ft,e)}finally{ut(e)}}}}function Kt(e,t,n,r){if(null!==(n=kn(n=st(r)))){var i=Je(n);if(null===i)n=null;else{var o=i.tag;if(13===o){if(null!==(n=Qe(i)))return n;n=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}e=ht(e,r,n,t);try{j(ft,e)}finally{ut(e)}return null}var Jt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qt=["Webkit","ms","Moz","O"];function en(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||Jt.hasOwnProperty(e)&&Jt[e]?(""+t).trim():t+"px"}function tn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=en(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(Jt).forEach((function(e){Qt.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Jt[t]=Jt[e]}))}));var nn=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rn(e,t){if(t){if(nn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(a(62,""))}}function on(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var an="http://www.w3.org/1999/xhtml";function sn(e,t){var n=Ke(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=E[t];for(var r=0;r<t.length;r++)pt(t[r],e,n)}function ln(){}function cn(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function un(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hn(e,t){var n,r=un(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=un(r)}}function fn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pn(){for(var e=window,t=cn();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=cn((e=t.contentWindow).document)}return t}function dn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var mn="$?",gn="$!",yn=null,vn=null;function bn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function _n(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var xn="function"==typeof setTimeout?setTimeout:void 0,An="function"==typeof clearTimeout?clearTimeout:void 0;function wn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Cn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||n===gn||n===mn){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var En=Math.random().toString(36).slice(2),Sn="__reactInternalInstance$"+En,Tn="__reactEventHandlers$"+En,Bn="__reactContainere$"+En;function kn(e){var t=e[Sn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Bn]||n[Sn]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Cn(e);null!==e;){if(n=e[Sn])return n;e=Cn(e)}return t}n=(e=n).parentNode}return null}function Mn(e){return!(e=e[Sn]||e[Bn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Pn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function In(e){return e[Tn]||null}function On(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Dn(e,t){var n=e.stateNode;if(!n)return null;var r=d(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(a(231,t,typeof n));return n}function zn(e,t,n){(t=Dn(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=nt(n._dispatchListeners,t),n._dispatchInstances=nt(n._dispatchInstances,e))}function Ln(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=On(t);for(t=n.length;0<t--;)zn(n[t],"captured",e);for(t=0;t<n.length;t++)zn(n[t],"bubbled",e)}}function Rn(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=Dn(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=nt(n._dispatchListeners,t),n._dispatchInstances=nt(n._dispatchInstances,e))}function Fn(e){e&&e.dispatchConfig.registrationName&&Rn(e._targetInst,null,e)}function Un(e){rt(e,Ln)}var Nn=null,jn=null,Vn=null;function Gn(){if(Vn)return Vn;var e,t,n=jn,r=n.length,i="value"in Nn?Nn.value:Nn.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Vn=i.slice(e,1<t?1-t:void 0)}function qn(){return!0}function Wn(){return!1}function Hn(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?qn:Wn,this.isPropagationStopped=Wn,this}function $n(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function Xn(e){if(!(e instanceof this))throw Error(a(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Zn(e){e.eventPool=[],e.getPooled=$n,e.release=Xn}i(Hn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=qn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=qn)},persist:function(){this.isPersistent=qn},isPersistent:Wn,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Wn,this._dispatchInstances=this._dispatchListeners=null}}),Hn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Hn.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var o=new t;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,Zn(n),n},Zn(Hn);var Yn=Hn.extend({data:null}),Kn=Hn.extend({data:null}),Jn=[9,13,27,32],Qn=T&&"CompositionEvent"in window,er=null;T&&"documentMode"in document&&(er=document.documentMode);var tr=T&&"TextEvent"in window&&!er,nr=T&&(!Qn||er&&8<er&&11>=er),rr=String.fromCharCode(32),ir={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},or=!1;function ar(e,t){switch(e){case"keyup":return-1!==Jn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function sr(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var lr=!1,cr={eventTypes:ir,extractEvents:function(e,t,n,r){var i;if(Qn)e:{switch(e){case"compositionstart":var o=ir.compositionStart;break e;case"compositionend":o=ir.compositionEnd;break e;case"compositionupdate":o=ir.compositionUpdate;break e}o=void 0}else lr?ar(e,n)&&(o=ir.compositionEnd):"keydown"===e&&229===n.keyCode&&(o=ir.compositionStart);return o?(nr&&"ko"!==n.locale&&(lr||o!==ir.compositionStart?o===ir.compositionEnd&&lr&&(i=Gn()):(jn="value"in(Nn=r)?Nn.value:Nn.textContent,lr=!0)),o=Yn.getPooled(o,t,n,r),(i||null!==(i=sr(n)))&&(o.data=i),Un(o),i=o):i=null,(e=tr?function(e,t){switch(e){case"compositionend":return sr(t);case"keypress":return 32!==t.which?null:(or=!0,rr);case"textInput":return(e=t.data)===rr&&or?null:e;default:return null}}(e,n):function(e,t){if(lr)return"compositionend"===e||!Qn&&ar(e,t)?(e=Gn(),Vn=jn=Nn=null,lr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return nr&&"ko"!==t.locale?null:t.data}}(e,n))?((t=Kn.getPooled(ir.beforeInput,t,n,r)).data=e,Un(t)):t=null,null===i?t:null===t?i:[i,t]}},ur={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!ur[e.type]:"textarea"===t}var fr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function pr(e,t,n){return(e=Hn.getPooled(fr.change,e,t,n)).type="change",I(n),Un(e),e}var dr=null,mr=null;function gr(e){at(e)}function yr(e){if(xe(Pn(e)))return e}function vr(e,t){if("change"===e)return t}var br=!1;function _r(){dr&&(dr.detachEvent("onpropertychange",xr),mr=dr=null)}function xr(e){if("value"===e.propertyName&&yr(mr))if(e=pr(mr,e,st(e)),F)at(e);else{F=!0;try{D(gr,e)}finally{F=!1,N()}}}function Ar(e,t,n){"focus"===e?(_r(),mr=n,(dr=t).attachEvent("onpropertychange",xr)):"blur"===e&&_r()}function wr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return yr(mr)}function Cr(e,t){if("click"===e)return yr(t)}function Er(e,t){if("input"===e||"change"===e)return yr(t)}T&&(br=lt("input")&&(!document.documentMode||9<document.documentMode));var Sr={eventTypes:fr,_isInputEventSupported:br,extractEvents:function(e,t,n,r){var i=t?Pn(t):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var a=vr;else if(hr(i))if(br)a=Er;else{a=wr;var s=Ar}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(a=Cr);if(a&&(a=a(e,t)))return pr(a,n,r);s&&s(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&Te(i,"number",i.value)}},Tr=Hn.extend({view:null,detail:null}),Br={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Br[e])&&!!t[e]}function Mr(){return kr}var Pr=0,Ir=0,Or=!1,Dr=!1,zr=Tr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Mr,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Pr;return Pr=e.screenX,Or?"mousemove"===e.type?e.screenX-t:0:(Or=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Ir;return Ir=e.screenY,Dr?"mousemove"===e.type?e.screenY-t:0:(Dr=!0,0)}}),Lr=zr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Rr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Fr={eventTypes:Rr,extractEvents:function(e,t,n,r,i){var o="mouseover"===e||"pointerover"===e,a="mouseout"===e||"pointerout"===e;if(o&&0==(32&i)&&(n.relatedTarget||n.fromElement)||!a&&!o)return null;if(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,a?(a=t,null!==(t=(t=n.relatedTarget||n.toElement)?kn(t):null)&&(t!==Je(t)||5!==t.tag&&6!==t.tag)&&(t=null)):a=null,a===t)return null;if("mouseout"===e||"mouseover"===e)var s=zr,l=Rr.mouseLeave,c=Rr.mouseEnter,u="mouse";else"pointerout"!==e&&"pointerover"!==e||(s=Lr,l=Rr.pointerLeave,c=Rr.pointerEnter,u="pointer");if(e=null==a?o:Pn(a),o=null==t?o:Pn(t),(l=s.getPooled(l,a,n,r)).type=u+"leave",l.target=e,l.relatedTarget=o,(n=s.getPooled(c,t,n,r)).type=u+"enter",n.target=o,n.relatedTarget=e,u=t,(r=a)&&u)e:{for(c=u,a=0,e=s=r;e;e=On(e))a++;for(e=0,t=c;t;t=On(t))e++;for(;0<a-e;)s=On(s),a--;for(;0<e-a;)c=On(c),e--;for(;a--;){if(s===c||s===c.alternate)break e;s=On(s),c=On(c)}s=null}else s=null;for(c=s,s=[];r&&r!==c&&(null===(a=r.alternate)||a!==c);)s.push(r),r=On(r);for(r=[];u&&u!==c&&(null===(a=u.alternate)||a!==c);)r.push(u),u=On(u);for(u=0;u<s.length;u++)Rn(s[u],"bubbled",l);for(u=r.length;0<u--;)Rn(r[u],"captured",n);return 0==(64&i)?[l]:[l,n]}},Ur="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Nr=Object.prototype.hasOwnProperty;function jr(e,t){if(Ur(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Nr.call(t,n[r])||!Ur(e[n[r]],t[n[r]]))return!1;return!0}var Vr=T&&"documentMode"in document&&11>=document.documentMode,Gr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},qr=null,Wr=null,Hr=null,$r=!1;function Xr(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return $r||null==qr||qr!==cn(n)?null:(n="selectionStart"in(n=qr)&&dn(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Hr&&jr(Hr,n)?null:(Hr=n,(e=Hn.getPooled(Gr.select,Wr,e,t)).type="select",e.target=qr,Un(e),e))}var Zr={eventTypes:Gr,extractEvents:function(e,t,n,r,i,o){if(!(o=!(i=o||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){e:{i=Ke(i),o=E.onSelect;for(var a=0;a<o.length;a++)if(!i.has(o[a])){i=!1;break e}i=!0}o=!i}if(o)return null;switch(i=t?Pn(t):window,e){case"focus":(hr(i)||"true"===i.contentEditable)&&(qr=i,Wr=t,Hr=null);break;case"blur":Hr=Wr=qr=null;break;case"mousedown":$r=!0;break;case"contextmenu":case"mouseup":case"dragend":return $r=!1,Xr(n,r);case"selectionchange":if(Vr)break;case"keydown":case"keyup":return Xr(n,r)}return null}},Yr=Hn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Kr=Hn.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jr=Tr.extend({relatedTarget:null});function Qr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var ei={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ti={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ni=Tr.extend({key:function(e){if(e.key){var t=ei[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Qr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?ti[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Mr,charCode:function(e){return"keypress"===e.type?Qr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Qr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),ri=zr.extend({dataTransfer:null}),ii=Tr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Mr}),oi=Hn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ai=zr.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),si={eventTypes:Lt,extractEvents:function(e,t,n,r){var i=Rt.get(e);if(!i)return null;switch(e){case"keypress":if(0===Qr(n))return null;case"keydown":case"keyup":e=ni;break;case"blur":case"focus":e=Jr;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=zr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=ri;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=ii;break;case We:case He:case $e:e=Yr;break;case Xe:e=oi;break;case"scroll":e=Tr;break;case"wheel":e=ai;break;case"copy":case"cut":case"paste":e=Kr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Lr;break;default:e=Hn}return Un(t=e.getPooled(i,t,n,r)),t}};if(v)throw Error(a(101));v=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),_(),d=In,m=Mn,g=Pn,S({SimpleEventPlugin:si,EnterLeaveEventPlugin:Fr,ChangeEventPlugin:Sr,SelectEventPlugin:Zr,BeforeInputEventPlugin:cr});var li=[],ci=-1;function ui(e){0>ci||(e.current=li[ci],li[ci]=null,ci--)}function hi(e,t){ci++,li[ci]=e.current,e.current=t}var fi={},pi={current:fi},di={current:!1},mi=fi;function gi(e,t){var n=e.type.contextTypes;if(!n)return fi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function yi(e){return null!=e.childContextTypes}function vi(){ui(di),ui(pi)}function bi(e,t,n){if(pi.current!==fi)throw Error(a(168));hi(pi,t),hi(di,n)}function _i(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(a(108,ge(t)||"Unknown",o));return i({},n,{},r)}function xi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fi,mi=pi.current,hi(pi,e),hi(di,di.current),!0}function Ai(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=_i(e,t,mi),r.__reactInternalMemoizedMergedChildContext=e,ui(di),ui(pi),hi(pi,e)):ui(di),hi(di,n)}var wi=o.unstable_runWithPriority,Ci=o.unstable_scheduleCallback,Ei=o.unstable_cancelCallback,Si=o.unstable_requestPaint,Ti=o.unstable_now,Bi=o.unstable_getCurrentPriorityLevel,ki=o.unstable_ImmediatePriority,Mi=o.unstable_UserBlockingPriority,Pi=o.unstable_NormalPriority,Ii=o.unstable_LowPriority,Oi=o.unstable_IdlePriority,Di={},zi=o.unstable_shouldYield,Li=void 0!==Si?Si:function(){},Ri=null,Fi=null,Ui=!1,Ni=Ti(),ji=1e4>Ni?Ti:function(){return Ti()-Ni};function Vi(){switch(Bi()){case ki:return 99;case Mi:return 98;case Pi:return 97;case Ii:return 96;case Oi:return 95;default:throw Error(a(332))}}function Gi(e){switch(e){case 99:return ki;case 98:return Mi;case 97:return Pi;case 96:return Ii;case 95:return Oi;default:throw Error(a(332))}}function qi(e,t){return e=Gi(e),wi(e,t)}function Wi(e,t,n){return e=Gi(e),Ci(e,t,n)}function Hi(e){return null===Ri?(Ri=[e],Fi=Ci(ki,Xi)):Ri.push(e),Di}function $i(){if(null!==Fi){var e=Fi;Fi=null,Ei(e)}Xi()}function Xi(){if(!Ui&&null!==Ri){Ui=!0;var e=0;try{var t=Ri;qi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ri=null}catch(t){throw null!==Ri&&(Ri=Ri.slice(e+1)),Ci(ki,$i),t}finally{Ui=!1}}}function Zi(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function Yi(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var Ki={current:null},Ji=null,Qi=null,eo=null;function to(){eo=Qi=Ji=null}function no(e){var t=Ki.current;ui(Ki),e.type._context._currentValue=t}function ro(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function io(e,t){Ji=e,eo=Qi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Ia=!0),e.firstContext=null)}function oo(e,t){if(eo!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(eo=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Qi){if(null===Ji)throw Error(a(308));Qi=t,Ji.dependencies={expirationTime:0,firstContext:t,responders:null}}else Qi=Qi.next=t;return e._currentValue}var ao=!1;function so(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function lo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function co(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function uo(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ho(e,t){var n=e.alternate;null!==n&&lo(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function fo(e,t,n,r){var o=e.updateQueue;ao=!1;var a=o.baseQueue,s=o.shared.pending;if(null!==s){if(null!==a){var l=a.next;a.next=s.next,s.next=l}a=s,o.shared.pending=null,null!==(l=e.alternate)&&null!==(l=l.updateQueue)&&(l.baseQueue=s)}if(null!==a){l=a.next;var c=o.baseState,u=0,h=null,f=null,p=null;if(null!==l)for(var d=l;;){if((s=d.expirationTime)<r){var m={expirationTime:d.expirationTime,suspenseConfig:d.suspenseConfig,tag:d.tag,payload:d.payload,callback:d.callback,next:null};null===p?(f=p=m,h=c):p=p.next=m,s>u&&(u=s)}else{null!==p&&(p=p.next={expirationTime:1073741823,suspenseConfig:d.suspenseConfig,tag:d.tag,payload:d.payload,callback:d.callback,next:null}),cl(s,d.suspenseConfig);e:{var g=e,y=d;switch(s=t,m=n,y.tag){case 1:if("function"==typeof(g=y.payload)){c=g.call(m,c,s);break e}c=g;break e;case 3:g.effectTag=-4097&g.effectTag|64;case 0:if(null==(s="function"==typeof(g=y.payload)?g.call(m,c,s):g))break e;c=i({},c,s);break e;case 2:ao=!0}}null!==d.callback&&(e.effectTag|=32,null===(s=o.effects)?o.effects=[d]:s.push(d))}if(null===(d=d.next)||d===l){if(null===(s=o.shared.pending))break;d=a.next=s.next,s.next=l,o.baseQueue=a=s,o.shared.pending=null}}null===p?h=c:p.next=f,o.baseState=h,o.baseQueue=p,ul(u),e.expirationTime=u,e.memoizedState=c}}function po(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!=typeof r)throw Error(a(191,r));r.call(i)}}}var mo=Y.ReactCurrentBatchConfig,go=(new r.Component).refs;function yo(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:i({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var vo={isMounted:function(e){return!!(e=e._reactInternalFiber)&&Je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=Ys(),i=mo.suspense;(i=co(r=Ks(r,e,i),i)).payload=t,null!=n&&(i.callback=n),uo(e,i),Js(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=Ys(),i=mo.suspense;(i=co(r=Ks(r,e,i),i)).tag=1,i.payload=t,null!=n&&(i.callback=n),uo(e,i),Js(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=Ys(),r=mo.suspense;(r=co(n=Ks(n,e,r),r)).tag=2,null!=t&&(r.callback=t),uo(e,r),Js(e,n)}};function bo(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!(t.prototype&&t.prototype.isPureReactComponent&&jr(n,r)&&jr(i,o))}function _o(e,t,n){var r=!1,i=fi,o=t.contextType;return"object"==typeof o&&null!==o?o=oo(o):(i=yi(t)?mi:pi.current,o=(r=null!=(r=t.contextTypes))?gi(e,i):fi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=vo,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function xo(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&vo.enqueueReplaceState(t,t.state,null)}function Ao(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=go,so(e);var o=t.contextType;"object"==typeof o&&null!==o?i.context=oo(o):(o=yi(t)?mi:pi.current,i.context=gi(e,o)),fo(e,n,i,r),i.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(yo(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&vo.enqueueReplaceState(i,i.state,null),fo(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.effectTag|=4)}var wo=Array.isArray;function Co(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===go&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!=typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Eo(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function So(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ml(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Ol(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Co(e,t,n),r.return=e,r):((r=Pl(n.type,n.key,n.props,null,e.mode,r)).ref=Co(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Dl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Il(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Ol(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case ee:return(n=Pl(t.type,t.key,t.props,null,e.mode,n)).ref=Co(e,null,t),n.return=e,n;case te:return(t=Dl(t,e.mode,n)).return=e,t}if(wo(t)||me(t))return(t=Il(t,e.mode,n,null)).return=e,t;Eo(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case ee:return n.key===i?n.type===ne?h(e,t,n.props.children,r,i):c(e,t,n,r):null;case te:return n.key===i?u(e,t,n,r):null}if(wo(n)||me(n))return null!==i?null:h(e,t,n,r,null);Eo(e,n)}return null}function d(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case ee:return e=e.get(null===r.key?n:r.key)||null,r.type===ne?h(t,e,r.props.children,i,r.key):c(t,e,r,i);case te:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(wo(r)||me(r))return h(t,e=e.get(n)||null,r,i,null);Eo(t,r)}return null}function m(i,a,s,l){for(var c=null,u=null,h=a,m=a=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=p(i,h,s[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),a=o(y,a,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===s.length)return n(i,h),c;if(null===h){for(;m<s.length;m++)null!==(h=f(i,s[m],l))&&(a=o(h,a,m),null===u?c=h:u.sibling=h,u=h);return c}for(h=r(i,h);m<s.length;m++)null!==(g=d(h,i,m,s[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),a=o(g,a,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),c}function g(i,s,l,c){var u=me(l);if("function"!=typeof u)throw Error(a(150));if(null==(l=u.call(l)))throw Error(a(151));for(var h=u=null,m=s,g=s=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=p(i,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),s=o(b,s,g),null===h?u=b:h.sibling=b,h=b,m=y}if(v.done)return n(i,m),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=f(i,v.value,c))&&(s=o(v,s,g),null===h?u=v:h.sibling=v,h=v);return u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=d(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),s=o(v,s,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),u}return function(e,r,o,l){var c="object"==typeof o&&null!==o&&o.type===ne&&null===o.key;c&&(o=o.props.children);var u="object"==typeof o&&null!==o;if(u)switch(o.$$typeof){case ee:e:{for(u=o.key,c=r;null!==c;){if(c.key===u){if(7===c.tag){if(o.type===ne){n(e,c.sibling),(r=i(c,o.props.children)).return=e,e=r;break e}}else if(c.elementType===o.type){n(e,c.sibling),(r=i(c,o.props)).ref=Co(e,c,o),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}o.type===ne?((r=Il(o.props.children,e.mode,l,o.key)).return=e,e=r):((l=Pl(o.type,o.key,o.props,null,e.mode,l)).ref=Co(e,r,o),l.return=e,e=l)}return s(e);case te:e:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Dl(o,e.mode,l)).return=e,e=r}return s(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Ol(o,e.mode,l)).return=e,e=r),s(e);if(wo(o))return m(e,r,o,l);if(me(o))return g(e,r,o,l);if(u&&Eo(e,o),void 0===o&&!c)switch(e.tag){case 1:case 0:throw e=e.type,Error(a(152,e.displayName||e.name||"Component"))}return n(e,r)}}var To=So(!0),Bo=So(!1),ko={},Mo={current:ko},Po={current:ko},Io={current:ko};function Oo(e){if(e===ko)throw Error(a(174));return e}function Do(e,t){switch(hi(Io,t),hi(Po,e),hi(Mo,ko),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ze(null,"");break;default:t=ze(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ui(Mo),hi(Mo,t)}function zo(){ui(Mo),ui(Po),ui(Io)}function Lo(e){Oo(Io.current);var t=Oo(Mo.current),n=ze(t,e.type);t!==n&&(hi(Po,e),hi(Mo,n))}function Ro(e){Po.current===e&&(ui(Mo),ui(Po))}var Fo={current:0};function Uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===mn||n.data===gn))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function No(e,t){return{responder:e,props:t}}var jo=Y.ReactCurrentDispatcher,Vo=Y.ReactCurrentBatchConfig,Go=0,qo=null,Wo=null,Ho=null,$o=!1;function Xo(){throw Error(a(321))}function Zo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ur(e[n],t[n]))return!1;return!0}function Yo(e,t,n,r,i,o){if(Go=o,qo=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,jo.current=null===e||null===e.memoizedState?ba:_a,e=n(r,i),t.expirationTime===Go){o=0;do{if(t.expirationTime=0,!(25>o))throw Error(a(301));o+=1,Ho=Wo=null,t.updateQueue=null,jo.current=xa,e=n(r,i)}while(t.expirationTime===Go)}if(jo.current=va,t=null!==Wo&&null!==Wo.next,Go=0,Ho=Wo=qo=null,$o=!1,t)throw Error(a(300));return e}function Ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ho?qo.memoizedState=Ho=e:Ho=Ho.next=e,Ho}function Jo(){if(null===Wo){var e=qo.alternate;e=null!==e?e.memoizedState:null}else e=Wo.next;var t=null===Ho?qo.memoizedState:Ho.next;if(null!==t)Ho=t,Wo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(Wo=e).memoizedState,baseState:Wo.baseState,baseQueue:Wo.baseQueue,queue:Wo.queue,next:null},null===Ho?qo.memoizedState=Ho=e:Ho=Ho.next=e}return Ho}function Qo(e,t){return"function"==typeof t?t(e):t}function ea(e){var t=Jo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=Wo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var l=s=o=null,c=i;do{var u=c.expirationTime;if(u<Go){var h={expirationTime:c.expirationTime,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===l?(s=l=h,o=r):l=l.next=h,u>qo.expirationTime&&(qo.expirationTime=u,ul(u))}else null!==l&&(l=l.next={expirationTime:1073741823,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),cl(u,c.suspenseConfig),r=c.eagerReducer===e?c.eagerState:e(r,c.action);c=c.next}while(null!==c&&c!==i);null===l?o=r:l.next=s,Ur(r,t.memoizedState)||(Ia=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function ta(e){var t=Jo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);Ur(o,t.memoizedState)||(Ia=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function na(e){var t=Ko();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Qo,lastRenderedState:e}).dispatch=ya.bind(null,qo,e),[t.memoizedState,e]}function ra(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=qo.updateQueue)?(t={lastEffect:null},qo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ia(){return Jo().memoizedState}function oa(e,t,n,r){var i=Ko();qo.effectTag|=e,i.memoizedState=ra(1|t,n,void 0,void 0===r?null:r)}function aa(e,t,n,r){var i=Jo();r=void 0===r?null:r;var o=void 0;if(null!==Wo){var a=Wo.memoizedState;if(o=a.destroy,null!==r&&Zo(r,a.deps))return void ra(t,n,o,r)}qo.effectTag|=e,i.memoizedState=ra(1|t,n,o,r)}function sa(e,t){return oa(516,4,e,t)}function la(e,t){return aa(516,4,e,t)}function ca(e,t){return aa(4,2,e,t)}function ua(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ha(e,t,n){return n=null!=n?n.concat([e]):null,aa(4,2,ua.bind(null,t,e),n)}function fa(){}function pa(e,t){return Ko().memoizedState=[e,void 0===t?null:t],e}function da(e,t){var n=Jo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Zo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ma(e,t){var n=Jo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Zo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ga(e,t,n){var r=Vi();qi(98>r?98:r,(function(){e(!0)})),qi(97<r?97:r,(function(){var r=Vo.suspense;Vo.suspense=void 0===t?null:t;try{e(!1),n()}finally{Vo.suspense=r}}))}function ya(e,t,n){var r=Ys(),i=mo.suspense;i={expirationTime:r=Ks(r,e,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var o=t.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),t.pending=i,o=e.alternate,e===qo||null!==o&&o===qo)$o=!0,i.expirationTime=Go,qo.expirationTime=Go;else{if(0===e.expirationTime&&(null===o||0===o.expirationTime)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.eagerReducer=o,i.eagerState=s,Ur(s,a))return}catch(e){}Js(e,r)}}var va={readContext:oo,useCallback:Xo,useContext:Xo,useEffect:Xo,useImperativeHandle:Xo,useLayoutEffect:Xo,useMemo:Xo,useReducer:Xo,useRef:Xo,useState:Xo,useDebugValue:Xo,useResponder:Xo,useDeferredValue:Xo,useTransition:Xo},ba={readContext:oo,useCallback:pa,useContext:oo,useEffect:sa,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,oa(4,2,ua.bind(null,t,e),n)},useLayoutEffect:function(e,t){return oa(4,2,e,t)},useMemo:function(e,t){var n=Ko();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ko();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=ya.bind(null,qo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ko().memoizedState=e},useState:na,useDebugValue:fa,useResponder:No,useDeferredValue:function(e,t){var n=na(e),r=n[0],i=n[1];return sa((function(){var n=Vo.suspense;Vo.suspense=void 0===t?null:t;try{i(e)}finally{Vo.suspense=n}}),[e,t]),r},useTransition:function(e){var t=na(!1),n=t[0];return t=t[1],[pa(ga.bind(null,t,e),[t,e]),n]}},_a={readContext:oo,useCallback:da,useContext:oo,useEffect:la,useImperativeHandle:ha,useLayoutEffect:ca,useMemo:ma,useReducer:ea,useRef:ia,useState:function(){return ea(Qo)},useDebugValue:fa,useResponder:No,useDeferredValue:function(e,t){var n=ea(Qo),r=n[0],i=n[1];return la((function(){var n=Vo.suspense;Vo.suspense=void 0===t?null:t;try{i(e)}finally{Vo.suspense=n}}),[e,t]),r},useTransition:function(e){var t=ea(Qo),n=t[0];return t=t[1],[da(ga.bind(null,t,e),[t,e]),n]}},xa={readContext:oo,useCallback:da,useContext:oo,useEffect:la,useImperativeHandle:ha,useLayoutEffect:ca,useMemo:ma,useReducer:ta,useRef:ia,useState:function(){return ta(Qo)},useDebugValue:fa,useResponder:No,useDeferredValue:function(e,t){var n=ta(Qo),r=n[0],i=n[1];return la((function(){var n=Vo.suspense;Vo.suspense=void 0===t?null:t;try{i(e)}finally{Vo.suspense=n}}),[e,t]),r},useTransition:function(e){var t=ta(Qo),n=t[0];return t=t[1],[da(ga.bind(null,t,e),[t,e]),n]}},Aa=null,wa=null,Ca=!1;function Ea(e,t){var n=Bl(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ta(e){if(Ca){var t=wa;if(t){var n=t;if(!Sa(e,t)){if(!(t=wn(n.nextSibling))||!Sa(e,t))return e.effectTag=-1025&e.effectTag|2,Ca=!1,void(Aa=e);Ea(Aa,n)}Aa=e,wa=wn(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,Ca=!1,Aa=e}}function Ba(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Aa=e}function ka(e){if(e!==Aa)return!1;if(!Ca)return Ba(e),Ca=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!_n(t,e.memoizedProps))for(t=wa;t;)Ea(e,t),t=wn(t.nextSibling);if(Ba(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){wa=wn(e.nextSibling);break e}t--}else"$"!==n&&n!==gn&&n!==mn||t++}e=e.nextSibling}wa=null}}else wa=Aa?wn(e.stateNode.nextSibling):null;return!0}function Ma(){wa=Aa=null,Ca=!1}var Pa=Y.ReactCurrentOwner,Ia=!1;function Oa(e,t,n,r){t.child=null===e?Bo(t,null,n,r):To(t,e.child,n,r)}function Da(e,t,n,r,i){n=n.render;var o=t.ref;return io(t,i),r=Yo(e,t,n,r,o,i),null===e||Ia?(t.effectTag|=1,Oa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Ya(e,t,i))}function za(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!=typeof a||kl(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pl(n.type,null,r,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,La(e,t,a,r,i,o))}return a=e.child,i<o&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:jr)(i,r)&&e.ref===t.ref)?Ya(e,t,o):(t.effectTag|=1,(e=Ml(a,r)).ref=t.ref,e.return=t,t.child=e)}function La(e,t,n,r,i,o){return null!==e&&jr(e.memoizedProps,r)&&e.ref===t.ref&&(Ia=!1,i<o)?(t.expirationTime=e.expirationTime,Ya(e,t,o)):Fa(e,t,n,r,o)}function Ra(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Fa(e,t,n,r,i){var o=yi(n)?mi:pi.current;return o=gi(t,o),io(t,i),n=Yo(e,t,n,r,o,i),null===e||Ia?(t.effectTag|=1,Oa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Ya(e,t,i))}function Ua(e,t,n,r,i){if(yi(n)){var o=!0;xi(t)}else o=!1;if(io(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),_o(t,n,r),Ao(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;c="object"==typeof c&&null!==c?oo(c):gi(t,c=yi(n)?mi:pi.current);var u=n.getDerivedStateFromProps,h="function"==typeof u||"function"==typeof a.getSnapshotBeforeUpdate;h||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||l!==c)&&xo(t,a,r,c),ao=!1;var f=t.memoizedState;a.state=f,fo(t,r,a,i),l=t.memoizedState,s!==r||f!==l||di.current||ao?("function"==typeof u&&(yo(t,n,u,r),l=t.memoizedState),(s=ao||bo(t,n,s,r,f,l,c))?(h||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.effectTag|=4)):("function"==typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):("function"==typeof a.componentDidMount&&(t.effectTag|=4),r=!1)}else a=t.stateNode,lo(e,t),s=t.memoizedProps,a.props=t.type===t.elementType?s:Yi(t.type,s),l=a.context,c="object"==typeof(c=n.contextType)&&null!==c?oo(c):gi(t,c=yi(n)?mi:pi.current),(h="function"==typeof(u=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||l!==c)&&xo(t,a,r,c),ao=!1,l=t.memoizedState,a.state=l,fo(t,r,a,i),f=t.memoizedState,s!==r||l!==f||di.current||ao?("function"==typeof u&&(yo(t,n,u,r),f=t.memoizedState),(u=ao||bo(t,n,s,r,l,f,c))?(h||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,c),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,c)),"function"==typeof a.componentDidUpdate&&(t.effectTag|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=c,r=u):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),r=!1);return Na(e,t,n,r,o,i)}function Na(e,t,n,r,i,o){Ra(e,t);var a=0!=(64&t.effectTag);if(!r&&!a)return i&&Ai(t,n,!1),Ya(e,t,o);r=t.stateNode,Pa.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&a?(t.child=To(t,e.child,null,o),t.child=To(t,null,s,o)):Oa(e,t,s,o),t.memoizedState=r.state,i&&Ai(t,n,!0),t.child}function ja(e){var t=e.stateNode;t.pendingContext?bi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&bi(0,t.context,!1),Do(e,t.containerInfo)}var Va,Ga,qa,Wa={dehydrated:null,retryTime:0};function Ha(e,t,n){var r,i=t.mode,o=t.pendingProps,a=Fo.current,s=!1;if((r=0!=(64&t.effectTag))||(r=0!=(2&a)&&(null===e||null!==e.memoizedState)),r?(s=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),hi(Fo,1&a),null===e){if(void 0!==o.fallback&&Ta(t),s){if(s=o.fallback,(o=Il(null,i,0,null)).return=t,0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Il(s,i,n,null)).return=t,o.sibling=n,t.memoizedState=Wa,t.child=o,n}return i=o.children,t.memoizedState=null,t.child=Bo(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,s){if(o=o.fallback,(n=Ml(e,e.pendingProps)).return=t,0==(2&t.mode)&&(s=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(i=Ml(i,o)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=Wa,t.child=n,i}return n=To(t,e.child,o.children,n),t.memoizedState=null,t.child=n}if(e=e.child,s){if(s=o.fallback,(o=Il(null,i,0,null)).return=t,o.child=e,null!==e&&(e.return=o),0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Il(s,i,n,null)).return=t,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,t.memoizedState=Wa,t.child=o,n}return t.memoizedState=null,t.child=To(t,e,o.children,n)}function $a(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),ro(e.return,t)}function Xa(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailExpiration=0,a.tailMode=i,a.lastEffect=o)}function Za(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Oa(e,t,r.children,n),0!=(2&(r=Fo.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!=(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&$a(e,n);else if(19===e.tag)$a(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(hi(Fo,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Xa(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Xa(t,!0,n,null,o,t.lastEffect);break;case"together":Xa(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Ya(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&ul(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Ml(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ml(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ka(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ja(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return yi(t.type)&&vi(),null;case 3:return zo(),ui(di),ui(pi),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!ka(t)||(t.effectTag|=4),null;case 5:Ro(t),n=Oo(Io.current);var o=t.type;if(null!==e&&null!=t.stateNode)Ga(e,t,o,r,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(null===t.stateNode)throw Error(a(166));return null}if(e=Oo(Mo.current),ka(t)){r=t.stateNode,o=t.type;var s=t.memoizedProps;switch(r[Sn]=t,r[Tn]=s,o){case"iframe":case"object":case"embed":Ht("load",r);break;case"video":case"audio":for(e=0;e<Ze.length;e++)Ht(Ze[e],r);break;case"source":Ht("error",r);break;case"img":case"image":case"link":Ht("error",r),Ht("load",r);break;case"form":Ht("reset",r),Ht("submit",r);break;case"details":Ht("toggle",r);break;case"input":we(r,s),Ht("invalid",r),sn(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ht("invalid",r),sn(n,"onChange");break;case"textarea":Pe(r,s),Ht("invalid",r),sn(n,"onChange")}for(var l in rn(o,s),e=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"==typeof c?r.textContent!==c&&(e=["children",c]):"number"==typeof c&&r.textContent!==""+c&&(e=["children",""+c]):C.hasOwnProperty(l)&&null!=c&&sn(n,l)}switch(o){case"input":_e(r),Se(r,s,!0);break;case"textarea":_e(r),Oe(r);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(r.onclick=ln)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(l=9===n.nodeType?n:n.ownerDocument,e===an&&(e=De(o)),e===an?"script"===o?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=l.createElement(o,{is:r.is}):(e=l.createElement(o),"select"===o&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,o),e[Sn]=t,e[Tn]=r,Va(e,t),t.stateNode=e,l=on(o,r),o){case"iframe":case"object":case"embed":Ht("load",e),c=r;break;case"video":case"audio":for(c=0;c<Ze.length;c++)Ht(Ze[c],e);c=r;break;case"source":Ht("error",e),c=r;break;case"img":case"image":case"link":Ht("error",e),Ht("load",e),c=r;break;case"form":Ht("reset",e),Ht("submit",e),c=r;break;case"details":Ht("toggle",e),c=r;break;case"input":we(e,r),c=Ae(e,r),Ht("invalid",e),sn(n,"onChange");break;case"option":c=Be(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},c=i({},r,{value:void 0}),Ht("invalid",e),sn(n,"onChange");break;case"textarea":Pe(e,r),c=Me(e,r),Ht("invalid",e),sn(n,"onChange");break;default:c=r}rn(o,c);var u=c;for(s in u)if(u.hasOwnProperty(s)){var h=u[s];"style"===s?tn(e,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&Fe(e,h):"children"===s?"string"==typeof h?("textarea"!==o||""!==h)&&Ue(e,h):"number"==typeof h&&Ue(e,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(C.hasOwnProperty(s)?null!=h&&sn(n,s):null!=h&&K(e,s,h,l))}switch(o){case"input":_e(e),Se(e,r,!1);break;case"textarea":_e(e),Oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+ve(r.value));break;case"select":e.multiple=!!r.multiple,null!=(n=r.value)?ke(e,!!r.multiple,n,!1):null!=r.defaultValue&&ke(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof c.onClick&&(e.onclick=ln)}bn(o,r)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)qa(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(a(166));n=Oo(Io.current),Oo(Mo.current),ka(t)?(n=t.stateNode,r=t.memoizedProps,n[Sn]=t,n.nodeValue!==r&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Sn]=t,t.stateNode=n)}return null;case 13:return ui(Fo),r=t.memoizedState,0!=(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==r,r=!1,null===e?void 0!==t.memoizedProps.fallback&&ka(t):(r=null!==(o=e.memoizedState),n||null===o||null!==(o=e.child.sibling)&&(null!==(s=t.firstEffect)?(t.firstEffect=o,o.nextEffect=s):(t.firstEffect=t.lastEffect=o,o.nextEffect=null),o.effectTag=8)),n&&!r&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Fo.current)?Ps===Cs&&(Ps=Es):(Ps!==Cs&&Ps!==Es||(Ps=Ss),0!==Ls&&null!==Bs&&(Rl(Bs,Ms),Fl(Bs,Ls)))),(n||r)&&(t.effectTag|=4),null);case 4:return zo(),null;case 10:return no(t),null;case 19:if(ui(Fo),null===(r=t.memoizedState))return null;if(o=0!=(64&t.effectTag),null===(s=r.rendering)){if(o)Ka(r,!1);else if(Ps!==Cs||null!==e&&0!=(64&e.effectTag))for(s=t.child;null!==s;){if(null!==(e=Uo(s))){for(t.effectTag|=64,Ka(r,!1),null!==(o=e.updateQueue)&&(t.updateQueue=o,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=t.child;null!==r;)s=n,(o=r).effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(e=o.alternate)?(o.childExpirationTime=0,o.expirationTime=s,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=e.childExpirationTime,o.expirationTime=e.expirationTime,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,s=e.dependencies,o.dependencies=null===s?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),r=r.sibling;return hi(Fo,1&Fo.current|2),t.child}s=s.sibling}}else{if(!o)if(null!==(e=Uo(s))){if(t.effectTag|=64,o=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),Ka(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*ji()-r.renderingStartTime>r.tailExpiration&&1<n&&(t.effectTag|=64,o=!0,Ka(r,!1),t.expirationTime=t.childExpirationTime=n-1);r.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=r.last)?n.sibling=s:t.child=s,r.last=s)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=ji()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=ji(),n.sibling=null,t=Fo.current,hi(Fo,o?1&t|2:1&t),n):null}throw Error(a(156,t.tag))}function Qa(e){switch(e.tag){case 1:yi(e.type)&&vi();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(zo(),ui(di),ui(pi),0!=(64&(t=e.effectTag)))throw Error(a(285));return e.effectTag=-4097&t|64,e;case 5:return Ro(e),null;case 13:return ui(Fo),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return ui(Fo),null;case 4:return zo(),null;case 10:return no(e),null;default:return null}}function es(e,t){return{value:e,source:t,stack:ye(t)}}Va=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ga=function(e,t,n,r,o){var a=e.memoizedProps;if(a!==r){var s,l,c=t.stateNode;switch(Oo(Mo.current),e=null,n){case"input":a=Ae(c,a),r=Ae(c,r),e=[];break;case"option":a=Be(c,a),r=Be(c,r),e=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":a=Me(c,a),r=Me(c,r),e=[];break;default:"function"!=typeof a.onClick&&"function"==typeof r.onClick&&(c.onclick=ln)}for(s in rn(n,r),n=null,a)if(!r.hasOwnProperty(s)&&a.hasOwnProperty(s)&&null!=a[s])if("style"===s)for(l in c=a[s])c.hasOwnProperty(l)&&(n||(n={}),n[l]="");else"dangerouslySetInnerHTML"!==s&&"children"!==s&&"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(C.hasOwnProperty(s)?e||(e=[]):(e=e||[]).push(s,null));for(s in r){var u=r[s];if(c=null!=a?a[s]:void 0,r.hasOwnProperty(s)&&u!==c&&(null!=u||null!=c))if("style"===s)if(c){for(l in c)!c.hasOwnProperty(l)||u&&u.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in u)u.hasOwnProperty(l)&&c[l]!==u[l]&&(n||(n={}),n[l]=u[l])}else n||(e||(e=[]),e.push(s,n)),n=u;else"dangerouslySetInnerHTML"===s?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(e=e||[]).push(s,u)):"children"===s?c===u||"string"!=typeof u&&"number"!=typeof u||(e=e||[]).push(s,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&(C.hasOwnProperty(s)?(null!=u&&sn(o,s),e||c===u||(e=[])):(e=e||[]).push(s,u))}n&&(e=e||[]).push("style",n),o=e,(t.updateQueue=o)&&(t.effectTag|=4)}},qa=function(e,t,n,r){n!==r&&(t.effectTag|=4)};var ts="function"==typeof WeakSet?WeakSet:Set;function ns(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=ye(n)),null!==n&&ge(n.type),t=t.value,null!==e&&1===e.tag&&ge(e.type);try{console.error(t)}catch(e){setTimeout((function(){throw e}))}}function rs(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Al(e,t)}else t.current=null}function is(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 3:case 5:case 6:case 4:case 17:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Yi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return}throw Error(a(163))}function os(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function as(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ss(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void as(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:Yi(n.type,t.memoizedProps);e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&po(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}po(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&bn(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&zt(n)))))}throw Error(a(163))}function ls(e,t,n){switch("function"==typeof Sl&&Sl(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;qi(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var i=t;try{n()}catch(e){Al(i,e)}}e=e.next}while(e!==r)}))}break;case 1:rs(t),"function"==typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){Al(e,t)}}(t,n);break;case 5:rs(t);break;case 4:ds(e,t,n)}}function cs(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&cs(t)}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function hs(e){e:{for(var t=e.return;null!==t;){if(us(t)){var n=t;break e}t=t.return}throw Error(a(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.effectTag&&(Ue(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||us(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}r?fs(e,n,t):ps(e,n,t)}function fs(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=ln));else if(4!==r&&null!==(e=e.child))for(fs(e,t,n),e=e.sibling;null!==e;)fs(e,t,n),e=e.sibling}function ps(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ps(e,t,n),e=e.sibling;null!==e;)ps(e,t,n),e=e.sibling}function ds(e,t,n){for(var r,i,o=t,s=!1;;){if(!s){s=o.return;e:for(;;){if(null===s)throw Error(a(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}s=s.return}s=!0}if(5===o.tag||6===o.tag){e:for(var l=e,c=o,u=n,h=c;;)if(ls(l,h,u),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===c)break e;for(;null===h.sibling;){if(null===h.return||h.return===c)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i?(l=r,c=o.stateNode,8===l.nodeType?l.parentNode.removeChild(c):l.removeChild(c)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(ls(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(s=!1)}o.sibling.return=o.return,o=o.sibling}}function ms(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void os(3,t);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[Tn]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Ce(n,r),on(e,i),t=on(e,r),i=0;i<o.length;i+=2){var s=o[i],l=o[i+1];"style"===s?tn(n,l):"dangerouslySetInnerHTML"===s?Fe(n,l):"children"===s?Ue(n,l):K(n,s,l,t)}switch(e){case"input":Ee(n,r);break;case"textarea":Ie(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?ke(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?ke(n,!!r.multiple,r.defaultValue,!0):ke(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,zt(t.containerInfo)));case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,Fs=ji()),null!==n)e:for(e=n;;){if(5===e.tag)o=e.stateNode,r?"function"==typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=e.stateNode,i=null!=(i=e.memoizedProps.style)&&i.hasOwnProperty("display")?i.display:null,o.style.display=en("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(o=e.child.sibling).return=e,e=o;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void gs(t);case 19:return void gs(t)}throw Error(a(163))}function gs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ts),t.forEach((function(t){var r=Cl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var ys="function"==typeof WeakMap?WeakMap:Map;function vs(e,t,n){(n=co(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ns||(Ns=!0,js=r),ns(e,t)},n}function bs(e,t,n){(n=co(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return ns(e,t),r(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Vs?Vs=new Set([this]):Vs.add(this),ns(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var _s,xs=Math.ceil,As=Y.ReactCurrentDispatcher,ws=Y.ReactCurrentOwner,Cs=0,Es=3,Ss=4,Ts=0,Bs=null,ks=null,Ms=0,Ps=Cs,Is=null,Os=1073741823,Ds=1073741823,zs=null,Ls=0,Rs=!1,Fs=0,Us=null,Ns=!1,js=null,Vs=null,Gs=!1,qs=null,Ws=90,Hs=null,$s=0,Xs=null,Zs=0;function Ys(){return 0!=(48&Ts)?1073741821-(ji()/10|0):0!==Zs?Zs:Zs=1073741821-(ji()/10|0)}function Ks(e,t,n){if(0==(2&(t=t.mode)))return 1073741823;var r=Vi();if(0==(4&t))return 99===r?1073741823:1073741822;if(0!=(16&Ts))return Ms;if(null!==n)e=Zi(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=Zi(e,150,100);break;case 97:case 96:e=Zi(e,5e3,250);break;case 95:e=2;break;default:throw Error(a(326))}return null!==Bs&&e===Ms&&--e,e}function Js(e,t){if(50<$s)throw $s=0,Xs=null,Error(a(185));if(null!==(e=Qs(e,t))){var n=Vi();1073741823===t?0!=(8&Ts)&&0==(48&Ts)?rl(e):(tl(e),0===Ts&&$i()):tl(e),0==(4&Ts)||98!==n&&99!==n||(null===Hs?Hs=new Map([[e,t]]):(void 0===(n=Hs.get(e))||n>t)&&Hs.set(e,t))}}function Qs(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Bs===i&&(ul(t),Ps===Ss&&Rl(i,Ms)),Fl(i,t)),i}function el(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!Ll(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function tl(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Hi(rl.bind(null,e));else{var t=el(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=Ys();if(r=1073741823===t?99:1===t||2===t?95:0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=r)return;n!==Di&&Ei(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?Hi(rl.bind(null,e)):Wi(r,nl.bind(null,e),{timeout:10*(1073741821-t)-ji()}),e.callbackNode=t}}}function nl(e,t){if(Zs=0,t)return Ul(e,t=Ys()),tl(e),null;var n=el(e);if(0!==n){if(t=e.callbackNode,0!=(48&Ts))throw Error(a(327));if(bl(),e===Bs&&n===Ms||al(e,n),null!==ks){var r=Ts;Ts|=16;for(var i=ll();;)try{fl();break}catch(t){sl(e,t)}if(to(),Ts=r,As.current=i,1===Ps)throw t=Is,al(e,n),Rl(e,n),tl(e),t;if(null===ks)switch(i=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=Ps,Bs=null,r){case Cs:case 1:throw Error(a(345));case 2:Ul(e,2<n?2:n);break;case Es:if(Rl(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=ml(i)),1073741823===Os&&10<(i=Fs+500-ji())){if(Rs){var o=e.lastPingedTime;if(0===o||o>=n){e.lastPingedTime=n,al(e,n);break}}if(0!==(o=el(e))&&o!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=xn(gl.bind(null,e),i);break}gl(e);break;case Ss:if(Rl(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=ml(i)),Rs&&(0===(i=e.lastPingedTime)||i>=n)){e.lastPingedTime=n,al(e,n);break}if(0!==(i=el(e))&&i!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==Ds?r=10*(1073741821-Ds)-ji():1073741823===Os?r=0:(r=10*(1073741821-Os)-5e3,0>(r=(i=ji())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xs(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=xn(gl.bind(null,e),r);break}gl(e);break;case 5:if(1073741823!==Os&&null!==zs){o=Os;var s=zs;if(0>=(r=0|s.busyMinDurationMs)?r=0:(i=0|s.busyDelayMs,r=(o=ji()-(10*(1073741821-o)-(0|s.timeoutMs||5e3)))<=i?0:i+r-o),10<r){Rl(e,n),e.timeoutHandle=xn(gl.bind(null,e),r);break}}gl(e);break;default:throw Error(a(329))}if(tl(e),e.callbackNode===t)return nl.bind(null,e)}}return null}function rl(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,0!=(48&Ts))throw Error(a(327));if(bl(),e===Bs&&t===Ms||al(e,t),null!==ks){var n=Ts;Ts|=16;for(var r=ll();;)try{hl();break}catch(t){sl(e,t)}if(to(),Ts=n,As.current=r,1===Ps)throw n=Is,al(e,t),Rl(e,t),tl(e),n;if(null!==ks)throw Error(a(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Bs=null,gl(e),tl(e)}return null}function il(e,t){var n=Ts;Ts|=1;try{return e(t)}finally{0===(Ts=n)&&$i()}}function ol(e,t){var n=Ts;Ts&=-2,Ts|=8;try{return e(t)}finally{0===(Ts=n)&&$i()}}function al(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,An(n)),null!==ks)for(n=ks.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&vi();break;case 3:zo(),ui(di),ui(pi);break;case 5:Ro(r);break;case 4:zo();break;case 13:case 19:ui(Fo);break;case 10:no(r)}n=n.return}Bs=e,ks=Ml(e.current,null),Ms=t,Ps=Cs,Is=null,Ds=Os=1073741823,zs=null,Ls=0,Rs=!1}function sl(e,t){for(;;){try{if(to(),jo.current=va,$o)for(var n=qo.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(Go=0,Ho=Wo=qo=null,$o=!1,null===ks||null===ks.return)return Ps=1,Is=t,ks=null;e:{var i=e,o=ks.return,a=ks,s=t;if(t=Ms,a.effectTag|=2048,a.firstEffect=a.lastEffect=null,null!==s&&"object"==typeof s&&"function"==typeof s.then){var l=s;if(0==(2&a.mode)){var c=a.alternate;c?(a.updateQueue=c.updateQueue,a.memoizedState=c.memoizedState,a.expirationTime=c.expirationTime):(a.updateQueue=null,a.memoizedState=null)}var u=0!=(1&Fo.current),h=o;do{var f;if(f=13===h.tag){var p=h.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var d=h.memoizedProps;f=void 0!==d.fallback&&(!0!==d.unstable_avoidThisFallback||!u)}}if(f){var m=h.updateQueue;if(null===m){var g=new Set;g.add(l),h.updateQueue=g}else m.add(l);if(0==(2&h.mode)){if(h.effectTag|=64,a.effectTag&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var y=co(1073741823,null);y.tag=2,uo(a,y)}a.expirationTime=1073741823;break e}s=void 0,a=t;var v=i.pingCache;if(null===v?(v=i.pingCache=new ys,s=new Set,v.set(l,s)):void 0===(s=v.get(l))&&(s=new Set,v.set(l,s)),!s.has(a)){s.add(a);var b=wl.bind(null,i,l,a);l.then(b,b)}h.effectTag|=4096,h.expirationTime=t;break e}h=h.return}while(null!==h);s=Error((ge(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ye(a))}5!==Ps&&(Ps=2),s=es(s,a),h=o;do{switch(h.tag){case 3:l=s,h.effectTag|=4096,h.expirationTime=t,ho(h,vs(h,l,t));break e;case 1:l=s;var _=h.type,x=h.stateNode;if(0==(64&h.effectTag)&&("function"==typeof _.getDerivedStateFromError||null!==x&&"function"==typeof x.componentDidCatch&&(null===Vs||!Vs.has(x)))){h.effectTag|=4096,h.expirationTime=t,ho(h,bs(h,l,t));break e}}h=h.return}while(null!==h)}ks=dl(ks)}catch(e){t=e;continue}break}}function ll(){var e=As.current;return As.current=va,null===e?va:e}function cl(e,t){e<Os&&2<e&&(Os=e),null!==t&&e<Ds&&2<e&&(Ds=e,zs=t)}function ul(e){e>Ls&&(Ls=e)}function hl(){for(;null!==ks;)ks=pl(ks)}function fl(){for(;null!==ks&&!zi();)ks=pl(ks)}function pl(e){var t=_s(e.alternate,e,Ms);return e.memoizedProps=e.pendingProps,null===t&&(t=dl(e)),ws.current=null,t}function dl(e){ks=e;do{var t=ks.alternate;if(e=ks.return,0==(2048&ks.effectTag)){if(t=Ja(t,ks,Ms),1===Ms||1!==ks.childExpirationTime){for(var n=0,r=ks.child;null!==r;){var i=r.expirationTime,o=r.childExpirationTime;i>n&&(n=i),o>n&&(n=o),r=r.sibling}ks.childExpirationTime=n}if(null!==t)return t;null!==e&&0==(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=ks.firstEffect),null!==ks.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=ks.firstEffect),e.lastEffect=ks.lastEffect),1<ks.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=ks:e.firstEffect=ks,e.lastEffect=ks))}else{if(null!==(t=Qa(ks)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=ks.sibling))return t;ks=e}while(null!==ks);return Ps===Cs&&(Ps=5),null}function ml(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function gl(e){var t=Vi();return qi(99,yl.bind(null,e,t)),null}function yl(e,t){do{bl()}while(null!==qs);if(0!=(48&Ts))throw Error(a(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=ml(n);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Bs&&(ks=Bs=null,Ms=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var o=Ts;Ts|=32,ws.current=null,yn=Wt;var s=pn();if(dn(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{var c=(l=(l=s.ownerDocument)&&l.defaultView||window).getSelection&&l.getSelection();if(c&&0!==c.rangeCount){l=c.anchorNode;var u=c.anchorOffset,h=c.focusNode;c=c.focusOffset;try{l.nodeType,h.nodeType}catch(e){l=null;break e}var f=0,p=-1,d=-1,m=0,g=0,y=s,v=null;t:for(;;){for(var b;y!==l||0!==u&&3!==y.nodeType||(p=f+u),y!==h||0!==c&&3!==y.nodeType||(d=f+c),3===y.nodeType&&(f+=y.nodeValue.length),null!==(b=y.firstChild);)v=y,y=b;for(;;){if(y===s)break t;if(v===l&&++m===u&&(p=f),v===h&&++g===c&&(d=f),null!==(b=y.nextSibling))break;v=(y=v).parentNode}y=b}l=-1===p||-1===d?null:{start:p,end:d}}else l=null}l=l||{start:0,end:0}}else l=null;vn={activeElementDetached:null,focusedElem:s,selectionRange:l},Wt=!1,Us=i;do{try{vl()}catch(e){if(null===Us)throw Error(a(330));Al(Us,e),Us=Us.nextEffect}}while(null!==Us);Us=i;do{try{for(s=e,l=t;null!==Us;){var _=Us.effectTag;if(16&_&&Ue(Us.stateNode,""),128&_){var x=Us.alternate;if(null!==x){var A=x.ref;null!==A&&("function"==typeof A?A(null):A.current=null)}}switch(1038&_){case 2:hs(Us),Us.effectTag&=-3;break;case 6:hs(Us),Us.effectTag&=-3,ms(Us.alternate,Us);break;case 1024:Us.effectTag&=-1025;break;case 1028:Us.effectTag&=-1025,ms(Us.alternate,Us);break;case 4:ms(Us.alternate,Us);break;case 8:ds(s,u=Us,l),cs(u)}Us=Us.nextEffect}}catch(e){if(null===Us)throw Error(a(330));Al(Us,e),Us=Us.nextEffect}}while(null!==Us);if(A=vn,x=pn(),_=A.focusedElem,l=A.selectionRange,x!==_&&_&&_.ownerDocument&&fn(_.ownerDocument.documentElement,_)){null!==l&&dn(_)&&(x=l.start,void 0===(A=l.end)&&(A=x),"selectionStart"in _?(_.selectionStart=x,_.selectionEnd=Math.min(A,_.value.length)):(A=(x=_.ownerDocument||document)&&x.defaultView||window).getSelection&&(A=A.getSelection(),u=_.textContent.length,s=Math.min(l.start,u),l=void 0===l.end?s:Math.min(l.end,u),!A.extend&&s>l&&(u=l,l=s,s=u),u=hn(_,s),h=hn(_,l),u&&h&&(1!==A.rangeCount||A.anchorNode!==u.node||A.anchorOffset!==u.offset||A.focusNode!==h.node||A.focusOffset!==h.offset)&&((x=x.createRange()).setStart(u.node,u.offset),A.removeAllRanges(),s>l?(A.addRange(x),A.extend(h.node,h.offset)):(x.setEnd(h.node,h.offset),A.addRange(x))))),x=[];for(A=_;A=A.parentNode;)1===A.nodeType&&x.push({element:A,left:A.scrollLeft,top:A.scrollTop});for("function"==typeof _.focus&&_.focus(),_=0;_<x.length;_++)(A=x[_]).element.scrollLeft=A.left,A.element.scrollTop=A.top}Wt=!!yn,vn=yn=null,e.current=n,Us=i;do{try{for(_=e;null!==Us;){var w=Us.effectTag;if(36&w&&ss(_,Us.alternate,Us),128&w){x=void 0;var C=Us.ref;if(null!==C){var E=Us.stateNode;Us.tag,x=E,"function"==typeof C?C(x):C.current=x}}Us=Us.nextEffect}}catch(e){if(null===Us)throw Error(a(330));Al(Us,e),Us=Us.nextEffect}}while(null!==Us);Us=null,Li(),Ts=o}else e.current=n;if(Gs)Gs=!1,qs=e,Ws=t;else for(Us=i;null!==Us;)t=Us.nextEffect,Us.nextEffect=null,Us=t;if(0===(t=e.firstPendingTime)&&(Vs=null),1073741823===t?e===Xs?$s++:($s=0,Xs=e):$s=0,"function"==typeof El&&El(n.stateNode,r),tl(e),Ns)throw Ns=!1,e=js,js=null,e;return 0!=(8&Ts)||$i(),null}function vl(){for(;null!==Us;){var e=Us.effectTag;0!=(256&e)&&is(Us.alternate,Us),0==(512&e)||Gs||(Gs=!0,Wi(97,(function(){return bl(),null}))),Us=Us.nextEffect}}function bl(){if(90!==Ws){var e=97<Ws?97:Ws;return Ws=90,qi(e,_l)}}function _l(){if(null===qs)return!1;var e=qs;if(qs=null,0!=(48&Ts))throw Error(a(331));var t=Ts;for(Ts|=32,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:os(5,n),as(5,n)}}catch(t){if(null===e)throw Error(a(330));Al(e,t)}n=e.nextEffect,e.nextEffect=null,e=n}return Ts=t,$i(),!0}function xl(e,t,n){uo(e,t=vs(e,t=es(n,t),1073741823)),null!==(e=Qs(e,1073741823))&&tl(e)}function Al(e,t){if(3===e.tag)xl(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){xl(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Vs||!Vs.has(r))){uo(n,e=bs(n,e=es(t,e),1073741823)),null!==(n=Qs(n,1073741823))&&tl(n);break}}n=n.return}}function wl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),Bs===e&&Ms===n?Ps===Ss||Ps===Es&&1073741823===Os&&ji()-Fs<500?al(e,Ms):Rs=!0:Ll(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,tl(e)))}function Cl(e,t){var n=e.stateNode;null!==n&&n.delete(t),0==(t=0)&&(t=Ks(t=Ys(),e,null)),null!==(e=Qs(e,t))&&tl(e)}_s=function(e,t,n){var r=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||di.current)Ia=!0;else{if(r<n){switch(Ia=!1,t.tag){case 3:ja(t),Ma();break;case 5:if(Lo(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:yi(t.type)&&xi(t);break;case 4:Do(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value,i=t.type._context,hi(Ki,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Ha(e,t,n):(hi(Fo,1&Fo.current),null!==(t=Ya(e,t,n))?t.sibling:null);hi(Fo,1&Fo.current);break;case 19:if(r=t.childExpirationTime>=n,0!=(64&e.effectTag)){if(r)return Za(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),hi(Fo,Fo.current),!r)return null}return Ya(e,t,n)}Ia=!1}}else Ia=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=gi(t,pi.current),io(t,n),i=Yo(null,t,r,e,i,n),t.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,yi(r)){var o=!0;xi(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,so(t);var s=r.getDerivedStateFromProps;"function"==typeof s&&yo(t,r,s,e),i.updater=vo,t.stateNode=i,i._reactInternalFiber=t,Ao(t,r,e,n),t=Na(null,t,r,!0,o,n)}else t.tag=0,Oa(null,t,i,n),t=t.child;return t;case 16:e:{if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,o=t.tag=function(e){if("function"==typeof e)return kl(e)?1:0;if(null!=e){if((e=e.$$typeof)===le)return 11;if(e===he)return 14}return 2}(i),e=Yi(i,e),o){case 0:t=Fa(null,t,i,e,n);break e;case 1:t=Ua(null,t,i,e,n);break e;case 11:t=Da(null,t,i,e,n);break e;case 14:t=za(null,t,i,Yi(i.type,e),r,n);break e}throw Error(a(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Fa(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ua(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 3:if(ja(t),r=t.updateQueue,null===e||null===r)throw Error(a(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,lo(e,t),fo(t,r,null,n),(r=t.memoizedState.element)===i)Ma(),t=Ya(e,t,n);else{if((i=t.stateNode.hydrate)&&(wa=wn(t.stateNode.containerInfo.firstChild),Aa=t,i=Ca=!0),i)for(n=Bo(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Oa(e,t,r,n),Ma();t=t.child}return t;case 5:return Lo(t),null===e&&Ta(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,_n(r,i)?s=null:null!==o&&_n(r,o)&&(t.effectTag|=16),Ra(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Oa(e,t,s,n),t=t.child),t;case 6:return null===e&&Ta(t),null;case 13:return Ha(e,t,n);case 4:return Do(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=To(t,null,r,n):Oa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Da(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 7:return Oa(e,t,t.pendingProps,n),t.child;case 8:case 12:return Oa(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value;var l=t.type._context;if(hi(Ki,l._currentValue),l._currentValue=o,null!==s)if(l=s.value,0==(o=Ur(l,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(l,o):1073741823))){if(s.children===i.children&&!di.current){t=Ya(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var c=l.dependencies;if(null!==c){s=l.child;for(var u=c.firstContext;null!==u;){if(u.context===r&&0!=(u.observedBits&o)){1===l.tag&&((u=co(n,null)).tag=2,uo(l,u)),l.expirationTime<n&&(l.expirationTime=n),null!==(u=l.alternate)&&u.expirationTime<n&&(u.expirationTime=n),ro(l.return,n),c.expirationTime<n&&(c.expirationTime=n);break}u=u.next}}else s=10===l.tag&&l.type===t.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===t){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}Oa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,io(t,n),r=r(i=oo(i,o.unstable_observedBits)),t.effectTag|=1,Oa(e,t,r,n),t.child;case 14:return o=Yi(i=t.type,t.pendingProps),za(e,t,i,o=Yi(i.type,o),r,n);case 15:return La(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,yi(r)?(e=!0,xi(t)):e=!1,io(t,n),_o(t,r,i),Ao(t,r,i,n),Na(null,t,r,!0,e,n);case 19:return Za(e,t,n)}throw Error(a(156,t.tag))};var El=null,Sl=null;function Tl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Bl(e,t,n,r){return new Tl(e,t,n,r)}function kl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ml(e,t){var n=e.alternate;return null===n?((n=Bl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pl(e,t,n,r,i,o){var s=2;if(r=e,"function"==typeof e)kl(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case ne:return Il(n.children,i,o,t);case se:s=8,i|=7;break;case re:s=8,i|=1;break;case ie:return(e=Bl(12,n,t,8|i)).elementType=ie,e.type=ie,e.expirationTime=o,e;case ce:return(e=Bl(13,n,t,i)).type=ce,e.elementType=ce,e.expirationTime=o,e;case ue:return(e=Bl(19,n,t,i)).elementType=ue,e.expirationTime=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case oe:s=10;break e;case ae:s=9;break e;case le:s=11;break e;case he:s=14;break e;case fe:s=16,r=null;break e;case pe:s=22;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Bl(s,n,t,i)).elementType=e,t.type=r,t.expirationTime=o,t}function Il(e,t,n,r){return(e=Bl(7,e,r,t)).expirationTime=n,e}function Ol(e,t,n){return(e=Bl(6,e,null,t)).expirationTime=n,e}function Dl(e,t,n){return(t=Bl(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zl(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Ll(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function Rl(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Fl(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Ul(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function Nl(e,t,n,r){var i=t.current,o=Ys(),s=mo.suspense;o=Ks(o,i,s);e:if(n){t:{if(Je(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(a(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(yi(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(a(171))}if(1===n.tag){var c=n.type;if(yi(c)){n=_i(n,c,l);break e}}n=l}else n=fi;return null===t.context?t.context=n:t.pendingContext=n,(t=co(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),uo(i,t),Js(i,o),o}function jl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vl(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function Gl(e,t){Vl(e,t),(e=e.alternate)&&Vl(e,t)}function ql(e,t,n){var r=new zl(e,t,n=null!=n&&!0===n.hydrate),i=Bl(3,null,null,2===t?7:1===t?3:0);r.current=i,i.stateNode=r,so(i),e[Bn]=r.current,n&&0!==t&&function(e,t){var n=Ke(t);Et.forEach((function(e){pt(e,t,n)})),St.forEach((function(e){pt(e,t,n)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function Wl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Hl(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"==typeof i){var s=i;i=function(){var e=jl(a);s.call(e)}}Nl(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ql(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"==typeof i){var l=i;i=function(){var e=jl(a);l.call(e)}}ol((function(){Nl(t,a,e,i)}))}return jl(a)}function $l(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:te,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Xl(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Wl(t))throw Error(a(200));return $l(e,t,null,n)}ql.prototype.render=function(e){Nl(e,this._internalRoot,null,null)},ql.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Nl(null,e,null,(function(){t[Bn]=null}))},dt=function(e){if(13===e.tag){var t=Zi(Ys(),150,100);Js(e,t),Gl(e,t)}},mt=function(e){13===e.tag&&(Js(e,3),Gl(e,3))},gt=function(e){if(13===e.tag){var t=Ys();Js(e,t=Ks(t,e,null)),Gl(e,t)}},B=function(e,t,n){switch(t){case"input":if(Ee(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=In(r);if(!i)throw Error(a(90));xe(r),Ee(r,i)}}}break;case"textarea":Ie(e,n);break;case"select":null!=(t=n.value)&&ke(e,!!n.multiple,t,!1)}},D=il,z=function(e,t,n,r,i){var o=Ts;Ts|=4;try{return qi(98,e.bind(null,t,n,r,i))}finally{0===(Ts=o)&&$i()}},L=function(){0==(49&Ts)&&(function(){if(null!==Hs){var e=Hs;Hs=null,e.forEach((function(e,t){Ul(t,e),tl(t)})),$i()}}(),bl())},R=function(e,t){var n=Ts;Ts|=2;try{return e(t)}finally{0===(Ts=n)&&$i()}};var Zl={Events:[Mn,Pn,In,S,w,Un,function(e){rt(e,Fn)},I,O,Yt,at,bl,{current:!1}]};!function(e){var t=e.findFiberByHostInstance;!function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);El=function(e){try{t.onCommitFiberRoot(n,e,void 0,64==(64&e.current.effectTag))}catch(e){}},Sl=function(e){try{t.onCommitFiberUnmount(n,e)}catch(e){}}}catch(e){}}(i({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Y.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=tt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:kn,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zl,t.createPortal=Xl,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"==typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return null===(e=tt(t))?null:e.stateNode},t.flushSync=function(e,t){if(0!=(48&Ts))throw Error(a(187));var n=Ts;Ts|=1;try{return qi(99,e.bind(null,t))}finally{Ts=n,$i()}},t.hydrate=function(e,t,n){if(!Wl(t))throw Error(a(200));return Hl(null,e,t,!0,n)},t.render=function(e,t,n){if(!Wl(t))throw Error(a(200));return Hl(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Wl(e))throw Error(a(40));return!!e._reactRootContainer&&(ol((function(){Hl(null,null,e,!1,(function(){e._reactRootContainer=null,e[Bn]=null}))})),!0)},t.unstable_batchedUpdates=il,t.unstable_createPortal=function(e,t){return Xl(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Wl(n))throw Error(a(200));if(null==e||void 0===e._reactInternalFiber)throw Error(a(38));return Hl(e,t,n,!1,r)},t.version="16.14.0"},73935:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(64448)},75980:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=s(n(67294)),a=s(n(45697));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.displayName="FontAwesome",e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"render",value:function(){var e=this.props,t=e.border,n=e.cssModule,i=e.className,a=e.fixedWidth,s=e.flip,l=e.inverse,c=e.name,u=e.pulse,h=e.rotate,f=e.size,p=e.spin,d=e.stack,m=e.tag,g=void 0===m?"span":m,y=e.ariaLabel,v=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["border","cssModule","className","fixedWidth","flip","inverse","name","pulse","rotate","size","spin","stack","tag","ariaLabel"]),b=y?{"aria-label":y}:{"aria-hidden":!0},_=[];return n?(_.push(n.fa),_.push(n["fa-"+c]),f&&_.push(n["fa-"+f]),p&&_.push(n["fa-spin"]),u&&_.push(n["fa-pulse"]),t&&_.push(n["fa-border"]),a&&_.push(n["fa-fw"]),l&&_.push(n["fa-inverse"]),s&&_.push(n["fa-flip-"+s]),h&&_.push(n["fa-rotate-"+h]),d&&_.push(n["fa-stack-"+d])):(_.push("fa"),_.push("fa-"+c),f&&_.push("fa-"+f),p&&_.push("fa-spin"),u&&_.push("fa-pulse"),t&&_.push("fa-border"),a&&_.push("fa-fw"),l&&_.push("fa-inverse"),s&&_.push("fa-flip-"+s),h&&_.push("fa-rotate-"+h),d&&_.push("fa-stack-"+d)),i&&_.push(i),o.default.createElement(g,r({},v,b,{className:_.join(" ")}))}}]),t}(o.default.Component);l.propTypes={ariaLabel:a.default.string,border:a.default.bool,className:a.default.string,cssModule:a.default.object,fixedWidth:a.default.bool,flip:a.default.oneOf(["horizontal","vertical"]),inverse:a.default.bool,name:a.default.string.isRequired,pulse:a.default.bool,rotate:a.default.oneOf([90,180,270]),size:a.default.oneOf(["lg","2x","3x","4x","5x"]),spin:a.default.bool,stack:a.default.oneOf(["1x","2x"]),tag:a.default.string},t.default=l,e.exports=t.default},69921:(e,t)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,d=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,_=n?Symbol.for("react.scope"):60119;function x(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case h:case o:case s:case a:case p:return e;default:switch(e=e&&e.$$typeof){case c:case f:case g:case m:case l:return e;default:return t}}case i:return t}}}function A(e){return x(e)===h}t.AsyncMode=u,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=f,t.Fragment=o,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=s,t.StrictMode=a,t.Suspense=p,t.isAsyncMode=function(e){return A(e)||x(e)===u},t.isConcurrentMode=A,t.isContextConsumer=function(e){return x(e)===c},t.isContextProvider=function(e){return x(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return x(e)===f},t.isFragment=function(e){return x(e)===o},t.isLazy=function(e){return x(e)===g},t.isMemo=function(e){return x(e)===m},t.isPortal=function(e){return x(e)===i},t.isProfiler=function(e){return x(e)===s},t.isStrictMode=function(e){return x(e)===a},t.isSuspense=function(e){return x(e)===p},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===h||e===s||e===a||e===p||e===d||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===f||e.$$typeof===v||e.$$typeof===b||e.$$typeof===_||e.$$typeof===y)},t.typeOf=x},59864:(e,t,n)=>{"use strict";e.exports=n(69921)},46871:(e,t,n)=>{"use strict";function r(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function i(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!=n?n:null}.bind(this))}function o(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}function a(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var n=null,a=null,s=null;if("function"==typeof t.componentWillMount?n="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?a="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(a="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?s="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(s="UNSAFE_componentWillUpdate"),null!==n||null!==a||null!==s){var l=e.displayName||e.name,c="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+l+" uses "+c+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==a?"\n  "+a:"")+(null!==s?"\n  "+s:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=r,t.componentWillReceiveProps=i),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=o;var u=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;u.call(this,e,t,r)}}return e}n.r(t),n.d(t,{polyfill:()=>a}),r.__suppressDeprecationWarning=!0,i.__suppressDeprecationWarning=!0,o.__suppressDeprecationWarning=!0},89144:(e,t,n)=>{"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function o(e){return e&&e.__esModule?e:{default:e}}var a=o(n(94846)),s=o(n(79483)),l=o(n(2835)),c=o(n(34246)),u=o(n(54087)),h=o(n(27739)),f=o(n(67294)),p=o(n(45697)),d=1e3/60,m=function(e){function t(n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.call(this,n),this.wasAnimating=!1,this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyle=null,this.clearUnreadPropStyle=function(e){var t=!1,n=i.state,o=n.currentStyle,a=n.currentVelocity,s=n.lastIdealStyle,l=n.lastIdealVelocity;for(var c in e)if(Object.prototype.hasOwnProperty.call(e,c)){var u=e[c];"number"==typeof u&&(t||(t=!0,o=r({},o),a=r({},a),s=r({},s),l=r({},l)),o[c]=u,a[c]=0,s[c]=u,l[c]=0)}t&&i.setState({currentStyle:o,currentVelocity:a,lastIdealStyle:s,lastIdealVelocity:l})},this.startAnimationIfNecessary=function(){i.animationID=u.default((function(e){var t=i.props.style;if(h.default(i.state.currentStyle,t,i.state.currentVelocity))return i.wasAnimating&&i.props.onRest&&i.props.onRest(),i.animationID=null,i.wasAnimating=!1,void(i.accumulatedTime=0);i.wasAnimating=!0;var n=e||c.default(),r=n-i.prevTime;if(i.prevTime=n,i.accumulatedTime=i.accumulatedTime+r,i.accumulatedTime>10*d&&(i.accumulatedTime=0),0===i.accumulatedTime)return i.animationID=null,void i.startAnimationIfNecessary();var o=(i.accumulatedTime-Math.floor(i.accumulatedTime/d)*d)/d,a=Math.floor(i.accumulatedTime/d),s={},u={},f={},p={};for(var m in t)if(Object.prototype.hasOwnProperty.call(t,m)){var g=t[m];if("number"==typeof g)f[m]=g,p[m]=0,s[m]=g,u[m]=0;else{for(var y=i.state.lastIdealStyle[m],v=i.state.lastIdealVelocity[m],b=0;b<a;b++){var _=l.default(d/1e3,y,v,g.val,g.stiffness,g.damping,g.precision);y=_[0],v=_[1]}var x=l.default(d/1e3,y,v,g.val,g.stiffness,g.damping,g.precision),A=x[0],w=x[1];f[m]=y+(A-y)*o,p[m]=v+(w-v)*o,s[m]=y,u[m]=v}}i.animationID=null,i.accumulatedTime-=a*d,i.setState({currentStyle:f,currentVelocity:p,lastIdealStyle:s,lastIdealVelocity:u}),i.unreadPropStyle=null,i.startAnimationIfNecessary()}))},this.state=this.defaultState()}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,null,[{key:"propTypes",value:{defaultStyle:p.default.objectOf(p.default.number),style:p.default.objectOf(p.default.oneOfType([p.default.number,p.default.object])).isRequired,children:p.default.func.isRequired,onRest:p.default.func},enumerable:!0}]),t.prototype.defaultState=function(){var e=this.props,t=e.defaultStyle,n=e.style,r=t||s.default(n),i=a.default(r);return{currentStyle:r,currentVelocity:i,lastIdealStyle:r,lastIdealVelocity:i}},t.prototype.componentDidMount=function(){this.prevTime=c.default(),this.startAnimationIfNecessary()},t.prototype.componentWillReceiveProps=function(e){null!=this.unreadPropStyle&&this.clearUnreadPropStyle(this.unreadPropStyle),this.unreadPropStyle=e.style,null==this.animationID&&(this.prevTime=c.default(),this.startAnimationIfNecessary())},t.prototype.componentWillUnmount=function(){null!=this.animationID&&(u.default.cancel(this.animationID),this.animationID=null)},t.prototype.render=function(){var e=this.props.children(this.state.currentStyle);return e&&f.default.Children.only(e)},t}(f.default.Component);t.default=m,e.exports=t.default},26506:(e,t,n)=>{"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function o(e){return e&&e.__esModule?e:{default:e}}var a=o(n(94846)),s=o(n(79483)),l=o(n(2835)),c=o(n(34246)),u=o(n(54087)),h=o(n(27739)),f=o(n(67294)),p=o(n(45697)),d=1e3/60,m=function(e){function t(n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.call(this,n),this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyles=null,this.clearUnreadPropStyle=function(e){for(var t=i.state,n=t.currentStyles,o=t.currentVelocities,a=t.lastIdealStyles,s=t.lastIdealVelocities,l=!1,c=0;c<e.length;c++){var u=e[c],h=!1;for(var f in u)if(Object.prototype.hasOwnProperty.call(u,f)){var p=u[f];"number"==typeof p&&(h||(h=!0,l=!0,n[c]=r({},n[c]),o[c]=r({},o[c]),a[c]=r({},a[c]),s[c]=r({},s[c])),n[c][f]=p,o[c][f]=0,a[c][f]=p,s[c][f]=0)}}l&&i.setState({currentStyles:n,currentVelocities:o,lastIdealStyles:a,lastIdealVelocities:s})},this.startAnimationIfNecessary=function(){i.animationID=u.default((function(e){var t=i.props.styles(i.state.lastIdealStyles);if(function(e,t,n){for(var r=0;r<e.length;r++)if(!h.default(e[r],t[r],n[r]))return!1;return!0}(i.state.currentStyles,t,i.state.currentVelocities))return i.animationID=null,void(i.accumulatedTime=0);var n=e||c.default(),r=n-i.prevTime;if(i.prevTime=n,i.accumulatedTime=i.accumulatedTime+r,i.accumulatedTime>10*d&&(i.accumulatedTime=0),0===i.accumulatedTime)return i.animationID=null,void i.startAnimationIfNecessary();for(var o=(i.accumulatedTime-Math.floor(i.accumulatedTime/d)*d)/d,a=Math.floor(i.accumulatedTime/d),s=[],u=[],f=[],p=[],m=0;m<t.length;m++){var g=t[m],y={},v={},b={},_={};for(var x in g)if(Object.prototype.hasOwnProperty.call(g,x)){var A=g[x];if("number"==typeof A)y[x]=A,v[x]=0,b[x]=A,_[x]=0;else{for(var w=i.state.lastIdealStyles[m][x],C=i.state.lastIdealVelocities[m][x],E=0;E<a;E++){var S=l.default(d/1e3,w,C,A.val,A.stiffness,A.damping,A.precision);w=S[0],C=S[1]}var T=l.default(d/1e3,w,C,A.val,A.stiffness,A.damping,A.precision),B=T[0],k=T[1];y[x]=w+(B-w)*o,v[x]=C+(k-C)*o,b[x]=w,_[x]=C}}f[m]=y,p[m]=v,s[m]=b,u[m]=_}i.animationID=null,i.accumulatedTime-=a*d,i.setState({currentStyles:f,currentVelocities:p,lastIdealStyles:s,lastIdealVelocities:u}),i.unreadPropStyles=null,i.startAnimationIfNecessary()}))},this.state=this.defaultState()}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,null,[{key:"propTypes",value:{defaultStyles:p.default.arrayOf(p.default.objectOf(p.default.number)),styles:p.default.func.isRequired,children:p.default.func.isRequired},enumerable:!0}]),t.prototype.defaultState=function(){var e=this.props,t=e.defaultStyles,n=e.styles,r=t||n().map(s.default),i=r.map((function(e){return a.default(e)}));return{currentStyles:r,currentVelocities:i,lastIdealStyles:r,lastIdealVelocities:i}},t.prototype.componentDidMount=function(){this.prevTime=c.default(),this.startAnimationIfNecessary()},t.prototype.componentWillReceiveProps=function(e){null!=this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles),this.unreadPropStyles=e.styles(this.state.lastIdealStyles),null==this.animationID&&(this.prevTime=c.default(),this.startAnimationIfNecessary())},t.prototype.componentWillUnmount=function(){null!=this.animationID&&(u.default.cancel(this.animationID),this.animationID=null)},t.prototype.render=function(){var e=this.props.children(this.state.currentStyles);return e&&f.default.Children.only(e)},t}(f.default.Component);t.default=m,e.exports=t.default},921:(e,t,n)=>{"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function o(e){return e&&e.__esModule?e:{default:e}}var a=o(n(94846)),s=o(n(79483)),l=o(n(2835)),c=o(n(48505)),u=o(n(34246)),h=o(n(54087)),f=o(n(27739)),p=o(n(67294)),d=o(n(45697)),m=1e3/60;function g(e,t,n){var r=t;return null==r?e.map((function(e,t){return{key:e.key,data:e.data,style:n[t]}})):e.map((function(e,t){for(var i=0;i<r.length;i++)if(r[i].key===e.key)return{key:r[i].key,data:r[i].data,style:n[t]};return{key:e.key,data:e.data,style:n[t]}}))}function y(e,t,n,r,i,o,s,l,u){for(var h=c.default(r,i,(function(e,r){var i=t(r);return null==i||f.default(o[e],i,s[e])?(n({key:r.key,data:r.data}),null):{key:r.key,data:r.data,style:i}})),p=[],d=[],m=[],g=[],y=0;y<h.length;y++){for(var v=h[y],b=null,_=0;_<r.length;_++)if(r[_].key===v.key){b=_;break}if(null==b){var x=e(v);p[y]=x,m[y]=x;var A=a.default(v.style);d[y]=A,g[y]=A}else p[y]=o[b],m[y]=l[b],d[y]=s[b],g[y]=u[b]}return[h,p,d,m,g]}var v=function(e){function t(n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.call(this,n),this.unmounting=!1,this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyles=null,this.clearUnreadPropStyle=function(e){for(var t=y(i.props.willEnter,i.props.willLeave,i.props.didLeave,i.state.mergedPropsStyles,e,i.state.currentStyles,i.state.currentVelocities,i.state.lastIdealStyles,i.state.lastIdealVelocities),n=t[0],o=t[1],a=t[2],s=t[3],l=t[4],c=0;c<e.length;c++){var u=e[c].style,h=!1;for(var f in u)if(Object.prototype.hasOwnProperty.call(u,f)){var p=u[f];"number"==typeof p&&(h||(h=!0,o[c]=r({},o[c]),a[c]=r({},a[c]),s[c]=r({},s[c]),l[c]=r({},l[c]),n[c]={key:n[c].key,data:n[c].data,style:r({},n[c].style)}),o[c][f]=p,a[c][f]=0,s[c][f]=p,l[c][f]=0,n[c].style[f]=p)}}i.setState({currentStyles:o,currentVelocities:a,mergedPropsStyles:n,lastIdealStyles:s,lastIdealVelocities:l})},this.startAnimationIfNecessary=function(){i.unmounting||(i.animationID=h.default((function(e){if(!i.unmounting){var t=i.props.styles,n="function"==typeof t?t(g(i.state.mergedPropsStyles,i.unreadPropStyles,i.state.lastIdealStyles)):t;if(function(e,t,n,r){if(r.length!==t.length)return!1;for(var i=0;i<r.length;i++)if(r[i].key!==t[i].key)return!1;for(i=0;i<r.length;i++)if(!f.default(e[i],t[i].style,n[i]))return!1;return!0}(i.state.currentStyles,n,i.state.currentVelocities,i.state.mergedPropsStyles))return i.animationID=null,void(i.accumulatedTime=0);var r=e||u.default(),o=r-i.prevTime;if(i.prevTime=r,i.accumulatedTime=i.accumulatedTime+o,i.accumulatedTime>10*m&&(i.accumulatedTime=0),0===i.accumulatedTime)return i.animationID=null,void i.startAnimationIfNecessary();for(var a=(i.accumulatedTime-Math.floor(i.accumulatedTime/m)*m)/m,s=Math.floor(i.accumulatedTime/m),c=y(i.props.willEnter,i.props.willLeave,i.props.didLeave,i.state.mergedPropsStyles,n,i.state.currentStyles,i.state.currentVelocities,i.state.lastIdealStyles,i.state.lastIdealVelocities),h=c[0],p=c[1],d=c[2],v=c[3],b=c[4],_=0;_<h.length;_++){var x=h[_].style,A={},w={},C={},E={};for(var S in x)if(Object.prototype.hasOwnProperty.call(x,S)){var T=x[S];if("number"==typeof T)A[S]=T,w[S]=0,C[S]=T,E[S]=0;else{for(var B=v[_][S],k=b[_][S],M=0;M<s;M++){var P=l.default(m/1e3,B,k,T.val,T.stiffness,T.damping,T.precision);B=P[0],k=P[1]}var I=l.default(m/1e3,B,k,T.val,T.stiffness,T.damping,T.precision),O=I[0],D=I[1];A[S]=B+(O-B)*a,w[S]=k+(D-k)*a,C[S]=B,E[S]=k}}v[_]=C,b[_]=E,p[_]=A,d[_]=w}i.animationID=null,i.accumulatedTime-=s*m,i.setState({currentStyles:p,currentVelocities:d,lastIdealStyles:v,lastIdealVelocities:b,mergedPropsStyles:h}),i.unreadPropStyles=null,i.startAnimationIfNecessary()}})))},this.state=this.defaultState()}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,null,[{key:"propTypes",value:{defaultStyles:d.default.arrayOf(d.default.shape({key:d.default.string.isRequired,data:d.default.any,style:d.default.objectOf(d.default.number).isRequired})),styles:d.default.oneOfType([d.default.func,d.default.arrayOf(d.default.shape({key:d.default.string.isRequired,data:d.default.any,style:d.default.objectOf(d.default.oneOfType([d.default.number,d.default.object])).isRequired}))]).isRequired,children:d.default.func.isRequired,willEnter:d.default.func,willLeave:d.default.func,didLeave:d.default.func},enumerable:!0},{key:"defaultProps",value:{willEnter:function(e){return s.default(e.style)},willLeave:function(){return null},didLeave:function(){}},enumerable:!0}]),t.prototype.defaultState=function(){var e,t=this.props,n=t.defaultStyles,r=t.styles,i=t.willEnter,o=t.willLeave,l=t.didLeave,c="function"==typeof r?r(n):r;e=null==n?c:n.map((function(e){for(var t=0;t<c.length;t++)if(c[t].key===e.key)return c[t];return e}));var u=null==n?c.map((function(e){return s.default(e.style)})):n.map((function(e){return s.default(e.style)})),h=null==n?c.map((function(e){return a.default(e.style)})):n.map((function(e){return a.default(e.style)})),f=y(i,o,l,e,c,u,h,u,h),p=f[0];return{currentStyles:f[1],currentVelocities:f[2],lastIdealStyles:f[3],lastIdealVelocities:f[4],mergedPropsStyles:p}},t.prototype.componentDidMount=function(){this.prevTime=u.default(),this.startAnimationIfNecessary()},t.prototype.componentWillReceiveProps=function(e){this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles);var t=e.styles;this.unreadPropStyles="function"==typeof t?t(g(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.lastIdealStyles)):t,null==this.animationID&&(this.prevTime=u.default(),this.startAnimationIfNecessary())},t.prototype.componentWillUnmount=function(){this.unmounting=!0,null!=this.animationID&&(h.default.cancel(this.animationID),this.animationID=null)},t.prototype.render=function(){var e=g(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.currentStyles),t=this.props.children(e);return t&&p.default.Children.only(t)},t}(p.default.Component);t.default=v,e.exports=t.default},94846:(e,t)=>{"use strict";t.__esModule=!0,t.default=function(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=0);return t},e.exports=t.default},48505:(e,t)=>{"use strict";t.__esModule=!0,t.default=function(e,t,n){for(var r={},i=0;i<e.length;i++)r[e[i].key]=i;var o={};for(i=0;i<t.length;i++)o[t[i].key]=i;var a=[];for(i=0;i<t.length;i++)a[i]=t[i];for(i=0;i<e.length;i++)if(!Object.prototype.hasOwnProperty.call(o,e[i].key)){var s=n(i,e[i]);null!=s&&a.push(s)}return a.sort((function(e,n){var i=o[e.key],a=o[n.key],s=r[e.key],l=r[n.key];if(null!=i&&null!=a)return o[e.key]-o[n.key];if(null!=s&&null!=l)return r[e.key]-r[n.key];if(null!=i){for(var c=0;c<t.length;c++){var u=t[c].key;if(Object.prototype.hasOwnProperty.call(r,u)){if(i<o[u]&&l>r[u])return-1;if(i>o[u]&&l<r[u])return 1}}return 1}for(c=0;c<t.length;c++)if(u=t[c].key,Object.prototype.hasOwnProperty.call(r,u)){if(a<o[u]&&s>r[u])return 1;if(a>o[u]&&s<r[u])return-1}return-1}))},e.exports=t.default},72392:(e,t)=>{"use strict";t.__esModule=!0,t.default={noWobble:{stiffness:170,damping:26},gentle:{stiffness:120,damping:14},wobbly:{stiffness:180,damping:12},stiff:{stiffness:210,damping:20}},e.exports=t.default},37727:(e,t,n)=>{"use strict";function r(e){return e&&e.__esModule?e.default:e}r(n(89144)),r(n(26506)),r(n(921)),r(n(20124)),r(n(72392)),r(n(79483)),r(n(49566))},49566:(e,t)=>{"use strict";t.__esModule=!0,t.default=function(){},e.exports=t.default},27739:(e,t)=>{"use strict";t.__esModule=!0,t.default=function(e,t,n){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(0!==n[r])return!1;var i="number"==typeof t[r]?t[r]:t[r].val;if(e[r]!==i)return!1}return!0},e.exports=t.default},20124:(e,t,n)=>{"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e,t){return r({},a,t,{val:e})};var i,o=(i=n(72392))&&i.__esModule?i:{default:i},a=r({},o.default.noWobble,{precision:.01});e.exports=t.default},2835:(e,t)=>{"use strict";t.__esModule=!0,t.default=function(e,t,r,i,o,a,s){var l=r+(-o*(t-i)+-a*r)*e,c=t+l*e;return Math.abs(l)<s&&Math.abs(c-i)<s?(n[0]=i,n[1]=0,n):(n[0]=c,n[1]=l,n)};var n=[0,0];e.exports=t.default},79483:(e,t)=>{"use strict";t.__esModule=!0,t.default=function(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]="number"==typeof e[n]?e[n]:e[n].val);return t},e.exports=t.default},34246:function(e){(function(){var t,n,r;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(e.exports=function(){return(t()-r)/1e6},n=process.hrtime,r=(t=function(){var e;return 1e9*(e=n())[0]+e[1]})()):Date.now?(e.exports=function(){return Date.now()-r},r=Date.now()):(e.exports=function(){return(new Date).getTime()-r},r=(new Date).getTime())}).call(this)},88359:(e,t)=>{"use strict";var n=60103,r=60106,i=60107,o=60108,a=60114,s=60109,l=60110,c=60112,u=60113,h=60120,f=60115,p=60116;if("function"==typeof Symbol&&Symbol.for){var d=Symbol.for;n=d("react.element"),r=d("react.portal"),i=d("react.fragment"),o=d("react.strict_mode"),a=d("react.profiler"),s=d("react.provider"),l=d("react.context"),c=d("react.forward_ref"),u=d("react.suspense"),h=d("react.suspense_list"),f=d("react.memo"),p=d("react.lazy"),d("react.block"),d("react.server.block"),d("react.fundamental"),d("react.debug_trace_mode"),d("react.legacy_hidden")}t.isContextConsumer=function(e){return function(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case a:case o:case u:case h:return e;default:switch(e=e&&e.$$typeof){case l:case c:case p:case f:case s:return e;default:return t}}case r:return t}}}(e)===l}},72973:(e,t,n)=>{"use strict";e.exports=n(88359)},92810:(e,t,n)=>{"use strict";t.__esModule=!0,t.default=void 0,function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(45697));var r=s(n(98141)),i=s(n(10602)),o=s(n(67294)),a=s(n(32096));function s(e){return e&&e.__esModule?e:{default:e}}function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}n(29806);var c=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,r.default)(e,t)}))},u=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,i.default)(e,t)}))},h=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).onEnter=function(e,n){var r=t.getClassNames(n?"appear":"enter").className;t.removeClasses(e,"exit"),c(e,r),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=t.getClassNames(n?"appear":"enter").activeClassName;t.reflowAndAddClass(e,r),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=t.getClassNames("appear").doneClassName,i=t.getClassNames("enter").doneClassName,o=n?r+" "+i:i;t.removeClasses(e,n?"appear":"enter"),c(e,o),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.getClassNames("exit").className;t.removeClasses(e,"appear"),t.removeClasses(e,"enter"),c(e,n),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.getClassNames("exit").activeClassName;t.reflowAndAddClass(e,n),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.getClassNames("exit").doneClassName;t.removeClasses(e,"exit"),c(e,n),t.props.onExited&&t.props.onExited(e)},t.getClassNames=function(e){var n=t.props.classNames,r="string"==typeof n,i=r?(r&&n?n+"-":"")+e:n[e];return{className:i,activeClassName:r?i+"-active":n[e+"Active"],doneClassName:r?i+"-done":n[e+"Done"]}},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.removeClasses=function(e,t){var n=this.getClassNames(t),r=n.className,i=n.activeClassName,o=n.doneClassName;r&&u(e,r),i&&u(e,i),o&&u(e,o)},i.reflowAndAddClass=function(e,t){t&&(e&&e.scrollTop,c(e,t))},i.render=function(){var e=l({},this.props);return delete e.classNames,o.default.createElement(a.default,l({},e,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},r}(o.default.Component);h.defaultProps={classNames:""},h.propTypes={};var f=h;t.default=f,e.exports=t.default},17557:(e,t,n)=>{"use strict";t.__esModule=!0,t.default=void 0,a(n(45697));var r=a(n(67294)),i=n(73935),o=a(n(57114));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){var t,n;function a(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleEnter=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onEnter",0,n)},t.handleEntering=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onEntering",0,n)},t.handleEntered=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onEntered",0,n)},t.handleExit=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onExit",1,n)},t.handleExiting=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onExiting",1,n)},t.handleExited=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onExited",1,n)},t}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var s=a.prototype;return s.handleLifecycle=function(e,t,n){var o,a=this.props.children,s=r.default.Children.toArray(a)[t];s.props[e]&&(o=s.props)[e].apply(o,n),this.props[e]&&this.props[e]((0,i.findDOMNode)(this))},s.render=function(){var e=this.props,t=e.children,n=e.in,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["children","in"]),a=r.default.Children.toArray(t),s=a[0],l=a[1];return delete i.onEnter,delete i.onEntering,delete i.onEntered,delete i.onExit,delete i.onExiting,delete i.onExited,r.default.createElement(o.default,i,n?r.default.cloneElement(s,{key:"first",onEnter:this.handleEnter,onEntering:this.handleEntering,onEntered:this.handleEntered}):r.default.cloneElement(l,{key:"second",onEnter:this.handleExit,onEntering:this.handleExiting,onEntered:this.handleExited}))},a}(r.default.Component);s.propTypes={};var l=s;t.default=l,e.exports=t.default},32096:(e,t,n)=>{"use strict";t.__esModule=!0,t.default=t.EXITING=t.ENTERED=t.ENTERING=t.EXITED=t.UNMOUNTED=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(45697)),i=s(n(67294)),o=s(n(73935)),a=n(46871);function s(e){return e&&e.__esModule?e:{default:e}}n(29806);var l="unmounted";t.UNMOUNTED=l;var c="exited";t.EXITED=c;var u="entering";t.ENTERING=u;var h="entered";t.ENTERED=h;var f="exiting";t.EXITING=f;var p=function(e){var t,n;function r(t,n){var r;r=e.call(this,t,n)||this;var i,o=n.transitionGroup,a=o&&!o.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(i=c,r.appearStatus=u):i=h:i=t.unmountOnExit||t.mountOnEnter?l:c,r.state={status:i},r.nextCallback=null,r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.getChildContext=function(){return{transitionGroup:null}},r.getDerivedStateFromProps=function(e,t){return e.in&&t.status===l?{status:c}:null},a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==u&&n!==h&&(t=u):n!==u&&n!==h||(t=f)}this.updateStatus(!1,t)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},a.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t){this.cancelNextCallback();var n=o.default.findDOMNode(this);t===u?this.performEnter(n,e):this.performExit(n)}else this.props.unmountOnExit&&this.state.status===c&&this.setState({status:l})},a.performEnter=function(e,t){var n=this,r=this.props.enter,i=this.context.transitionGroup?this.context.transitionGroup.isMounting:t,o=this.getTimeouts(),a=i?o.appear:o.enter;t||r?(this.props.onEnter(e,i),this.safeSetState({status:u},(function(){n.props.onEntering(e,i),n.onTransitionEnd(e,a,(function(){n.safeSetState({status:h},(function(){n.props.onEntered(e,i)}))}))}))):this.safeSetState({status:h},(function(){n.props.onEntered(e)}))},a.performExit=function(e){var t=this,n=this.props.exit,r=this.getTimeouts();n?(this.props.onExit(e),this.safeSetState({status:f},(function(){t.props.onExiting(e),t.onTransitionEnd(e,r.exit,(function(){t.safeSetState({status:c},(function(){t.props.onExited(e)}))}))}))):this.safeSetState({status:c},(function(){t.props.onExited(e)}))},a.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},a.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},a.onTransitionEnd=function(e,t,n){this.setNextCallback(n);var r=null==t&&!this.props.addEndListener;e&&!r?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},a.render=function(){var e=this.state.status;if(e===l)return null;var t=this.props,n=t.children,r=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["children"]);if(delete r.in,delete r.mountOnEnter,delete r.unmountOnExit,delete r.appear,delete r.enter,delete r.exit,delete r.timeout,delete r.addEndListener,delete r.onEnter,delete r.onEntering,delete r.onEntered,delete r.onExit,delete r.onExiting,delete r.onExited,"function"==typeof n)return n(e,r);var o=i.default.Children.only(n);return i.default.cloneElement(o,r)},r}(i.default.Component);function d(){}p.contextTypes={transitionGroup:r.object},p.childContextTypes={transitionGroup:function(){}},p.propTypes={},p.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:d,onEntering:d,onEntered:d,onExit:d,onExiting:d,onExited:d},p.UNMOUNTED=0,p.EXITED=1,p.ENTERING=2,p.ENTERED=3,p.EXITING=4;var m=(0,a.polyfill)(p);t.default=m},57114:(e,t,n)=>{"use strict";t.__esModule=!0,t.default=void 0;var r=s(n(45697)),i=s(n(67294)),o=n(46871),a=n(4474);function s(e){return e&&e.__esModule?e:{default:e}}function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var u=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},h=function(e){var t,n;function r(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(c(c(r)));return r.state={handleExited:i,firstRender:!0},r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.getChildContext=function(){return{transitionGroup:{isMounting:!this.appeared}}},o.componentDidMount=function(){this.appeared=!0,this.mounted=!0},o.componentWillUnmount=function(){this.mounted=!1},r.getDerivedStateFromProps=function(e,t){var n=t.children,r=t.handleExited;return{children:t.firstRender?(0,a.getInitialChildMapping)(e,r):(0,a.getNextChildMapping)(e,n,r),firstRender:!1}},o.handleExited=function(e,t){var n=(0,a.getChildMapping)(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=l({},t.children);return delete n[e.key],{children:n}})))},o.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["component","childFactory"]),o=u(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?o:i.default.createElement(t,r,o)},r}(i.default.Component);h.childContextTypes={transitionGroup:r.default.object.isRequired},h.propTypes={},h.defaultProps={component:"div",childFactory:function(e){return e}};var f=(0,o.polyfill)(h);t.default=f,e.exports=t.default},29469:(e,t,n)=>{"use strict";var r=s(n(92810)),i=s(n(17557)),o=s(n(57114)),a=s(n(32096));function s(e){return e&&e.__esModule?e:{default:e}}e.exports={Transition:a.default,TransitionGroup:o.default,ReplaceTransition:i.default,CSSTransition:r.default}},4474:(e,t,n)=>{"use strict";t.__esModule=!0,t.getChildMapping=i,t.mergeChildMappings=o,t.getInitialChildMapping=function(e,t){return i(e.children,(function(n){return(0,r.cloneElement)(n,{onExited:t.bind(null,n),in:!0,appear:a(n,"appear",e),enter:a(n,"enter",e),exit:a(n,"exit",e)})}))},t.getNextChildMapping=function(e,t,n){var s=i(e.children),l=o(t,s);return Object.keys(l).forEach((function(i){var o=l[i];if((0,r.isValidElement)(o)){var c=i in t,u=i in s,h=t[i],f=(0,r.isValidElement)(h)&&!h.props.in;!u||c&&!f?u||!c||f?u&&c&&(0,r.isValidElement)(h)&&(l[i]=(0,r.cloneElement)(o,{onExited:n.bind(null,o),in:h.props.in,exit:a(o,"exit",e),enter:a(o,"enter",e)})):l[i]=(0,r.cloneElement)(o,{in:!1}):l[i]=(0,r.cloneElement)(o,{onExited:n.bind(null,o),in:!0,exit:a(o,"exit",e),enter:a(o,"enter",e)})}})),l};var r=n(67294);function i(e,t){var n=Object.create(null);return e&&r.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,r.isValidElement)(e)?t(e):e}(e)})),n}function o(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var a in e)a in t?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var l in t){if(i[l])for(r=0;r<i[l].length;r++){var c=i[l][r];s[i[l][r]]=n(c)}s[l]=n(l)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}function a(e,t,n){return null!=n[t]?n[t]:e.props[t]}},29806:(e,t,n)=>{"use strict";var r;t.__esModule=!0,t.classNamesShape=t.timeoutsShape=void 0,(r=n(45697))&&r.__esModule,t.timeoutsShape=null,t.classNamesShape=null},1174:(e,t,n)=>{"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=c(n(67294)),o=c(n(45697)),a=c(n(92381)),s=c(n(67980)),l=n(54726);function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}l.nameShape.isRequired,o.default.bool,o.default.bool,o.default.bool,(0,l.transitionTimeout)("Appear"),(0,l.transitionTimeout)("Enter"),(0,l.transitionTimeout)("Leave");var f=function(e){function t(){var n,r;u(this,t);for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return n=r=h(this,e.call.apply(e,[this].concat(a))),r._wrapChild=function(e){return i.default.createElement(s.default,{name:r.props.transitionName,appear:r.props.transitionAppear,enter:r.props.transitionEnter,leave:r.props.transitionLeave,appearTimeout:r.props.transitionAppearTimeout,enterTimeout:r.props.transitionEnterTimeout,leaveTimeout:r.props.transitionLeaveTimeout},e)},h(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){return i.default.createElement(a.default,r({},this.props,{childFactory:this._wrapChild}))},t}(i.default.Component);f.displayName="CSSTransitionGroup",f.propTypes={},f.defaultProps={transitionAppear:!1,transitionEnter:!0,transitionLeave:!0},t.default=f,e.exports=t.default},67980:(e,t,n)=>{"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=f(n(98141)),o=f(n(10602)),a=f(n(45177)),s=n(20702),l=f(n(67294)),c=f(n(45697)),u=n(73935),h=n(54726);function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=[];s.transitionEnd&&m.push(s.transitionEnd),s.animationEnd&&m.push(s.animationEnd),c.default.node,h.nameShape.isRequired,c.default.bool,c.default.bool,c.default.bool,c.default.number,c.default.number,c.default.number;var g=function(e){function t(){var n,r;p(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=d(this,e.call.apply(e,[this].concat(o))),r.componentWillAppear=function(e){r.props.appear?r.transition("appear",e,r.props.appearTimeout):e()},r.componentWillEnter=function(e){r.props.enter?r.transition("enter",e,r.props.enterTimeout):e()},r.componentWillLeave=function(e){r.props.leave?r.transition("leave",e,r.props.leaveTimeout):e()},d(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){this.classNameAndNodeQueue=[],this.transitionTimeouts=[]},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach((function(e){clearTimeout(e)})),this.classNameAndNodeQueue.length=0},t.prototype.transition=function(e,t,n){var r=(0,u.findDOMNode)(this);if(r){var a=this.props.name[e]||this.props.name+"-"+e,l=this.props.name[e+"Active"]||a+"-active",c=null,h=void 0;(0,i.default)(r,a),this.queueClassAndNode(l,r);var f=function(e){e&&e.target!==r||(clearTimeout(c),h&&h(),(0,o.default)(r,a),(0,o.default)(r,l),h&&h(),t&&t())};n?(c=setTimeout(f,n),this.transitionTimeouts.push(c)):s.transitionEnd&&(h=function(e,t){return m.length?m.forEach((function(n){return e.addEventListener(n,t,!1)})):setTimeout(t,0),function(){m.length&&m.forEach((function(n){return e.removeEventListener(n,t,!1)}))}}(r,f))}else t&&t()},t.prototype.queueClassAndNode=function(e,t){var n=this;this.classNameAndNodeQueue.push({className:e,node:t}),this.rafHandle||(this.rafHandle=(0,a.default)((function(){return n.flushClassNameAndNodeQueue()})))},t.prototype.flushClassNameAndNodeQueue=function(){this.unmounted||this.classNameAndNodeQueue.forEach((function(e){e.node.scrollTop,(0,i.default)(e.node,e.className)})),this.classNameAndNodeQueue.length=0,this.rafHandle=null},t.prototype.render=function(){var e=r({},this.props);return delete e.name,delete e.appear,delete e.enter,delete e.leave,delete e.appearTimeout,delete e.enterTimeout,delete e.leaveTimeout,delete e.children,l.default.cloneElement(l.default.Children.only(this.props.children),e)},t}(l.default.Component);g.displayName="CSSTransitionGroupChild",g.propTypes={},t.default=g,e.exports=t.default},92381:(e,t,n)=>{"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=l(n(34088)),o=l(n(67294)),a=l(n(45697)),s=(l(n(30670)),n(40537));function l(e){return e&&e.__esModule?e:{default:e}}a.default.any,a.default.func,a.default.node;var c=function(e){function t(n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,i));return o.performAppear=function(e,t){o.currentlyTransitioningKeys[e]=!0,t.componentWillAppear?t.componentWillAppear(o._handleDoneAppearing.bind(o,e,t)):o._handleDoneAppearing(e,t)},o._handleDoneAppearing=function(e,t){t.componentDidAppear&&t.componentDidAppear(),delete o.currentlyTransitioningKeys[e];var n=(0,s.getChildMapping)(o.props.children);n&&n.hasOwnProperty(e)||o.performLeave(e,t)},o.performEnter=function(e,t){o.currentlyTransitioningKeys[e]=!0,t.componentWillEnter?t.componentWillEnter(o._handleDoneEntering.bind(o,e,t)):o._handleDoneEntering(e,t)},o._handleDoneEntering=function(e,t){t.componentDidEnter&&t.componentDidEnter(),delete o.currentlyTransitioningKeys[e];var n=(0,s.getChildMapping)(o.props.children);n&&n.hasOwnProperty(e)||o.performLeave(e,t)},o.performLeave=function(e,t){o.currentlyTransitioningKeys[e]=!0,t.componentWillLeave?t.componentWillLeave(o._handleDoneLeaving.bind(o,e,t)):o._handleDoneLeaving(e,t)},o._handleDoneLeaving=function(e,t){t.componentDidLeave&&t.componentDidLeave(),delete o.currentlyTransitioningKeys[e];var n=(0,s.getChildMapping)(o.props.children);n&&n.hasOwnProperty(e)?o.keysToEnter.push(e):o.setState((function(t){var n=r({},t.children);return delete n[e],{children:n}}))},o.childRefs=Object.create(null),o.state={children:(0,s.getChildMapping)(n.children)},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},t.prototype.componentDidMount=function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t,this.childRefs[t])},t.prototype.componentWillReceiveProps=function(e){var t=(0,s.getChildMapping)(e.children),n=this.state.children;for(var r in this.setState({children:(0,s.mergeChildMappings)(n,t)}),t){var i=n&&n.hasOwnProperty(r);!t[r]||i||this.currentlyTransitioningKeys[r]||this.keysToEnter.push(r)}for(var o in n){var a=t&&t.hasOwnProperty(o);!n[o]||a||this.currentlyTransitioningKeys[o]||this.keysToLeave.push(o)}},t.prototype.componentDidUpdate=function(){var e=this,t=this.keysToEnter;this.keysToEnter=[],t.forEach((function(t){return e.performEnter(t,e.childRefs[t])}));var n=this.keysToLeave;this.keysToLeave=[],n.forEach((function(t){return e.performLeave(t,e.childRefs[t])}))},t.prototype.render=function(){var e=this,t=[],n=function(n){var r=e.state.children[n];if(r){var a="string"!=typeof r.ref,s=e.props.childFactory(r),l=function(t){e.childRefs[n]=t};s===r&&a&&(l=(0,i.default)(r.ref,l)),t.push(o.default.cloneElement(s,{key:n,ref:l}))}};for(var a in this.state.children)n(a);var s=r({},this.props);return delete s.transitionLeave,delete s.transitionName,delete s.transitionAppear,delete s.transitionEnter,delete s.childFactory,delete s.transitionLeaveTimeout,delete s.transitionEnterTimeout,delete s.transitionAppearTimeout,delete s.component,o.default.createElement(this.props.component,s,t)},t}(o.default.Component);c.displayName="TransitionGroup",c.propTypes={},c.defaultProps={component:"span",childFactory:function(e){return e}},t.default=c,e.exports=t.default},64317:(e,t,n)=>{"use strict";var r=o(n(1174)),i=o(n(92381));function o(e){return e&&e.__esModule?e:{default:e}}e.exports={TransitionGroup:i.default,CSSTransitionGroup:r.default}},40537:(e,t,n)=>{"use strict";t.__esModule=!0,t.getChildMapping=function(e){if(!e)return e;var t={};return r.Children.map(e,(function(e){return e})).forEach((function(e){t[e.key]=e})),t},t.mergeChildMappings=function(e,t){function n(n){return t.hasOwnProperty(n)?t[n]:e[n]}e=e||{},t=t||{};var r={},i=[];for(var o in e)t.hasOwnProperty(o)?i.length&&(r[o]=i,i=[]):i.push(o);var a=void 0,s={};for(var l in t){if(r.hasOwnProperty(l))for(a=0;a<r[l].length;a++){var c=r[l][a];s[r[l][a]]=n(c)}s[l]=n(l)}for(a=0;a<i.length;a++)s[i[a]]=n(i[a]);return s};var r=n(67294)},54726:(e,t,n)=>{"use strict";t.__esModule=!0,t.nameShape=void 0,t.transitionTimeout=function(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}},i(n(67294));var r=i(n(45697));function i(e){return e&&e.__esModule?e:{default:e}}t.nameShape=r.default.oneOfType([r.default.string,r.default.shape({enter:r.default.string,leave:r.default.string,active:r.default.string}),r.default.shape({enter:r.default.string,enterActive:r.default.string,leave:r.default.string,leaveActive:r.default.string,appear:r.default.string,appearActive:r.default.string})])},72408:(e,t,n)=>{"use strict";var r=n(27418),i="function"==typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,l=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,u=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,d=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116,g="function"==typeof Symbol&&Symbol.iterator;function y(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function _(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||v}function x(){}function A(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||v}_.prototype.isReactComponent={},_.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(y(85));this.updater.enqueueSetState(this,e,t,"setState")},_.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=_.prototype;var w=A.prototype=new x;w.constructor=A,r(w,_.prototype),w.isPureReactComponent=!0;var C={current:null},E=Object.prototype.hasOwnProperty,S={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,n){var r,i={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)E.call(t,r)&&!S.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===i[r]&&(i[r]=l[r]);return{$$typeof:o,type:e,key:a,ref:s,props:i,_owner:C.current}}function B(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}var k=/\/+/g,M=[];function P(e,t,n,r){if(M.length){var i=M.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function I(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>M.length&&M.push(e)}function O(e,t,n,r){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var s=!1;if(null===e)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case o:case a:s=!0}}if(s)return n(r,e,""===t?"."+z(e,0):t),1;if(s=0,t=""===t?".":t+":",Array.isArray(e))for(var l=0;l<e.length;l++){var c=t+z(i=e[l],l);s+=O(i,c,n,r)}else if("function"==typeof(c=null===e||"object"!=typeof e?null:"function"==typeof(c=g&&e[g]||e["@@iterator"])?c:null))for(e=c.call(e),l=0;!(i=e.next()).done;)s+=O(i=i.value,c=t+z(i,l++),n,r);else if("object"===i)throw n=""+e,Error(y(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return s}function D(e,t,n){return null==e?0:O(e,"",t,n)}function z(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function L(e,t){e.func.call(e.context,t,e.count++)}function R(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?F(e,r,n,(function(e){return e})):null!=e&&(B(e)&&(e=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(k,"$&/")+"/")+n)),r.push(e))}function F(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(k,"$&/")+"/"),D(e,R,t=P(t,o,r,i)),I(t)}var U={current:null};function N(){var e=U.current;if(null===e)throw Error(y(321));return e}var j={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:C,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return F(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;D(e,L,t=P(null,null,t,n)),I(t)},count:function(e){return D(e,(function(){return null}),null)},toArray:function(e){var t=[];return F(e,t,null,(function(e){return e})),t},only:function(e){if(!B(e))throw Error(y(143));return e}},t.Component=_,t.Fragment=s,t.Profiler=c,t.PureComponent=A,t.StrictMode=l,t.Suspense=p,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j,t.cloneElement=function(e,t,n){if(null==e)throw Error(y(267,e));var i=r({},e.props),a=e.key,s=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,l=C.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)E.call(t,u)&&!S.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==c?c[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){c=Array(u);for(var h=0;h<u;h++)c[h]=arguments[h+2];i.children=c}return{$$typeof:o,type:e.type,key:a,ref:s,props:i,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:h,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:f,render:e}},t.isValidElement=B,t.lazy=function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return N().useCallback(e,t)},t.useContext=function(e,t){return N().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return N().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return N().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return N().useLayoutEffect(e,t)},t.useMemo=function(e,t){return N().useMemo(e,t)},t.useReducer=function(e,t,n){return N().useReducer(e,t,n)},t.useRef=function(e){return N().useRef(e)},t.useState=function(e){return N().useState(e)},t.version="16.14.0"},67294:(e,t,n)=>{"use strict";e.exports=n(72408)},84275:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(98336)),i=n(70210),o=s(n(40174)),a=s(n(53697));function s(e){return e&&e.__esModule?e:{default:e}}var l=/((?:\-[a-z]+\-)?calc)/;t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return(0,r.default)(e).walk((function(e){if("function"===e.type&&l.test(e.value)){var n=r.default.stringify(e.nodes);if(!(n.indexOf("constant")>=0||n.indexOf("env")>=0)){var s=i.parser.parse(n),c=(0,o.default)(s,t);e.type="word",e.value=(0,a.default)(e.value,c,t)}}}),!0).toString()},e.exports=t.default},70460:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n(33258))&&r.__esModule?r:{default:r};t.default=function(e,t,n){switch(e.type){case"LengthValue":case"AngleValue":case"TimeValue":case"FrequencyValue":case"ResolutionValue":return function(e,t,n){return t.type===e.type&&(t={type:e.type,value:(0,i.default)(t.value,t.unit,e.unit,n),unit:e.unit}),{left:e,right:t}}(e,t,n);default:return{left:e,right:t}}},e.exports=t.default},40174:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flip=s;var r,i=(r=n(70460))&&r.__esModule?r:{default:r};function o(e,t){return e.type===t.type&&e.value===t.value}function a(e){switch(e){case"LengthValue":case"AngleValue":case"TimeValue":case"FrequencyValue":case"ResolutionValue":case"EmValue":case"ExValue":case"ChValue":case"RemValue":case"VhValue":case"VwValue":case"VminValue":case"VmaxValue":case"PercentageValue":case"Value":return!0}return!1}function s(e){return"+"===e?"-":"+"}function l(e){return a(e.type)?e.value=-e.value:"MathExpression"==e.type&&(e.left=l(e.left),e.right=l(e.right)),e}t.default=function e(t,n){return"MathExpression"===t.type?function(t,n){switch(t=function(t,n){var r=(0,i.default)(t.left,t.right,n),a=e(r.left,n),s=e(r.right,n);return"MathExpression"===a.type&&"MathExpression"===s.type&&("/"===a.operator&&"*"===s.operator||"-"===a.operator&&"+"===s.operator||"*"===a.operator&&"/"===s.operator||"+"===a.operator&&"-"===s.operator)&&(o(a.right,s.right)?r=(0,i.default)(a.left,s.left,n):o(a.right,s.left)&&(r=(0,i.default)(a.left,s.right,n)),a=e(r.left,n),s=e(r.right,n)),t.left=a,t.right=s,t}(t,n),t.operator){case"+":case"-":return function(t,n){var r=t,i=r.left,o=r.right,c=r.operator;if("CssVariable"===i.type||"CssVariable"===o.type)return t;if(0===o.value)return i;if(0===i.value&&"+"===c)return o;if(0===i.value&&"-"===c)return l(o);if(i.type===o.type&&a(i.type)&&((t=Object.assign({},i)).value="+"===c?i.value+o.value:i.value-o.value),a(i.type)&&("+"===o.operator||"-"===o.operator)&&"MathExpression"===o.type){if(i.type===o.left.type)return(t=Object.assign({},t)).left=e({type:"MathExpression",operator:c,left:i,right:o.left},n),t.right=o.right,t.operator="-"===c?s(o.operator):o.operator,e(t,n);if(i.type===o.right.type)return(t=Object.assign({},t)).left=e({type:"MathExpression",operator:"-"===c?s(o.operator):o.operator,left:i,right:o.right},n),t.right=o.left,e(t,n)}if("MathExpression"===i.type&&("+"===i.operator||"-"===i.operator)&&a(o.type)){if(o.type===i.left.type)return(t=Object.assign({},i)).left=e({type:"MathExpression",operator:c,left:i.left,right:o},n),e(t,n);if(o.type===i.right.type)return t=Object.assign({},i),"-"===i.operator?(t.right=e({type:"MathExpression",operator:"-"===c?"+":"-",left:o,right:i.right},n),t.operator="-"===c?"-":"+"):t.right=e({type:"MathExpression",operator:c,left:i.right,right:o},n),t.right.value<0&&(t.right.value*=-1,t.operator="-"===t.operator?"+":"-"),e(t,n)}return t}(t,n);case"/":return function(t,n){if(!a(t.right.type))return t;if("Value"!==t.right.type)throw new Error('Cannot divide by "'+t.right.unit+'", number expected');if(0===t.right.value)throw new Error("Cannot divide by zero");return"MathExpression"===t.left.type?a(t.left.left.type)&&a(t.left.right.type)?(t.left.left.value/=t.right.value,t.left.right.value/=t.right.value,e(t.left,n)):t:a(t.left.type)?(t.left.value/=t.right.value,t.left):t}(t,n);case"*":return function(e){if("MathExpression"===e.left.type&&"Value"===e.right.type){if(a(e.left.left.type)&&a(e.left.right.type))return e.left.left.value*=e.right.value,e.left.right.value*=e.right.value,e.left}else{if(a(e.left.type)&&"Value"===e.right.type)return e.left.value*=e.right.value,e.left;if("Value"===e.left.type&&"MathExpression"===e.right.type){if(a(e.right.left.type)&&a(e.right.right.type))return e.right.left.value*=e.left.value,e.right.right.value*=e.left.value,e.right}else if("Value"===e.left.type&&a(e.right.type))return e.right.value*=e.left.value,e.right}return e}(t)}return t}(t,n):"Calc"===t.type?e(t.value,n):t}},53697:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=a(t,n);return"MathExpression"===t.type&&(r=e+"("+r+")"),r};var r=n(40174),i={"*":0,"/":0,"+":1,"-":1};function o(e,t){if(!1!==t){var n=Math.pow(10,t);return Math.round(e*n)/n}return e}function a(e,t){switch(e.type){case"MathExpression":var n=e.left,s=e.right,l=e.operator,c="";return"MathExpression"===n.type&&i[l]<i[n.operator]?c+="("+a(n,t)+")":c+=a(n,t),c+=" "+e.operator+" ","MathExpression"===s.type&&i[l]<i[s.operator]?c+="("+a(s,t)+")":"MathExpression"===s.type&&"-"===l&&["+","-"].includes(s.operator)?(s.operator=(0,r.flip)(s.operator),c+=a(s,t)):c+=a(s,t),c;case"Value":return o(e.value,t);case"CssVariable":return e.fallback?"var("+e.value+", "+a(e.fallback,t)+")":"var("+e.value+")";case"Calc":return e.prefix?"-"+e.prefix+"-calc("+a(e.value,t)+")":"calc("+a(e.value,t)+")";default:return o(e.value,t)+e.unit}}e.exports=t.default},70210:(e,t)=>{var n=function(){function e(e,t){var n;if(Object.defineProperty(this,"name",{enumerable:!1,writable:!1,value:"JisonParserError"}),null==e&&(e="???"),Object.defineProperty(this,"message",{enumerable:!1,writable:!0,value:e}),this.hash=t,t&&t.exception instanceof Error){var r=t.exception;this.message=r.message||e,n=r.stack}n||(Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,this.constructor):n=new Error(e).stack),n&&Object.defineProperty(this,"stack",{enumerable:!1,writable:!1,value:n})}function t(e,t,n){n=n||0;for(var r=0;r<t;r++)this.push(e),e+=n}function n(e,t){for(t+=e=this.length-e;e<t;e++)this.push(this[e])}function r(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];"function"==typeof i?(n++,i.apply(t,e[n])):t.push(i)}return t}"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,Error.prototype):e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e.prototype.name="JisonParserError";var i={trace:function(){},JisonParserError:e,yy:{},options:{type:"lalr",hasPartialLrUpgradeOnConflict:!0,errorRecoveryTokenDiscardCount:3},symbols_:{$accept:0,$end:1,ADD:3,ANGLE:16,CHS:22,COMMA:14,CSS_CPROP:13,CSS_VAR:12,DIV:6,EMS:20,EOF:1,EXS:21,FREQ:18,LENGTH:15,LPAREN:7,MUL:5,NESTED_CALC:9,NUMBER:11,PERCENTAGE:28,PREFIX:10,REMS:23,RES:19,RPAREN:8,SUB:4,TIME:17,VHS:24,VMAXS:27,VMINS:26,VWS:25,css_value:33,css_variable:32,error:2,expression:29,math_expression:30,value:31},terminals_:{1:"EOF",2:"error",3:"ADD",4:"SUB",5:"MUL",6:"DIV",7:"LPAREN",8:"RPAREN",9:"NESTED_CALC",10:"PREFIX",11:"NUMBER",12:"CSS_VAR",13:"CSS_CPROP",14:"COMMA",15:"LENGTH",16:"ANGLE",17:"TIME",18:"FREQ",19:"RES",20:"EMS",21:"EXS",22:"CHS",23:"REMS",24:"VHS",25:"VWS",26:"VMINS",27:"VMAXS",28:"PERCENTAGE"},TERROR:2,EOF:1,originalQuoteName:null,originalParseError:null,cleanupAfterParse:null,constructParseErrorInfo:null,yyMergeLocationInfo:null,__reentrant_call_depth:0,__error_infos:[],__error_recovery_infos:[],quoteName:function(e){return'"'+e+'"'},getSymbolName:function(e){if(this.terminals_[e])return this.terminals_[e];var t=this.symbols_;for(var n in t)if(t[n]===e)return n;return null},describeSymbol:function(e){if(e!==this.EOF&&this.terminal_descriptions_&&this.terminal_descriptions_[e])return this.terminal_descriptions_[e];if(e===this.EOF)return"end of input";var t=this.getSymbolName(e);return t?this.quoteName(t):null},collect_expected_token_set:function(e,t){var n=this.TERROR,r=[],i={};if(!t&&this.state_descriptions_&&this.state_descriptions_[e])return[this.state_descriptions_[e]];for(var o in this.table[e])if((o=+o)!==n){var a=t?o:this.describeSymbol(o);a&&!i[a]&&(r.push(a),i[a]=!0)}return r},productions_:function(e){for(var t=[],n=e.pop,r=e.rule,i=0,o=n.length;i<o;i++)t.push([n[i],r[i]]);return t}({pop:r([29,t,[30,10],31,31,32,32,t,[33,15]]),rule:r([2,t,[3,5],4,7,t,[1,4],2,4,6,t,[1,14],2])}),performAction:function(e,t,n){var r=this.yy;switch(r.parser,r.lexer,e){case 0:case 6:this.$=n[t-1];break;case 1:return this.$=n[t-1],n[t-1];case 2:case 3:case 4:case 5:this.$={type:"MathExpression",operator:n[t-1],left:n[t-2],right:n[t]};break;case 7:this.$={type:"Calc",value:n[t-1]};break;case 8:this.$={type:"Calc",value:n[t-1],prefix:n[t-5]};break;case 9:case 10:case 11:this.$=n[t];break;case 12:this.$={type:"Value",value:parseFloat(n[t])};break;case 13:this.$={type:"Value",value:-1*parseFloat(n[t])};break;case 14:this.$={type:"CssVariable",value:n[t-1]};break;case 15:this.$={type:"CssVariable",value:n[t-3],fallback:n[t-1]};break;case 16:this.$={type:"LengthValue",value:parseFloat(n[t]),unit:/[a-z]+/.exec(n[t])[0]};break;case 17:this.$={type:"AngleValue",value:parseFloat(n[t]),unit:/[a-z]+/.exec(n[t])[0]};break;case 18:this.$={type:"TimeValue",value:parseFloat(n[t]),unit:/[a-z]+/.exec(n[t])[0]};break;case 19:this.$={type:"FrequencyValue",value:parseFloat(n[t]),unit:/[a-z]+/.exec(n[t])[0]};break;case 20:this.$={type:"ResolutionValue",value:parseFloat(n[t]),unit:/[a-z]+/.exec(n[t])[0]};break;case 21:this.$={type:"EmValue",value:parseFloat(n[t]),unit:"em"};break;case 22:this.$={type:"ExValue",value:parseFloat(n[t]),unit:"ex"};break;case 23:this.$={type:"ChValue",value:parseFloat(n[t]),unit:"ch"};break;case 24:this.$={type:"RemValue",value:parseFloat(n[t]),unit:"rem"};break;case 25:this.$={type:"VhValue",value:parseFloat(n[t]),unit:"vh"};break;case 26:this.$={type:"VwValue",value:parseFloat(n[t]),unit:"vw"};break;case 27:this.$={type:"VminValue",value:parseFloat(n[t]),unit:"vmin"};break;case 28:this.$={type:"VmaxValue",value:parseFloat(n[t]),unit:"vmax"};break;case 29:this.$={type:"PercentageValue",value:parseFloat(n[t]),unit:"%"};break;case 30:var i=n[t];i.value*=-1,this.$=i}},table:function(e){for(var t=[],n=e.len,r=e.symbol,i=e.type,o=e.state,a=e.mode,s=e.goto,l=0,c=n.length;l<c;l++){for(var u=n[l],h={},f=0;f<u;f++){var p=r.shift();switch(i.shift()){case 2:h[p]=[a.shift(),s.shift()];break;case 0:h[p]=o.shift();break;default:h[p]=[3]}}t.push(h)}return t}({len:r([24,1,5,23,1,18,t,[0,3],1,t,[0,16],t,[23,4],n,[28,3],0,0,16,1,6,6,t,[0,3],5,1,2,n,[37,3],n,[20,3],5,0,0]),symbol:r([4,7,9,11,12,t,[15,19,1],1,1,t,[3,4,1],n,[30,19],n,[29,4],7,4,10,11,n,[22,14],n,[19,3],n,[43,22],n,[23,69],n,[139,4],8,n,[51,24],4,n,[138,15],13,n,[186,5],8,n,[6,6],n,[5,5],9,8,14,n,[159,47],n,[60,10]]),type:r([t,[2,19],t,[0,5],1,t,[2,24],t,[0,4],n,[22,19],n,[43,42],n,[23,70],n,[28,25],n,[45,25],n,[113,54]]),state:r([1,2,8,6,7,30,n,[4,3],33,37,n,[5,3],38,n,[4,3],39,n,[4,3],40,n,[4,3],42,n,[21,4],50,n,[5,3],51,n,[4,3]]),mode:r([t,[1,179],t,[2,3],n,[5,5],n,[6,4],t,[1,57]]),goto:r([5,3,4,24,t,[9,15,1],t,[25,5,1],n,[24,19],31,35,32,34,n,[18,14],36,n,[38,19],n,[19,57],n,[118,4],41,n,[24,19],43,35,n,[16,14],44,t,[2,3],28,29,2,t,[3,3],28,29,3,n,[53,4],t,[45,5,1],n,[100,42],52,n,[5,4],53])}),defaultActions:function(e){for(var t={},n=e.idx,r=e.goto,i=0,o=n.length;i<o;i++)t[n[i]]=r[i];return t}({idx:r([6,7,8,t,[10,16,1],33,34,39,40,41,45,47,52,53]),goto:r([9,10,11,t,[16,14,1],12,1,30,13,t,[4,4,1],14,15,8])}),parseError:function(e,t,n){if(!t.recoverable)throw"function"==typeof this.trace&&this.trace(e),n||(n=this.JisonParserError),new n(e,t);"function"==typeof this.trace&&this.trace(e),t.destroy()},parse:function(e){var t,n=this,r=new Array(128),i=new Array(128),o=new Array(128),a=this.table,s=0,l=0,c=(this.TERROR,this.EOF),u=(this.options.errorRecoveryTokenDiscardCount,[0,54]);t=this.__lexer__?this.__lexer__:this.__lexer__=Object.create(this.lexer);var h={parseError:void 0,quoteName:void 0,lexer:void 0,parser:void 0,pre_parse:void 0,post_parse:void 0,pre_lex:void 0,post_lex:void 0};"function"!=typeof assert||assert,this.yyGetSharedState=function(){return h},function(e,t){for(var n in t)void 0===e[n]&&Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}(h,this.yy),h.lexer=t,h.parser=this,"function"==typeof h.parseError?this.parseError=function(e,t,n){return n||(n=this.JisonParserError),h.parseError.call(this,e,t,n)}:this.parseError=this.originalParseError,"function"==typeof h.quoteName?this.quoteName=function(e){return h.quoteName.call(this,e)}:this.quoteName=this.originalQuoteName,this.cleanupAfterParse=function(e,n,a){var l,c;if(n&&((h.post_parse||this.post_parse)&&(c=this.constructParseErrorInfo(null,null,null,!1)),h.post_parse&&void 0!==(l=h.post_parse.call(this,h,e,c))&&(e=l),this.post_parse&&void 0!==(l=this.post_parse.call(this,h,e,c))&&(e=l),c&&c.destroy&&c.destroy()),this.__reentrant_call_depth>1)return e;if(t.cleanupAfterLex&&t.cleanupAfterLex(a),h&&(h.lexer=void 0,h.parser=void 0,t.yy===h&&(t.yy=void 0)),h=void 0,this.parseError=this.originalParseError,this.quoteName=this.originalQuoteName,r.length=0,i.length=0,o.length=0,s=0,!a){for(var u=this.__error_infos.length-1;u>=0;u--){var f=this.__error_infos[u];f&&"function"==typeof f.destroy&&f.destroy()}this.__error_infos.length=0}return e},this.constructParseErrorInfo=function(e,n,a,c){var u={errStr:e,exception:n,text:t.match,value:t.yytext,token:this.describeSymbol(l)||l,token_id:l,line:t.yylineno,expected:a,recoverable:c,state:f,action:p,new_state:b,symbol_stack:r,state_stack:i,value_stack:o,stack_pointer:s,yy:h,lexer:t,parser:this,destroy:function(){var e=!!this.recoverable;for(var t in this)this.hasOwnProperty(t)&&"object"==typeof t&&(this[t]=void 0);this.recoverable=e}};return this.__error_infos.push(u),u};var f,p,d,m,g,y,v,b,_=function(){var e=t.lex();return"number"!=typeof e&&(e=n.symbols_[e]||e),e||c},x={$:!0,_$:void 0,yy:h},A=!1;try{for(this.__reentrant_call_depth++,t.setInput(e,h),"function"==typeof t.canIUse&&t.canIUse().fastLex&&(_=function(){var e=t.fastLex();return"number"!=typeof e&&(e=n.symbols_[e]||e),e||c}),o[s]=null,i[s]=0,r[s]=0,++s,this.pre_parse&&this.pre_parse.call(this,h),h.pre_parse&&h.pre_parse.call(this,h),b=i[s-1];;){if(f=b,this.defaultActions[f])p=2,b=this.defaultActions[f];else if(l||(l=_()),m=a[f]&&a[f][l]||u,b=m[1],!(p=m[0])){var w,C=this.describeSymbol(l)||l,E=this.collect_expected_token_set(f);w="number"==typeof t.yylineno?"Parse error on line "+(t.yylineno+1)+": ":"Parse error: ","function"==typeof t.showPosition&&(w+="\n"+t.showPosition(69,10)+"\n"),E.length?w+="Expecting "+E.join(", ")+", got unexpected "+C:w+="Unexpected "+C,g=this.constructParseErrorInfo(w,null,E,!1),void 0!==(d=this.parseError(g.errStr,g,this.JisonParserError))&&(A=d);break}switch(p){default:if(p instanceof Array){g=this.constructParseErrorInfo("Parse Error: multiple actions possible at state: "+f+", token: "+l,null,null,!1),void 0!==(d=this.parseError(g.errStr,g,this.JisonParserError))&&(A=d);break}g=this.constructParseErrorInfo("Parsing halted. No viable error recovery approach available due to internal system failure.",null,null,!1),void 0!==(d=this.parseError(g.errStr,g,this.JisonParserError))&&(A=d);break;case 1:r[s]=l,o[s]=t.yytext,i[s]=b,++s,l=0;continue;case 2:if(y=(v=this.productions_[b-1])[1],void 0!==(d=this.performAction.call(x,b,s-1,o))){A=d;break}s-=y;var S=v[0];r[s]=S,o[s]=x.$,b=a[i[s-1]][S],i[s]=b,++s;continue;case 3:-2!==s&&(A=!0,s--,void 0!==o[s]&&(A=o[s]))}break}}catch(e){if(e instanceof this.JisonParserError)throw e;if(t&&"function"==typeof t.JisonLexerError&&e instanceof t.JisonLexerError)throw e;g=this.constructParseErrorInfo("Parsing aborted due to exception.",e,null,!1),A=!1,void 0!==(d=this.parseError(g.errStr,g,this.JisonParserError))&&(A=d)}finally{A=this.cleanupAfterParse(A,!0,!0),this.__reentrant_call_depth--}return A}};i.originalParseError=i.parseError,i.originalQuoteName=i.quoteName;var o=function(){function e(e,t){var n;if(Object.defineProperty(this,"name",{enumerable:!1,writable:!1,value:"JisonLexerError"}),null==e&&(e="???"),Object.defineProperty(this,"message",{enumerable:!1,writable:!0,value:e}),this.hash=t,t&&t.exception instanceof Error){var r=t.exception;this.message=r.message||e,n=r.stack}n||(Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,this.constructor):n=new Error(e).stack),n&&Object.defineProperty(this,"stack",{enumerable:!1,writable:!1,value:n})}"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,Error.prototype):e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e.prototype.name="JisonLexerError";var t={EOF:1,ERROR:2,__currentRuleSet__:null,__error_infos:[],__decompressed:!1,done:!1,_backtrack:!1,_input:"",_more:!1,_signaled_error_token:!1,conditionStack:[],match:"",matched:"",matches:!1,yytext:"",offset:0,yyleng:0,yylineno:0,yylloc:null,constructLexErrorInfo:function(e,t,n){if(e=""+e,null==n&&(n=!(e.indexOf("\n")>0&&e.indexOf("^")>0)),this.yylloc&&n)if("function"==typeof this.prettyPrintRange)this.prettyPrintRange(this.yylloc),/\n\s*$/.test(e)||(e+="\n"),e+="\n  Erroneous area:\n"+this.prettyPrintRange(this.yylloc);else if("function"==typeof this.showPosition){var r=this.showPosition();r&&(e.length&&"\n"!==e[e.length-1]&&"\n"!==r[0]?e+="\n"+r:e+=r)}var i={errStr:e,recoverable:!!t,text:this.match,token:null,line:this.yylineno,loc:this.yylloc,yy:this.yy,lexer:this,destroy:function(){var e=!!this.recoverable;for(var t in this)this.hasOwnProperty(t)&&"object"==typeof t&&(this[t]=void 0);this.recoverable=e}};return this.__error_infos.push(i),i},parseError:function(e,t,n){if(n||(n=this.JisonLexerError),this.yy){if(this.yy.parser&&"function"==typeof this.yy.parser.parseError)return this.yy.parser.parseError.call(this,e,t,n)||this.ERROR;if("function"==typeof this.yy.parseError)return this.yy.parseError.call(this,e,t,n)||this.ERROR}throw new n(e,t)},yyerror:function(e){var t="";this.yylloc&&(t=" on line "+(this.yylineno+1));var n=this.constructLexErrorInfo("Lexical error"+t+": "+e,this.options.lexerErrorsAreRecoverable),r=Array.prototype.slice.call(arguments,1);return r.length&&(n.extra_error_attributes=r),this.parseError(n.errStr,n,this.JisonLexerError)||this.ERROR},cleanupAfterLex:function(e){if(this.setInput("",{}),!e){for(var t=this.__error_infos.length-1;t>=0;t--){var n=this.__error_infos[t];n&&"function"==typeof n.destroy&&n.destroy()}this.__error_infos.length=0}return this},clear:function(){this.yytext="",this.yyleng=0,this.match="",this.matches=!1,this._more=!1,this._backtrack=!1;var e=this.yylloc?this.yylloc.last_column:0;this.yylloc={first_line:this.yylineno+1,first_column:e,last_line:this.yylineno+1,last_column:e,range:[this.offset,this.offset]}},setInput:function(e,t){if(this.yy=t||this.yy||{},!this.__decompressed){for(var n=this.rules,r=0,i=n.length;r<i;r++)"number"==typeof(f=n[r])&&(n[r]=n[f]);var o=this.conditions;for(var a in o){var s=o[a],l=s.rules,c=(i=l.length,new Array(i+1)),u=new Array(i+1);for(r=0;r<i;r++){var h=l[r],f=n[h];c[r+1]=f,u[r+1]=h}s.rules=u,s.__rule_regexes=c,s.__rule_count=i}this.__decompressed=!0}return this._input=e||"",this.clear(),this._signaled_error_token=!1,this.done=!1,this.yylineno=0,this.matched="",this.conditionStack=["INITIAL"],this.__currentRuleSet__=null,this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0,range:[0,0]},this.offset=0,this},editRemainingInput:function(e,t){var n=e.call(this,this._input,t);return"string"!=typeof n?n&&(this._input=""+n):this._input=n,this},input:function(){if(!this._input)return null;var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=1,n=!1;if("\n"===e)n=!0;else if("\r"===e){n=!0;var r=this._input[1];"\n"===r&&(t++,e+=r,this.yytext+=r,this.yyleng++,this.offset++,this.match+=r,this.matched+=r,this.yylloc.range[1]++)}return n?(this.yylineno++,this.yylloc.last_line++,this.yylloc.last_column=0):this.yylloc.last_column++,this.yylloc.range[1]++,this._input=this._input.slice(t),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);if(this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.yyleng=this.yytext.length,this.offset-=t,this.match=this.match.substr(0,this.match.length-t),this.matched=this.matched.substr(0,this.matched.length-t),n.length>1){this.yylineno-=n.length-1,this.yylloc.last_line=this.yylineno+1;var r=this.match,i=r.split(/(?:\r\n?|\n)/g);1===i.length&&(i=(r=this.matched).split(/(?:\r\n?|\n)/g)),this.yylloc.last_column=i[i.length-1].length}else this.yylloc.last_column-=t;return this.yylloc.range[1]=this.yylloc.range[0]+this.yyleng,this.done=!1,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else{var e="";this.yylloc&&(e=" on line "+(this.yylineno+1));var t=this.constructLexErrorInfo("Lexical error"+e+": You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).",!1);this._signaled_error_token=this.parseError(t.errStr,t,this.JisonLexerError)||this.ERROR}return this},less:function(e){return this.unput(this.match.slice(e))},pastInput:function(e,t){var n=this.matched.substring(0,this.matched.length-this.match.length);e<0?e=n.length:e||(e=20),t<0?t=n.length:t||(t=1);var r=(n=n.substr(2*-e-2)).replace(/\r\n|\r/g,"\n").split("\n");return(n=(r=r.slice(-t)).join("\n")).length>e&&(n="..."+n.substr(-e)),n},upcomingInput:function(e,t){var n=this.match;e<0?e=n.length+this._input.length:e||(e=20),t<0?t=e:t||(t=1),n.length<2*e+2&&(n+=this._input.substring(0,2*e+2));var r=n.replace(/\r\n|\r/g,"\n").split("\n");return(n=(r=r.slice(0,t)).join("\n")).length>e&&(n=n.substring(0,e)+"..."),n},showPosition:function(e,t){var n=this.pastInput(e).replace(/\s/g," "),r=new Array(n.length+1).join("-");return n+this.upcomingInput(t).replace(/\s/g," ")+"\n"+r+"^"},deriveLocationInfo:function(e,t,n,r){var i={first_line:1,first_column:0,last_line:1,last_column:0,range:[0,0]};return e&&(i.first_line=0|e.first_line,i.last_line=0|e.last_line,i.first_column=0|e.first_column,i.last_column=0|e.last_column,e.range&&(i.range[0]=0|e.range[0],i.range[1]=0|e.range[1])),(i.first_line<=0||i.last_line<i.first_line)&&(i.first_line<=0&&t&&(i.first_line=0|t.last_line,i.first_column=0|t.last_column,t.range&&(i.range[0]=0|e.range[1])),(i.last_line<=0||i.last_line<i.first_line)&&n&&(i.last_line=0|n.first_line,i.last_column=0|n.first_column,n.range&&(i.range[1]=0|e.range[0])),i.first_line<=0&&r&&(i.last_line<=0||r.last_line<=i.last_line)&&(i.first_line=0|r.first_line,i.first_column=0|r.first_column,r.range&&(i.range[0]=0|r.range[0])),i.last_line<=0&&r&&(i.first_line<=0||r.first_line>=i.first_line)&&(i.last_line=0|r.last_line,i.last_column=0|r.last_column,r.range&&(i.range[1]=0|r.range[1]))),i.last_line<=0&&(i.first_line<=0?(i.first_line=this.yylloc.first_line,i.last_line=this.yylloc.last_line,i.first_column=this.yylloc.first_column,i.last_column=this.yylloc.last_column,i.range[0]=this.yylloc.range[0],i.range[1]=this.yylloc.range[1]):(i.last_line=this.yylloc.last_line,i.last_column=this.yylloc.last_column,i.range[1]=this.yylloc.range[1])),i.first_line<=0&&(i.first_line=i.last_line,i.first_column=0,i.range[1]=i.range[0]),i.first_column<0&&(i.first_column=0),i.last_column<0&&(i.last_column=i.first_column>0?i.first_column:80),i},prettyPrintRange:function(e,t,n){e=this.deriveLocationInfo(e,t,n);var r=(this.matched+this._input).split("\n"),i=Math.max(1,t?t.first_line:e.first_line-3),o=Math.max(1,n?n.last_line:e.last_line+1),a=1+Math.log10(1|o)|0,s=new Array(a).join(" "),l=[],c=r.slice(i-1,o+1).map((function(t,n){var r=n+i,o=(s+r).substr(-a)+": "+t,c=new Array(a+1).join("^"),u=3,h=0;return r===e.first_line?(u+=e.first_column,h=Math.max(2,(r===e.last_line?e.last_column:t.length)-e.first_column+1)):r===e.last_line?h=Math.max(2,e.last_column+1):r>e.first_line&&r<e.last_line&&(h=Math.max(2,t.length+1)),h&&(o+="\n"+c+new Array(u).join(".")+new Array(h).join("^"),t.trim().length>0&&l.push(n)),o.replace(/\t/g," ")}));if(l.length>4){var u=l[1]+1,h=l[l.length-2]-1,f=new Array(a+1).join(" ")+"  (...continued...)";f+="\n"+new Array(a+1).join("-")+"  (---------------)",c.splice(u,h-u+1,f)}return c.join("\n")},describeYYLLOC:function(e,t){var n,r=e.first_line,i=e.last_line,o=e.first_column,a=e.last_column;if(0==i-r?(n="line "+r+", ",n+=a-o<=1?"column "+o:"columns "+o+" .. "+a):n="lines "+r+"(column "+o+") .. "+i+"(column "+a+")",e.range&&t){var s=e.range[0],l=e.range[1]-1;n+=l<=s?" {String Offset: "+s+"}":" {String Offset range: "+s+" .. "+l+"}"}return n},test_match:function(e,t){var n,r,i,o,a;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.yylloc.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column,range:this.yylloc.range.slice(0)},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done}),a=(o=e[0]).length,(r=o.split(/(?:\r\n?|\n)/g)).length>1?(this.yylineno+=r.length-1,this.yylloc.last_line=this.yylineno+1,this.yylloc.last_column=r[r.length-1].length):this.yylloc.last_column+=a,this.yytext+=o,this.match+=o,this.matched+=o,this.matches=e,this.yyleng=this.yytext.length,this.yylloc.range[1]+=a,this.offset+=a,this._more=!1,this._backtrack=!1,this._input=this._input.slice(a),n=this.performAction.call(this,this.yy,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var s in i)this[s]=i[s];return this.__currentRuleSet__=null,!1}return!!this._signaled_error_token&&(n=this._signaled_error_token,this._signaled_error_token=!1,n)},next:function(){if(this.done)return this.clear(),this.EOF;var e,t,n,r;this._input||(this.done=!0),this._more||this.clear();var i=this.__currentRuleSet__;if(!(i||(i=this.__currentRuleSet__=this._currentRules())&&i.rules)){var o="";this.options.trackPosition&&(o=" on line "+(this.yylineno+1));var a=this.constructLexErrorInfo("Internal lexer engine error"+o+': The lex grammar programmer pushed a non-existing condition name "'+this.topState()+'"; this is a fatal error and should be reported to the application programmer team!',!1);return this.parseError(a.errStr,a,this.JisonLexerError)||this.ERROR}for(var s=i.rules,l=i.__rule_regexes,c=i.__rule_count,u=1;u<=c;u++)if((n=this._input.match(l[u]))&&(!t||n[0].length>t[0].length)){if(t=n,r=u,this.options.backtrack_lexer){if(!1!==(e=this.test_match(n,s[u])))return e;if(this._backtrack){t=void 0;continue}return!1}if(!this.options.flex)break}if(t)return!1!==(e=this.test_match(t,s[r]))&&e;if(this._input){o="",this.options.trackPosition&&(o=" on line "+(this.yylineno+1)),a=this.constructLexErrorInfo("Lexical error"+o+": Unrecognized text.",this.options.lexerErrorsAreRecoverable);var h=this._input,f=this.topState(),p=this.conditionStack.length;return(e=this.parseError(a.errStr,a,this.JisonLexerError)||this.ERROR)===this.ERROR&&(this.matches||h!==this._input||f!==this.topState()||p!==this.conditionStack.length||this.input()),e}return this.done=!0,this.clear(),this.EOF},lex:function(){var e;for("function"==typeof this.pre_lex&&(e=this.pre_lex.call(this,0)),"function"==typeof this.options.pre_lex&&(e=this.options.pre_lex.call(this,e)||e),this.yy&&"function"==typeof this.yy.pre_lex&&(e=this.yy.pre_lex.call(this,e)||e);!e;)e=this.next();return this.yy&&"function"==typeof this.yy.post_lex&&(e=this.yy.post_lex.call(this,e)||e),"function"==typeof this.options.post_lex&&(e=this.options.post_lex.call(this,e)||e),"function"==typeof this.post_lex&&(e=this.post_lex.call(this,e)||e),e},fastLex:function(){for(var e;!e;)e=this.next();return e},canIUse:function(){return{fastLex:!("function"==typeof this.pre_lex||"function"==typeof this.options.pre_lex||this.yy&&"function"==typeof this.yy.pre_lex||this.yy&&"function"==typeof this.yy.post_lex||"function"==typeof this.options.post_lex||"function"==typeof this.post_lex)&&"function"==typeof this.fastLex}},begin:function(e){return this.pushState(e)},pushState:function(e){return this.conditionStack.push(e),this.__currentRuleSet__=null,this},popState:function(){return this.conditionStack.length-1>0?(this.__currentRuleSet__=null,this.conditionStack.pop()):this.conditionStack[0]},topState:function(e){return(e=this.conditionStack.length-1-Math.abs(e||0))>=0?this.conditionStack[e]:"INITIAL"},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL},stateStackSize:function(){return this.conditionStack.length},options:{trackPosition:!0},JisonLexerError:e,performAction:function(e,t,n){if(1!==t)return this.simpleCaseActionClusters[t]},simpleCaseActionClusters:{0:13,2:5,3:6,4:3,5:4,6:15,7:15,8:15,9:15,10:15,11:15,12:16,13:16,14:16,15:16,16:17,17:17,18:18,19:18,20:19,21:19,22:19,23:20,24:21,25:22,26:23,27:25,28:24,29:26,30:27,31:28,32:11,33:9,34:12,35:10,36:7,37:8,38:14,39:1},rules:[/^(?:(--[\d\-A-Za-z]*))/,/^(?:\s+)/,/^(?:\*)/,/^(?:\/)/,/^(?:\+)/,/^(?:-)/,/^(?:(\d+(\.\d*)?|\.\d+)px\b)/,/^(?:(\d+(\.\d*)?|\.\d+)cm\b)/,/^(?:(\d+(\.\d*)?|\.\d+)mm\b)/,/^(?:(\d+(\.\d*)?|\.\d+)in\b)/,/^(?:(\d+(\.\d*)?|\.\d+)pt\b)/,/^(?:(\d+(\.\d*)?|\.\d+)pc\b)/,/^(?:(\d+(\.\d*)?|\.\d+)deg\b)/,/^(?:(\d+(\.\d*)?|\.\d+)grad\b)/,/^(?:(\d+(\.\d*)?|\.\d+)rad\b)/,/^(?:(\d+(\.\d*)?|\.\d+)turn\b)/,/^(?:(\d+(\.\d*)?|\.\d+)s\b)/,/^(?:(\d+(\.\d*)?|\.\d+)ms\b)/,/^(?:(\d+(\.\d*)?|\.\d+)Hz\b)/,/^(?:(\d+(\.\d*)?|\.\d+)kHz\b)/,/^(?:(\d+(\.\d*)?|\.\d+)dpi\b)/,/^(?:(\d+(\.\d*)?|\.\d+)dpcm\b)/,/^(?:(\d+(\.\d*)?|\.\d+)dppx\b)/,/^(?:(\d+(\.\d*)?|\.\d+)em\b)/,/^(?:(\d+(\.\d*)?|\.\d+)ex\b)/,/^(?:(\d+(\.\d*)?|\.\d+)ch\b)/,/^(?:(\d+(\.\d*)?|\.\d+)rem\b)/,/^(?:(\d+(\.\d*)?|\.\d+)vw\b)/,/^(?:(\d+(\.\d*)?|\.\d+)vh\b)/,/^(?:(\d+(\.\d*)?|\.\d+)vmin\b)/,/^(?:(\d+(\.\d*)?|\.\d+)vmax\b)/,/^(?:(\d+(\.\d*)?|\.\d+)%)/,/^(?:(\d+(\.\d*)?|\.\d+)\b)/,/^(?:(calc))/,/^(?:(var))/,/^(?:([a-z]+))/,/^(?:\()/,/^(?:\))/,/^(?:,)/,/^(?:$)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39],inclusive:!0}}};return t}();function a(){this.yy={}}return i.lexer=o,a.prototype=i,i.Parser=a,new a}();t.parser=n,t.Parser=n.Parser,t.parse=function(){return n.parse.apply(n,arguments)}},98336:(e,t,n)=>{var r=n(98219),i=n(46461),o=n(21088);function a(e){return this instanceof a?(this.nodes=r(e),this):new a(e)}a.prototype.toString=function(){return Array.isArray(this.nodes)?o(this.nodes):""},a.prototype.walk=function(e,t){return i(this.nodes,e,t),this},a.unit=n(4386),a.walk=i,a.stringify=o,e.exports=a},98219:e=>{var t="(".charCodeAt(0),n=")".charCodeAt(0),r="'".charCodeAt(0),i='"'.charCodeAt(0),o="\\".charCodeAt(0),a="/".charCodeAt(0),s=",".charCodeAt(0),l=":".charCodeAt(0),c="*".charCodeAt(0);e.exports=function(e){for(var u,h,f,p,d,m,g,y,v=[],b=e,_=0,x=b.charCodeAt(_),A=b.length,w=[{nodes:v}],C=0,E="",S="",T="";_<A;)if(x<=32){u=_;do{u+=1,x=b.charCodeAt(u)}while(x<=32);p=b.slice(_,u),f=v[v.length-1],x===n&&C?T=p:f&&"div"===f.type?f.after=p:x===s||x===l||x===a&&b.charCodeAt(u+1)!==c?S=p:v.push({type:"space",sourceIndex:_,value:p}),_=u}else if(x===r||x===i){u=_,p={type:"string",sourceIndex:_,quote:h=x===r?"'":'"'};do{if(d=!1,~(u=b.indexOf(h,u+1)))for(m=u;b.charCodeAt(m-1)===o;)m-=1,d=!d;else u=(b+=h).length-1,p.unclosed=!0}while(d);p.value=b.slice(_+1,u),v.push(p),_=u+1,x=b.charCodeAt(_)}else if(x===a&&b.charCodeAt(_+1)===c)p={type:"comment",sourceIndex:_},-1===(u=b.indexOf("*/",_))&&(p.unclosed=!0,u=b.length),p.value=b.slice(_+2,u),v.push(p),_=u+2,x=b.charCodeAt(_);else if(x===a||x===s||x===l)p=b[_],v.push({type:"div",sourceIndex:_-S.length,value:p,before:S,after:""}),S="",_+=1,x=b.charCodeAt(_);else if(t===x){u=_;do{u+=1,x=b.charCodeAt(u)}while(x<=32);if(p={type:"function",sourceIndex:_-E.length,value:E,before:b.slice(_+1,u)},_=u,"url"===E&&x!==r&&x!==i){u-=1;do{if(d=!1,~(u=b.indexOf(")",u+1)))for(m=u;b.charCodeAt(m-1)===o;)m-=1,d=!d;else u=(b+=")").length-1,p.unclosed=!0}while(d);g=u;do{g-=1,x=b.charCodeAt(g)}while(x<=32);p.nodes=_!==g+1?[{type:"word",sourceIndex:_,value:b.slice(_,g+1)}]:[],p.unclosed&&g+1!==u?(p.after="",p.nodes.push({type:"space",sourceIndex:g+1,value:b.slice(g+1,u)})):p.after=b.slice(g+1,u),_=u+1,x=b.charCodeAt(_),v.push(p)}else C+=1,p.after="",v.push(p),w.push(p),v=p.nodes=[],y=p;E=""}else if(n===x&&C)_+=1,x=b.charCodeAt(_),y.after=T,T="",C-=1,w.pop(),v=(y=w[C]).nodes;else{u=_;do{x===o&&(u+=1),u+=1,x=b.charCodeAt(u)}while(u<A&&!(x<=32||x===r||x===i||x===s||x===l||x===a||x===t||x===n&&C));p=b.slice(_,u),t===x?E=p:v.push({type:"word",sourceIndex:_,value:p}),_=u}for(_=w.length-1;_;_-=1)w[_].unclosed=!0;return w[0].nodes}},21088:e=>{function t(e,t){var r,i,o=e.type,a=e.value;return t&&void 0!==(i=t(e))?i:"word"===o||"space"===o?a:"string"===o?(r=e.quote||"")+a+(e.unclosed?"":r):"comment"===o?"/*"+a+(e.unclosed?"":"*/"):"div"===o?(e.before||"")+a+(e.after||""):Array.isArray(e.nodes)?(r=n(e.nodes),"function"!==o?r:a+"("+(e.before||"")+r+(e.after||"")+(e.unclosed?"":")")):a}function n(e,n){var r,i;if(Array.isArray(e)){for(r="",i=e.length-1;~i;i-=1)r=t(e[i],n)+r;return r}return t(e,n)}e.exports=n},4386:e=>{var t="-".charCodeAt(0),n="+".charCodeAt(0),r=".".charCodeAt(0),i="e".charCodeAt(0),o="E".charCodeAt(0);e.exports=function(e){for(var a,s=0,l=e.length,c=!1,u=-1,h=!1;s<l;){if((a=e.charCodeAt(s))>=48&&a<=57)h=!0;else if(a===i||a===o){if(u>-1)break;u=s}else if(a===r){if(c)break;c=!0}else{if(a!==n&&a!==t)break;if(0!==s)break}s+=1}return u+1===s&&s--,!!h&&{number:e.slice(0,s),unit:e.slice(s)}}},46461:e=>{e.exports=function e(t,n,r){var i,o,a,s;for(i=0,o=t.length;i<o;i+=1)a=t[i],r||(s=n(a,i,t)),!1!==s&&"function"===a.type&&Array.isArray(a.nodes)&&e(a.nodes,n,r),r&&n(a,i,t)}},12520:(e,t)=>{"use strict";function n(e){return!!(e&&e.constructor&&e.call&&e.apply)}function r(e){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=n(r)?r:function(e){return r.indexOf(e.type)>=0},o=t(void 0,{});return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,r=arguments[1];return i(r)?e?n:t(n,r):e?t(n,r):n}}}t.gT=r(!0);r(!1)},20050:(e,t,n)=>{"use strict";var r=n(31528).get;function i(e,t){return e===t}e.exports=function(e,t,n){n=n||i;var o=r(e(),t);return function(i){return function(){var a=r(e(),t);if(!n(o,a)){var s=o;o=a,i(a,s,t)}}}}},35666:e=>{var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,o=Object.create(i.prototype),a=new B(r||[]);return o._invoke=function(e,t,n){var r=h;return function(i,o){if(r===p)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw o;return M()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=E(a,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var l=u(e,t,n);if("normal"===l.type){if(r=n.done?d:f,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=d,n.method="throw",n.arg=l.arg)}}}(e,n,a),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var h="suspendedStart",f="suspendedYield",p="executing",d="completed",m={};function g(){}function y(){}function v(){}var b={};l(b,o,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(k([])));x&&x!==n&&r.call(x,o)&&(b=x);var A=v.prototype=g.prototype=Object.create(b);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(i,o,a,s){var l=u(e[i],e,o);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==typeof h&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(h).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=u(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function k(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:M}}function M(){return{value:t,done:!0}}return y.prototype=v,l(A,"constructor",v),l(v,"constructor",y),y.displayName=l(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,s,"GeneratorFunction")),e.prototype=Object.create(A),e},e.awrap=function(e){return{__await:e}},w(C.prototype),l(C.prototype,a,(function(){return this})),e.AsyncIterator=C,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new C(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(A),l(A,s,"Generator"),l(A,o,(function(){return this})),l(A,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:k(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},60053:(e,t)=>{"use strict";var n,r,i,o,a;if("undefined"==typeof window||"function"!=typeof MessageChannel){var s=null,l=null,c=function(){if(null!==s)try{var e=t.unstable_now();s(!0,e),s=null}catch(e){throw setTimeout(c,0),e}},u=Date.now();t.unstable_now=function(){return Date.now()-u},n=function(e){null!==s?setTimeout(n,0,e):(s=e,setTimeout(c,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},o=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var h=window.performance,f=window.Date,p=window.setTimeout,d=window.clearTimeout;if("undefined"!=typeof console){var m=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof h&&"function"==typeof h.now)t.unstable_now=function(){return h.now()};else{var g=f.now();t.unstable_now=function(){return f.now()-g}}var y=!1,v=null,b=-1,_=5,x=0;o=function(){return t.unstable_now()>=x},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):_=0<e?Math.floor(1e3/e):5};var A=new MessageChannel,w=A.port2;A.port1.onmessage=function(){if(null!==v){var e=t.unstable_now();x=e+_;try{v(!0,e)?w.postMessage(null):(y=!1,v=null)}catch(e){throw w.postMessage(null),e}}else y=!1},n=function(e){v=e,y||(y=!0,w.postMessage(null))},r=function(e,n){b=p((function(){e(t.unstable_now())}),n)},i=function(){d(b),b=-1}}function C(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<T(i,t)))break e;e[r]=t,e[n]=i,n=r}}function E(e){return void 0===(e=e[0])?null:e}function S(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,l=e[s];if(void 0!==a&&0>T(a,n))void 0!==l&&0>T(l,a)?(e[r]=l,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==l&&0>T(l,n)))break e;e[r]=l,e[s]=n,r=s}}}return t}return null}function T(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var B=[],k=[],M=1,P=null,I=3,O=!1,D=!1,z=!1;function L(e){for(var t=E(k);null!==t;){if(null===t.callback)S(k);else{if(!(t.startTime<=e))break;S(k),t.sortIndex=t.expirationTime,C(B,t)}t=E(k)}}function R(e){if(z=!1,L(e),!D)if(null!==E(B))D=!0,n(F);else{var t=E(k);null!==t&&r(R,t.startTime-e)}}function F(e,n){D=!1,z&&(z=!1,i()),O=!0;var a=I;try{for(L(n),P=E(B);null!==P&&(!(P.expirationTime>n)||e&&!o());){var s=P.callback;if(null!==s){P.callback=null,I=P.priorityLevel;var l=s(P.expirationTime<=n);n=t.unstable_now(),"function"==typeof l?P.callback=l:P===E(B)&&S(B),L(n)}else S(B);P=E(B)}if(null!==P)var c=!0;else{var u=E(k);null!==u&&r(R,u.startTime-n),c=!1}return c}finally{P=null,I=a,O=!1}}function U(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var N=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){D||O||(D=!0,n(F))},t.unstable_getCurrentPriorityLevel=function(){return I},t.unstable_getFirstCallbackNode=function(){return E(B)},t.unstable_next=function(e){switch(I){case 1:case 2:case 3:var t=3;break;default:t=I}var n=I;I=t;try{return e()}finally{I=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=N,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=I;I=e;try{return t()}finally{I=n}},t.unstable_scheduleCallback=function(e,o,a){var s=t.unstable_now();if("object"==typeof a&&null!==a){var l=a.delay;l="number"==typeof l&&0<l?s+l:s,a="number"==typeof a.timeout?a.timeout:U(e)}else a=U(e),l=s;return e={id:M++,callback:o,priorityLevel:e,startTime:l,expirationTime:a=l+a,sortIndex:-1},l>s?(e.sortIndex=l,C(k,e),null===E(B)&&e===E(k)&&(z?i():z=!0,r(R,l-s))):(e.sortIndex=a,C(B,e),D||O||(D=!0,n(F))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();L(e);var n=E(B);return n!==P&&null!==P&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<P.expirationTime||o()},t.unstable_wrapCallback=function(e){var t=I;return function(){var n=I;I=t;try{return e.apply(this,arguments)}finally{I=n}}}},63840:(e,t,n)=>{"use strict";e.exports=n(60053)},97702:e=>{e.exports="attribute vec3 color;\n// attribute vec3 v_index;\n// varying vec3 vertexColor;\n// varying vec2 vertexUv;\n\nuniform float size;\nvarying vec4 p_col;\nuniform float min_size;\n\nuniform float selectors[5];\n\nvoid main(void) {\n\tgl_Position =  projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\tfloat blend = clamp(position.z/1000.0, 0.0, 1.0);\n\tgl_Position.xy = mix(gl_Position.xy, gl_Position.xy*1.9/size, blend);\n\tp_col = vec4(1.0, 1.0, 1.0, 1.0);//texture2D(texColorMap, vec2(position.z, 0.45));\n\tfloat attenuation = selectors[int(position.z*5.0)];\n\t//attenuation = (position.x-207.0)/30.0 * attenuation * 10.0;\n\tattenuation = pow((0.5*gl_Position.x+1.0)*attenuation*2.5, 4.0);\n\tattenuation = min(1.0, attenuation);\n\tp_col = mix(p_col, vec4(0.0, 0.0, 0.0, 0.0), 1.0-attenuation); //have to blend with 1,1,1,0 because we're in premultiplied space\n\n\tfloat ms = 8.0;\n\tif (int(position.z*5.0) >= 2){\n\t\tms = 32.0;\n\t}\n\t// vertexUv = vec2(v_index.x, 0);\n\t//gl_PointSize = max(ms, size*1.0);\n\tgl_PointSize = size;//position.z;\n\tp_col = vec4(color.rgb, 1.0);\n\t// gl_PointSize = 2.0;// * size;// position.z * size;\n\t// gl_PointSize *= attenuation; //ensure attentuated (invisible/non-selected) points have a size of 0\n}\n"},82331:e=>{e.exports="uniform sampler2D texSprite;\n\nuniform float opacity;\nuniform float size;\n\nuniform vec3 multiplier;\n\nvarying vec4 p_col;\n\nvarying vec2 vertexUv;\n\nvec3 desaturate(vec3 color, float amount)\n{\n\tvec3 gray = vec3(dot(vec3(0.2126,0.7152,0.0722), color));\n\treturn vec3(mix(color, gray, amount));\n}\n\nvoid main(void) {\n\tvec2 pointcoord = gl_PointCoord;\n\tconst vec2 offset = vec2(0.5/64.0, 0.5/64.0);\n\tvec4 icon = texture2D(texSprite, pointcoord+offset); // texture2D(texSprite, pointcoord+offset);\n\tvec4 final = icon;\n\tfinal*=p_col;\n\tgl_FragColor = final*opacity;\n}\n"},39825:e=>{e.exports="uniform sampler2D texSprite;\n\nuniform float opacity;\nuniform float size;\n\nuniform vec3 multiplier;\n\nvarying vec4 p_col;\n// varying vec2 vertexUv;\n\nvec3 desaturate(vec3 color, float amount)\n{\n\tvec3 gray = vec3(dot(vec3(0.2126,0.7152,0.0722), color));\n\treturn vec3(mix(color, gray, amount));\n}\n\nvoid main(void) {\n\tvec2 pointcoord = gl_PointCoord;\n\tvec4 icon = texture2D(texSprite, pointcoord);\n\tvec4 col = p_col;\n\t//icon.rgb*=col.rgb;\n\t//icon.rgb*=icon.a;\n\t//icon.a*=0.5;\n\tvec4 final = p_col;\n\tfinal.rgb*=icon.rgb;\n\tfinal.rgba*=icon.a;\n\t//final.a*=0.5; //semi-additive\n\n\tfinal.rgb*=multiplier;\n\tgl_FragColor = icon * p_col;\n}\n"},64227:e=>{e.exports="attribute vec3 color;\nattribute vec3 color2;\n\nattribute vec3 v_index;\n// varying vec3 vertexColor;\n// varying vec2 vertexUv;\n\nattribute vec2 data1;\n\nuniform float size;\nvarying vec4 p_col;\nuniform float min_size;\n\nuniform float opacity;\n\n\nuniform float selectors[5];\n\n#define in_dslam data1.x\n\nuniform float selected_dslam;\n\nvoid main(void) {\n\tgl_Position =  projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\tfloat blend = clamp(position.z/1000.0, 0.0, 1.0);\n\tgl_Position.xy = mix(gl_Position.xy, gl_Position.xy*1.9/size, blend);\n\tp_col = vec4(1.0, 1.0, 1.0, 1.0);//texture2D(texColorMap, vec2(position.z, 0.45));\n\tfloat attenuation = selectors[int(position.z*5.0)];\n\t//attenuation = (position.x-207.0)/30.0 * attenuation * 10.0;\n\tattenuation = pow((0.5*gl_Position.x+1.0)*attenuation*2.5, 4.0);\n\tattenuation = min(1.0, attenuation);\n\tp_col = mix(p_col, vec4(0.0, 0.0, 0.0, 0.0), 1.0-attenuation); //have to blend with 1,1,1,0 because we're in premultiplied space\n\n\tfloat ms = 8.0;\n\tif (int(position.z*5.0) >= 2){\n\t\tms = 32.0;\n\t}\n\t// vertexUv = vec2(v_index.x, 0);\n\t//gl_PointSize = max(ms, size*1.0);\n\t// gl_PointSize = 100.0;//position.z;\n\tp_col = vec4(color.rgb*opacity, opacity);\n\tgl_PointSize = size;// * size;// position.z * size;\n\n\tif (abs(in_dslam - selected_dslam) < 0.1){\n\t\tgl_PointSize = size*1.25;\n\t\tp_col *= vec4(0.5, 1.0, 0.5, 1.0);\n\t}\n\t// gl_PointSize *= attenuation; //ensure attentuated (invisible/non-selected) points have a size of 0\n}\n"},59962:e=>{e.exports="uniform sampler2D texSprite;\n\nuniform float opacity;\nuniform float size;\n\nvarying vec4 p_col;\nvarying vec2 vertexUv;\n\nvoid main(void) {\n\tvec2 pointcoord = gl_PointCoord;\n\tconst vec2 offset = vec2(0.5/64.0, 0.5/64.0);\n\tvec4 icon = texture2D(texSprite,vertexUv*pow(size, 4.0)*0.1);\n\tvec4 final = icon;\n\tfinal=p_col;\n\tgl_FragColor = final*opacity;\n}\n"},28113:e=>{e.exports="attribute vec3 color;\n\nvarying vec2 vertexUv;\n\nuniform float size;\nvarying vec4 p_col;\nuniform float min_size;\n\nvoid main(void) {\n\tgl_Position =  projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\tfloat blend = clamp(position.z/1000.0, 0.0, 1.0);\n\tgl_Position.xy = mix(gl_Position.xy, gl_Position.xy*1.9/size, blend);\n\tp_col = vec4(1.0, 1.0, 1.0, 1.0);\n\n\tvertexUv = uv;\n\tp_col = vec4(color.rgb, 1.0);\n}\n"},62452:e=>{e.exports="uniform sampler2D texSprite;\n\nuniform float opacity;\nuniform float size;\n\nuniform vec3 multiplier;\n\nvarying vec4 p_col;\n// varying vec2 vertexUv;\n\nvec3 desaturate(vec3 color, float amount)\n{\n\tvec3 gray = vec3(dot(vec3(0.2126,0.7152,0.0722), color));\n\treturn vec3(mix(color, gray, amount));\n}\n\nvoid main(void) {\n\tvec2 pointcoord = gl_PointCoord;\n\tvec4 icon = texture2D(texSprite, pointcoord);\n\tvec4 col = p_col;\n\n\tvec4 final = p_col;\n\tfinal.rgb*=icon.rgb;\n\tfinal.rgba*=icon.a;\n\t//final.a*=0.5; //semi-additive\n\n\tfinal.rgb*=multiplier;\n\tgl_FragColor = p_col*icon;\n    gl_FragColor.a*=opacity;\n\t// gl_FragColor.a=1.0;\n}\n"},39691:e=>{e.exports="attribute vec3 color;\nattribute vec3 v_index;\n// varying vec3 vertexColor;\n// varying vec2 vertexUv;\n\n// attribute vec2 uv;\n\nuniform float size;\nvarying vec4 p_col;\nuniform float min_size;\n\nattribute vec2 data1;\n\nuniform float selectors[5];\n\nuniform float time;\n\n//uv: {amplitude, time}\n\n#define in_amplitude uv.x\n#define in_time uv.y\n#define in_type data1.x\n\nuniform float time_aperture;\n\nvoid main(void) {\n    gl_Position =  projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    float blend = clamp(position.z/1000.0, 0.0, 1.0);\n    gl_Position.xy = mix(gl_Position.xy, gl_Position.xy*1.9/size, blend);\n    p_col = vec4(1.0, 1.0, 1.0, 1.0);//texture2D(texColorMap, vec2(position.z, 0.45));\n    float attenuation = selectors[int(position.z*5.0)];\n    //attenuation = (position.x-207.0)/30.0 * attenuation * 10.0;\n    attenuation = pow((0.5*gl_Position.x+1.0)*attenuation*2.5, 4.0);\n    attenuation = min(1.0, attenuation);\n    p_col = mix(p_col, vec4(0.0, 0.0, 0.0, 0.0), 1.0-attenuation); //have to blend with 1,1,1,0 because we're in premultiplied space\n\n    // float d_time = 1.0 - abs(uv.y - time)*1.0;\n    float d_time = 1.0 - abs(uv.y - (time - 1.0 / 5109.0))*1.0;\n    d_time = smoothstep(1.0-time_aperture, 1.0, d_time);\n    // d_time = pow(d_time, 15.0);\n\n    const float cloud_mult = 0.5;\n    const vec4 cloud = vec4(0.1*cloud_mult, 0.8*cloud_mult, 1.0*cloud_mult, 1.0*cloud_mult);\n    const float ground_mult = 1.0;\n    const vec4 ground = vec4(1.0*ground_mult, 0.4*ground_mult, 0.1*ground_mult, ground_mult);\n\n    // p_col = vec4(uv.x, uv.y, 0.5, 1.0);\n    p_col = mix(cloud, ground, in_type);\n    p_col *= d_time;\n\n    // gl_PointSize = 1.0 * pow(size, 1.0) * d_time * pow(uv.x, 2.5);\n    gl_PointSize = selectors[0] * 16.0 * pow(size, 1.0) * d_time; // * pow(uv.x, 2.5)\n}\n"},24700:e=>{e.exports="uniform sampler2D texSprite;\n\nuniform float opacity;\nuniform float size;\n\nuniform vec3 multiplier;\n\nvarying vec4 p_col;\n\nvarying vec2 vertexUv;\n\nvec3 desaturate(vec3 color, float amount)\n{\n\tvec3 gray = vec3(dot(vec3(0.2126,0.7152,0.0722), color));\n\treturn vec3(mix(color, gray, amount));\n}\n\nvoid main(void) {\n\tvec2 pointcoord = gl_PointCoord;\n\tconst vec2 offset = vec2(0.5/64.0, 0.5/64.0);\n\tvec4 icon = vec4(1.0, 1.0, 1.0, 1.0);\n    //texture2D(texSprite, pointcoord+offset); // texture2D(texSprite, pointcoord+offset);\n\tvec4 final = icon;\n\tfinal*=p_col;\n\tgl_FragColor = final*opacity;\n}"},97423:e=>{e.exports="attribute vec3 color;\nattribute vec3 anomaly;\n\nattribute vec3 v_index;\n// varying vec3 vertexColor;\n// varying vec2 vertexUv;\n\nattribute vec2 data1;\n\nuniform float size;\nvarying vec4 p_col;\nuniform float min_size;\n\nuniform float opacity;\n\n\nuniform float selectors[5];\n\n#define in_dslam data1.x\n\nuniform float selected_dslam;\n\nuniform vec2 view_correction;\n// uniform vec2 view;\n\nuniform float color_mode;\n\nvoid main(void) {\n    // vec3 pos = position - vec3(view.xy, 0.0);\n    // pos.xy-=view_correction;\n    vec3 pos = position;\n    gl_Position =  projectionMatrix * modelViewMatrix * vec4(pos-vec3(view_correction.xy, 0.0), 1.0);\n\n    float blend = clamp(position.z/1000.0, 0.0, 1.0);\n    gl_Position.xy = mix(gl_Position.xy, gl_Position.xy*1.9/size, blend);\n    p_col = vec4(1.0, 1.0, 1.0, 1.0);//texture2D(texColorMap, vec2(position.z, 0.45));\n    float attenuation = selectors[int(position.z*5.0)];\n    //attenuation = (position.x-207.0)/30.0 * attenuation * 10.0;\n    attenuation = pow((0.5*gl_Position.x+1.0)*attenuation*2.5, 4.0);\n    attenuation = min(1.0, attenuation);\n    p_col = mix(p_col, vec4(0.0, 0.0, 0.0, 0.0), 1.0-attenuation); //have to blend with 1,1,1,0 because we're in premultiplied space\n\n    float ms = 8.0;\n    if (int(position.z*5.0) >= 2){\n        ms = 32.0;\n    }\n\t// vertexUv = vec2(v_index.x, 0);\n\t//gl_PointSize = max(ms, size*1.0);\n\tgl_PointSize = size;//position.z;\n\n    vec3 col = mix(color, anomaly, color_mode);\n\tp_col = vec4(col, 1.0);\n    p_col*=opacity;\n\tgl_PointSize = size;// * size;// position.z * size;\n\n    if (abs(in_dslam - selected_dslam) < 0.1){\n        gl_PointSize *= 1.5;\n    }\n\n\t// gl_PointSize *= attenuation; //ensure attentuated (invisible/non-selected) points have a size of 0\n}\n\n"},61250:e=>{e.exports="varying vec3 vertexColor;\nuniform sampler2D texSprite;\nuniform sampler2D texColorMap;\n\nvarying float texSpriteIdx;\nuniform sampler2D texSprite0;\nuniform sampler2D texSprite1;\nuniform sampler2D texSprite2;\nuniform sampler2D texSprite3;\nuniform sampler2D texSprite4;\nuniform sampler2D texSprite5;\nuniform sampler2D texSprite6;\nuniform sampler2D texSprite7;\nuniform sampler2D texSprite8;\nuniform sampler2D texSprite9;\nuniform sampler2D texSprite10;\nuniform sampler2D texSprite11;\n\nuniform float opacity;\nuniform float size;\n// varying vec2 vertexUv;\nvarying float rotation;\n\nvoid main(void) {\n    vec2 pointcoord = gl_PointCoord;\n\n    // if(texSpriteIdx == 0.0) discard;\n\n    vec2 rotated = pointcoord;\n\n    // Sprite rotation impelmentation\n    float mid = 0.5;\n    rotated = vec2(cos(rotation) * (gl_PointCoord.x - mid) + sin(rotation) * (gl_PointCoord.y - mid) + mid,\n                   cos(rotation) * (gl_PointCoord.y - mid) - sin(rotation) * (gl_PointCoord.x - mid) + mid);\n\n    vec4 icon;\n    if(texSpriteIdx >= 11.0) {\n      icon = texture2D(texSprite11, vec2(rotated.x, 1.0-rotated.y));\n    } else if(texSpriteIdx >= 10.0) {\n      icon = texture2D(texSprite10, vec2(rotated.x, 1.0-rotated.y));\n    } else if(texSpriteIdx >= 9.0) {\n      icon = texture2D(texSprite9, vec2(rotated.x, 1.0-rotated.y));\n    } else if(texSpriteIdx >= 8.0) {\n      icon = texture2D(texSprite8, vec2(rotated.x, 1.0-rotated.y));\n    } else if(texSpriteIdx >= 7.0) {\n      icon = texture2D(texSprite7, vec2(rotated.x, 1.0-rotated.y));\n    } else if(texSpriteIdx >= 6.0) {\n      icon = texture2D(texSprite6, vec2(rotated.x, 1.0-rotated.y));\n    } else if(texSpriteIdx >= 5.0) {\n      icon = texture2D(texSprite5, vec2(rotated.x, 1.0-rotated.y));\n    } else if(texSpriteIdx >= 4.0) {\n      icon = texture2D(texSprite4, vec2(rotated.x, 1.0-rotated.y));\n    } else if(texSpriteIdx >= 3.0) {\n      icon = texture2D(texSprite3, vec2(rotated.x, 1.0-rotated.y));\n    } else if(texSpriteIdx >= 2.0) {\n      icon = texture2D(texSprite2, vec2(rotated.x, 1.0-rotated.y));\n    } else if(texSpriteIdx >= 1.0) {\n      icon = texture2D(texSprite1, vec2(rotated.x, 1.0-rotated.y));\n    } else if(texSpriteIdx >= 0.0) {\n      icon = texture2D(texSprite0, vec2(rotated.x, 1.0-rotated.y));\n    }\n\n    icon.rgb *= icon.a;\n    gl_FragColor = icon*opacity;\n}\n"},24794:e=>{e.exports="attribute vec3 color;\nattribute vec3 v_index;\nvarying vec3 vertexColor;\n// varying vec2 vertexUv;\nuniform float size;\nuniform float time;\nuniform vec2 offset;\nuniform float scaler;\nuniform vec4 spriteuvs[16];\nuniform sampler2D tex_attrib_1;\nuniform sampler2D tex_p_attrib_1;\nuniform sampler2D tex_lookup;\nuniform float selected_index;\nuniform float handover_enabled;\nvarying float rotation;\nconst vec2 position_scaler = vec2(1.0 / 256.0, 1.0/256.0);\n\nvarying float texSpriteIdx;\n\nuniform float time_aperture;\n\nvoid main(void) {\n\tvec2 uv = position.xy*position_scaler;\n\tvec4 attrib_cur  =  texture2D(tex_attrib_1, uv);\n\tvec4 attrib_prev =  texture2D(tex_p_attrib_1, uv);\n\tvec4 attrib_1 = mix(attrib_cur, attrib_prev, time);\n\tvec3 pos = vec3(attrib_1.xy, position.z);\n\tpos.xy*=scaler;\n\tpos.xy+=offset.xy;\n\n\trotation = attrib_1.z;\n\ttexSpriteIdx = attrib_cur.a;\n\n\tfloat time_step = smoothstep(0.40, 0.60, time); //step the color across time, interpolation is wrong\n\tfloat col_index = mix(attrib_cur.w, attrib_prev.w, time_step);\n\t//fetch current and next color through lookup, lerp across time\n\t//this suppresses color thrashing caused by lerping lookup index\n\tvec3 col_cur = texture2D(tex_lookup, vec2(attrib_cur.w, 0.45)).rgb;\n\tvec3 col_next = texture2D(tex_lookup, vec2(attrib_prev.w, 0.45)).rgb; //0.45\n\tvec3 col = mix(col_cur, col_next, time_step);\n\t// if (abs(selected_index - attrib_cur.w) > 0.01){\n\t// \tcol = col * 0.05;\n\t// \tattrib_1.z *= 0.0;\n\t// }\n\t// float selected = min(1.0, abs(selected_index - attrib_cur.w));\n\t// col = mix(col, vec3(0.0, 0.0, 0.0), selected);\n \tgl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n\t//here be 'blur'\n\t// if(gl_Position.x > 0.731){\n\t// \tfloat dp =  (gl_Position.x - 0.731)*8.1;\n\t// \tdp = min(dp, 1.0);\n\t// \tattrib_1.z *= 10.0 * dp;\n\t//\n\t// \tcol = col * 0.07 * dp;\n\t// }\n\tfloat delta_col = abs(attrib_cur.w - attrib_prev.w) * 100000.0;\n\tdelta_col = 1.0 + max(1.0, delta_col)*0.000025*sin(time*3.1415)*handover_enabled;\n\n\t// Attempting to add time aperture\n\t// float d_time = 1.0 - abs(uv.y - time)*1.0;\n\t/*\n\tfloat d_time = 1.0 - abs(uv.y - (time - 1.0 / 5109.0))*1.0;\n\td_time = smoothstep(1.0-time_aperture, 1.0, d_time);\n\td_time = pow(d_time, 15.0);\n\tcol *= d_time;\n\t*/\n\n\tvertexColor = col;\n\n\t// gl_PointSize = delta_col * attrib_1.z * size * 0.005;\n\tgl_PointSize = 16.0 * pow(size, 1.0);\n}\n"},67719:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reconstructPacket=t.deconstructPacket=void 0;const r=n(22986);function i(e,t){if(!e)return e;if(r.isBinary(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=i(e[r],t);return n}if("object"==typeof e&&!(e instanceof Date)){const n={};for(const r in e)e.hasOwnProperty(r)&&(n[r]=i(e[r],t));return n}return e}function o(e,t){if(!e)return e;if(e&&e._placeholder)return t[e.num];if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=o(e[n],t);else if("object"==typeof e)for(const n in e)e.hasOwnProperty(n)&&(e[n]=o(e[n],t));return e}t.deconstructPacket=function(e){const t=[],n=e.data,r=e;return r.data=i(n,t),r.attachments=t.length,{packet:r,buffers:t}},t.reconstructPacket=function(e,t){return e.data=o(e.data,t),e.attachments=void 0,e}},95485:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Decoder=t.Encoder=t.PacketType=t.protocol=void 0;const r=n(98767),i=n(67719),o=n(22986),a=n(11227)("socket.io-parser");var s;t.protocol=5,function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(s=t.PacketType||(t.PacketType={})),t.Encoder=class{encode(e){return a("encoding packet %j",e),e.type!==s.EVENT&&e.type!==s.ACK||!o.hasBinary(e)?[this.encodeAsString(e)]:(e.type=e.type===s.EVENT?s.BINARY_EVENT:s.BINARY_ACK,this.encodeAsBinary(e))}encodeAsString(e){let t=""+e.type;return e.type!==s.BINARY_EVENT&&e.type!==s.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data)),a("encoded %j as %s",e,t),t}encodeAsBinary(e){const t=i.deconstructPacket(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}};class l extends r{constructor(){super()}add(e){let t;if("string"==typeof e)t=this.decodeString(e),t.type===s.BINARY_EVENT||t.type===s.BINARY_ACK?(this.reconstructor=new c(t),0===t.attachments&&super.emit("decoded",t)):super.emit("decoded",t);else{if(!o.isBinary(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emit("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===s[n.type])throw new Error("unknown packet type "+n.type);if(n.type===s.BINARY_EVENT||n.type===s.BINARY_ACK){const r=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const i=e.substring(r,t);if(i!=Number(i)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(i)}if("/"===e.charAt(t+1)){const r=t+1;for(;++t&&","!==e.charAt(t)&&t!==e.length;);n.nsp=e.substring(r,t)}else n.nsp="/";const r=e.charAt(t+1);if(""!==r&&Number(r)==r){const r=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(t));if(!l.isPayloadValid(n.type,r))throw new Error("invalid payload");n.data=r}return a("decoded %s as %j",e,n),n}static isPayloadValid(e,t){switch(e){case s.CONNECT:return"object"==typeof t;case s.DISCONNECT:return void 0===t;case s.CONNECT_ERROR:return"string"==typeof t||"object"==typeof t;case s.EVENT:case s.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case s.ACK:case s.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}t.Decoder=l;class c{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=i.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}},22986:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasBinary=t.isBinary=void 0;const n="function"==typeof ArrayBuffer,r=Object.prototype.toString,i="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===r.call(Blob),o="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===r.call(File);function a(e){return n&&(e instanceof ArrayBuffer||(e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||i&&e instanceof Blob||o&&e instanceof File}t.isBinary=a,t.hasBinary=function e(t,n){if(!t||"object"!=typeof t)return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(e(t[n]))return!0;return!1}if(a(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return e(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return!0;return!1}},62065:(e,t,n)=>{"use strict";e.exports=function(e){var t,n,h;if(Array.isArray(e)){if(0===(t=e.length))return new f(null,null,0,0);n=e[0].length,h=r(l.mallocDouble(t*(n+1)),[t,n+1]),o(e,h.hi(t,n))}else{t=e.shape[0],n=e.shape[1];var p=e.dtype;p="int8"===p||"int16"===p||"int32"===p?"int32":"uint8"===p||"uint8_clamped"===p||"buffer"===p||"uint16"===p||"uint32"===p?"uint32":"float32"===p?"float32":"float64",h=r(l.malloc(t*(n+1),p),[t,n+1]),a.assign(h.hi(t,n),e)}for(var m=0;m<t;++m)h.set(m,n,m);var g=s.malloc([t,n],e.dtype),y=l.mallocInt32(t),v=0,b=g.data,_=h.data,x=(u.log2(u.nextPow2(t)),i.compile(h.order,!0,h.dtype)),A=new d;for(A.push(h);v<t;){var w=A.pop(),C=0|w.shape[0];if(C>1){var E,S=u.log2(v+1)%n,T=c.root(C);E=x(w,T,(function(e,t){return e.get(S)-t.get(S)}));var B=g.index(v,0),k=E.offset;for(m=0;m<n;++m)b[B++]=_[k++];y[v]=_[k],v+=1,A.push(w.hi(T)),C>2&&A.push(w.lo(T+1))}else{for(k=w.offset,B=g.index(v,0),m=0;m<n;++m)b[B+m]=_[k++];y[v]=_[k],v+=1}}return l.free(h.data),new f(g,y,t,n)},e.exports.deserialize=function(e){var t=e.p,n=e.i;if(t){for(var i=t.length,o=l.mallocFloat64(i),a=0;a<i;++a)o[a]=t[a];var s=n.length,c=l.mallocInt32(s);for(a=0;a<s;++a)c[a]=n[a];var u=i/s|0;return new f(r(o,[s,u]),c,s,u)}return new f(null,null,0,e.d)};var r=n(62861),i=n(71903),o=n(21943),a=n(38897),s=n(39219),l=n(90316),c=n(46400),u=n(746),h=n(5555);function f(e,t,n,r){this.points=e,this.ids=t,this.dimension=r,this.length=n}var p=f.prototype;function d(){this.data=[],this.offset=0}p.serialize=function(){return this.length>0?{p:Array.prototype.slice.call(this.points.data,0,this.length*this.dimension),i:Array.prototype.slice.call(this.ids,0,this.length)}:{d:this.dimension}},p.range=function(e,t,n){var r=this.length;if(!(r<1)){for(var i=this.dimension,a=0;a<i;++a)if(t[a]<e[a])return;var c,h=this.points,f=this.ids,p=s.malloc([r,2,i]),d=l.mallocInt32(r),m=p.data,g=h.data,y=1,v=0;for(d[0]=0,o(e,p.pick(0,0)),o(t,p.pick(0,1));v<y;){var b=d[v],_=u.log2(b+1)%i,x=p.index(v,0,0),A=p.index(v,1,0),w=h.index(b,0),C=!0;for(a=0;a<i;++a){var E=g[w+a];if(E<m[x+a]||m[A+a]<E){C=!1;break}}if(C&&void 0!==(c=n(f[b])))break;var S=g[w+_],T=m[A+_],B=m[x+_];if(B<=S){var k=2*b+1;if(k<r){d[y]=k;var M=p.index(y,0,0);for(a=0;a<i;++a)m[M+a]=m[x+a];var P=p.index(y,1,0);for(a=0;a<i;++a)m[P+a]=m[A+a];m[P+_]=Math.min(T,S),y+=1}}if(S<=T){var I=2*(b+1);if(I<r){for(d[y]=I,M=p.index(y,0,0),a=0;a<i;++a)m[M+a]=m[x+a];for(P=p.index(y,1,0),a=0;a<i;++a)m[P+a]=m[A+a];m[M+_]=Math.max(B,S),y+=1}}v+=1}return s.free(p),l.free(d),c}},p.rnn=function(e,t,n){if(!(t<0)){var r=this.length;if(!(r<1)){var i,o=this.dimension,a=this.points,c=this.ids,h=s.malloc([r,o]),f=l.mallocInt32(r),p=h.data,d=a.data,m=1,g=0,y=t*t;f[0]=0;for(var v=0;v<o;++v)h.set(0,v,0);for(;g<m;){var b=f[g],_=a.index(b,0),x=0;for(v=0;v<o;++v)x+=Math.pow(e[v]-d[_+v],2);if(x<=y&&void 0!==(i=n(c[b])))break;var A=u.log2(b+1)%o,w=0,C=h.index(g,0);for(v=0;v<o;++v)v!==A&&(w+=p[C+v]);var E=e[A],S=d[_+A],T=p[C+A],B=T,k=T;E<S?k=Math.max(T,Math.pow(S-E,2)):B=Math.max(T,Math.pow(S-E,2));var M=k+w;if(B+w<=y){var P=2*b+1;if(P<r){f[m]=P;var I=h.index(m,0);for(v=0;v<o;++v)p[I+v]=p[C+v];p[I+A]=B,m+=1}}if(M<=y){var O=2*(b+1);if(O<r){for(f[m]=O,I=h.index(m,0),v=0;v<o;++v)p[I+v]=p[C+v];p[I+A]=k,m+=1}}g+=1}return s.free(h),l.free(f),i}}},p.nn=function(e,t){var n=this.length;if(n<1)return-1;if("number"==typeof t){if(t<0)return-1}else t=1/0;var r=this.dimension,i=this.points,o=i.data,a=l.mallocFloat64(r),s=new h(n,r+1),c=s.index,f=s.data;c[0]=0;for(var p=0;p<=r;++p)f[p]=0;s.count+=1;for(var d=-1,m=t;s.count>0&&!(f[0]>=m);){var g=c[0],y=i.index(g,0),v=0;for(p=0;p<r;++p)v+=Math.pow(e[p]-o[y+p],2);v<m&&(m=v,d=g);var b=u.log2(g+1)%r,_=0;for(p=0;p<r;++p){var x=f[p+1];p!==b&&(_+=x),a[p]=x}var A=e[b],w=o[y+b],C=a[b],E=C,S=C;A<w?S=Math.max(C,Math.pow(w-A,2)):E=Math.max(C,Math.pow(w-A,2));var T=E+_,B=S+_;if(s.pop(),T<m){var k=2*g+1;if(k<n){for(c[P=s.count]=k,f[I=P*(r+1)]=T,p=1;p<=r;++p)f[I+p]=a[p-1];f[I+b+1]=E,s.push()}}if(B<m){var M=2*(g+1);if(M<n){var P,I;for(c[P=s.count]=M,f[I=P*(r+1)]=B,p=1;p<=r;++p)f[I+p]=a[p-1];f[I+b+1]=S,s.push()}}}return l.freeFloat64(a),s.dispose(),d<0?-1:this.ids[d]},p.knn=function(e,t,n){if("number"==typeof n){if(n<0)return[]}else n=1/0;var r=this.length;if(r<1)return[];if("number"==typeof t){if(t<=0)return[];t=0|Math.min(t,r)}else t=r;var i=this.ids,o=this.dimension,a=this.points,s=a.data,c=l.mallocFloat64(o),f=new h(t,1),p=f.index,d=f.data,m=new h(r,o+1),g=m.index,y=m.data;g[0]=0;for(var v=0;v<=o;++v)y[v]=0;m.count+=1;for(var b=n;m.count>0&&!(y[0]>=b);){var _=g[0],x=a.index(_,0),A=0;for(v=0;v<o;++v)A+=Math.pow(e[v]-s[x+v],2);if(A<b){f.count>=t&&f.pop();var w=f.count;p[w]=_,d[w]=-A,f.push(),f.count>=t&&(b=-d[0])}var C=u.log2(_+1)%o,E=0;for(v=0;v<o;++v){var S=y[v+1];v!==C&&(E+=S),c[v]=S}var T=e[C],B=s[x+C],k=c[C],M=k,P=k;T<B?P=Math.max(k,Math.pow(B-T,2)):M=Math.max(k,Math.pow(B-T,2));var I=M+E,O=P+E;if(m.pop(),I<b){var D=2*_+1;if(D<r){for(g[L=m.count]=D,y[R=L*(o+1)]=I,v=1;v<=o;++v)y[R+v]=c[v-1];y[R+C+1]=M,m.push()}}if(O<b){var z=2*(_+1);if(z<r){var L,R;for(g[L=m.count]=z,y[R=L*(o+1)]=O,v=1;v<=o;++v)y[R+v]=c[v-1];y[R+C+1]=P,m.push()}}}l.freeFloat64(c),m.dispose();var F=new Array(f.count);for(i=this.ids,v=f.count-1;v>=0;--v)F[v]=i[p[0]],f.pop();return f.dispose(),F},p.dispose=function(){l.free(this.points.data),l.freeInt32(this.ids),this.points=null,this.ids=null,this.length=0},d.prototype.size=function(){return this.data.length-this.offset},d.prototype.push=function(e){return this.data.push(e)},d.prototype.pop=function(){if(0!==this.size()){var e=this.data[this.offset];return this.offset++,this.data.length>1024&&2*this.offset>this.data.length&&(this.data=this.data.slice(this.offset),this.offset=0),e}}},5555:(e,t,n)=>{"use strict";e.exports=o;var r=n(90316);function i(e){return 1&e?e-1>>1:(e>>1)-1}function o(e,t){this.count=0,this.dataSize=t,this.index=r.mallocInt32(e),this.data=r.mallocFloat64(e*t)}var a=o.prototype;a.heapSwap=function(e,t){var n=this.data,r=this.index,i=this.dataSize,o=r[e];r[e]=r[t],r[t]=o;for(var a=i*e,s=i*t,l=0;l<i;++l){var c=n[a];n[a]=n[s],n[s]=c,a+=1,s+=1}},a.heapUp=function(e){for(var t=this.dataSize,n=(this.index,this.data),r=n[t*e];e>0;){var o=i(e);if(!(o>=0&&r<n[t*o]))break;this.heapSwap(e,o),e=o}},a.heapDown=function(e){for(var t=this.dataSize,n=(this.index,this.data),r=this.count,i=n[t*e];;){var o=i,a=2*e+1,s=2*(e+1),l=e;if(a<r){var c=n[t*a];c<o&&(l=a,o=c)}if(s<r&&n[t*s]<o&&(l=s),l===e)break;this.heapSwap(e,l),e=l}},a.pop=function(){this.count-=1,this.heapSwap(0,this.count),this.heapDown(0)},a.push=function(){this.heapUp(this.count),this.count+=1},a.dispose=function(){r.freeInt32(this.index),r.freeFloat64(this.data)}},73466:function(e){var t;e.exports=((t=function(){function e(e){return i.appendChild(e.dom),e}function n(e){for(var t=0;t<i.children.length;t++)i.children[t].style.display=t===e?"block":"none";r=e}var r=0,i=document.createElement("div");i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",(function(e){e.preventDefault(),n(++r%i.children.length)}),!1);var o=(performance||Date).now(),a=o,s=0,l=e(new t.Panel("FPS","#0ff","#002")),c=e(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=e(new t.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:i,addPanel:e,showPanel:n,begin:function(){o=(performance||Date).now()},end:function(){s++;var e=(performance||Date).now();if(c.update(e-o,200),e>a+1e3&&(l.update(1e3*s/(e-a),100),a=e,s=0,u)){var t=performance.memory;u.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){o=this.end()},domElement:i,setMode:n}}).Panel=function(e,t,n){var r=1/0,i=0,o=Math.round,a=o(window.devicePixelRatio||1),s=80*a,l=48*a,c=3*a,u=2*a,h=3*a,f=15*a,p=74*a,d=30*a,m=document.createElement("canvas");m.width=s,m.height=l,m.style.cssText="width:80px;height:48px";var g=m.getContext("2d");return g.font="bold "+9*a+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=n,g.fillRect(0,0,s,l),g.fillStyle=t,g.fillText(e,c,u),g.fillRect(h,f,p,d),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(h,f,p,d),{dom:m,update:function(l,y){r=Math.min(r,l),i=Math.max(i,l),g.fillStyle=n,g.globalAlpha=1,g.fillRect(0,0,s,f),g.fillStyle=t,g.fillText(o(l)+" "+e+" ("+o(r)+"-"+o(i)+")",c,u),g.drawImage(m,h+a,f,p-a,d,h,f,p-a,d),g.fillRect(h+p-a,f,a,d),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(h+p-a,f,a,o((1-l/y)*d))}}},t)},93379:(e,t,n)=>{"use strict";var r,i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),o=[];function a(e){for(var t=-1,n=0;n<o.length;n++)if(o[n].identifier===e){t=n;break}return t}function s(e,t){for(var n={},r=[],i=0;i<e.length;i++){var s=e[i],l=t.base?s[0]+t.base:s[0],c=n[l]||0,u="".concat(l," ").concat(c);n[l]=c+1;var h=a(u),f={css:s[1],media:s[2],sourceMap:s[3]};-1!==h?(o[h].references++,o[h].updater(f)):o.push({identifier:u,updater:m(f,t),references:1}),r.push(u)}return r}function l(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var o=n.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var a=i(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var c,u=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function h(e,t,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=u(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function f(e,t,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var p=null,d=0;function m(e,t){var n,r,i;if(t.singleton){var o=d++;n=p||(p=l(t)),r=h.bind(null,n,o,!1),i=h.bind(null,n,o,!0)}else n=l(t),r=f.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var i=a(n[r]);o[i].references--}for(var l=s(e,t),c=0;c<n.length;c++){var u=a(n[c]);0===o[u].references&&(o[u].updater(),o.splice(u,1))}n=l}}}},40219:e=>{"use strict";function t(e){var t=new r,i=0|e;function o(e){try{return Promise.resolve(e.fn.apply(e.self,e.args)).then(a,s)}catch(e){s(e)}}function a(e){return l(),e}function s(e){throw l(),e}function l(){var e=t.shift();e?e.resolve(e):i=1+(0|i)}return function(e,r,l){return 0!=(0|i)?(i=(0|i)-1,new Promise((function(t){t(e.apply(r,l))})).then(a,s)):new Promise((function(i){t.push(new n(i,e,r,l))})).then(o)}}function n(e,t,n,r){this.resolve=e,this.fn=t,this.self=n||null,this.args=r}function r(){this._s1=[],this._s2=[],this._shiftBlock=this._pushBlock=new Array(64),this._pushIndex=0,this._shiftIndex=0}e.exports=function(e,n){if("function"==typeof e){var r=n;n=e,e=r}if("number"!=typeof e)throw new TypeError("Expected throat size to be a number but got "+typeof e);if(void 0!==n&&"function"!=typeof n)throw new TypeError("Expected throat fn to be a function but got "+typeof n);return"function"==typeof n?function(e,n){const r=t(0|e);return function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;t++)e[t]=arguments[t];return r(n,this,e)}}(0|e,n):function(e){const n=t(0|e);return function(e){if("function"!=typeof e)throw new TypeError("Expected throat fn to be a function but got "+typeof e);for(var t=new Array(arguments.length-1),r=1;r<arguments.length;r++)t[r-1]=arguments[r];return n(e,this,t)}}(0|e)},e.exports.default=e.exports,r.prototype.push=function(e){64===this._pushIndex&&(this._pushIndex=0,this._s1[this._s1.length]=this._pushBlock=new Array(64)),this._pushBlock[this._pushIndex++]=e},r.prototype.shift=function(){if(64===this._shiftIndex){this._shiftIndex=0;var e=this._s2;if(0===e.length){var t=this._s1;if(0===t.length)return;this._s1=e,e=this._s2=t.reverse()}this._shiftBlock=e.pop()}if(this._pushBlock!==this._shiftBlock||this._pushIndex!==this._shiftIndex){var n=this._shiftBlock[this._shiftIndex];return this._shiftBlock[this._shiftIndex++]=null,n}}},43842:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});class r{constructor(e=[],t=i){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let e=(this.length>>1)-1;e>=0;e--)this._down(e)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:n}=this,r=t[e];for(;e>0;){const i=e-1>>1,o=t[i];if(n(r,o)>=0)break;t[e]=o,e=i}t[e]=r}_down(e){const{data:t,compare:n}=this,r=this.length>>1,i=t[e];for(;e<r;){let r=1+(e<<1),o=t[r];const a=r+1;if(a<this.length&&n(t[a],o)<0&&(r=a,o=t[a]),n(o,i)>=0)break;t[e]=o,e=r}t[e]=i}}function i(e,t){return e<t?-1:e>t?1:0}},90316:(e,t,n)=>{"use strict";var r=n(746),i=n(96841),o=n(48764).lW;n.g.__TYPEDARRAY_POOL||(n.g.__TYPEDARRAY_POOL={UINT8:i([32,0]),UINT16:i([32,0]),UINT32:i([32,0]),BIGUINT64:i([32,0]),INT8:i([32,0]),INT16:i([32,0]),INT32:i([32,0]),BIGINT64:i([32,0]),FLOAT:i([32,0]),DOUBLE:i([32,0]),DATA:i([32,0]),UINT8C:i([32,0]),BUFFER:i([32,0])});var a="undefined"!=typeof Uint8ClampedArray,s="undefined"!=typeof BigUint64Array,l="undefined"!=typeof BigInt64Array,c=n.g.__TYPEDARRAY_POOL;c.UINT8C||(c.UINT8C=i([32,0])),c.BIGUINT64||(c.BIGUINT64=i([32,0])),c.BIGINT64||(c.BIGINT64=i([32,0])),c.BUFFER||(c.BUFFER=i([32,0]));var u=c.DATA,h=c.BUFFER;function f(e){if(e){var t=e.length||e.byteLength,n=r.log2(t);u[n].push(e)}}function p(e){e=r.nextPow2(e);var t=r.log2(e),n=u[t];return n.length>0?n.pop():new ArrayBuffer(e)}function d(e){return new Uint8Array(p(e),0,e)}function m(e){return new Uint16Array(p(2*e),0,e)}function g(e){return new Uint32Array(p(4*e),0,e)}function y(e){return new Int8Array(p(e),0,e)}function v(e){return new Int16Array(p(2*e),0,e)}function b(e){return new Int32Array(p(4*e),0,e)}function _(e){return new Float32Array(p(4*e),0,e)}function x(e){return new Float64Array(p(8*e),0,e)}function A(e){return a?new Uint8ClampedArray(p(e),0,e):d(e)}function w(e){return s?new BigUint64Array(p(8*e),0,e):null}function C(e){return l?new BigInt64Array(p(8*e),0,e):null}function E(e){return new DataView(p(e),0,e)}function S(e){e=r.nextPow2(e);var t=r.log2(e),n=h[t];return n.length>0?n.pop():new o(e)}t.free=function(e){if(o.isBuffer(e))h[r.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var t=e.length||e.byteLength,n=0|r.log2(t);u[n].push(e)}},t.freeUint8=t.freeUint16=t.freeUint32=t.freeBigUint64=t.freeInt8=t.freeInt16=t.freeInt32=t.freeBigInt64=t.freeFloat32=t.freeFloat=t.freeFloat64=t.freeDouble=t.freeUint8Clamped=t.freeDataView=function(e){f(e.buffer)},t.freeArrayBuffer=f,t.freeBuffer=function(e){h[r.log2(e.length)].push(e)},t.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return p(e);switch(t){case"uint8":return d(e);case"uint16":return m(e);case"uint32":return g(e);case"int8":return y(e);case"int16":return v(e);case"int32":return b(e);case"float":case"float32":return _(e);case"double":case"float64":return x(e);case"uint8_clamped":return A(e);case"bigint64":return C(e);case"biguint64":return w(e);case"buffer":return S(e);case"data":case"dataview":return E(e);default:return null}return null},t.mallocArrayBuffer=p,t.mallocUint8=d,t.mallocUint16=m,t.mallocUint32=g,t.mallocInt8=y,t.mallocInt16=v,t.mallocInt32=b,t.mallocFloat32=t.mallocFloat=_,t.mallocFloat64=t.mallocDouble=x,t.mallocUint8Clamped=A,t.mallocBigUint64=w,t.mallocBigInt64=C,t.mallocDataView=E,t.mallocBuffer=S,t.clearCache=function(){for(var e=0;e<32;++e)c.UINT8[e].length=0,c.UINT16[e].length=0,c.UINT32[e].length=0,c.INT8[e].length=0,c.INT16[e].length=0,c.INT32[e].length=0,c.FLOAT[e].length=0,c.DOUBLE[e].length=0,c.BIGUINT64[e].length=0,c.BIGINT64[e].length=0,c.UINT8C[e].length=0,u[e].length=0,h[e].length=0}},38706:e=>{"use strict";e.exports=function(e,t,n){return 0===e.length?e:t?(n||e.sort(t),function(e,t){for(var n=1,r=e.length,i=e[0],o=e[0],a=1;a<r;++a)if(o=i,t(i=e[a],o)){if(a===n){n++;continue}e[n++]=i}return e.length=n,e}(e,t)):(n||e.sort(),function(e){for(var t=1,n=e.length,r=e[0],i=e[0],o=1;o<n;++o,i=r)if(i=r,(r=e[o])!==i){if(o===t){t++;continue}e[t++]=r}return e.length=t,e}(e))}},26243:(e,t)=>{t.t="60d3b1c1e73f4cbca23ac7c5e32c31f1dfce16fb"},30670:e=>{"use strict";e.exports=function(){}},82281:e=>{"use strict";var t,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),r={},i=0,o=0;function a(e){var t="";do{t=n[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function s(){var e=a(+new Date);return e!==t?(i=0,t=e):e+"."+a(i++)}for(;o<64;o++)r[n[o]]=o;s.encode=a,s.decode=function(e){var t=0;for(o=0;o<e.length;o++)t=64*t+r[e.charAt(o)];return t},e.exports=s},24613:function(e){e.exports=function(){"use strict";var e,t,n;function r(r,i){if(e)if(t){var o="var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk);",a={};e(a),n=i(a),"undefined"!=typeof window&&(n.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else t=i;else e=i}return r(0,(function(e){var t=n;function n(e,t,n,r){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=n,this.p2y=r}function r(e,n,r,i){const o=new t(e,n,r,i);return function(e){return o.solve(e)}}n.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var n=e,r=0;r<8;r++){var i=this.sampleCurveX(n)-e;if(Math.abs(i)<t)return n;var o=this.sampleCurveDerivativeX(n);if(Math.abs(o)<1e-6)break;n-=i/o}var a=0,s=1;for(n=e,r=0;r<20&&(i=this.sampleCurveX(n),!(Math.abs(i-e)<t));r++)e>i?a=n:s=n,n=.5*(s-a)+a;return n},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}};const i=r(.25,.1,.25,1);function o(e,t,n){return Math.min(n,Math.max(t,e))}function a(e,t,n){const r=n-t,i=((e-t)%r+r)%r+t;return i===t?n:i}function s(e,...t){for(const n of t)for(const t in n)e[t]=n[t];return e}let l=1;function c(e,t){e.forEach((e=>{t[e]&&(t[e]=t[e].bind(t))}))}function u(e,t,n){const r={};for(const i in e)r[i]=t.call(n||this,e[i],i,e);return r}function h(e,t,n){const r={};for(const i in e)t.call(n||this,e[i],i,e)&&(r[i]=e[i]);return r}function f(e){return Array.isArray(e)?e.map(f):"object"==typeof e&&e?u(e,f):e}const p={};function d(e){p[e]||("undefined"!=typeof console&&console.warn(e),p[e]=!0)}function m(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function g(e){let t=0;for(let n,r,i=0,o=e.length,a=o-1;i<o;a=i++)n=e[i],r=e[a],t+=(r.x-n.x)*(n.y+r.y);return t}function y(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function v(e){const t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((e,n,r,i)=>{const o=r||i;return t[n]=!o||o.toLowerCase(),""})),t["max-age"]){const e=parseInt(t["max-age"],10);isNaN(e)?delete t["max-age"]:t["max-age"]=e}return t}let b,_,x=null;function A(e){if(null==x){const t=e.navigator?e.navigator.userAgent:null;x=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return x}function w(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap}const C={now:"undefined"!=typeof performance&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(e){const t=requestAnimationFrame(e);return{cancel:()=>cancelAnimationFrame(t)}},getImageData(e,t=0){const n=window.document.createElement("canvas"),r=n.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return n.width=e.width,n.height=e.height,r.drawImage(e,0,0,e.width,e.height),r.getImageData(-t,-t,e.width+2*t,e.height+2*t)},resolveURL:e=>(b||(b=document.createElement("a")),b.href=e,b.href),hardwareConcurrency:"undefined"!=typeof navigator&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==_&&(_=matchMedia("(prefers-reduced-motion: reduce)")),_.matches)}};var E=S;function S(e,t){this.x=e,this.y=t}S.prototype={clone:function(){return new S(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=n*this.x+t*this.y;return this.x=t*this.x-n*this.y,this.y=r,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),i=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=t.x+n*(this.x-t.x)-r*(this.y-t.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},S.convert=function(e){return e instanceof S?e:Array.isArray(e)?new S(e[0],e[1]):e};const T={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},B="mapbox-tiles";let k,M=500,P=50;function I(){"undefined"==typeof caches||k||(k=caches.open(B))}let O=1/0;const D={supported:!1,testSupport:function(e){!R&&L&&(F?U(e):z=e)}};let z,L,R=!1,F=!1;function U(e){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,L),e.isContextLost())return;D.supported=!0}catch(e){}e.deleteTexture(t),R=!0}"undefined"!=typeof document&&(L=document.createElement("img"),L.onload=function(){z&&U(z),z=null,F=!0},L.onerror=function(){R=!0,z=null},L.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const N={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(N);class j extends Error{constructor(e,t,n,r){super(`AJAXError: ${t} (${e}): ${n}`),this.status=e,this.statusText=t,this.url=n,this.body=r}}const V=y()?()=>self.worker&&self.worker.referrer:()=>("blob:"===window.location.protocol?window.parent:window).location.href;function G(e,t){const n=new AbortController,r=new Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:V(),signal:n.signal});let i=!1,o=!1;return"json"===e.type&&r.headers.set("Accept","application/json"),((n,a,s)=>{if(o)return;Date.now();fetch(r).then((n=>n.ok?((n,r,a)=>{("arrayBuffer"===e.type?n.arrayBuffer():"json"===e.type?n.json():n.text()).then((e=>{o||(i=!0,t(null,e,n.headers.get("Cache-Control"),n.headers.get("Expires")))})).catch((e=>{o||t(new Error(e.message))}))})(n):n.blob().then((r=>t(new j(n.status,n.statusText,e.url,r)))))).catch((e=>{20!==e.code&&t(new Error(e.message))}))})(),{cancel:()=>{o=!0,i||n.abort()}}}const q=function(e,t){if(/:\/\//.test(e.url)&&!/^https?:|^file:/.test(e.url)){if(y()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t);if(!y()){const n=e.url.substring(0,e.url.indexOf("://"));return(T.REGISTERED_PROTOCOLS[n]||G)(e,t)}}if(!(/^file:/.test(n=e.url)||/^file:/.test(V())&&!/^\w+:/.test(n))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return G(e,t);if(y()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var n;return function(e,t){const n=new XMLHttpRequest;n.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(n.responseType="arraybuffer");for(const t in e.headers)n.setRequestHeader(t,e.headers[t]);return"json"===e.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===e.credentials,n.onerror=()=>{t(new Error(n.statusText))},n.onload=()=>{if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){let r=n.response;if("json"===e.type)try{r=JSON.parse(n.response)}catch(e){return t(e)}t(null,r,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else{const r=new Blob([n.response],{type:n.getResponseHeader("Content-Type")});t(new j(n.status,n.statusText,e.url,r))}},n.send(e.body),{cancel:()=>n.abort()}}(e,t)},W=function(e,t){return q(s(e,{type:"arrayBuffer"}),t)};function H(e){const t=window.document.createElement("a");return t.href=e,t.protocol===window.document.location.protocol&&t.host===window.document.location.host}const $="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let X,Z;X=[],Z=0;const Y=function(e,t){if(D.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),Z>=T.MAX_PARALLEL_IMAGE_REQUESTS){const n={requestParameters:e,callback:t,cancelled:!1,cancel(){this.cancelled=!0}};return X.push(n),n}Z++;let n=!1;const r=()=>{if(!n)for(n=!0,Z--;X.length&&Z<T.MAX_PARALLEL_IMAGE_REQUESTS;){const e=X.shift(),{requestParameters:t,callback:n,cancelled:r}=e;r||(e.cancel=Y(t,n).cancel)}},i=W(e,((e,n,i,o)=>{r(),e?t(e):n&&function(e,t){"function"==typeof createImageBitmap?function(e,t){const n=new Blob([new Uint8Array(e)],{type:"image/png"});createImageBitmap(n).then((e=>{t(null,e)})).catch((e=>{t(new Error(`Could not load image because of ${e.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))}))}(e,t):function(e,t){const n=new Image;n.onload=()=>{t(null,n),URL.revokeObjectURL(n.src),n.onload=null,window.requestAnimationFrame((()=>{n.src=$}))},n.onerror=()=>t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const r=new Blob([new Uint8Array(e)],{type:"image/png"});n.src=e.byteLength?URL.createObjectURL(r):$}(e,t)}(n,((e,n)=>{null!=e?t(e):null!=n&&t(null,n,{cacheControl:i,expires:o})}))}));return{cancel:()=>{i.cancel(),r()}}};function K(e,t,n){n[e]&&-1!==n[e].indexOf(t)||(n[e]=n[e]||[],n[e].push(t))}function J(e,t,n){if(n&&n[e]){const r=n[e].indexOf(t);-1!==r&&n[e].splice(r,1)}}class Q{constructor(e,t={}){s(this,t),this.type=e}}class ee extends Q{constructor(e,t={}){super("error",s({error:e},t))}}class te{on(e,t){return this._listeners=this._listeners||{},K(e,t,this._listeners),this}off(e,t){return J(e,t,this._listeners),J(e,t,this._oneTimeListeners),this}once(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},K(e,t,this._oneTimeListeners),this}fire(e,t){"string"==typeof e&&(e=new Q(e,t||{}));const n=e.type;if(this.listens(n)){e.target=this;const t=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];for(const n of t)n.call(this,e);const r=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];for(const t of r)J(n,t,this._oneTimeListeners),t.call(this,e);const i=this._eventedParent;i&&(s(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),i.fire(e))}else e instanceof ee&&console.error(e.error);return this}listens(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)}setEventedParent(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}var ne={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class re{constructor(e,t,n,r){this.message=(e?`${e}: `:"")+n,r&&(this.identifier=r),null!=t&&t.__line__&&(this.line=t.__line__)}}function ie(e){const t=e.value;return t?[new re(e.key,t,"constants have been deprecated as of v8")]:[]}function oe(e,...t){for(const n of t)for(const t in n)e[t]=n[t];return e}function ae(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function se(e){if(Array.isArray(e))return e.map(se);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const n in e)t[n]=se(e[n]);return t}return ae(e)}class le extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class ce{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[e,n]of t)this.bindings[e]=n}concat(e){return new ce(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const ue={kind:"null"},he={kind:"number"},fe={kind:"string"},pe={kind:"boolean"},de={kind:"color"},me={kind:"object"},ge={kind:"value"},ye={kind:"collator"},ve={kind:"formatted"},be={kind:"padding"},_e={kind:"resolvedImage"};function xe(e,t){return{kind:"array",itemType:e,N:t}}function Ae(e){if("array"===e.kind){const t=Ae(e.itemType);return"number"==typeof e.N?`array<${t}, ${e.N}>`:"value"===e.itemType.kind?"array":`array<${t}>`}return e.kind}const we=[ue,he,fe,pe,de,ve,me,xe(ge),be,_e];function Ce(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!Ce(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(const e of we)if(!Ce(e,t))return null}return`Expected ${Ae(e)} but found ${Ae(t)} instead.`}function Ee(e,t){return t.some((t=>t.kind===e.kind))}function Se(e,t){return t.some((t=>"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e))}var Te,Be={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ke(e){return(e=Math.round(e))<0?0:e>255?255:e}function Me(e){return ke("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function Pe(e){return(t="%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))<0?0:t>1?1:t;var t}function Ie(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}try{Te={}.parseCSSColor=function(e){var t,n=e.replace(/ /g,"").toLowerCase();if(n in Be)return Be[n].slice();if("#"===n[0])return 4===n.length?(t=parseInt(n.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===n.length&&(t=parseInt(n.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var r=n.indexOf("("),i=n.indexOf(")");if(-1!==r&&i+1===n.length){var o=n.substr(0,r),a=n.substr(r+1,i-(r+1)).split(","),s=1;switch(o){case"rgba":if(4!==a.length)return null;s=Pe(a.pop());case"rgb":return 3!==a.length?null:[Me(a[0]),Me(a[1]),Me(a[2]),s];case"hsla":if(4!==a.length)return null;s=Pe(a.pop());case"hsl":if(3!==a.length)return null;var l=(parseFloat(a[0])%360+360)%360/360,c=Pe(a[1]),u=Pe(a[2]),h=u<=.5?u*(c+1):u+c-u*c,f=2*u-h;return[ke(255*Ie(f,h,l+1/3)),ke(255*Ie(f,h,l)),ke(255*Ie(f,h,l-1/3)),s];default:return null}}return null}}catch(e){}class Oe{constructor(e,t,n,r=1){this.r=e,this.g=t,this.b=n,this.a=r}static parse(e){if(!e)return;if(e instanceof Oe)return e;if("string"!=typeof e)return;const t=Te(e);return t?new Oe(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3]):void 0}toString(){const[e,t,n,r]=this.toArray();return`rgba(${Math.round(e)},${Math.round(t)},${Math.round(n)},${r})`}toArray(){const{r:e,g:t,b:n,a:r}=this;return 0===r?[0,0,0,0]:[255*e/r,255*t/r,255*n/r,r]}}Oe.black=new Oe(0,0,0,1),Oe.white=new Oe(1,1,1,1),Oe.transparent=new Oe(0,0,0,0),Oe.red=new Oe(1,0,0,1);class De{constructor(e,t,n){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ze{constructor(e,t,n,r,i){this.text=e,this.image=t,this.scale=n,this.fontStack=r,this.textColor=i}}class Le{constructor(e){this.sections=e}static fromString(e){return new Le([new ze(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((e=>0!==e.text.length||e.image&&0!==e.image.name.length))}static factory(e){return e instanceof Le?e:Le.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map((e=>e.text)).join("")}}class Re{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Re)return e;if("number"==typeof e)return new Re([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if("number"!=typeof t)return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]]}return new Re(e)}}toString(){return JSON.stringify(this.values)}}class Fe{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Fe({name:e,available:!1}):null}}function Ue(e,t,n,r){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:`Invalid rgba value [${[e,t,n,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof r?[e,t,n,r]:[e,t,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ne(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof Oe)return!0;if(e instanceof De)return!0;if(e instanceof Le)return!0;if(e instanceof Re)return!0;if(e instanceof Fe)return!0;if(Array.isArray(e)){for(const t of e)if(!Ne(t))return!1;return!0}if("object"==typeof e){for(const t in e)if(!Ne(e[t]))return!1;return!0}return!1}function je(e){if(null===e)return ue;if("string"==typeof e)return fe;if("boolean"==typeof e)return pe;if("number"==typeof e)return he;if(e instanceof Oe)return de;if(e instanceof De)return ye;if(e instanceof Le)return ve;if(e instanceof Re)return be;if(e instanceof Fe)return _e;if(Array.isArray(e)){const t=e.length;let n;for(const t of e){const e=je(t);if(n){if(n===e)continue;n=ge;break}n=e}return xe(n||ge,t)}return me}function Ve(e){const t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof Oe||e instanceof Le||e instanceof Re||e instanceof Fe?e.toString():JSON.stringify(e)}class Ge{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(2!==e.length)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Ne(e[1]))return t.error("invalid value");const n=e[1];let r=je(n);const i=t.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new Ge(r,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class qe{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const We={string:fe,number:he,boolean:pe,object:me};class He{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let n,r=1;const i=e[0];if("array"===i){let i,o;if(e.length>2){const n=e[1];if("string"!=typeof n||!(n in We)||"object"===n)return t.error('The item type argument of "array" must be one of string, number, boolean',1);i=We[n],r++}else i=ge;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);o=e[2],r++}n=xe(i,o)}else{if(!We[i])throw new Error(`Types doesn't contain name = ${i}`);n=We[i]}const o=[];for(;r<e.length;r++){const n=t.parse(e[r],r,ge);if(!n)return null;o.push(n)}return new He(n,o)}evaluate(e){for(let t=0;t<this.args.length;t++){const n=this.args[t].evaluate(e);if(!Ce(this.type,je(n)))return n;if(t===this.args.length-1)throw new qe(`Expected value to be of type ${Ae(this.type)}, but found ${Ae(je(n))} instead.`)}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}const $e={"to-boolean":pe,"to-color":de,"to-number":he,"to-string":fe};class Xe{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[0];if(!$e[n])throw new Error(`Can't parse ${n} as it is not part of the known types`);if(("to-boolean"===n||"to-string"===n)&&2!==e.length)return t.error("Expected one argument.");const r=$e[n],i=[];for(let n=1;n<e.length;n++){const r=t.parse(e[n],n,ge);if(!r)return null;i.push(r)}return new Xe(r,i)}evaluate(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){let t,n;for(const r of this.args){if(t=r.evaluate(e),n=null,t instanceof Oe)return t;if("string"==typeof t){const n=e.parseColor(t);if(n)return n}else if(Array.isArray(t)&&(n=t.length<3||t.length>4?`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:Ue(t[0],t[1],t[2],t[3]),!n))return new Oe(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new qe(n||`Could not parse color from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}if("padding"===this.type.kind){let t;for(const n of this.args){t=n.evaluate(e);const r=Re.parse(t);if(r)return r}throw new qe(`Could not parse padding from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}if("number"===this.type.kind){let t=null;for(const n of this.args){if(t=n.evaluate(e),null===t)return 0;const r=Number(t);if(!isNaN(r))return r}throw new qe(`Could not convert ${JSON.stringify(t)} to number.`)}return"formatted"===this.type.kind?Le.fromString(Ve(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Fe.fromString(Ve(this.args[0].evaluate(e))):Ve(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}const Ze=["Unknown","Point","LineString","Polygon"];class Ye{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Ze[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Oe.parse(e)),t}}class Ke{constructor(e,t,n,r){this.name=e,this.type=t,this._evaluate=n,this.args=r}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const n=e[0],r=Ke.definitions[n];if(!r)return t.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const i=Array.isArray(r)?r[0]:r.type,o=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=o.filter((([t])=>!Array.isArray(t)||t.length===e.length-1));let s=null;for(const[r,o]of a){s=new _t(t.registry,t.path,null,t.scope);const a=[];let l=!1;for(let t=1;t<e.length;t++){const n=e[t],i=Array.isArray(r)?r[t-1]:r.type,o=s.parse(n,1+a.length,i);if(!o){l=!0;break}a.push(o)}if(!l)if(Array.isArray(r)&&r.length!==a.length)s.error(`Expected ${r.length} arguments, but found ${a.length} instead.`);else{for(let e=0;e<a.length;e++){const t=Array.isArray(r)?r[e]:r.type,n=a[e];s.concat(e+1).checkSubtype(t,n.type)}if(0===s.errors.length)return new Ke(n,i,o,a)}}if(1===a.length)t.errors.push(...s.errors);else{const n=(a.length?a:o).map((([e])=>{return t=e,Array.isArray(t)?`(${t.map(Ae).join(", ")})`:`(${Ae(t.type)}...)`;var t})).join(" | "),r=[];for(let n=1;n<e.length;n++){const i=t.parse(e[n],1+r.length);if(!i)return null;r.push(Ae(i.type))}t.error(`Expected arguments of type ${n}, but found (${r.join(", ")}) instead.`)}return null}static register(e,t){Ke.definitions=t;for(const n in t)e[n]=Ke}}class Je{constructor(e,t,n){this.type=ye,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(2!==e.length)return t.error("Expected one argument.");const n=e[1];if("object"!=typeof n||Array.isArray(n))return t.error("Collator options argument must be an object.");const r=t.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,pe);if(!r)return null;const i=t.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,pe);if(!i)return null;let o=null;return n.locale&&(o=t.parse(n.locale,1,fe),!o)?null:new Je(r,i,o)}evaluate(e){return new De(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}const Qe=8192;function et(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function tt(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function nt(e,t){const n=(180+e[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,i=Math.pow(2,t.z);return[Math.round(n*i*Qe),Math.round(r*i*Qe)]}function rt(e,t,n){const r=e[0]-t[0],i=e[1]-t[1],o=e[0]-n[0],a=e[1]-n[1];return r*a-o*i==0&&r*o<=0&&i*a<=0}function it(e,t){let n=!1;for(let a=0,s=t.length;a<s;a++){const s=t[a];for(let t=0,a=s.length;t<a-1;t++){if(rt(e,s[t],s[t+1]))return!1;(i=s[t])[1]>(r=e)[1]!=(o=s[t+1])[1]>r[1]&&r[0]<(o[0]-i[0])*(r[1]-i[1])/(o[1]-i[1])+i[0]&&(n=!n)}}var r,i,o;return n}function ot(e,t){for(let n=0;n<t.length;n++)if(it(e,t[n]))return!0;return!1}function at(e,t,n,r){const i=r[0]-n[0],o=r[1]-n[1],a=(e[0]-n[0])*o-i*(e[1]-n[1]),s=(t[0]-n[0])*o-i*(t[1]-n[1]);return a>0&&s<0||a<0&&s>0}function st(e,t,n){for(const c of n)for(let n=0;n<c.length-1;++n)if(0!=(s=[(a=c[n+1])[0]-(o=c[n])[0],a[1]-o[1]])[0]*(l=[(i=t)[0]-(r=e)[0],i[1]-r[1]])[1]-s[1]*l[0]&&at(r,i,o,a)&&at(o,a,r,i))return!0;var r,i,o,a,s,l;return!1}function lt(e,t){for(let n=0;n<e.length;++n)if(!it(e[n],t))return!1;for(let n=0;n<e.length-1;++n)if(st(e[n],e[n+1],t))return!1;return!0}function ct(e,t){for(let n=0;n<t.length;n++)if(lt(e,t[n]))return!0;return!1}function ut(e,t,n){const r=[];for(let i=0;i<e.length;i++){const o=[];for(let r=0;r<e[i].length;r++){const a=nt(e[i][r],n);et(t,a),o.push(a)}r.push(o)}return r}function ht(e,t,n){const r=[];for(let i=0;i<e.length;i++){const o=ut(e[i],t,n);r.push(o)}return r}function ft(e,t,n,r){if(e[0]<n[0]||e[0]>n[2]){const t=.5*r;let i=e[0]-n[0]>t?-r:n[0]-e[0]>t?r:0;0===i&&(i=e[0]-n[2]>t?-r:n[2]-e[0]>t?r:0),e[0]+=i}et(t,e)}function pt(e,t,n,r){const i=Math.pow(2,r.z)*Qe,o=[r.x*Qe,r.y*Qe],a=[];for(const r of e)for(const e of r){const r=[e.x+o[0],e.y+o[1]];ft(r,t,n,i),a.push(r)}return a}function dt(e,t,n,r){const i=Math.pow(2,r.z)*Qe,o=[r.x*Qe,r.y*Qe],a=[];for(const n of e){const e=[];for(const r of n){const n=[r.x+o[0],r.y+o[1]];et(t,n),e.push(n)}a.push(e)}if(t[2]-t[0]<=i/2){(s=t)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const e of a)for(const r of e)ft(r,t,n,i)}var s;return a}class mt{constructor(e,t){this.type=pe,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Ne(e[1])){const t=e[1];if("FeatureCollection"===t.type)for(let e=0;e<t.features.length;++e){const n=t.features[e].geometry.type;if("Polygon"===n||"MultiPolygon"===n)return new mt(t,t.features[e].geometry)}else if("Feature"===t.type){const e=t.geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new mt(t,t.geometry)}else if("Polygon"===t.type||"MultiPolygon"===t.type)return new mt(t,t)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if("Polygon"===t.type){const o=ut(t.coordinates,r,i),a=pt(e.geometry(),n,r,i);if(!tt(n,r))return!1;for(const e of a)if(!it(e,o))return!1}if("MultiPolygon"===t.type){const o=ht(t.coordinates,r,i),a=pt(e.geometry(),n,r,i);if(!tt(n,r))return!1;for(const e of a)if(!ot(e,o))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if("Polygon"===t.type){const o=ut(t.coordinates,r,i),a=dt(e.geometry(),n,r,i);if(!tt(n,r))return!1;for(const e of a)if(!lt(e,o))return!1}if("MultiPolygon"===t.type){const o=ht(t.coordinates,r,i),a=dt(e.geometry(),n,r,i);if(!tt(n,r))return!1;for(const e of a)if(!ct(e,o))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function gt(e){if(e instanceof Ke){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof mt)return!1;let t=!0;return e.eachChild((e=>{t&&!gt(e)&&(t=!1)})),t}function yt(e){if(e instanceof Ke&&"feature-state"===e.name)return!1;let t=!0;return e.eachChild((e=>{t&&!yt(e)&&(t=!1)})),t}function vt(e,t){if(e instanceof Ke&&t.indexOf(e.name)>=0)return!1;let n=!0;return e.eachChild((e=>{n&&!vt(e,t)&&(n=!1)})),n}class bt{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");const n=e[1];return t.scope.has(n)?new bt(n,t.scope.get(n)):t.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class _t{constructor(e,t=[],n,r=new ce,i=[]){this.registry=e,this.path=t,this.key=t.map((e=>`[${e}]`)).join(""),this.scope=r,this.errors=i,this.expectedType=n}parse(e,t,n,r,i={}){return t?this.concat(t,n,r)._parse(e,i):this._parse(e,i)}_parse(e,t){function n(e,t,n){return"assert"===n?new He(t,[e]):"coerce"===n?new Xe(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=e[0];if("string"!=typeof r)return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const i=this.registry[r];if(i){let r=i.parse(e,this);if(!r)return null;if(this.expectedType){const e=this.expectedType,i=r.type;if("string"!==e.kind&&"number"!==e.kind&&"boolean"!==e.kind&&"object"!==e.kind&&"array"!==e.kind||"value"!==i.kind)if("color"!==e.kind&&"formatted"!==e.kind&&"resolvedImage"!==e.kind||"value"!==i.kind&&"string"!==i.kind)if("padding"!==e.kind||"value"!==i.kind&&"number"!==i.kind&&"array"!==i.kind){if(this.checkSubtype(e,i))return null}else r=n(r,e,t.typeAnnotation||"coerce");else r=n(r,e,t.typeAnnotation||"coerce");else r=n(r,e,t.typeAnnotation||"assert")}if(!(r instanceof Ge)&&"resolvedImage"!==r.type.kind&&xt(r)){const t=new Ye;try{r=new Ge(r.type,r.evaluate(t))}catch(e){return this.error(e.message),null}}return r}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,t,n){const r="number"==typeof e?this.path.concat(e):this.path,i=n?this.scope.concat(n):this.scope;return new _t(this.registry,r,t||null,i,this.errors)}error(e,...t){const n=`${this.key}${t.map((e=>`[${e}]`)).join("")}`;this.errors.push(new le(n,e))}checkSubtype(e,t){const n=Ce(e,t);return n&&this.error(n),n}}function xt(e){if(e instanceof bt)return xt(e.boundExpression);if(e instanceof Ke&&"error"===e.name)return!1;if(e instanceof Je)return!1;if(e instanceof mt)return!1;const t=e instanceof Xe||e instanceof He;let n=!0;return e.eachChild((e=>{n=t?n&&xt(e):n&&e instanceof Ge})),!!n&&gt(e)&&vt(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function At(e,t){const n=e.length-1;let r,i,o=0,a=n,s=0;for(;o<=a;)if(s=Math.floor((o+a)/2),r=e[s],i=e[s+1],r<=t){if(s===n||t<i)return s;o=s+1}else{if(!(r>t))throw new qe("Input is not a number.");a=s-1}return 0}class wt{constructor(e,t,n){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[e,t]of n)this.labels.push(e),this.outputs.push(t)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");const n=t.parse(e[1],1,he);if(!n)return null;const r=[];let i=null;t.expectedType&&"value"!==t.expectedType.kind&&(i=t.expectedType);for(let n=1;n<e.length;n+=2){const o=1===n?-1/0:e[n],a=e[n+1],s=n,l=n+1;if("number"!=typeof o)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(r.length&&r[r.length-1][0]>=o)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const c=t.parse(a,l,i);if(!c)return null;i=i||c.type,r.push([o,c])}return new wt(i,n,r)}evaluate(e){const t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);const i=t.length;return r>=t[i-1]?n[i-1].evaluate(e):n[At(t,r)].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}}function Ct(e,t,n){return e*(1-n)+t*n}var Et=Object.freeze({__proto__:null,number:Ct,color:function(e,t,n){return new Oe(Ct(e.r,t.r,n),Ct(e.g,t.g,n),Ct(e.b,t.b,n),Ct(e.a,t.a,n))},array:function(e,t,n){return e.map(((e,r)=>Ct(e,t[r],n)))},padding:function(e,t,n){const r=e.values,i=t.values;return new Re([Ct(r[0],i[0],n),Ct(r[1],i[1],n),Ct(r[2],i[2],n),Ct(r[3],i[3],n)])}});const St=.95047,Tt=1.08883,Bt=4/29,kt=6/29,Mt=3*kt*kt,Pt=Math.PI/180,It=180/Math.PI;function Ot(e){return e>.008856451679035631?Math.pow(e,1/3):e/Mt+Bt}function Dt(e){return e>kt?e*e*e:Mt*(e-Bt)}function zt(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Lt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Rt(e){const t=Lt(e.r),n=Lt(e.g),r=Lt(e.b),i=Ot((.4124564*t+.3575761*n+.1804375*r)/St),o=Ot((.2126729*t+.7151522*n+.072175*r)/1);return{l:116*o-16,a:500*(i-o),b:200*(o-Ot((.0193339*t+.119192*n+.9503041*r)/Tt)),alpha:e.a}}function Ft(e){let t=(e.l+16)/116,n=isNaN(e.a)?t:t+e.a/500,r=isNaN(e.b)?t:t-e.b/200;return t=1*Dt(t),n=St*Dt(n),r=Tt*Dt(r),new Oe(zt(3.2404542*n-1.5371385*t-.4985314*r),zt(-.969266*n+1.8760108*t+.041556*r),zt(.0556434*n-.2040259*t+1.0572252*r),e.alpha)}function Ut(e,t,n){const r=t-e;return e+n*(r>180||r<-180?r-360*Math.round(r/360):r)}const Nt={forward:Rt,reverse:Ft,interpolate:function(e,t,n){return{l:Ct(e.l,t.l,n),a:Ct(e.a,t.a,n),b:Ct(e.b,t.b,n),alpha:Ct(e.alpha,t.alpha,n)}}},jt={forward:function(e){const{l:t,a:n,b:r}=Rt(e),i=Math.atan2(r,n)*It;return{h:i<0?i+360:i,c:Math.sqrt(n*n+r*r),l:t,alpha:e.a}},reverse:function(e){const t=e.h*Pt,n=e.c;return Ft({l:e.l,a:Math.cos(t)*n,b:Math.sin(t)*n,alpha:e.alpha})},interpolate:function(e,t,n){return{h:Ut(e.h,t.h,n),c:Ct(e.c,t.c,n),l:Ct(e.l,t.l,n),alpha:Ct(e.alpha,t.alpha,n)}}};var Vt=Object.freeze({__proto__:null,lab:Nt,hcl:jt});class Gt{constructor(e,t,n,r,i){this.type=e,this.operator=t,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(const[e,t]of i)this.labels.push(e),this.outputs.push(t)}static interpolationFactor(e,n,r,i){let o=0;if("exponential"===e.name)o=qt(n,e.base,r,i);else if("linear"===e.name)o=qt(n,1,r,i);else if("cubic-bezier"===e.name){const a=e.controlPoints;o=new t(a[0],a[1],a[2],a[3]).solve(qt(n,1,r,i))}return o}static parse(e,t){let[n,r,i,...o]=e;if(!Array.isArray(r)||0===r.length)return t.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){const e=r[1];if("number"!=typeof e)return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:e}}else{if("cubic-bezier"!==r[0])return t.error(`Unknown interpolation type ${String(r[0])}`,1,0);{const e=r.slice(1);if(4!==e.length||e.some((e=>"number"!=typeof e||e<0||e>1)))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:e}}}if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(i=t.parse(i,2,he),!i)return null;const a=[];let s=null;"interpolate-hcl"===n||"interpolate-lab"===n?s=de:t.expectedType&&"value"!==t.expectedType.kind&&(s=t.expectedType);for(let e=0;e<o.length;e+=2){const n=o[e],r=o[e+1],i=e+3,l=e+4;if("number"!=typeof n)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',i);if(a.length&&a[a.length-1][0]>=n)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',i);const c=t.parse(r,l,s);if(!c)return null;s=s||c.type,a.push([n,c])}return"number"===s.kind||"color"===s.kind||"padding"===s.kind||"array"===s.kind&&"number"===s.itemType.kind&&"number"==typeof s.N?new Gt(s,n,r,i,a):t.error(`Type ${Ae(s)} is not interpolatable.`)}evaluate(e){const t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);const i=t.length;if(r>=t[i-1])return n[i-1].evaluate(e);const o=At(t,r),a=Gt.interpolationFactor(this.interpolation,r,t[o],t[o+1]),s=n[o].evaluate(e),l=n[o+1].evaluate(e);return"interpolate"===this.operator?Et[this.type.kind.toLowerCase()](s,l,a):"interpolate-hcl"===this.operator?jt.reverse(jt.interpolate(jt.forward(s),jt.forward(l),a)):Nt.reverse(Nt.interpolate(Nt.forward(s),Nt.forward(l),a))}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}}function qt(e,t,n,r){const i=r-n,o=e-n;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}class Wt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let n=null;const r=t.expectedType;r&&"value"!==r.kind&&(n=r);const i=[];for(const r of e.slice(1)){const e=t.parse(r,1+i.length,n,void 0,{typeAnnotation:"omit"});if(!e)return null;n=n||e.type,i.push(e)}if(!n)throw new Error("No output type");const o=r&&i.some((e=>Ce(r,e.type)));return new Wt(o?ge:n,i)}evaluate(e){let t,n=null,r=0;for(const i of this.args)if(r++,n=i.evaluate(e),n&&n instanceof Fe&&!n.available&&(t||(t=n.name),n=null,r===this.args.length&&(n=t)),null!==n)break;return n}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}class Ht{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const n=[];for(let r=1;r<e.length-1;r+=2){const i=e[r];if("string"!=typeof i)return t.error(`Expected string, but found ${typeof i} instead.`,r);if(/[^a-zA-Z0-9_]/.test(i))return t.error("Variable names must contain only alphanumeric characters or '_'.",r);const o=t.parse(e[r+1],r+1);if(!o)return null;n.push([i,o])}const r=t.parse(e[e.length-1],e.length-1,t.expectedType,n);return r?new Ht(n,r):null}outputDefined(){return this.result.outputDefined()}}class $t{constructor(e,t,n){this.type=e,this.index=t,this.input=n}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,he),r=t.parse(e[2],2,xe(t.expectedType||ge));return n&&r?new $t(r.type.itemType,n,r):null}evaluate(e){const t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new qe(`Array index out of bounds: ${t} < 0.`);if(t>=n.length)throw new qe(`Array index out of bounds: ${t} > ${n.length-1}.`);if(t!==Math.floor(t))throw new qe(`Array index must be an integer, but found ${t} instead.`);return n[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class Xt{constructor(e,t){this.type=pe,this.needle=e,this.haystack=t}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,ge),r=t.parse(e[2],2,ge);return n&&r?Ee(n.type,[pe,fe,he,ue,ge])?new Xt(n,r):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ae(n.type)} instead`):null}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!n)return!1;if(!Se(t,["boolean","string","number","null"]))throw new qe(`Expected first argument to be of type boolean, string, number or null, but found ${Ae(je(t))} instead.`);if(!Se(n,["string","array"]))throw new qe(`Expected second argument to be of type array or string, but found ${Ae(je(n))} instead.`);return n.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class Zt{constructor(e,t,n){this.type=he,this.needle=e,this.haystack=t,this.fromIndex=n}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,ge),r=t.parse(e[2],2,ge);if(!n||!r)return null;if(!Ee(n.type,[pe,fe,he,ue,ge]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ae(n.type)} instead`);if(4===e.length){const i=t.parse(e[3],3,he);return i?new Zt(n,r,i):null}return new Zt(n,r)}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!Se(t,["boolean","string","number","null"]))throw new qe(`Expected first argument to be of type boolean, string, number or null, but found ${Ae(je(t))} instead.`);if(!Se(n,["string","array"]))throw new qe(`Expected second argument to be of type array or string, but found ${Ae(je(n))} instead.`);if(this.fromIndex){const r=this.fromIndex.evaluate(e);return n.indexOf(t,r)}return n.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class Yt{constructor(e,t,n,r,i,o){this.inputType=e,this.type=t,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return t.error("Expected an even number of arguments.");let n,r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);const i={},o=[];for(let a=2;a<e.length-1;a+=2){let s=e[a];const l=e[a+1];Array.isArray(s)||(s=[s]);const c=t.concat(a);if(0===s.length)return c.error("Expected at least one branch label.");for(const e of s){if("number"!=typeof e&&"string"!=typeof e)return c.error("Branch labels must be numbers or strings.");if("number"==typeof e&&Math.abs(e)>Number.MAX_SAFE_INTEGER)return c.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof e&&Math.floor(e)!==e)return c.error("Numeric branch labels must be integer values.");if(n){if(c.checkSubtype(n,je(e)))return null}else n=je(e);if(void 0!==i[String(e)])return c.error("Branch labels must be unique.");i[String(e)]=o.length}const u=t.parse(l,a,r);if(!u)return null;r=r||u.type,o.push(u)}const a=t.parse(e[1],1,ge);if(!a)return null;const s=t.parse(e[e.length-1],e.length-1,r);return s?"value"!==a.type.kind&&t.concat(1).checkSubtype(n,a.type)?null:new Yt(n,r,a,i,o,s):null}evaluate(e){const t=this.input.evaluate(e);return(je(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))&&this.otherwise.outputDefined()}}class Kt{constructor(e,t,n){this.type=e,this.branches=t,this.otherwise=n}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return t.error("Expected an odd number of arguments.");let n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);const r=[];for(let i=1;i<e.length-1;i+=2){const o=t.parse(e[i],i,pe);if(!o)return null;const a=t.parse(e[i+1],i+1,n);if(!a)return null;r.push([o,a]),n=n||a.type}const i=t.parse(e[e.length-1],e.length-1,n);if(!i)return null;if(!n)throw new Error("Can't infer output type");return new Kt(n,r,i)}evaluate(e){for(const[t,n]of this.branches)if(t.evaluate(e))return n.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,n]of this.branches)e(t),e(n);e(this.otherwise)}outputDefined(){return this.branches.every((([e,t])=>t.outputDefined()))&&this.otherwise.outputDefined()}}class Jt{constructor(e,t,n,r){this.type=e,this.input=t,this.beginIndex=n,this.endIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,ge),r=t.parse(e[2],2,he);if(!n||!r)return null;if(!Ee(n.type,[xe(ge),fe,ge]))return t.error(`Expected first argument to be of type array or string, but found ${Ae(n.type)} instead`);if(4===e.length){const i=t.parse(e[3],3,he);return i?new Jt(n.type,n,r,i):null}return new Jt(n.type,n,r)}evaluate(e){const t=this.input.evaluate(e),n=this.beginIndex.evaluate(e);if(!Se(t,["string","array"]))throw new qe(`Expected first argument to be of type array or string, but found ${Ae(je(t))} instead.`);if(this.endIndex){const r=this.endIndex.evaluate(e);return t.slice(n,r)}return t.slice(n)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function Qt(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function en(e,t,n,r){return 0===r.compare(t,n)}function tn(e,t,n){const r="=="!==e&&"!="!==e;return class i{constructor(e,t,n){this.type=pe,this.lhs=e,this.rhs=t,this.collator=n,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}static parse(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");const n=e[0];let o=t.parse(e[1],1,ge);if(!o)return null;if(!Qt(n,o.type))return t.concat(1).error(`"${n}" comparisons are not supported for type '${Ae(o.type)}'.`);let a=t.parse(e[2],2,ge);if(!a)return null;if(!Qt(n,a.type))return t.concat(2).error(`"${n}" comparisons are not supported for type '${Ae(a.type)}'.`);if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error(`Cannot compare types '${Ae(o.type)}' and '${Ae(a.type)}'.`);r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new He(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new He(o.type,[a])));let s=null;if(4===e.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error("Cannot use collator to compare non-string types.");if(s=t.parse(e[3],3,ye),!s)return null}return new i(o,a,s)}evaluate(i){const o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){const t=je(o),n=je(a);if(t.kind!==n.kind||"string"!==t.kind&&"number"!==t.kind)throw new qe(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${t.kind}, ${n.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const e=je(o),n=je(a);if("string"!==e.kind||"string"!==n.kind)return t(i,o,a)}return this.collator?n(i,o,a,this.collator.evaluate(i)):t(i,o,a)}eachChild(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}outputDefined(){return!0}}}const nn=tn("==",(function(e,t,n){return t===n}),en),rn=tn("!=",(function(e,t,n){return t!==n}),(function(e,t,n,r){return!en(0,t,n,r)})),on=tn("<",(function(e,t,n){return t<n}),(function(e,t,n,r){return r.compare(t,n)<0})),an=tn(">",(function(e,t,n){return t>n}),(function(e,t,n,r){return r.compare(t,n)>0})),sn=tn("<=",(function(e,t,n){return t<=n}),(function(e,t,n,r){return r.compare(t,n)<=0})),ln=tn(">=",(function(e,t,n){return t>=n}),(function(e,t,n,r){return r.compare(t,n)>=0}));class cn{constructor(e,t,n,r,i){this.type=fe,this.number=e,this.locale=t,this.currency=n,this.minFractionDigits=r,this.maxFractionDigits=i}static parse(e,t){if(3!==e.length)return t.error("Expected two arguments.");const n=t.parse(e[1],1,he);if(!n)return null;const r=e[2];if("object"!=typeof r||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");let i=null;if(r.locale&&(i=t.parse(r.locale,1,fe),!i))return null;let o=null;if(r.currency&&(o=t.parse(r.currency,1,fe),!o))return null;let a=null;if(r["min-fraction-digits"]&&(a=t.parse(r["min-fraction-digits"],1,he),!a))return null;let s=null;return r["max-fraction-digits"]&&(s=t.parse(r["max-fraction-digits"],1,he),!s)?null:new cn(n,i,o,a,s)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class un{constructor(e){this.type=ve,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[1];if(!Array.isArray(n)&&"object"==typeof n)return t.error("First argument must be an image or text section.");const r=[];let i=!1;for(let n=1;n<=e.length-1;++n){const o=e[n];if(i&&"object"==typeof o&&!Array.isArray(o)){i=!1;let e=null;if(o["font-scale"]&&(e=t.parse(o["font-scale"],1,he),!e))return null;let n=null;if(o["text-font"]&&(n=t.parse(o["text-font"],1,xe(fe)),!n))return null;let a=null;if(o["text-color"]&&(a=t.parse(o["text-color"],1,de),!a))return null;const s=r[r.length-1];s.scale=e,s.font=n,s.textColor=a}else{const o=t.parse(e[n],1,ge);if(!o)return null;const a=o.type.kind;if("string"!==a&&"value"!==a&&"null"!==a&&"resolvedImage"!==a)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,r.push({content:o,scale:null,font:null,textColor:null})}}return new un(r)}evaluate(e){return new Le(this.sections.map((t=>{const n=t.content.evaluate(e);return je(n)===_e?new ze("",n,null,null,null):new ze(Ve(n),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)})))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}}class hn{constructor(e){this.type=_e,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected two arguments.");const n=t.parse(e[1],1,fe);return n?new hn(n):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),n=Fe.fromString(t);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(t)>-1),n}eachChild(e){e(this.input)}outputDefined(){return!1}}class fn{constructor(e){this.type=he,this.input=e}static parse(e,t){if(2!==e.length)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const n=t.parse(e[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?t.error(`Expected argument of type string or array, but found ${Ae(n.type)} instead.`):new fn(n):null}evaluate(e){const t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new qe(`Expected value to be of type string or array, but found ${Ae(je(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const pn={"==":nn,"!=":rn,">":an,"<":on,">=":ln,"<=":sn,array:He,at:$t,boolean:He,case:Kt,coalesce:Wt,collator:Je,format:un,image:hn,in:Xt,"index-of":Zt,interpolate:Gt,"interpolate-hcl":Gt,"interpolate-lab":Gt,length:fn,let:Ht,literal:Ge,match:Yt,number:He,"number-format":cn,object:He,slice:Jt,step:wt,string:He,"to-boolean":Xe,"to-color":Xe,"to-number":Xe,"to-string":Xe,var:bt,within:mt};function dn(e,[t,n,r,i]){t=t.evaluate(e),n=n.evaluate(e),r=r.evaluate(e);const o=i?i.evaluate(e):1,a=Ue(t,n,r,o);if(a)throw new qe(a);return new Oe(t/255*o,n/255*o,r/255*o,o)}function mn(e,t){return e in t}function gn(e,t){const n=t[e];return void 0===n?null:n}function yn(e){return{type:e}}function vn(e){return{result:"success",value:e}}function bn(e){return{result:"error",value:e}}function _n(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function xn(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function An(e){return!!e.expression&&e.expression.interpolated}function wn(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Cn(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function En(e){return e}function Sn(e,t){const n="color"===t.type,r=e.stops&&"object"==typeof e.stops[0][0],i=r||!(r||void 0!==e.property),o=e.type||(An(t)?"exponential":"interval");if(n||"padding"===t.type){const r=n?Oe.parse:Re.parse;(e=oe({},e)).stops&&(e.stops=e.stops.map((e=>[e[0],r(e[1])]))),e.default=r(e.default?e.default:t.default)}if(e.colorSpace&&"rgb"!==e.colorSpace&&!Vt[e.colorSpace])throw new Error(`Unknown color space: ${e.colorSpace}`);let a,s,l;if("exponential"===o)a=Mn;else if("interval"===o)a=kn;else if("categorical"===o){a=Bn,s=Object.create(null);for(const t of e.stops)s[t[0]]=t[1];l=typeof e.stops[0][0]}else{if("identity"!==o)throw new Error(`Unknown function type "${o}"`);a=Pn}if(r){const n={},r=[];for(let t=0;t<e.stops.length;t++){const i=e.stops[t],o=i[0].zoom;void 0===n[o]&&(n[o]={zoom:o,type:e.type,property:e.property,default:e.default,stops:[]},r.push(o)),n[o].stops.push([i[0].value,i[1]])}const i=[];for(const e of r)i.push([n[e].zoom,Sn(n[e],t)]);const o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:Gt.interpolationFactor.bind(void 0,o),zoomStops:i.map((e=>e[0])),evaluate:({zoom:n},r)=>Mn({stops:i,base:e.base},t,n).evaluate(n,r)}}if(i){const n="exponential"===o?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:n,interpolationFactor:Gt.interpolationFactor.bind(void 0,n),zoomStops:e.stops.map((e=>e[0])),evaluate:({zoom:n})=>a(e,t,n,s,l)}}return{kind:"source",evaluate(n,r){const i=r&&r.properties?r.properties[e.property]:void 0;return void 0===i?Tn(e.default,t.default):a(e,t,i,s,l)}}}function Tn(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function Bn(e,t,n,r,i){return Tn(typeof n===i?r[n]:void 0,e.default,t.default)}function kn(e,t,n){if("number"!==wn(n))return Tn(e.default,t.default);const r=e.stops.length;if(1===r)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[r-1][0])return e.stops[r-1][1];const i=At(e.stops.map((e=>e[0])),n);return e.stops[i][1]}function Mn(e,t,n){const r=void 0!==e.base?e.base:1;if("number"!==wn(n))return Tn(e.default,t.default);const i=e.stops.length;if(1===i)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[i-1][0])return e.stops[i-1][1];const o=At(e.stops.map((e=>e[0])),n),a=function(e,t,n,r){const i=r-n,o=e-n;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}(n,r,e.stops[o][0],e.stops[o+1][0]),s=e.stops[o][1],l=e.stops[o+1][1];let c=Et[t.type]||En;if(e.colorSpace&&"rgb"!==e.colorSpace){const t=Vt[e.colorSpace];c=(e,n)=>t.reverse(t.interpolate(t.forward(e),t.forward(n),a))}return"function"==typeof s.evaluate?{evaluate(...e){const t=s.evaluate.apply(void 0,e),n=l.evaluate.apply(void 0,e);if(void 0!==t&&void 0!==n)return c(t,n,a)}}:c(s,l,a)}function Pn(e,t,n){switch(t.type){case"color":n=Oe.parse(n);break;case"formatted":n=Le.fromString(n.toString());break;case"resolvedImage":n=Fe.fromString(n.toString());break;case"padding":n=Re.parse(n);break;default:wn(n)===t.type||"enum"===t.type&&t.values[n]||(n=void 0)}return Tn(n,e.default,t.default)}Ke.register(pn,{error:[{kind:"error"},[fe],(e,[t])=>{throw new qe(t.evaluate(e))}],typeof:[fe,[ge],(e,[t])=>Ae(je(t.evaluate(e)))],"to-rgba":[xe(he,4),[de],(e,[t])=>t.evaluate(e).toArray()],rgb:[de,[he,he,he],dn],rgba:[de,[he,he,he,he],dn],has:{type:pe,overloads:[[[fe],(e,[t])=>mn(t.evaluate(e),e.properties())],[[fe,me],(e,[t,n])=>mn(t.evaluate(e),n.evaluate(e))]]},get:{type:ge,overloads:[[[fe],(e,[t])=>gn(t.evaluate(e),e.properties())],[[fe,me],(e,[t,n])=>gn(t.evaluate(e),n.evaluate(e))]]},"feature-state":[ge,[fe],(e,[t])=>gn(t.evaluate(e),e.featureState||{})],properties:[me,[],e=>e.properties()],"geometry-type":[fe,[],e=>e.geometryType()],id:[ge,[],e=>e.id()],zoom:[he,[],e=>e.globals.zoom],"heatmap-density":[he,[],e=>e.globals.heatmapDensity||0],"line-progress":[he,[],e=>e.globals.lineProgress||0],accumulated:[ge,[],e=>void 0===e.globals.accumulated?null:e.globals.accumulated],"+":[he,yn(he),(e,t)=>{let n=0;for(const r of t)n+=r.evaluate(e);return n}],"*":[he,yn(he),(e,t)=>{let n=1;for(const r of t)n*=r.evaluate(e);return n}],"-":{type:he,overloads:[[[he,he],(e,[t,n])=>t.evaluate(e)-n.evaluate(e)],[[he],(e,[t])=>-t.evaluate(e)]]},"/":[he,[he,he],(e,[t,n])=>t.evaluate(e)/n.evaluate(e)],"%":[he,[he,he],(e,[t,n])=>t.evaluate(e)%n.evaluate(e)],ln2:[he,[],()=>Math.LN2],pi:[he,[],()=>Math.PI],e:[he,[],()=>Math.E],"^":[he,[he,he],(e,[t,n])=>Math.pow(t.evaluate(e),n.evaluate(e))],sqrt:[he,[he],(e,[t])=>Math.sqrt(t.evaluate(e))],log10:[he,[he],(e,[t])=>Math.log(t.evaluate(e))/Math.LN10],ln:[he,[he],(e,[t])=>Math.log(t.evaluate(e))],log2:[he,[he],(e,[t])=>Math.log(t.evaluate(e))/Math.LN2],sin:[he,[he],(e,[t])=>Math.sin(t.evaluate(e))],cos:[he,[he],(e,[t])=>Math.cos(t.evaluate(e))],tan:[he,[he],(e,[t])=>Math.tan(t.evaluate(e))],asin:[he,[he],(e,[t])=>Math.asin(t.evaluate(e))],acos:[he,[he],(e,[t])=>Math.acos(t.evaluate(e))],atan:[he,[he],(e,[t])=>Math.atan(t.evaluate(e))],min:[he,yn(he),(e,t)=>Math.min(...t.map((t=>t.evaluate(e))))],max:[he,yn(he),(e,t)=>Math.max(...t.map((t=>t.evaluate(e))))],abs:[he,[he],(e,[t])=>Math.abs(t.evaluate(e))],round:[he,[he],(e,[t])=>{const n=t.evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[he,[he],(e,[t])=>Math.floor(t.evaluate(e))],ceil:[he,[he],(e,[t])=>Math.ceil(t.evaluate(e))],"filter-==":[pe,[fe,ge],(e,[t,n])=>e.properties()[t.value]===n.value],"filter-id-==":[pe,[ge],(e,[t])=>e.id()===t.value],"filter-type-==":[pe,[fe],(e,[t])=>e.geometryType()===t.value],"filter-<":[pe,[fe,ge],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r<i}],"filter-id-<":[pe,[ge],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n<r}],"filter->":[pe,[fe,ge],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r>i}],"filter-id->":[pe,[ge],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n>r}],"filter-<=":[pe,[fe,ge],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r<=i}],"filter-id-<=":[pe,[ge],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n<=r}],"filter->=":[pe,[fe,ge],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r>=i}],"filter-id->=":[pe,[ge],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n>=r}],"filter-has":[pe,[ge],(e,[t])=>t.value in e.properties()],"filter-has-id":[pe,[],e=>null!==e.id()&&void 0!==e.id()],"filter-type-in":[pe,[xe(fe)],(e,[t])=>t.value.indexOf(e.geometryType())>=0],"filter-id-in":[pe,[xe(ge)],(e,[t])=>t.value.indexOf(e.id())>=0],"filter-in-small":[pe,[fe,xe(ge)],(e,[t,n])=>n.value.indexOf(e.properties()[t.value])>=0],"filter-in-large":[pe,[fe,xe(ge)],(e,[t,n])=>function(e,t,n,r){for(;n<=r;){const i=n+r>>1;if(t[i]===e)return!0;t[i]>e?r=i-1:n=i+1}return!1}(e.properties()[t.value],n.value,0,n.value.length-1)],all:{type:pe,overloads:[[[pe,pe],(e,[t,n])=>t.evaluate(e)&&n.evaluate(e)],[yn(pe),(e,t)=>{for(const n of t)if(!n.evaluate(e))return!1;return!0}]]},any:{type:pe,overloads:[[[pe,pe],(e,[t,n])=>t.evaluate(e)||n.evaluate(e)],[yn(pe),(e,t)=>{for(const n of t)if(n.evaluate(e))return!0;return!1}]]},"!":[pe,[pe],(e,[t])=>!t.evaluate(e)],"is-supported-script":[pe,[fe],(e,[t])=>{const n=e.globals&&e.globals.isSupportedScript;return!n||n(t.evaluate(e))}],upcase:[fe,[fe],(e,[t])=>t.evaluate(e).toUpperCase()],downcase:[fe,[fe],(e,[t])=>t.evaluate(e).toLowerCase()],concat:[fe,yn(ge),(e,t)=>t.map((t=>Ve(t.evaluate(e)))).join("")],"resolved-locale":[fe,[ye],(e,[t])=>t.evaluate(e).resolvedLocale()]});class In{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Ye,this._defaultValue=t?function(e){return"color"===e.type&&Cn(e.default)?new Oe(0,0,0,0):"color"===e.type?Oe.parse(e.default)||null:"padding"===e.type?Re.parse(e.default)||null:void 0===e.default?null:e.default}(t):null,this._enumValues=t&&"enum"===t.type?t.values:null}evaluateWithoutErrorHandling(e,t,n,r,i,o){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)}evaluate(e,t,n,r,i,o){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null;try{const e=this.expression.evaluate(this._evaluator);if(null==e||"number"==typeof e&&e!=e)return this._defaultValue;if(this._enumValues&&!(e in this._enumValues))throw new qe(`Expected value to be one of ${Object.keys(this._enumValues).map((e=>JSON.stringify(e))).join(", ")}, but found ${JSON.stringify(e)} instead.`);return e}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}function On(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in pn}function Dn(e,t){const n=new _t(pn,[],t?function(e){const t={color:de,string:fe,number:he,enum:fe,boolean:pe,formatted:ve,padding:be,resolvedImage:_e};return"array"===e.type?xe(t[e.value]||ge,e.length):t[e.type]}(t):void 0),r=n.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return r?vn(new In(r,t)):bn(n.errors)}class zn{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!yt(t.expression)}evaluateWithoutErrorHandling(e,t,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,o)}evaluate(e,t,n,r,i,o){return this._styleExpression.evaluate(e,t,n,r,i,o)}}class Ln{constructor(e,t,n,r){this.kind=e,this.zoomStops=n,this._styleExpression=t,this.isStateDependent="camera"!==e&&!yt(t.expression),this.interpolationType=r}evaluateWithoutErrorHandling(e,t,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,o)}evaluate(e,t,n,r,i,o){return this._styleExpression.evaluate(e,t,n,r,i,o)}interpolationFactor(e,t,n){return this.interpolationType?Gt.interpolationFactor(this.interpolationType,e,t,n):0}}function Rn(e,t){const n=Dn(e,t);if("error"===n.result)return n;const r=n.value.expression,i=gt(r);if(!i&&!_n(t))return bn([new le("","data expressions not supported")]);const o=vt(r,["zoom"]);if(!o&&!xn(t))return bn([new le("","zoom expressions not supported")]);const a=Un(r);return a||o?a instanceof le?bn([a]):a instanceof Gt&&!An(t)?bn([new le("",'"interpolate" expressions cannot be used with this property')]):vn(a?new Ln(i?"camera":"composite",n.value,a.labels,a instanceof Gt?a.interpolation:void 0):new zn(i?"constant":"source",n.value)):bn([new le("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Fn{constructor(e,t){this._parameters=e,this._specification=t,oe(this,Sn(this._parameters,this._specification))}static deserialize(e){return new Fn(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Un(e){let t=null;if(e instanceof Ht)t=Un(e.result);else if(e instanceof Wt){for(const n of e.args)if(t=Un(n),t)break}else(e instanceof wt||e instanceof Gt)&&e.input instanceof Ke&&"zoom"===e.input.name&&(t=e);return t instanceof le||e.eachChild((e=>{const n=Un(e);n instanceof le?t=n:!t&&n?t=new le("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&n&&t!==n&&(t=new le("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),t}function Nn(e){const t=e.key,n=e.value,r=e.valueSpec||{},i=e.objectElementValidators||{},o=e.style,a=e.styleSpec;let s=[];const l=wn(n);if("object"!==l)return[new re(t,n,`object expected, ${l} found`)];for(const e in n){const l=e.split(".")[0],c=r[l]||r["*"];let u;if(i[l])u=i[l];else if(r[l])u=dr;else if(i["*"])u=i["*"];else{if(!r["*"]){s.push(new re(t,n[e],`unknown property "${e}"`));continue}u=dr}s=s.concat(u({key:(t?`${t}.`:t)+e,value:n[e],valueSpec:c,style:o,styleSpec:a,object:n,objectKey:e},n))}for(const e in r)i[e]||r[e].required&&void 0===r[e].default&&void 0===n[e]&&s.push(new re(t,n,`missing required property "${e}"`));return s}function jn(e){const t=e.value,n=e.valueSpec,r=e.style,i=e.styleSpec,o=e.key,a=e.arrayElementValidator||dr;if("array"!==wn(t))return[new re(o,t,`array expected, ${wn(t)} found`)];if(n.length&&t.length!==n.length)return[new re(o,t,`array length ${n.length} expected, length ${t.length} found`)];if(n["min-length"]&&t.length<n["min-length"])return[new re(o,t,`array length at least ${n["min-length"]} expected, length ${t.length} found`)];let s={type:n.value,values:n.values};i.$version<7&&(s.function=n.function),"object"===wn(n.value)&&(s=n.value);let l=[];for(let e=0;e<t.length;e++)l=l.concat(a({array:t,arrayIndex:e,value:t[e],valueSpec:s,style:r,styleSpec:i,key:`${o}[${e}]`}));return l}function Vn(e){const t=e.key,n=e.value,r=e.valueSpec;let i=wn(n);return"number"===i&&n!=n&&(i="NaN"),"number"!==i?[new re(t,n,`number expected, ${i} found`)]:"minimum"in r&&n<r.minimum?[new re(t,n,`${n} is less than the minimum value ${r.minimum}`)]:"maximum"in r&&n>r.maximum?[new re(t,n,`${n} is greater than the maximum value ${r.maximum}`)]:[]}function Gn(e){const t=e.valueSpec,n=ae(e.value.type);let r,i,o,a={};const s="categorical"!==n&&void 0===e.value.property,l=!s,c="array"===wn(e.value.stops)&&"array"===wn(e.value.stops[0])&&"object"===wn(e.value.stops[0][0]),u=Nn({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===n)return[new re(e.key,e.value,'identity function may not have a "stops" property')];let t=[];const r=e.value;return t=t.concat(jn({key:e.key,value:r,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:h})),"array"===wn(r)&&0===r.length&&t.push(new re(e.key,r,"array must have at least one stop")),t},default:function(e){return dr({key:e.key,value:e.value,valueSpec:t,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===n&&s&&u.push(new re(e.key,e.value,'missing required property "property"')),"identity"===n||e.value.stops||u.push(new re(e.key,e.value,'missing required property "stops"')),"exponential"===n&&e.valueSpec.expression&&!An(e.valueSpec)&&u.push(new re(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!_n(e.valueSpec)?u.push(new re(e.key,e.value,"property functions not supported")):s&&!xn(e.valueSpec)&&u.push(new re(e.key,e.value,"zoom functions not supported"))),"categorical"!==n&&!c||void 0!==e.value.property||u.push(new re(e.key,e.value,'"property" property is required')),u;function h(e){let n=[];const r=e.value,s=e.key;if("array"!==wn(r))return[new re(s,r,`array expected, ${wn(r)} found`)];if(2!==r.length)return[new re(s,r,`array length 2 expected, length ${r.length} found`)];if(c){if("object"!==wn(r[0]))return[new re(s,r,`object expected, ${wn(r[0])} found`)];if(void 0===r[0].zoom)return[new re(s,r,"object stop key must have zoom")];if(void 0===r[0].value)return[new re(s,r,"object stop key must have value")];if(o&&o>ae(r[0].zoom))return[new re(s,r[0].zoom,"stop zoom values must appear in ascending order")];ae(r[0].zoom)!==o&&(o=ae(r[0].zoom),i=void 0,a={}),n=n.concat(Nn({key:`${s}[0]`,value:r[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:Vn,value:f}}))}else n=n.concat(f({key:`${s}[0]`,value:r[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},r));return On(se(r[1]))?n.concat([new re(`${s}[1]`,r[1],"expressions are not allowed in function stops.")]):n.concat(dr({key:`${s}[1]`,value:r[1],valueSpec:t,style:e.style,styleSpec:e.styleSpec}))}function f(e,o){const s=wn(e.value),l=ae(e.value),c=null!==e.value?e.value:o;if(r){if(s!==r)return[new re(e.key,c,`${s} stop domain type must match previous stop domain type ${r}`)]}else r=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new re(e.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==n){let r=`number expected, ${s} found`;return _n(t)&&void 0===n&&(r+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new re(e.key,c,r)]}return"categorical"!==n||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==n&&"number"===s&&void 0!==i&&l<i?[new re(e.key,c,"stop domain values must appear in ascending order")]:(i=l,"categorical"===n&&l in a?[new re(e.key,c,"stop domain values must be unique")]:(a[l]=!0,[])):[new re(e.key,c,`integer expected, found ${l}`)]}}function qn(e){const t=("property"===e.expressionContext?Rn:Dn)(se(e.value),e.valueSpec);if("error"===t.result)return t.value.map((t=>new re(`${e.key}${t.key}`,e.value,t.message)));const n=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!n.outputDefined())return[new re(e.key,e.value,`Invalid data expression for "${e.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===e.expressionContext&&"layout"===e.propertyType&&!yt(n))return[new re(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!yt(n))return[new re(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!vt(n,["zoom","feature-state"]))return[new re(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!gt(n))return[new re(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Wn(e){const t=e.key,n=e.value,r=e.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(ae(n))&&i.push(new re(t,n,`expected one of [${r.values.join(", ")}], ${JSON.stringify(n)} found`)):-1===Object.keys(r.values).indexOf(ae(n))&&i.push(new re(t,n,`expected one of [${Object.keys(r.values).join(", ")}], ${JSON.stringify(n)} found`)),i}function Hn(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!Hn(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}const $n={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Xn(e){if(null==e)return{filter:()=>!0,needGeometry:!1};Hn(e)||(e=Kn(e));const t=Dn(e,$n);if("error"===t.result)throw new Error(t.value.map((e=>`${e.key}: ${e.message}`)).join(", "));return{filter:(e,n,r)=>t.value.evaluate(e,n,{},r),needGeometry:Yn(e)}}function Zn(e,t){return e<t?-1:e>t?1:0}function Yn(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(let t=1;t<e.length;t++)if(Yn(e[t]))return!0;return!1}function Kn(e){if(!e)return!0;const t=e[0];return e.length<=1?"any"!==t:"=="===t?Jn(e[1],e[2],"=="):"!="===t?tr(Jn(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?Jn(e[1],e[2],t):"any"===t?(n=e.slice(1),["any"].concat(n.map(Kn))):"all"===t?["all"].concat(e.slice(1).map(Kn)):"none"===t?["all"].concat(e.slice(1).map(Kn).map(tr)):"in"===t?Qn(e[1],e.slice(2)):"!in"===t?tr(Qn(e[1],e.slice(2))):"has"===t?er(e[1]):"!has"===t?tr(er(e[1])):"within"!==t||e;var n}function Jn(e,t,n){switch(e){case"$type":return[`filter-type-${n}`,t];case"$id":return[`filter-id-${n}`,t];default:return[`filter-${n}`,e,t]}}function Qn(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((e=>typeof e!=typeof t[0]))?["filter-in-large",e,["literal",t.sort(Zn)]]:["filter-in-small",e,["literal",t]]}}function er(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function tr(e){return["!",e]}function nr(e){return Hn(se(e.value))?qn(oe({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):rr(e)}function rr(e){const t=e.value,n=e.key;if("array"!==wn(t))return[new re(n,t,`array expected, ${wn(t)} found`)];const r=e.styleSpec;let i,o=[];if(t.length<1)return[new re(n,t,"filter array must have at least 1 element")];switch(o=o.concat(Wn({key:`${n}[0]`,value:t[0],valueSpec:r.filter_operator,style:e.style,styleSpec:e.styleSpec})),ae(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===ae(t[1])&&o.push(new re(n,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":3!==t.length&&o.push(new re(n,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(i=wn(t[1]),"string"!==i&&o.push(new re(`${n}[1]`,t[1],`string expected, ${i} found`)));for(let a=2;a<t.length;a++)i=wn(t[a]),"$type"===ae(t[1])?o=o.concat(Wn({key:`${n}[${a}]`,value:t[a],valueSpec:r.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&o.push(new re(`${n}[${a}]`,t[a],`string, number, or boolean expected, ${i} found`));break;case"any":case"all":case"none":for(let r=1;r<t.length;r++)o=o.concat(rr({key:`${n}[${r}]`,value:t[r],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=wn(t[1]),2!==t.length?o.push(new re(n,t,`filter array for "${t[0]}" operator must have 2 elements`)):"string"!==i&&o.push(new re(`${n}[1]`,t[1],`string expected, ${i} found`));break;case"within":i=wn(t[1]),2!==t.length?o.push(new re(n,t,`filter array for "${t[0]}" operator must have 2 elements`)):"object"!==i&&o.push(new re(`${n}[1]`,t[1],`object expected, ${i} found`))}return o}function ir(e,t){const n=e.key,r=e.style,i=e.styleSpec,o=e.value,a=e.objectKey,s=i[`${t}_${e.layerType}`];if(!s)return[];const l=a.match(/^(.*)-transition$/);if("paint"===t&&l&&s[l[1]]&&s[l[1]].transition)return dr({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});const c=e.valueSpec||s[a];if(!c)return[new re(n,o,`unknown property "${a}"`)];let u;if("string"===wn(o)&&_n(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(o)))return[new re(n,o,`"${a}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(u[1])} }\`.`)];const h=[];return"symbol"===e.layerType&&("text-field"===a&&r&&!r.glyphs&&h.push(new re(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Cn(se(o))&&"identity"===ae(o.type)&&h.push(new re(n,o,'"text-font" does not support identity functions'))),h.concat(dr({key:e.key,value:o,valueSpec:c,style:r,styleSpec:i,expressionContext:"property",propertyType:t,propertyKey:a}))}function or(e){return ir(e,"paint")}function ar(e){return ir(e,"layout")}function sr(e){let t=[];const n=e.value,r=e.key,i=e.style,o=e.styleSpec;n.type||n.ref||t.push(new re(r,n,'either "type" or "ref" is required'));let a=ae(n.type);const s=ae(n.ref);if(n.id){const o=ae(n.id);for(let a=0;a<e.arrayIndex;a++){const e=i.layers[a];ae(e.id)===o&&t.push(new re(r,n.id,`duplicate layer id "${n.id}", previously used at line ${e.id.__line__}`))}}if("ref"in n){let e;["type","source","source-layer","filter","layout"].forEach((e=>{e in n&&t.push(new re(r,n[e],`"${e}" is prohibited for ref layers`))})),i.layers.forEach((t=>{ae(t.id)===s&&(e=t)})),e?e.ref?t.push(new re(r,n.ref,"ref cannot reference another ref layer")):a=ae(e.type):t.push(new re(r,n.ref,`ref layer "${s}" not found`))}else if("background"!==a)if(n.source){const e=i.sources&&i.sources[n.source],o=e&&ae(e.type);e?"vector"===o&&"raster"===a?t.push(new re(r,n.source,`layer "${n.id}" requires a raster source`)):"raster"===o&&"raster"!==a?t.push(new re(r,n.source,`layer "${n.id}" requires a vector source`)):"vector"!==o||n["source-layer"]?"raster-dem"===o&&"hillshade"!==a?t.push(new re(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==a||!n.paint||!n.paint["line-gradient"]||"geojson"===o&&e.lineMetrics||t.push(new re(r,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new re(r,n,`layer "${n.id}" must specify a "source-layer"`)):t.push(new re(r,n.source,`source "${n.source}" not found`))}else t.push(new re(r,n,'missing required property "source"'));return t=t.concat(Nn({key:r,value:n,valueSpec:o.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":()=>[],type:()=>dr({key:`${r}.type`,value:n.type,valueSpec:o.layer.type,style:e.style,styleSpec:e.styleSpec,object:n,objectKey:"type"}),filter:nr,layout:e=>Nn({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>ar(oe({layerType:a},e))}}),paint:e=>Nn({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>or(oe({layerType:a},e))}})}})),t}function lr(e){const t=e.value,n=e.key,r=wn(t);return"string"!==r?[new re(n,t,`string expected, ${r} found`)]:[]}const cr={promoteId:function({key:e,value:t}){if("string"===wn(t))return lr({key:e,value:t});{const n=[];for(const r in t)n.push(...lr({key:`${e}.${r}`,value:t[r]}));return n}}};function ur(e){const t=e.value,n=e.key,r=e.styleSpec,i=e.style;if(!t.type)return[new re(n,t,'"type" is required')];const o=ae(t.type);let a;switch(o){case"vector":case"raster":case"raster-dem":return a=Nn({key:n,value:t,valueSpec:r[`source_${o.replace("-","_")}`],style:e.style,styleSpec:r,objectElementValidators:cr}),a;case"geojson":if(a=Nn({key:n,value:t,valueSpec:r.source_geojson,style:i,styleSpec:r,objectElementValidators:cr}),t.cluster)for(const e in t.clusterProperties){const[r,i]=t.clusterProperties[e],o="string"==typeof r?[r,["accumulated"],["get",e]]:r;a.push(...qn({key:`${n}.${e}.map`,value:i,expressionContext:"cluster-map"})),a.push(...qn({key:`${n}.${e}.reduce`,value:o,expressionContext:"cluster-reduce"}))}return a;case"video":return Nn({key:n,value:t,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return Nn({key:n,value:t,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new re(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Wn({key:`${n}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}}function hr(e){const t=e.value,n=e.styleSpec,r=n.light,i=e.style;let o=[];const a=wn(t);if(void 0===t)return o;if("object"!==a)return o=o.concat([new re("light",t,`object expected, ${a} found`)]),o;for(const e in t){const a=e.match(/^(.*)-transition$/);o=o.concat(a&&r[a[1]]&&r[a[1]].transition?dr({key:e,value:t[e],valueSpec:n.transition,style:i,styleSpec:n}):r[e]?dr({key:e,value:t[e],valueSpec:r[e],style:i,styleSpec:n}):[new re(e,t[e],`unknown property "${e}"`)])}return o}function fr(e){const t=e.value,n=e.styleSpec,r=n.terrain,i=e.style;let o=[];const a=wn(t);if(void 0===t)return o;if("object"!==a)return o=o.concat([new re("terrain",t,`object expected, ${a} found`)]),o;for(const e in t)o=o.concat(r[e]?dr({key:e,value:t[e],valueSpec:r[e],style:i,styleSpec:n}):[new re(e,t[e],`unknown property "${e}"`)]);return o}const pr={"*":()=>[],array:jn,boolean:function(e){const t=e.value,n=e.key,r=wn(t);return"boolean"!==r?[new re(n,t,`boolean expected, ${r} found`)]:[]},number:Vn,color:function(e){const t=e.key,n=e.value,r=wn(n);return"string"!==r?[new re(t,n,`color expected, ${r} found`)]:null===Te(n)?[new re(t,n,`color expected, "${n}" found`)]:[]},constants:ie,enum:Wn,filter:nr,function:Gn,layer:sr,object:Nn,source:ur,light:hr,terrain:fr,string:lr,formatted:function(e){return 0===lr(e).length?[]:qn(e)},resolvedImage:function(e){return 0===lr(e).length?[]:qn(e)},padding:function(e){const t=e.key,n=e.value;if("array"===wn(n)){if(n.length<1||n.length>4)return[new re(t,n,`padding requires 1 to 4 values; ${n.length} values found`)];const e={type:"number"};let r=[];for(let i=0;i<n.length;i++)r=r.concat(dr({key:`${t}[${i}]`,value:n[i],valueSpec:e}));return r}return Vn({key:t,value:n,valueSpec:{}})}};function dr(e){const t=e.value,n=e.valueSpec,r=e.styleSpec;return n.expression&&Cn(ae(t))?Gn(e):n.expression&&On(se(t))?qn(e):n.type&&pr[n.type]?pr[n.type](e):Nn(oe({},e,{valueSpec:n.type?r[n.type]:n}))}function mr(e){const t=e.value,n=e.key,r=lr(e);return r.length||(-1===t.indexOf("{fontstack}")&&r.push(new re(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&r.push(new re(n,t,'"glyphs" url must include a "{range}" token'))),r}function gr(e,t=ne){let n=[];return n=n.concat(dr({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:mr,"*":()=>[]}})),e.constants&&(n=n.concat(ie({key:"constants",value:e.constants,style:e,styleSpec:t}))),yr(n)}function yr(e){return[].concat(e).sort(((e,t)=>e.line-t.line))}function vr(e){return function(...t){return yr(e.apply(this,t))}}gr.source=vr(ur),gr.light=vr(hr),gr.terrain=vr(fr),gr.layer=vr(sr),gr.filter=vr(nr),gr.paintProperty=vr(or),gr.layoutProperty=vr(ar);const br=gr,_r=br.light,xr=br.paintProperty,Ar=br.layoutProperty;function wr(e,t){let n=!1;if(t&&t.length)for(const r of t)e.fire(new ee(new Error(r.message))),n=!0;return n}class Cr{constructor(e,t,n){const r=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;const i=new Int32Array(this.arrayBuffer);e=i[0],this.d=(t=i[1])+2*(n=i[2]);for(let e=0;e<this.d*this.d;e++){const t=i[3+e],n=i[3+e+1];r.push(t===n?null:i.subarray(t,n))}const o=i[3+r.length+1];this.keys=i.subarray(i[3+r.length],o),this.bboxes=i.subarray(o),this.insert=this._insertReadonly}else{this.d=t+2*n;for(let e=0;e<this.d*this.d;e++)r.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;const i=n/t*e;this.min=-i,this.max=e+i}insert(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertCell,this.uid++,void 0,void 0),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(e,t,n,r,i,o){this.cells[i].push(o)}query(e,t,n,r,i){const o=this.min,a=this.max;if(e<=o&&t<=o&&a<=n&&a<=r&&!i)return Array.prototype.slice.call(this.keys);{const o=[];return this._forEachCell(e,t,n,r,this._queryCell,o,{},i),o}}_queryCell(e,t,n,r,i,o,a,s){const l=this.cells[i];if(null!==l){const i=this.keys,c=this.bboxes;for(let u=0;u<l.length;u++){const h=l[u];if(void 0===a[h]){const l=4*h;(s?s(c[l+0],c[l+1],c[l+2],c[l+3]):e<=c[l+2]&&t<=c[l+3]&&n>=c[l+0]&&r>=c[l+1])?(a[h]=!0,o.push(i[h])):a[h]=!1}}}}_forEachCell(e,t,n,r,i,o,a,s){const l=this._convertToCellCoord(e),c=this._convertToCellCoord(t),u=this._convertToCellCoord(n),h=this._convertToCellCoord(r);for(let f=l;f<=u;f++)for(let l=c;l<=h;l++){const c=this.d*l+f;if((!s||s(this._convertFromCellCoord(f),this._convertFromCellCoord(l),this._convertFromCellCoord(f+1),this._convertFromCellCoord(l+1)))&&i.call(this,e,t,n,r,c,o,a,s))return}}_convertFromCellCoord(e){return(e-this.padding)/this.scale}_convertToCellCoord(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const e=this.cells,t=3+this.cells.length+1+1;let n=0;for(let e=0;e<this.cells.length;e++)n+=this.cells[e].length;const r=new Int32Array(t+n+this.keys.length+this.bboxes.length);r[0]=this.extent,r[1]=this.n,r[2]=this.padding;let i=t;for(let t=0;t<e.length;t++){const n=e[t];r[3+t]=i,r.set(n,i),i+=n.length}return r[3+e.length]=i,r.set(this.keys,i),i+=this.keys.length,r[3+e.length+1]=i,r.set(this.bboxes,i),i+=this.bboxes.length,r.buffer}static serialize(e,t){const n=e.toArrayBuffer();return t&&t.push(n),{buffer:n}}static deserialize(e){return new Cr(e.buffer)}}const Er={};function Sr(e,t,n={}){if(Er[e])throw new Error(`${e} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),Er[e]={klass:t,omit:n.omit||[],shallow:n.shallow||[]}}Sr("Object",Object),Sr("TransferableGridIndex",Cr),Sr("Color",Oe),Sr("Error",Error),Sr("AJAXError",j),Sr("ResolvedImage",Fe),Sr("StylePropertyFunction",Fn),Sr("StyleExpression",In,{omit:["_evaluator"]}),Sr("ZoomDependentExpression",Ln),Sr("ZoomConstantExpression",zn),Sr("CompoundExpression",Ke,{omit:["_evaluate"]});for(const e in pn)pn[e]._classRegistryKey||Sr(`Expression_${e}`,pn[e]);function Tr(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function Br(e,t){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||e instanceof Blob)return e;if(Tr(e))return t&&t.push(e),e;if(w(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){const n=e;return t&&t.push(n.buffer),n}if(e instanceof ImageData)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){const n=[];for(const r of e)n.push(Br(r,t));return n}if("object"==typeof e){const n=e.constructor,r=n._classRegistryKey;if(!r)throw new Error("can't serialize object of unregistered class");if(!Er[r])throw new Error(`${r} is not registered.`);const i=n.serialize?n.serialize(e,t):{};if(n.serialize){if(t&&i===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const n in e){if(!e.hasOwnProperty(n))continue;if(Er[r].omit.indexOf(n)>=0)continue;const o=e[n];i[n]=Er[r].shallow.indexOf(n)>=0?o:Br(o,t)}e instanceof Error&&(i.message=e.message)}if(i.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==r&&(i.$name=r),i}throw new Error("can't serialize object of type "+typeof e)}function kr(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||e instanceof Blob||Tr(e)||w(e)||ArrayBuffer.isView(e)||e instanceof ImageData)return e;if(Array.isArray(e))return e.map(kr);if("object"==typeof e){const t=e.$name||"Object";if(!Er[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:n}=Er[t];if(!n)throw new Error(`can't deserialize unregistered class ${t}`);if(n.deserialize)return n.deserialize(e);const r=Object.create(n.prototype);for(const n of Object.keys(e)){if("$name"===n)continue;const i=e[n];r[n]=Er[t].shallow.indexOf(n)>=0?i:kr(i)}return r}throw new Error("can't deserialize object of type "+typeof e)}class Mr{constructor(){this.first=!0}update(e,t){const n=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=n,!0))}}const Pr={"Latin-1 Supplement":e=>e>=128&&e<=255,Arabic:e=>e>=1536&&e<=1791,"Arabic Supplement":e=>e>=1872&&e<=1919,"Arabic Extended-A":e=>e>=2208&&e<=2303,"Hangul Jamo":e=>e>=4352&&e<=4607,"Unified Canadian Aboriginal Syllabics":e=>e>=5120&&e<=5759,Khmer:e=>e>=6016&&e<=6143,"Unified Canadian Aboriginal Syllabics Extended":e=>e>=6320&&e<=6399,"General Punctuation":e=>e>=8192&&e<=8303,"Letterlike Symbols":e=>e>=8448&&e<=8527,"Number Forms":e=>e>=8528&&e<=8591,"Miscellaneous Technical":e=>e>=8960&&e<=9215,"Control Pictures":e=>e>=9216&&e<=9279,"Optical Character Recognition":e=>e>=9280&&e<=9311,"Enclosed Alphanumerics":e=>e>=9312&&e<=9471,"Geometric Shapes":e=>e>=9632&&e<=9727,"Miscellaneous Symbols":e=>e>=9728&&e<=9983,"Miscellaneous Symbols and Arrows":e=>e>=11008&&e<=11263,"CJK Radicals Supplement":e=>e>=11904&&e<=12031,"Kangxi Radicals":e=>e>=12032&&e<=12255,"Ideographic Description Characters":e=>e>=12272&&e<=12287,"CJK Symbols and Punctuation":e=>e>=12288&&e<=12351,Hiragana:e=>e>=12352&&e<=12447,Katakana:e=>e>=12448&&e<=12543,Bopomofo:e=>e>=12544&&e<=12591,"Hangul Compatibility Jamo":e=>e>=12592&&e<=12687,Kanbun:e=>e>=12688&&e<=12703,"Bopomofo Extended":e=>e>=12704&&e<=12735,"CJK Strokes":e=>e>=12736&&e<=12783,"Katakana Phonetic Extensions":e=>e>=12784&&e<=12799,"Enclosed CJK Letters and Months":e=>e>=12800&&e<=13055,"CJK Compatibility":e=>e>=13056&&e<=13311,"CJK Unified Ideographs Extension A":e=>e>=13312&&e<=19903,"Yijing Hexagram Symbols":e=>e>=19904&&e<=19967,"CJK Unified Ideographs":e=>e>=19968&&e<=40959,"Yi Syllables":e=>e>=40960&&e<=42127,"Yi Radicals":e=>e>=42128&&e<=42191,"Hangul Jamo Extended-A":e=>e>=43360&&e<=43391,"Hangul Syllables":e=>e>=44032&&e<=55215,"Hangul Jamo Extended-B":e=>e>=55216&&e<=55295,"Private Use Area":e=>e>=57344&&e<=63743,"CJK Compatibility Ideographs":e=>e>=63744&&e<=64255,"Arabic Presentation Forms-A":e=>e>=64336&&e<=65023,"Vertical Forms":e=>e>=65040&&e<=65055,"CJK Compatibility Forms":e=>e>=65072&&e<=65103,"Small Form Variants":e=>e>=65104&&e<=65135,"Arabic Presentation Forms-B":e=>e>=65136&&e<=65279,"Halfwidth and Fullwidth Forms":e=>e>=65280&&e<=65519};function Ir(e){for(const t of e)if(zr(t.charCodeAt(0)))return!0;return!1}function Or(e){for(const t of e)if(!Dr(t.charCodeAt(0)))return!1;return!0}function Dr(e){return!(Pr.Arabic(e)||Pr["Arabic Supplement"](e)||Pr["Arabic Extended-A"](e)||Pr["Arabic Presentation Forms-A"](e)||Pr["Arabic Presentation Forms-B"](e))}function zr(e){return!(746!==e&&747!==e&&(e<4352||!(Pr["Bopomofo Extended"](e)||Pr.Bopomofo(e)||Pr["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||Pr["CJK Compatibility Ideographs"](e)||Pr["CJK Compatibility"](e)||Pr["CJK Radicals Supplement"](e)||Pr["CJK Strokes"](e)||!(!Pr["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||Pr["CJK Unified Ideographs Extension A"](e)||Pr["CJK Unified Ideographs"](e)||Pr["Enclosed CJK Letters and Months"](e)||Pr["Hangul Compatibility Jamo"](e)||Pr["Hangul Jamo Extended-A"](e)||Pr["Hangul Jamo Extended-B"](e)||Pr["Hangul Jamo"](e)||Pr["Hangul Syllables"](e)||Pr.Hiragana(e)||Pr["Ideographic Description Characters"](e)||Pr.Kanbun(e)||Pr["Kangxi Radicals"](e)||Pr["Katakana Phonetic Extensions"](e)||Pr.Katakana(e)&&12540!==e||!(!Pr["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!Pr["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||Pr["Unified Canadian Aboriginal Syllabics"](e)||Pr["Unified Canadian Aboriginal Syllabics Extended"](e)||Pr["Vertical Forms"](e)||Pr["Yijing Hexagram Symbols"](e)||Pr["Yi Syllables"](e)||Pr["Yi Radicals"](e))))}function Lr(e){return!(zr(e)||function(e){return!!(Pr["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||Pr["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||Pr["Letterlike Symbols"](e)||Pr["Number Forms"](e)||Pr["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||Pr["Control Pictures"](e)&&9251!==e||Pr["Optical Character Recognition"](e)||Pr["Enclosed Alphanumerics"](e)||Pr["Geometric Shapes"](e)||Pr["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||Pr["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||Pr["CJK Symbols and Punctuation"](e)||Pr.Katakana(e)||Pr["Private Use Area"](e)||Pr["CJK Compatibility Forms"](e)||Pr["Small Form Variants"](e)||Pr["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function Rr(e){return e>=1424&&e<=2303||Pr["Arabic Presentation Forms-A"](e)||Pr["Arabic Presentation Forms-B"](e)}function Fr(e,t){return!(!t&&Rr(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||Pr.Khmer(e))}function Ur(e){for(const t of e)if(Rr(t.charCodeAt(0)))return!0;return!1}const Nr="deferred",jr="loading",Vr="loaded";let Gr=null,qr="unavailable",Wr=null;const Hr=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(qr="error"),Gr&&Gr(e)};function $r(){Xr.fire(new Q("pluginStateChange",{pluginStatus:qr,pluginURL:Wr}))}const Xr=new te,Zr=function(){return qr},Yr=function(){if(qr!==Nr||!Wr)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");qr=jr,$r(),Wr&&W({url:Wr},(e=>{e?Hr(e):(qr=Vr,$r())}))},Kr={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>qr===Vr||null!=Kr.applyArabicShaping,isLoading:()=>qr===jr,setState(e){if(!y())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");qr=e.pluginStatus,Wr=e.pluginURL},isParsed(){if(!y())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return null!=Kr.applyArabicShaping&&null!=Kr.processBidirectionalText&&null!=Kr.processStyledBidirectionalText},getPluginURL(){if(!y())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Wr}};class Jr{constructor(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Mr,this.transition={})}isSupportedScript(e){return function(e,t){for(const n of e)if(!Fr(n.charCodeAt(0),t))return!1;return!0}(e,Kr.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,t=e-Math.floor(e),n=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*t}}}class Qr{constructor(e,t){this.property=e,this.value=t,this.expression=function(e,t){if(Cn(e))return new Fn(e,t);if(On(e)){const n=Rn(e,t);if("error"===n.result)throw new Error(n.value.map((e=>`${e.key}: ${e.message}`)).join(", "));return n.value}{let n=e;return"color"===t.type&&"string"==typeof e?n=Oe.parse(e):"padding"!==t.type||"number"!=typeof e&&!Array.isArray(e)||(n=Re.parse(e)),{kind:"constant",evaluate:()=>n}}}(void 0===t?e.specification.default:t,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,t,n){return this.property.possiblyEvaluate(this,e,t,n)}}class ei{constructor(e){this.property=e,this.value=new Qr(e,void 0)}transitioned(e,t){return new ni(this.property,this.value,t,s({},e.transition,this.transition),e.now)}untransitioned(){return new ni(this.property,this.value,null,{},0)}}class ti{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return f(this._values[e].value.value)}setValue(e,t){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new ei(this._values[e].property)),this._values[e].value=new Qr(this._values[e].property,null===t?void 0:f(t))}getTransition(e){return f(this._values[e].transition)}setTransition(e,t){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new ei(this._values[e].property)),this._values[e].transition=f(t)||void 0}serialize(){const e={};for(const t of Object.keys(this._values)){const n=this.getValue(t);void 0!==n&&(e[t]=n);const r=this.getTransition(t);void 0!==r&&(e[`${t}-transition`]=r)}return e}transitioned(e,t){const n=new ri(this._properties);for(const r of Object.keys(this._values))n._values[r]=this._values[r].transitioned(e,t._values[r]);return n}untransitioned(){const e=new ri(this._properties);for(const t of Object.keys(this._values))e._values[t]=this._values[t].untransitioned();return e}}class ni{constructor(e,t,n,r,i){this.property=e,this.value=t,this.begin=i+r.delay||0,this.end=this.begin+r.duration||0,e.specification.transition&&(r.delay||r.duration)&&(this.prior=n)}possiblyEvaluate(e,t,n){const r=e.now||0,i=this.value.possiblyEvaluate(e,t,n),o=this.prior;if(o){if(r>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(r<this.begin)return o.possiblyEvaluate(e,t,n);{const a=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(e,t,n),i,function(e){if(e<=0)return 0;if(e>=1)return 1;const t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}(a))}}return i}}class ri{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,t,n){const r=new ai(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].possiblyEvaluate(e,t,n);return r}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class ii{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return f(this._values[e].value)}setValue(e,t){this._values[e]=new Qr(this._values[e].property,null===t?void 0:f(t))}serialize(){const e={};for(const t of Object.keys(this._values)){const n=this.getValue(t);void 0!==n&&(e[t]=n)}return e}possiblyEvaluate(e,t,n){const r=new ai(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].possiblyEvaluate(e,t,n);return r}}class oi{constructor(e,t,n){this.property=e,this.value=t,this.parameters=n}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,t,n,r){return this.property.evaluate(this.value,this.parameters,e,t,n,r)}}class ai{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class si{constructor(e){this.specification=e}possiblyEvaluate(e,t){if(e.isDataDriven())throw new Error("Value should not be data driven");return e.expression.evaluate(t)}interpolate(e,t,n){const r=Et[this.specification.type];return r?r(e,t,n):e}}class li{constructor(e,t){this.specification=e,this.overrides=t}possiblyEvaluate(e,t,n,r){return new oi(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},n,r)}:e.expression,t)}interpolate(e,t,n){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new oi(this,{kind:"constant",value:void 0},e.parameters);const r=Et[this.specification.type];return r?new oi(this,{kind:"constant",value:r(e.value.value,t.value.value,n)},e.parameters):e}evaluate(e,t,n,r,i,o){return"constant"===e.kind?e.value:e.evaluate(t,n,r,i,o)}}class ci extends li{possiblyEvaluate(e,t,n,r){if(void 0===e.value)return new oi(this,{kind:"constant",value:void 0},t);if("constant"===e.expression.kind){const i=e.expression.evaluate(t,null,{},n,r),o="resolvedImage"===e.property.specification.type&&"string"!=typeof i?i.name:i,a=this._calculate(o,o,o,t);return new oi(this,{kind:"constant",value:a},t)}if("camera"===e.expression.kind){const n=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t);return new oi(this,{kind:"constant",value:n},t)}return new oi(this,e.expression,t)}evaluate(e,t,n,r,i,o){if("source"===e.kind){const a=e.evaluate(t,n,r,i,o);return this._calculate(a,a,a,t)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},n,r),e.evaluate({zoom:Math.floor(t.zoom)},n,r),e.evaluate({zoom:Math.floor(t.zoom)+1},n,r),t):e.value}_calculate(e,t,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}}interpolate(e){return e}}class ui{constructor(e){this.specification=e}possiblyEvaluate(e,t,n,r){if(void 0!==e.value){if("constant"===e.expression.kind){const i=e.expression.evaluate(t,null,{},n,r);return this._calculate(i,i,i,t)}return this._calculate(e.expression.evaluate(new Jr(Math.floor(t.zoom-1),t)),e.expression.evaluate(new Jr(Math.floor(t.zoom),t)),e.expression.evaluate(new Jr(Math.floor(t.zoom+1),t)),t)}}_calculate(e,t,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}}interpolate(e){return e}}class hi{constructor(e){this.specification=e}possiblyEvaluate(e,t,n,r){return!!e.expression.evaluate(t,null,{},n,r)}interpolate(){return!1}}class fi{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const t in e){const n=e[t];n.specification.overridable&&this.overridableProperties.push(t);const r=this.defaultPropertyValues[t]=new Qr(n,void 0),i=this.defaultTransitionablePropertyValues[t]=new ei(n);this.defaultTransitioningPropertyValues[t]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=r.possiblyEvaluate({})}}}Sr("DataDrivenProperty",li),Sr("DataConstantProperty",si),Sr("CrossFadedDataDrivenProperty",ci),Sr("CrossFadedProperty",ui),Sr("ColorRampProperty",hi);const pi="-transition";class di extends te{constructor(e,t){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==e.type&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),t.layout&&(this._unevaluatedLayout=new ii(t.layout)),t.paint)){this._transitionablePaint=new ti(t.paint);for(const t in e.paint)this.setPaintProperty(t,e.paint[t],{validate:!1});for(const t in e.layout)this.setLayoutProperty(t,e.layout[t],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ai(t.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,t,n={}){null!=t&&this._validate(Ar,`layers.${this.id}.layout.${e}`,e,t,n)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}getPaintProperty(e){return e.endsWith(pi)?this._transitionablePaint.getTransition(e.slice(0,-pi.length)):this._transitionablePaint.getValue(e)}setPaintProperty(e,t,n={}){if(null!=t&&this._validate(xr,`layers.${this.id}.paint.${e}`,e,t,n))return!1;if(e.endsWith(pi))return this._transitionablePaint.setTransition(e.slice(0,-pi.length),t||void 0),!1;{const n=this._transitionablePaint._values[e],r="cross-faded-data-driven"===n.property.specification["property-type"],i=n.value.isDataDriven(),o=n.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);const a=this._transitionablePaint._values[e].value;return a.isDataDriven()||i||r||this._handleOverridablePaintPropertyUpdate(e,o,a)}}_handleSpecialPaintPropertyUpdate(e){}_handleOverridablePaintPropertyUpdate(e,t,n){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,t){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),h(e,((e,t)=>!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)))}_validate(e,t,n,r,i={}){return(!i||!1!==i.validate)&&wr(this,e.call(br,{key:t,layerType:this.type,objectKey:n,value:r,styleSpec:ne,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const t=this.paint.get(e);if(t instanceof oi&&_n(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}}const mi={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class gi{constructor(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class yi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function vi(e,t=1){let n=0,r=0;return{members:e.map((e=>{const i=mi[e.type].BYTES_PER_ELEMENT,o=n=bi(n,Math.max(t,i)),a=e.components||1;return r=Math.max(r,i),n+=i*a,{name:e.name,type:e.type,components:a,offset:o}})),size:bi(n,Math.max(r,t)),alignment:t}}function bi(e,t){return Math.ceil(e/t)*t}class _i extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const r=2*e;return this.int16[r+0]=t,this.int16[r+1]=n,e}}_i.prototype.bytesPerElement=4,Sr("StructArrayLayout2i4",_i);class xi extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const o=4*e;return this.int16[o+0]=t,this.int16[o+1]=n,this.int16[o+2]=r,this.int16[o+3]=i,e}}xi.prototype.bytesPerElement=8,Sr("StructArrayLayout4i8",xi);class Ai extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i,o)}emplace(e,t,n,r,i,o,a){const s=6*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,e}}Ai.prototype.bytesPerElement=12,Sr("StructArrayLayout2i4i12",Ai);class wi extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i,o)}emplace(e,t,n,r,i,o,a){const s=4*e,l=8*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.uint8[l+4]=r,this.uint8[l+5]=i,this.uint8[l+6]=o,this.uint8[l+7]=a,e}}wi.prototype.bytesPerElement=8,Sr("StructArrayLayout2i4ub8",wi);class Ci extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const r=2*e;return this.float32[r+0]=t,this.float32[r+1]=n,e}}Ci.prototype.bytesPerElement=8,Sr("StructArrayLayout2f8",Ci);class Ei extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s,l,c){const u=this.length;return this.resize(u+1),this.emplace(u,e,t,n,r,i,o,a,s,l,c)}emplace(e,t,n,r,i,o,a,s,l,c,u){const h=10*e;return this.uint16[h+0]=t,this.uint16[h+1]=n,this.uint16[h+2]=r,this.uint16[h+3]=i,this.uint16[h+4]=o,this.uint16[h+5]=a,this.uint16[h+6]=s,this.uint16[h+7]=l,this.uint16[h+8]=c,this.uint16[h+9]=u,e}}Ei.prototype.bytesPerElement=20,Sr("StructArrayLayout10ui20",Ei);class Si extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s,l,c,u,h){const f=this.length;return this.resize(f+1),this.emplace(f,e,t,n,r,i,o,a,s,l,c,u,h)}emplace(e,t,n,r,i,o,a,s,l,c,u,h,f){const p=12*e;return this.int16[p+0]=t,this.int16[p+1]=n,this.int16[p+2]=r,this.int16[p+3]=i,this.uint16[p+4]=o,this.uint16[p+5]=a,this.uint16[p+6]=s,this.uint16[p+7]=l,this.int16[p+8]=c,this.int16[p+9]=u,this.int16[p+10]=h,this.int16[p+11]=f,e}}Si.prototype.bytesPerElement=24,Sr("StructArrayLayout4i4ui4i24",Si);class Ti extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}emplace(e,t,n,r){const i=3*e;return this.float32[i+0]=t,this.float32[i+1]=n,this.float32[i+2]=r,e}}Ti.prototype.bytesPerElement=12,Sr("StructArrayLayout3f12",Ti);class Bi extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint32[1*e+0]=t,e}}Bi.prototype.bytesPerElement=4,Sr("StructArrayLayout1ul4",Bi);class ki extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s,l){const c=this.length;return this.resize(c+1),this.emplace(c,e,t,n,r,i,o,a,s,l)}emplace(e,t,n,r,i,o,a,s,l,c){const u=10*e,h=5*e;return this.int16[u+0]=t,this.int16[u+1]=n,this.int16[u+2]=r,this.int16[u+3]=i,this.int16[u+4]=o,this.int16[u+5]=a,this.uint32[h+3]=s,this.uint16[u+8]=l,this.uint16[u+9]=c,e}}ki.prototype.bytesPerElement=20,Sr("StructArrayLayout6i1ul2ui20",ki);class Mi extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i,o)}emplace(e,t,n,r,i,o,a){const s=6*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,e}}Mi.prototype.bytesPerElement=12,Sr("StructArrayLayout2i2i2i12",Mi);class Pi extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,i)}emplace(e,t,n,r,i,o){const a=4*e,s=8*e;return this.float32[a+0]=t,this.float32[a+1]=n,this.float32[a+2]=r,this.int16[s+6]=i,this.int16[s+7]=o,e}}Pi.prototype.bytesPerElement=16,Sr("StructArrayLayout2f1f2i16",Pi);class Ii extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const o=12*e,a=3*e;return this.uint8[o+0]=t,this.uint8[o+1]=n,this.float32[a+1]=r,this.float32[a+2]=i,e}}Ii.prototype.bytesPerElement=12,Sr("StructArrayLayout2ub2f12",Ii);class Oi extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}emplace(e,t,n,r){const i=3*e;return this.uint16[i+0]=t,this.uint16[i+1]=n,this.uint16[i+2]=r,e}}Oi.prototype.bytesPerElement=6,Sr("StructArrayLayout3ui6",Oi);class Di extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s,l,c,u,h,f,p,d,m,g){const y=this.length;return this.resize(y+1),this.emplace(y,e,t,n,r,i,o,a,s,l,c,u,h,f,p,d,m,g)}emplace(e,t,n,r,i,o,a,s,l,c,u,h,f,p,d,m,g,y){const v=24*e,b=12*e,_=48*e;return this.int16[v+0]=t,this.int16[v+1]=n,this.uint16[v+2]=r,this.uint16[v+3]=i,this.uint32[b+2]=o,this.uint32[b+3]=a,this.uint32[b+4]=s,this.uint16[v+10]=l,this.uint16[v+11]=c,this.uint16[v+12]=u,this.float32[b+7]=h,this.float32[b+8]=f,this.uint8[_+36]=p,this.uint8[_+37]=d,this.uint8[_+38]=m,this.uint32[b+10]=g,this.int16[v+22]=y,e}}Di.prototype.bytesPerElement=48,Sr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Di);class zi extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s,l,c,u,h,f,p,d,m,g,y,v,b,_,x,A,w,C,E,S,T){const B=this.length;return this.resize(B+1),this.emplace(B,e,t,n,r,i,o,a,s,l,c,u,h,f,p,d,m,g,y,v,b,_,x,A,w,C,E,S,T)}emplace(e,t,n,r,i,o,a,s,l,c,u,h,f,p,d,m,g,y,v,b,_,x,A,w,C,E,S,T,B){const k=34*e,M=17*e;return this.int16[k+0]=t,this.int16[k+1]=n,this.int16[k+2]=r,this.int16[k+3]=i,this.int16[k+4]=o,this.int16[k+5]=a,this.int16[k+6]=s,this.int16[k+7]=l,this.uint16[k+8]=c,this.uint16[k+9]=u,this.uint16[k+10]=h,this.uint16[k+11]=f,this.uint16[k+12]=p,this.uint16[k+13]=d,this.uint16[k+14]=m,this.uint16[k+15]=g,this.uint16[k+16]=y,this.uint16[k+17]=v,this.uint16[k+18]=b,this.uint16[k+19]=_,this.uint16[k+20]=x,this.uint16[k+21]=A,this.uint16[k+22]=w,this.uint32[M+12]=C,this.float32[M+13]=E,this.float32[M+14]=S,this.float32[M+15]=T,this.float32[M+16]=B,e}}zi.prototype.bytesPerElement=68,Sr("StructArrayLayout8i15ui1ul4f68",zi);class Li extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.float32[1*e+0]=t,e}}Li.prototype.bytesPerElement=4,Sr("StructArrayLayout1f4",Li);class Ri extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}emplace(e,t,n,r){const i=3*e;return this.int16[i+0]=t,this.int16[i+1]=n,this.int16[i+2]=r,e}}Ri.prototype.bytesPerElement=6,Sr("StructArrayLayout3i6",Ri);class Fi extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}emplace(e,t,n,r){const i=4*e;return this.uint32[2*e+0]=t,this.uint16[i+2]=n,this.uint16[i+3]=r,e}}Fi.prototype.bytesPerElement=8,Sr("StructArrayLayout1ul2ui8",Fi);class Ui extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const r=2*e;return this.uint16[r+0]=t,this.uint16[r+1]=n,e}}Ui.prototype.bytesPerElement=4,Sr("StructArrayLayout2ui4",Ui);class Ni extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint16[1*e+0]=t,e}}Ni.prototype.bytesPerElement=2,Sr("StructArrayLayout1ui2",Ni);class ji extends yi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const o=4*e;return this.float32[o+0]=t,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,e}}ji.prototype.bytesPerElement=16,Sr("StructArrayLayout4f16",ji);class Vi extends gi{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new E(this.anchorPointX,this.anchorPointY)}}Vi.prototype.size=20;class Gi extends ki{get(e){return new Vi(this,e)}}Sr("CollisionBoxArray",Gi);class qi extends gi{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(e){this._structArray.uint8[this._pos1+37]=e}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(e){this._structArray.uint8[this._pos1+38]=e}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(e){this._structArray.uint32[this._pos4+10]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}qi.prototype.size=48;class Wi extends Di{get(e){return new qi(this,e)}}Sr("PlacedSymbolArray",Wi);class Hi extends gi{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(e){this._structArray.uint32[this._pos4+12]=e}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}Hi.prototype.size=68;class $i extends zi{get(e){return new Hi(this,e)}}Sr("SymbolInstanceArray",$i);class Xi extends Li{getoffsetX(e){return this.float32[1*e+0]}}Sr("GlyphOffsetArray",Xi);class Zi extends Ri{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}Sr("SymbolLineVertexArray",Zi);class Yi extends gi{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Yi.prototype.size=8;class Ki extends Fi{get(e){return new Yi(this,e)}}Sr("FeatureIndexArray",Ki);class Ji extends _i{}class Qi extends _i{}class eo extends _i{}class to extends Ai{}class no extends wi{}class ro extends Ci{}class io extends Ei{}class oo extends Si{}class ao extends Ti{}class so extends Bi{}class lo extends Mi{}class co extends Ii{}class uo extends Oi{}class ho extends Ui{}const fo=vi([{name:"a_pos",components:2,type:"Int16"}],4),{members:po}=fo;class mo{constructor(e=[]){this.segments=e}prepareSegment(e,t,n,r){let i=this.segments[this.segments.length-1];return e>mo.MAX_VERTEX_ARRAY_LENGTH&&d(`Max vertices per segment is ${mo.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!i||i.vertexLength+e>mo.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==r)&&(i={vertexOffset:t.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==r&&(i.sortKey=r),this.segments.push(i)),i}get(){return this.segments}destroy(){for(const e of this.segments)for(const t in e.vaos)e.vaos[t].destroy()}static simpleSegment(e,t,n,r){return new mo([{vertexOffset:e,primitiveOffset:t,vertexLength:n,primitiveLength:r,vaos:{},sortKey:0}])}}function go(e,t){return 256*(e=o(Math.floor(e),0,255))+o(Math.floor(t),0,255)}mo.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Sr("SegmentVector",mo);const yo=vi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var vo={exports:{}},bo=function(e,t){var n,r,i,o,a,s,l,c;for(r=e.length-(n=3&e.length),i=t,a=3432918353,s=461845907,c=0;c<r;)l=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,i=27492+(65535&(o=5*(65535&(i=(i^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&e.charCodeAt(c+2))<<16;case 2:l^=(255&e.charCodeAt(c+1))<<8;case 1:i^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(c)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return i^=e.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0},_o=function(e,t){for(var n,r=e.length,i=t^r,o=0;r>=4;)n=1540483477*(65535&(n=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:i^=(255&e.charCodeAt(o+2))<<16;case 2:i^=(255&e.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0};vo.exports=bo,vo.exports.murmur3=bo,vo.exports.murmur2=_o;class xo{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,t,n,r){this.ids.push(Ao(e)),this.positions.push(t,n,r)}getPositions(e){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const t=Ao(e);let n=0,r=this.ids.length-1;for(;n<r;){const e=n+r>>1;this.ids[e]>=t?r=e:n=e+1}const i=[];for(;this.ids[n]===t;)i.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return i}static serialize(e,t){const n=new Float64Array(e.ids),r=new Uint32Array(e.positions);return wo(n,r,0,n.length-1),t&&t.push(n.buffer,r.buffer),{ids:n,positions:r}}static deserialize(e){const t=new xo;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t}}function Ao(e){const t=+e;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:vo.exports(String(e))}function wo(e,t,n,r){for(;n<r;){const i=e[n+r>>1];let o=n-1,a=r+1;for(;;){do{o++}while(e[o]<i);do{a--}while(e[a]>i);if(o>=a)break;Co(e,o,a),Co(t,3*o,3*a),Co(t,3*o+1,3*a+1),Co(t,3*o+2,3*a+2)}a-n<r-a?(wo(e,t,n,a),n=a+1):(wo(e,t,a+1,r),r=a)}}function Co(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}Sr("FeaturePositionMap",xo);class Eo{constructor(e,t){this.gl=e.gl,this.location=t}}class So extends Eo{constructor(e,t){super(e,t),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class To extends Eo{constructor(e,t){super(e,t),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class Bo extends Eo{constructor(e,t){super(e,t),this.current=Oe.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const ko=new Float32Array(16);function Mo(e){return[go(255*e.r,255*e.g),go(255*e.b,255*e.a)]}class Po{constructor(e,t,n){this.value=e,this.uniformNames=t.map((e=>`u_${e}`)),this.type=n}setUniform(e,t,n){e.set(n.constantOr(this.value))}getBinding(e,t,n){return"color"===this.type?new Bo(e,t):new So(e,t)}}class Io{constructor(e,t){this.uniformNames=t.map((e=>`u_${e}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr}setUniform(e,t,n,r){const i="u_pattern_to"===r?this.patternTo:"u_pattern_from"===r?this.patternFrom:"u_pixel_ratio_to"===r?this.pixelRatioTo:"u_pixel_ratio_from"===r?this.pixelRatioFrom:null;i&&e.set(i)}getBinding(e,t,n){return"u_pattern"===n.substr(0,9)?new To(e,t):new So(e,t)}}class Oo{constructor(e,t,n,r){this.expression=e,this.type=n,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:`a_${e}`,type:"Float32",components:"color"===n?2:1,offset:0}))),this.paintVertexArray=new r}populatePaintArray(e,t,n,r,i){const o=this.paintVertexArray.length,a=this.expression.evaluate(new Jr(0),t,{},r,[],i);this.paintVertexArray.resize(e),this._setPaintValue(o,e,a)}updatePaintArray(e,t,n,r){const i=this.expression.evaluate({zoom:0},n,r);this._setPaintValue(e,t,i)}_setPaintValue(e,t,n){if("color"===this.type){const r=Mo(n);for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,r[0],r[1])}else{for(let r=e;r<t;r++)this.paintVertexArray.emplace(r,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Do{constructor(e,t,n,r,i,o){this.expression=e,this.uniformNames=t.map((e=>`u_${e}_t`)),this.type=n,this.useIntegerZoom=r,this.zoom=i,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:`a_${e}`,type:"Float32",components:"color"===n?4:2,offset:0}))),this.paintVertexArray=new o}populatePaintArray(e,t,n,r,i){const o=this.expression.evaluate(new Jr(this.zoom),t,{},r,[],i),a=this.expression.evaluate(new Jr(this.zoom+1),t,{},r,[],i),s=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(s,e,o,a)}updatePaintArray(e,t,n,r){const i=this.expression.evaluate({zoom:this.zoom},n,r),o=this.expression.evaluate({zoom:this.zoom+1},n,r);this._setPaintValue(e,t,i,o)}_setPaintValue(e,t,n,r){if("color"===this.type){const i=Mo(n),o=Mo(r);for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,i[0],i[1],o[0],o[1])}else{for(let i=e;i<t;i++)this.paintVertexArray.emplace(i,n,r);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(r))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,t){const n=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,r=o(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);e.set(r)}getBinding(e,t,n){return new So(e,t)}}class zo{constructor(e,t,n,r,i,o){this.expression=e,this.type=t,this.useIntegerZoom=n,this.zoom=r,this.layerId=o,this.zoomInPaintVertexArray=new i,this.zoomOutPaintVertexArray=new i}populatePaintArray(e,t,n){const r=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(r,e,t.patterns&&t.patterns[this.layerId],n)}updatePaintArray(e,t,n,r,i){this._setPaintValues(e,t,n.patterns&&n.patterns[this.layerId],i)}_setPaintValues(e,t,n,r){if(!r||!n)return;const{min:i,mid:o,max:a}=n,s=r[i],l=r[o],c=r[a];if(s&&l&&c)for(let n=e;n<t;n++)this.zoomInPaintVertexArray.emplace(n,l.tl[0],l.tl[1],l.br[0],l.br[1],s.tl[0],s.tl[1],s.br[0],s.br[1],l.pixelRatio,s.pixelRatio),this.zoomOutPaintVertexArray.emplace(n,l.tl[0],l.tl[1],l.br[0],l.br[1],c.tl[0],c.tl[1],c.br[0],c.br[1],l.pixelRatio,c.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,yo.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,yo.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Lo{constructor(e,t,n){this.binders={},this._buffers=[];const r=[];for(const i in e.paint._values){if(!n(i))continue;const o=e.paint.get(i);if(!(o instanceof oi&&_n(o.property.specification)))continue;const a=Fo(i,e.type),s=o.value,l=o.property.specification.type,c=o.property.useIntegerZoom,u=o.property.specification["property-type"],h="cross-faded"===u||"cross-faded-data-driven"===u;if("constant"===s.kind)this.binders[i]=h?new Io(s.value,a):new Po(s.value,a,l),r.push(`/u_${i}`);else if("source"===s.kind||h){const n=Uo(i,l,"source");this.binders[i]=h?new zo(s,l,c,t,n,e.id):new Oo(s,a,l,n),r.push(`/a_${i}`)}else{const e=Uo(i,l,"composite");this.binders[i]=new Do(s,a,l,c,t,e),r.push(`/z_${i}`)}}this.cacheKey=r.sort().join("")}getMaxValue(e){const t=this.binders[e];return t instanceof Oo||t instanceof Do?t.maxValue:0}populatePaintArrays(e,t,n,r,i){for(const o in this.binders){const a=this.binders[o];(a instanceof Oo||a instanceof Do||a instanceof zo)&&a.populatePaintArray(e,t,n,r,i)}}setConstantPatternPositions(e,t){for(const n in this.binders){const r=this.binders[n];r instanceof Io&&r.setConstantPatternPositions(e,t)}}updatePaintArrays(e,t,n,r,i){let o=!1;for(const a in e){const s=t.getPositions(a);for(const t of s){const s=n.feature(t.index);for(const n in this.binders){const l=this.binders[n];if((l instanceof Oo||l instanceof Do||l instanceof zo)&&!0===l.expression.isStateDependent){const c=r.paint.get(n);l.expression=c.value,l.updatePaintArray(t.start,t.end,s,e[a],i),o=!0}}}}return o}defines(){const e=[];for(const t in this.binders){const n=this.binders[t];(n instanceof Po||n instanceof Io)&&e.push(...n.uniformNames.map((e=>`#define HAS_UNIFORM_${e}`)))}return e}getBinderAttributes(){const e=[];for(const t in this.binders){const n=this.binders[t];if(n instanceof Oo||n instanceof Do)for(let t=0;t<n.paintVertexAttributes.length;t++)e.push(n.paintVertexAttributes[t].name);else if(n instanceof zo)for(let t=0;t<yo.members.length;t++)e.push(yo.members[t].name)}return e}getBinderUniforms(){const e=[];for(const t in this.binders){const n=this.binders[t];if(n instanceof Po||n instanceof Io||n instanceof Do)for(const t of n.uniformNames)e.push(t)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,t){const n=[];for(const r in this.binders){const i=this.binders[r];if(i instanceof Po||i instanceof Io||i instanceof Do)for(const o of i.uniformNames)if(t[o]){const a=i.getBinding(e,t[o],o);n.push({name:o,property:r,binding:a})}}return n}setUniforms(e,t,n,r){for(const{name:e,property:i,binding:o}of t)this.binders[i].setUniform(o,r,n.get(i),e)}updatePaintBuffers(e){this._buffers=[];for(const t in this.binders){const n=this.binders[t];if(e&&n instanceof zo){const t=2===e.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;t&&this._buffers.push(t)}else(n instanceof Oo||n instanceof Do)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}}upload(e){for(const t in this.binders){const n=this.binders[t];(n instanceof Oo||n instanceof Do||n instanceof zo)&&n.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const t=this.binders[e];(t instanceof Oo||t instanceof Do||t instanceof zo)&&t.destroy()}}}class Ro{constructor(e,t,n=(()=>!0)){this.programConfigurations={};for(const r of e)this.programConfigurations[r.id]=new Lo(r,t,n);this.needsUpload=!1,this._featureMap=new xo,this._bufferOffset=0}populatePaintArrays(e,t,n,r,i,o){for(const n in this.programConfigurations)this.programConfigurations[n].populatePaintArrays(e,t,r,i,o);void 0!==t.id&&this._featureMap.add(t.id,n,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,t,n,r){for(const i of n)this.needsUpload=this.programConfigurations[i.id].updatePaintArrays(e,this._featureMap,t,i,r)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}function Fo(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(`${t}-`,"").replace(/-/g,"_")]}function Uo(e,t,n){const r={color:{source:Ci,composite:ji},number:{source:Li,composite:Ci}},i=function(e){return{"line-pattern":{source:io,composite:io},"fill-pattern":{source:io,composite:io},"fill-extrusion-pattern":{source:io,composite:io}}[e]}(e);return i&&i[n]||r[t][n]}Sr("ConstantBinder",Po),Sr("CrossFadedConstantBinder",Io),Sr("SourceExpressionBinder",Oo),Sr("CrossFadedCompositeBinder",zo),Sr("CompositeExpressionBinder",Do),Sr("ProgramConfiguration",Lo,{omit:["_buffers"]}),Sr("ProgramConfigurationSet",Ro);var No=8192;const jo=Math.pow(2,14)-1,Vo=-jo-1;function Go(e){const t=No/e.extent,n=e.loadGeometry();for(let e=0;e<n.length;e++){const r=n[e];for(let e=0;e<r.length;e++){const n=r[e],i=Math.round(n.x*t),a=Math.round(n.y*t);n.x=o(i,Vo,jo),n.y=o(a,Vo,jo),(i<n.x||i>n.x+1||a<n.y||a>n.y+1)&&d("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return n}function qo(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?Go(e):[]}}function Wo(e,t,n,r,i){e.emplaceBack(2*t+(r+1)/2,2*n+(i+1)/2)}class Ho{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Qi,this.indexArray=new uo,this.segments=new mo,this.programConfigurations=new Ro(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,n){const r=this.layers[0],i=[];let o=null,a=!1;"circle"===r.type&&(o=r.layout.get("circle-sort-key"),a=!o.isConstant());for(const{feature:t,id:r,index:s,sourceLayerIndex:l}of e){const e=this.layers[0]._featureFilter.needGeometry,c=qo(t,e);if(!this.layers[0]._featureFilter.filter(new Jr(this.zoom),c,n))continue;const u=a?o.evaluate(c,{},n):void 0,h={id:r,properties:t.properties,type:t.type,sourceLayerIndex:l,index:s,geometry:e?c.geometry:Go(t),patterns:{},sortKey:u};i.push(h)}a&&i.sort(((e,t)=>e.sortKey-t.sortKey));for(const r of i){const{geometry:i,index:o,sourceLayerIndex:a}=r,s=e[o].feature;this.addFeature(r,i,o,n),t.featureIndex.insert(s,i,o,a,this.index)}}update(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,po),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,t,n,r){for(const n of t)for(const t of n){const n=t.x,r=t.y;if(n<0||n>=No||r<0||r>=No)continue;const i=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),o=i.vertexLength;Wo(this.layoutVertexArray,n,r,-1,-1),Wo(this.layoutVertexArray,n,r,1,-1),Wo(this.layoutVertexArray,n,r,1,1),Wo(this.layoutVertexArray,n,r,-1,1),this.indexArray.emplaceBack(o,o+1,o+2),this.indexArray.emplaceBack(o,o+3,o+2),i.vertexLength+=4,i.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{},r)}}function $o(e,t){for(let n=0;n<e.length;n++)if(na(t,e[n]))return!0;for(let n=0;n<t.length;n++)if(na(e,t[n]))return!0;return!!Ko(e,t)}function Xo(e,t,n){return!!na(e,t)||!!Qo(t,e,n)}function Zo(e,t){if(1===e.length)return ta(t,e[0]);for(let n=0;n<t.length;n++){const r=t[n];for(let t=0;t<r.length;t++)if(na(e,r[t]))return!0}for(let n=0;n<e.length;n++)if(ta(t,e[n]))return!0;for(let n=0;n<t.length;n++)if(Ko(e,t[n]))return!0;return!1}function Yo(e,t,n){if(e.length>1){if(Ko(e,t))return!0;for(let r=0;r<t.length;r++)if(Qo(t[r],e,n))return!0}for(let r=0;r<e.length;r++)if(Qo(e[r],t,n))return!0;return!1}function Ko(e,t){if(0===e.length||0===t.length)return!1;for(let n=0;n<e.length-1;n++){const r=e[n],i=e[n+1];for(let e=0;e<t.length-1;e++)if(Jo(r,i,t[e],t[e+1]))return!0}return!1}function Jo(e,t,n,r){return m(e,n,r)!==m(t,n,r)&&m(e,t,n)!==m(e,t,r)}function Qo(e,t,n){const r=n*n;if(1===t.length)return e.distSqr(t[0])<r;for(let n=1;n<t.length;n++)if(ea(e,t[n-1],t[n])<r)return!0;return!1}function ea(e,t,n){const r=t.distSqr(n);if(0===r)return e.distSqr(t);const i=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/r;return e.distSqr(i<0?t:i>1?n:n.sub(t)._mult(i)._add(t))}function ta(e,t){let n,r,i,o=!1;for(let a=0;a<e.length;a++){n=e[a];for(let e=0,a=n.length-1;e<n.length;a=e++)r=n[e],i=n[a],r.y>t.y!=i.y>t.y&&t.x<(i.x-r.x)*(t.y-r.y)/(i.y-r.y)+r.x&&(o=!o)}return o}function na(e,t){let n=!1;for(let r=0,i=e.length-1;r<e.length;i=r++){const o=e[r],a=e[i];o.y>t.y!=a.y>t.y&&t.x<(a.x-o.x)*(t.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function ra(e,t,n){const r=n[0],i=n[2];if(e.x<r.x&&t.x<r.x||e.x>i.x&&t.x>i.x||e.y<r.y&&t.y<r.y||e.y>i.y&&t.y>i.y)return!1;const o=m(e,t,n[0]);return o!==m(e,t,n[1])||o!==m(e,t,n[2])||o!==m(e,t,n[3])}function ia(e,t,n){const r=t.paint.get(e).value;return"constant"===r.kind?r.value:n.programConfigurations.get(t.id).getMaxValue(e)}function oa(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function aa(e,t,n,r,i){if(!t[0]&&!t[1])return e;const o=E.convert(t)._mult(i);"viewport"===n&&o._rotate(-r);const a=[];for(let t=0;t<e.length;t++)a.push(e[t].sub(o));return a}Sr("CircleBucket",Ho,{omit:["layers"]});const sa=new fi({"circle-sort-key":new li(ne.layout_circle["circle-sort-key"])});var la={paint:new fi({"circle-radius":new li(ne.paint_circle["circle-radius"]),"circle-color":new li(ne.paint_circle["circle-color"]),"circle-blur":new li(ne.paint_circle["circle-blur"]),"circle-opacity":new li(ne.paint_circle["circle-opacity"]),"circle-translate":new si(ne.paint_circle["circle-translate"]),"circle-translate-anchor":new si(ne.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new si(ne.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new si(ne.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new li(ne.paint_circle["circle-stroke-width"]),"circle-stroke-color":new li(ne.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new li(ne.paint_circle["circle-stroke-opacity"])}),layout:sa},ca=1e-6,ua="undefined"!=typeof Float32Array?Float32Array:Array;function ha(){var e=new ua(9);return ua!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function fa(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function pa(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],f=t[9],p=t[10],d=t[11],m=t[12],g=t[13],y=t[14],v=t[15],b=n[0],_=n[1],x=n[2],A=n[3];return e[0]=b*r+_*s+x*h+A*m,e[1]=b*i+_*l+x*f+A*g,e[2]=b*o+_*c+x*p+A*y,e[3]=b*a+_*u+x*d+A*v,e[4]=(b=n[4])*r+(_=n[5])*s+(x=n[6])*h+(A=n[7])*m,e[5]=b*i+_*l+x*f+A*g,e[6]=b*o+_*c+x*p+A*y,e[7]=b*a+_*u+x*d+A*v,e[8]=(b=n[8])*r+(_=n[9])*s+(x=n[10])*h+(A=n[11])*m,e[9]=b*i+_*l+x*f+A*g,e[10]=b*o+_*c+x*p+A*y,e[11]=b*a+_*u+x*d+A*v,e[12]=(b=n[12])*r+(_=n[13])*s+(x=n[14])*h+(A=n[15])*m,e[13]=b*i+_*l+x*f+A*g,e[14]=b*o+_*c+x*p+A*y,e[15]=b*a+_*u+x*d+A*v,e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var da,ma=pa;function ga(){var e=new ua(3);return ua!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function ya(e,t,n){var r=new ua(3);return r[0]=e,r[1]=t,r[2]=n,r}function va(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e}function ba(){var e=new ua(4);return ua!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function _a(e,t){const n=va([],[e.x,e.y,0,1],t);return new E(n[0]/n[3],n[1]/n[3])}ga(),da=new ua(4),ua!=Float32Array&&(da[0]=0,da[1]=0,da[2]=0,da[3]=0),ga(),ya(1,0,0),ya(0,1,0),ba(),ba(),ha(),function(){var e;e=new ua(2),ua!=Float32Array&&(e[0]=0,e[1]=0)}();class xa extends Ho{}Sr("HeatmapBucket",xa,{omit:["layers"]});var Aa={paint:new fi({"heatmap-radius":new li(ne.paint_heatmap["heatmap-radius"]),"heatmap-weight":new li(ne.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new si(ne.paint_heatmap["heatmap-intensity"]),"heatmap-color":new hi(ne.paint_heatmap["heatmap-color"]),"heatmap-opacity":new si(ne.paint_heatmap["heatmap-opacity"])})};function wa(e,{width:t,height:n},r,i){if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==t*n*r)throw new RangeError(`mismatched image size. expected: ${i.length} but got: ${t*n*r}`)}else i=new Uint8Array(t*n*r);return e.width=t,e.height=n,e.data=i,e}function Ca(e,{width:t,height:n},r){if(t===e.width&&n===e.height)return;const i=wa({},{width:t,height:n},r);Ea(e,i,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,t),height:Math.min(e.height,n)},r),e.width=t,e.height=n,e.data=i.data}function Ea(e,t,n,r,i,o){if(0===i.width||0===i.height)return t;if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range destination coordinates for image copy");const a=e.data,s=t.data;if(a===s)throw new Error("srcData equals dstData, so image is already copied");for(let l=0;l<i.height;l++){const c=((n.y+l)*e.width+n.x)*o,u=((r.y+l)*t.width+r.x)*o;for(let e=0;e<i.width*o;e++)s[u+e]=a[c+e]}return t}class Sa{constructor(e,t){wa(this,e,1,t)}resize(e){Ca(this,e,1)}clone(){return new Sa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,n,r,i){Ea(e,t,n,r,i,1)}}class Ta{constructor(e,t){wa(this,e,4,t)}resize(e){Ca(this,e,4)}replace(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Ta({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,n,r,i){Ea(e,t,n,r,i,4)}}function Ba(e){const t={},n=e.resolution||256,r=e.clips?e.clips.length:1,i=e.image||new Ta({width:n,height:r});if(Math.log(n)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${n}`);const o=(n,r,o)=>{t[e.evaluationKey]=o;const a=e.expression.evaluate(t);i.data[n+r+0]=Math.floor(255*a.r/a.a),i.data[n+r+1]=Math.floor(255*a.g/a.a),i.data[n+r+2]=Math.floor(255*a.b/a.a),i.data[n+r+3]=Math.floor(255*a.a)};if(e.clips)for(let t=0,i=0;t<r;++t,i+=4*n)for(let r=0,a=0;r<n;r++,a+=4){const s=r/(n-1),{start:l,end:c}=e.clips[t];o(i,a,l*(1-s)+c*s)}else for(let e=0,t=0;e<n;e++,t+=4)o(0,t,e/(n-1));return i}Sr("AlphaImage",Sa),Sr("RGBAImage",Ta);var ka={paint:new fi({"hillshade-illumination-direction":new si(ne.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new si(ne.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new si(ne.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new si(ne.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new si(ne.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new si(ne.paint_hillshade["hillshade-accent-color"])})};const Ma=vi([{name:"a_pos",components:2,type:"Int16"}],4),{members:Pa}=Ma;var Ia={exports:{}};function Oa(e,t,n){n=n||2;var r,i,o,a,s,l,c,u=t&&t.length,h=u?t[0]*n:e.length,f=Da(e,0,h,n,!0),p=[];if(!f||f.next===f.prev)return p;if(u&&(f=function(e,t,n,r){var i,o,a,s=[];for(i=0,o=t.length;i<o;i++)(a=Da(e,t[i]*r,i<o-1?t[i+1]*r:e.length,r,!1))===a.next&&(a.steiner=!0),s.push(Wa(a));for(s.sort(ja),i=0;i<s.length;i++)n=Va(s[i],n);return n}(e,t,f,n)),e.length>80*n){r=o=e[0],i=a=e[1];for(var d=n;d<h;d+=n)(s=e[d])<r&&(r=s),(l=e[d+1])<i&&(i=l),s>o&&(o=s),l>a&&(a=l);c=0!==(c=Math.max(o-r,a-i))?32767/c:0}return La(f,p,n,r,i,c,0),p}function Da(e,t,n,r,i){var o,a;if(i===is(e,t,n,r)>0)for(o=t;o<n;o+=r)a=ts(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=ts(o,e[o],e[o+1],a);return a&&Za(a,a.next)&&(ns(a),a=a.next),a}function za(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!Za(r,r.next)&&0!==Xa(r.prev,r,r.next))r=r.next;else{if(ns(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function La(e,t,n,r,i,o,a){if(e){!a&&o&&function(e,t,n,r){var i=e;do{0===i.z&&(i.z=qa(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,l,c=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<c&&(s++,r=r.nextZ);t++);for(l=c;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(e,r,i,o);for(var s,l,c=e;e.prev!==e.next;)if(s=e.prev,l=e.next,o?Fa(e,r,i,o):Ra(e))t.push(s.i/n|0),t.push(e.i/n|0),t.push(l.i/n|0),ns(e),e=l.next,c=l.next;else if((e=l)===c){a?1===a?La(e=Ua(za(e),t,n),t,n,r,i,o,2):2===a&&Na(e,t,n,r,i,o):La(za(e),t,n,r,i,o,1);break}}}function Ra(e){var t=e.prev,n=e,r=e.next;if(Xa(t,n,r)>=0)return!1;for(var i=t.x,o=n.x,a=r.x,s=t.y,l=n.y,c=r.y,u=i<o?i<a?i:a:o<a?o:a,h=s<l?s<c?s:c:l<c?l:c,f=i>o?i>a?i:a:o>a?o:a,p=s>l?s>c?s:c:l>c?l:c,d=r.next;d!==t;){if(d.x>=u&&d.x<=f&&d.y>=h&&d.y<=p&&Ha(i,s,o,l,a,c,d.x,d.y)&&Xa(d.prev,d,d.next)>=0)return!1;d=d.next}return!0}function Fa(e,t,n,r){var i=e.prev,o=e,a=e.next;if(Xa(i,o,a)>=0)return!1;for(var s=i.x,l=o.x,c=a.x,u=i.y,h=o.y,f=a.y,p=s<l?s<c?s:c:l<c?l:c,d=u<h?u<f?u:f:h<f?h:f,m=s>l?s>c?s:c:l>c?l:c,g=u>h?u>f?u:f:h>f?h:f,y=qa(p,d,t,n,r),v=qa(m,g,t,n,r),b=e.prevZ,_=e.nextZ;b&&b.z>=y&&_&&_.z<=v;){if(b.x>=p&&b.x<=m&&b.y>=d&&b.y<=g&&b!==i&&b!==a&&Ha(s,u,l,h,c,f,b.x,b.y)&&Xa(b.prev,b,b.next)>=0)return!1;if(b=b.prevZ,_.x>=p&&_.x<=m&&_.y>=d&&_.y<=g&&_!==i&&_!==a&&Ha(s,u,l,h,c,f,_.x,_.y)&&Xa(_.prev,_,_.next)>=0)return!1;_=_.nextZ}for(;b&&b.z>=y;){if(b.x>=p&&b.x<=m&&b.y>=d&&b.y<=g&&b!==i&&b!==a&&Ha(s,u,l,h,c,f,b.x,b.y)&&Xa(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;_&&_.z<=v;){if(_.x>=p&&_.x<=m&&_.y>=d&&_.y<=g&&_!==i&&_!==a&&Ha(s,u,l,h,c,f,_.x,_.y)&&Xa(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function Ua(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!Za(i,o)&&Ya(i,r,r.next,o)&&Qa(i,o)&&Qa(o,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(o.i/n|0),ns(r),ns(r.next),r=e=o),r=r.next}while(r!==e);return za(r)}function Na(e,t,n,r,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&$a(a,s)){var l=es(a,s);return a=za(a,a.next),l=za(l,l.next),La(a,t,n,r,i,o,0),void La(l,t,n,r,i,o,0)}s=s.next}a=a.next}while(a!==e)}function ja(e,t){return e.x-t.x}function Va(e,t){var n=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a&&(a=s,n=r.x<r.next.x?r:r.next,s===i))return n}r=r.next}while(r!==t);if(!n)return null;var l,c=n,u=n.x,h=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=u&&i!==r.x&&Ha(o<h?i:a,o,u,h,o<h?a:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),Qa(r,e)&&(l<f||l===f&&(r.x>n.x||r.x===n.x&&Ga(n,r)))&&(n=r,f=l)),r=r.next}while(r!==c);return n}(e,t);if(!n)return t;var r=es(n,e);return za(r,r.next),za(n,n.next)}function Ga(e,t){return Xa(e.prev,e,t.prev)<0&&Xa(t.next,e,e.next)<0}function qa(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Wa(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Ha(e,t,n,r,i,o,a,s){return(i-a)*(t-s)>=(e-a)*(o-s)&&(e-a)*(r-s)>=(n-a)*(t-s)&&(n-a)*(o-s)>=(i-a)*(r-s)}function $a(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Ya(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Qa(e,t)&&Qa(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(Xa(e.prev,e,t.prev)||Xa(e,t.prev,t))||Za(e,t)&&Xa(e.prev,e,e.next)>0&&Xa(t.prev,t,t.next)>0)}function Xa(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Za(e,t){return e.x===t.x&&e.y===t.y}function Ya(e,t,n,r){var i=Ja(Xa(e,t,n)),o=Ja(Xa(e,t,r)),a=Ja(Xa(n,r,e)),s=Ja(Xa(n,r,t));return i!==o&&a!==s||!(0!==i||!Ka(e,n,t))||!(0!==o||!Ka(e,r,t))||!(0!==a||!Ka(n,e,r))||!(0!==s||!Ka(n,t,r))}function Ka(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Ja(e){return e>0?1:e<0?-1:0}function Qa(e,t){return Xa(e.prev,e,e.next)<0?Xa(e,t,e.next)>=0&&Xa(e,e.prev,t)>=0:Xa(e,t,e.prev)<0||Xa(e,e.next,t)<0}function es(e,t){var n=new rs(e.i,e.x,e.y),r=new rs(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function ts(e,t,n,r){var i=new rs(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function ns(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function rs(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function is(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}function os(e,t,n,r,i){as(e,t,n||0,r||e.length-1,i||ls)}function as(e,t,n,r,i){for(;r>n;){if(r-n>600){var o=r-n+1,a=t-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);as(e,t,Math.max(n,Math.floor(t-a*l/o+c)),Math.min(r,Math.floor(t+(o-a)*l/o+c)),i)}var u=e[t],h=n,f=r;for(ss(e,n,t),i(e[r],u)>0&&ss(e,n,r);h<f;){for(ss(e,h,f),h++,f--;i(e[h],u)<0;)h++;for(;i(e[f],u)>0;)f--}0===i(e[n],u)?ss(e,n,f):ss(e,++f,r),f<=t&&(n=f+1),t<=f&&(r=f-1)}}function ss(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function ls(e,t){return e<t?-1:e>t?1:0}function cs(e,t){const n=e.length;if(n<=1)return[e];const r=[];let i,o;for(let t=0;t<n;t++){const n=g(e[t]);0!==n&&(e[t].area=Math.abs(n),void 0===o&&(o=n<0),o===n<0?(i&&r.push(i),i=[e[t]]):i.push(e[t]))}if(i&&r.push(i),t>1)for(let e=0;e<r.length;e++)r[e].length<=t||(os(r[e],t,1,r[e].length-1,us),r[e]=r[e].slice(0,t));return r}function us(e,t){return t.area-e.area}function hs(e,t,n){const r=n.patternDependencies;let i=!1;for(const n of t){const t=n.paint.get(`${e}-pattern`);t.isConstant()||(i=!0);const o=t.constantOr(null);o&&(i=!0,r[o.to]=!0,r[o.from]=!0)}return i}function fs(e,t,n,r,i){const o=i.patternDependencies;for(const a of t){const t=a.paint.get(`${e}-pattern`).value;if("constant"!==t.kind){let e=t.evaluate({zoom:r-1},n,{},i.availableImages),s=t.evaluate({zoom:r},n,{},i.availableImages),l=t.evaluate({zoom:r+1},n,{},i.availableImages);e=e&&e.name?e.name:e,s=s&&s.name?s.name:s,l=l&&l.name?l.name:l,o[e]=!0,o[s]=!0,o[l]=!0,n.patterns[a.id]={min:e,mid:s,max:l}}}return n}Ia.exports=Oa,Ia.exports.default=Oa,Oa.deviation=function(e,t,n,r){var i=t&&t.length,o=Math.abs(is(e,0,i?t[0]*n:e.length,n));if(i)for(var a=0,s=t.length;a<s;a++)o-=Math.abs(is(e,t[a]*n,a<s-1?t[a+1]*n:e.length,n));var l=0;for(a=0;a<r.length;a+=3){var c=r[a]*n,u=r[a+1]*n,h=r[a+2]*n;l+=Math.abs((e[c]-e[h])*(e[u+1]-e[c+1])-(e[c]-e[u])*(e[h+1]-e[c+1]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},Oa.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[i][o][a]);i>0&&n.holes.push(r+=e[i-1].length)}return n};class ps{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new eo,this.indexArray=new uo,this.indexArray2=new ho,this.programConfigurations=new Ro(e.layers,e.zoom),this.segments=new mo,this.segments2=new mo,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,n){this.hasPattern=hs("fill",this.layers,t);const r=this.layers[0].layout.get("fill-sort-key"),i=!r.isConstant(),o=[];for(const{feature:a,id:s,index:l,sourceLayerIndex:c}of e){const e=this.layers[0]._featureFilter.needGeometry,u=qo(a,e);if(!this.layers[0]._featureFilter.filter(new Jr(this.zoom),u,n))continue;const h=i?r.evaluate(u,{},n,t.availableImages):void 0,f={id:s,properties:a.properties,type:a.type,sourceLayerIndex:c,index:l,geometry:e?u.geometry:Go(a),patterns:{},sortKey:h};o.push(f)}i&&o.sort(((e,t)=>e.sortKey-t.sortKey));for(const r of o){const{geometry:i,index:o,sourceLayerIndex:a}=r;if(this.hasPattern){const e=fs("fill",this.layers,r,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(r,i,o,n,{});t.featureIndex.insert(e[o].feature,i,o,a,this.index)}}update(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)}addFeatures(e,t,n){for(const e of this.patternFeatures)this.addFeature(e,e.geometry,e.index,t,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Pa),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,t,n,r,i){for(const e of cs(t,500)){let t=0;for(const n of e)t+=n.length;const n=this.segments.prepareSegment(t,this.layoutVertexArray,this.indexArray),r=n.vertexLength,i=[],o=[];for(const t of e){if(0===t.length)continue;t!==e[0]&&o.push(i.length/2);const n=this.segments2.prepareSegment(t.length,this.layoutVertexArray,this.indexArray2),r=n.vertexLength;this.layoutVertexArray.emplaceBack(t[0].x,t[0].y),this.indexArray2.emplaceBack(r+t.length-1,r),i.push(t[0].x),i.push(t[0].y);for(let e=1;e<t.length;e++)this.layoutVertexArray.emplaceBack(t[e].x,t[e].y),this.indexArray2.emplaceBack(r+e-1,r+e),i.push(t[e].x),i.push(t[e].y);n.vertexLength+=t.length,n.primitiveLength+=t.length}const a=Ia.exports(i,o);for(let e=0;e<a.length;e+=3)this.indexArray.emplaceBack(r+a[e],r+a[e+1],r+a[e+2]);n.vertexLength+=t,n.primitiveLength+=a.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,r)}}Sr("FillBucket",ps,{omit:["layers","patternFeatures"]});const ds=new fi({"fill-sort-key":new li(ne.layout_fill["fill-sort-key"])});var ms={paint:new fi({"fill-antialias":new si(ne.paint_fill["fill-antialias"]),"fill-opacity":new li(ne.paint_fill["fill-opacity"]),"fill-color":new li(ne.paint_fill["fill-color"]),"fill-outline-color":new li(ne.paint_fill["fill-outline-color"]),"fill-translate":new si(ne.paint_fill["fill-translate"]),"fill-translate-anchor":new si(ne.paint_fill["fill-translate-anchor"]),"fill-pattern":new ci(ne.paint_fill["fill-pattern"])}),layout:ds};const gs=vi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),ys=vi([{name:"a_centroid",components:2,type:"Int16"}],4),{members:vs}=gs;var bs={},_s=E,xs=As;function As(e,t,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=i,e.readFields(ws,this,t)}function ws(e,t,n){1==e?t.id=n.readVarint():2==e?function(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var r=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[r]=i}}(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function Cs(e){for(var t,n,r=0,i=0,o=e.length,a=o-1;i<o;a=i++)r+=((n=e[a]).x-(t=e[i]).x)*(t.y+n.y);return r}As.types=["Unknown","Point","LineString","Polygon"],As.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,r=1,i=0,o=0,a=0,s=[];e.pos<n;){if(i<=0){var l=e.readVarint();r=7&l,i=l>>3}if(i--,1===r||2===r)o+=e.readSVarint(),a+=e.readSVarint(),1===r&&(t&&s.push(t),t=[]),t.push(new _s(o,a));else{if(7!==r)throw new Error("unknown command "+r);t&&t.push(t[0].clone())}}return t&&s.push(t),s},As.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,l=1/0,c=-1/0;e.pos<t;){if(r<=0){var u=e.readVarint();n=7&u,r=u>>3}if(r--,1===n||2===n)(i+=e.readSVarint())<a&&(a=i),i>s&&(s=i),(o+=e.readSVarint())<l&&(l=o),o>c&&(c=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,l,s,c]},As.prototype.toGeoJSON=function(e,t,n){var r,i,o=this.extent*Math.pow(2,n),a=this.extent*e,s=this.extent*t,l=this.loadGeometry(),c=As.types[this.type];function u(e){for(var t=0;t<e.length;t++){var n=e[t];e[t]=[360*(n.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(r=0;r<l.length;r++)h[r]=l[r][0];u(l=h);break;case 2:for(r=0;r<l.length;r++)u(l[r]);break;case 3:for(l=function(e){var t=e.length;if(t<=1)return[e];for(var n,r,i=[],o=0;o<t;o++){var a=Cs(e[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[e[o]]):n.push(e[o]))}return n&&i.push(n),i}(l),r=0;r<l.length;r++)for(i=0;i<l[r].length;i++)u(l[r][i])}1===l.length?l=l[0]:c="Multi"+c;var f={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(f.id=this.id),f};var Es=xs,Ss=Ts;function Ts(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Bs,this,t),this.length=this._features.length}function Bs(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(function(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}(n))}Ts.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new Es(this._pbf,t,this.extent,this._keys,this._values)};var ks=Ss;function Ms(e,t,n){if(3===e){var r=new ks(n,n.readVarint()+n.pos);r.length&&(t[r.name]=r)}}bs.VectorTile=function(e,t){this.layers=e.readFields(Ms,{},t)},bs.VectorTileFeature=xs,bs.VectorTileLayer=Ss;const Ps=bs.VectorTileFeature.types,Is=Math.pow(2,13);function Os(e,t,n,r,i,o,a,s){e.emplaceBack(t,n,2*Math.floor(r*Is)+a,i*Is*2,o*Is*2,Math.round(s))}class Ds{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new to,this.centroidVertexArray=new Ji,this.indexArray=new uo,this.programConfigurations=new Ro(e.layers,e.zoom),this.segments=new mo,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,n){this.features=[],this.hasPattern=hs("fill-extrusion",this.layers,t);for(const{feature:r,id:i,index:o,sourceLayerIndex:a}of e){const e=this.layers[0]._featureFilter.needGeometry,s=qo(r,e);if(!this.layers[0]._featureFilter.filter(new Jr(this.zoom),s,n))continue;const l={id:i,sourceLayerIndex:a,index:o,geometry:e?s.geometry:Go(r),properties:r.properties,type:r.type,patterns:{}};this.hasPattern?this.features.push(fs("fill-extrusion",this.layers,l,this.zoom,t)):this.addFeature(l,l.geometry,o,n,{}),t.featureIndex.insert(r,l.geometry,o,a,this.index,!0)}}addFeatures(e,t,n){for(const e of this.features){const{geometry:r}=e;this.addFeature(e,r,e.index,t,n)}}update(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,vs),this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,ys.members,!0),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(e,t,n,r,i){const o={x:0,y:0,vertexCount:0};for(const n of cs(t,500)){let t=0;for(const e of n)t+=e.length;let r=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const e of n){if(0===e.length)continue;if(Ls(e))continue;let t=0;for(let n=0;n<e.length;n++){const i=e[n];if(n>=1){const a=e[n-1];if(!zs(i,a)){r.vertexLength+4>mo.MAX_VERTEX_ARRAY_LENGTH&&(r=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const e=i.sub(a)._perp()._unit(),n=a.dist(i);t+n>32768&&(t=0),Os(this.layoutVertexArray,i.x,i.y,e.x,e.y,0,0,t),Os(this.layoutVertexArray,i.x,i.y,e.x,e.y,0,1,t),o.x+=2*i.x,o.y+=2*i.y,o.vertexCount+=2,t+=n,Os(this.layoutVertexArray,a.x,a.y,e.x,e.y,0,0,t),Os(this.layoutVertexArray,a.x,a.y,e.x,e.y,0,1,t),o.x+=2*a.x,o.y+=2*a.y,o.vertexCount+=2;const s=r.vertexLength;this.indexArray.emplaceBack(s,s+2,s+1),this.indexArray.emplaceBack(s+1,s+2,s+3),r.vertexLength+=4,r.primitiveLength+=2}}}}if(r.vertexLength+t>mo.MAX_VERTEX_ARRAY_LENGTH&&(r=this.segments.prepareSegment(t,this.layoutVertexArray,this.indexArray)),"Polygon"!==Ps[e.type])continue;const i=[],a=[],s=r.vertexLength;for(const e of n)if(0!==e.length){e!==n[0]&&a.push(i.length/2);for(let t=0;t<e.length;t++){const n=e[t];Os(this.layoutVertexArray,n.x,n.y,0,0,1,1,0),o.x+=n.x,o.y+=n.y,o.vertexCount+=1,i.push(n.x),i.push(n.y)}}const l=Ia.exports(i,a);for(let e=0;e<l.length;e+=3)this.indexArray.emplaceBack(s+l[e],s+l[e+2],s+l[e+1]);r.primitiveLength+=l.length/3,r.vertexLength+=t}for(let e=0;e<o.vertexCount;e++)this.centroidVertexArray.emplaceBack(Math.floor(o.x/o.vertexCount),Math.floor(o.y/o.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,r)}}function zs(e,t){return e.x===t.x&&(e.x<0||e.x>No)||e.y===t.y&&(e.y<0||e.y>No)}function Ls(e){return e.every((e=>e.x<0))||e.every((e=>e.x>No))||e.every((e=>e.y<0))||e.every((e=>e.y>No))}Sr("FillExtrusionBucket",Ds,{omit:["layers","features"]});var Rs={paint:new fi({"fill-extrusion-opacity":new si(ne["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new li(ne["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new si(ne["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new si(ne["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ci(ne["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new li(ne["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new li(ne["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new si(ne["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Fs(e,t){return e.x*t.x+e.y*t.y}function Us(e,t){if(1===e.length){let n=0;const r=t[n++];let i;for(;!i||r.equals(i);)if(i=t[n++],!i)return 1/0;for(;n<t.length;n++){const o=t[n],a=e[0],s=i.sub(r),l=o.sub(r),c=a.sub(r),u=Fs(s,s),h=Fs(s,l),f=Fs(l,l),p=Fs(c,s),d=Fs(c,l),m=u*f-h*h,g=(f*p-h*d)/m,y=(u*d-h*p)/m,v=r.z*(1-g-y)+i.z*g+o.z*y;if(isFinite(v))return v}return 1/0}{let e=1/0;for(const n of t)e=Math.min(e,n.z);return e}}const Ns=vi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:js}=Ns,Vs=vi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Gs}=Vs,qs=bs.VectorTileFeature.types,Ws=Math.cos(Math.PI/180*37.5),Hs=Math.pow(2,14)/.5;class $s{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((e=>{this.gradients[e.id]={}})),this.layoutVertexArray=new no,this.layoutVertexArray2=new ro,this.indexArray=new uo,this.programConfigurations=new Ro(e.layers,e.zoom),this.segments=new mo,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,n){this.hasPattern=hs("line",this.layers,t);const r=this.layers[0].layout.get("line-sort-key"),i=!r.isConstant(),o=[];for(const{feature:t,id:a,index:s,sourceLayerIndex:l}of e){const e=this.layers[0]._featureFilter.needGeometry,c=qo(t,e);if(!this.layers[0]._featureFilter.filter(new Jr(this.zoom),c,n))continue;const u=i?r.evaluate(c,{},n):void 0,h={id:a,properties:t.properties,type:t.type,sourceLayerIndex:l,index:s,geometry:e?c.geometry:Go(t),patterns:{},sortKey:u};o.push(h)}i&&o.sort(((e,t)=>e.sortKey-t.sortKey));for(const r of o){const{geometry:i,index:o,sourceLayerIndex:a}=r;if(this.hasPattern){const e=fs("line",this.layers,r,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(r,i,o,n,{});t.featureIndex.insert(e[o].feature,i,o,a,this.index)}}update(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)}addFeatures(e,t,n){for(const e of this.patternFeatures)this.addFeature(e,e.geometry,e.index,t,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Gs)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,js),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,t,n,r,i){const o=this.layers[0].layout,a=o.get("line-join").evaluate(e,{}),s=o.get("line-cap"),l=o.get("line-miter-limit"),c=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const n of t)this.addLine(n,e,a,s,l,c);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,r)}addLine(e,t,n,r,i,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let t=0;t<e.length-1;t++)this.totalDistance+=e[t].dist(e[t+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const a="Polygon"===qs[t.type];let s=e.length;for(;s>=2&&e[s-1].equals(e[s-2]);)s--;let l=0;for(;l<s-1&&e[l].equals(e[l+1]);)l++;if(s<(a?3:2))return;"bevel"===n&&(i=1.05);const c=this.overscaling<=16?122880/(512*this.overscaling):0,u=this.segments.prepareSegment(10*s,this.layoutVertexArray,this.indexArray);let h,f,p,d,m;this.e1=this.e2=-1,a&&(h=e[s-2],m=e[l].sub(h)._unit()._perp());for(let t=l;t<s;t++){if(p=t===s-1?a?e[l+1]:void 0:e[t+1],p&&e[t].equals(p))continue;m&&(d=m),h&&(f=h),h=e[t],m=p?p.sub(h)._unit()._perp():d,d=d||m;let g=d.add(m);0===g.x&&0===g.y||g._unit();const y=d.x*m.x+d.y*m.y,v=g.x*m.x+g.y*m.y,b=0!==v?1/v:1/0,_=2*Math.sqrt(2-2*v),x=v<Ws&&f&&p,A=d.x*m.y-d.y*m.x>0;if(x&&t>l){const e=h.dist(f);if(e>2*c){const t=h.sub(h.sub(f)._mult(c/e)._round());this.updateDistance(f,t),this.addCurrentVertex(t,d,0,0,u),f=t}}const w=f&&p;let C=w?n:a?"butt":r;if(w&&"round"===C&&(b<o?C="miter":b<=2&&(C="fakeround")),"miter"===C&&b>i&&(C="bevel"),"bevel"===C&&(b>2&&(C="flipbevel"),b<i&&(C="miter")),f&&this.updateDistance(f,h),"miter"===C)g._mult(b),this.addCurrentVertex(h,g,0,0,u);else if("flipbevel"===C){if(b>100)g=m.mult(-1);else{const e=b*d.add(m).mag()/d.sub(m).mag();g._perp()._mult(e*(A?-1:1))}this.addCurrentVertex(h,g,0,0,u),this.addCurrentVertex(h,g.mult(-1),0,0,u)}else if("bevel"===C||"fakeround"===C){const e=-Math.sqrt(b*b-1),t=A?e:0,n=A?0:e;if(f&&this.addCurrentVertex(h,d,t,n,u),"fakeround"===C){const e=Math.round(180*_/Math.PI/20);for(let t=1;t<e;t++){let n=t/e;if(.5!==n){const e=n-.5;n+=n*e*(n-1)*((1.0904+y*(y*(3.55645-1.43519*y)-3.2452))*e*e+(.848013+y*(.215638*y-1.06021)))}const r=m.sub(d)._mult(n)._add(d)._unit()._mult(A?-1:1);this.addHalfVertex(h,r.x,r.y,!1,A,0,u)}}p&&this.addCurrentVertex(h,m,-t,-n,u)}else if("butt"===C)this.addCurrentVertex(h,g,0,0,u);else if("square"===C){const e=f?1:-1;this.addCurrentVertex(h,g,e,e,u)}else"round"===C&&(f&&(this.addCurrentVertex(h,d,0,0,u),this.addCurrentVertex(h,d,1,1,u,!0)),p&&(this.addCurrentVertex(h,m,-1,-1,u,!0),this.addCurrentVertex(h,m,0,0,u)));if(x&&t<s-1){const e=h.dist(p);if(e>2*c){const t=h.add(p.sub(h)._mult(c/e)._round());this.updateDistance(h,t),this.addCurrentVertex(t,m,0,0,u),h=t}}}}addCurrentVertex(e,t,n,r,i,o=!1){const a=t.y*r-t.x,s=-t.y-t.x*r;this.addHalfVertex(e,t.x+t.y*n,t.y-t.x*n,o,!1,n,i),this.addHalfVertex(e,a,s,o,!0,-r,i),this.distance>Hs/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(e,t,n,r,i,o))}addHalfVertex({x:e,y:t},n,r,i,o,a,s){const l=.5*(this.lineClips?this.scaledDistance*(Hs-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e<<1)+(i?1:0),(t<<1)+(o?1:0),Math.round(63*n)+128,Math.round(63*r)+128,1+(0===a?0:a<0?-1:1)|(63&l)<<2,l>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const c=s.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,c),s.primitiveLength++),o?this.e2=c:this.e1=c}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}Sr("LineBucket",$s,{omit:["layers","patternFeatures"]});const Xs=new fi({"line-cap":new si(ne.layout_line["line-cap"]),"line-join":new li(ne.layout_line["line-join"]),"line-miter-limit":new si(ne.layout_line["line-miter-limit"]),"line-round-limit":new si(ne.layout_line["line-round-limit"]),"line-sort-key":new li(ne.layout_line["line-sort-key"])});var Zs={paint:new fi({"line-opacity":new li(ne.paint_line["line-opacity"]),"line-color":new li(ne.paint_line["line-color"]),"line-translate":new si(ne.paint_line["line-translate"]),"line-translate-anchor":new si(ne.paint_line["line-translate-anchor"]),"line-width":new li(ne.paint_line["line-width"]),"line-gap-width":new li(ne.paint_line["line-gap-width"]),"line-offset":new li(ne.paint_line["line-offset"]),"line-blur":new li(ne.paint_line["line-blur"]),"line-dasharray":new ui(ne.paint_line["line-dasharray"]),"line-pattern":new ci(ne.paint_line["line-pattern"]),"line-gradient":new hi(ne.paint_line["line-gradient"])}),layout:Xs};const Ys=new class extends li{possiblyEvaluate(e,t){return t=new Jr(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),super.possiblyEvaluate(e,t)}evaluate(e,t,n,r){return t=s({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(e,t,n,r)}}(Zs.paint.properties["line-width"].specification);function Ks(e,t){return t>0?t+2*e:e}Ys.useIntegerZoom=!0;const Js=vi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Qs=vi([{name:"a_projected_pos",components:3,type:"Float32"}],4);vi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const el=vi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);vi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const tl=vi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),nl=vi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function rl(e,t,n){return e.sections.forEach((e=>{e.text=function(e,t,n){const r=t.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?e=e.toLocaleUpperCase():"lowercase"===r&&(e=e.toLocaleLowerCase()),Kr.applyArabicShaping&&(e=Kr.applyArabicShaping(e)),e}(e.text,t,n)})),e}vi([{name:"triangle",components:3,type:"Uint16"}]),vi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),vi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),vi([{type:"Float32",name:"offsetX"}]),vi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const il={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var ol=24,al=cl,sl=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,c=l>>1,u=-7,h=n?i-1:0,f=n?-1:1,p=e[t+h];for(h+=f,o=p&(1<<-u)-1,p>>=-u,u+=s;u>0;o=256*o+e[t+h],h+=f,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;u>0;a=256*a+e[t+h],h+=f,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)},ll=function(e,t,n,r,i,o){var a,s,l,c=8*o-i-1,u=(1<<c)-1,h=u>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+h>=1?f/l:f*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(t*l-1)*Math.pow(2,i),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+p]=255&a,p+=d,a/=256,c-=8);e[n+p-d]|=128*m};function cl(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}cl.Varint=0,cl.Fixed64=1,cl.Bytes=2,cl.Fixed32=5;var ul,hl=4294967296,fl=1/hl,pl="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function dl(e){return e.type===cl.Bytes?e.readVarint()+e.pos:e.pos+1}function ml(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function gl(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=e;i--)n.buf[i+r]=n.buf[i]}function yl(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function vl(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function bl(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function _l(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function xl(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function Al(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function wl(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function Cl(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function El(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function Sl(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function Tl(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function Bl(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function kl(e,t,n){1===e&&n.readMessage(Ml,t)}function Ml(e,t,n){if(3===e){const{id:e,bitmap:r,width:i,height:o,left:a,top:s,advance:l}=n.readMessage(Pl,{});t.push({id:e,bitmap:new Sa({width:i+6,height:o+6},r),metrics:{width:i,height:o,left:a,top:s,advance:l}})}}function Pl(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}function Il(e){let t=0,n=0;for(const r of e)t+=r.w*r.h,n=Math.max(n,r.w);e.sort(((e,t)=>t.h-e.h));const r=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),n),h:1/0}];let i=0,o=0;for(const t of e)for(let e=r.length-1;e>=0;e--){const n=r[e];if(!(t.w>n.w||t.h>n.h)){if(t.x=n.x,t.y=n.y,o=Math.max(o,t.y+t.h),i=Math.max(i,t.x+t.w),t.w===n.w&&t.h===n.h){const t=r.pop();e<r.length&&(r[e]=t)}else t.h===n.h?(n.x+=t.w,n.w-=t.w):t.w===n.w?(n.y+=t.h,n.h-=t.h):(r.push({x:n.x+t.w,y:n.y,w:n.w-t.w,h:t.h}),n.y+=t.h,n.h-=t.h);break}}return{w:i,h:o,fill:t/(i*o)||0}}cl.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,e(i,t,this),this.pos===o&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Sl(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Bl(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Sl(this.buf,this.pos)+Sl(this.buf,this.pos+4)*hl;return this.pos+=8,e},readSFixed64:function(){var e=Sl(this.buf,this.pos)+Bl(this.buf,this.pos+4)*hl;return this.pos+=8,e},readFloat:function(){var e=sl(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=sl(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,r=this.buf;return t=127&(n=r[this.pos++]),n<128?t:(t|=(127&(n=r[this.pos++]))<<7,n<128?t:(t|=(127&(n=r[this.pos++]))<<14,n<128?t:(t|=(127&(n=r[this.pos++]))<<21,n<128?t:function(e,t,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return ml(e,r,t);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return ml(e,r,t);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return ml(e,r,t);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return ml(e,r,t);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return ml(e,r,t);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return ml(e,r,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=r[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&pl?function(e,t,n){return pl.decode(e.subarray(t,n))}(this.buf,t,e):function(e,t,n){for(var r="",i=t;i<n;){var o,a,s,l=e[i],c=null,u=l>239?4:l>223?3:l>191?2:1;if(i+u>n)break;1===u?l<128&&(c=l):2===u?128==(192&(o=e[i+1]))&&(c=(31&l)<<6|63&o)<=127&&(c=null):3===u?(a=e[i+2],128==(192&(o=e[i+1]))&&128==(192&a)&&((c=(15&l)<<12|(63&o)<<6|63&a)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(a=e[i+2],s=e[i+3],128==(192&(o=e[i+1]))&&128==(192&a)&&128==(192&s)&&((c=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,r+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),r+=String.fromCharCode(c),i+=u}return r}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==cl.Bytes)return e.push(this.readVarint(t));var n=dl(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==cl.Bytes)return e.push(this.readSVarint());var t=dl(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==cl.Bytes)return e.push(this.readBoolean());var t=dl(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==cl.Bytes)return e.push(this.readFloat());var t=dl(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==cl.Bytes)return e.push(this.readDouble());var t=dl(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==cl.Bytes)return e.push(this.readFixed32());var t=dl(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==cl.Bytes)return e.push(this.readSFixed32());var t=dl(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==cl.Bytes)return e.push(this.readFixed64());var t=dl(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==cl.Bytes)return e.push(this.readSFixed64());var t=dl(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===cl.Varint)for(;this.buf[this.pos++]>127;);else if(t===cl.Bytes)this.pos=this.readVarint()+this.pos;else if(t===cl.Fixed32)this.pos+=4;else{if(t!==cl.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Tl(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Tl(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Tl(this.buf,-1&e,this.pos),Tl(this.buf,Math.floor(e*fl),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Tl(this.buf,-1&e,this.pos),Tl(this.buf,Math.floor(e*fl),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var n,r;if(e>=0?(n=e%4294967296|0,r=e/4294967296|0):(r=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:(n=0,r=r+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,n.buf[n.pos]=127&(e>>>=7)}(n,0,t),function(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(r,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,n){for(var r,i,o=0;o<t.length;o++){if((r=t.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):i=r;continue}if(r<56320){e[n++]=239,e[n++]=191,e[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(e[n++]=239,e[n++]=191,e[n++]=189,i=null);r<128?e[n++]=r:(r<2048?e[n++]=r>>6|192:(r<65536?e[n++]=r>>12|224:(e[n++]=r>>18|240,e[n++]=r>>12&63|128),e[n++]=r>>6&63|128),e[n++]=63&r|128)}return n}(this.buf,e,this.pos);var n=this.pos-t;n>=128&&gl(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),ll(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),ll(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&gl(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,cl.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,yl,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,vl,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,xl,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,bl,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,_l,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,Al,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,wl,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,Cl,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,El,t)},writeBytesField:function(e,t){this.writeTag(e,cl.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,cl.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,cl.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,cl.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,cl.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,cl.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,cl.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,cl.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,cl.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,cl.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};class Ol{constructor(e,{pixelRatio:t,version:n,stretchX:r,stretchY:i,content:o}){this.paddedRect=e,this.pixelRatio=t,this.stretchX=r,this.stretchY=i,this.content=o,this.version=n}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Dl{constructor(e,t){const n={},r={};this.haveRenderCallbacks=[];const i=[];this.addImages(e,n,i),this.addImages(t,r,i);const{w:o,h:a}=Il(i),s=new Ta({width:o||1,height:a||1});for(const t in e){const r=e[t],i=n[t].paddedRect;Ta.copy(r.data,s,{x:0,y:0},{x:i.x+1,y:i.y+1},r.data)}for(const e in t){const n=t[e],i=r[e].paddedRect,o=i.x+1,a=i.y+1,l=n.data.width,c=n.data.height;Ta.copy(n.data,s,{x:0,y:0},{x:o,y:a},n.data),Ta.copy(n.data,s,{x:0,y:c-1},{x:o,y:a-1},{width:l,height:1}),Ta.copy(n.data,s,{x:0,y:0},{x:o,y:a+c},{width:l,height:1}),Ta.copy(n.data,s,{x:l-1,y:0},{x:o-1,y:a},{width:1,height:c}),Ta.copy(n.data,s,{x:0,y:0},{x:o+l,y:a},{width:1,height:c})}this.image=s,this.iconPositions=n,this.patternPositions=r}addImages(e,t,n){for(const r in e){const i=e[r],o={x:0,y:0,w:i.data.width+2,h:i.data.height+2};n.push(o),t[r]=new Ol(o,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(r)}}patchUpdatedImages(e,t){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const n in e.updatedImages)this.patchUpdatedImage(this.iconPositions[n],e.getImage(n),t),this.patchUpdatedImage(this.patternPositions[n],e.getImage(n),t)}patchUpdatedImage(e,t,n){if(!e||!t)return;if(e.version===t.version)return;e.version=t.version;const[r,i]=e.tl;n.update(t.data,void 0,{x:r,y:i})}}Sr("ImagePosition",Ol),Sr("ImageAtlas",Dl),e.WritingMode=void 0,(ul=e.WritingMode||(e.WritingMode={}))[ul.none=0]="none",ul[ul.horizontal=1]="horizontal",ul[ul.vertical=2]="vertical",ul[ul.horizontalOnly=3]="horizontalOnly";const zl=-17;class Ll{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,t){const n=new Ll;return n.scale=e||1,n.fontStack=t,n}static forImage(e){const t=new Ll;return t.imageName=e,t}}class Rl{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,t){const n=new Rl;for(let r=0;r<e.sections.length;r++){const i=e.sections[r];i.image?n.addImageSection(i):n.addTextSection(i,t)}return n}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(){this.text=function(e){let t="";for(let n=0;n<e.length;n++){const r=e.charCodeAt(n+1)||null,i=e.charCodeAt(n-1)||null;t+=r&&Lr(r)&&!il[e[n+1]]||i&&Lr(i)&&!il[e[n-1]]||!il[e[n]]?e[n]:il[e[n]]}return t}(this.text)}trim(){let e=0;for(let t=0;t<this.text.length&&Ul[this.text.charCodeAt(t)];t++)e++;let t=this.text.length;for(let n=this.text.length-1;n>=0&&n>=e&&Ul[this.text.charCodeAt(n)];n--)t--;this.text=this.text.substring(e,t),this.sectionIndex=this.sectionIndex.slice(e,t)}substring(e,t){const n=new Rl;return n.text=this.text.substring(e,t),n.sectionIndex=this.sectionIndex.slice(e,t),n.sections=this.sections,n}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((e,t)=>Math.max(e,this.sections[t].scale)),0)}addTextSection(e,t){this.text+=e.text,this.sections.push(Ll.forText(e.scale,e.fontStack||t));const n=this.sections.length-1;for(let t=0;t<e.text.length;++t)this.sectionIndex.push(n)}addImageSection(e){const t=e.image?e.image.name:"";if(0===t.length)return void d("Can't add FormattedSection with an empty image.");const n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(Ll.forImage(t)),this.sectionIndex.push(this.sections.length-1)):d("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Fl(t,n,r,i,o,a,s,l,c,u,h,f,p,d,m,g){const y=Rl.fromFeature(t,o);let v;f===e.WritingMode.vertical&&y.verticalizePunctuation();const{processBidirectionalText:b,processStyledBidirectionalText:_}=Kr;if(b&&1===y.sections.length){v=[];const e=b(y.toString(),Hl(y,u,a,n,i,d,m));for(const t of e){const e=new Rl;e.text=t,e.sections=y.sections;for(let n=0;n<t.length;n++)e.sectionIndex.push(0);v.push(e)}}else if(_){v=[];const e=_(y.text,y.sectionIndex,Hl(y,u,a,n,i,d,m));for(const t of e){const e=new Rl;e.text=t[0],e.sectionIndex=t[1],e.sections=y.sections,v.push(e)}}else v=function(e,t){const n=[],r=e.text;let i=0;for(const r of t)n.push(e.substring(i,r)),i=r;return i<r.length&&n.push(e.substring(i,r.length)),n}(y,Hl(y,u,a,n,i,d,m));const x=[],A={positionedLines:x,text:y.toString(),top:h[1],bottom:h[1],left:h[0],right:h[0],writingMode:f,iconsInText:!1,verticalizable:!1};return function(t,n,r,i,o,a,s,l,c,u,h,f){let p=0,d=zl,m=0,g=0;const y="right"===l?1:"left"===l?0:.5;let v=0;for(const s of o){s.trim();const o=s.getMaxScale(),l=(o-1)*ol,_={positionedGlyphs:[],lineOffset:0};t.positionedLines[v]=_;const x=_.positionedGlyphs;let A=0;if(!s.length()){d+=a,++v;continue}for(let a=0;a<s.length();a++){const m=s.getSection(a),g=s.getSectionIndex(a),y=s.getCharCode(a);let v=0,_=null,w=null,C=null,E=ol;const S=!(c===e.WritingMode.horizontal||!h&&!zr(y)||h&&(Ul[y]||(b=y,Pr.Arabic(b)||Pr["Arabic Supplement"](b)||Pr["Arabic Extended-A"](b)||Pr["Arabic Presentation Forms-A"](b)||Pr["Arabic Presentation Forms-B"](b))));if(m.imageName){const e=i[m.imageName];if(!e)continue;C=m.imageName,t.iconsInText=t.iconsInText||!0,w=e.paddedRect;const n=e.displaySize;m.scale=m.scale*ol/f,_={width:n[0],height:n[1],left:1,top:-3,advance:S?n[1]:n[0]},v=l+(ol-n[1]*m.scale),E=_.advance;const r=S?n[0]*m.scale-ol*o:n[1]*m.scale-ol*o;r>0&&r>A&&(A=r)}else{const e=r[m.fontStack],t=e&&e[y];if(t&&t.rect)w=t.rect,_=t.metrics;else{const e=n[m.fontStack],t=e&&e[y];if(!t)continue;_=t.metrics}v=(o-m.scale)*ol}S?(t.verticalizable=!0,x.push({glyph:y,imageName:C,x:p,y:d+v,vertical:S,scale:m.scale,fontStack:m.fontStack,sectionIndex:g,metrics:_,rect:w}),p+=E*m.scale+u):(x.push({glyph:y,imageName:C,x:p,y:d+v,vertical:S,scale:m.scale,fontStack:m.fontStack,sectionIndex:g,metrics:_,rect:w}),p+=_.advance*m.scale+u)}0!==x.length&&(m=Math.max(p-u,m),Xl(x,0,x.length-1,y,A)),p=0;const w=a*o+A;_.lineOffset=Math.max(A,l),d+=w,g=Math.max(w,g),++v}var b;const _=d-zl,{horizontalAlign:x,verticalAlign:A}=$l(s);(function(e,t,n,r,i,o,a,s,l){const c=(t-n)*i;let u=0;u=o!==a?-s*r-zl:(-r*l+.5)*a;for(const t of e)for(const e of t.positionedGlyphs)e.x+=c,e.y+=u})(t.positionedLines,y,x,A,m,g,a,_,o.length),t.top+=-A*_,t.bottom=t.top+_,t.left+=-x*m,t.right=t.left+m}(A,n,r,i,v,s,l,c,f,u,p,g),!function(e){for(const t of e)if(0!==t.positionedGlyphs.length)return!1;return!0}(x)&&A}const Ul={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Nl={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function jl(e,t,n,r,i,o){if(t.imageName){const e=r[t.imageName];return e?e.displaySize[0]*t.scale*ol/o+i:0}{const r=n[t.fontStack],o=r&&r[e];return o?o.metrics.advance*t.scale+i:0}}function Vl(e,t,n,r){const i=Math.pow(e-t,2);return r?e<t?i/2:2*i:i+Math.abs(n)*n}function Gl(e,t,n){let r=0;return 10===e&&(r-=1e4),n&&(r+=150),40!==e&&65288!==e||(r+=50),41!==t&&65289!==t||(r+=50),r}function ql(e,t,n,r,i,o){let a=null,s=Vl(t,n,i,o);for(const e of r){const r=Vl(t-e.x,n,i,o)+e.badness;r<=s&&(a=e,s=r)}return{index:e,x:t,priorBreak:a,badness:s}}function Wl(e){return e?Wl(e.priorBreak).concat(e.index):[]}function Hl(e,t,n,r,i,o,a){if("point"!==o)return[];if(!e)return[];const s=[],l=function(e,t,n,r,i,o){let a=0;for(let n=0;n<e.length();n++){const s=e.getSection(n);a+=jl(e.getCharCode(n),s,r,i,t,o)}return a/Math.max(1,Math.ceil(a/n))}(e,t,n,r,i,a),c=e.text.indexOf("")>=0;let u=0;for(let n=0;n<e.length();n++){const o=e.getSection(n),f=e.getCharCode(n);if(Ul[f]||(u+=jl(f,o,r,i,t,a)),n<e.length()-1){const t=!((h=f)<11904||!(Pr["Bopomofo Extended"](h)||Pr.Bopomofo(h)||Pr["CJK Compatibility Forms"](h)||Pr["CJK Compatibility Ideographs"](h)||Pr["CJK Compatibility"](h)||Pr["CJK Radicals Supplement"](h)||Pr["CJK Strokes"](h)||Pr["CJK Symbols and Punctuation"](h)||Pr["CJK Unified Ideographs Extension A"](h)||Pr["CJK Unified Ideographs"](h)||Pr["Enclosed CJK Letters and Months"](h)||Pr["Halfwidth and Fullwidth Forms"](h)||Pr.Hiragana(h)||Pr["Ideographic Description Characters"](h)||Pr["Kangxi Radicals"](h)||Pr["Katakana Phonetic Extensions"](h)||Pr.Katakana(h)||Pr["Vertical Forms"](h)||Pr["Yi Radicals"](h)||Pr["Yi Syllables"](h)));(Nl[f]||t||o.imageName)&&s.push(ql(n+1,u,l,s,Gl(f,e.getCharCode(n+1),t&&c),!1))}}var h;return Wl(ql(e.length(),u,l,s,0,!0))}function $l(e){let t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function Xl(e,t,n,r,i){if(!r&&!i)return;const o=e[n],a=(e[n].x+o.metrics.advance*o.scale)*r;for(let r=t;r<=n;r++)e[r].x-=a,e[r].y+=i}function Zl(e,t,n){const{horizontalAlign:r,verticalAlign:i}=$l(n),o=t[0]-e.displaySize[0]*r,a=t[1]-e.displaySize[1]*i;return{image:e,top:a,bottom:a+e.displaySize[1],left:o,right:o+e.displaySize[0]}}function Yl(e,t,n,r,i,o){const a=e.image;let s;if(a.content){const e=a.content,t=a.pixelRatio||1;s=[e[0]/t,e[1]/t,a.displaySize[0]-e[2]/t,a.displaySize[1]-e[3]/t]}const l=t.left*o,c=t.right*o;let u,h,f,p;"width"===n||"both"===n?(p=i[0]+l-r[3],h=i[0]+c+r[1]):(p=i[0]+(l+c-a.displaySize[0])/2,h=p+a.displaySize[0]);const d=t.top*o,m=t.bottom*o;return"height"===n||"both"===n?(u=i[1]+d-r[0],f=i[1]+m+r[2]):(u=i[1]+(d+m-a.displaySize[1])/2,f=u+a.displaySize[1]),{image:a,top:u,right:h,bottom:f,left:p,collisionPadding:s}}const Kl=128;function Jl(e,t){const{expression:n}=t;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new Jr(e+1))};if("source"===n.kind)return{kind:"source"};{const{zoomStops:t,interpolationType:r}=n;let i=0;for(;i<t.length&&t[i]<=e;)i++;i=Math.max(0,i-1);let o=i;for(;o<t.length&&t[o]<e+1;)o++;o=Math.min(t.length-1,o);const a=t[i],s=t[o];return"composite"===n.kind?{kind:"composite",minZoom:a,maxZoom:s,interpolationType:r}:{kind:"camera",minZoom:a,maxZoom:s,minSize:n.evaluate(new Jr(a)),maxSize:n.evaluate(new Jr(s)),interpolationType:r}}}class Ql extends E{constructor(e,t,n,r){super(e,t),this.angle=n,void 0!==r&&(this.segment=r)}clone(){return new Ql(this.x,this.y,this.angle,this.segment)}}function ec(e,t,n,r,i){if(void 0===t.segment)return!0;let o=t,a=t.segment+1,s=0;for(;s>-n/2;){if(a--,a<0)return!1;s-=e[a].dist(o),o=e[a]}s+=e[a].dist(e[a+1]),a++;const l=[];let c=0;for(;s<n/2;){const t=e[a],n=e[a+1];if(!n)return!1;let o=e[a-1].angleTo(t)-t.angleTo(n);for(o=Math.abs((o+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:o}),c+=o;s-l[0].distance>r;)c-=l.shift().angleDelta;if(c>i)return!1;a++,s+=t.dist(n)}return!0}function tc(e){let t=0;for(let n=0;n<e.length-1;n++)t+=e[n].dist(e[n+1]);return t}function nc(e,t,n){return e?.6*t*n:0}function rc(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function ic(e,t,n,r,i,o){const a=nc(n,i,o),s=rc(n,r)*o;let l=0;const c=tc(e)/2;for(let n=0;n<e.length-1;n++){const r=e[n],i=e[n+1],o=r.dist(i);if(l+o>c){const u=(c-l)/o,h=Ct(r.x,i.x,u),f=Ct(r.y,i.y,u),p=new Ql(h,f,i.angleTo(r),n);return p._round(),!a||ec(e,p,s,a,t)?p:void 0}l+=o}}function oc(e,t,n,r,i,o,a,s,l){const c=nc(r,o,a),u=rc(r,i),h=u*a,f=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;return t-h<t/4&&(t=h+t/4),ac(e,f?t/2*s%t:(u/2+2*o)*a*s%t,t,c,n,h,f,!1,l)}function ac(e,t,n,r,i,o,a,s,l){const c=o/2,u=tc(e);let h=0,f=t-n,p=[];for(let t=0;t<e.length-1;t++){const a=e[t],s=e[t+1],d=a.dist(s),m=s.angleTo(a);for(;f+n<h+d;){f+=n;const g=(f-h)/d,y=Ct(a.x,s.x,g),v=Ct(a.y,s.y,g);if(y>=0&&y<l&&v>=0&&v<l&&f-c>=0&&f+c<=u){const n=new Ql(y,v,m,t);n._round(),r&&!ec(e,n,o,r,i)||p.push(n)}}h+=d}return s||p.length||a||(p=ac(e,h/2,n,r,i,o,a,!0,l)),p}function sc(e,t,n,r,i){const o=[];for(let a=0;a<e.length;a++){const s=e[a];let l;for(let e=0;e<s.length-1;e++){let a=s[e],c=s[e+1];a.x<t&&c.x<t||(a.x<t?a=new E(t,a.y+(t-a.x)/(c.x-a.x)*(c.y-a.y))._round():c.x<t&&(c=new E(t,a.y+(t-a.x)/(c.x-a.x)*(c.y-a.y))._round()),a.y<n&&c.y<n||(a.y<n?a=new E(a.x+(n-a.y)/(c.y-a.y)*(c.x-a.x),n)._round():c.y<n&&(c=new E(a.x+(n-a.y)/(c.y-a.y)*(c.x-a.x),n)._round()),a.x>=r&&c.x>=r||(a.x>=r?a=new E(r,a.y+(r-a.x)/(c.x-a.x)*(c.y-a.y))._round():c.x>=r&&(c=new E(r,a.y+(r-a.x)/(c.x-a.x)*(c.y-a.y))._round()),a.y>=i&&c.y>=i||(a.y>=i?a=new E(a.x+(i-a.y)/(c.y-a.y)*(c.x-a.x),i)._round():c.y>=i&&(c=new E(a.x+(i-a.y)/(c.y-a.y)*(c.x-a.x),i)._round()),l&&a.equals(l[l.length-1])||(l=[a],o.push(l)),l.push(c)))))}}return o}function lc(e,t,n,r){const i=[],o=e.image,a=o.pixelRatio,s=o.paddedRect.w-2,l=o.paddedRect.h-2,c=e.right-e.left,u=e.bottom-e.top,h=o.stretchX||[[0,s]],f=o.stretchY||[[0,l]],p=(e,t)=>e+t[1]-t[0],d=h.reduce(p,0),m=f.reduce(p,0),g=s-d,y=l-m;let v=0,b=d,_=0,x=m,A=0,w=g,C=0,S=y;if(o.content&&r){const e=o.content;v=cc(h,0,e[0]),_=cc(f,0,e[1]),b=cc(h,e[0],e[2]),x=cc(f,e[1],e[3]),A=e[0]-v,C=e[1]-_,w=e[2]-e[0]-b,S=e[3]-e[1]-x}const T=(r,i,s,l)=>{const h=hc(r.stretch-v,b,c,e.left),f=fc(r.fixed-A,w,r.stretch,d),p=hc(i.stretch-_,x,u,e.top),g=fc(i.fixed-C,S,i.stretch,m),y=hc(s.stretch-v,b,c,e.left),T=fc(s.fixed-A,w,s.stretch,d),B=hc(l.stretch-_,x,u,e.top),k=fc(l.fixed-C,S,l.stretch,m),M=new E(h,p),P=new E(y,p),I=new E(y,B),O=new E(h,B),D=new E(f/a,g/a),z=new E(T/a,k/a),L=t*Math.PI/180;if(L){const e=Math.sin(L),t=Math.cos(L),n=[t,-e,e,t];M._matMult(n),P._matMult(n),O._matMult(n),I._matMult(n)}const R=r.stretch+r.fixed,F=i.stretch+i.fixed;return{tl:M,tr:P,bl:O,br:I,tex:{x:o.paddedRect.x+1+R,y:o.paddedRect.y+1+F,w:s.stretch+s.fixed-R,h:l.stretch+l.fixed-F},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:D,pixelOffsetBR:z,minFontScaleX:w/a/c,minFontScaleY:S/a/u,isSDF:n}};if(r&&(o.stretchX||o.stretchY)){const e=uc(h,g,d),t=uc(f,y,m);for(let n=0;n<e.length-1;n++){const r=e[n],o=e[n+1];for(let e=0;e<t.length-1;e++)i.push(T(r,t[e],o,t[e+1]))}}else i.push(T({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:s+1},{fixed:0,stretch:l+1}));return i}function cc(e,t,n){let r=0;for(const i of e)r+=Math.max(t,Math.min(n,i[1]))-Math.max(t,Math.min(n,i[0]));return r}function uc(e,t,n){const r=[{fixed:-1,stretch:0}];for(const[t,n]of e){const e=r[r.length-1];r.push({fixed:t-e.stretch,stretch:e.stretch}),r.push({fixed:t-e.stretch,stretch:e.stretch+(n-t)})}return r.push({fixed:t+1,stretch:n}),r}function hc(e,t,n,r){return e/t*n+r}function fc(e,t,n,r){return e-t*n/r}Sr("Anchor",Ql);class pc{constructor(e,t,n,r,i,o,a,s,l,c){if(this.boxStartIndex=e.length,l){let e=o.top,t=o.bottom;const n=o.collisionPadding;n&&(e-=n[1],t+=n[3]);let r=t-e;r>0&&(r=Math.max(10,r),this.circleDiameter=r)}else{let l=o.top*a-s[0],u=o.bottom*a+s[2],h=o.left*a-s[3],f=o.right*a+s[1];const p=o.collisionPadding;if(p&&(h-=p[0]*a,l-=p[1]*a,f+=p[2]*a,u+=p[3]*a),c){const e=new E(h,l),t=new E(f,l),n=new E(h,u),r=new E(f,u),i=c*Math.PI/180;e._rotate(i),t._rotate(i),n._rotate(i),r._rotate(i),h=Math.min(e.x,t.x,n.x,r.x),f=Math.max(e.x,t.x,n.x,r.x),l=Math.min(e.y,t.y,n.y,r.y),u=Math.max(e.y,t.y,n.y,r.y)}e.emplaceBack(t.x,t.y,h,l,f,u,n,r,i)}this.boxEndIndex=e.length}}class dc{constructor(e=[],t=mc){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let e=(this.length>>1)-1;e>=0;e--)this._down(e)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:n}=this,r=t[e];for(;e>0;){const i=e-1>>1,o=t[i];if(n(r,o)>=0)break;t[e]=o,e=i}t[e]=r}_down(e){const{data:t,compare:n}=this,r=this.length>>1,i=t[e];for(;e<r;){let r=1+(e<<1),o=t[r];const a=r+1;if(a<this.length&&n(t[a],o)<0&&(r=a,o=t[a]),n(o,i)>=0)break;t[e]=o,e=r}t[e]=i}}function mc(e,t){return e<t?-1:e>t?1:0}function gc(e,t=1,n=!1){let r=1/0,i=1/0,o=-1/0,a=-1/0;const s=e[0];for(let e=0;e<s.length;e++){const t=s[e];(!e||t.x<r)&&(r=t.x),(!e||t.y<i)&&(i=t.y),(!e||t.x>o)&&(o=t.x),(!e||t.y>a)&&(a=t.y)}const l=Math.min(o-r,a-i);let c=l/2;const u=new dc([],yc);if(0===l)return new E(r,i);for(let t=r;t<o;t+=l)for(let n=i;n<a;n+=l)u.push(new vc(t+c,n+c,c,e));let h=function(e){let t=0,n=0,r=0;const i=e[0];for(let e=0,o=i.length,a=o-1;e<o;a=e++){const o=i[e],s=i[a],l=o.x*s.y-s.x*o.y;n+=(o.x+s.x)*l,r+=(o.y+s.y)*l,t+=3*l}return new vc(n/t,r/t,0,e)}(e),f=u.length;for(;u.length;){const r=u.pop();(r.d>h.d||!h.d)&&(h=r,n&&console.log("found best %d after %d probes",Math.round(1e4*r.d)/1e4,f)),r.max-h.d<=t||(c=r.h/2,u.push(new vc(r.p.x-c,r.p.y-c,c,e)),u.push(new vc(r.p.x+c,r.p.y-c,c,e)),u.push(new vc(r.p.x-c,r.p.y+c,c,e)),u.push(new vc(r.p.x+c,r.p.y+c,c,e)),f+=4)}return n&&(console.log(`num probes: ${f}`),console.log(`best distance: ${h.d}`)),h.p}function yc(e,t){return t.max-e.max}function vc(e,t,n,r){this.p=new E(e,t),this.h=n,this.d=function(e,t){let n=!1,r=1/0;for(let i=0;i<t.length;i++){const o=t[i];for(let t=0,i=o.length,a=i-1;t<i;a=t++){const i=o[t],s=o[a];i.y>e.y!=s.y>e.y&&e.x<(s.x-i.x)*(e.y-i.y)/(s.y-i.y)+i.x&&(n=!n),r=Math.min(r,ea(e,i,s))}}return(n?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}const bc=Number.POSITIVE_INFINITY;function _c(e,t){return t[1]!==bc?function(e,t,n){let r=0,i=0;switch(t=Math.abs(t),n=Math.abs(n),e){case"top-right":case"top-left":case"top":i=n-7;break;case"bottom-right":case"bottom-left":case"bottom":i=7-n}switch(e){case"top-right":case"bottom-right":case"right":r=-t;break;case"top-left":case"bottom-left":case"left":r=t}return[r,i]}(e,t[0],t[1]):function(e,t){let n=0,r=0;t<0&&(t=0);const i=t/Math.sqrt(2);switch(e){case"top-right":case"top-left":r=i-7;break;case"bottom-right":case"bottom-left":r=7-i;break;case"bottom":r=7-t;break;case"top":r=t-7}switch(e){case"top-right":case"bottom-right":n=-i;break;case"top-left":case"bottom-left":n=i;break;case"left":n=t;break;case"right":n=-t}return[n,r]}(e,t[0])}function xc(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Ac(t,n,r,i,o,a,s,l,c,u,h){let f=a.textMaxSize.evaluate(n,{});void 0===f&&(f=s);const p=t.layers[0].layout,m=p.get("icon-offset").evaluate(n,{},h),g=Ec(r.horizontal),y=s/24,v=t.tilePixelRatio*y,b=t.tilePixelRatio*f/24,_=t.tilePixelRatio*l,x=t.tilePixelRatio*p.get("symbol-spacing"),A=p.get("text-padding")*t.tilePixelRatio,w=function(e,t,n,r=1){const i=e.get("icon-padding").evaluate(t,{},n),o=i&&i.values;return[o[0]*r,o[1]*r,o[2]*r,o[3]*r]}(p,n,h,t.tilePixelRatio),C=p.get("text-max-angle")/180*Math.PI,E="viewport"!==p.get("text-rotation-alignment")&&"point"!==p.get("symbol-placement"),S="map"===p.get("icon-rotation-alignment")&&"point"!==p.get("symbol-placement"),T=p.get("symbol-placement"),B=x/2,k=p.get("icon-text-fit");let M;i&&"none"!==k&&(t.allowVerticalPlacement&&r.vertical&&(M=Yl(i,r.vertical,k,p.get("icon-text-fit-padding"),m,y)),g&&(i=Yl(i,g,k,p.get("icon-text-fit-padding"),m,y)));const P=(l,f)=>{f.x<0||f.x>=No||f.y<0||f.y>=No||function(t,n,r,i,o,a,s,l,c,u,h,f,p,m,g,y,v,b,_,x,A,w,C,E,S){const T=t.addToLineVertexArray(n,r);let B,k,M,P,I=0,O=0,D=0,z=0,L=-1,R=-1;const F={};let U=vo.exports(""),N=0,j=0;if(void 0===l._unevaluatedLayout.getValue("text-radial-offset")?[N,j]=l.layout.get("text-offset").evaluate(A,{},E).map((e=>e*ol)):(N=l.layout.get("text-radial-offset").evaluate(A,{},E)*ol,j=bc),t.allowVerticalPlacement&&i.vertical){const e=l.layout.get("text-rotate").evaluate(A,{},E)+90;M=new pc(c,n,u,h,f,i.vertical,p,m,g,e),s&&(P=new pc(c,n,u,h,f,s,v,b,g,e))}if(o){const r=l.layout.get("icon-rotate").evaluate(A,{}),i="none"!==l.layout.get("icon-text-fit"),a=lc(o,r,C,i),p=s?lc(s,r,C,i):void 0;k=new pc(c,n,u,h,f,o,v,b,!1,r),I=4*a.length;const m=t.iconSizeData;let g=null;"source"===m.kind?(g=[Kl*l.layout.get("icon-size").evaluate(A,{})],g[0]>wc&&d(`${t.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===m.kind&&(g=[Kl*w.compositeIconSizes[0].evaluate(A,{},E),Kl*w.compositeIconSizes[1].evaluate(A,{},E)],(g[0]>wc||g[1]>wc)&&d(`${t.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),t.addSymbols(t.icon,a,g,x,_,A,e.WritingMode.none,n,T.lineStartIndex,T.lineLength,-1,E),L=t.icon.placedSymbolArray.length-1,p&&(O=4*p.length,t.addSymbols(t.icon,p,g,x,_,A,e.WritingMode.vertical,n,T.lineStartIndex,T.lineLength,-1,E),R=t.icon.placedSymbolArray.length-1)}const V=Object.keys(i.horizontal);for(const r of V){const o=i.horizontal[r];if(!B){U=vo.exports(o.text);const e=l.layout.get("text-rotate").evaluate(A,{},E);B=new pc(c,n,u,h,f,o,p,m,g,e)}const s=1===o.positionedLines.length;if(D+=Cc(t,n,o,a,l,g,A,y,T,i.vertical?e.WritingMode.horizontal:e.WritingMode.horizontalOnly,s?V:[r],F,L,w,E),s)break}i.vertical&&(z+=Cc(t,n,i.vertical,a,l,g,A,y,T,e.WritingMode.vertical,["vertical"],F,R,w,E));const G=B?B.boxStartIndex:t.collisionBoxArray.length,q=B?B.boxEndIndex:t.collisionBoxArray.length,W=M?M.boxStartIndex:t.collisionBoxArray.length,H=M?M.boxEndIndex:t.collisionBoxArray.length,$=k?k.boxStartIndex:t.collisionBoxArray.length,X=k?k.boxEndIndex:t.collisionBoxArray.length,Z=P?P.boxStartIndex:t.collisionBoxArray.length,Y=P?P.boxEndIndex:t.collisionBoxArray.length;let K=-1;const J=(e,t)=>e&&e.circleDiameter?Math.max(e.circleDiameter,t):t;K=J(B,K),K=J(M,K),K=J(k,K),K=J(P,K);const Q=K>-1?1:0;Q&&(K*=S/ol),t.glyphOffsetArray.length>=Dc.MAX_GLYPHS&&d("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==A.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,A.sortKey),t.symbolInstances.emplaceBack(n.x,n.y,F.right>=0?F.right:-1,F.center>=0?F.center:-1,F.left>=0?F.left:-1,F.vertical||-1,L,R,U,G,q,W,H,$,X,Z,Y,u,D,z,I,O,Q,0,p,N,j,K)}(t,f,l,r,i,o,M,t.layers[0],t.collisionBoxArray,n.index,n.sourceLayerIndex,t.index,v,[A,A,A,A],E,c,_,w,S,m,n,a,u,h,s)};if("line"===T)for(const e of sc(n.geometry,0,0,No,No)){const n=oc(e,x,C,r.vertical||g,i,24,b,t.overscaling,No);for(const r of n){const n=g;n&&Sc(t,n.text,B,r)||P(e,r)}}else if("line-center"===T){for(const e of n.geometry)if(e.length>1){const t=ic(e,C,r.vertical||g,i,24,b);t&&P(e,t)}}else if("Polygon"===n.type)for(const e of cs(n.geometry,0)){const t=gc(e,16);P(e[0],new Ql(t.x,t.y,0))}else if("LineString"===n.type)for(const e of n.geometry)P(e,new Ql(e[0].x,e[0].y,0));else if("Point"===n.type)for(const e of n.geometry)for(const t of e)P([t],new Ql(t.x,t.y,0))}const wc=32640;function Cc(e,t,n,r,i,o,a,s,l,c,u,h,f,p,m){const g=function(e,t,n,r,i,o,a,s){const l=r.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,c=[];for(const e of t.positionedLines)for(const r of e.positionedGlyphs){if(!r.rect)continue;const o=r.rect||{};let u=4,h=!0,f=1,p=0;const d=(i||s)&&r.vertical,m=r.metrics.advance*r.scale/2;if(s&&t.verticalizable){const t=(r.scale-1)*ol,n=(ol-r.metrics.width*r.scale)/2;p=e.lineOffset/2-(r.imageName?-n:t)}if(r.imageName){const e=a[r.imageName];h=e.sdf,f=e.pixelRatio,u=1/f}const g=i?[r.x+m,r.y]:[0,0];let y=i?[0,0]:[r.x+m+n[0],r.y+n[1]-p],v=[0,0];d&&(v=y,y=[0,0]);const b=(r.metrics.left-u)*r.scale-m+y[0],_=(-r.metrics.top-u)*r.scale+y[1],x=b+o.w*r.scale/f,A=_+o.h*r.scale/f,w=new E(b,_),C=new E(x,_),S=new E(b,A),T=new E(x,A);if(d){const e=new E(-m,m-zl),t=-Math.PI/2,n=12-m,i=new E(22-n,-(r.imageName?n:0)),o=new E(...v);w._rotateAround(t,e)._add(i)._add(o),C._rotateAround(t,e)._add(i)._add(o),S._rotateAround(t,e)._add(i)._add(o),T._rotateAround(t,e)._add(i)._add(o)}if(l){const e=Math.sin(l),t=Math.cos(l),n=[t,-e,e,t];w._matMult(n),C._matMult(n),S._matMult(n),T._matMult(n)}const B=new E(0,0),k=new E(0,0);c.push({tl:w,tr:C,bl:S,br:T,tex:o,writingMode:t.writingMode,glyphOffset:g,sectionIndex:r.sectionIndex,isSDF:h,pixelOffsetTL:B,pixelOffsetBR:k,minFontScaleX:0,minFontScaleY:0})}return c}(0,n,s,i,o,a,r,e.allowVerticalPlacement),y=e.textSizeData;let v=null;"source"===y.kind?(v=[Kl*i.layout.get("text-size").evaluate(a,{})],v[0]>wc&&d(`${e.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===y.kind&&(v=[Kl*p.compositeTextSizes[0].evaluate(a,{},m),Kl*p.compositeTextSizes[1].evaluate(a,{},m)],(v[0]>wc||v[1]>wc)&&d(`${e.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),e.addSymbols(e.text,g,v,s,o,a,c,t,l.lineStartIndex,l.lineLength,f,m);for(const t of u)h[t]=e.text.placedSymbolArray.length-1;return 4*g.length}function Ec(e){for(const t in e)return e[t];return null}function Sc(e,t,n,r){const i=e.compareText;if(t in i){const e=i[t];for(let t=e.length-1;t>=0;t--)if(r.dist(e[t])<n)return!0}else i[t]=[];return i[t].push(r),!1}const Tc=bs.VectorTileFeature.types,Bc=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function kc(e,t,n,r,i,o,a,s,l,c,u,h,f){const p=s?Math.min(wc,Math.round(s[0])):0,d=s?Math.min(wc,Math.round(s[1])):0;e.emplaceBack(t,n,Math.round(32*r),Math.round(32*i),o,a,(p<<1)+(l?1:0),d,16*c,16*u,256*h,256*f)}function Mc(e,t,n){e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n)}function Pc(e){for(const t of e.sections)if(Ur(t.text))return!0;return!1}class Ic{constructor(e){this.layoutVertexArray=new oo,this.indexArray=new uo,this.programConfigurations=e,this.segments=new mo,this.dynamicLayoutVertexArray=new ao,this.opacityVertexArray=new so,this.placedSymbolArray=new Wi}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,t,n,r){this.isEmpty()||(n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Js.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Qs.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Bc,!0),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Sr("SymbolBuffers",Ic);class Oc{constructor(e,t,n){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new n,this.segments=new mo,this.collisionVertexArray=new co}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,el.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Sr("CollisionBuffers",Oc);class Dc{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=fa([]),this.placementViewportMatrix=fa([]);const n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Jl(this.zoom,n["text-size"]),this.iconSizeData=Jl(this.zoom,n["icon-size"]);const r=this.layers[0].layout,i=r.get("symbol-sort-key"),o=r.get("symbol-z-order");this.canOverlap="never"!==Uc(r,"text-overlap","text-allow-overlap")||"never"!==Uc(r,"icon-overlap","icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==o&&!i.isConstant(),this.sortFeaturesByY=("viewport-y"===o||"auto"===o&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===r.get("symbol-placement")&&(this.writingModes=r.get("text-writing-mode").map((t=>e.WritingMode[t]))),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.sourceID=t.sourceID}createArrays(){this.text=new Ic(new Ro(this.layers,this.zoom,(e=>/^text/.test(e)))),this.icon=new Ic(new Ro(this.layers,this.zoom,(e=>/^icon/.test(e)))),this.glyphOffsetArray=new Xi,this.lineVertexArray=new Zi,this.symbolInstances=new $i}calculateGlyphDependencies(e,t,n,r,i){for(let o=0;o<e.length;o++)if(t[e.charCodeAt(o)]=!0,(n||r)&&i){const n=il[e.charAt(o)];n&&(t[n.charCodeAt(0)]=!0)}}populate(t,n,r){const i=this.layers[0],o=i.layout,a=o.get("text-font"),s=o.get("text-field"),l=o.get("icon-image"),c=("constant"!==s.value.kind||s.value.value instanceof Le&&!s.value.value.isEmpty()||s.value.value.toString().length>0)&&("constant"!==a.value.kind||a.value.value.length>0),u="constant"!==l.value.kind||!!l.value.value||Object.keys(l.parameters).length>0,h=o.get("symbol-sort-key");if(this.features=[],!c&&!u)return;const f=n.iconDependencies,p=n.glyphDependencies,d=n.availableImages,m=new Jr(this.zoom);for(const{feature:n,id:s,index:l,sourceLayerIndex:g}of t){const t=i._featureFilter.needGeometry,y=qo(n,t);if(!i._featureFilter.filter(m,y,r))continue;let v,b;if(t||(y.geometry=Go(n)),c){const e=i.getValueAndResolveTokens("text-field",y,r,d),t=Le.factory(e);Pc(t)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Zr()||this.hasRTLText&&Kr.isParsed())&&(v=rl(t,i,y))}if(u){const e=i.getValueAndResolveTokens("icon-image",y,r,d);b=e instanceof Fe?e:Fe.fromString(e)}if(!v&&!b)continue;const _=this.sortFeaturesByKey?h.evaluate(y,{},r):void 0;if(this.features.push({id:s,text:v,icon:b,index:l,sourceLayerIndex:g,geometry:y.geometry,properties:n.properties,type:Tc[n.type],sortKey:_}),b&&(f[b.name]=!0),v){const t=a.evaluate(y,{},r).join(","),n="viewport"!==o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(e.WritingMode.vertical)>=0;for(const e of v.sections)if(e.image)f[e.image.name]=!0;else{const r=Ir(v.toString()),i=e.fontStack||t,o=p[i]=p[i]||{};this.calculateGlyphDependencies(e.text,o,n,this.allowVerticalPlacement,r)}}}"line"===o.get("symbol-placement")&&(this.features=function(e){const t={},n={},r=[];let i=0;function o(t){r.push(e[t]),i++}function a(e,t,i){const o=n[e];return delete n[e],n[t]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(i[0]),o}function s(e,n,i){const o=t[n];return delete t[n],t[e]=o,r[o].geometry[0].shift(),r[o].geometry[0]=i[0].concat(r[o].geometry[0]),o}function l(e,t,n){const r=n?t[0][t[0].length-1]:t[0][0];return`${e}:${r.x}:${r.y}`}for(let c=0;c<e.length;c++){const u=e[c],h=u.geometry,f=u.text?u.text.toString():null;if(!f){o(c);continue}const p=l(f,h),d=l(f,h,!0);if(p in n&&d in t&&n[p]!==t[d]){const e=s(p,d,h),i=a(p,d,r[e].geometry);delete t[p],delete n[d],n[l(f,r[i].geometry,!0)]=i,r[e].geometry=null}else p in n?a(p,d,h):d in t?s(p,d,h):(o(c),t[p]=i-1,n[d]=i-1)}return r.filter((e=>e.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((e,t)=>e.sortKey-t.sortKey))}update(e,t,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,n),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,n))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,t){const n=this.lineVertexArray.length;if(void 0!==e.segment){let n=e.dist(t[e.segment+1]),r=e.dist(t[e.segment]);const i={};for(let r=e.segment+1;r<t.length;r++)i[r]={x:t[r].x,y:t[r].y,tileUnitDistanceFromAnchor:n},r<t.length-1&&(n+=t[r+1].dist(t[r]));for(let n=e.segment||0;n>=0;n--)i[n]={x:t[n].x,y:t[n].y,tileUnitDistanceFromAnchor:r},n>0&&(r+=t[n-1].dist(t[n]));for(let e=0;e<t.length;e++){const t=i[e];this.lineVertexArray.emplaceBack(t.x,t.y,t.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}addSymbols(t,n,r,i,o,a,s,l,c,u,h,f){const p=t.indexArray,d=t.layoutVertexArray,m=t.segments.prepareSegment(4*n.length,d,p,this.canOverlap?a.sortKey:void 0),g=this.glyphOffsetArray.length,y=m.vertexLength,v=this.allowVerticalPlacement&&s===e.WritingMode.vertical?Math.PI/2:0,b=a.text&&a.text.sections;for(let e=0;e<n.length;e++){const{tl:i,tr:o,bl:s,br:c,tex:u,pixelOffsetTL:h,pixelOffsetBR:g,minFontScaleX:y,minFontScaleY:_,glyphOffset:x,isSDF:A,sectionIndex:w}=n[e],C=m.vertexLength,E=x[1];kc(d,l.x,l.y,i.x,E+i.y,u.x,u.y,r,A,h.x,h.y,y,_),kc(d,l.x,l.y,o.x,E+o.y,u.x+u.w,u.y,r,A,g.x,h.y,y,_),kc(d,l.x,l.y,s.x,E+s.y,u.x,u.y+u.h,r,A,h.x,g.y,y,_),kc(d,l.x,l.y,c.x,E+c.y,u.x+u.w,u.y+u.h,r,A,g.x,g.y,y,_),Mc(t.dynamicLayoutVertexArray,l,v),p.emplaceBack(C,C+1,C+2),p.emplaceBack(C+1,C+2,C+3),m.vertexLength+=4,m.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(x[0]),e!==n.length-1&&w===n[e+1].sectionIndex||t.programConfigurations.populatePaintArrays(d.length,a,a.index,{},f,b&&b[w])}t.placedSymbolArray.emplaceBack(l.x,l.y,g,this.glyphOffsetArray.length-g,y,c,u,l.segment,r?r[0]:0,r?r[1]:0,i[0],i[1],s,0,!1,0,h)}_addCollisionDebugVertex(e,t,n,r,i,o){return t.emplaceBack(0,0),e.emplaceBack(n.x,n.y,r,i,Math.round(o.x),Math.round(o.y))}addCollisionDebugVertices(e,t,n,r,i,o,a){const s=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),l=s.vertexLength,c=i.layoutVertexArray,u=i.collisionVertexArray,h=a.anchorX,f=a.anchorY;this._addCollisionDebugVertex(c,u,o,h,f,new E(e,t)),this._addCollisionDebugVertex(c,u,o,h,f,new E(n,t)),this._addCollisionDebugVertex(c,u,o,h,f,new E(n,r)),this._addCollisionDebugVertex(c,u,o,h,f,new E(e,r)),s.vertexLength+=4;const p=i.indexArray;p.emplaceBack(l,l+1),p.emplaceBack(l+1,l+2),p.emplaceBack(l+2,l+3),p.emplaceBack(l+3,l),s.primitiveLength+=4}addDebugCollisionBoxes(e,t,n,r){for(let i=e;i<t;i++){const e=this.collisionBoxArray.get(i);this.addCollisionDebugVertices(e.x1,e.y1,e.x2,e.y2,r?this.textCollisionBox:this.iconCollisionBox,e.anchorPoint,n)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Oc(lo,tl.members,ho),this.iconCollisionBox=new Oc(lo,tl.members,ho);for(let e=0;e<this.symbolInstances.length;e++){const t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)}}_deserializeCollisionBoxesForSymbol(e,t,n,r,i,o,a,s,l){const c={};for(let r=t;r<n;r++){const t=e.get(r);c.textBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,anchorPointX:t.anchorPointX,anchorPointY:t.anchorPointY},c.textFeatureIndex=t.featureIndex;break}for(let t=r;t<i;t++){const n=e.get(t);c.verticalTextBox={x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,anchorPointX:n.anchorPointX,anchorPointY:n.anchorPointY},c.verticalTextFeatureIndex=n.featureIndex;break}for(let t=o;t<a;t++){const n=e.get(t);c.iconBox={x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,anchorPointX:n.anchorPointX,anchorPointY:n.anchorPointY},c.iconFeatureIndex=n.featureIndex;break}for(let t=s;t<l;t++){const n=e.get(t);c.verticalIconBox={x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,anchorPointX:n.anchorPointX,anchorPointY:n.anchorPointY},c.verticalIconFeatureIndex=n.featureIndex;break}return c}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let t=0;t<this.symbolInstances.length;t++){const n=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,t){const n=e.placedSymbolArray.get(t),r=n.vertexStartIndex+4*n.numGlyphs;for(let t=n.vertexStartIndex;t<r;t+=4)e.indexArray.emplaceBack(t,t+1,t+2),e.indexArray.emplaceBack(t+1,t+2,t+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const t=Math.sin(e),n=Math.cos(e),r=[],i=[],o=[];for(let e=0;e<this.symbolInstances.length;++e){o.push(e);const a=this.symbolInstances.get(e);r.push(0|Math.round(t*a.anchorX+n*a.anchorY)),i.push(a.featureIndex)}return o.sort(((e,t)=>r[e]-r[t]||i[t]-i[e])),o}addToSortKeyRanges(e,t){const n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===t?n.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const e of this.symbolInstanceIndexes){const t=this.symbolInstances.get(e);this.featureSortOrder.push(t.featureIndex),[t.rightJustifiedTextSymbolIndex,t.centerJustifiedTextSymbolIndex,t.leftJustifiedTextSymbolIndex].forEach(((e,t,n)=>{e>=0&&n.indexOf(e)===t&&this.addIndicesForPlacedSymbol(this.text,e)})),t.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,t.verticalPlacedTextSymbolIndex),t.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.placedIconSymbolIndex),t.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Sr("SymbolBucket",Dc,{omit:["layers","collisionBoxArray","features","compareText"]}),Dc.MAX_GLYPHS=65535,Dc.addDynamicAttributes=Mc;const zc=new fi({"symbol-placement":new si(ne.layout_symbol["symbol-placement"]),"symbol-spacing":new si(ne.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new si(ne.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new li(ne.layout_symbol["symbol-sort-key"]),"symbol-z-order":new si(ne.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new si(ne.layout_symbol["icon-allow-overlap"]),"icon-overlap":new si(ne.layout_symbol["icon-overlap"]),"icon-ignore-placement":new si(ne.layout_symbol["icon-ignore-placement"]),"icon-optional":new si(ne.layout_symbol["icon-optional"]),"icon-rotation-alignment":new si(ne.layout_symbol["icon-rotation-alignment"]),"icon-size":new li(ne.layout_symbol["icon-size"]),"icon-text-fit":new si(ne.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new si(ne.layout_symbol["icon-text-fit-padding"]),"icon-image":new li(ne.layout_symbol["icon-image"]),"icon-rotate":new li(ne.layout_symbol["icon-rotate"]),"icon-padding":new li(ne.layout_symbol["icon-padding"]),"icon-keep-upright":new si(ne.layout_symbol["icon-keep-upright"]),"icon-offset":new li(ne.layout_symbol["icon-offset"]),"icon-anchor":new li(ne.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new si(ne.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new si(ne.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new si(ne.layout_symbol["text-rotation-alignment"]),"text-field":new li(ne.layout_symbol["text-field"]),"text-font":new li(ne.layout_symbol["text-font"]),"text-size":new li(ne.layout_symbol["text-size"]),"text-max-width":new li(ne.layout_symbol["text-max-width"]),"text-line-height":new si(ne.layout_symbol["text-line-height"]),"text-letter-spacing":new li(ne.layout_symbol["text-letter-spacing"]),"text-justify":new li(ne.layout_symbol["text-justify"]),"text-radial-offset":new li(ne.layout_symbol["text-radial-offset"]),"text-variable-anchor":new si(ne.layout_symbol["text-variable-anchor"]),"text-anchor":new li(ne.layout_symbol["text-anchor"]),"text-max-angle":new si(ne.layout_symbol["text-max-angle"]),"text-writing-mode":new si(ne.layout_symbol["text-writing-mode"]),"text-rotate":new li(ne.layout_symbol["text-rotate"]),"text-padding":new si(ne.layout_symbol["text-padding"]),"text-keep-upright":new si(ne.layout_symbol["text-keep-upright"]),"text-transform":new li(ne.layout_symbol["text-transform"]),"text-offset":new li(ne.layout_symbol["text-offset"]),"text-allow-overlap":new si(ne.layout_symbol["text-allow-overlap"]),"text-overlap":new si(ne.layout_symbol["text-overlap"]),"text-ignore-placement":new si(ne.layout_symbol["text-ignore-placement"]),"text-optional":new si(ne.layout_symbol["text-optional"])});var Lc={paint:new fi({"icon-opacity":new li(ne.paint_symbol["icon-opacity"]),"icon-color":new li(ne.paint_symbol["icon-color"]),"icon-halo-color":new li(ne.paint_symbol["icon-halo-color"]),"icon-halo-width":new li(ne.paint_symbol["icon-halo-width"]),"icon-halo-blur":new li(ne.paint_symbol["icon-halo-blur"]),"icon-translate":new si(ne.paint_symbol["icon-translate"]),"icon-translate-anchor":new si(ne.paint_symbol["icon-translate-anchor"]),"text-opacity":new li(ne.paint_symbol["text-opacity"]),"text-color":new li(ne.paint_symbol["text-color"],{runtimeType:de,getOverride:e=>e.textColor,hasOverride:e=>!!e.textColor}),"text-halo-color":new li(ne.paint_symbol["text-halo-color"]),"text-halo-width":new li(ne.paint_symbol["text-halo-width"]),"text-halo-blur":new li(ne.paint_symbol["text-halo-blur"]),"text-translate":new si(ne.paint_symbol["text-translate"]),"text-translate-anchor":new si(ne.paint_symbol["text-translate-anchor"])}),layout:zc};class Rc{constructor(e){if(void 0===e.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=e.property.overrides?e.property.overrides.runtimeType:ue,this.defaultValue=e}evaluate(e){if(e.formattedSection){const t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Sr("FormatSectionOverride",Rc,{omit:["defaultValue"]});class Fc extends di{constructor(e){super(e,Lc)}recalculate(e,t){if(super.recalculate(e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const e=this.layout.get("text-writing-mode");if(e){const t=[];for(const n of e)t.indexOf(n)<0&&t.push(n);this.layout._values["text-writing-mode"]=t}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(e,t,n,r){const i=this.layout.get(e).evaluate(t,{},n,r),o=this._unevaluatedLayout._values[e];return o.isDataDriven()||On(o.value)||!i?i:function(e,t){return t.replace(/{([^{}]+)}/g,((t,n)=>n in e?String(e[n]):""))}(t.properties,i)}createBucket(e){return new Dc(e)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const e of Lc.paint.overridableProperties){if(!Fc.hasPaintOverride(this.layout,e))continue;const t=this.paint.get(e),n=new Rc(t),r=new In(n,t.property.specification);let i=null;i="constant"===t.value.kind||"source"===t.value.kind?new zn("source",r):new Ln("composite",r,t.value.zoomStops),this.paint._values[e]=new oi(t.property,i,t.parameters)}}_handleOverridablePaintPropertyUpdate(e,t,n){return!(!this.layout||t.isDataDriven()||n.isDataDriven())&&Fc.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,t){const n=e.get("text-field"),r=Lc.paint.properties[t];let i=!1;const o=e=>{for(const t of e)if(r.overrides&&r.overrides.hasOverride(t))return void(i=!0)};if("constant"===n.value.kind&&n.value.value instanceof Le)o(n.value.value.sections);else if("source"===n.value.kind){const e=t=>{i||(t instanceof Ge&&je(t.value)===ve?o(t.value.sections):t instanceof un?o(t.sections):t.eachChild(e))},t=n.value;t._styleExpression&&e(t._styleExpression.expression)}return i}}function Uc(e,t,n){let r="never";const i=e.get(t);return i?r=i:e.get(n)&&(r="always"),r}var Nc={paint:new fi({"background-color":new si(ne.paint_background["background-color"]),"background-pattern":new ui(ne.paint_background["background-pattern"]),"background-opacity":new si(ne.paint_background["background-opacity"])})},jc={paint:new fi({"raster-opacity":new si(ne.paint_raster["raster-opacity"]),"raster-hue-rotate":new si(ne.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new si(ne.paint_raster["raster-brightness-min"]),"raster-brightness-max":new si(ne.paint_raster["raster-brightness-max"]),"raster-saturation":new si(ne.paint_raster["raster-saturation"]),"raster-contrast":new si(ne.paint_raster["raster-contrast"]),"raster-resampling":new si(ne.paint_raster["raster-resampling"]),"raster-fade-duration":new si(ne.paint_raster["raster-fade-duration"])})};class Vc extends di{constructor(e){super(e,{}),this.onAdd=e=>{this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)},this.onRemove=e=>{this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)},this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const Gc={circle:class extends di{constructor(e){super(e,la)}createBucket(e){return new Ho(e)}queryRadius(e){const t=e;return ia("circle-radius",this,t)+ia("circle-stroke-width",this,t)+oa(this.paint.get("circle-translate"))}queryIntersectsFeature(e,t,n,r,i,o,a,s){const l=aa(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),c=this.paint.get("circle-radius").evaluate(t,n)+this.paint.get("circle-stroke-width").evaluate(t,n),u="map"===this.paint.get("circle-pitch-alignment"),h=u?l:function(e,t){return e.map((e=>_a(e,t)))}(l,s),f=u?c*a:c;for(const e of r)for(const t of e){const e=u?t:_a(t,s);let n=f;const r=va([],[t.x,t.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?n*=r[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(n*=o.cameraToCenterDistance/r[3]),Xo(h,e,n))return!0}return!1}},heatmap:class extends di{constructor(e){super(e,Aa),this._updateColorRamp()}createBucket(e){return new xa(e)}_handleSpecialPaintPropertyUpdate(e){"heatmap-color"===e&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Ba({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}},hillshade:class extends di{constructor(e){super(e,ka)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}},fill:class extends di{constructor(e){super(e,ms)}recalculate(e,t){super.recalculate(e,t);const n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new ps(e)}queryRadius(){return oa(this.paint.get("fill-translate"))}queryIntersectsFeature(e,t,n,r,i,o,a){return Zo(aa(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),r)}isTileClipped(){return!0}},"fill-extrusion":class extends di{constructor(e){super(e,Rs)}createBucket(e){return new Ds(e)}queryRadius(){return oa(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(e,t,n,r,i,o,a,s){const l=aa(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,a),c=this.paint.get("fill-extrusion-height").evaluate(t,n),u=this.paint.get("fill-extrusion-base").evaluate(t,n),h=function(e,t,n,r){const i=[];for(const n of e){const e=[n.x,n.y,0,1];va(e,e,t),i.push(new E(e[0]/e[3],e[1]/e[3]))}return i}(l,s),f=function(e,t,n,r){const i=[],o=[],a=r[8]*t,s=r[9]*t,l=r[10]*t,c=r[11]*t,u=r[8]*n,h=r[9]*n,f=r[10]*n,p=r[11]*n;for(const t of e){const e=[],n=[];for(const i of t){const t=i.x,o=i.y,d=r[0]*t+r[4]*o+r[12],m=r[1]*t+r[5]*o+r[13],g=r[2]*t+r[6]*o+r[14],y=r[3]*t+r[7]*o+r[15],v=g+l,b=y+c,_=d+u,x=m+h,A=g+f,w=y+p,C=new E((d+a)/b,(m+s)/b);C.z=v/b,e.push(C);const S=new E(_/w,x/w);S.z=A/w,n.push(S)}i.push(e),o.push(n)}return[i,o]}(r,u,c,s);return function(e,t,n){let r=1/0;Zo(n,t)&&(r=Us(n,t[0]));for(let i=0;i<t.length;i++){const o=t[i],a=e[i];for(let e=0;e<o.length-1;e++){const t=o[e],i=[t,o[e+1],a[e+1],a[e],t];$o(n,i)&&(r=Math.min(r,Us(n,i)))}}return r!==1/0&&r}(f[0],f[1],h)}},line:class extends di{constructor(e){super(e,Zs),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(e){"line-gradient"===e&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof wt,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(e,t){super.recalculate(e,t),this.paint._values["line-floorwidth"]=Ys.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new $s(e)}queryRadius(e){const t=e,n=Ks(ia("line-width",this,t),ia("line-gap-width",this,t)),r=ia("line-offset",this,t);return n/2+Math.abs(r)+oa(this.paint.get("line-translate"))}queryIntersectsFeature(e,t,n,r,i,o,a){const s=aa(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,a),l=a/2*Ks(this.paint.get("line-width").evaluate(t,n),this.paint.get("line-gap-width").evaluate(t,n)),c=this.paint.get("line-offset").evaluate(t,n);return c&&(r=function(e,t){const n=[];for(let r=0;r<e.length;r++){const i=e[r],o=[];for(let e=0;e<i.length;e++){const n=i[e-1],r=i[e],a=i[e+1],s=0===e?new E(0,0):r.sub(n)._unit()._perp(),l=e===i.length-1?new E(0,0):a.sub(r)._unit()._perp(),c=s._add(l)._unit(),u=c.x*l.x+c.y*l.y;0!==u&&c._mult(1/u),o.push(c._mult(t)._add(r))}n.push(o)}return n}(r,c*a)),function(e,t,n){for(let r=0;r<t.length;r++){const i=t[r];if(e.length>=3)for(let t=0;t<i.length;t++)if(na(e,i[t]))return!0;if(Yo(e,i,n))return!0}return!1}(s,r,l)}isTileClipped(){return!0}},symbol:Fc,background:class extends di{constructor(e){super(e,Nc)}},raster:class extends di{constructor(e){super(e,jc)}}};class qc{constructor(e){this._callback=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){delete this._channel,this._callback=()=>{}}}const Wc=6371008.8;class Hc{constructor(e,t){if(isNaN(e)||isNaN(t))throw new Error(`Invalid LngLat object: (${e}, ${t})`);if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Hc(a(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const t=Math.PI/180,n=this.lat*t,r=e.lat*t,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((e.lng-this.lng)*t);return Wc*Math.acos(Math.min(i,1))}toBounds(e=0){const t=360*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return new $c(new Hc(this.lng-n,this.lat-t),new Hc(this.lng+n,this.lat+t))}static convert(e){if(e instanceof Hc)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new Hc(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new Hc(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class $c{constructor(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof Hc?new Hc(e.lng,e.lat):Hc.convert(e),this}setSouthWest(e){return this._sw=e instanceof Hc?new Hc(e.lng,e.lat):Hc.convert(e),this}extend(e){const t=this._sw,n=this._ne;let r,i;if(e instanceof Hc)r=e,i=e;else{if(!(e instanceof $c))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend($c.convert(e)):this.extend(Hc.convert(e)):this;if(r=e._sw,i=e._ne,!r||!i)return this}return t||n?(t.lng=Math.min(r.lng,t.lng),t.lat=Math.min(r.lat,t.lat),n.lng=Math.max(i.lng,n.lng),n.lat=Math.max(i.lat,n.lat)):(this._sw=new Hc(r.lng,r.lat),this._ne=new Hc(i.lng,i.lat)),this}getCenter(){return new Hc((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Hc(this.getWest(),this.getNorth())}getSouthEast(){return new Hc(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:t,lat:n}=Hc.convert(e);let r=this._sw.lng<=t&&t<=this._ne.lng;return this._sw.lng>this._ne.lng&&(r=this._sw.lng>=t&&t>=this._ne.lng),this._sw.lat<=n&&n<=this._ne.lat&&r}static convert(e){return e instanceof $c?e:e?new $c(e):e}}const Xc=2*Math.PI*Wc;function Zc(e){return Xc*Math.cos(e*Math.PI/180)}function Yc(e){return(180+e)/360}function Kc(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Jc(e,t){return e/Zc(t)}function Qc(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}class eu{constructor(e,t,n=0){this.x=+e,this.y=+t,this.z=+n}static fromLngLat(e,t=0){const n=Hc.convert(e);return new eu(Yc(n.lng),Kc(n.lat),Jc(t,n.lat))}toLngLat(){return new Hc(360*this.x-180,Qc(this.y))}toAltitude(){return this.z*Zc(Qc(this.y))}meterInMercatorCoordinateUnits(){return 1/Xc*(e=Qc(this.y),1/Math.cos(e*Math.PI/180));var e}}function tu(e,t,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[e*r-2*Math.PI*6378137/2,t*r-2*Math.PI*6378137/2]}class nu{constructor(e,t,n){if(e<0||e>25||n<0||n>=Math.pow(2,e)||t<0||t>=Math.pow(2,e))throw new Error(`x=${t}, y=${n}, z=${e} outside of bounds. 0<=x<${Math.pow(2,e)}, 0<=y<${Math.pow(2,e)} 0<=z<=25 `);this.z=e,this.x=t,this.y=n,this.key=ou(0,e,e,t,n)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,t,n){const r=(o=this.y,a=this.z,s=tu(256*(i=this.x),256*(o=Math.pow(2,a)-o-1),a),l=tu(256*(i+1),256*(o+1),a),s[0]+","+s[1]+","+l[0]+","+l[1]);var i,o,a,s,l;const c=function(e,t,n){let r,i="";for(let o=e;o>0;o--)r=1<<o-1,i+=(t&r?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===n?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,t>1?"@2x":"").replace(/{quadkey}/g,c).replace(/{bbox-epsg-3857}/g,r)}isChildOf(e){const t=this.z-e.z;return t>0&&e.x===this.x>>t&&e.y===this.y>>t}getTilePoint(e){const t=Math.pow(2,this.z);return new E((e.x*t-this.x)*No,(e.y*t-this.y)*No)}toString(){return`${this.z}/${this.x}/${this.y}`}}class ru{constructor(e,t){this.wrap=e,this.canonical=t,this.key=ou(e,t.z,t.z,t.x,t.y)}}class iu{constructor(e,t,n,r,i){if(e<n)throw new Error(`overscaledZ should be >= z; overscaledZ = ${e}; z = ${n}`);this.overscaledZ=e,this.wrap=t,this.canonical=new nu(n,+r,+i),this.key=ou(t,e,n,r,i)}clone(){return new iu(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const t=this.canonical.z-e;return e>this.canonical.z?new iu(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new iu(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)}calculateScaledKey(e,t){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const n=this.canonical.z-e;return e>this.canonical.z?ou(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):ou(this.wrap*+t,e,e,this.canonical.x>>n,this.canonical.y>>n)}isChildOf(e){if(e.wrap!==this.wrap)return!1;const t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}children(e){if(this.overscaledZ>=e)return[new iu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const t=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new iu(t,this.wrap,t,n,r),new iu(t,this.wrap,t,n+1,r),new iu(t,this.wrap,t,n,r+1),new iu(t,this.wrap,t,n+1,r+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new iu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new iu(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new ru(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(e){return this.canonical.getTilePoint(new eu(e.x-this.wrap,e.y))}}function ou(e,t,n,r,i){(e*=2)<0&&(e=-1*e-1);const o=1<<n;return(o*o*e+o*i+r).toString(36)+n.toString(36)+t.toString(36)}Sr("CanonicalTileID",nu),Sr("OverscaledTileID",iu,{omit:["posMatrix"]});class au{constructor(e,t,n){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return void d(`"${n}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=t.height;const r=this.dim=t.height-2;this.data=new Uint32Array(t.data.buffer),this.encoding=n||"mapbox";for(let e=0;e<r;e++)this.data[this._idx(-1,e)]=this.data[this._idx(0,e)],this.data[this._idx(r,e)]=this.data[this._idx(r-1,e)],this.data[this._idx(e,-1)]=this.data[this._idx(e,0)],this.data[this._idx(e,r)]=this.data[this._idx(e,r-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(r,-1)]=this.data[this._idx(r-1,0)],this.data[this._idx(-1,r)]=this.data[this._idx(0,r-1)],this.data[this._idx(r,r)]=this.data[this._idx(r-1,r-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let e=0;e<r;e++)for(let t=0;t<r;t++){const n=this.get(e,t);n>this.max&&(this.max=n),n<this.min&&(this.min=n)}}get(e,t){const n=new Uint8Array(this.data.buffer),r=4*this._idx(e,t);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(n[r],n[r+1],n[r+2])}getUnpackVector(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}_unpackMapbox(e,t,n){return(256*e*256+256*t+n)/10-1e4}_unpackTerrarium(e,t,n){return 256*e+t+n/256-32768}getPixels(){return new Ta({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,t,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let r=t*this.dim,i=t*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(t){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}const s=-t*this.dim,l=-n*this.dim;for(let t=o;t<a;t++)for(let n=r;n<i;n++)this.data[this._idx(n,t)]=e.data[this._idx(n+s,t+l)]}}Sr("DEMData",au);class su{constructor(e){this._stringToNumber={},this._numberToString=[];for(let t=0;t<e.length;t++){const n=e[t];this._stringToNumber[n]=t,this._numberToString[t]=n}}encode(e){return this._stringToNumber[e]}decode(e){if(e>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${e} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[e]}}class lu{constructor(e,t,n,r,i){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=n,e._y=r,this.properties=e.properties,this.id=i}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={geometry:this.geometry};for(const t in this)"_geometry"!==t&&"_vectorTileFeature"!==t&&(e[t]=this[t]);return e}}class cu{constructor(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Cr(No,16,0),this.grid3D=new Cr(No,16,0),this.featureIndexArray=new Ki,this.promoteId=t}insert(e,t,n,r,i,o){const a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i);const s=o?this.grid3D:this.grid;for(let e=0;e<t.length;e++){const n=t[e],r=[1/0,1/0,-1/0,-1/0];for(let e=0;e<n.length;e++){const t=n[e];r[0]=Math.min(r[0],t.x),r[1]=Math.min(r[1],t.y),r[2]=Math.max(r[2],t.x),r[3]=Math.max(r[3],t.y)}r[0]<No&&r[1]<No&&r[2]>=0&&r[3]>=0&&s.insert(a,r[0],r[1],r[2],r[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new bs.VectorTile(new al(this.rawTileData)).layers,this.sourceLayerCoder=new su(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(e,t,n,r){this.loadVTLayers();const i=e.params||{},o=No/e.tileSize/e.scale,a=Xn(i.filter),s=e.queryGeometry,l=e.queryPadding*o,c=hu(s),u=this.grid.query(c.minX-l,c.minY-l,c.maxX+l,c.maxY+l),h=hu(e.cameraQueryGeometry),f=this.grid3D.query(h.minX-l,h.minY-l,h.maxX+l,h.maxY+l,((t,n,r,i)=>function(e,t,n,r,i){for(const o of e)if(t<=o.x&&n<=o.y&&r>=o.x&&i>=o.y)return!0;const o=[new E(t,n),new E(t,i),new E(r,i),new E(r,n)];if(e.length>2)for(const t of o)if(na(e,t))return!0;for(let t=0;t<e.length-1;t++)if(ra(e[t],e[t+1],o))return!0;return!1}(e.cameraQueryGeometry,t-l,n-l,r+l,i+l)));for(const e of f)u.push(e);u.sort(fu);const p={};let d;for(let l=0;l<u.length;l++){const c=u[l];if(c===d)continue;d=c;const h=this.featureIndexArray.get(c);let f=null;this.loadMatchingFeature(p,h.bucketIndex,h.sourceLayerIndex,h.featureIndex,a,i.layers,i.availableImages,t,n,r,((t,n,r)=>(f||(f=Go(t)),n.queryIntersectsFeature(s,t,r,f,this.z,e.transform,o,e.pixelPosMatrix))))}return p}loadMatchingFeature(e,t,n,r,i,o,a,l,c,u,h){const f=this.bucketLayerIDs[t];if(o&&!function(e,t){for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1}(o,f))return;const p=this.sourceLayerCoder.decode(n),d=this.vtLayers[p].feature(r);if(i.needGeometry){const e=qo(d,!0);if(!i.filter(new Jr(this.tileID.overscaledZ),e,this.tileID.canonical))return}else if(!i.filter(new Jr(this.tileID.overscaledZ),d))return;const m=this.getId(d,p);for(let t=0;t<f.length;t++){const n=f[t];if(o&&o.indexOf(n)<0)continue;const i=l[n];if(!i)continue;let p={};m&&u&&(p=u.getState(i.sourceLayer||"_geojsonTileLayer",m));const g=s({},c[n]);g.paint=uu(g.paint,i.paint,d,p,a),g.layout=uu(g.layout,i.layout,d,p,a);const y=!h||h(d,i,p);if(!y)continue;const v=new lu(d,this.z,this.x,this.y,m);v.layer=g;let b=e[n];void 0===b&&(b=e[n]=[]),b.push({featureIndex:r,feature:v,intersectionZ:y})}}lookupSymbolFeatures(e,t,n,r,i,o,a,s){const l={};this.loadVTLayers();const c=Xn(i);for(const i of e)this.loadMatchingFeature(l,n,r,i,c,o,a,s,t);return l}hasLayer(e){for(const t of this.bucketLayerIDs)for(const n of t)if(e===n)return!0;return!1}getId(e,t){let n=e.id;return this.promoteId&&(n=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[t]],"boolean"==typeof n&&(n=Number(n))),n}}function uu(e,t,n,r,i){return u(e,((e,o)=>{const a=t instanceof ai?t.get(o):null;return a&&a.evaluate?a.evaluate(n,r,i):a}))}function hu(e){let t=1/0,n=1/0,r=-1/0,i=-1/0;for(const o of e)t=Math.min(t,o.x),n=Math.min(n,o.y),r=Math.max(r,o.x),i=Math.max(i,o.y);return{minX:t,minY:n,maxX:r,maxY:i}}function fu(e,t){return t-e}var pu;Sr("FeatureIndex",cu,{omit:["rawTileData","sourceLayerCoder"]}),e.PerformanceMarkers=void 0,(pu=e.PerformanceMarkers||(e.PerformanceMarkers={})).create="create",pu.load="load",pu.fullLoad="fullLoad";let du=null,mu=[];const gu=1e3/30,yu={mark(e){performance.mark(e)},frame(e){const t=e;null!=du&&mu.push(t-du),du=t},clearMetrics(){du=null,mu=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const t in e.PerformanceMarkers)performance.clearMarks(e.PerformanceMarkers[t])},getPerformanceMetrics(){performance.measure("loadTime",e.PerformanceMarkers.create,e.PerformanceMarkers.load),performance.measure("fullLoadTime",e.PerformanceMarkers.create,e.PerformanceMarkers.fullLoad);const t=performance.getEntriesByName("loadTime")[0].duration,n=performance.getEntriesByName("fullLoadTime")[0].duration,r=mu.length,i=1/(mu.reduce(((e,t)=>e+t),0)/r/1e3),o=mu.filter((e=>e>gu)).reduce(((e,t)=>e+(t-gu)/gu),0);return{loadTime:t,fullLoadTime:n,fps:i,percentDroppedFrames:o/(r+o)*100}}};e.AJAXError=j,e.ARRAY_TYPE=ua,e.Actor=class{constructor(e,t,n){this.target=e,this.parent=t,this.mapId=n,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},c(["receive","process"],this),this.invoker=new qc(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=y()?e:window}send(e,t,n,r,i=!1){const o=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(this.callbacks[o]=n);const a=A(this.globalScope)?void 0:[];return this.target.postMessage({id:o,type:e,hasCallback:!!n,targetMapId:r,mustQueue:i,sourceMapId:this.mapId,data:Br(t,a)},a),{cancel:()=>{n&&delete this.callbacks[o],this.target.postMessage({id:o,type:"<cancel>",targetMapId:r,sourceMapId:this.mapId})}}}receive(e){const t=e.data,n=t.id;if(n&&(!t.targetMapId||this.mapId===t.targetMapId))if("<cancel>"===t.type){delete this.tasks[n];const e=this.cancelCallbacks[n];delete this.cancelCallbacks[n],e&&e()}else y()||t.mustQueue?(this.tasks[n]=t,this.taskQueue.push(n),this.invoker.trigger()):this.processTask(n,t)}process(){if(!this.taskQueue.length)return;const e=this.taskQueue.shift(),t=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(e,t)}processTask(e,t){if("<response>"===t.type){const n=this.callbacks[e];delete this.callbacks[e],n&&(t.error?n(kr(t.error)):n(null,kr(t.data)))}else{let n=!1;const r=A(this.globalScope)?void 0:[],i=t.hasCallback?(t,i)=>{n=!0,delete this.cancelCallbacks[e],this.target.postMessage({id:e,type:"<response>",sourceMapId:this.mapId,error:t?Br(t):null,data:Br(i,r)},r)}:e=>{n=!0};let o=null;const a=kr(t.data);if(this.parent[t.type])o=this.parent[t.type](t.sourceMapId,a,i);else if(this.parent.getWorkerSource){const e=t.type.split(".");o=this.parent.getWorkerSource(t.sourceMapId,e[0],a.source)[e[1]](a,i)}else i(new Error(`Could not find function ${t.type}`));!n&&o&&o.cancel&&(this.cancelCallbacks[e]=o.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},e.AlphaImage=Sa,e.CanonicalTileID=nu,e.CollisionBoxArray=Gi,e.CollisionCircleLayoutArray=class extends Pi{},e.Color=Oe,e.DEMData=au,e.DataConstantProperty=si,e.DictionaryCoder=su,e.EXTENT=No,e.ErrorEvent=ee,e.EvaluationParameters=Jr,e.Event=Q,e.Evented=te,e.FeatureIndex=cu,e.FillBucket=ps,e.FillExtrusionBucket=Ds,e.GeoJSONFeature=lu,e.ImageAtlas=Dl,e.ImagePosition=Ol,e.LineBucket=$s,e.LineStripIndexArray=class extends Ni{},e.LngLat=Hc,e.LngLatBounds=$c,e.MercatorCoordinate=eu,e.ONE_EM=ol,e.OverscaledTileID=iu,e.PerformanceUtils=yu,e.PosArray=Ji,e.Properties=fi,e.QuadTriangleArray=class extends Oi{},e.RGBAImage=Ta,e.RasterBoundsArray=class extends xi{},e.RequestPerformance=class{constructor(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let e=performance.getEntriesByName(this._marks.measure);return 0===e.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),e=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),e}},e.ResourceType=N,e.SegmentVector=mo,e.SymbolBucket=Dc,e.Transitionable=ti,e.TriangleIndexArray=uo,e.Uniform1f=So,e.Uniform1i=class extends Eo{constructor(e,t){super(e,t),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))}},e.Uniform2f=class extends Eo{constructor(e,t){super(e,t),this.current=[0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))}},e.Uniform3f=class extends Eo{constructor(e,t){super(e,t),this.current=[0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))}},e.Uniform4f=To,e.UniformColor=Bo,e.UniformMatrix4f=class extends Eo{constructor(e,t){super(e,t),this.current=ko}set(e){if(e[12]!==this.current[12]||e[0]!==this.current[0])return this.current=e,void this.gl.uniformMatrix4fv(this.location,!1,e);for(let t=1;t<16;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix4fv(this.location,!1,e);break}}},e.UnwrappedTileID=ru,e.ValidationError=re,e.ZoomHistory=Mr,e.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},e.addDynamicAttributes=Mc,e.asyncAll=function(e,t,n){if(!e.length)return n(null,[]);let r=e.length;const i=new Array(e.length);let o=null;e.forEach(((e,a)=>{t(e,((e,t)=>{e&&(o=e),i[a]=t,0==--r&&n(o,i)}))}))},e.bezier=r,e.bindAll=c,e.cacheEntryPossiblyAdded=function(e){O++,O>P&&(e.getActor().send("enforceCacheSizeLimit",M),O=0)},e.clamp=o,e.clearTileCache=function(e){const t=caches.delete(B);e&&t.catch(e).then((()=>e()))},e.clipLine=sc,e.clone=function(e){var t=new ua(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.clone$1=f,e.clone$2=function(e){var t=new ua(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.collisionCircleLayout=nl,e.config=T,e.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.create=function(){var e=new ua(16);return ua!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.create$1=ha,e.createExpression=Dn,e.createFilter=Xn,e.createLayout=vi,e.createStyleLayer=function(e){return"custom"===e.type?new Vc(e):new Gc[e.type](e)},e.cross=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],l=n[2];return e[0]=i*l-o*s,e[1]=o*a-r*l,e[2]=r*s-i*a,e},e.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},e.dot$1=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},e.ease=i,e.emitValidationErrors=wr,e.enforceCacheSizeLimit=function(e){I(),k&&k.then((t=>{t.keys().then((n=>{for(let r=0;r<n.length-e;r++)t.delete(n[r])}))}))},e.equals=function(e,t){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],p=e[11],d=e[12],m=e[13],g=e[14],y=e[15],v=t[0],b=t[1],_=t[2],x=t[3],A=t[4],w=t[5],C=t[6],E=t[7],S=t[8],T=t[9],B=t[10],k=t[11],M=t[12],P=t[13],I=t[14],O=t[15];return Math.abs(n-v)<=ca*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(r-b)<=ca*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(i-_)<=ca*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(o-x)<=ca*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-A)<=ca*Math.max(1,Math.abs(a),Math.abs(A))&&Math.abs(s-w)<=ca*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(l-C)<=ca*Math.max(1,Math.abs(l),Math.abs(C))&&Math.abs(c-E)<=ca*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(u-S)<=ca*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(h-T)<=ca*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(f-B)<=ca*Math.max(1,Math.abs(f),Math.abs(B))&&Math.abs(p-k)<=ca*Math.max(1,Math.abs(p),Math.abs(k))&&Math.abs(d-M)<=ca*Math.max(1,Math.abs(d),Math.abs(M))&&Math.abs(m-P)<=ca*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(g-I)<=ca*Math.max(1,Math.abs(g),Math.abs(I))&&Math.abs(y-O)<=ca*Math.max(1,Math.abs(y),Math.abs(O))},e.evaluateSizeForFeature=function(e,{uSize:t,uSizeT:n},{lowerSize:r,upperSize:i}){return"source"===e.kind?r/Kl:"composite"===e.kind?Ct(r/Kl,i/Kl,n):t},e.evaluateSizeForZoom=function(e,t){let n=0,r=0;if("constant"===e.kind)r=e.layoutSize;else if("source"!==e.kind){const{interpolationType:i,minZoom:a,maxZoom:s}=e,l=i?o(Gt.interpolationFactor(i,t,a,s),0,1):0;"camera"===e.kind?r=Ct(e.minSize,e.maxSize,l):n=l}return{uSizeT:n,uSize:r}},e.evaluateVariableOffset=_c,e.evented=Xr,e.exported=C,e.exported$1=D,e.extend=s,e.filterObject=h,e.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.getAnchorAlignment=$l,e.getAnchorJustification=xc,e.getArrayBuffer=W,e.getImage=Y,e.getJSON=function(e,t){return q(s(e,{type:"json"}),t)},e.getOverlapMode=Uc,e.getRTLTextPluginStatus=Zr,e.getReferrer=V,e.getVideo=function(e,t){const n=window.document.createElement("video");n.muted=!0,n.onloadstart=function(){t(null,n)};for(let t=0;t<e.length;t++){const r=window.document.createElement("source");H(e[t])||(n.crossOrigin="Anonymous"),r.src=e[t],n.appendChild(r)}return{cancel:()=>{}}},e.identity=fa,e.invert=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],h=t[9],f=t[10],p=t[11],d=t[12],m=t[13],g=t[14],y=t[15],v=n*s-r*a,b=n*l-i*a,_=n*c-o*a,x=r*l-i*s,A=r*c-o*s,w=i*c-o*l,C=u*m-h*d,E=u*g-f*d,S=u*y-p*d,T=h*g-f*m,B=h*y-p*m,k=f*y-p*g,M=v*k-b*B+_*T+x*S-A*E+w*C;return M?(e[0]=(s*k-l*B+c*T)*(M=1/M),e[1]=(i*B-r*k-o*T)*M,e[2]=(m*w-g*A+y*x)*M,e[3]=(f*A-h*w-p*x)*M,e[4]=(l*S-a*k-c*E)*M,e[5]=(n*k-i*S+o*E)*M,e[6]=(g*_-d*w-y*b)*M,e[7]=(u*w-f*_+p*b)*M,e[8]=(a*B-s*S+c*C)*M,e[9]=(r*S-n*B-o*C)*M,e[10]=(d*A-m*_+y*v)*M,e[11]=(h*_-u*A-p*v)*M,e[12]=(s*E-a*T-l*C)*M,e[13]=(n*T-r*E+i*C)*M,e[14]=(m*b-d*x-g*v)*M,e[15]=(u*x-h*b+f*v)*M,e):null},e.isImageBitmap=w,e.isSafari=A,e.isWorker=y,e.keysDifference=function(e,t){const n=[];for(const r in e)r in t||n.push(r);return n},e.lazyLoadRTLTextPlugin=function(){Kr.isLoading()||Kr.isLoaded()||"deferred"!==Zr()||Yr()},e.makeRequest=q,e.mapObject=u,e.mercatorXfromLng=Yc,e.mercatorYfromLat=Kc,e.mercatorZfromAltitude=Jc,e.mul=ma,e.mul$1=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e},e.multiply=pa,e.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},e.normalize=function(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e},e.number=Ct,e.ortho=function(e,t,n,r,i,o,a){var s=1/(t-n),l=1/(r-i),c=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*l,e[14]=(a+o)*c,e[15]=1,e},e.parseCacheControl=v,e.parseGlyphPbf=function(e){return new al(e).readFields(kl,[])},e.pbf=al,e.performSymbolLayout=function(t){t.bucket.createArrays(),t.bucket.tilePixelRatio=No/(512*t.bucket.overscaling),t.bucket.compareText={},t.bucket.iconsNeedLinear=!1;const n=t.bucket.layers[0].layout,r=t.bucket.layers[0]._unevaluatedLayout._values,i={layoutIconSize:r["icon-size"].possiblyEvaluate(new Jr(t.bucket.zoom+1),t.canonical),layoutTextSize:r["text-size"].possiblyEvaluate(new Jr(t.bucket.zoom+1),t.canonical),textMaxSize:r["text-size"].possiblyEvaluate(new Jr(18))};if("composite"===t.bucket.textSizeData.kind){const{minZoom:e,maxZoom:n}=t.bucket.textSizeData;i.compositeTextSizes=[r["text-size"].possiblyEvaluate(new Jr(e),t.canonical),r["text-size"].possiblyEvaluate(new Jr(n),t.canonical)]}if("composite"===t.bucket.iconSizeData.kind){const{minZoom:e,maxZoom:n}=t.bucket.iconSizeData;i.compositeIconSizes=[r["icon-size"].possiblyEvaluate(new Jr(e),t.canonical),r["icon-size"].possiblyEvaluate(new Jr(n),t.canonical)]}const o=n.get("text-line-height")*ol,a="viewport"!==n.get("text-rotation-alignment")&&"point"!==n.get("symbol-placement"),s=n.get("text-keep-upright"),l=n.get("text-size");for(const r of t.bucket.features){const c=n.get("text-font").evaluate(r,{},t.canonical).join(","),u=l.evaluate(r,{},t.canonical),h=i.layoutTextSize.evaluate(r,{},t.canonical),f=i.layoutIconSize.evaluate(r,{},t.canonical),p={horizontal:{},vertical:void 0},m=r.text;let g,y=[0,0];if(m){const i=m.toString(),l=n.get("text-letter-spacing").evaluate(r,{},t.canonical)*ol,f=Or(i)?l:0,d=n.get("text-anchor").evaluate(r,{},t.canonical),g=n.get("text-variable-anchor");if(!g){const e=n.get("text-radial-offset").evaluate(r,{},t.canonical);y=e?_c(d,[e*ol,bc]):n.get("text-offset").evaluate(r,{},t.canonical).map((e=>e*ol))}let v=a?"center":n.get("text-justify").evaluate(r,{},t.canonical);const b=n.get("symbol-placement"),_="point"===b?n.get("text-max-width").evaluate(r,{},t.canonical)*ol:0,x=()=>{t.bucket.allowVerticalPlacement&&Ir(i)&&(p.vertical=Fl(m,t.glyphMap,t.glyphPositions,t.imagePositions,c,_,o,d,"left",f,y,e.WritingMode.vertical,!0,b,h,u))};if(!a&&g){const n="auto"===v?g.map((e=>xc(e))):[v];let r=!1;for(let i=0;i<n.length;i++){const a=n[i];if(!p.horizontal[a])if(r)p.horizontal[a]=p.horizontal[0];else{const n=Fl(m,t.glyphMap,t.glyphPositions,t.imagePositions,c,_,o,"center",a,f,y,e.WritingMode.horizontal,!1,b,h,u);n&&(p.horizontal[a]=n,r=1===n.positionedLines.length)}}x()}else{"auto"===v&&(v=xc(d));const n=Fl(m,t.glyphMap,t.glyphPositions,t.imagePositions,c,_,o,d,v,f,y,e.WritingMode.horizontal,!1,b,h,u);n&&(p.horizontal[v]=n),x(),Ir(i)&&a&&s&&(p.vertical=Fl(m,t.glyphMap,t.glyphPositions,t.imagePositions,c,_,o,d,v,f,y,e.WritingMode.vertical,!1,b,h,u))}}let v=!1;if(r.icon&&r.icon.name){const e=t.imageMap[r.icon.name];e&&(g=Zl(t.imagePositions[r.icon.name],n.get("icon-offset").evaluate(r,{},t.canonical),n.get("icon-anchor").evaluate(r,{},t.canonical)),v=!!e.sdf,void 0===t.bucket.sdfIcons?t.bucket.sdfIcons=v:t.bucket.sdfIcons!==v&&d("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(e.pixelRatio!==t.bucket.pixelRatio||0!==n.get("icon-rotate").constantOr(1))&&(t.bucket.iconsNeedLinear=!0))}const b=Ec(p.horizontal)||p.vertical;t.bucket.iconsInText=!!b&&b.iconsInText,(b||g)&&Ac(t.bucket,r,p,g,t.imageMap,i,h,f,y,v,t.canonical)}t.showCollisionBoxes&&t.bucket.generateCollisionDebugBuffers()},e.perspective=function(e,t,n,r,i){var o,a=1/Math.tan(t/2);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(e[10]=(i+r)*(o=1/(r-i)),e[14]=2*i*r*o):(e[10]=-1,e[14]=-2*r),e},e.pick=function(e,t){const n={};for(let r=0;r<t.length;r++){const i=t[r];i in e&&(n[i]=e[i])}return n},e.plugin=Kr,e.pointGeometry=E,e.polygonIntersectsPolygon=$o,e.potpack=Il,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.register=Sr,e.registerForPluginStateChange=function(e){return e({pluginStatus:qr,pluginURL:Wr}),Xr.on("pluginStateChange",e),e},e.renderColorRamp=Ba,e.rotateX=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],l=t[7],c=t[8],u=t[9],h=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+c*r,e[5]=a*i+u*r,e[6]=s*i+h*r,e[7]=l*i+f*r,e[8]=c*i-o*r,e[9]=u*i-a*r,e[10]=h*i-s*r,e[11]=f*i-l*r,e},e.rotateZ=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],c=t[4],u=t[5],h=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+c*r,e[1]=a*i+u*r,e[2]=s*i+h*r,e[3]=l*i+f*r,e[4]=c*i-o*r,e[5]=u*i-a*r,e[6]=h*i-s*r,e[7]=f*i-l*r,e},e.scale=function(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.scale$1=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},e.setCacheLimits=function(e,t){M=e,P=t},e.setRTLTextPlugin=function(e,t,n=!1){if(qr===Nr||qr===jr||qr===Vr)throw new Error("setRTLTextPlugin cannot be called multiple times.");Wr=C.resolveURL(e),qr=Nr,Gr=t,$r(),n||Yr()},e.spec=ne,e.sphericalToCartesian=function([e,t,n]){return t+=90,t*=Math.PI/180,n*=Math.PI/180,{x:e*Math.cos(t)*Math.sin(n),y:e*Math.sin(t)*Math.sin(n),z:e*Math.cos(n)}},e.sqrLen=function(e){var t=e[0],n=e[1];return t*t+n*n},e.sub=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},e.toEvaluationFeature=qo,e.transformMat3=function(e,t,n){var r=t[0],i=t[1],o=t[2];return e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8],e},e.transformMat4=va,e.transformMat4$1=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e},e.translate=function(e,t,n){var r,i,o,a,s,l,c,u,h,f,p,d,m=n[0],g=n[1],y=n[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*y+t[12],e[13]=t[1]*m+t[5]*g+t[9]*y+t[13],e[14]=t[2]*m+t[6]*g+t[10]*y+t[14],e[15]=t[3]*m+t[7]*g+t[11]*y+t[15]):(i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],f=t[9],p=t[10],d=t[11],e[0]=r=t[0],e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=h,e[9]=f,e[10]=p,e[11]=d,e[12]=r*m+s*g+h*y+t[12],e[13]=i*m+l*g+f*y+t[13],e[14]=o*m+c*g+p*y+t[14],e[15]=a*m+u*g+d*y+t[15]),e},e.triggerPluginCompletionEvent=Hr,e.unicodeBlockLookup=Pr,e.uniqueId=function(){return l++},e.validateCustomStyleLayer=function(e){const t=[],n=e.id;return void 0===n&&t.push({message:`layers.${n}: missing required property "id"`}),void 0===e.render&&t.push({message:`layers.${n}: missing required method "render"`}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:`layers.${n}: property "renderingMode" must be either "2d" or "3d"`}),t},e.validateLight=_r,e.validateStyle=br,e.vectorTile=bs,e.warnOnce=d,e.wrap=a})),r(0,(function(e){function t(e){const n=typeof e;if("number"===n||"boolean"===n||"string"===n||null==e)return JSON.stringify(e);if(Array.isArray(e)){let n="[";for(const r of e)n+=`${t(r)},`;return`${n}]`}const r=Object.keys(e).sort();let i="{";for(let n=0;n<r.length;n++)i+=`${JSON.stringify(r[n])}:${t(e[r[n]])},`;return`${i}}`}function n(n){let r="";for(const i of e.refProperties)r+=`/${t(n[i])}`;return r}class r{constructor(e){this.keyCache={},e&&this.replace(e)}replace(e){this._layerConfigs={},this._layers={},this.update(e,[])}update(t,r){for(const n of t){this._layerConfigs[n.id]=n;const t=this._layers[n.id]=e.createStyleLayer(n);t._featureFilter=e.createFilter(t.filter),this.keyCache[n.id]&&delete this.keyCache[n.id]}for(const e of r)delete this.keyCache[e],delete this._layerConfigs[e],delete this._layers[e];this.familiesBySource={};const i=function(e,t){const r={};for(let i=0;i<e.length;i++){const o=t&&t[e[i].id]||n(e[i]);t&&(t[e[i].id]=o);let a=r[o];a||(a=r[o]=[]),a.push(e[i])}const i=[];for(const e in r)i.push(r[e]);return i}(Object.values(this._layerConfigs),this.keyCache);for(const e of i){const t=e.map((e=>this._layers[e.id])),n=t[0];if("none"===n.visibility)continue;const r=n.source||"";let i=this.familiesBySource[r];i||(i=this.familiesBySource[r]={});const o=n.sourceLayer||"_geojsonTileLayer";let a=i[o];a||(a=i[o]=[]),a.push(t)}}}class i{constructor(t){const n={},r=[];for(const e in t){const i=t[e],o=n[e]={};for(const e in i){const t=i[+e];if(!t||0===t.bitmap.width||0===t.bitmap.height)continue;const n={x:0,y:0,w:t.bitmap.width+2,h:t.bitmap.height+2};r.push(n),o[e]={rect:n,metrics:t.metrics}}}const{w:i,h:o}=e.potpack(r),a=new e.AlphaImage({width:i||1,height:o||1});for(const r in t){const i=t[r];for(const t in i){const o=i[+t];if(!o||0===o.bitmap.width||0===o.bitmap.height)continue;const s=n[r][t].rect;e.AlphaImage.copy(o.bitmap,a,{x:0,y:0},{x:s.x+1,y:s.y+1},o.bitmap)}}this.image=a,this.positions=n}}e.register("GlyphAtlas",i);class o{constructor(t){this.tileID=new e.OverscaledTileID(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId}parse(t,n,r,o,s){this.status="parsing",this.data=t,this.collisionBoxArray=new e.CollisionBoxArray;const l=new e.DictionaryCoder(Object.keys(t.layers).sort()),c=new e.FeatureIndex(this.tileID,this.promoteId);c.bucketLayerIDs=[];const u={},h={featureIndex:c,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:r},f=n.familiesBySource[this.source];for(const n in f){const i=t.layers[n];if(!i)continue;1===i.version&&e.warnOnce(`Vector tile source "${this.source}" layer "${n}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const o=l.encode(n),s=[];for(let e=0;e<i.length;e++){const t=i.feature(e),r=c.getId(t,n);s.push({feature:t,id:r,index:e,sourceLayerIndex:o})}for(const t of f[n]){const n=t[0];n.source!==this.source&&e.warnOnce(`layer.source = ${n.source} does not equal this.source = ${this.source}`),n.minzoom&&this.zoom<Math.floor(n.minzoom)||n.maxzoom&&this.zoom>=n.maxzoom||"none"!==n.visibility&&(a(t,this.zoom,r),(u[n.id]=n.createBucket({index:c.bucketLayerIDs.length,layers:t,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:o,sourceID:this.source})).populate(s,h,this.tileID.canonical),c.bucketLayerIDs.push(t.map((e=>e.id))))}}let p,d,m,g;const y=e.mapObject(h.glyphDependencies,(e=>Object.keys(e).map(Number)));Object.keys(y).length?o.send("getGlyphs",{uid:this.uid,stacks:y},((e,t)=>{p||(p=e,d=t,_.call(this))})):d={};const v=Object.keys(h.iconDependencies);v.length?o.send("getImages",{icons:v,source:this.source,tileID:this.tileID,type:"icons"},((e,t)=>{p||(p=e,m=t,_.call(this))})):m={};const b=Object.keys(h.patternDependencies);function _(){if(p)return s(p);if(d&&m&&g){const t=new i(d),n=new e.ImageAtlas(m,g);for(const i in u){const o=u[i];o instanceof e.SymbolBucket?(a(o.layers,this.zoom,r),e.performSymbolLayout({bucket:o,glyphMap:d,glyphPositions:t.positions,imageMap:m,imagePositions:n.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):o.hasPattern&&(o instanceof e.LineBucket||o instanceof e.FillBucket||o instanceof e.FillExtrusionBucket)&&(a(o.layers,this.zoom,r),o.addFeatures(h,this.tileID.canonical,n.patternPositions))}this.status="done",s(null,{buckets:Object.values(u).filter((e=>!e.isEmpty())),featureIndex:c,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,imageAtlas:n,glyphMap:this.returnDependencies?d:null,iconMap:this.returnDependencies?m:null,glyphPositions:this.returnDependencies?t.positions:null})}}b.length?o.send("getImages",{icons:b,source:this.source,tileID:this.tileID,type:"patterns"},((e,t)=>{p||(p=e,g=t,_.call(this))})):g={},_.call(this)}}function a(t,n,r){const i=new e.EvaluationParameters(n);for(const e of t)e.recalculate(i,r)}function s(t,n){const r=e.getArrayBuffer(t.request,((t,r,i,o)=>{t?n(t):r&&n(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(r)),rawData:r,cacheControl:i,expires:o})}));return()=>{r.cancel(),n()}}class l{constructor(e,t,n,r){this.actor=e,this.layerIndex=t,this.availableImages=n,this.loadVectorData=r||s,this.loading={},this.loaded={}}loadTile(t,n){const r=t.uid;this.loading||(this.loading={});const i=!!(t&&t.request&&t.request.collectResourceTiming)&&new e.RequestPerformance(t.request),a=this.loading[r]=new o(t);a.abort=this.loadVectorData(t,((t,o)=>{if(delete this.loading[r],t||!o)return a.status="done",this.loaded[r]=a,n(t);const s=o.rawData,l={};o.expires&&(l.expires=o.expires),o.cacheControl&&(l.cacheControl=o.cacheControl);const c={};if(i){const e=i.finish();e&&(c.resourceTiming=JSON.parse(JSON.stringify(e)))}a.vectorTile=o.vectorTile,a.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,((t,r)=>{if(t||!r)return n(t);n(null,e.extend({rawTileData:s.slice(0)},r,l,c))})),this.loaded=this.loaded||{},this.loaded[r]=a}))}reloadTile(e,t){const n=this.loaded,r=e.uid,i=this;if(n&&n[r]){const o=n[r];o.showCollisionBoxes=e.showCollisionBoxes;const a=(e,n)=>{const r=o.reloadCallback;r&&(delete o.reloadCallback,o.parse(o.vectorTile,i.layerIndex,this.availableImages,i.actor,r)),t(e,n)};"parsing"===o.status?o.reloadCallback=a:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,a):a())}}abortTile(e,t){const n=this.loading,r=e.uid;n&&n[r]&&n[r].abort&&(n[r].abort(),delete n[r]),t()}removeTile(e,t){const n=this.loaded,r=e.uid;n&&n[r]&&delete n[r],t()}}class c{constructor(){this.loaded={}}loadTile(t,n){const{uid:r,encoding:i,rawImageData:o}=t,a=e.isImageBitmap(o)?this.getImageData(o):o,s=new e.DEMData(r,a,i);this.loaded=this.loaded||{},this.loaded[r]=s,n(null,s)}getImageData(t){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(t.width,t.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=t.width,this.offscreenCanvas.height=t.height,this.offscreenCanvasContext.drawImage(t,0,0,t.width,t.height);const n=this.offscreenCanvasContext.getImageData(-1,-1,t.width+2,t.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:n.width,height:n.height},n.data)}removeTile(e){const t=this.loaded,n=e.uid;t&&t[n]&&delete t[n]}}var u=function e(t,n){var r,i=t&&t.type;if("FeatureCollection"===i)for(r=0;r<t.features.length;r++)e(t.features[r],n);else if("GeometryCollection"===i)for(r=0;r<t.geometries.length;r++)e(t.geometries[r],n);else if("Feature"===i)e(t.geometry,n);else if("Polygon"===i)h(t.coordinates,n);else if("MultiPolygon"===i)for(r=0;r<t.coordinates.length;r++)h(t.coordinates[r],n);return t};function h(e,t){if(0!==e.length){f(e[0],t);for(var n=1;n<e.length;n++)f(e[n],!t)}}function f(e,t){for(var n=0,r=0,i=0,o=e.length,a=o-1;i<o;a=i++){var s=(e[i][0]-e[a][0])*(e[a][1]+e[i][1]),l=n+s;r+=Math.abs(n)>=Math.abs(s)?n-l+s:s-l+n,n=l}n+r>=0!=!!t&&e.reverse()}const p=e.vectorTile.VectorTileFeature.prototype.toGeoJSON;class d{constructor(t){this._feature=t,this.extent=e.EXTENT,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))}loadGeometry(){if(1===this._feature.type){const t=[];for(const n of this._feature.geometry)t.push([new e.pointGeometry(n[0],n[1])]);return t}{const t=[];for(const n of this._feature.geometry){const r=[];for(const t of n)r.push(new e.pointGeometry(t[0],t[1]));t.push(r)}return t}}toGeoJSON(e,t,n){return p.call(this,e,t,n)}}class m{constructor(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=t.length,this._features=t}feature(e){return new d(this._features[e])}}var g={exports:{}},y=e.pointGeometry,v=e.vectorTile.VectorTileFeature,b=_;function _(e,t){this.options=t||{},this.features=e,this.length=e.length}function x(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}_.prototype.feature=function(e){return new x(this.features[e],this.options.extent)},x.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var n=e[t],r=[],i=0;i<n.length;i++)r.push(new y(n[i][0],n[i][1]));this.geometry.push(r)}return this.geometry},x.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<e.length;o++)for(var a=e[o],s=0;s<a.length;s++){var l=a[s];t=Math.min(t,l.x),n=Math.max(n,l.x),r=Math.min(r,l.y),i=Math.max(i,l.y)}return[t,r,n,i]},x.prototype.toGeoJSON=v.prototype.toGeoJSON;var A=e.pbf,w=b;function C(e){var t=new A;return function(e,t){for(var n in e.layers)t.writeMessage(3,E,e.layers[n])}(e,t),t.finish()}function E(e,t){var n;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<e.length;n++)r.feature=e.feature(n),t.writeMessage(2,S,r);var i=r.keys;for(n=0;n<i.length;n++)t.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)t.writeMessage(4,P,o[n])}function S(e,t){var n=e.feature;void 0!==n.id&&t.writeVarintField(1,n.id),t.writeMessage(2,T,e),t.writeVarintField(3,n.type),t.writeMessage(4,M,n)}function T(e,t){var n=e.feature,r=e.keys,i=e.values,o=e.keycache,a=e.valuecache;for(var s in n.properties){var l=n.properties[s],c=o[s];if(null!==l){void 0===c&&(r.push(s),o[s]=c=r.length-1),t.writeVarint(c);var u=typeof l;"string"!==u&&"boolean"!==u&&"number"!==u&&(l=JSON.stringify(l));var h=u+":"+l,f=a[h];void 0===f&&(i.push(l),a[h]=f=i.length-1),t.writeVarint(f)}}}function B(e,t){return(t<<3)+(7&e)}function k(e){return e<<1^e>>31}function M(e,t){for(var n=e.loadGeometry(),r=e.type,i=0,o=0,a=n.length,s=0;s<a;s++){var l=n[s],c=1;1===r&&(c=l.length),t.writeVarint(B(1,c));for(var u=3===r?l.length-1:l.length,h=0;h<u;h++){1===h&&1!==r&&t.writeVarint(B(2,u-1));var f=l[h].x-i,p=l[h].y-o;t.writeVarint(k(f)),t.writeVarint(k(p)),i+=f,o+=p}3===r&&t.writeVarint(B(7,1))}}function P(e,t){var n=typeof e;"string"===n?t.writeStringField(1,e):"boolean"===n?t.writeBooleanField(7,e):"number"===n&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}function I(e,t,n,r,i,o){if(i-r<=n)return;const a=r+i>>1;O(e,t,a,r,i,o%2),I(e,t,n,r,a-1,o+1),I(e,t,n,a+1,i,o+1)}function O(e,t,n,r,i,o){for(;i>r;){if(i-r>600){const a=i-r+1,s=n-r+1,l=Math.log(a),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(a-c)/a)*(s-a/2<0?-1:1);O(e,t,n,Math.max(r,Math.floor(n-s*c/a+u)),Math.min(i,Math.floor(n+(a-s)*c/a+u)),o)}const a=t[2*n+o];let s=r,l=i;for(D(e,t,r,n),t[2*i+o]>a&&D(e,t,r,i);s<l;){for(D(e,t,s,l),s++,l--;t[2*s+o]<a;)s++;for(;t[2*l+o]>a;)l--}t[2*r+o]===a?D(e,t,r,l):(l++,D(e,t,l,i)),l<=n&&(r=l+1),n<=l&&(i=l-1)}}function D(e,t,n,r){z(e,n,r),z(t,2*n,2*r),z(t,2*n+1,2*r+1)}function z(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function L(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}g.exports=C,g.exports.fromVectorTileJs=C,g.exports.fromGeojsonVt=function(e,t){t=t||{};var n={};for(var r in e)n[r]=new w(e[r].features,t),n[r].name=r,n[r].version=t.version,n[r].extent=t.extent;return C({layers:n})},g.exports.GeoJSONWrapper=w;const R=e=>e[0],F=e=>e[1];class U{constructor(e,t=R,n=F,r=64,i=Float64Array){this.nodeSize=r,this.points=e;const o=e.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(e.length),s=this.coords=new i(2*e.length);for(let r=0;r<e.length;r++)a[r]=r,s[2*r]=t(e[r]),s[2*r+1]=n(e[r]);I(a,s,r,0,a.length-1,0)}range(e,t,n,r){return function(e,t,n,r,i,o,a){const s=[0,e.length-1,0],l=[];let c,u;for(;s.length;){const h=s.pop(),f=s.pop(),p=s.pop();if(f-p<=a){for(let a=p;a<=f;a++)c=t[2*a],u=t[2*a+1],c>=n&&c<=i&&u>=r&&u<=o&&l.push(e[a]);continue}const d=Math.floor((p+f)/2);c=t[2*d],u=t[2*d+1],c>=n&&c<=i&&u>=r&&u<=o&&l.push(e[d]);const m=(h+1)%2;(0===h?n<=c:r<=u)&&(s.push(p),s.push(d-1),s.push(m)),(0===h?i>=c:o>=u)&&(s.push(d+1),s.push(f),s.push(m))}return l}(this.ids,this.coords,e,t,n,r,this.nodeSize)}within(e,t,n){return function(e,t,n,r,i,o){const a=[0,e.length-1,0],s=[],l=i*i;for(;a.length;){const c=a.pop(),u=a.pop(),h=a.pop();if(u-h<=o){for(let i=h;i<=u;i++)L(t[2*i],t[2*i+1],n,r)<=l&&s.push(e[i]);continue}const f=Math.floor((h+u)/2),p=t[2*f],d=t[2*f+1];L(p,d,n,r)<=l&&s.push(e[f]);const m=(c+1)%2;(0===c?n-i<=p:r-i<=d)&&(a.push(h),a.push(f-1),a.push(m)),(0===c?n+i>=p:r+i>=d)&&(a.push(f+1),a.push(u),a.push(m))}return s}(this.ids,this.coords,e,t,n,this.nodeSize)}}const N={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},j=Math.fround||(V=new Float32Array(1),e=>(V[0]=+e,V[0]));var V;class G{constructor(e){this.options=K(Object.create(N),e),this.trees=new Array(this.options.maxZoom+1)}load(e){const{log:t,minZoom:n,maxZoom:r,nodeSize:i}=this.options;t&&console.time("total time");const o=`prepare ${e.length} points`;t&&console.time(o),this.points=e;let a=[];for(let t=0;t<e.length;t++)e[t].geometry&&a.push(W(e[t],t));this.trees[r+1]=new U(a,J,Q,i,Float32Array),t&&console.timeEnd(o);for(let e=r;e>=n;e--){const n=+Date.now();a=this._cluster(a,e),this.trees[e]=new U(a,J,Q,i,Float32Array),t&&console.log("z%d: %d clusters in %dms",e,a.length,+Date.now()-n)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let n=((e[0]+180)%360+360)%360-180;const r=Math.max(-90,Math.min(90,e[1]));let i=180===e[2]?180:((e[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,i=180;else if(n>i){const e=this.getClusters([n,r,180,o],t),a=this.getClusters([-180,r,i,o],t);return e.concat(a)}const a=this.trees[this._limitZoom(t)],s=a.range(X(n),Z(o),X(i),Z(r)),l=[];for(const e of s){const t=a.points[e];l.push(t.numPoints?H(t):this.points[t.index])}return l}getChildren(e){const t=this._getOriginId(e),n=this._getOriginZoom(e),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);const o=i.points[t];if(!o)throw new Error(r);const a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=i.within(o.x,o.y,a),l=[];for(const t of s){const n=i.points[t];n.parentId===e&&l.push(n.numPoints?H(n):this.points[n.index])}if(0===l.length)throw new Error(r);return l}getLeaves(e,t,n){const r=[];return this._appendLeaves(r,e,t=t||10,n=n||0,0),r}getTile(e,t,n){const r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),{extent:o,radius:a}=this.options,s=a/o,l=(n-s)/i,c=(n+1+s)/i,u={features:[]};return this._addTileFeatures(r.range((t-s)/i,l,(t+1+s)/i,c),r.points,t,n,i,u),0===t&&this._addTileFeatures(r.range(1-s/i,l,1,c),r.points,i,n,i,u),t===i-1&&this._addTileFeatures(r.range(0,l,s/i,c),r.points,-1,n,i,u),u.features.length?u:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t}_appendLeaves(e,t,n,r,i){const o=this.getChildren(t);for(const t of o){const o=t.properties;if(o&&o.cluster?i+o.point_count<=r?i+=o.point_count:i=this._appendLeaves(e,o.cluster_id,n,r,i):i<r?i++:e.push(t),e.length===n)break}return i}_addTileFeatures(e,t,n,r,i,o){for(const a of e){const e=t[a],s=e.numPoints;let l,c,u;if(s)l=$(e),c=e.x,u=e.y;else{const t=this.points[e.index];l=t.properties,c=X(t.geometry.coordinates[0]),u=Z(t.geometry.coordinates[1])}const h={type:1,geometry:[[Math.round(this.options.extent*(c*i-n)),Math.round(this.options.extent*(u*i-r))]],tags:l};let f;s?f=e.id:this.options.generateId?f=e.index:this.points[e.index].id&&(f=this.points[e.index].id),void 0!==f&&(h.id=f),o.features.push(h)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const n=[],{radius:r,extent:i,reduce:o,minPoints:a}=this.options,s=r/(i*Math.pow(2,t));for(let r=0;r<e.length;r++){const i=e[r];if(i.zoom<=t)continue;i.zoom=t;const l=this.trees[t+1],c=l.within(i.x,i.y,s),u=i.numPoints||1;let h=u;for(const e of c){const n=l.points[e];n.zoom>t&&(h+=n.numPoints||1)}if(h>u&&h>=a){let e=i.x*u,a=i.y*u,s=o&&u>1?this._map(i,!0):null;const f=(r<<5)+(t+1)+this.points.length;for(const n of c){const r=l.points[n];if(r.zoom<=t)continue;r.zoom=t;const c=r.numPoints||1;e+=r.x*c,a+=r.y*c,r.parentId=f,o&&(s||(s=this._map(i,!0)),o(s,this._map(r)))}i.parentId=f,n.push(q(e/h,a/h,f,h,s))}else if(n.push(i),h>1)for(const e of c){const r=l.points[e];r.zoom<=t||(r.zoom=t,n.push(r))}}return n}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t){if(e.numPoints)return t?K({},e.properties):e.properties;const n=this.points[e.index].properties,r=this.options.map(n);return t&&r===n?K({},r):r}}function q(e,t,n,r,i){return{x:j(e),y:j(t),zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function W(e,t){const[n,r]=e.geometry.coordinates;return{x:j(X(n)),y:j(Z(r)),zoom:1/0,index:t,parentId:-1}}function H(e){return{type:"Feature",id:e.id,properties:$(e),geometry:{type:"Point",coordinates:[(t=e.x,360*(t-.5)),Y(e.y)]}};var t}function $(e){const t=e.numPoints,n=t>=1e4?`${Math.round(t/1e3)}k`:t>=1e3?Math.round(t/100)/10+"k":t;return K(K({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:n})}function X(e){return e/360+.5}function Z(e){const t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function Y(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function K(e,t){for(const n in t)e[n]=t[n];return e}function J(e){return e.x}function Q(e){return e.y}function ee(e,t,n,r){for(var i,o=r,a=n-t>>1,s=n-t,l=e[t],c=e[t+1],u=e[n],h=e[n+1],f=t+3;f<n;f+=3){var p=te(e[f],e[f+1],l,c,u,h);if(p>o)i=f,o=p;else if(p===o){var d=Math.abs(f-a);d<s&&(i=f,s=d)}}o>r&&(i-t>3&&ee(e,t,i,r),e[i+2]=o,n-i>3&&ee(e,i,n,r))}function te(e,t,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var l=((e-n)*a+(t-r)*s)/(a*a+s*s);l>1?(n=i,r=o):l>0&&(n+=a*l,r+=s*l)}return(a=e-n)*a+(s=t-r)*s}function ne(e,t,n,r){var i={id:void 0===e?null:e,type:t,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,n=e.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)re(e,t);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<t.length;r++)re(e,t[r]);else if("MultiPolygon"===n)for(r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)re(e,t[r][i])}(i),i}function re(e,t){for(var n=0;n<t.length;n+=3)e.minX=Math.min(e.minX,t[n]),e.minY=Math.min(e.minY,t[n+1]),e.maxX=Math.max(e.maxX,t[n]),e.maxY=Math.max(e.maxY,t[n+1])}function ie(e,t,n,r){if(t.geometry){var i=t.geometry.coordinates,o=t.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],l=t.id;if(n.promoteId?l=t.properties[n.promoteId]:n.generateId&&(l=r||0),"Point"===o)oe(i,s);else if("MultiPoint"===o)for(var c=0;c<i.length;c++)oe(i[c],s);else if("LineString"===o)ae(i,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(c=0;c<i.length;c++)ae(i[c],s=[],a,!1),e.push(ne(l,"LineString",s,t.properties));return}se(i,s,a,!1)}else if("Polygon"===o)se(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(c=0;c<t.geometry.geometries.length;c++)ie(e,{id:l,geometry:t.geometry.geometries[c],properties:t.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<i.length;c++){var u=[];se(i[c],u,a,!0),s.push(u)}}e.push(ne(l,o,s,t.properties))}}function oe(e,t){t.push(le(e[0])),t.push(ce(e[1])),t.push(0)}function ae(e,t,n,r){for(var i,o,a=0,s=0;s<e.length;s++){var l=le(e[s][0]),c=ce(e[s][1]);t.push(l),t.push(c),t.push(0),s>0&&(a+=r?(i*c-l*o)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(c-o,2))),i=l,o=c}var u=t.length-3;t[2]=1,ee(t,0,u,n),t[u+2]=1,t.size=Math.abs(a),t.start=0,t.end=t.size}function se(e,t,n,r){for(var i=0;i<e.length;i++){var o=[];ae(e[i],o,n,r),t.push(o)}}function le(e){return e/360+.5}function ce(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function ue(e,t,n,r,i,o,a,s){if(r/=t,o>=(n/=t)&&a<r)return e;if(a<n||o>=r)return null;for(var l=[],c=0;c<e.length;c++){var u=e[c],h=u.geometry,f=u.type,p=0===i?u.minX:u.minY,d=0===i?u.maxX:u.maxY;if(p>=n&&d<r)l.push(u);else if(!(d<n||p>=r)){var m=[];if("Point"===f||"MultiPoint"===f)he(h,m,n,r,i);else if("LineString"===f)fe(h,m,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===f)de(h,m,n,r,i,!1);else if("Polygon"===f)de(h,m,n,r,i,!0);else if("MultiPolygon"===f)for(var g=0;g<h.length;g++){var y=[];de(h[g],y,n,r,i,!0),y.length&&m.push(y)}if(m.length){if(s.lineMetrics&&"LineString"===f){for(g=0;g<m.length;g++)l.push(ne(u.id,f,m[g],u.tags));continue}"LineString"!==f&&"MultiLineString"!==f||(1===m.length?(f="LineString",m=m[0]):f="MultiLineString"),"Point"!==f&&"MultiPoint"!==f||(f=3===m.length?"Point":"MultiPoint"),l.push(ne(u.id,f,m,u.tags))}}}return l.length?l:null}function he(e,t,n,r,i){for(var o=0;o<e.length;o+=3){var a=e[o+i];a>=n&&a<=r&&(t.push(e[o]),t.push(e[o+1]),t.push(e[o+2]))}}function fe(e,t,n,r,i,o,a){for(var s,l,c=pe(e),u=0===i?ge:ye,h=e.start,f=0;f<e.length-3;f+=3){var p=e[f],d=e[f+1],m=e[f+2],g=e[f+3],y=e[f+4],v=0===i?p:d,b=0===i?g:y,_=!1;a&&(s=Math.sqrt(Math.pow(p-g,2)+Math.pow(d-y,2))),v<n?b>n&&(l=u(c,p,d,g,y,n),a&&(c.start=h+s*l)):v>r?b<r&&(l=u(c,p,d,g,y,r),a&&(c.start=h+s*l)):me(c,p,d,m),b<n&&v>=n&&(l=u(c,p,d,g,y,n),_=!0),b>r&&v<=r&&(l=u(c,p,d,g,y,r),_=!0),!o&&_&&(a&&(c.end=h+s*l),t.push(c),c=pe(e)),a&&(h+=s)}var x=e.length-3;p=e[x],d=e[x+1],m=e[x+2],(v=0===i?p:d)>=n&&v<=r&&me(c,p,d,m),x=c.length-3,o&&x>=3&&(c[x]!==c[0]||c[x+1]!==c[1])&&me(c,c[0],c[1],c[2]),c.length&&t.push(c)}function pe(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function de(e,t,n,r,i,o){for(var a=0;a<e.length;a++)fe(e[a],t,n,r,i,o,!1)}function me(e,t,n,r){e.push(t),e.push(n),e.push(r)}function ge(e,t,n,r,i,o){var a=(o-t)/(r-t);return e.push(o),e.push(n+(i-n)*a),e.push(1),a}function ye(e,t,n,r,i,o){var a=(o-n)/(i-n);return e.push(t+(r-t)*a),e.push(o),e.push(1),a}function ve(e,t){for(var n=[],r=0;r<e.length;r++){var i,o=e[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=be(o.geometry,t);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(be(o.geometry[s],t))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var l=[],c=0;c<o.geometry[s].length;c++)l.push(be(o.geometry[s][c],t));i.push(l)}n.push(ne(o.id,a,i,o.tags))}return n}function be(e,t){var n=[];n.size=e.size,void 0!==e.start&&(n.start=e.start,n.end=e.end);for(var r=0;r<e.length;r+=3)n.push(e[r]+t,e[r+1],e[r+2]);return n}function _e(e,t){if(e.transformed)return e;var n,r,i,o=1<<e.z,a=e.x,s=e.y;for(n=0;n<e.features.length;n++){var l=e.features[n],c=l.geometry,u=l.type;if(l.geometry=[],1===u)for(r=0;r<c.length;r+=2)l.geometry.push(xe(c[r],c[r+1],t,o,a,s));else for(r=0;r<c.length;r++){var h=[];for(i=0;i<c[r].length;i+=2)h.push(xe(c[r][i],c[r][i+1],t,o,a,s));l.geometry.push(h)}}return e.transformed=!0,e}function xe(e,t,n,r,i,o){return[Math.round(n*(e*r-i)),Math.round(n*(t*r-o))]}function Ae(e,t,n,r,i){for(var o=t===i.maxZoom?0:i.tolerance/((1<<t)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){a.numFeatures++,we(a,e[s],o,i);var l=e[s].minX,c=e[s].minY,u=e[s].maxX,h=e[s].maxY;l<a.minX&&(a.minX=l),c<a.minY&&(a.minY=c),u>a.maxX&&(a.maxX=u),h>a.maxY&&(a.maxY=h)}return a}function we(e,t,n,r){var i=t.geometry,o=t.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===o)Ce(a,i,e,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)Ce(a,i[s],e,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<i.length;l++){var c=i[l];for(s=0;s<c.length;s++)Ce(a,c[s],e,n,!0,0===s)}if(a.length){var u=t.tags||null;if("LineString"===o&&r.lineMetrics){for(var h in u={},t.tags)u[h]=t.tags[h];u.mapbox_clip_start=i.start/i.size,u.mapbox_clip_end=i.end/i.size}var f={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:u};null!==t.id&&(f.id=t.id),e.features.push(f)}}function Ce(e,t,n,r,i,o){var a=r*r;if(r>0&&t.size<(i?a:r))n.numPoints+=t.length/3;else{for(var s=[],l=0;l<t.length;l+=3)(0===r||t[l+2]>a)&&(n.numSimplified++,s.push(t[l]),s.push(t[l+1])),n.numPoints++;i&&function(e,t){for(var n=0,r=0,i=e.length,o=i-2;r<i;o=r,r+=2)n+=(e[r]-e[o])*(e[r+1]+e[o+1]);if(n>0===t)for(r=0,i=e.length;r<i/2;r+=2){var a=e[r],s=e[r+1];e[r]=e[i-2-r],e[r+1]=e[i-1-r],e[i-2-r]=a,e[i-1-r]=s}}(s,o),e.push(s)}}function Ee(e,t){var n=(t=this.options=function(e,t){for(var n in t)e[n]=t[n];return e}(Object.create(this.options),t)).debug;if(n&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(e,t){var n=[];if("FeatureCollection"===e.type)for(var r=0;r<e.features.length;r++)ie(n,e.features[r],t,r);else ie(n,"Feature"===e.type?e:{geometry:e},t);return n}(e,t);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),r=function(e,t){var n=t.buffer/t.extent,r=e,i=ue(e,1,-1-n,n,0,-1,2,t),o=ue(e,1,1-n,2+n,0,-1,2,t);return(i||o)&&(r=ue(e,1,-n,1+n,0,-1,2,t)||[],i&&(r=ve(i,1).concat(r)),o&&(r=r.concat(ve(o,-1)))),r}(r,t),r.length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Se(e,t,n){return 32*((1<<e)*n+t)+e}function Te(e,t){const n=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);const r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return t(null,null);const i=new m(r.features);let o=g.exports(i);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),t(null,{vectorTile:i,rawData:o.buffer})}Ee.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ee.prototype.splitTile=function(e,t,n,r,i,o,a){for(var s=[e,t,n,r],l=this.options,c=l.debug;s.length;){r=s.pop(),n=s.pop(),t=s.pop(),e=s.pop();var u=1<<t,h=Se(t,n,r),f=this.tiles[h];if(!f&&(c>1&&console.time("creation"),f=this.tiles[h]=Ae(e,t,n,r,l),this.tileCoords.push({z:t,x:n,y:r}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,r,f.numFeatures,f.numPoints,f.numSimplified),console.timeEnd("creation"));var p="z"+t;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(f.source=e,i){if(t===l.maxZoom||t===i)continue;var d=1<<i-t;if(n!==Math.floor(o/d)||r!==Math.floor(a/d))continue}else if(t===l.indexMaxZoom||f.numPoints<=l.indexMaxPoints)continue;if(f.source=null,0!==e.length){c>1&&console.time("clipping");var m,g,y,v,b,_,x=.5*l.buffer/l.extent,A=.5-x,w=.5+x,C=1+x;m=g=y=v=null,b=ue(e,u,n-x,n+w,0,f.minX,f.maxX,l),_=ue(e,u,n+A,n+C,0,f.minX,f.maxX,l),e=null,b&&(m=ue(b,u,r-x,r+w,1,f.minY,f.maxY,l),g=ue(b,u,r+A,r+C,1,f.minY,f.maxY,l),b=null),_&&(y=ue(_,u,r-x,r+w,1,f.minY,f.maxY,l),v=ue(_,u,r+A,r+C,1,f.minY,f.maxY,l),_=null),c>1&&console.timeEnd("clipping"),s.push(m||[],t+1,2*n,2*r),s.push(g||[],t+1,2*n,2*r+1),s.push(y||[],t+1,2*n+1,2*r),s.push(v||[],t+1,2*n+1,2*r+1)}}},Ee.prototype.getTile=function(e,t,n){var r=this.options,i=r.extent,o=r.debug;if(e<0||e>24)return null;var a=1<<e,s=Se(e,t=(t%a+a)%a,n);if(this.tiles[s])return _e(this.tiles[s],i);o>1&&console.log("drilling down to z%d-%d-%d",e,t,n);for(var l,c=e,u=t,h=n;!l&&c>0;)c--,u=Math.floor(u/2),h=Math.floor(h/2),l=this.tiles[Se(c,u,h)];return l&&l.source?(o>1&&console.log("found parent tile z%d-%d-%d",c,u,h),o>1&&console.time("drilling down"),this.splitTile(l.source,c,u,h,e,t,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?_e(this.tiles[s],i):null):null};class Be extends l{constructor(e,t,n,r){super(e,t,n,Te),r&&(this.loadGeoJSON=r)}loadData(t,n){var r;null===(r=this._pendingRequest)||void 0===r||r.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const i=!!(t&&t.request&&t.request.collectResourceTiming)&&new e.RequestPerformance(t.request);this._pendingCallback=n,this._pendingRequest=this.loadGeoJSON(t,((r,o)=>{if(delete this._pendingCallback,delete this._pendingRequest,r||!o)return n(r);if("object"!=typeof o)return n(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`));{u(o,!0);try{if(t.filter){const n=e.createExpression(t.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===n.result)throw new Error(n.value.map((e=>`${e.key}: ${e.message}`)).join(", "));const r=o.features.filter((e=>n.value.evaluate({zoom:0},e)));o={type:"FeatureCollection",features:r}}this._geoJSONIndex=t.cluster?new G(function({superclusterOptions:t,clusterProperties:n}){if(!n||!t)return t;const r={},i={},o={accumulated:null,zoom:0},a={properties:null},s=Object.keys(n);for(const t of s){const[o,a]=n[t],s=e.createExpression(a),l=e.createExpression("string"==typeof o?[o,["accumulated"],["get",t]]:o);r[t]=s.value,i[t]=l.value}return t.map=e=>{a.properties=e;const t={};for(const e of s)t[e]=r[e].evaluate(o,a);return t},t.reduce=(e,t)=>{a.properties=t;for(const t of s)o.accumulated=e[t],e[t]=i[t].evaluate(o,a)},t}(t)).load(o.features):function(e,t){return new Ee(e,t)}(o,t.geojsonVtOptions)}catch(r){return n(r)}this.loaded={};const a={};if(i){const e=i.finish();e&&(a.resourceTiming={},a.resourceTiming[t.source]=JSON.parse(JSON.stringify(e)))}n(null,a)}}))}reloadTile(e,t){const n=this.loaded;return n&&n[e.uid]?super.reloadTile(e,t):this.loadTile(e,t)}loadGeoJSON(t,n){if(t.request)return e.getJSON(t.request,n);if("string"==typeof t.data)try{n(null,JSON.parse(t.data))}catch(e){n(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`))}else n(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),t()}getClusterExpansionZoom(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(e){t(e)}}getClusterChildren(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(e){t(e)}}getClusterLeaves(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(e){t(e)}}}class ke{constructor(t){this.self=t,this.actor=new e.Actor(t,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:l,geojson:Be},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(e,t)=>{if(this.workerSourceTypes[e])throw new Error(`Worker source with name "${e}" already registered.`);this.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=t=>{if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}}setReferrer(e,t){this.referrer=t}setImages(e,t,n){this.availableImages[e]=t;for(const n in this.workerSources[e]){const r=this.workerSources[e][n];for(const e in r)r[e].availableImages=t}n()}setLayers(e,t,n){this.getLayerIndex(e).replace(t),n()}updateLayers(e,t,n){this.getLayerIndex(e).update(t.layers,t.removedIds),n()}loadTile(e,t,n){this.getWorkerSource(e,t.type,t.source).loadTile(t,n)}loadDEMTile(e,t,n){this.getDEMWorkerSource(e,t.source).loadTile(t,n)}reloadTile(e,t,n){this.getWorkerSource(e,t.type,t.source).reloadTile(t,n)}abortTile(e,t,n){this.getWorkerSource(e,t.type,t.source).abortTile(t,n)}removeTile(e,t,n){this.getWorkerSource(e,t.type,t.source).removeTile(t,n)}removeDEMTile(e,t){this.getDEMWorkerSource(e,t.source).removeTile(t)}removeSource(e,t,n){if(!this.workerSources[e]||!this.workerSources[e][t.type]||!this.workerSources[e][t.type][t.source])return;const r=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==r.removeSource?r.removeSource(t,n):n()}loadWorkerSource(e,t,n){try{this.self.importScripts(t.url),n()}catch(e){n(e.toString())}}syncRTLPluginState(t,n,r){try{e.plugin.setState(n);const t=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=t){this.self.importScripts(t);const n=e.plugin.isParsed();r(n?void 0:new Error(`RTL Text Plugin failed to import scripts from ${t}`),n)}}catch(e){r(e.toString())}}getAvailableImages(e){let t=this.availableImages[e];return t||(t=[]),t}getLayerIndex(e){let t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new r),t}getWorkerSource(e,t,n){if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][n]){const r={send:(t,n,r)=>{this.actor.send(t,n,r,e)}};this.workerSources[e][t][n]=new this.workerSourceTypes[t](r,this.getLayerIndex(e),this.getAvailableImages(e))}return this.workerSources[e][t][n]}getDEMWorkerSource(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new c),this.demWorkerSources[e][t]}enforceCacheSizeLimit(t,n){e.enforceCacheSizeLimit(n)}}return e.isWorker()&&(self.worker=new ke(self)),ke})),r(0,(function(e){var t=n;function n(e){return!function(e){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{t=new Worker(r),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(r),e}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");if(!t)return!1;var n=t.getImageData(0,0,1,1);return n&&n.width===e.width}()?(void 0===r[t=e&&e.failIfMajorPerformanceCaveat]&&(r[t]=function(e){var t,r=function(e){var t=document.createElement("canvas"),r=Object.create(n.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=e,t.getContext("webgl",r)||t.getContext("experimental-webgl",r)}(e);if(!r)return!1;try{t=r.createShader(r.VERTEX_SHADER)}catch(e){return!1}return!(!t||r.isContextLost())&&(r.shaderSource(t,"void main() {}"),r.compileShader(t),!0===r.getShaderParameter(t,r.COMPILE_STATUS))}(t)),r[t]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var t}(e)}var r={};function i(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!i(e[n],t[n]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!i(e[n],t[n]))return!1;return!0}return e===t}n.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class o{static testProp(e){if(!o.docStyle)return e[0];for(let t=0;t<e.length;t++)if(e[t]in o.docStyle)return e[t];return e[0]}static create(e,t,n){const r=window.document.createElement(e);return void 0!==t&&(r.className=t),n&&n.appendChild(r),r}static createNS(e,t){return window.document.createElementNS(e,t)}static disableDrag(){o.docStyle&&o.selectProp&&(o.userSelect=o.docStyle[o.selectProp],o.docStyle[o.selectProp]="none")}static enableDrag(){o.docStyle&&o.selectProp&&(o.docStyle[o.selectProp]=o.userSelect)}static setTransform(e,t){e.style[o.transformProp]=t}static addEventListener(e,t,n,r={}){e.addEventListener(t,n,"passive"in r?r:r.capture)}static removeEventListener(e,t,n,r={}){e.removeEventListener(t,n,"passive"in r?r:r.capture)}static suppressClickInternal(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",o.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",o.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",o.suppressClickInternal,!0)}),0)}static mousePos(t,n){const r=t.getBoundingClientRect();return new e.pointGeometry(n.clientX-r.left-t.clientLeft,n.clientY-r.top-t.clientTop)}static touchPos(t,n){const r=t.getBoundingClientRect(),i=[];for(let o=0;o<n.length;o++)i.push(new e.pointGeometry(n[o].clientX-r.left-t.clientLeft,n[o].clientY-r.top-t.clientTop));return i}static mouseButton(e){return e.button}static remove(e){e.parentNode&&e.parentNode.removeChild(e)}}o.docStyle="undefined"!=typeof window&&window.document&&window.document.documentElement.style,o.selectProp=o.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),o.transformProp=o.testProp(["transform","WebkitTransform"]);class a{constructor(e){this._transformRequestFn=e}transformRequest(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}normalizeSpriteURL(e,t,n){const r=function(e){const t=e.match(s);if(!t)throw new Error(`Unable to parse URL "${e}"`);return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}(e);return r.path+=`${t}${n}`,function(e){const t=e.params.length?`?${e.params.join("&")}`:"";return`${e.protocol}://${e.authority}${e.path}${t}`}(r)}setTransformRequest(e){this._transformRequestFn=e}}const s=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class l{constructor(e,t,n,r){this.context=e,this.format=n,this.texture=e.gl.createTexture(),this.update(t,r)}update(t,n,r){const{width:i,height:o}=t,a=!(this.size&&this.size[0]===i&&this.size[1]===o||r),{context:s}=this,{gl:l}=s;if(this.useMipmap=Boolean(n&&n.useMipmap),l.bindTexture(l.TEXTURE_2D,this.texture),s.pixelStoreUnpackFlipY.set(!1),s.pixelStoreUnpack.set(1),s.pixelStoreUnpackPremultiplyAlpha.set(this.format===l.RGBA&&(!n||!1!==n.premultiply)),a)this.size=[i,o],t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||e.isImageBitmap(t)?l.texImage2D(l.TEXTURE_2D,0,this.format,this.format,l.UNSIGNED_BYTE,t):l.texImage2D(l.TEXTURE_2D,0,this.format,i,o,0,this.format,l.UNSIGNED_BYTE,t.data);else{const{x:n,y:a}=r||{x:0,y:0};t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||e.isImageBitmap(t)?l.texSubImage2D(l.TEXTURE_2D,0,n,a,l.RGBA,l.UNSIGNED_BYTE,t):l.texSubImage2D(l.TEXTURE_2D,0,n,a,i,o,l.RGBA,l.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&l.generateMipmap(l.TEXTURE_2D)}bind(e,t,n){const{context:r}=this,{gl:i}=r;i.bindTexture(i.TEXTURE_2D,this.texture),n!==i.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=i.LINEAR),e!==this.filter&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,n||e),this.filter=e),t!==this.wrap&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,t),this.wrap=t)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}function c(e){const{userImage:t}=e;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}class u extends e.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:e,callback:t}of this.requestors)this._notify(e,t);this.requestors=[]}}getImage(e){return this.images[e]}addImage(e,t){if(this.images[e])throw new Error(`Image id ${e} already exist, use updateImage instead`);this._validate(e,t)&&(this.images[e]=t)}_validate(t,n){let r=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "stretchX" value`))),r=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "stretchY" value`))),r=!1),this._validateContent(n.content,n)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "content" value`))),r=!1),r}_validateStretch(e,t){if(!e)return!0;let n=0;for(const r of e){if(r[0]<n||r[1]<r[0]||t<r[1])return!1;n=r[1]}return!0}_validateContent(e,t){return!(e&&(4!==e.length||e[0]<0||t.data.width<e[0]||e[1]<0||t.data.height<e[1]||e[2]<0||t.data.width<e[2]||e[3]<0||t.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))}updateImage(e,t){const n=this.images[e];if(n.data.width!==t.data.width||n.data.height!==t.data.height)throw new Error(`size mismatch between old image (${n.data.width}x${n.data.height}) and new image (${t.data.width}x${t.data.height}).`);t.version=n.version+1,this.images[e]=t,this.updatedImages[e]=!0}removeImage(e){const t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e,t){let n=!0;if(!this.isLoaded())for(const t of e)this.images[t]||(n=!1);this.isLoaded()||n?this._notify(e,t):this.requestors.push({ids:e,callback:t})}_notify(t,n){const r={};for(const n of t){this.images[n]||this.fire(new e.Event("styleimagemissing",{id:n}));const t=this.images[n];t?r[n]={data:t.data.clone(),pixelRatio:t.pixelRatio,sdf:t.sdf,version:t.version,stretchX:t.stretchX,stretchY:t.stretchY,content:t.content,hasRenderCallback:Boolean(t.userImage&&t.userImage.render)}:e.warnOnce(`Image "${n}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}n(null,r)}getPixelSize(){const{width:e,height:t}=this.atlasImage;return{width:e,height:t}}getPattern(t){const n=this.patterns[t],r=this.getImage(t);if(!r)return null;if(n&&n.position.version===r.version)return n.position;if(n)n.position.version=r.version;else{const n={w:r.data.width+2,h:r.data.height+2,x:0,y:0},i=new e.ImagePosition(n,r);this.patterns[t]={bin:n,position:i}}return this._updatePatternAtlas(),this.patterns[t].position}bind(e){const t=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new l(e,this.atlasImage,t.RGBA),this.atlasTexture.bind(t.LINEAR,t.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const e in this.patterns)t.push(this.patterns[e].bin);const{w:n,h:r}=e.potpack(t),i=this.atlasImage;i.resize({width:n||1,height:r||1});for(const t in this.patterns){const{bin:n}=this.patterns[t],r=n.x+1,o=n.y+1,a=this.images[t].data,s=a.width,l=a.height;e.RGBAImage.copy(a,i,{x:0,y:0},{x:r,y:o},{width:s,height:l}),e.RGBAImage.copy(a,i,{x:0,y:l-1},{x:r,y:o-1},{width:s,height:1}),e.RGBAImage.copy(a,i,{x:0,y:0},{x:r,y:o+l},{width:s,height:1}),e.RGBAImage.copy(a,i,{x:s-1,y:0},{x:r-1,y:o},{width:1,height:l}),e.RGBAImage.copy(a,i,{x:0,y:0},{x:r+s,y:o},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const n of t){if(this.callbackDispatchedThisFrame[n])continue;this.callbackDispatchedThisFrame[n]=!0;const t=this.images[n];t||e.warnOnce(`Image with ID: "${n}" was not found`),c(t)&&this.updateImage(n,t)}}}const h=1e20;function f(e,t,n,r,i,o,a,s,l){for(let c=t;c<t+r;c++)p(e,n*o+c,o,i,a,s,l);for(let c=n;c<n+i;c++)p(e,c*o+t,1,r,a,s,l)}function p(e,t,n,r,i,o,a){o[0]=0,a[0]=-h,a[1]=h,i[0]=e[t];for(let s=1,l=0,c=0;s<r;s++){i[s]=e[t+s*n];const r=s*s;do{const e=o[l];c=(i[s]-i[e]+r-e*e)/(s-e)/2}while(c<=a[l]&&--l>-1);l++,o[l]=s,a[l]=c,a[l+1]=h}for(let s=0,l=0;s<r;s++){for(;a[l+1]<s;)l++;const r=o[l],c=s-r;e[t+s*n]=i[r]+c*c}}class d{constructor(e,t){this.requestManager=e,this.localIdeographFontFamily=t,this.entries={}}setURL(e){this.url=e}getGlyphs(t,n){const r=[];for(const e in t)for(const n of t[e])r.push({stack:e,id:n});e.asyncAll(r,(({stack:e,id:t},n)=>{let r=this.entries[e];r||(r=this.entries[e]={glyphs:{},requests:{},ranges:{}});let i=r.glyphs[t];if(void 0!==i)return void n(null,{stack:e,id:t,glyph:i});if(i=this._tinySDF(r,e,t),i)return r.glyphs[t]=i,void n(null,{stack:e,id:t,glyph:i});const o=Math.floor(t/256);if(256*o>65535)return void n(new Error("glyphs > 65535 not supported"));if(r.ranges[o])return void n(null,{stack:e,id:t,glyph:i});let a=r.requests[o];a||(a=r.requests[o]=[],d.loadGlyphRange(e,o,this.url,this.requestManager,((e,t)=>{if(t){for(const e in t)this._doesCharSupportLocalGlyph(+e)||(r.glyphs[+e]=t[+e]);r.ranges[o]=!0}for(const n of a)n(e,t);delete r.requests[o]}))),a.push(((r,i)=>{r?n(r):i&&n(null,{stack:e,id:t,glyph:i[t]||null})}))}),((e,t)=>{if(e)n(e);else if(t){const e={};for(const{stack:n,id:r,glyph:i}of t)(e[n]||(e[n]={}))[r]=i&&{id:i.id,bitmap:i.bitmap.clone(),metrics:i.metrics};n(null,e)}}))}_doesCharSupportLocalGlyph(t){return!!this.localIdeographFontFamily&&(e.unicodeBlockLookup["CJK Unified Ideographs"](t)||e.unicodeBlockLookup["Hangul Syllables"](t)||e.unicodeBlockLookup.Hiragana(t)||e.unicodeBlockLookup.Katakana(t))}_tinySDF(t,n,r){const i=this.localIdeographFontFamily;if(!i)return;if(!this._doesCharSupportLocalGlyph(r))return;let o=t.tinySDF;if(!o){let e="400";/bold/i.test(n)?e="900":/medium/i.test(n)?e="500":/light/i.test(n)&&(e="200"),o=t.tinySDF=new d.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:i,fontWeight:e})}const a=o.draw(String.fromCharCode(r));return{id:r,bitmap:new e.AlphaImage({width:a.width||30,height:a.height||30},a.data),metrics:{width:a.glyphWidth||24,height:a.glyphHeight||24,left:a.glyphLeft||0,top:a.glyphTop-27||-8,advance:a.glyphAdvance||24}}}}d.loadGlyphRange=function(t,n,r,i,o){const a=256*n,s=a+255,l=i.transformRequest(r.replace("{fontstack}",t).replace("{range}",`${a}-${s}`),e.ResourceType.Glyphs);e.getArrayBuffer(l,((t,n)=>{if(t)o(t);else if(n){const t={};for(const r of e.parseGlyphPbf(n))t[r.id]=r;o(null,t)}}))},d.TinySDF=class{constructor({fontSize:e=24,buffer:t=3,radius:n=8,cutoff:r=.25,fontFamily:i="sans-serif",fontWeight:o="normal",fontStyle:a="normal"}={}){this.buffer=t,this.cutoff=r,this.radius=n;const s=this.size=e+4*t,l=this._createCanvas(s),c=this.ctx=l.getContext("2d",{willReadFrequently:!0});c.font=`${a} ${o} ${e}px ${i}`,c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s)}_createCanvas(e){const t=document.createElement("canvas");return t.width=t.height=e,t}draw(e){const{width:t,actualBoundingBoxAscent:n,actualBoundingBoxDescent:r,actualBoundingBoxLeft:i,actualBoundingBoxRight:o}=this.ctx.measureText(e),a=Math.ceil(n),s=Math.min(this.size-this.buffer,Math.ceil(o-i)),l=Math.min(this.size-this.buffer,a+Math.ceil(r)),c=s+2*this.buffer,u=l+2*this.buffer,p=Math.max(c*u,0),d=new Uint8ClampedArray(p),m={data:d,width:c,height:u,glyphWidth:s,glyphHeight:l,glyphTop:a,glyphLeft:0,glyphAdvance:t};if(0===s||0===l)return m;const{ctx:g,buffer:y,gridInner:v,gridOuter:b}=this;g.clearRect(y,y,s,l),g.fillText(e,y,y+a);const _=g.getImageData(y,y,s,l);b.fill(h,0,p),v.fill(0,0,p);for(let e=0;e<l;e++)for(let t=0;t<s;t++){const n=_.data[4*(e*s+t)+3]/255;if(0===n)continue;const r=(e+y)*c+t+y;if(1===n)b[r]=0,v[r]=h;else{const e=.5-n;b[r]=e>0?e*e:0,v[r]=e<0?e*e:0}}f(b,0,0,c,u,c,this.f,this.v,this.z),f(v,y,y,s,l,c,this.f,this.v,this.z);for(let e=0;e<p;e++){const t=Math.sqrt(b[e])-Math.sqrt(v[e]);d[e]=Math.round(255-255*(t/this.radius+this.cutoff))}return m}};const m=new e.Properties({anchor:new e.DataConstantProperty(e.spec.light.anchor),position:new class{constructor(){this.specification=e.spec.light.position}possiblyEvaluate(t,n){return e.sphericalToCartesian(t.expression.evaluate(n))}interpolate(t,n,r){return{x:e.number(t.x,n.x,r),y:e.number(t.y,n.y,r),z:e.number(t.z,n.z,r)}}},color:new e.DataConstantProperty(e.spec.light.color),intensity:new e.DataConstantProperty(e.spec.light.intensity)}),g="-transition";class y extends e.Evented{constructor(t){super(),this._transitionable=new e.Transitionable(m),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,n={}){if(!this._validate(e.validateLight,t,n))for(const e in t){const n=t[e];e.endsWith(g)?this._transitionable.setTransition(e.slice(0,-g.length),n):this._transitionable.setValue(e,n)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(t,n,r){return(!r||!1!==r.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}class v{constructor(e,t){this.width=e,this.height=t,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(e,t){const n=e.join(",")+String(t);return this.dashEntry[n]||(this.dashEntry[n]=this.addDash(e,t)),this.dashEntry[n]}getDashRanges(e,t,n){const r=[];let i=e.length%2==1?-e[e.length-1]*n:0,o=e[0]*n,a=!0;r.push({left:i,right:o,isDash:a,zeroLength:0===e[0]});let s=e[0];for(let t=1;t<e.length;t++){a=!a;const l=e[t];i=s*n,s+=l,o=s*n,r.push({left:i,right:o,isDash:a,zeroLength:0===l})}return r}addRoundDash(e,t,n){const r=t/2;for(let t=-n;t<=n;t++){const i=this.width*(this.nextRow+n+t);let o=0,a=e[o];for(let s=0;s<this.width;s++){s/a.right>1&&(a=e[++o]);const l=Math.abs(s-a.left),c=Math.abs(s-a.right),u=Math.min(l,c);let h;const f=t/n*(r+1);if(a.isDash){const e=r-Math.abs(f);h=Math.sqrt(u*u+e*e)}else h=r-Math.sqrt(u*u+f*f);this.data[i+s]=Math.max(0,Math.min(255,h+128))}}}addRegularDash(e){for(let t=e.length-1;t>=0;--t){const n=e[t],r=e[t+1];n.zeroLength?e.splice(t,1):r&&r.isDash===n.isDash&&(r.left=n.left,e.splice(t,1))}const t=e[0],n=e[e.length-1];t.isDash===n.isDash&&(t.left=n.left-this.width,n.right=t.right+this.width);const r=this.width*this.nextRow;let i=0,o=e[i];for(let t=0;t<this.width;t++){t/o.right>1&&(o=e[++i]);const n=Math.abs(t-o.left),a=Math.abs(t-o.right),s=Math.min(n,a);this.data[r+t]=Math.max(0,Math.min(255,(o.isDash?s:-s)+128))}}addDash(t,n){const r=n?7:0,i=2*r+1;if(this.nextRow+i>this.height)return e.warnOnce("LineAtlas out of space"),null;let o=0;for(let e=0;e<t.length;e++)o+=t[e];if(0!==o){const e=this.width/o,i=this.getDashRanges(t,this.width,e);n?this.addRoundDash(i,e,r):this.addRegularDash(i)}const a={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:o};return this.nextRow+=i,this.dirty=!0,a}bind(e){const t=e.gl;this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.ALPHA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,this.width,this.height,0,t.ALPHA,t.UNSIGNED_BYTE,this.data))}}class b{constructor(t,n){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=e.uniqueId();const r=this.workerPool.acquire(this.id);for(let e=0;e<r.length;e++){const t=new b.Actor(r[e],n,this.id);t.name=`Worker ${e}`,this.actors.push(t)}if(!this.actors.length)throw new Error("No actors found")}broadcast(t,n,r){e.asyncAll(this.actors,((e,r)=>{e.send(t,n,r)}),r=r||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((e=>{e.remove()})),this.actors=[],this.workerPool.release(this.id)}}function _(t,n,r){const i=function(n,i){if(n)return r(n);if(i){const n=e.pick(e.extend(i,t),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);i.vector_layers&&(n.vectorLayers=i.vector_layers,n.vectorLayerIds=n.vectorLayers.map((e=>e.id))),r(null,n)}};return t.url?e.getJSON(n.transformRequest(t.url,e.ResourceType.Source),i):e.exported.frame((()=>i(null,t)))}b.Actor=e.Actor;class x{constructor(t,n,r){this.bounds=e.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=n||0,this.maxzoom=r||24}validateBounds(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(t){const n=Math.pow(2,t.z),r=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*n),i=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*n),o=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*n),a=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*n);return t.x>=r&&t.x<o&&t.y>=i&&t.y<a}}class A extends e.Evented{constructor(t,n,r,i){if(super(),this.id=t,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(n,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(i)}load(){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=_(this._options,this.map._requestManager,((t,n)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),t?this.fire(new e.ErrorEvent(t)):n&&(e.extend(this,n),n.bounds&&(this.tileBounds=new x(n.bounds,this.minzoom,this.maxzoom)),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.cancel(),e(),this.load()}setTiles(e){return this.setSourceProperty((()=>{this._options.tiles=e})),this}setUrl(e){return this.setSourceProperty((()=>{this.url=e,this._options.url=e})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return e.extend({},this._options)}loadTile(t,n){const r=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),i={request:this.map._requestManager.transformRequest(r,e.ResourceType.Tile),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function o(r,i){return delete t.request,t.aborted?n(null):r&&404!==r.status?n(r):(i&&i.resourceTiming&&(t.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&t.setExpiryData(i),t.loadVectorData(i,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}i.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state?"loading"===t.state?t.reloadCallback=n:t.request=t.actor.send("reloadTile",i,o.bind(this)):(t.actor=this.dispatcher.getActor(),t.request=t.actor.send("loadTile",i,o.bind(this)))}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id},void 0)}unloadTile(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class w extends e.Evented{constructor(t,n,r,i){super(),this.id=t,this.dispatcher=r,this.setEventedParent(i),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},n),e.extend(this,e.pick(n,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=_(this._options,this.map._requestManager,((t,n)=>{this._tileJSONRequest=null,this._loaded=!0,t?this.fire(new e.ErrorEvent(t)):n&&(e.extend(this,n),n.bounds&&(this.tileBounds=new x(n.bounds,this.minzoom,this.maxzoom)),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return e.extend({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(t,n){const r=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);t.request=e.getImage(this.map._requestManager.transformRequest(r,e.ResourceType.Tile),((r,i,o)=>{if(delete t.request,t.aborted)t.state="unloaded",n(null);else if(r)t.state="errored",n(r);else if(i){this.map._refreshExpiredTiles&&t.setExpiryData(o);const r=this.map.painter.context,a=r.gl;t.texture=this.map.painter.getTileTexture(i.width),t.texture?t.texture.update(i,{useMipmap:!0}):(t.texture=new l(r,i,a.RGBA,{useMipmap:!0}),t.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),r.extTextureFilterAnisotropic&&a.texParameterf(a.TEXTURE_2D,r.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,r.extTextureFilterAnisotropicMax)),t.state="loaded",e.cacheEntryPossiblyAdded(this.dispatcher),n(null)}}))}abortTile(e,t){e.request&&(e.request.cancel(),delete e.request),t()}unloadTile(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()}hasTransition(){return!1}}let C;class E extends w{constructor(t,n,r,i){super(t,n,r,i),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(t,n){const r=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function i(e,r){e&&(t.state="errored",n(e)),r&&(t.dem=r,t.needsHillshadePrepare=!0,t.needsTerrainPrepare=!0,t.state="loaded",n(null))}t.request=e.getImage(this.map._requestManager.transformRequest(r,e.ResourceType.Tile),function(r,o){if(delete t.request,t.aborted)t.state="unloaded",n(null);else if(r)t.state="errored",n(r);else if(o){this.map._refreshExpiredTiles&&t.setExpiryData(o),delete o.cacheControl,delete o.expires;const n=e.isImageBitmap(o)&&(null==C&&(C="undefined"!=typeof OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),C)?o:e.exported.getImageData(o,1),r={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:n,encoding:this.encoding};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",r,i.bind(this)))}}.bind(this)),t.neighboringTiles=this._getNeighboringTiles(t.tileID)}_getNeighboringTiles(t){const n=t.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,o=0===n.x?t.wrap-1:t.wrap,a=(n.x+1+r)%r,s=n.x+1===r?t.wrap+1:t.wrap,l={};return l[new e.OverscaledTileID(t.overscaledZ,o,n.z,i,n.y).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(l[new e.OverscaledTileID(t.overscaledZ,o,n.z,i,n.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<r&&(l[new e.OverscaledTileID(t.overscaledZ,o,n.z,i,n.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),l}unloadTile(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&e.actor.send("removeDEMTile",{uid:e.uid,source:this.id})}}class S extends e.Evented{constructor(t,n,r,i){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=r.getActor(),this.setEventedParent(i),this._data=n.data,this._options=e.extend({},n),this._collectResourceTiming=n.collectResourceTiming,void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId;const o=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*o,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*o,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?n.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,n.clusterMinPoints||2),extent:e.EXTENT,radius:(n.clusterRadius||50)*o,log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(e){this.map=e,this.load()}setData(e){return this._data=e,this._updateWorkerData("content"),this}getClusterExpansionZoom(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this}getClusterChildren(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this}getClusterLeaves(e,t,n,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:n},r),this}_updateWorkerData(t){const n=e.extend({},this.workerOptions),r=this._data;"string"==typeof r?(n.request=this.map._requestManager.transformRequest(e.exported.resolveURL(r),e.ResourceType.Source),n.request.collectResourceTiming=this._collectResourceTiming):n.data=JSON.stringify(r),this._pendingLoads++,this.fire(new e.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,n,((n,r)=>{if(this._pendingLoads--,this._removed||r&&r.abandoned)return void this.fire(new e.Event("dataabort",{dataType:"source",sourceDataType:t}));let i=null;if(r&&r.resourceTiming&&r.resourceTiming[this.id]&&(i=r.resourceTiming[this.id].slice(0)),n)return void this.fire(new e.ErrorEvent(n));const o={dataType:"source",sourceDataType:t};this._collectResourceTiming&&i&&i.length>0&&e.extend(o,{resourceTiming:i}),this.fire(new e.Event("data",o))}))}loaded(){return 0===this._pendingLoads}loadTile(e,t){const n=e.actor?"reloadTile":"loadTile";e.actor=this.actor;const r={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};e.request=this.actor.send(n,r,((r,i)=>(delete e.request,e.unloadVectorData(),e.aborted?t(null):r?t(r):(e.loadVectorData(i,this.map.painter,"reloadTile"===n),t(null)))))}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0}unloadTile(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return e.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var T=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class B extends e.Evented{constructor(e,t,n,r){super(),this.id=e,this.dispatcher=n,this.coordinates=t.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(r),this.options=t}load(t,n){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),((r,i)=>{this._loaded=!0,r?this.fire(new e.ErrorEvent(r)):i&&(this.image=i,t&&(this.coordinates=t),n&&n(),this._finishLoading())}))}loaded(){return this._loaded}updateImage(e){return this.image&&e.url?(this.options.url=e.url,this.load(e.coordinates,(()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}setCoordinates(t){this.coordinates=t;const n=t.map(e.MercatorCoordinate.fromLngLat);this.tileID=function(t){let n=1/0,r=1/0,i=-1/0,o=-1/0;for(const e of t)n=Math.min(n,e.x),r=Math.min(r,e.y),i=Math.max(i,e.x),o=Math.max(o,e.y);const a=Math.max(i-n,o-r),s=Math.max(0,Math.floor(-Math.log(a)/Math.LN2)),l=Math.pow(2,s);return new e.CanonicalTileID(s,Math.floor((n+i)/2*l),Math.floor((r+o)/2*l))}(n),this.minzoom=this.maxzoom=this.tileID.z;const r=n.map((e=>this.tileID.getTilePoint(e)._round()));return this._boundsArray=new e.RasterBoundsArray,this._boundsArray.emplaceBack(r[0].x,r[0].y,0,0),this._boundsArray.emplaceBack(r[1].x,r[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(r[3].x,r[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(r[2].x,r[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const t=this.map.painter.context,n=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,T.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new l(t,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture)}}loadTile(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class k extends B{constructor(e,t,n,r){super(e,t,n,r),this.roundZoom=!0,this.type="video",this.options=t}load(){this._loaded=!1;const t=this.options;this.urls=[];for(const n of t.urls)this.urls.push(this.map._requestManager.transformRequest(n,e.ResourceType.Source).url);e.getVideo(this.urls,((t,n)=>{this._loaded=!0,t?this.fire(new e.ErrorEvent(t)):n&&(this.video=n,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const n=this.video.seekable;t<n.start(0)||t>n.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${n.start(0)} and ${n.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const t=this.map.painter.context,n=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,T.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new l(t,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class M extends B{constructor(t,n,r,i){super(t,n,r,i),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some((e=>!Array.isArray(e)||2!==e.length||e.some((e=>"number"!=typeof e))))||this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'missing required property "coordinates"'))),n.animate&&"boolean"!=typeof n.animate&&this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),n.canvas?"string"==typeof n.canvas||n.canvas instanceof HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'missing required property "canvas"'))),this.options=n,this.animate=void 0===n.animate||n.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const n=this.map.painter.context,r=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,T.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new l(n,this.canvas,r.RGBA,{premultiply:!0});for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}}const P={vector:A,raster:w,"raster-dem":E,geojson:S,video:k,image:B,canvas:M};function I(t,n){const r=e.create();return e.translate(r,r,[1,1,0]),e.scale(r,r,[.5*t.width,.5*t.height,1]),e.multiply(r,r,t.calculatePosMatrix(n.toUnwrapped()))}function O(e,t,n,r,i,o){const a=function(e,t,n){if(e)for(const r of e){const e=t[r];if(e&&e.source===n&&"fill-extrusion"===e.type)return!0}else for(const e in t){const r=t[e];if(r.source===n&&"fill-extrusion"===r.type)return!0}return!1}(i&&i.layers,t,e.id),s=o.maxPitchScaleFactor(),l=e.tilesIn(r,s,a);l.sort(D);const c=[];for(const r of l)c.push({wrappedTileID:r.tileID.wrapped().key,queryResults:r.tile.queryRenderedFeatures(t,n,e._state,r.queryGeometry,r.cameraQueryGeometry,r.scale,i,o,s,I(e.transform,r.tileID))});const u=function(e){const t={},n={};for(const r of e){const e=r.queryResults,i=r.wrappedTileID,o=n[i]=n[i]||{};for(const n in e){const r=e[n],i=o[n]=o[n]||{},a=t[n]=t[n]||[];for(const e of r)i[e.featureIndex]||(i[e.featureIndex]=!0,a.push(e))}}return t}(c);for(const t in u)u[t].forEach((t=>{const n=t.feature,r=e.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=r}));return u}function D(e,t){const n=e.tileID,r=t.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}class z{constructor(t,n){this.tileID=t,this.uid=e.uniqueId(),this.uses=0,this.tileSize=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(t){const n=t+this.timeAdded;n<e.exported.now()||this.fadeEndTime&&n<this.fadeEndTime||(this.fadeEndTime=n)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}clearTextures(e){this.demTexture&&e.saveTileTexture(this.demTexture),this.textures.forEach((t=>e.saveTileTexture(t))),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(t,n,r){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(e,t){const n={};if(!t)return n;for(const r of e){const e=r.layerIds.map((e=>t.getLayer(e))).filter(Boolean);if(0!==e.length){r.layers=e,r.stateDependentLayerIds&&(r.stateDependentLayers=r.stateDependentLayerIds.map((t=>e.filter((e=>e.id===t))[0])));for(const t of e)n[t.id]=r}}return n}(t.buckets,n.style),this.hasSymbolBuckets=!1;for(const t in this.buckets){const n=this.buckets[t];if(n instanceof e.SymbolBucket){if(this.hasSymbolBuckets=!0,!r)break;n.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const t in this.buckets){const n=this.buckets[t];if(n instanceof e.SymbolBucket&&n.hasRTLText){this.hasRTLText=!0,e.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const e in this.buckets){const t=this.buckets[e];this.queryPadding=Math.max(this.queryPadding,n.style.getLayer(e).queryRadius(t))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new e.CollisionBoxArray}unloadVectorData(){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(e){return this.buckets[e.id]}upload(e){for(const t in this.buckets){const n=this.buckets[t];n.uploadPending()&&n.upload(e)}const t=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new l(e,this.imageAtlas.image,t.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new l(e,this.glyphAtlasImage,t.ALPHA),this.glyphAtlasImage=null)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,t,n,r,i,o,a,s,l,c){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:i,scale:o,tileSize:this.tileSize,pixelPosMatrix:c,transform:s,params:a,queryPadding:this.queryPadding*l},e,t,n):{}}querySourceFeatures(t,n){const r=this.latestFeatureIndex;if(!r||!r.rawTileData)return;const i=r.loadVTLayers(),o=n?n.sourceLayer:"",a=i._geojsonTileLayer||i[o];if(!a)return;const s=e.createFilter(n&&n.filter),{z:l,x:c,y:u}=this.tileID.canonical,h={z:l,x:c,y:u};for(let n=0;n<a.length;n++){const i=a.feature(n);if(s.needGeometry){const t=e.toEvaluationFeature(i,!0);if(!s.filter(new e.EvaluationParameters(this.tileID.overscaledZ),t,this.tileID.canonical))continue}else if(!s.filter(new e.EvaluationParameters(this.tileID.overscaledZ),i))continue;const f=r.getId(i,o),p=new e.GeoJSONFeature(i,l,c,u,f);p.tile=h,t.push(p)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const n=this.expirationTime;if(t.cacheControl){const n=e.parseCacheControl(t.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const e=Date.now();let t=!1;if(this.expirationTime>e)t=!1;else if(n)if(this.expirationTime<n)t=!0;else{const r=this.expirationTime-n;r?this.expirationTime=e+Math.max(r,3e4):t=!0}else t=!0;t?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,t){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(e).length)return;const n=this.latestFeatureIndex.loadVTLayers();for(const r in this.buckets){if(!t.style.hasLayer(r))continue;const i=this.buckets[r],o=i.layers[0].sourceLayer||"_geojsonTileLayer",a=n[o],s=e[o];if(!a||!s||0===Object.keys(s).length)continue;i.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{});const l=t&&t.style&&t.style.getLayer(r);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(i)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<e.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=e.exported.now()+t}setDependencies(e,t){const n={};for(const e of t)n[e]=!0;this.dependencies[e]=n}hasDependency(e,t){for(const n of e){const e=this.dependencies[n];if(e)for(const n of t)if(e[n])return!0}return!1}}class L{constructor(e,t){this.max=e,this.onRemove=t,this.reset()}reset(){for(const e in this.data)for(const t of this.data[e])t.timeout&&clearTimeout(t.timeout),this.onRemove(t.value);return this.data={},this.order=[],this}add(e,t,n){const r=e.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);const i={value:t,timeout:void 0};if(void 0!==n&&(i.timeout=setTimeout((()=>{this.remove(e,i)}),n)),this.data[r].push(i),this.order.push(r),this.order.length>this.max){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}getByKey(e){const t=this.data[e];return t?t[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,t){if(!this.has(e))return this;const n=e.wrapped().key,r=void 0===t?0:this.data[n].indexOf(t),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(e){const t=[];for(const n in this.data)for(const r of this.data[n])e(r.value)||t.push(r);for(const e of t)this.remove(e.value.tileID,e)}}class R{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,n,r){const i=String(n);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][i]=this.stateChanges[t][i]||{},e.extend(this.stateChanges[t][i],r),null===this.deletedStates[t]){this.deletedStates[t]={};for(const e in this.state[t])e!==i&&(this.deletedStates[t][e]=null)}else if(this.deletedStates[t]&&null===this.deletedStates[t][i]){this.deletedStates[t][i]={};for(const e in this.state[t][i])r[e]||(this.deletedStates[t][i][e]=null)}else for(const e in r)this.deletedStates[t]&&this.deletedStates[t][i]&&null===this.deletedStates[t][i][e]&&delete this.deletedStates[t][i][e]}removeFeatureState(e,t,n){if(null===this.deletedStates[e])return;const r=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},n&&void 0!==t)null!==this.deletedStates[e][r]&&(this.deletedStates[e][r]=this.deletedStates[e][r]||{},this.deletedStates[e][r][n]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][r])for(n in this.deletedStates[e][r]={},this.stateChanges[e][r])this.deletedStates[e][r][n]=null;else this.deletedStates[e][r]=null;else this.deletedStates[e]=null}getState(t,n){const r=String(n),i=e.extend({},(this.state[t]||{})[r],(this.stateChanges[t]||{})[r]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){const e=this.deletedStates[t][n];if(null===e)return{};for(const t in e)delete i[t]}return i}initializeTileState(e,t){e.setFeatureState(this.state,t)}coalesceChanges(t,n){const r={};for(const t in this.stateChanges){this.state[t]=this.state[t]||{};const n={};for(const r in this.stateChanges[t])this.state[t][r]||(this.state[t][r]={}),e.extend(this.state[t][r],this.stateChanges[t][r]),n[r]=this.state[t][r];r[t]=n}for(const t in this.deletedStates){this.state[t]=this.state[t]||{};const n={};if(null===this.deletedStates[t])for(const e in this.state[t])n[e]={},this.state[t][e]={};else for(const e in this.deletedStates[t]){if(null===this.deletedStates[t][e])this.state[t][e]={};else for(const n of Object.keys(this.deletedStates[t][e]))delete this.state[t][e][n];n[e]=this.state[t][e]}r[t]=r[t]||{},e.extend(r[t],n)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(r).length)for(const e in t)t[e].setFeatureState(r,n)}}class F extends e.Evented{constructor(t,n,r){super(),this.id=t,this.dispatcher=r,this.on("data",(e=>{"source"===e.dataType&&"metadata"===e.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))})),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=function(t,n,r,i){const o=new P[n.type](t,n,r,i);if(o.id!==t)throw new Error(`Expected Source id to be ${t} instead of ${o.id}`);return e.bindAll(["load","abort","unload","serialize","prepare"],o),o}(t,n,r,this),this._tiles={},this._cache=new L(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new R}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(e)}onRemove(e){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(e)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const e in this._tiles){const t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(e,t){return this._source.loadTile(e,t)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,(()=>{}))}_abortTile(t){this._source.abortTile&&this._source.abortTile(t,(()=>{})),this._source.fire(new e.Event("dataabort",{tile:t,coord:t.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const t in this._tiles){const n=this._tiles[t];n.upload(e),n.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((e=>e.tileID)).sort(U).map((e=>e.key))}getRenderableIds(t){const n=[];for(const e in this._tiles)this._isIdRenderable(e,t)&&n.push(this._tiles[e]);return t?n.sort(((t,n)=>{const r=t.tileID,i=n.tileID,o=new e.pointGeometry(r.canonical.x,r.canonical.y)._rotate(this.transform.angle),a=new e.pointGeometry(i.canonical.x,i.canonical.y)._rotate(this.transform.angle);return r.overscaledZ-i.overscaledZ||a.y-o.y||a.x-o.x})).map((e=>e.tileID.key)):n.map((e=>e.tileID)).sort(U).map((e=>e.key))}hasRenderableParent(e){const t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}_isIdRenderable(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(e,"reloading")}}_reloadTile(e,t){const n=this._tiles[e];n&&("loading"!==n.state&&(n.state=t),this._loadTile(n,this._tileLoaded.bind(this,n,e,t)))}_tileLoaded(t,n,r,i){if(i)return t.state="errored",void(404!==i.status?this._source.fire(new e.ErrorEvent(i,{tile:t})):this.update(this.transform,this.terrain));t.timeAdded=e.exported.now(),"expired"===r&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(n,t),"raster-dem"===this.getSource().type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),t.aborted||this._source.fire(new e.Event("data",{dataType:"source",tile:t,coord:t.tileID}))}_backfillDEM(e){const t=this.getRenderableIds();for(let r=0;r<t.length;r++){const i=t[r];if(e.neighboringTiles&&e.neighboringTiles[i]){const t=this.getTileByID(i);n(e,t),n(t,e)}}function n(e,t){e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0;let n=t.tileID.canonical.x-e.tileID.canonical.x;const r=t.tileID.canonical.y-e.tileID.canonical.y,i=Math.pow(2,e.tileID.canonical.z),o=t.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,n,r),e.neighboringTiles&&e.neighboringTiles[o]&&(e.neighboringTiles[o].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,t,n,r){for(const i in this._tiles){let o=this._tiles[i];if(r[i]||!o.hasData()||o.tileID.overscaledZ<=t||o.tileID.overscaledZ>n)continue;let a=o.tileID;for(;o&&o.tileID.overscaledZ>t+1;){const e=o.tileID.scaledTo(o.tileID.overscaledZ-1);o=this._tiles[e.key],o&&o.hasData()&&(a=e)}let s=a;for(;s.overscaledZ>t;)if(s=s.scaledTo(s.overscaledZ-1),e[s.key]){r[a.key]=a;break}}}findLoadedParent(e,t){if(e.key in this._loadedParentTiles){const n=this._loadedParentTiles[e.key];return n&&n.tileID.overscaledZ>=t?n:null}for(let n=e.overscaledZ-1;n>=t;n--){const t=e.scaledTo(n),r=this._getLoadedTile(t);if(r)return r}}_getLoadedTile(e){const t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(e.wrapped().key)}updateCacheSize(e){const t=Math.ceil(e.width/this._source.tileSize)+1,n=Math.ceil(e.height/this._source.tileSize)+1,r=Math.floor(t*n*5),i="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(i)}handleWrapJump(e){const t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){const e={};for(const n in this._tiles){const r=this._tiles[n];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+t),e[r.tileID.key]=r}this._tiles=e;for(const e in this._timers)clearTimeout(this._timers[e]),delete this._timers[e];for(const e in this._tiles)this._setTileReloadTimer(e,this._tiles[e])}}update(t,n){if(this.transform=t,this.terrain=n,!this._sourceLoaded||this._paused)return;let r;this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?r=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((t=>new e.OverscaledTileID(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y))):(r=t.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:n}),this._source.hasTile&&(r=r.filter((e=>this._source.hasTile(e))))):r=[];const i=t.coveringZoomLevel(this._source),o=Math.max(i-F.maxOverzooming,this._source.minzoom),a=Math.max(i+F.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const e={};for(const t of r)if(t.canonical.z>this._source.minzoom){const n=t.scaledTo(t.canonical.z-1);e[n.key]=n;const r=t.scaledTo(Math.max(this._source.minzoom,Math.min(t.canonical.z,5)));e[r.key]=r}r=r.concat(Object.values(e))}const s=this._updateRetainedTiles(r,i);if(N(this._source.type)){const t={},l={},c=Object.keys(s);for(const n of c){const r=s[n],i=this._tiles[n];if(!i||i.fadeEndTime&&i.fadeEndTime<=e.exported.now())continue;const a=this.findLoadedParent(r,o);a&&(this._addTile(a.tileID),t[a.tileID.key]=a.tileID),l[n]=r}this._retainLoadedChildren(l,i,a,s);for(const e in t)s[e]||(this._coveredTiles[e]=!0,s[e]=t[e]);if(n){const e={},t={};for(const n of r)this._tiles[n.key].hasData()?e[n.key]=n:t[n.key]=n;for(const n in t){const r=t[n].children(this._source.maxzoom);this._tiles[r[0].key]&&this._tiles[r[1].key]&&this._tiles[r[2].key]&&this._tiles[r[3].key]&&(e[r[0].key]=s[r[0].key]=r[0],e[r[1].key]=s[r[1].key]=r[1],e[r[2].key]=s[r[2].key]=r[2],e[r[3].key]=s[r[3].key]=r[3],delete t[n])}for(const n in t){const r=this.findLoadedParent(t[n],this._source.minzoom);if(r){e[r.tileID.key]=s[r.tileID.key]=r.tileID;for(const t in e)e[t].isChildOf(r.tileID)&&delete e[t]}}for(const t in this._tiles)e[t]||(this._coveredTiles[t]=!0)}}for(const e in s)this._tiles[e].clearFadeHold();const l=e.keysDifference(this._tiles,s);for(const e of l){const t=this._tiles[e];t.hasSymbolBuckets&&!t.holdingForFade()?t.setHoldDuration(this.map._fadeDuration):t.hasSymbolBuckets&&!t.symbolFadeFinished()||this._removeTile(e)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)}_updateRetainedTiles(e,t){const n={},r={},i=Math.max(t-F.maxOverzooming,this._source.minzoom),o=Math.max(t+F.maxUnderzooming,this._source.minzoom),a={};for(const r of e){const e=this._addTile(r);n[r.key]=r,e.hasData()||t<this._source.maxzoom&&(a[r.key]=r)}this._retainLoadedChildren(a,t,o,n);for(const o of e){let e=this._tiles[o.key];if(e.hasData())continue;if(t+1>this._source.maxzoom){const e=o.children(this._source.maxzoom)[0],t=this.getTile(e);if(t&&t.hasData()){n[e.key]=e;continue}}else{const e=o.children(this._source.maxzoom);if(n[e[0].key]&&n[e[1].key]&&n[e[2].key]&&n[e[3].key])continue}let a=e.wasRequested();for(let t=o.overscaledZ-1;t>=i;--t){const i=o.scaledTo(t);if(r[i.key])break;if(r[i.key]=!0,e=this.getTile(i),!e&&a&&(e=this._addTile(i)),e&&(n[i.key]=i,a=e.wasRequested(),e.hasData()))break}}return n}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const t=[];let n,r=this._tiles[e].tileID;for(;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){n=this._loadedParentTiles[r.key];break}t.push(r.key);const e=r.scaledTo(r.overscaledZ-1);if(n=this._getLoadedTile(e),n)break;r=e}for(const e of t)this._loadedParentTiles[e]=n}}_addTile(t){let n=this._tiles[t.key];if(n)return n;n=this._cache.getAndRemove(t),n&&(this._setTileReloadTimer(t.key,n),n.tileID=t,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,n)));const r=n;return n||(n=new z(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(n,this._tileLoaded.bind(this,n,t.key,n.state))),n.uses++,this._tiles[t.key]=n,r||this._source.fire(new e.Event("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n}_setTileReloadTimer(e,t){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const n=t.getExpiryTimeout();n&&(this._timers[e]=setTimeout((()=>{this._reloadTile(e,"expired"),delete this._timers[e]}),n))}_removeTile(e){const t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(e);this._cache.reset()}tilesIn(t,n,r){const i=[],o=this.transform;if(!o)return i;const a=r?o.getCameraQueryGeometry(t):t,s=t.map((e=>o.pointCoordinate(e,this.terrain))),l=a.map((e=>o.pointCoordinate(e,this.terrain))),c=this.getIds();let u=1/0,h=1/0,f=-1/0,p=-1/0;for(const e of l)u=Math.min(u,e.x),h=Math.min(h,e.y),f=Math.max(f,e.x),p=Math.max(p,e.y);for(let t=0;t<c.length;t++){const r=this._tiles[c[t]];if(r.holdingForFade())continue;const a=r.tileID,d=Math.pow(2,o.zoom-r.tileID.overscaledZ),m=n*r.queryPadding*e.EXTENT/r.tileSize/d,g=[a.getTilePoint(new e.MercatorCoordinate(u,h)),a.getTilePoint(new e.MercatorCoordinate(f,p))];if(g[0].x-m<e.EXTENT&&g[0].y-m<e.EXTENT&&g[1].x+m>=0&&g[1].y+m>=0){const e=s.map((e=>a.getTilePoint(e))),t=l.map((e=>a.getTilePoint(e)));i.push({tile:r,tileID:a,queryGeometry:e,cameraQueryGeometry:t,scale:d})}}return i}getVisibleCoordinates(e){const t=this.getRenderableIds(e).map((e=>this._tiles[e].tileID));for(const e of t)e.posMatrix=this.transform.calculatePosMatrix(e.toUnwrapped());return t}hasTransition(){if(this._source.hasTransition())return!0;if(N(this._source.type))for(const t in this._tiles){const n=this._tiles[t];if(void 0!==n.fadeEndTime&&n.fadeEndTime>=e.exported.now())return!0}return!1}setFeatureState(e,t,n){this._state.updateState(e=e||"_geojsonTileLayer",t,n)}removeFeatureState(e,t,n){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,n)}getFeatureState(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}setDependencies(e,t,n){const r=this._tiles[e];r&&r.setDependencies(t,n)}reloadTilesForDependencies(e,t){for(const n in this._tiles)this._tiles[n].hasDependency(e,t)&&this._reloadTile(n,"reloading");this._cache.filter((n=>!n.hasDependency(e,t)))}}function U(e,t){const n=Math.abs(2*e.wrap)-+(e.wrap<0),r=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||r-n||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function N(e){return"raster"===e||"image"===e||"video"===e}F.maxOverzooming=10,F.maxUnderzooming=3;const j="mapboxgl_preloaded_worker_pool";class V{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<V.workerCount;)this.workers.push(new Worker(xi.workerUrl));return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((e=>{e.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[j]}numActive(){return Object.keys(this.active).length}}const G=Math.floor(e.exported.hardwareConcurrency/2);let q;function W(){return q||(q=new V),q}function H(t,n){const r={};for(const e in t)"ref"!==e&&(r[e]=t[e]);return e.refProperties.forEach((e=>{e in n&&(r[e]=n[e])})),r}function $(e){e=e.slice();const t=Object.create(null);for(let n=0;n<e.length;n++)t[e[n].id]=e[n];for(let n=0;n<e.length;n++)"ref"in e[n]&&(e[n]=H(e[n],t[e[n].ref]));return e}V.workerCount=Math.max(Math.min(G,6),1);const X={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Z(e,t,n){n.push({command:X.addSource,args:[e,t[e]]})}function Y(e,t,n){t.push({command:X.removeSource,args:[e]}),n[e]=!0}function K(e,t,n,r){Y(e,n,r),Z(e,t,n)}function J(e,t,n){let r;for(r in e[n])if(Object.prototype.hasOwnProperty.call(e[n],r)&&"data"!==r&&!i(e[n][r],t[n][r]))return!1;for(r in t[n])if(Object.prototype.hasOwnProperty.call(t[n],r)&&"data"!==r&&!i(e[n][r],t[n][r]))return!1;return!0}function Q(e,t,n,r,o,a){let s;for(s in t=t||{},e=e||{})Object.prototype.hasOwnProperty.call(e,s)&&(i(e[s],t[s])||n.push({command:a,args:[r,s,t[s],o]}));for(s in t)Object.prototype.hasOwnProperty.call(t,s)&&!Object.prototype.hasOwnProperty.call(e,s)&&(i(e[s],t[s])||n.push({command:a,args:[r,s,t[s],o]}))}function ee(e){return e.id}function te(e,t){return e[t.id]=t,e}class ne{constructor(e,t){this.reset(e,t)}reset(e,t){this.points=e||[],this._distances=[0];for(let e=1;e<this.points.length;e++)this._distances[e]=this._distances[e-1]+this.points[e].dist(this.points[e-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(1===this.points.length)return this.points[0];t=e.clamp(t,0,1);let n=1,r=this._distances[n];const i=t*this.paddedLength+this.padding;for(;r<i&&n<this._distances.length;)r=this._distances[++n];const o=n-1,a=this._distances[o],s=r-a,l=s>0?(i-a)/s:0;return this.points[o].mult(1-l).add(this.points[n].mult(l))}}function re(e,t){let n=!0;return"always"===e||"never"!==e&&"never"!==t||(n=!1),n}class ie{constructor(e,t,n){const r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(e/n),this.yCellCount=Math.ceil(t/n);for(let e=0;e<this.xCellCount*this.yCellCount;e++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}insertCircle(e,t,n,r){this._forEachCell(t-r,n-r,t+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(n),this.circles.push(r)}_insertBoxCell(e,t,n,r,i,o){this.boxCells[i].push(o)}_insertCircleCell(e,t,n,r,i,o){this.circleCells[i].push(o)}_query(e,t,n,r,i,o,a){if(n<0||e>this.width||r<0||t>this.height)return[];const s=[];if(e<=0&&t<=0&&this.width<=n&&this.height<=r){if(i)return[{key:null,x1:e,y1:t,x2:n,y2:r}];for(let e=0;e<this.boxKeys.length;e++)s.push({key:this.boxKeys[e],x1:this.bboxes[4*e],y1:this.bboxes[4*e+1],x2:this.bboxes[4*e+2],y2:this.bboxes[4*e+3]});for(let e=0;e<this.circleKeys.length;e++){const t=this.circles[3*e],n=this.circles[3*e+1],r=this.circles[3*e+2];s.push({key:this.circleKeys[e],x1:t-r,y1:n-r,x2:t+r,y2:n+r})}}else this._forEachCell(e,t,n,r,this._queryCell,s,{hitTest:i,overlapMode:o,seenUids:{box:{},circle:{}}},a);return s}query(e,t,n,r){return this._query(e,t,n,r,!1,null)}hitTest(e,t,n,r,i,o){return this._query(e,t,n,r,!0,i,o).length>0}hitTestCircle(e,t,n,r,i){const o=e-n,a=e+n,s=t-n,l=t+n;if(a<0||o>this.width||l<0||s>this.height)return!1;const c=[];return this._forEachCell(o,s,a,l,this._queryCellCircle,c,{hitTest:!0,overlapMode:r,circle:{x:e,y:t,radius:n},seenUids:{box:{},circle:{}}},i),c.length>0}_queryCell(e,t,n,r,i,o,a,s){const{seenUids:l,hitTest:c,overlapMode:u}=a,h=this.boxCells[i];if(null!==h){const i=this.bboxes;for(const a of h)if(!l.box[a]){l.box[a]=!0;const h=4*a,f=this.boxKeys[a];if(e<=i[h+2]&&t<=i[h+3]&&n>=i[h+0]&&r>=i[h+1]&&(!s||s(f))&&(!c||!re(u,f.overlapMode))&&(o.push({key:f,x1:i[h],y1:i[h+1],x2:i[h+2],y2:i[h+3]}),c))return!0}}const f=this.circleCells[i];if(null!==f){const i=this.circles;for(const a of f)if(!l.circle[a]){l.circle[a]=!0;const h=3*a,f=this.circleKeys[a];if(this._circleAndRectCollide(i[h],i[h+1],i[h+2],e,t,n,r)&&(!s||s(f))&&(!c||!re(u,f.overlapMode))){const e=i[h],t=i[h+1],n=i[h+2];if(o.push({key:f,x1:e-n,y1:t-n,x2:e+n,y2:t+n}),c)return!0}}}return!1}_queryCellCircle(e,t,n,r,i,o,a,s){const{circle:l,seenUids:c,overlapMode:u}=a,h=this.boxCells[i];if(null!==h){const e=this.bboxes;for(const t of h)if(!c.box[t]){c.box[t]=!0;const n=4*t,r=this.boxKeys[t];if(this._circleAndRectCollide(l.x,l.y,l.radius,e[n+0],e[n+1],e[n+2],e[n+3])&&(!s||s(r))&&!re(u,r.overlapMode))return o.push(!0),!0}}const f=this.circleCells[i];if(null!==f){const e=this.circles;for(const t of f)if(!c.circle[t]){c.circle[t]=!0;const n=3*t,r=this.circleKeys[t];if(this._circlesCollide(e[n],e[n+1],e[n+2],l.x,l.y,l.radius)&&(!s||s(r))&&!re(u,r.overlapMode))return o.push(!0),!0}}}_forEachCell(e,t,n,r,i,o,a,s){const l=this._convertToXCellCoord(e),c=this._convertToYCellCoord(t),u=this._convertToXCellCoord(n),h=this._convertToYCellCoord(r);for(let f=l;f<=u;f++)for(let l=c;l<=h;l++)if(i.call(this,e,t,n,r,this.xCellCount*l+f,o,a,s))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,t,n,r,i,o){const a=r-e,s=i-t,l=n+o;return l*l>a*a+s*s}_circleAndRectCollide(e,t,n,r,i,o,a){const s=(o-r)/2,l=Math.abs(e-(r+s));if(l>s+n)return!1;const c=(a-i)/2,u=Math.abs(t-(i+c));if(u>c+n)return!1;if(l<=s||u<=c)return!0;const h=l-s,f=u-c;return h*h+f*f<=n*n}}function oe(t,n,r,i,o){const a=e.create();return n?(e.scale(a,a,[1/o,1/o,1]),r||e.rotateZ(a,a,i.angle)):e.multiply(a,i.labelPlaneMatrix,t),a}function ae(t,n,r,i,o){if(n){const n=e.clone(t);return e.scale(n,n,[o,o,1]),r||e.rotateZ(n,n,-i.angle),n}return i.glCoordMatrix}function se(t,n,r){let i;r?(i=[t.x,t.y,r(t.x,t.y),1],e.transformMat4(i,i,n)):(i=[t.x,t.y,0,1],ve(i,i,n));const o=i[3];return{point:new e.pointGeometry(i[0]/o,i[1]/o),signedDistanceFromCamera:o}}function le(e,t){return.5+e/t*.5}function ce(e,t){const n=e[0]/e[3],r=e[1]/e[3];return n>=-t[0]&&n<=t[0]&&r>=-t[1]&&r<=t[1]}function ue(t,n,r,i,o,a,s,l,c,u){const h=i?t.textSizeData:t.iconSizeData,f=e.evaluateSizeForZoom(h,r.transform.zoom),p=[256/r.width*2+1,256/r.height*2+1],d=i?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;d.clear();const m=t.lineVertexArray,g=i?t.text.placedSymbolArray:t.icon.placedSymbolArray,y=r.transform.width/r.transform.height;let v=!1;for(let i=0;i<g.length;i++){const b=g.get(i);if(b.hidden||b.writingMode===e.WritingMode.vertical&&!v){ye(b.numGlyphs,d);continue}let _;if(v=!1,u?(_=[b.anchorX,b.anchorY,u(b.anchorX,b.anchorY),1],e.transformMat4(_,_,n)):(_=[b.anchorX,b.anchorY,0,1],ve(_,_,n)),!ce(_,p)){ye(b.numGlyphs,d);continue}const x=le(r.transform.cameraToCenterDistance,_[3]),A=e.evaluateSizeForFeature(h,f,b),w=s?A/x:A*x,C=new e.pointGeometry(b.anchorX,b.anchorY),E=se(C,o,u).point,S={},T=pe(b,w,!1,l,n,o,a,t.glyphOffsetArray,m,d,E,C,S,y,c,u);v=T.useVertical,(T.notEnoughRoom||v||T.needsFlipping&&pe(b,w,!0,l,n,o,a,t.glyphOffsetArray,m,d,E,C,S,y,c,u).notEnoughRoom)&&ye(b.numGlyphs,d)}i?t.text.dynamicLayoutVertexBuffer.updateData(d):t.icon.dynamicLayoutVertexBuffer.updateData(d)}function he(e,t,n,r,i,o,a,s,l,c,u,h,f){const p=s.glyphStartIndex+s.numGlyphs,d=s.lineStartIndex,m=s.lineStartIndex+s.lineLength,g=t.getoffsetX(s.glyphStartIndex),y=t.getoffsetX(p-1),v=me(e*g,n,r,i,o,a,s.segment,d,m,l,c,u,h,f);if(!v)return null;const b=me(e*y,n,r,i,o,a,s.segment,d,m,l,c,u,h,f);return b?{first:v,last:b}:null}function fe(t,n,r,i){return t===e.WritingMode.horizontal&&Math.abs(r.y-n.y)>Math.abs(r.x-n.x)*i?{useVertical:!0}:(t===e.WritingMode.vertical?n.y<r.y:n.x>r.x)?{needsFlipping:!0}:null}function pe(t,n,r,i,o,a,s,l,c,u,h,f,p,d,m,g){const y=n/24,v=t.lineOffsetX*y,b=t.lineOffsetY*y;let _;if(t.numGlyphs>1){const e=t.glyphStartIndex+t.numGlyphs,n=t.lineStartIndex,o=t.lineStartIndex+t.lineLength,u=he(y,l,v,b,r,h,f,t,c,a,p,m,g);if(!u)return{notEnoughRoom:!0};const x=se(u.first.point,s,g).point,A=se(u.last.point,s,g).point;if(i&&!r){const e=fe(t.writingMode,x,A,d);if(e)return e}_=[u.first];for(let i=t.glyphStartIndex+1;i<e-1;i++)_.push(me(y*l.getoffsetX(i),v,b,r,h,f,t.segment,n,o,c,a,p,m,g));_.push(u.last)}else{if(i&&!r){const n=se(f,o,g).point,r=t.lineStartIndex+t.segment+1,i=new e.pointGeometry(c.getx(r),c.gety(r)),a=se(i,o,g),s=a.signedDistanceFromCamera>0?a.point:de(f,i,n,1,o,g),l=fe(t.writingMode,n,s,d);if(l)return l}const n=me(y*l.getoffsetX(t.glyphStartIndex),v,b,r,h,f,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,c,a,p,m,g);if(!n)return{notEnoughRoom:!0};_=[n]}for(const t of _)e.addDynamicAttributes(u,t.point,t.angle);return{}}function de(e,t,n,r,i,o){const a=se(e.add(e.sub(t)._unit()),i,o).point,s=n.sub(a);return n.add(s._mult(r/s.mag()))}function me(t,n,r,i,o,a,s,l,c,u,h,f,p,d){const m=i?t-n:t+n;let g=m>0?1:-1,y=0;i&&(g*=-1,y=Math.PI),g<0&&(y+=Math.PI);let v=g>0?l+s:l+s+1,b=o,_=o,x=0,A=0;const w=Math.abs(m),C=[];for(;x+A<=w;){if(v+=g,v<l||v>=c)return null;if(_=b,C.push(b),b=f[v],void 0===b){const t=new e.pointGeometry(u.getx(v),u.gety(v)),n=se(t,h,d);if(n.signedDistanceFromCamera>0)b=f[v]=n.point;else{const n=v-g;b=de(0===x?a:new e.pointGeometry(u.getx(n),u.gety(n)),t,_,w-x+1,h,d)}}x+=A,A=_.dist(b)}const E=(w-x)/A,S=b.sub(_),T=S.mult(E)._add(_);T._add(S._unit()._perp()._mult(r*g));const B=y+Math.atan2(b.y-_.y,b.x-_.x);return C.push(T),{point:T,angle:p?B:0,path:C}}const ge=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ye(e,t){for(let n=0;n<e;n++){const e=t.length;t.resize(e+4),t.float32.set(ge,3*e)}}function ve(e,t,n){const r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e[3]=n[3]*r+n[7]*i+n[15],e}const be=100;class _e{constructor(e,t=new ie(e.width+200,e.height+200,25),n=new ie(e.width+200,e.height+200,25)){this.transform=e,this.grid=t,this.ignoredGrid=n,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+be,this.screenBottomBoundary=e.height+be,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(e,t,n,r,i,o){const a=this.projectAndGetPerspectiveRatio(r,e.anchorPointX,e.anchorPointY,o),s=n*a.perspectiveRatio,l=e.x1*s+a.point.x,c=e.y1*s+a.point.y,u=e.x2*s+a.point.x,h=e.y2*s+a.point.y;return!this.isInsideGrid(l,c,u,h)||"always"!==t&&this.grid.hitTest(l,c,u,h,t,i)||a.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[l,c,u,h],offscreen:this.isOffscreen(l,c,u,h)}}placeCollisionCircles(t,n,r,i,o,a,s,l,c,u,h,f,p,d){const m=[],g=new e.pointGeometry(n.anchorX,n.anchorY),y=se(g,a,d),v=le(this.transform.cameraToCenterDistance,y.signedDistanceFromCamera),b=(u?o/v:o*v)/e.ONE_EM,_=se(g,s,d).point,x=he(b,i,n.lineOffsetX*b,n.lineOffsetY*b,!1,_,g,n,r,s,{},!1,d);let A=!1,w=!1,C=!0;if(x){const n=.5*f*v+p,r=new e.pointGeometry(-100,-100),i=new e.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),o=new ne,a=x.first,s=x.last;let u=[];for(let e=a.path.length-1;e>=1;e--)u.push(a.path[e]);for(let e=1;e<s.path.length;e++)u.push(s.path[e]);const g=2.5*n;if(l){const e=u.map((e=>se(e,l,d)));u=e.some((e=>e.signedDistanceFromCamera<=0))?[]:e.map((e=>e.point))}let y=[];if(u.length>0){const t=u[0].clone(),n=u[0].clone();for(let e=1;e<u.length;e++)t.x=Math.min(t.x,u[e].x),t.y=Math.min(t.y,u[e].y),n.x=Math.max(n.x,u[e].x),n.y=Math.max(n.y,u[e].y);y=t.x>=r.x&&n.x<=i.x&&t.y>=r.y&&n.y<=i.y?[u]:n.x<r.x||t.x>i.x||n.y<r.y||t.y>i.y?[]:e.clipLine([u],r.x,r.y,i.x,i.y)}for(const e of y){o.reset(e,.25*n);let r=0;r=o.length<=.5*n?1:Math.ceil(o.paddedLength/g)+1;for(let e=0;e<r;e++){const i=e/Math.max(r-1,1),a=o.lerp(i),s=a.x+be,l=a.y+be;m.push(s,l,n,0);const u=s-n,f=l-n,p=s+n,d=l+n;if(C=C&&this.isOffscreen(u,f,p,d),w=w||this.isInsideGrid(u,f,p,d),"always"!==t&&this.grid.hitTestCircle(s,l,n,t,h)&&(A=!0,!c))return{circles:[],offscreen:!1,collisionDetected:A}}}}return{circles:!c&&A||!w||v<this.perspectiveRatioCutoff?[]:m,offscreen:C,collisionDetected:A}}queryRenderedSymbols(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const n=[];let r=1/0,i=1/0,o=-1/0,a=-1/0;for(const s of t){const t=new e.pointGeometry(s.x+be,s.y+be);r=Math.min(r,t.x),i=Math.min(i,t.y),o=Math.max(o,t.x),a=Math.max(a,t.y),n.push(t)}const s=this.grid.query(r,i,o,a).concat(this.ignoredGrid.query(r,i,o,a)),l={},c={};for(const t of s){const r=t.key;if(void 0===l[r.bucketInstanceId]&&(l[r.bucketInstanceId]={}),l[r.bucketInstanceId][r.featureIndex])continue;const i=[new e.pointGeometry(t.x1,t.y1),new e.pointGeometry(t.x2,t.y1),new e.pointGeometry(t.x2,t.y2),new e.pointGeometry(t.x1,t.y2)];e.polygonIntersectsPolygon(n,i)&&(l[r.bucketInstanceId][r.featureIndex]=!0,void 0===c[r.bucketInstanceId]&&(c[r.bucketInstanceId]=[]),c[r.bucketInstanceId].push(r.featureIndex))}return c}insertCollisionBox(e,t,n,r,i,o){(n?this.ignoredGrid:this.grid).insert({bucketInstanceId:r,featureIndex:i,collisionGroupID:o,overlapMode:t},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,t,n,r,i,o){const a=n?this.ignoredGrid:this.grid,s={bucketInstanceId:r,featureIndex:i,collisionGroupID:o,overlapMode:t};for(let t=0;t<e.length;t+=4)a.insertCircle(s,e[t],e[t+1],e[t+2])}projectAndGetPerspectiveRatio(t,n,r,i){let o;return i?(o=[n,r,i(n,r),1],e.transformMat4(o,o,t)):(o=[n,r,0,1],ve(o,o,t)),{point:new e.pointGeometry((o[0]/o[3]+1)/2*this.transform.width+be,(-o[1]/o[3]+1)/2*this.transform.height+be),perspectiveRatio:.5+this.transform.cameraToCenterDistance/o[3]*.5}}isOffscreen(e,t,n,r){return n<be||e>=this.screenRightBoundary||r<be||t>this.screenBottomBoundary}isInsideGrid(e,t,n,r){return n>=0&&e<this.gridRightBoundary&&r>=0&&t<this.gridBottomBoundary}getViewportMatrix(){const t=e.identity([]);return e.translate(t,t,[-100,-100,0]),t}}function xe(t,n,r){return n*(e.EXTENT/(t.tileSize*Math.pow(2,r-t.tileID.overscaledZ)))}class Ae{constructor(e,t,n,r){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):r&&n?1:0,this.placed=n}isHidden(){return 0===this.opacity&&!this.placed}}class we{constructor(e,t,n,r,i){this.text=new Ae(e?e.text:null,t,n,i),this.icon=new Ae(e?e.icon:null,t,r,i)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ce{constructor(e,t,n){this.text=e,this.icon=t,this.skipFade=n}}class Ee{constructor(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]}}class Se{constructor(e,t,n,r,i){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=i}}class Te{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:e=>e.collisionGroupID===t}}return this.collisionGroups[e]}}function Be(t,n,r,i,o){const{horizontalAlign:a,verticalAlign:s}=e.getAnchorAlignment(t),l=-(a-.5)*n,c=-(s-.5)*r,u=e.evaluateVariableOffset(t,i);return new e.pointGeometry(l+u[0]*o,c+u[1]*o)}function ke(t,n,r,i,o,a){const{x1:s,x2:l,y1:c,y2:u,anchorPointX:h,anchorPointY:f}=t,p=new e.pointGeometry(n,r);return i&&p._rotate(o?a:-a),{x1:s+p.x,y1:c+p.y,x2:l+p.x,y2:u+p.y,anchorPointX:h,anchorPointY:f}}class Me{constructor(e,t,n,r,i){this.transform=e.clone(),this.terrain=t,this.collisionIndex=new _e(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=n,this.retainedQueryData={},this.collisionGroups=new Te(r),this.collisionCircleArrays={},this.prevPlacement=i,i&&(i.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(t,n,r,i){const o=r.getBucket(n),a=r.latestFeatureIndex;if(!o||!a||n.id!==o.layerIds[0])return;const s=r.collisionBoxArray,l=o.layers[0].layout,c=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),u=r.tileSize/e.EXTENT,h=this.transform.calculatePosMatrix(r.tileID.toUnwrapped()),f="map"===l.get("text-pitch-alignment"),p="map"===l.get("text-rotation-alignment"),d=xe(r,1,this.transform.zoom),m=oe(h,f,p,this.transform,d);let g=null;if(f){const t=ae(h,f,p,this.transform,d);g=e.multiply([],this.transform.labelPlaneMatrix,t)}this.retainedQueryData[o.bucketInstanceId]=new Se(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,r.tileID);const y={bucket:o,layout:l,posMatrix:h,textLabelPlaneMatrix:m,labelToScreenMatrix:g,scale:c,textPixelRatio:u,holdingForFade:r.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(i)for(const e of o.sortKeyRanges){const{sortKey:n,symbolInstanceStart:r,symbolInstanceEnd:i}=e;t.push({sortKey:n,symbolInstanceStart:r,symbolInstanceEnd:i,parameters:y})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:y})}attemptAnchorPlacement(e,t,n,r,i,o,a,s,l,c,u,h,f,p,d,m){const g=[h.textOffset0,h.textOffset1],y=Be(e,n,r,g,i),v=this.collisionIndex.placeCollisionBox(ke(t,y.x,y.y,o,a,this.transform.angle),u,s,l,c.predicate,m);if((!d||0!==this.collisionIndex.placeCollisionBox(ke(d,y.x,y.y,o,a,this.transform.angle),u,s,l,c.predicate,m).box.length)&&v.box.length>0){let t;if(this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(t=this.prevPlacement.variableOffsets[h.crossTileID].anchor),0===h.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[h.crossTileID]={textOffset:g,width:n,height:r,anchor:e,textBoxScale:i,prevAnchor:t},this.markUsedJustification(f,e,h,p),f.allowVerticalPlacement&&(this.markUsedOrientation(f,p,h),this.placedOrientations[h.crossTileID]=p),{shift:y,placedGlyphBoxes:v}}}placeLayerBucketPart(t,n,r){const{bucket:i,layout:o,posMatrix:a,textLabelPlaneMatrix:s,labelToScreenMatrix:l,textPixelRatio:c,holdingForFade:u,collisionBoxArray:h,partiallyEvaluatedTextSize:f,collisionGroup:p}=t.parameters,d=o.get("text-optional"),m=o.get("icon-optional"),g=e.getOverlapMode(o,"text-overlap","text-allow-overlap"),y="always"===g,v=e.getOverlapMode(o,"icon-overlap","icon-allow-overlap"),b="always"===v,_="map"===o.get("text-rotation-alignment"),x="map"===o.get("text-pitch-alignment"),A="none"!==o.get("icon-text-fit"),w="viewport-y"===o.get("symbol-z-order"),C=y&&(b||!i.hasIconData()||m),E=b&&(y||!i.hasTextData()||d);!i.collisionArrays&&h&&i.deserializeCollisionBoxes(h);const S=(t,h)=>{if(n[t.crossTileID])return;if(u)return void(this.placements[t.crossTileID]=new Ce(!1,!1,!1));let b=!1,w=!1,S=!0,T=null,B={box:null,offscreen:null},k={box:null,offscreen:null},M=null,P=null,I=null,O=0,D=0,z=0;h.textFeatureIndex?O=h.textFeatureIndex:t.useRuntimeCollisionCircles&&(O=t.featureIndex),h.verticalTextFeatureIndex&&(D=h.verticalTextFeatureIndex);const L=this.retainedQueryData[i.bucketInstanceId].tileID,R=this.terrain?(e,t)=>this.terrain.getElevation(L,e,t):null;for(const e of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const t=h[e];t&&(t.elevation=R?R(t.anchorPointX,t.anchorPointY):0)}const F=h.textBox;if(F){const n=n=>{let r=e.WritingMode.horizontal;if(i.allowVerticalPlacement&&!n&&this.prevPlacement){const e=this.prevPlacement.placedOrientations[t.crossTileID];e&&(this.placedOrientations[t.crossTileID]=e,r=e,this.markUsedOrientation(i,r,t))}return r},r=(n,r)=>{if(i.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&h.verticalTextBox){for(const t of i.writingModes)if(t===e.WritingMode.vertical?(B=r(),k=B):B=n(),B&&B.box&&B.box.length)break}else B=n()};if(o.get("text-variable-anchor")){let s=o.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[t.crossTileID]){const e=this.prevPlacement.variableOffsets[t.crossTileID];s.indexOf(e.anchor)>0&&(s=s.filter((t=>t!==e.anchor)),s.unshift(e.anchor))}const l=(e,n,r)=>{const o=e.x2-e.x1,l=e.y2-e.y1,u=t.textBoxScale,h=A&&"never"===v?n:null;let f={box:[],offscreen:!1};const d="never"!==g?2*s.length:s.length;for(let n=0;n<d;++n){const d=this.attemptAnchorPlacement(s[n%s.length],e,o,l,u,_,x,c,a,p,n>=s.length?g:"never",t,i,r,h,R);if(d&&(f=d.placedGlyphBoxes,f&&f.box&&f.box.length)){b=!0,T=d.shift;break}}return f};r((()=>l(F,h.iconBox,e.WritingMode.horizontal)),(()=>{const n=h.verticalTextBox;return i.allowVerticalPlacement&&!(B&&B.box&&B.box.length)&&t.numVerticalGlyphVertices>0&&n?l(n,h.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}})),B&&(b=B.box,S=B.offscreen);const u=n(B&&B.box);if(!b&&this.prevPlacement){const e=this.prevPlacement.variableOffsets[t.crossTileID];e&&(this.variableOffsets[t.crossTileID]=e,this.markUsedJustification(i,e.anchor,t,u))}}else{const o=(e,n)=>{const r=this.collisionIndex.placeCollisionBox(e,g,c,a,p.predicate,R);return r&&r.box&&r.box.length&&(this.markUsedOrientation(i,n,t),this.placedOrientations[t.crossTileID]=n),r};r((()=>o(F,e.WritingMode.horizontal)),(()=>{const n=h.verticalTextBox;return i.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&n?o(n,e.WritingMode.vertical):{box:null,offscreen:null}})),n(B&&B.box&&B.box.length)}}if(M=B,b=M&&M.box&&M.box.length>0,S=M&&M.offscreen,t.useRuntimeCollisionCircles){const n=i.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex),c=e.evaluateSizeForFeature(i.textSizeData,f,n),u=o.get("text-padding");P=this.collisionIndex.placeCollisionCircles(g,n,i.lineVertexArray,i.glyphOffsetArray,c,a,s,l,r,x,p.predicate,t.collisionCircleDiameter,u,R),P.circles.length&&P.collisionDetected&&!r&&e.warnOnce("Collisions detected, but collision boxes are not shown"),b=y||P.circles.length>0&&!P.collisionDetected,S=S&&P.offscreen}if(h.iconFeatureIndex&&(z=h.iconFeatureIndex),h.iconBox){const e=e=>{const t=A&&T?ke(e,T.x,T.y,_,x,this.transform.angle):e;return this.collisionIndex.placeCollisionBox(t,v,c,a,p.predicate,R)};k&&k.box&&k.box.length&&h.verticalIconBox?(I=e(h.verticalIconBox),w=I.box.length>0):(I=e(h.iconBox),w=I.box.length>0),S=S&&I.offscreen}const U=d||0===t.numHorizontalGlyphVertices&&0===t.numVerticalGlyphVertices,N=m||0===t.numIconVertices;if(U||N?N?U||(w=w&&b):b=w&&b:w=b=w&&b,b&&M&&M.box&&this.collisionIndex.insertCollisionBox(M.box,g,o.get("text-ignore-placement"),i.bucketInstanceId,k&&k.box&&D?D:O,p.ID),w&&I&&this.collisionIndex.insertCollisionBox(I.box,v,o.get("icon-ignore-placement"),i.bucketInstanceId,z,p.ID),P&&(b&&this.collisionIndex.insertCollisionCircles(P.circles,g,o.get("text-ignore-placement"),i.bucketInstanceId,O,p.ID),r)){const e=i.bucketInstanceId;let t=this.collisionCircleArrays[e];void 0===t&&(t=this.collisionCircleArrays[e]=new Ee);for(let e=0;e<P.circles.length;e+=4)t.circles.push(P.circles[e+0]),t.circles.push(P.circles[e+1]),t.circles.push(P.circles[e+2]),t.circles.push(P.collisionDetected?1:0)}if(0===t.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===i.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[t.crossTileID]=new Ce(b||C,w||E,S||i.justReloaded),n[t.crossTileID]=!0};if(w){if(0!==t.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");const e=i.getSortedSymbolIndexes(this.transform.angle);for(let t=e.length-1;t>=0;--t){const n=e[t];S(i.symbolInstances.get(n),i.collisionArrays[n])}}else for(let e=t.symbolInstanceStart;e<t.symbolInstanceEnd;e++)S(i.symbolInstances.get(e),i.collisionArrays[e]);if(r&&i.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[i.bucketInstanceId];e.invert(t.invProjMatrix,a),t.viewportMatrix=this.collisionIndex.getViewportMatrix()}i.justReloaded=!1}markUsedJustification(t,n,r,i){let o;o=i===e.WritingMode.vertical?r.verticalPlacedTextSymbolIndex:{left:r.leftJustifiedTextSymbolIndex,center:r.centerJustifiedTextSymbolIndex,right:r.rightJustifiedTextSymbolIndex}[e.getAnchorJustification(n)];const a=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex,r.verticalPlacedTextSymbolIndex];for(const e of a)e>=0&&(t.text.placedSymbolArray.get(e).crossTileID=o>=0&&e!==o?0:r.crossTileID)}markUsedOrientation(t,n,r){const i=n===e.WritingMode.horizontal||n===e.WritingMode.horizontalOnly?n:0,o=n===e.WritingMode.vertical?n:0,a=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex];for(const e of a)t.text.placedSymbolArray.get(e).placedOrientation=i;r.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).placedOrientation=o)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const t=this.prevPlacement;let n=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;const r=t?t.symbolFadeChange(e):1,i=t?t.opacities:{},o=t?t.variableOffsets:{},a=t?t.placedOrientations:{};for(const e in this.placements){const t=this.placements[e],o=i[e];o?(this.opacities[e]=new we(o,r,t.text,t.icon),n=n||t.text!==o.text.placed||t.icon!==o.icon.placed):(this.opacities[e]=new we(null,r,t.text,t.icon,t.skipFade),n=n||t.text||t.icon)}for(const e in i){const t=i[e];if(!this.opacities[e]){const i=new we(t,r,!1,!1);i.isHidden()||(this.opacities[e]=i,n=n||t.text.placed||t.icon.placed)}}for(const e in o)this.variableOffsets[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.variableOffsets[e]=o[e]);for(const e in a)this.placedOrientations[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.placedOrientations[e]=a[e]);if(t&&void 0===t.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");n?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}updateLayerOpacities(e,t){const n={};for(const r of t){const t=r.getBucket(e);t&&r.latestFeatureIndex&&e.id===t.layerIds[0]&&this.updateBucketOpacities(t,n,r.collisionBoxArray)}}updateBucketOpacities(t,n,r){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const i=t.layers[0].layout,o=new we(null,0,!1,!1,!0),a=i.get("text-allow-overlap"),s=i.get("icon-allow-overlap"),l=i.get("text-variable-anchor"),c="map"===i.get("text-rotation-alignment"),u="map"===i.get("text-pitch-alignment"),h="none"!==i.get("icon-text-fit"),f=new we(null,0,a&&(s||!t.hasIconData()||i.get("icon-optional")),s&&(a||!t.hasTextData()||i.get("text-optional")),!0);!t.collisionArrays&&r&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(r);const p=(e,t,n)=>{for(let r=0;r<t/4;r++)e.opacityVertexArray.emplaceBack(n)};for(let r=0;r<t.symbolInstances.length;r++){const i=t.symbolInstances.get(r),{numHorizontalGlyphVertices:a,numVerticalGlyphVertices:s,crossTileID:d}=i;let m=this.opacities[d];n[d]?m=o:m||(m=f,this.opacities[d]=m),n[d]=!0;const g=i.numIconVertices>0,y=this.placedOrientations[i.crossTileID],v=y===e.WritingMode.vertical,b=y===e.WritingMode.horizontal||y===e.WritingMode.horizontalOnly;if(a>0||s>0){const e=Ue(m.text);p(t.text,a,v?Ne:e),p(t.text,s,b?Ne:e);const n=m.text.isHidden();[i.rightJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.leftJustifiedTextSymbolIndex].forEach((e=>{e>=0&&(t.text.placedSymbolArray.get(e).hidden=n||v?1:0)})),i.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(i.verticalPlacedTextSymbolIndex).hidden=n||b?1:0);const r=this.variableOffsets[i.crossTileID];r&&this.markUsedJustification(t,r.anchor,i,y);const o=this.placedOrientations[i.crossTileID];o&&(this.markUsedJustification(t,"left",i,o),this.markUsedOrientation(t,o,i))}if(g){const e=Ue(m.icon),n=!(h&&i.verticalPlacedIconSymbolIndex&&v);i.placedIconSymbolIndex>=0&&(p(t.icon,i.numIconVertices,n?e:Ne),t.icon.placedSymbolArray.get(i.placedIconSymbolIndex).hidden=m.icon.isHidden()),i.verticalPlacedIconSymbolIndex>=0&&(p(t.icon,i.numVerticalIconVertices,n?Ne:e),t.icon.placedSymbolArray.get(i.verticalPlacedIconSymbolIndex).hidden=m.icon.isHidden())}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const n=t.collisionArrays[r];if(n){let r=new e.pointGeometry(0,0);if(n.textBox||n.verticalTextBox){let e=!0;if(l){const t=this.variableOffsets[d];t?(r=Be(t.anchor,t.width,t.height,t.textOffset,t.textBoxScale),c&&r._rotate(u?this.transform.angle:-this.transform.angle)):e=!1}n.textBox&&Pe(t.textCollisionBox.collisionVertexArray,m.text.placed,!e||v,r.x,r.y),n.verticalTextBox&&Pe(t.textCollisionBox.collisionVertexArray,m.text.placed,!e||b,r.x,r.y)}const i=Boolean(!b&&n.verticalIconBox);n.iconBox&&Pe(t.iconCollisionBox.collisionVertexArray,m.icon.placed,i,h?r.x:0,h?r.y:0),n.verticalIconBox&&Pe(t.iconCollisionBox.collisionVertexArray,m.icon.placed,!i,h?r.x:0,h?r.y:0)}}}if(t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.text.opacityVertexArray.length!==t.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${t.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${t.text.layoutVertexArray.length}) / 4`);if(t.icon.opacityVertexArray.length!==t.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${t.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${t.icon.layoutVertexArray.length}) / 4`);if(t.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=e.invProjMatrix,t.placementViewportMatrix=e.viewportMatrix,t.collisionCircleArray=e.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}symbolFadeChange(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,t){const n=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*n>e}setStale(){this.stale=!0}}function Pe(e,t,n,r,i){e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0)}const Ie=Math.pow(2,25),Oe=Math.pow(2,24),De=Math.pow(2,17),ze=Math.pow(2,16),Le=Math.pow(2,9),Re=Math.pow(2,8),Fe=Math.pow(2,1);function Ue(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;const t=e.placed?1:0,n=Math.floor(127*e.opacity);return n*Ie+t*Oe+n*De+t*ze+n*Le+t*Re+n*Fe+t}const Ne=0;class je{constructor(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&!e.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,t,n,r,i){const o=this._bucketParts;for(;this._currentTileIndex<e.length;)if(t.getBucketParts(o,r,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort(((e,t)=>e.sortKey-t.sortKey)));this._currentPartIndex<o.length;)if(t.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,n),this._currentPartIndex++,i())return!0;return!1}}class Ve{constructor(e,t,n,r,i,o,a,s){this.placement=new Me(e,t,o,a,s),this._currentPlacementIndex=n.length-1,this._forceFullPlacement=r,this._showCollisionBoxes=i,this._done=!1}isDone(){return this._done}continuePlacement(t,n,r){const i=e.exported.now(),o=()=>{const t=e.exported.now()-i;return!this._forceFullPlacement&&t>2};for(;this._currentPlacementIndex>=0;){const e=n[t[this._currentPlacementIndex]],i=this.placement.collisionIndex.transform.zoom;if("symbol"===e.type&&(!e.minzoom||e.minzoom<=i)&&(!e.maxzoom||e.maxzoom>i)){if(this._inProgressLayer||(this._inProgressLayer=new je(e)),this._inProgressLayer.continuePlacement(r[e.source],this.placement,this._showCollisionBoxes,e,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const Ge=512/e.EXTENT/2;class qe{constructor(e,t,n){this.tileID=e,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(let n=0;n<t.length;n++){const r=t.get(n),i=r.key;this.indexedSymbolInstances[i]||(this.indexedSymbolInstances[i]=[]),this.indexedSymbolInstances[i].push({crossTileID:r.crossTileID,coord:this.getScaledCoordinates(r,e)})}}getScaledCoordinates(t,n){const r=Ge/Math.pow(2,n.canonical.z-this.tileID.canonical.z);return{x:Math.floor((n.canonical.x*e.EXTENT+t.anchorX)*r),y:Math.floor((n.canonical.y*e.EXTENT+t.anchorY)*r)}}findMatches(e,t,n){const r=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z);for(let i=0;i<e.length;i++){const o=e.get(i);if(o.crossTileID)continue;const a=this.indexedSymbolInstances[o.key];if(!a)continue;const s=this.getScaledCoordinates(o,t);for(const e of a)if(Math.abs(e.coord.x-s.x)<=r&&Math.abs(e.coord.y-s.y)<=r&&!n[e.crossTileID]){n[e.crossTileID]=!0,o.crossTileID=e.crossTileID;break}}}}class We{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class He{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const t=Math.round((e-this.lng)/360);if(0!==t)for(const e in this.indexes){const n=this.indexes[e],r={};for(const e in n){const i=n[e];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+t),r[i.tileID.key]=i}this.indexes[e]=r}this.lng=e}addBucket(e,t,n){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let e=0;e<t.symbolInstances.length;e++)t.symbolInstances.get(e).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const r=this.usedCrossTileIDs[e.overscaledZ];for(const n in this.indexes){const i=this.indexes[n];if(Number(n)>e.overscaledZ)for(const n in i){const o=i[n];o.tileID.isChildOf(e)&&o.findMatches(t.symbolInstances,e,r)}else{const o=i[e.scaledTo(Number(n)).key];o&&o.findMatches(t.symbolInstances,e,r)}}for(let e=0;e<t.symbolInstances.length;e++){const i=t.symbolInstances.get(e);i.crossTileID||(i.crossTileID=n.generate(),r[i.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new qe(e,t.symbolInstances,t.bucketInstanceId),!0}removeBucketCrossTileIDs(e,t){for(const n in t.indexedSymbolInstances)for(const r of t.indexedSymbolInstances[n])delete this.usedCrossTileIDs[e][r.crossTileID]}removeStaleBuckets(e){let t=!1;for(const n in this.indexes){const r=this.indexes[n];for(const i in r)e[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],t=!0)}return t}}class $e{constructor(){this.layerIndexes={},this.crossTileIDs=new We,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,t,n){let r=this.layerIndexes[e.id];void 0===r&&(r=this.layerIndexes[e.id]=new He);let i=!1;const o={};r.handleWrapJump(n);for(const n of t){const t=n.getBucket(e);t&&e.id===t.layerIds[0]&&(t.bucketInstanceId||(t.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(n.tileID,t,this.crossTileIDs)&&(i=!0),o[t.bucketInstanceId]=!0)}return r.removeStaleBuckets(o)&&(i=!0),i}pruneUnusedLayers(e){const t={};e.forEach((e=>{t[e]=!0}));for(const e in this.layerIndexes)t[e]||delete this.layerIndexes[e]}}var Xe=e.createLayout([{name:"a_pos",type:"Int16",components:2}]);class Ze extends e.Evented{constructor(e){super(),this.sourceCache=e,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=e._cache.max,e.usedForTerrain=!0,e.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const e in this._tiles){const t=this._tiles[e];t.textures.forEach((e=>e.destroy())),t.textures=[]}}update(t,n){this.sourceCache.update(t,n),this._renderableTilesKeys=[];for(const r of t.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:n}))this._renderableTilesKeys.push(r.key),this._tiles[r.key]||(r.posMatrix=new Float64Array(16),e.ortho(r.posMatrix,0,e.EXTENT,0,e.EXTENT,0,1),this._tiles[r.key]=new z(r,this.tileSize))}removeOutdated(e){const t={};this.renderHistory=this.renderHistory.filter(((e,t)=>this.renderHistory.indexOf(e)===t)).slice(0,this.renderHistorySize);for(const e of this._renderableTilesKeys)t[e]=!0;for(const e of this.renderHistory)t[e]=!0;for(const n in this._tiles)t[n]||(this._tiles[n].clearTextures(e),delete this._tiles[n])}getRenderableTiles(){return this._renderableTilesKeys.map((e=>this.getTileByID(e)))}getTileByID(e){return this._tiles[e]}getTerrainCoords(t){const n={};for(const r of this._renderableTilesKeys){const i=this._tiles[r].tileID;if(i.canonical.equals(t.canonical)){const i=t.clone();i.posMatrix=new Float64Array(16),e.ortho(i.posMatrix,0,e.EXTENT,0,e.EXTENT,0,1),n[r]=i}else if(i.canonical.isChildOf(t.canonical)){const o=t.clone();o.posMatrix=new Float64Array(16);const a=i.canonical.z-t.canonical.z,s=i.canonical.x-(i.canonical.x>>a<<a),l=i.canonical.y-(i.canonical.y>>a<<a),c=e.EXTENT>>a;e.ortho(o.posMatrix,0,c,0,c,0,1),e.translate(o.posMatrix,o.posMatrix,[-s*c,-l*c,0]),n[r]=o}else if(t.canonical.isChildOf(i.canonical)){const o=t.clone();o.posMatrix=new Float64Array(16);const a=t.canonical.z-i.canonical.z,s=t.canonical.x-(t.canonical.x>>a<<a),l=t.canonical.y-(t.canonical.y>>a<<a),c=e.EXTENT>>a;e.ortho(o.posMatrix,0,e.EXTENT,0,e.EXTENT,0,1),e.translate(o.posMatrix,o.posMatrix,[s*c,l*c,0]),e.scale(o.posMatrix,o.posMatrix,[1/2**a,1/2**a,0]),n[r]=o}}return n}getSourceTile(e,t){const n=this.sourceCache._source;let r=e.overscaledZ-this.deltaZoom;if(r>n.maxzoom&&(r=n.maxzoom),r<n.minzoom)return null;this._sourceTileCache[e.key]||(this._sourceTileCache[e.key]=e.scaledTo(r).key);let i=this.sourceCache.getTileByID(this._sourceTileCache[e.key]);if((!i||!i.dem)&&t)for(;r>=n.minzoom&&(!i||!i.dem);)i=this.sourceCache.getTileByID(e.scaledTo(r--).key);return i}tilesAfterTime(e=Date.now()){return Object.values(this._tiles).filter((t=>t.timeLoaded>=e))}}class Ye{constructor(e,t,n){this.style=e,this.sourceCache=new Ze(t),this.options=n,this.exaggeration="number"==typeof n.exaggeration?n.exaggeration:1,this.elevationOffset="number"==typeof n.elevationOffset?n.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(t,n,r,i=e.EXTENT){if(!(n>=0&&n<i&&r>=0&&r<i))return this.elevationOffset;let o=0;const a=this.getTerrainData(t);if(a.tile&&a.tile.dem){const t=e.transformMat4$1([],[n/i*e.EXTENT,r/i*e.EXTENT],a.u_terrain_matrix),s=[t[0]*a.tile.dem.dim,t[1]*a.tile.dem.dim],l=[Math.floor(s[0]),Math.floor(s[1])],c=a.tile.dem.get(l[0],l[1]),u=a.tile.dem.get(l[0],l[1]+1),h=a.tile.dem.get(l[0]+1,l[1]),f=a.tile.dem.get(l[0]+1,l[1]+1);o=e.number(e.number(c,u,s[0]-l[0]),e.number(h,f,s[0]-l[0]),s[1]-l[1])}return o}rememberForRerender(e,t){for(const n in this.sourceCache._tiles){const r=this.sourceCache._tiles[n];(r.tileID.equals(t)||r.tileID.isChildOf(t))&&(e===this.sourceCache.sourceCache.id&&(r.timeLoaded=Date.now()),this._rerender[e]=this._rerender[e]||{},this._rerender[e][r.tileID.key]=!0)}}needsRerender(e,t){return this._rerender[e]&&this._rerender[e][t.key]}clearRerenderCache(){this._rerender={}}getElevation(t,n,r,i=e.EXTENT){return(this.getDEMElevation(t,n,r,i)+this.elevationOffset)*this.exaggeration}getTerrainData(t){if(!this._emptyDemTexture){const t=this.style.map.painter.context,n=new e.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new l(t,n,t.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new l(t,new e.RGBAImage({width:1,height:1}),t.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=e.identity([])}const n=this.sourceCache.getSourceTile(t,!0);if(n&&n.dem&&(!n.demTexture||n.needsTerrainPrepare)){const e=this.style.map.painter.context;n.demTexture=this.style.map.painter.getTileTexture(n.dem.stride),n.demTexture?n.demTexture.update(n.dem.getPixels(),{premultiply:!1}):n.demTexture=new l(e,n.dem.getPixels(),e.gl.RGBA,{premultiply:!1}),n.demTexture.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),n.needsTerrainPrepare=!1}const r=n&&n+n.tileID.key+t.key;if(r&&!this._demMatrixCache[r]){const r=this.sourceCache.sourceCache._source.maxzoom;let i=t.canonical.z-n.tileID.canonical.z;t.overscaledZ>t.canonical.z&&(t.canonical.z>=r?i=t.canonical.z-r:e.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const o=t.canonical.x-(t.canonical.x>>i<<i),a=t.canonical.y-(t.canonical.y>>i<<i),s=e.fromScaling(new Float64Array(16),[1/(e.EXTENT<<i),1/(e.EXTENT<<i),0]);e.translate(s,s,[o*e.EXTENT,a*e.EXTENT,0]),this._demMatrixCache[t.key]={matrix:s,coord:t}}return{u_depth:2,u_terrain:3,u_terrain_dim:n&&n.dem&&n.dem.dim||1,u_terrain_matrix:r?this._demMatrixCache[t.key].matrix:this._emptyDemMatrix,u_terrain_unpack:n&&n.dem&&n.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(n&&n.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:n}}getRTTFramebuffer(){const e=this.style.map.painter;if(!this._rttFramebuffer){const t=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=e.context.createFramebuffer(t,t,!0),this._rttFramebuffer.depthAttachment.set(e.context.createRenderbuffer(e.context.gl.DEPTH_COMPONENT16,t,t))}return this._rttFramebuffer}getFramebuffer(e){const t=this.style.map.painter,n=t.width/devicePixelRatio,r=t.height/devicePixelRatio;return!this._fbo||this._fbo.width===n&&this._fbo.height===r||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new l(t.context,{width:n,height:r,data:null},t.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(t.context.gl.NEAREST,t.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new l(t.context,{width:n,height:r,data:null},t.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(t.context.gl.NEAREST,t.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=t.context.createFramebuffer(n,r,!0),this._fbo.depthAttachment.set(t.context.createRenderbuffer(t.context.gl.DEPTH_COMPONENT16,n,r))),this._fbo.colorAttachment.set("coords"===e?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const t=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const n=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let e=0,t=0;e<this._coordsTextureSize;e++)for(let r=0;r<this._coordsTextureSize;r++,t+=4)n[t+0]=255&r,n[t+1]=255&e,n[t+2]=r>>8<<4|e>>8,n[t+3]=0;const r=new e.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(n.buffer)),i=new l(t,r,t.gl.RGBA,{premultiply:!1});return i.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),this._coordsTexture=i,i}pointCoordinate(t){const n=new Uint8Array(4),r=this.style.map.painter,i=r.context,o=i.gl;i.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),o.readPixels(t.x,r.height/devicePixelRatio-t.y-1,1,1,o.RGBA,o.UNSIGNED_BYTE,n),i.bindFramebuffer.set(null);const a=n[0]+(n[2]>>4<<8),s=n[1]+((15&n[2])<<8),l=this.coordsIndex[255-n[3]],c=l&&this.sourceCache.getTileByID(l);if(!c)return null;const u=this._coordsTextureSize,h=(1<<c.tileID.canonical.z)*u;return new e.MercatorCoordinate((c.tileID.canonical.x*u+a)/h,(c.tileID.canonical.y*u+s)/h,this.getElevation(c.tileID,a,s,u))}getTerrainMesh(){if(this._mesh)return this._mesh;const t=this.style.map.painter.context,n=new e.PosArray,r=new e.TriangleIndexArray,i=this.meshSize,o=e.EXTENT/i,a=i*i;for(let e=0;e<=i;e++)for(let t=0;t<=i;t++)n.emplaceBack(t*o,e*o);for(let e=0;e<a;e+=i+1)for(let t=0;t<i;t++)r.emplaceBack(t+e,i+t+e+1,i+t+e+2),r.emplaceBack(t+e,i+t+e+2,t+e+1);return this._mesh={indexBuffer:t.createIndexBuffer(r),vertexBuffer:t.createVertexBuffer(n,Xe.members),segments:e.SegmentVector.simpleSegment(0,0,n.length,r.length)},this._mesh}getMinMaxElevation(e){const t=this.getTerrainData(e).tile,n={minElevation:null,maxElevation:null};return t&&t.dem&&(n.minElevation=(t.dem.min+this.elevationOffset)*this.exaggeration,n.maxElevation=(t.dem.max+this.elevationOffset)*this.exaggeration),n}}const Ke=(t,n)=>e.emitValidationErrors(t,n&&n.filter((e=>"source.canvas"!==e.identifier))),Je=e.pick(X,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Qe=e.pick(X,["setCenter","setZoom","setBearing","setPitch"]),et=function(){const t={},n=e.spec.$version;for(const r in e.spec.$root){const i=e.spec.$root[r];if(i.required){let e=null;e="version"===r?n:"array"===i.type?[]:{},null!=e&&(t[r]=e)}}return t}();class tt extends e.Evented{constructor(t,n={}){super(),this.map=t,this.dispatcher=new b(W(),this),this.imageManager=new u,this.imageManager.setEventedParent(this),this.glyphManager=new d(t._requestManager,n.localIdeographFontFamily),this.lineAtlas=new v(256,512),this.crossTileSymbolIndex=new $e,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());const r=this;this._rtlTextPluginCallback=tt.registerForPluginStateChange((t=>{r.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},((t,n)=>{if(e.triggerPluginCompletionEvent(t),n&&n.every((e=>e)))for(const e in r.sourceCaches)r.sourceCaches[e].reload()}))})),this.on("data",(e=>{if("source"!==e.dataType||"metadata"!==e.sourceDataType)return;const t=this.sourceCaches[e.sourceId];if(!t)return;const n=t.getSource();if(n&&n.vectorLayerIds)for(const e in this._layers){const t=this._layers[e];t.source===n.id&&this._validateLayer(t)}}))}loadURL(t,n={}){this.fire(new e.Event("dataloading",{dataType:"style"}));const r="boolean"!=typeof n.validate||n.validate,i=this.map._requestManager.transformRequest(t,e.ResourceType.Style);this._request=e.getJSON(i,((t,n)=>{this._request=null,t?this.fire(new e.ErrorEvent(t)):n&&this._load(n,r)}))}loadJSON(t,n={}){this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.exported.frame((()=>{this._request=null,this._load(t,!1!==n.validate)}))}loadEmpty(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(et,!1)}_load(t,n){if(n&&Ke(this,e.validateStyle(t)))return;this._loaded=!0,this.stylesheet=t;for(const e in t.sources)this.addSource(e,t.sources[e],{validate:!1});t.sprite?this._loadSprite(t.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(t.glyphs);const r=$(this.stylesheet.layers);this._order=r.map((e=>e.id)),this._layers={},this._serializedLayers={};for(let t of r)t=e.createStyleLayer(t),t.setEventedParent(this,{layer:{id:t.id}}),this._layers[t.id]=t,this._serializedLayers[t.id]=t.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new y(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}_loadSprite(t){this._spriteRequest=function(t,n,r,i){let o,a,s;const l=r>1?"@2x":"";let c=e.getJSON(n.transformRequest(n.normalizeSpriteURL(t,l,".json"),e.ResourceType.SpriteJSON),((e,t)=>{c=null,s||(s=e,o=t,h())})),u=e.getImage(n.transformRequest(n.normalizeSpriteURL(t,l,".png"),e.ResourceType.SpriteImage),((e,t)=>{u=null,s||(s=e,a=t,h())}));function h(){if(s)i(s);else if(o&&a){const t=e.exported.getImageData(a),n={};for(const r in o){const{width:i,height:a,x:s,y:l,sdf:c,pixelRatio:u,stretchX:h,stretchY:f,content:p}=o[r],d=new e.RGBAImage({width:i,height:a});e.RGBAImage.copy(t,d,{x:s,y:l},{x:0,y:0},{width:i,height:a}),n[r]={data:d,pixelRatio:u,sdf:c,stretchX:h,stretchY:f,content:p}}i(null,n)}}return{cancel(){c&&(c.cancel(),c=null),u&&(u.cancel(),u=null)}}}(t,this.map._requestManager,this.map.getPixelRatio(),((t,n)=>{if(this._spriteRequest=null,t)this.fire(new e.ErrorEvent(t));else if(n)for(const e in n)this.imageManager.addImage(e,n[e]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))}))}_validateLayer(t){const n=this.sourceCaches[t.source];if(!n)return;const r=t.sourceLayer;if(!r)return;const i=n.getSource();("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(r))&&this.fire(new e.ErrorEvent(new Error(`Source layer "${r}" does not exist on source "${i.id}" as specified by style layer "${t.id}".`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(e){const t=[];for(const n of e){const e=this._layers[n];"custom"!==e.type&&t.push(e.serialize())}return t}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const e in this.sourceCaches)if(this.sourceCaches[e].hasTransition())return!0;for(const e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(t){if(!this._loaded)return;const n=this._changed;if(this._changed){const e=Object.keys(this._updatedLayers),n=Object.keys(this._removedLayers);(e.length||n.length)&&this._updateWorkerLayers(e,n);for(const e in this._updatedSources){const t=this._updatedSources[e];if("reload"===t)this._reloadSource(e);else{if("clear"!==t)throw new Error(`Invalid action ${t}`);this._clearSource(e)}}this._updateTilesForChangedImages();for(const e in this._updatedPaintProps)this._layers[e].updateTransitions(t);this.light.updateTransitions(t),this._resetUpdates()}const r={};for(const e in this.sourceCaches){const t=this.sourceCaches[e];r[e]=t.used,t.used=!1}for(const e of this._order){const n=this._layers[e];n.recalculate(t,this._availableImages),!n.isHidden(t.zoom)&&n.source&&(this.sourceCaches[n.source].used=!0)}for(const t in r){const n=this.sourceCaches[t];r[t]!==n.used&&n.fire(new e.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:t}))}this.light.recalculate(t),this.z=t.zoom,n&&this.fire(new e.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const t in this.sourceCaches)this.sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateWorkerLayers(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(t){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),t){const e=this.sourceCaches[t.source];if(!e)throw new Error(`cannot load terrain, because there exists no source with ID: ${t.source}`);this.terrain=new Ye(this,e,t),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=e=>{e.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=e=>{e.tile&&(e.sourceId===t.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(e.sourceId,e.tile.tileID)):"geojson"===e.source.type&&this.terrain.rememberForRerender(e.sourceId,e.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new e.Event("terrain",{terrain:t}))}setState(t){if(this._checkLoaded(),Ke(this,e.validateStyle(t)))return!1;(t=e.clone$1(t)).layers=$(t.layers);const n=function(e,t){if(!e)return[{command:X.setStyle,args:[t]}];let n=[];try{if(!i(e.version,t.version))return[{command:X.setStyle,args:[t]}];i(e.center,t.center)||n.push({command:X.setCenter,args:[t.center]}),i(e.zoom,t.zoom)||n.push({command:X.setZoom,args:[t.zoom]}),i(e.bearing,t.bearing)||n.push({command:X.setBearing,args:[t.bearing]}),i(e.pitch,t.pitch)||n.push({command:X.setPitch,args:[t.pitch]}),i(e.sprite,t.sprite)||n.push({command:X.setSprite,args:[t.sprite]}),i(e.glyphs,t.glyphs)||n.push({command:X.setGlyphs,args:[t.glyphs]}),i(e.transition,t.transition)||n.push({command:X.setTransition,args:[t.transition]}),i(e.light,t.light)||n.push({command:X.setLight,args:[t.light]});const r={},o=[];!function(e,t,n,r){let o;for(o in t=t||{},e=e||{})Object.prototype.hasOwnProperty.call(e,o)&&(Object.prototype.hasOwnProperty.call(t,o)||Y(o,n,r));for(o in t)Object.prototype.hasOwnProperty.call(t,o)&&(Object.prototype.hasOwnProperty.call(e,o)?i(e[o],t[o])||("geojson"===e[o].type&&"geojson"===t[o].type&&J(e,t,o)?n.push({command:X.setGeoJSONSourceData,args:[o,t[o].data]}):K(o,t,n,r)):Z(o,t,n))}(e.sources,t.sources,o,r);const a=[];e.layers&&e.layers.forEach((e=>{r[e.source]?n.push({command:X.removeLayer,args:[e.id]}):a.push(e)})),n=n.concat(o),function(e,t,n){t=t||[];const r=(e=e||[]).map(ee),o=t.map(ee),a=e.reduce(te,{}),s=t.reduce(te,{}),l=r.slice(),c=Object.create(null);let u,h,f,p,d,m,g;for(u=0,h=0;u<r.length;u++)f=r[u],Object.prototype.hasOwnProperty.call(s,f)?h++:(n.push({command:X.removeLayer,args:[f]}),l.splice(l.indexOf(f,h),1));for(u=0,h=0;u<o.length;u++)f=o[o.length-1-u],l[l.length-1-u]!==f&&(Object.prototype.hasOwnProperty.call(a,f)?(n.push({command:X.removeLayer,args:[f]}),l.splice(l.lastIndexOf(f,l.length-h),1)):h++,m=l[l.length-u],n.push({command:X.addLayer,args:[s[f],m]}),l.splice(l.length-u,0,f),c[f]=!0);for(u=0;u<o.length;u++)if(f=o[u],p=a[f],d=s[f],!c[f]&&!i(p,d))if(i(p.source,d.source)&&i(p["source-layer"],d["source-layer"])&&i(p.type,d.type)){for(g in Q(p.layout,d.layout,n,f,null,X.setLayoutProperty),Q(p.paint,d.paint,n,f,null,X.setPaintProperty),i(p.filter,d.filter)||n.push({command:X.setFilter,args:[f,d.filter]}),i(p.minzoom,d.minzoom)&&i(p.maxzoom,d.maxzoom)||n.push({command:X.setLayerZoomRange,args:[f,d.minzoom,d.maxzoom]}),p)Object.prototype.hasOwnProperty.call(p,g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?Q(p[g],d[g],n,f,g.slice(6),X.setPaintProperty):i(p[g],d[g])||n.push({command:X.setLayerProperty,args:[f,g,d[g]]}));for(g in d)Object.prototype.hasOwnProperty.call(d,g)&&!Object.prototype.hasOwnProperty.call(p,g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?Q(p[g],d[g],n,f,g.slice(6),X.setPaintProperty):i(p[g],d[g])||n.push({command:X.setLayerProperty,args:[f,g,d[g]]}))}else n.push({command:X.removeLayer,args:[f]}),m=l[l.lastIndexOf(f)+1],n.push({command:X.addLayer,args:[d,m]})}(a,t.layers,n)}catch(e){console.warn("Unable to compute style diff:",e),n=[{command:X.setStyle,args:[t]}]}return n}(this.serialize(),t).filter((e=>!(e.command in Qe)));if(0===n.length)return!1;const r=n.filter((e=>!(e.command in Je)));if(r.length>0)throw new Error(`Unimplemented: ${r.map((e=>e.command)).join(", ")}.`);return n.forEach((e=>{"setTransition"!==e.command&&this[e.command].apply(this,e.args)})),this.stylesheet=t,!0}addImage(t,n){if(this.getImage(t))return this.fire(new e.ErrorEvent(new Error(`An image named "${t}" already exists.`)));this.imageManager.addImage(t,n),this._afterImageUpdated(t)}updateImage(e,t){this.imageManager.updateImage(e,t)}getImage(e){return this.imageManager.getImage(e)}removeImage(t){if(!this.getImage(t))return this.fire(new e.ErrorEvent(new Error(`An image named "${t}" does not exist.`)));this.imageManager.removeImage(t),this._afterImageUpdated(t)}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(t,n,r={}){if(this._checkLoaded(),void 0!==this.sourceCaches[t])throw new Error(`Source "${t}" already exists.`);if(!n.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(n).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(e.validateStyle.source,`sources.${t}`,n,null,r))return;this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);const i=this.sourceCaches[t]=new F(t,n,this.dispatcher);i.style=this,i.setEventedParent(this,(()=>({isSourceLoaded:this.loaded(),source:i.serialize(),sourceId:t}))),i.onAdd(this.map),this._changed=!0}removeSource(t){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error("There is no source with this ID");for(const n in this._layers)if(this._layers[n].source===t)return this.fire(new e.ErrorEvent(new Error(`Source "${t}" cannot be removed while layer "${n}" is using it.`)));const n=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],n.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),n.setEventedParent(null),n.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,t){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error(`There is no source with this ID=${e}`);const n=this.sourceCaches[e].getSource();if("geojson"!==n.type)throw new Error(`geojsonSource.type is ${n.type}, which is !== 'geojson`);n.setData(t),this._changed=!0}getSource(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()}addLayer(t,n,r={}){this._checkLoaded();const i=t.id;if(this.getLayer(i))return void this.fire(new e.ErrorEvent(new Error(`Layer "${i}" already exists on this map.`)));let o;if("custom"===t.type){if(Ke(this,e.validateCustomStyleLayer(t)))return;o=e.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(i,t.source),t=e.clone$1(t),t=e.extend(t,{source:i})),this._validate(e.validateStyle.layer,`layers.${i}`,t,{arrayIndex:-1},r))return;o=e.createStyleLayer(t),this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}}),this._serializedLayers[o.id]=o.serialize()}const a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)this.fire(new e.ErrorEvent(new Error(`Cannot add layer "${i}" before non-existing layer "${n}".`)));else{if(this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o,this._removedLayers[i]&&o.source&&"custom"!==o.type){const e=this._removedLayers[i];delete this._removedLayers[i],e.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}moveLayer(t,n){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===n)return;const r=this._order.indexOf(t);this._order.splice(r,1);const i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new e.ErrorEvent(new Error(`Cannot move layer "${t}" before non-existing layer "${n}".`))):(this._order.splice(i,0,t),this._layerOrderChanged=!0)}removeLayer(t){this._checkLoaded();const n=this._layers[t];if(!n)return void this.fire(new e.ErrorEvent(new Error(`Cannot remove non-existing layer "${t}".`)));n.setEventedParent(null);const r=this._order.indexOf(t);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=n,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],n.onRemove&&n.onRemove(this.map)}getLayer(e){return this._layers[e]}hasLayer(e){return e in this._layers}setLayerZoomRange(t,n,r){this._checkLoaded();const i=this.getLayer(t);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new e.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${t}".`)))}setFilter(t,n,r={}){this._checkLoaded();const o=this.getLayer(t);if(o){if(!i(o.filter,n))return null==n?(o.filter=void 0,void this._updateLayer(o)):void(this._validate(e.validateStyle.filter,`layers.${o.id}.filter`,n,null,r)||(o.filter=e.clone$1(n),this._updateLayer(o)))}else this.fire(new e.ErrorEvent(new Error(`Cannot filter non-existing layer "${t}".`)))}getFilter(t){return e.clone$1(this.getLayer(t).filter)}setLayoutProperty(t,n,r,o={}){this._checkLoaded();const a=this.getLayer(t);a?i(a.getLayoutProperty(n),r)||(a.setLayoutProperty(n,r,o),this._updateLayer(a)):this.fire(new e.ErrorEvent(new Error(`Cannot style non-existing layer "${t}".`)))}getLayoutProperty(t,n){const r=this.getLayer(t);if(r)return r.getLayoutProperty(n);this.fire(new e.ErrorEvent(new Error(`Cannot get style of non-existing layer "${t}".`)))}setPaintProperty(t,n,r,o={}){this._checkLoaded();const a=this.getLayer(t);a?i(a.getPaintProperty(n),r)||(a.setPaintProperty(n,r,o)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new e.ErrorEvent(new Error(`Cannot style non-existing layer "${t}".`)))}getPaintProperty(e,t){return this.getLayer(e).getPaintProperty(t)}setFeatureState(t,n){this._checkLoaded();const r=t.source,i=t.sourceLayer,o=this.sourceCaches[r];if(void 0===o)return void this.fire(new e.ErrorEvent(new Error(`The source '${r}' does not exist in the map's style.`)));const a=o.getSource().type;"geojson"===a&&i?this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==a||i?(void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),o.setFeatureState(i,t.id,n)):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(t,n){this._checkLoaded();const r=t.source,i=this.sourceCaches[r];if(void 0===i)return void this.fire(new e.ErrorEvent(new Error(`The source '${r}' does not exist in the map's style.`)));const o=i.getSource().type,a="vector"===o?t.sourceLayer:void 0;"vector"!==o||a?n&&"string"!=typeof t.id&&"number"!=typeof t.id?this.fire(new e.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):i.removeFeatureState(a,t.id,n):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(t){this._checkLoaded();const n=t.source,r=t.sourceLayer,i=this.sourceCaches[n];if(void 0!==i)return"vector"!==i.getSource().type||r?(void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),i.getFeatureState(r,t.id)):void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new e.ErrorEvent(new Error(`The source '${n}' does not exist in the map's style.`)))}getTransition(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,(e=>e.serialize())),layers:this._serializeLayers(this._order)},(e=>void 0!==e))}_updateLayer(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&"raster"!==this.sourceCaches[e.source].getSource().type&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(e){const t=e=>"fill-extrusion"===this._layers[e].type,n={},r=[];for(let i=this._order.length-1;i>=0;i--){const o=this._order[i];if(t(o)){n[o]=i;for(const t of e){const e=t[o];if(e)for(const t of e)r.push(t)}}}r.sort(((e,t)=>t.intersectionZ-e.intersectionZ));const i=[];for(let o=this._order.length-1;o>=0;o--){const a=this._order[o];if(t(a))for(let e=r.length-1;e>=0;e--){const t=r[e].feature;if(n[t.layer.id]<o)break;i.push(t),r.pop()}else for(const t of e){const e=t[a];if(e)for(const t of e)i.push(t.feature)}}return i}queryRenderedFeatures(t,n,r){n&&n.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",n.filter,null,n);const i={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const t of n.layers){const n=this._layers[t];if(!n)return this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be queried for features.`))),[];i[n.source]=!0}}const o=[];n.availableImages=this._availableImages;for(const e in this.sourceCaches)n.layers&&!i[e]||o.push(O(this.sourceCaches[e],this._layers,this._serializedLayers,t,n,r));return this.placement&&o.push(function(e,t,n,r,i,o,a){const s={},l=o.queryRenderedSymbols(r),c=[];for(const e of Object.keys(l).map(Number))c.push(a[e]);c.sort(D);for(const n of c){const r=n.featureIndex.lookupSymbolFeatures(l[n.bucketInstanceId],t,n.bucketIndex,n.sourceLayerIndex,i.filter,i.layers,i.availableImages,e);for(const e in r){const t=s[e]=s[e]||[],i=r[e];i.sort(((e,t)=>{const r=n.featureSortOrder;if(r){const n=r.indexOf(e.featureIndex);return r.indexOf(t.featureIndex)-n}return t.featureIndex-e.featureIndex}));for(const e of i)t.push(e)}}for(const t in s)s[t].forEach((r=>{const i=r.feature,o=n[e[t].source].getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=o}));return s}(this._layers,this._serializedLayers,this.sourceCaches,t,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(o)}querySourceFeatures(t,n){n&&n.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",n.filter,null,n);const r=this.sourceCaches[t];return r?function(e,t){const n=e.getRenderableIds().map((t=>e.getTileByID(t))),r=[],i={};for(let e=0;e<n.length;e++){const o=n[e],a=o.tileID.canonical.key;i[a]||(i[a]=!0,o.querySourceFeatures(r,t))}return r}(r,n):[]}addSourceType(e,t,n){return tt.getSourceType(e)?n(new Error(`A source type called "${e}" already exists.`)):(tt.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},n):n(null,null))}getLight(){return this.light.getLight()}setLight(t,n={}){this._checkLoaded();const r=this.light.getLight();let o=!1;for(const e in t)if(!i(t[e],r[e])){o=!0;break}if(!o)return;const a={now:e.exported.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,n),this.light.updateTransitions(a)}_validate(t,n,r,i,o={}){return(!o||!1!==o.validate)&&Ke(this,t.call(e.validateStyle,e.extend({key:n,style:this.serialize(),value:r,styleSpec:e.spec},i)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const e in this._layers)this._layers[e].setEventedParent(null);for(const e in this.sourceCaches){const t=this.sourceCaches[e];t.setEventedParent(null),t.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(e){this.sourceCaches[e].clearTiles()}_reloadSource(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()}_updateSources(e){for(const t in this.sourceCaches)this.sourceCaches[t].update(e,this.terrain)}_generateCollisionBoxes(){for(const e in this.sourceCaches)this._reloadSource(e)}_updatePlacement(t,n,r,i,o=!1){let a=!1,s=!1;const l={};for(const e of this._order){const n=this._layers[e];if("symbol"!==n.type)continue;if(!l[n.source]){const e=this.sourceCaches[n.source];l[n.source]=e.getRenderableIds(!0).map((t=>e.getTileByID(t))).sort(((e,t)=>t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)))}const r=this.crossTileSymbolIndex.addLayer(n,l[n.source],t.center.lng);a=a||r}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((o=o||this._layerOrderChanged||0===r)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.exported.now(),t.zoom))&&(this.pauseablePlacement=new Ve(t,this.terrain,this._order,o,n,r,i,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.exported.now()),s=!0),a&&this.pauseablePlacement.placement.setStale()),s||a)for(const e of this._order){const t=this._layers[e];"symbol"===t.type&&this.placement.updateLayerOpacities(t,l[t.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.exported.now())}_releaseSymbolFadeTiles(){for(const e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,t,n){this.imageManager.getImages(t.icons,n),this._updateTilesForChangedImages();const r=this.sourceCaches[t.source];r&&r.setDependencies(t.tileID.key,t.type,t.icons)}getGlyphs(e,t,n){this.glyphManager.getGlyphs(t.stacks,n)}getResource(t,n,r){return e.makeRequest(n,r)}}tt.getSourceType=function(e){return P[e]},tt.setSourceType=function(e,t){P[e]=t},tt.registerForPluginStateChange=e.registerForPluginStateChange;var nt="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const rt={prelude:it("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}"),background:it("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:it("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:it("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:it("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:it("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:it("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:it("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:it("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:it("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:it("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:it("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:it("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:it("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:it("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat baseDelta=10.0;float ele=get_elevation(a_centroid);\n#else\nfloat baseDelta=0.0;float ele=0.0;\n#endif\nbase=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:it("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat baseDelta=10.0;float ele=get_elevation(a_centroid);\n#else\nfloat baseDelta=0.0;float ele=0.0;\n#endif\nbase=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:it("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:it("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:it("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:it("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:it("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:it("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:it("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:it("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:it("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:it("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:it("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",nt),terrainDepth:it("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",nt),terrainCoords:it("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",nt)};function it(e,t){const n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=t.match(/attribute ([\w]+) ([\w]+)/g),i=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=o?o.concat(i):i,s={};return{fragmentSource:e=e.replace(n,((e,t,n,r,i)=>(s[i]=!0,"define"===t?`\n#ifndef HAS_UNIFORM_u_${i}\nvarying ${n} ${r} ${i};\n#else\nuniform ${n} ${r} u_${i};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${i}\n    ${n} ${r} ${i} = u_${i};\n#endif\n`))),vertexSource:t=t.replace(n,((e,t,n,r,i)=>{const o="float"===r?"vec2":"vec4",a=i.match(/color/)?"color":o;return s[i]?"define"===t?`\n#ifndef HAS_UNIFORM_u_${i}\nuniform lowp float u_${i}_t;\nattribute ${n} ${o} a_${i};\nvarying ${n} ${r} ${i};\n#else\nuniform ${n} ${r} u_${i};\n#endif\n`:"vec4"===a?`\n#ifndef HAS_UNIFORM_u_${i}\n    ${i} = a_${i};\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${i}\n    ${i} = unpack_mix_${a}(a_${i}, u_${i}_t);\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`:"define"===t?`\n#ifndef HAS_UNIFORM_u_${i}\nuniform lowp float u_${i}_t;\nattribute ${n} ${o} a_${i};\n#else\nuniform ${n} ${r} u_${i};\n#endif\n`:"vec4"===a?`\n#ifndef HAS_UNIFORM_u_${i}\n    ${n} ${r} ${i} = a_${i};\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${i}\n    ${n} ${r} ${i} = unpack_mix_${a}(a_${i}, u_${i}_t);\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`})),staticAttributes:r,staticUniforms:a}}class ot{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(e,t,n,r,i,o,a,s,l){this.context=e;let c=this.boundPaintVertexBuffers.length!==r.length;for(let e=0;!c&&e<r.length;e++)this.boundPaintVertexBuffers[e]!==r[e]&&(c=!0);e.extVertexArrayObject&&this.vao&&this.boundProgram===t&&this.boundLayoutVertexBuffer===n&&!c&&this.boundIndexBuffer===i&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===a&&this.boundDynamicVertexBuffer2===s&&this.boundDynamicVertexBuffer3===l?(e.bindVertexArrayOES.set(this.vao),a&&a.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind(),l&&l.bind()):this.freshBind(t,n,r,i,o,a,s,l)}freshBind(e,t,n,r,i,o,a,s){let l;const c=e.numAttributes,u=this.context,h=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),l=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a,this.boundDynamicVertexBuffer3=s;else{l=u.currentNumAttributes||0;for(let e=c;e<l;e++)h.disableVertexAttribArray(e)}t.enableAttributes(h,e);for(const t of n)t.enableAttributes(h,e);o&&o.enableAttributes(h,e),a&&a.enableAttributes(h,e),s&&s.enableAttributes(h,e),t.bind(),t.setVertexAttribPointers(h,e,i);for(const t of n)t.bind(),t.setVertexAttribPointers(h,e,i);o&&(o.bind(),o.setVertexAttribPointers(h,e,i)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(h,e,i)),s&&(s.bind(),s.setVertexAttribPointers(h,e,i)),u.currentNumAttributes=c}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function at(e){const t=[];for(let n=0;n<e.length;n++){if(null===e[n])continue;const r=e[n].split(" ");t.push(r.pop())}return t}class st{constructor(t,n,r,i,o,a,s){const l=t.gl;this.program=l.createProgram();const c=at(r.staticAttributes),u=i?i.getBinderAttributes():[],h=c.concat(u),f=rt.prelude.staticUniforms?at(rt.prelude.staticUniforms):[],p=r.staticUniforms?at(r.staticUniforms):[],d=i?i.getBinderUniforms():[],m=f.concat(p).concat(d),g=[];for(const e of m)g.indexOf(e)<0&&g.push(e);const y=i?i.defines():[];a&&y.push("#define OVERDRAW_INSPECTOR;"),s&&y.push("#define TERRAIN3D;");const v=y.concat(rt.prelude.fragmentSource,r.fragmentSource).join("\n"),b=y.concat(rt.prelude.vertexSource,r.vertexSource).join("\n"),_=l.createShader(l.FRAGMENT_SHADER);if(l.isContextLost())return void(this.failedToCreate=!0);l.shaderSource(_,v),l.compileShader(_),l.attachShader(this.program,_);const x=l.createShader(l.VERTEX_SHADER);if(l.isContextLost())return void(this.failedToCreate=!0);l.shaderSource(x,b),l.compileShader(x),l.attachShader(this.program,x),this.attributes={};const A={};this.numAttributes=h.length;for(let e=0;e<this.numAttributes;e++)h[e]&&(l.bindAttribLocation(this.program,e,h[e]),this.attributes[h[e]]=e);l.linkProgram(this.program),l.deleteShader(x),l.deleteShader(_);for(let e=0;e<g.length;e++){const t=g[e];if(t&&!A[t]){const e=l.getUniformLocation(this.program,t);e&&(A[t]=e)}}this.fixedUniforms=o(t,A),this.terrainUniforms=((t,n)=>({u_depth:new e.Uniform1i(t,n.u_depth),u_terrain:new e.Uniform1i(t,n.u_terrain),u_terrain_dim:new e.Uniform1f(t,n.u_terrain_dim),u_terrain_matrix:new e.UniformMatrix4f(t,n.u_terrain_matrix),u_terrain_unpack:new e.Uniform4f(t,n.u_terrain_unpack),u_terrain_offset:new e.Uniform1f(t,n.u_terrain_offset),u_terrain_exaggeration:new e.Uniform1f(t,n.u_terrain_exaggeration)}))(t,A),this.binderUniforms=i?i.getUniforms(t,A):[]}draw(e,t,n,r,i,o,a,s,l,c,u,h,f,p,d,m,g,y){const v=e.gl;if(this.failedToCreate)return;if(e.program.set(this.program),e.setDepthMode(n),e.setStencilMode(r),e.setColorMode(i),e.setCullFace(o),s){e.activeTexture.set(v.TEXTURE2),v.bindTexture(v.TEXTURE_2D,s.depthTexture),e.activeTexture.set(v.TEXTURE3),v.bindTexture(v.TEXTURE_2D,s.texture);for(const e in this.terrainUniforms)this.terrainUniforms[e].set(s[e])}for(const e in this.fixedUniforms)this.fixedUniforms[e].set(a[e]);d&&d.setUniforms(e,this.binderUniforms,f,{zoom:p});let b=0;switch(t){case v.LINES:b=2;break;case v.TRIANGLES:b=3;break;case v.LINE_STRIP:b=1}for(const n of h.get()){const r=n.vaos||(n.vaos={});(r[l]||(r[l]=new ot)).bind(e,this,c,d?d.getPaintVertexBuffers():[],u,n.vertexOffset,m,g,y),v.drawElements(t,n.primitiveLength*b,v.UNSIGNED_SHORT,n.primitiveOffset*b*2)}}}function lt(e,t,n){const r=1/xe(n,1,t.transform.tileZoom),i=Math.pow(2,n.tileID.overscaledZ),o=n.tileSize*Math.pow(2,t.transform.tileZoom)/i,a=o*(n.tileID.canonical.x+n.tileID.wrap*i),s=o*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[r,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}const ct=(t,n,r,i)=>{const o=n.style.light,a=o.properties.get("position"),s=[a.x,a.y,a.z],l=e.create$1();"viewport"===o.properties.get("anchor")&&e.fromRotation(l,-n.transform.angle),e.transformMat3(s,s,l);const c=o.properties.get("color");return{u_matrix:t,u_lightpos:s,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[c.r,c.g,c.b],u_vertical_gradient:+r,u_opacity:i}},ut=(t,n,r,i,o,a,s)=>e.extend(ct(t,n,r,i),lt(a,n,s),{u_height_factor:-Math.pow(2,o.overscaledZ)/s.tileSize/8}),ht=e=>({u_matrix:e}),ft=(t,n,r,i)=>e.extend(ht(t),lt(r,n,i)),pt=(e,t)=>({u_matrix:e,u_world:t}),dt=(t,n,r,i,o)=>e.extend(ft(t,n,r,i),{u_world:o}),mt=(e,t,n,r)=>{const i=e.transform;let o,a;if("map"===r.paint.get("circle-pitch-alignment")){const e=xe(n,1,i.zoom);o=!0,a=[e,e]}else o=!1,a=i.pixelsToGLUnits;return{u_camera_to_center_distance:i.cameraToCenterDistance,u_scale_with_map:+("map"===r.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(t.posMatrix,n,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_pitch_with_map:+o,u_device_pixel_ratio:e.pixelRatio,u_extrude_scale:a}},gt=(e,t,n)=>{const r=xe(n,1,t.zoom),i=Math.pow(2,t.zoom-n.tileID.overscaledZ),o=n.tileID.overscaleFactor();return{u_matrix:e,u_camera_to_center_distance:t.cameraToCenterDistance,u_pixels_to_tile_units:r,u_extrude_scale:[t.pixelsToGLUnits[0]/(r*i),t.pixelsToGLUnits[1]/(r*i)],u_overscale_factor:o}},yt=(e,t,n=1)=>({u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:n}),vt=e=>({u_matrix:e}),bt=(e,t,n,r)=>({u_matrix:e,u_extrude_scale:xe(t,1,n),u_intensity:r});function _t(t,n){const r=Math.pow(2,n.canonical.z),i=n.canonical.y;return[new e.MercatorCoordinate(0,i/r).toLngLat().lat,new e.MercatorCoordinate(0,(i+1)/r).toLngLat().lat]}const xt=(e,t,n,r)=>{const i=e.transform;return{u_matrix:St(e,t,n,r),u_ratio:1/xe(t,1,i.zoom),u_device_pixel_ratio:e.pixelRatio,u_units_to_pixels:[1/i.pixelsToGLUnits[0],1/i.pixelsToGLUnits[1]]}},At=(t,n,r,i,o)=>e.extend(xt(t,n,r,o),{u_image:0,u_image_height:i}),wt=(e,t,n,r,i)=>{const o=e.transform,a=Et(t,o);return{u_matrix:St(e,t,n,i),u_texsize:t.imageAtlasTexture.size,u_ratio:1/xe(t,1,o.zoom),u_device_pixel_ratio:e.pixelRatio,u_image:0,u_scale:[a,r.fromScale,r.toScale],u_fade:r.t,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},Ct=(t,n,r,i,o,a)=>{const s=t.lineAtlas,l=Et(n,t.transform),c="round"===r.layout.get("line-cap"),u=s.getDash(i.from,c),h=s.getDash(i.to,c),f=u.width*o.fromScale,p=h.width*o.toScale;return e.extend(xt(t,n,r,a),{u_patternscale_a:[l/f,-u.height/2],u_patternscale_b:[l/p,-h.height/2],u_sdfgamma:s.width/(256*Math.min(f,p)*t.pixelRatio)/2,u_image:0,u_tex_y_a:u.y,u_tex_y_b:h.y,u_mix:o.t})};function Et(e,t){return 1/xe(e,1,t.tileZoom)}function St(e,t,n,r){return e.translatePosMatrix(r?r.posMatrix:t.tileID.posMatrix,t,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}const Tt=(e,t,n,r,i)=>{return{u_matrix:e,u_tl_parent:t,u_scale_parent:n,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(a=i.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=i.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:Bt(i.paint.get("raster-hue-rotate"))};var o,a};function Bt(e){e*=Math.PI/180;const t=Math.sin(e),n=Math.cos(e);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}const kt=(e,t,n,r,i,o,a,s,l,c)=>{const u=i.transform;return{u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:u.cameraToCenterDistance,u_pitch:u.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:u.width/u.height,u_fade_change:i.options.fadeDuration?i.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+r,u_texsize:c,u_texture:0}},Mt=(t,n,r,i,o,a,s,l,c,u,h)=>{const f=o.transform;return e.extend(kt(t,n,r,i,o,a,s,l,c,u),{u_gamma_scale:i?Math.cos(f._pitch)*f.cameraToCenterDistance:1,u_device_pixel_ratio:o.pixelRatio,u_is_halo:+h})},Pt=(t,n,r,i,o,a,s,l,c,u)=>e.extend(Mt(t,n,r,i,o,a,s,l,!0,c,!0),{u_texsize_icon:u,u_texture_icon:1}),It=(e,t,n)=>({u_matrix:e,u_opacity:t,u_color:n}),Ot=(t,n,r,i,o,a)=>e.extend(function(e,t,n,r){const i=n.imageManager.getPattern(e.from.toString()),o=n.imageManager.getPattern(e.to.toString()),{width:a,height:s}=n.imageManager.getPixelSize(),l=Math.pow(2,r.tileID.overscaledZ),c=r.tileSize*Math.pow(2,n.transform.tileZoom)/l,u=c*(r.tileID.canonical.x+r.tileID.wrap*l),h=c*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:i.tl,u_pattern_br_a:i.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[a,s],u_mix:t.t,u_pattern_size_a:i.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:t.fromScale,u_scale_b:t.toScale,u_tile_units_to_pixels:1/xe(r,1,n.transform.tileZoom),u_pixel_coord_upper:[u>>16,h>>16],u_pixel_coord_lower:[65535&u,65535&h]}}(i,a,r,o),{u_matrix:t,u_opacity:n}),Dt={fillExtrusion:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_lightpos:new e.Uniform3f(t,n.u_lightpos),u_lightintensity:new e.Uniform1f(t,n.u_lightintensity),u_lightcolor:new e.Uniform3f(t,n.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,n.u_vertical_gradient),u_opacity:new e.Uniform1f(t,n.u_opacity)}),fillExtrusionPattern:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_lightpos:new e.Uniform3f(t,n.u_lightpos),u_lightintensity:new e.Uniform1f(t,n.u_lightintensity),u_lightcolor:new e.Uniform3f(t,n.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,n.u_vertical_gradient),u_height_factor:new e.Uniform1f(t,n.u_height_factor),u_image:new e.Uniform1i(t,n.u_image),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade),u_opacity:new e.Uniform1f(t,n.u_opacity)}),fill:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}),fillPattern:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image:new e.Uniform1i(t,n.u_image),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade)}),fillOutline:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_world:new e.Uniform2f(t,n.u_world)}),fillOutlinePattern:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_world:new e.Uniform2f(t,n.u_world),u_image:new e.Uniform1i(t,n.u_image),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade)}),circle:(t,n)=>({u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(t,n.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(t,n.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}),collisionBox:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(t,n.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(t,n.u_extrude_scale),u_overscale_factor:new e.Uniform1f(t,n.u_overscale_factor)}),collisionCircle:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_inv_matrix:new e.UniformMatrix4f(t,n.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(t,n.u_viewport_size)}),debug:(t,n)=>({u_color:new e.UniformColor(t,n.u_color),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_overlay:new e.Uniform1i(t,n.u_overlay),u_overlay_scale:new e.Uniform1f(t,n.u_overlay_scale)}),clippingMask:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}),heatmap:(t,n)=>({u_extrude_scale:new e.Uniform1f(t,n.u_extrude_scale),u_intensity:new e.Uniform1f(t,n.u_intensity),u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}),heatmapTexture:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_world:new e.Uniform2f(t,n.u_world),u_image:new e.Uniform1i(t,n.u_image),u_color_ramp:new e.Uniform1i(t,n.u_color_ramp),u_opacity:new e.Uniform1f(t,n.u_opacity)}),hillshade:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image:new e.Uniform1i(t,n.u_image),u_latrange:new e.Uniform2f(t,n.u_latrange),u_light:new e.Uniform2f(t,n.u_light),u_shadow:new e.UniformColor(t,n.u_shadow),u_highlight:new e.UniformColor(t,n.u_highlight),u_accent:new e.UniformColor(t,n.u_accent)}),hillshadePrepare:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image:new e.Uniform1i(t,n.u_image),u_dimension:new e.Uniform2f(t,n.u_dimension),u_zoom:new e.Uniform1f(t,n.u_zoom),u_unpack:new e.Uniform4f(t,n.u_unpack)}),line:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_ratio:new e.Uniform1f(t,n.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,n.u_units_to_pixels)}),lineGradient:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_ratio:new e.Uniform1f(t,n.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,n.u_units_to_pixels),u_image:new e.Uniform1i(t,n.u_image),u_image_height:new e.Uniform1f(t,n.u_image_height)}),linePattern:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_texsize:new e.Uniform2f(t,n.u_texsize),u_ratio:new e.Uniform1f(t,n.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_image:new e.Uniform1i(t,n.u_image),u_units_to_pixels:new e.Uniform2f(t,n.u_units_to_pixels),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade)}),lineSDF:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_ratio:new e.Uniform1f(t,n.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,n.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(t,n.u_patternscale_a),u_patternscale_b:new e.Uniform2f(t,n.u_patternscale_b),u_sdfgamma:new e.Uniform1f(t,n.u_sdfgamma),u_image:new e.Uniform1i(t,n.u_image),u_tex_y_a:new e.Uniform1f(t,n.u_tex_y_a),u_tex_y_b:new e.Uniform1f(t,n.u_tex_y_b),u_mix:new e.Uniform1f(t,n.u_mix)}),raster:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_tl_parent:new e.Uniform2f(t,n.u_tl_parent),u_scale_parent:new e.Uniform1f(t,n.u_scale_parent),u_buffer_scale:new e.Uniform1f(t,n.u_buffer_scale),u_fade_t:new e.Uniform1f(t,n.u_fade_t),u_opacity:new e.Uniform1f(t,n.u_opacity),u_image0:new e.Uniform1i(t,n.u_image0),u_image1:new e.Uniform1i(t,n.u_image1),u_brightness_low:new e.Uniform1f(t,n.u_brightness_low),u_brightness_high:new e.Uniform1f(t,n.u_brightness_high),u_saturation_factor:new e.Uniform1f(t,n.u_saturation_factor),u_contrast_factor:new e.Uniform1f(t,n.u_contrast_factor),u_spin_weights:new e.Uniform3f(t,n.u_spin_weights)}),symbolIcon:(t,n)=>({u_is_size_zoom_constant:new e.Uniform1i(t,n.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,n.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,n.u_size_t),u_size:new e.Uniform1f(t,n.u_size),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,n.u_pitch),u_rotate_symbol:new e.Uniform1i(t,n.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,n.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,n.u_fade_change),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,n.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,n.u_coord_matrix),u_is_text:new e.Uniform1i(t,n.u_is_text),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_texsize:new e.Uniform2f(t,n.u_texsize),u_texture:new e.Uniform1i(t,n.u_texture)}),symbolSDF:(t,n)=>({u_is_size_zoom_constant:new e.Uniform1i(t,n.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,n.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,n.u_size_t),u_size:new e.Uniform1f(t,n.u_size),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,n.u_pitch),u_rotate_symbol:new e.Uniform1i(t,n.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,n.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,n.u_fade_change),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,n.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,n.u_coord_matrix),u_is_text:new e.Uniform1i(t,n.u_is_text),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_texsize:new e.Uniform2f(t,n.u_texsize),u_texture:new e.Uniform1i(t,n.u_texture),u_gamma_scale:new e.Uniform1f(t,n.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(t,n.u_is_halo)}),symbolTextAndIcon:(t,n)=>({u_is_size_zoom_constant:new e.Uniform1i(t,n.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,n.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,n.u_size_t),u_size:new e.Uniform1f(t,n.u_size),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,n.u_pitch),u_rotate_symbol:new e.Uniform1i(t,n.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,n.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,n.u_fade_change),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,n.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,n.u_coord_matrix),u_is_text:new e.Uniform1i(t,n.u_is_text),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_texsize:new e.Uniform2f(t,n.u_texsize),u_texsize_icon:new e.Uniform2f(t,n.u_texsize_icon),u_texture:new e.Uniform1i(t,n.u_texture),u_texture_icon:new e.Uniform1i(t,n.u_texture_icon),u_gamma_scale:new e.Uniform1f(t,n.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(t,n.u_is_halo)}),background:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_opacity:new e.Uniform1f(t,n.u_opacity),u_color:new e.UniformColor(t,n.u_color)}),backgroundPattern:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_opacity:new e.Uniform1f(t,n.u_opacity),u_image:new e.Uniform1i(t,n.u_image),u_pattern_tl_a:new e.Uniform2f(t,n.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(t,n.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(t,n.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(t,n.u_pattern_br_b),u_texsize:new e.Uniform2f(t,n.u_texsize),u_mix:new e.Uniform1f(t,n.u_mix),u_pattern_size_a:new e.Uniform2f(t,n.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(t,n.u_pattern_size_b),u_scale_a:new e.Uniform1f(t,n.u_scale_a),u_scale_b:new e.Uniform1f(t,n.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(t,n.u_tile_units_to_pixels)}),terrain:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_texture:new e.Uniform1i(t,n.u_texture)}),terrainDepth:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}),terrainCoords:(t,n)=>({u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_texture:new e.Uniform1i(t,n.u_texture),u_terrain_coords_id:new e.Uniform1f(t,n.u_terrain_coords_id)})};class zt{constructor(e,t,n){this.context=e;const r=e.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Lt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Rt{constructor(e,t,n,r){this.length=t.length,this.attributes=n,this.itemSize=t.bytesPerElement,this.dynamicDraw=r,this.context=e;const i=e.gl;this.buffer=i.createBuffer(),e.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){if(e.length!==this.length)throw new Error(`Length of new data is ${e.length}, which doesn't match current length of ${this.length}`);const t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,t){for(let n=0;n<this.attributes.length;n++){const r=t.attributes[this.attributes[n].name];void 0!==r&&e.enableVertexAttribArray(r)}}setVertexAttribPointers(e,t,n){for(let r=0;r<this.attributes.length;r++){const i=this.attributes[r],o=t.attributes[i.name];void 0!==o&&e.vertexAttribPointer(o,i.components,e[Lt[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Ft{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ut extends Ft{getDefault(){return e.Color.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class Nt extends Ft{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class jt extends Ft{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class Vt extends Ft{getDefault(){return[!0,!0,!0,!0]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class Gt extends Ft{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class qt extends Ft{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class Wt extends Ft{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class Ht extends Ft{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class $t extends Ft{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}class Xt extends Ft{getDefault(){return[0,1]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class Zt extends Ft{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}class Yt extends Ft{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class Kt extends Ft{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}class Jt extends Ft{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class Qt extends Ft{getDefault(){return e.Color.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class en extends Ft{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class tn extends Ft{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}class nn extends Ft{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class rn extends Ft{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class on extends Ft{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class an extends Ft{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class sn extends Ft{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class ln extends Ft{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class cn extends Ft{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class un extends Ft{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class hn extends Ft{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class fn extends Ft{getDefault(){return null}set(e){const t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class pn extends Ft{constructor(e){super(e),this.vao=e.extVertexArrayObject}getDefault(){return null}set(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)}}class dn extends Ft{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class mn extends Ft{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class gn extends Ft{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class yn extends Ft{constructor(e,t){super(e),this.context=e,this.parent=t}getDefault(){return null}}class vn extends yn{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class bn extends yn{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class _n{constructor(e,t,n,r){this.context=e,this.width=t,this.height=n;const i=e.gl,o=this.framebuffer=i.createFramebuffer();if(this.colorAttachment=new vn(e,o),r&&(this.depthAttachment=new bn(e,o)),i.checkFramebufferStatus(i.FRAMEBUFFER)!==i.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){const t=this.depthAttachment.get();t&&e.deleteRenderbuffer(t)}e.deleteFramebuffer(this.framebuffer)}}class xn{constructor(e,t,n){this.blendFunction=e,this.blendColor=t,this.mask=n}}xn.Replace=[1,0],xn.disabled=new xn(xn.Replace,e.Color.transparent,[!1,!1,!1,!1]),xn.unblended=new xn(xn.Replace,e.Color.transparent,[!0,!0,!0,!0]),xn.alphaBlended=new xn([1,771],e.Color.transparent,[!0,!0,!0,!0]);class An{constructor(e){this.gl=e,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Ut(this),this.clearDepth=new Nt(this),this.clearStencil=new jt(this),this.colorMask=new Vt(this),this.depthMask=new Gt(this),this.stencilMask=new qt(this),this.stencilFunc=new Wt(this),this.stencilOp=new Ht(this),this.stencilTest=new $t(this),this.depthRange=new Xt(this),this.depthTest=new Zt(this),this.depthFunc=new Yt(this),this.blend=new Kt(this),this.blendFunc=new Jt(this),this.blendColor=new Qt(this),this.blendEquation=new en(this),this.cullFace=new tn(this),this.cullFaceSide=new nn(this),this.frontFace=new rn(this),this.program=new on(this),this.activeTexture=new an(this),this.viewport=new sn(this),this.bindFramebuffer=new ln(this),this.bindRenderbuffer=new cn(this),this.bindTexture=new un(this),this.bindVertexBuffer=new hn(this),this.bindElementBuffer=new fn(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new pn(this),this.pixelStoreUnpack=new dn(this),this.pixelStoreUnpackPremultiplyAlpha=new mn(this),this.pixelStoreUnpackFlipY=new gn(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=e.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(e.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=e.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=e.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,t){return new zt(this,e,t)}createVertexBuffer(e,t,n){return new Rt(this,e,t,n)}createRenderbuffer(e,t,n){const r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,e,t,n),this.bindRenderbuffer.set(null),i}createFramebuffer(e,t,n){return new _n(this,e,t,n)}clear({color:e,depth:t}){const n=this.gl;let r=0;e&&(r|=n.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==t&&(r|=n.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(t),this.depthMask.set(!0)),n.clear(r)}setCullFace(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(e){i(e.blendFunction,xn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class wn{constructor(e,t,n){this.func=e,this.mask=t,this.range=n}}wn.ReadOnly=!1,wn.ReadWrite=!0,wn.disabled=new wn(519,wn.ReadOnly,[0,1]);const Cn=7680;class En{constructor(e,t,n,r,i,o){this.test=e,this.ref=t,this.mask=n,this.fail=r,this.depthFail=i,this.pass=o}}En.disabled=new En({func:519,mask:0},0,0,Cn,Cn,Cn);class Sn{constructor(e,t,n){this.enable=e,this.mode=t,this.frontFace=n}}let Tn;function Bn(t,n,r,i,o,a,s){const l=t.context,c=l.gl,u=t.useProgram("collisionBox"),h=[];let f=0,p=0;for(let d=0;d<i.length;d++){const m=i[d],g=n.getTile(m),y=g.getBucket(r);if(!y)continue;let v=m.posMatrix;0===o[0]&&0===o[1]||(v=t.translatePosMatrix(m.posMatrix,g,o,a));const b=s?y.textCollisionBox:y.iconCollisionBox,_=y.collisionCircleArray;if(_.length>0){const n=e.create(),r=v;e.mul(n,y.placementInvProjMatrix,t.transform.glCoordMatrix),e.mul(n,n,y.placementViewportMatrix),h.push({circleArray:_,circleOffset:p,transform:r,invTransform:n,coord:m}),f+=_.length/4,p=f}b&&u.draw(l,c.LINES,wn.disabled,En.disabled,t.colorModeForRenderPass(),Sn.disabled,gt(v,t.transform,g),t.style.terrain&&t.style.terrain.getTerrainData(m),r.id,b.layoutVertexBuffer,b.indexBuffer,b.segments,null,t.transform.zoom,null,null,b.collisionVertexBuffer)}if(!s||!h.length)return;const d=t.useProgram("collisionCircle"),m=new e.CollisionCircleLayoutArray;m.resize(4*f),m._trim();let g=0;for(const e of h)for(let t=0;t<e.circleArray.length/4;t++){const n=4*t,r=e.circleArray[n+0],i=e.circleArray[n+1],o=e.circleArray[n+2],a=e.circleArray[n+3];m.emplace(g++,r,i,o,a,0),m.emplace(g++,r,i,o,a,1),m.emplace(g++,r,i,o,a,2),m.emplace(g++,r,i,o,a,3)}(!Tn||Tn.length<2*f)&&(Tn=function(t){const n=2*t,r=new e.QuadTriangleArray;r.resize(n),r._trim();for(let e=0;e<n;e++){const t=6*e;r.uint16[t+0]=4*e+0,r.uint16[t+1]=4*e+1,r.uint16[t+2]=4*e+2,r.uint16[t+3]=4*e+2,r.uint16[t+4]=4*e+3,r.uint16[t+5]=4*e+0}return r}(f));const y=l.createIndexBuffer(Tn,!0),v=l.createVertexBuffer(m,e.collisionCircleLayout.members,!0);for(const n of h){const i={u_matrix:n.transform,u_inv_matrix:n.invTransform,u_camera_to_center_distance:(b=t.transform).cameraToCenterDistance,u_viewport_size:[b.width,b.height]};d.draw(l,c.TRIANGLES,wn.disabled,En.disabled,t.colorModeForRenderPass(),Sn.disabled,i,t.style.terrain&&t.style.terrain.getTerrainData(n.coord),r.id,v,y,e.SegmentVector.simpleSegment(0,2*n.circleOffset,n.circleArray.length,n.circleArray.length/2),null,t.transform.zoom,null,null,null)}var b;v.destroy(),y.destroy()}Sn.disabled=new Sn(!1,1029,2305),Sn.backCCW=new Sn(!0,1029,2305);const kn=e.identity(new Float32Array(16));function Mn(t,n,r,i,o,a){const{horizontalAlign:s,verticalAlign:l}=e.getAnchorAlignment(t),c=-(s-.5)*n,u=-(l-.5)*r,h=e.evaluateVariableOffset(t,i);return new e.pointGeometry((c/o+h[0])*a,(u/o+h[1])*a)}function Pn(t,n,r,i,o,a,s,l,c,u,h){const f=t.text.placedSymbolArray,p=t.text.dynamicLayoutVertexArray,d=t.icon.dynamicLayoutVertexArray,m={};p.clear();for(let d=0;d<f.length;d++){const g=f.get(d),y=t.allowVerticalPlacement&&!g.placedOrientation,v=g.hidden||!g.crossTileID||y?null:i[g.crossTileID];if(v){const i=new e.pointGeometry(g.anchorX,g.anchorY),f=se(i,r?s:a,h),d=le(o.cameraToCenterDistance,f.signedDistanceFromCamera);let y=e.evaluateSizeForFeature(t.textSizeData,c,g)*d/e.ONE_EM;r&&(y*=t.tilePixelRatio/l);const{width:b,height:_,anchor:x,textOffset:A,textBoxScale:w}=v,C=Mn(x,b,_,A,w,y),E=r?se(i.add(C),a,h).point:f.point.add(n?C.rotate(-o.angle):C),S=t.allowVerticalPlacement&&g.placedOrientation===e.WritingMode.vertical?Math.PI/2:0;for(let t=0;t<g.numGlyphs;t++)e.addDynamicAttributes(p,E,S);u&&g.associatedIconIndex>=0&&(m[g.associatedIconIndex]={shiftedAnchor:E,angle:S})}else ye(g.numGlyphs,p)}if(u){d.clear();const n=t.icon.placedSymbolArray;for(let t=0;t<n.length;t++){const r=n.get(t);if(r.hidden)ye(r.numGlyphs,d);else{const n=m[t];if(n)for(let t=0;t<r.numGlyphs;t++)e.addDynamicAttributes(d,n.shiftedAnchor,n.angle);else ye(r.numGlyphs,d)}}t.icon.dynamicLayoutVertexBuffer.updateData(d)}t.text.dynamicLayoutVertexBuffer.updateData(p)}function In(e,t,n){return n.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function On(t,n,r,i,o,a,s,l,c,u,h,f){const p=t.context,d=p.gl,m=t.transform,g="map"===l,y="map"===c,v="viewport"!==l&&"point"!==r.layout.get("symbol-placement"),b=g&&!y&&!v,_=!r.layout.get("symbol-sort-key").isConstant();let x=!1;const A=t.depthModeForSublayer(0,wn.ReadOnly),w=r.layout.get("text-variable-anchor"),C=[];for(const l of i){const i=n.getTile(l),c=i.getBucket(r);if(!c)continue;const h=o?c.text:c.icon;if(!h||!h.segments.get().length)continue;const f=h.programConfigurations.get(r.id),p=o||c.sdfIcons,A=o?c.textSizeData:c.iconSizeData,E=y||0!==m.pitch,S=t.useProgram(In(p,o,c),f),T=e.evaluateSizeForZoom(A,m.zoom),B=t.style.terrain&&t.style.terrain.getTerrainData(l);let k,M,P,I,O=[0,0],D=null;if(o){if(M=i.glyphAtlasTexture,P=d.LINEAR,k=i.glyphAtlasTexture.size,c.iconsInText){O=i.imageAtlasTexture.size,D=i.imageAtlasTexture;const e="composite"===A.kind||"camera"===A.kind;I=E||t.options.rotating||t.options.zooming||e?d.LINEAR:d.NEAREST}}else{const e=1!==r.layout.get("icon-size").constantOr(0)||c.iconsNeedLinear;M=i.imageAtlasTexture,P=p||t.options.rotating||t.options.zooming||e||E?d.LINEAR:d.NEAREST,k=i.imageAtlasTexture.size}const z=xe(i,1,t.transform.zoom),L=oe(l.posMatrix,y,g,t.transform,z),R=ae(l.posMatrix,y,g,t.transform,z),F=w&&c.hasTextData(),U="none"!==r.layout.get("icon-text-fit")&&F&&c.hasIconData();if(v){const e=t.style.terrain?(e,n)=>t.style.terrain.getElevation(l,e,n):null,n="map"===r.layout.get("text-rotation-alignment");ue(c,l.posMatrix,t,o,L,R,y,u,n,e)}const N=t.translatePosMatrix(l.posMatrix,i,a,s),j=v||o&&w||U?kn:L,V=t.translatePosMatrix(R,i,a,s,!0),G=p&&0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1);let q;q=p?c.iconsInText?Pt(A.kind,T,b,y,t,N,j,V,k,O):Mt(A.kind,T,b,y,t,N,j,V,o,k,!0):kt(A.kind,T,b,y,t,N,j,V,o,k);const W={program:S,buffers:h,uniformValues:q,atlasTexture:M,atlasTextureIcon:D,atlasInterpolation:P,atlasInterpolationIcon:I,isSDF:p,hasHalo:G};if(_&&c.canOverlap){x=!0;const t=h.segments.get();for(const n of t)C.push({segments:new e.SegmentVector([n]),sortKey:n.sortKey,state:W,terrainData:B})}else C.push({segments:h.segments,sortKey:0,state:W,terrainData:B})}x&&C.sort(((e,t)=>e.sortKey-t.sortKey));for(const e of C){const n=e.state;if(p.activeTexture.set(d.TEXTURE0),n.atlasTexture.bind(n.atlasInterpolation,d.CLAMP_TO_EDGE),n.atlasTextureIcon&&(p.activeTexture.set(d.TEXTURE1),n.atlasTextureIcon&&n.atlasTextureIcon.bind(n.atlasInterpolationIcon,d.CLAMP_TO_EDGE)),n.isSDF){const i=n.uniformValues;n.hasHalo&&(i.u_is_halo=1,Dn(n.buffers,e.segments,r,t,n.program,A,h,f,i,e.terrainData)),i.u_is_halo=0}Dn(n.buffers,e.segments,r,t,n.program,A,h,f,n.uniformValues,e.terrainData)}}function Dn(e,t,n,r,i,o,a,s,l,c){const u=r.context;i.draw(u,u.gl.TRIANGLES,o,a,s,Sn.disabled,l,c,n.id,e.layoutVertexBuffer,e.indexBuffer,t,n.paint,r.transform.zoom,e.programConfigurations.get(n.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}function zn(e,t,n,r,i,o,a){const s=e.context.gl,l=n.paint.get("fill-pattern"),c=l&&l.constantOr(1),u=n.getCrossfadeParameters();let h,f,p,d,m;a?(f=c&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",h=s.LINES):(f=c?"fillPattern":"fill",h=s.TRIANGLES);for(const g of r){const r=t.getTile(g);if(c&&!r.patternsLoaded())continue;const y=r.getBucket(n);if(!y)continue;const v=y.programConfigurations.get(n.id),b=e.useProgram(f,v),_=e.style.terrain&&e.style.terrain.getTerrainData(g);c&&(e.context.activeTexture.set(s.TEXTURE0),r.imageAtlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE),v.updatePaintBuffers(u));const x=l.constantOr(null);if(x&&r.imageAtlas){const e=r.imageAtlas,t=e.patternPositions[x.to.toString()],n=e.patternPositions[x.from.toString()];t&&n&&v.setConstantPatternPositions(t,n)}const A=_?g:null,w=e.translatePosMatrix(A?A.posMatrix:g.posMatrix,r,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(a){d=y.indexBuffer2,m=y.segments2;const t=[s.drawingBufferWidth,s.drawingBufferHeight];p="fillOutlinePattern"===f&&c?dt(w,e,u,r,t):pt(w,t)}else d=y.indexBuffer,m=y.segments,p=c?ft(w,e,u,r):ht(w);b.draw(e.context,h,i,e.stencilModeForClipping(g),o,Sn.disabled,p,_,n.id,y.layoutVertexBuffer,d,m,n.paint,e.transform.zoom,v)}}function Ln(e,t,n,r,i,o,a){const s=e.context,l=s.gl,c=n.paint.get("fill-extrusion-pattern"),u=c.constantOr(1),h=n.getCrossfadeParameters(),f=n.paint.get("fill-extrusion-opacity");for(const p of r){const r=t.getTile(p),d=r.getBucket(n);if(!d)continue;const m=e.style.terrain&&e.style.terrain.getTerrainData(p),g=d.programConfigurations.get(n.id),y=e.useProgram(u?"fillExtrusionPattern":"fillExtrusion",g);u&&(e.context.activeTexture.set(l.TEXTURE0),r.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),g.updatePaintBuffers(h));const v=c.constantOr(null);if(v&&r.imageAtlas){const e=r.imageAtlas,t=e.patternPositions[v.to.toString()],n=e.patternPositions[v.from.toString()];t&&n&&g.setConstantPatternPositions(t,n)}const b=e.translatePosMatrix(p.posMatrix,r,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),_=n.paint.get("fill-extrusion-vertical-gradient"),x=u?ut(b,e,_,f,p,h,r):ct(b,e,_,f);y.draw(s,s.gl.TRIANGLES,i,o,a,Sn.backCCW,x,m,n.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,n.paint,e.transform.zoom,g,e.style.terrain&&d.centroidVertexBuffer)}}function Rn(e,t,n,r,i,o,a){const s=e.context,l=s.gl,c=n.fbo;if(!c)return;const u=e.useProgram("hillshade"),h=e.style.terrain&&e.style.terrain.getTerrainData(t);s.activeTexture.set(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,c.colorAttachment.get()),u.draw(s,l.TRIANGLES,i,o,a,Sn.disabled,((e,t,n,r)=>{const i=n.paint.get("hillshade-shadow-color"),o=n.paint.get("hillshade-highlight-color"),a=n.paint.get("hillshade-accent-color");let s=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);const l=!e.options.moving;return{u_matrix:r?r.posMatrix:e.transform.calculatePosMatrix(t.tileID.toUnwrapped(),l),u_image:0,u_latrange:_t(0,t.tileID),u_light:[n.paint.get("hillshade-exaggeration"),s],u_shadow:i,u_highlight:o,u_accent:a}})(e,n,r,h?t:null),h,r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}function Fn(t,n,r,i,o,a){const s=t.context,c=s.gl,u=n.dem;if(u&&u.data){const h=u.dim,f=u.stride,p=u.getPixels();if(s.activeTexture.set(c.TEXTURE1),s.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||t.getTileTexture(f),n.demTexture){const e=n.demTexture;e.update(p,{premultiply:!1}),e.bind(c.NEAREST,c.CLAMP_TO_EDGE)}else n.demTexture=new l(s,p,c.RGBA,{premultiply:!1}),n.demTexture.bind(c.NEAREST,c.CLAMP_TO_EDGE);s.activeTexture.set(c.TEXTURE0);let d=n.fbo;if(!d){const e=new l(s,{width:h,height:h,data:null},c.RGBA);e.bind(c.LINEAR,c.CLAMP_TO_EDGE),d=n.fbo=s.createFramebuffer(h,h,!0),d.colorAttachment.set(e.texture)}s.bindFramebuffer.set(d.framebuffer),s.viewport.set([0,0,h,h]),t.useProgram("hillshadePrepare").draw(s,c.TRIANGLES,i,o,a,Sn.disabled,((t,n)=>{const r=n.stride,i=e.create();return e.ortho(i,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(i,i,[0,-e.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[r,r],u_zoom:t.overscaledZ,u_unpack:n.getUnpackVector()}})(n.tileID,u),null,r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function Un(t,n,r,i,o,a){const s=i.paint.get("raster-fade-duration");if(!a&&s>0){const i=e.exported.now(),a=(i-t.timeAdded)/s,l=n?(i-n.timeAdded)/s:-1,c=r.getSource(),u=o.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),h=!n||Math.abs(n.tileID.overscaledZ-u)>Math.abs(t.tileID.overscaledZ-u),f=h&&t.refreshedUponExpiration?1:e.clamp(h?a:1-l,0,1);return t.refreshedUponExpiration&&a>=1&&(t.refreshedUponExpiration=!1),n?{opacity:1,mix:1-f}:{opacity:f,mix:0}}return{opacity:1,mix:0}}const Nn=new e.Color(1,0,0,1),jn=new e.Color(0,1,0,1),Vn=new e.Color(0,0,1,1),Gn=new e.Color(1,0,1,1),qn=new e.Color(0,1,1,1);function Wn(e,t,n,r){$n(e,0,t+n/2,e.transform.width,n,r)}function Hn(e,t,n,r){$n(e,t-n/2,0,n,e.transform.height,r)}function $n(e,t,n,r,i,o){const a=e.context,s=a.gl;s.enable(s.SCISSOR_TEST),s.scissor(t*e.pixelRatio,n*e.pixelRatio,r*e.pixelRatio,i*e.pixelRatio),a.clear({color:o}),s.disable(s.SCISSOR_TEST)}function Xn(t,n,r){const i=t.context,o=i.gl,a=r.posMatrix,s=t.useProgram("debug"),l=wn.disabled,c=En.disabled,u=t.colorModeForRenderPass(),h="$debug",f=t.style.terrain&&t.style.terrain.getTerrainData(r);i.activeTexture.set(o.TEXTURE0),t.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE);const p=n.getTileByID(r.key).latestRawTileData,d=Math.floor((p&&p.byteLength||0)/1024),m=n.getTile(r).tileSize,g=512/Math.min(m,512)*(r.overscaledZ/t.transform.zoom)*.5;let y=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(y+=` => ${r.overscaledZ}`),function(e,t){e.initDebugOverlayCanvas();const n=e.debugOverlayCanvas,r=e.context.gl,i=e.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,n.width,n.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(t,5,5),i.strokeText(t,5,5),e.debugOverlayTexture.update(n),e.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(t,`${y} ${d}kB`),s.draw(i,o.TRIANGLES,l,c,xn.alphaBlended,Sn.disabled,yt(a,e.Color.transparent,g),null,h,t.debugBuffer,t.quadTriangleIndexBuffer,t.debugSegments),s.draw(i,o.LINE_STRIP,l,c,u,Sn.disabled,yt(a,e.Color.red),f,h,t.debugBuffer,t.tileBorderIndexBuffer,t.debugSegments)}function Zn(e,t,n){const r=e.context,i=r.gl,o=e.colorModeForRenderPass(),a=new wn(i.LEQUAL,wn.ReadWrite,e.depthRangeFor3D),s=e.useProgram("terrain"),l=t.getTerrainMesh(),c=t.getTerrainData(n.tileID);r.bindFramebuffer.set(null),r.viewport.set([0,0,e.width,e.height]),r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,t.getRTTFramebuffer().colorAttachment.get());const u=e.transform.calculatePosMatrix(n.tileID.toUnwrapped());s.draw(r,i.TRIANGLES,a,En.disabled,o,Sn.backCCW,{u_matrix:u,u_texture:0},c,"terrain",l.vertexBuffer,l.indexBuffer,l.segments)}function Yn(e,t,n,r){const i=e.context,o=n.tileSize*t.qualityFactor;n.textures[r]||(n.textures[r]=e.getTileTexture(o)||new l(i,{width:o,height:o,data:null},i.gl.RGBA),n.textures[r].bind(i.gl.LINEAR,i.gl.CLAMP_TO_EDGE),0===r&&t.sourceCache.renderHistory.unshift(n.tileID.key));const a=t.getRTTFramebuffer();a.colorAttachment.set(n.textures[r].texture),i.bindFramebuffer.set(a.framebuffer),i.viewport.set([0,0,o,o])}class Kn{constructor(e){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=e,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=e.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const e=this.painter.style,t=e.terrain;for(const n in e.sourceCaches){this._coordsDescendingInv[n]={};const r=e.sourceCaches[n].getVisibleCoordinates();for(const e of r){const r=t.sourceCache.getTerrainCoords(e);for(const e in r)this._coordsDescendingInv[n][e]||(this._coordsDescendingInv[n][e]=[]),this._coordsDescendingInv[n][e].push(r[e])}}for(const t of e._order){const n=e._layers[t],r=n.source;if(this._renderToTexture[n.type]&&!this._coordsDescendingInvStr[r]){this._coordsDescendingInvStr[r]={};for(const e in this._coordsDescendingInv[r])this._coordsDescendingInvStr[r][e]=this._coordsDescendingInv[r][e].map((e=>e.key)).sort().join()}}return this._renderableTiles.forEach((e=>{for(const n in this._coordsDescendingInvStr){const r=this._coordsDescendingInvStr[n][e.tileID.key];r&&r!==e.textureCoords[n]&&e.clearTextures(this.painter),t.needsRerender(n,e.tileID)&&e.clearTextures(this.painter)}this._rerender[e.tileID.key]=!e.textures.length})),t.clearRerenderCache(),t.sourceCache.removeOutdated(this.painter),this}renderLayer(t){const n=t.type,r=this.painter,i=r.style._order,o=r.currentLayer,a=o+1===i.length;if(this._renderToTexture[n]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=n,this._stacks[this._stacks.length-1].push(i[o]),!a))return!0;if(this._renderToTexture[this._prevType]||"hillshade"===n||this._renderToTexture[n]&&a){this._prevType=n;const a=this._stacks.length-1,s=this._stacks[a]||[];for(const t of this._renderableTiles){if(Yn(r,r.style.terrain,t,a),this._rerender[t.tileID.key]){r.context.clear({color:e.Color.transparent});for(let e=0;e<s.length;e++){const n=r.style._layers[s[e]],i=n.source?this._coordsDescendingInv[n.source][t.tileID.key]:[t.tileID];r._renderTileClippingMasks(n,i),r.renderLayer(r,r.style.sourceCaches[n.source],n,i),n.source&&(t.textureCoords[n.source]=this._coordsDescendingInvStr[n.source][t.tileID.key])}}Zn(r,r.style.terrain,t)}if("hillshade"===n){this._stacks.push([i[o]]);for(const n of this._renderableTiles){const i=this._coordsDescendingInv[t.source][n.tileID.key];Yn(r,r.style.terrain,n,this._stacks.length-1),r.context.clear({color:e.Color.transparent}),r._renderTileClippingMasks(t,i),r.renderLayer(r,r.style.sourceCaches[t.source],t,i),Zn(r,r.style.terrain,n)}return!0}return this._renderToTexture[n]}return!1}}const Jn={symbol:function(t,n,r,i,o){if("translucent"!==t.renderPass)return;const a=En.disabled,s=t.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(t,n,r,i,o,a,s){const l=n.transform,c="map"===o,u="map"===a;for(const o of t){const t=i.getTile(o),a=t.getBucket(r);if(!a||!a.text||!a.text.segments.get().length)continue;const h=e.evaluateSizeForZoom(a.textSizeData,l.zoom),f=xe(t,1,n.transform.zoom),p=oe(o.posMatrix,u,c,n.transform,f),d="none"!==r.layout.get("icon-text-fit")&&a.hasIconData();if(h){const e=Math.pow(2,l.zoom-t.tileID.overscaledZ);Pn(a,c,u,s,l,p,o.posMatrix,e,h,d,n.style.terrain?(e,t)=>n.style.terrain.getElevation(o,e,t):null)}}}(i,t,r,n,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),o),0!==r.paint.get("icon-opacity").constantOr(1)&&On(t,n,r,i,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),a,s),0!==r.paint.get("text-opacity").constantOr(1)&&On(t,n,r,i,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),a,s),n.map.showCollisionBoxes&&(Bn(t,n,r,i,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),Bn(t,n,r,i,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))},circle:function(t,n,r,i){if("translucent"!==t.renderPass)return;const o=r.paint.get("circle-opacity"),a=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),l=!r.layout.get("circle-sort-key").isConstant();if(0===o.constantOr(1)&&(0===a.constantOr(1)||0===s.constantOr(1)))return;const c=t.context,u=c.gl,h=t.depthModeForSublayer(0,wn.ReadOnly),f=En.disabled,p=t.colorModeForRenderPass(),d=[];for(let o=0;o<i.length;o++){const a=i[o],s=n.getTile(a),c=s.getBucket(r);if(!c)continue;const u=c.programConfigurations.get(r.id),h=t.useProgram("circle",u),f=c.layoutVertexBuffer,p=c.indexBuffer,m=t.style.terrain&&t.style.terrain.getTerrainData(a),g={programConfiguration:u,program:h,layoutVertexBuffer:f,indexBuffer:p,uniformValues:mt(t,a,s,r),terrainData:m};if(l){const t=c.segments.get();for(const n of t)d.push({segments:new e.SegmentVector([n]),sortKey:n.sortKey,state:g})}else d.push({segments:c.segments,sortKey:0,state:g})}l&&d.sort(((e,t)=>e.sortKey-t.sortKey));for(const e of d){const{programConfiguration:n,program:i,layoutVertexBuffer:o,indexBuffer:a,uniformValues:s,terrainData:l}=e.state;i.draw(c,u.TRIANGLES,h,f,p,Sn.disabled,s,l,r.id,o,a,e.segments,r.paint,t.transform.zoom,n)}},heatmap:function(t,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){const o=t.context,a=o.gl,s=En.disabled,l=new xn([a.ONE,a.ONE],e.Color.transparent,[!0,!0,!0,!0]);!function(e,t,n){const r=e.gl;e.activeTexture.set(r.TEXTURE1),e.viewport.set([0,0,t.width/4,t.height/4]);let i=n.heatmapFbo;if(i)r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),e.bindFramebuffer.set(i.framebuffer);else{const o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),i=n.heatmapFbo=e.createFramebuffer(t.width/4,t.height/4,!1),function(e,t,n,r){const i=e.gl;i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t.width/4,t.height/4,0,i.RGBA,e.extRenderToTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:i.UNSIGNED_BYTE,null),r.colorAttachment.set(n)}(e,t,o,i)}}(o,t,r),o.clear({color:e.Color.transparent});for(let e=0;e<i.length;e++){const c=i[e];if(n.hasRenderableParent(c))continue;const u=n.getTile(c),h=u.getBucket(r);if(!h)continue;const f=h.programConfigurations.get(r.id),p=t.useProgram("heatmap",f),{zoom:d}=t.transform;p.draw(o,a.TRIANGLES,wn.disabled,s,l,Sn.disabled,bt(c.posMatrix,u,d,r.paint.get("heatmap-intensity")),null,r.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,r.paint,t.transform.zoom,f)}o.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,n){const r=t.context,i=r.gl,o=n.heatmapFbo;if(!o)return;r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);let a=n.colorRampTexture;a||(a=n.colorRampTexture=new l(r,n.colorRamp,i.RGBA)),a.bind(i.LINEAR,i.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(r,i.TRIANGLES,wn.disabled,En.disabled,t.colorModeForRenderPass(),Sn.disabled,((t,n,r,i)=>{const o=e.create();e.ortho(o,0,t.width,t.height,0,0,1);const a=t.context.gl;return{u_matrix:o,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:n.paint.get("heatmap-opacity")}})(t,n),null,n.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,n.paint,t.transform.zoom)}(t,r))},line:function(t,n,r,i){if("translucent"!==t.renderPass)return;const o=r.paint.get("line-opacity"),a=r.paint.get("line-width");if(0===o.constantOr(1)||0===a.constantOr(1))return;const s=t.depthModeForSublayer(0,wn.ReadOnly),c=t.colorModeForRenderPass(),u=r.paint.get("line-dasharray"),h=r.paint.get("line-pattern"),f=h.constantOr(1),p=r.paint.get("line-gradient"),d=r.getCrossfadeParameters(),m=f?"linePattern":u?"lineSDF":p?"lineGradient":"line",g=t.context,y=g.gl;let v=!0;for(const o of i){const i=n.getTile(o);if(f&&!i.patternsLoaded())continue;const a=i.getBucket(r);if(!a)continue;const b=a.programConfigurations.get(r.id),_=t.context.program.get(),x=t.useProgram(m,b),A=v||x.program!==_,w=t.style.terrain&&t.style.terrain.getTerrainData(o),C=h.constantOr(null);if(C&&i.imageAtlas){const e=i.imageAtlas,t=e.patternPositions[C.to.toString()],n=e.patternPositions[C.from.toString()];t&&n&&b.setConstantPatternPositions(t,n)}const E=w?o:null,S=f?wt(t,i,r,d,E):u?Ct(t,i,r,u,d,E):p?At(t,i,r,a.lineClipsArray.length,E):xt(t,i,r,E);if(f)g.activeTexture.set(y.TEXTURE0),i.imageAtlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),b.updatePaintBuffers(d);else if(u&&(A||t.lineAtlas.dirty))g.activeTexture.set(y.TEXTURE0),t.lineAtlas.bind(g);else if(p){const i=a.gradients[r.id];let s=i.texture;if(r.gradientVersion!==i.version){let c=256;if(r.stepInterpolant){const r=n.getSource().maxzoom,i=o.canonical.z===r?Math.ceil(1<<t.transform.maxZoom-o.canonical.z):1;c=e.clamp(e.nextPowerOfTwo(a.maxLineLength/e.EXTENT*1024*i),256,g.maxTextureSize)}i.gradient=e.renderColorRamp({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:c,image:i.gradient||void 0,clips:a.lineClipsArray}),i.texture?i.texture.update(i.gradient):i.texture=new l(g,i.gradient,y.RGBA),i.version=r.gradientVersion,s=i.texture}g.activeTexture.set(y.TEXTURE0),s.bind(r.stepInterpolant?y.NEAREST:y.LINEAR,y.CLAMP_TO_EDGE)}x.draw(g,y.TRIANGLES,s,t.stencilModeForClipping(o),c,Sn.disabled,S,w,r.id,a.layoutVertexBuffer,a.indexBuffer,a.segments,r.paint,t.transform.zoom,b,a.layoutVertexBuffer2),v=!1}},fill:function(t,n,r,i){const o=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0===a.constantOr(1))return;const s=t.colorModeForRenderPass(),l=r.paint.get("fill-pattern"),c=t.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===o.constantOr(e.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(t.renderPass===c){const e=t.depthModeForSublayer(1,"opaque"===t.renderPass?wn.ReadWrite:wn.ReadOnly);zn(t,n,r,i,e,s,!1)}if("translucent"===t.renderPass&&r.paint.get("fill-antialias")){const e=t.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,wn.ReadOnly);zn(t,n,r,i,e,s,!0)}},"fill-extrusion":function(e,t,n,r){const i=n.paint.get("fill-extrusion-opacity");if(0!==i&&"translucent"===e.renderPass){const o=new wn(e.context.gl.LEQUAL,wn.ReadWrite,e.depthRangeFor3D);if(1!==i||n.paint.get("fill-extrusion-pattern").constantOr(1))Ln(e,t,n,r,o,En.disabled,xn.disabled),Ln(e,t,n,r,o,e.stencilModeFor3D(),e.colorModeForRenderPass());else{const i=e.colorModeForRenderPass();Ln(e,t,n,r,o,En.disabled,i)}}},hillshade:function(e,t,n,r){if("offscreen"!==e.renderPass&&"translucent"!==e.renderPass)return;const i=e.context,o=e.depthModeForSublayer(0,wn.ReadOnly),a=e.colorModeForRenderPass(),[s,l]="translucent"===e.renderPass?e.stencilConfigForOverlap(r):[{},r];for(const r of l){const i=t.getTile(r);void 0!==i.needsHillshadePrepare&&i.needsHillshadePrepare&&"offscreen"===e.renderPass?Fn(e,i,n,o,En.disabled,a):"translucent"===e.renderPass&&Rn(e,r,i,n,o,s[r.overscaledZ],a)}i.viewport.set([0,0,e.width,e.height])},raster:function(e,t,n,r){if("translucent"!==e.renderPass)return;if(0===n.paint.get("raster-opacity"))return;if(!r.length)return;const i=e.context,o=i.gl,a=t.getSource(),s=e.useProgram("raster"),l=e.colorModeForRenderPass(),[c,u]=a instanceof B?[{},r]:e.stencilConfigForOverlap(r),h=u[u.length-1].overscaledZ,f=!e.options.moving;for(const r of u){const u=e.depthModeForSublayer(r.overscaledZ-h,1===n.paint.get("raster-opacity")?wn.ReadWrite:wn.ReadOnly,o.LESS),p=t.getTile(r);p.registerFadeDuration(n.paint.get("raster-fade-duration"));const d=t.findLoadedParent(r,0),m=Un(p,d,t,n,e.transform,e.style.terrain);let g,y;const v="nearest"===n.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;i.activeTexture.set(o.TEXTURE0),p.texture.bind(v,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),i.activeTexture.set(o.TEXTURE1),d?(d.texture.bind(v,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),g=Math.pow(2,d.tileID.overscaledZ-p.tileID.overscaledZ),y=[p.tileID.canonical.x*g%1,p.tileID.canonical.y*g%1]):p.texture.bind(v,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);const b=e.style.terrain&&e.style.terrain.getTerrainData(r),_=b?r:null,x=_?_.posMatrix:e.transform.calculatePosMatrix(r.toUnwrapped(),f),A=Tt(x,y||[0,0],g||1,m,n);a instanceof B?s.draw(i,o.TRIANGLES,u,En.disabled,l,Sn.disabled,A,b,n.id,a.boundsBuffer,e.quadTriangleIndexBuffer,a.boundsSegments):s.draw(i,o.TRIANGLES,u,c[r.overscaledZ],l,Sn.disabled,A,b,n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}},background:function(e,t,n,r){const i=n.paint.get("background-color"),o=n.paint.get("background-opacity");if(0===o)return;const a=e.context,s=a.gl,l=e.transform,c=l.tileSize,u=n.paint.get("background-pattern");if(e.isPatternMissing(u))return;const h=!u&&1===i.a&&1===o&&e.opaquePassEnabledForLayer()?"opaque":"translucent";if(e.renderPass!==h)return;const f=En.disabled,p=e.depthModeForSublayer(0,"opaque"===h?wn.ReadWrite:wn.ReadOnly),d=e.colorModeForRenderPass(),m=e.useProgram(u?"backgroundPattern":"background"),g=r||l.coveringTiles({tileSize:c,terrain:e.style.terrain});u&&(a.activeTexture.set(s.TEXTURE0),e.imageManager.bind(e.context));const y=n.getCrossfadeParameters();for(const t of g){const l=r?t.posMatrix:e.transform.calculatePosMatrix(t.toUnwrapped()),h=u?Ot(l,o,e,u,{tileID:t,tileSize:c},y):It(l,o,i),g=e.style.terrain&&e.style.terrain.getTerrainData(t);m.draw(a,s.TRIANGLES,p,f,d,Sn.disabled,h,g,n.id,e.tileExtentBuffer,e.quadTriangleIndexBuffer,e.tileExtentSegments)}},debug:function(e,t,n){for(let r=0;r<n.length;r++)Xn(e,t,n[r])},custom:function(e,t,n){const r=e.context,i=n.implementation;if("offscreen"===e.renderPass){const t=i.prerender;t&&(e.setCustomLayerDefaults(),r.setColorMode(e.colorModeForRenderPass()),t.call(i,r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState())}else if("translucent"===e.renderPass){e.setCustomLayerDefaults(),r.setColorMode(e.colorModeForRenderPass()),r.setStencilMode(En.disabled);const t="3d"===i.renderingMode?new wn(e.context.gl.LEQUAL,wn.ReadWrite,e.depthRangeFor3D):e.depthModeForSublayer(0,wn.ReadOnly);r.setDepthMode(t),i.render(r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState(),r.bindFramebuffer.set(null)}}};class Qn{constructor(t,n){this.context=new An(t),this.transform=n,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:e.create(),renderTime:0},this.setup(),this.numSublayers=F.maxUnderzooming+F.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new $e,this.gpuTimers={}}resize(e,t,n){if(this.width=e*n,this.height=t*n,this.pixelRatio=n,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const e of this.style._order)this.style._layers[e].resize()}setup(){const t=this.context,n=new e.PosArray;n.emplaceBack(0,0),n.emplaceBack(e.EXTENT,0),n.emplaceBack(0,e.EXTENT),n.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(n,Xe.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);const r=new e.PosArray;r.emplaceBack(0,0),r.emplaceBack(e.EXTENT,0),r.emplaceBack(0,e.EXTENT),r.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=t.createVertexBuffer(r,Xe.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);const i=new e.RasterBoundsArray;i.emplaceBack(0,0,0,0),i.emplaceBack(e.EXTENT,0,e.EXTENT,0),i.emplaceBack(0,e.EXTENT,0,e.EXTENT),i.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=t.createVertexBuffer(i,T.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);const o=new e.PosArray;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(o,Xe.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);const a=new e.LineStripIndexArray;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(a);const s=new e.TriangleIndexArray;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(s),this.emptyTexture=new l(t,{width:1,height:1,data:new Uint8Array([0,0,0,0])},t.gl.RGBA);const c=this.context.gl;this.stencilClearMode=new En({func:c.ALWAYS,mask:0},0,255,c.ZERO,c.ZERO,c.ZERO)}clearStencil(){const t=this.context,n=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const r=e.create();e.ortho(r,0,this.width,this.height,0,0,1),e.scale(r,r,[n.drawingBufferWidth,n.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(t,n.TRIANGLES,wn.disabled,this.stencilClearMode,xn.disabled,Sn.disabled,vt(r),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,t){if(this.currentStencilSource===e.source||!e.isTileClipped()||!t||!t.length)return;this.currentStencilSource=e.source;const n=this.context,r=n.gl;this.nextStencilID+t.length>256&&this.clearStencil(),n.setColorMode(xn.disabled),n.setDepthMode(wn.disabled);const i=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const e of t){const t=this._tileClippingMaskIDs[e.key]=this.nextStencilID++,o=this.style.terrain&&this.style.terrain.getTerrainData(e);i.draw(n,r.TRIANGLES,wn.disabled,new En({func:r.ALWAYS,mask:0},t,255,r.KEEP,r.KEEP,r.REPLACE),xn.disabled,Sn.disabled,vt(e.posMatrix),o,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,t=this.context.gl;return new En({func:t.NOTEQUAL,mask:255},e,255,t.KEEP,t.KEEP,t.REPLACE)}stencilModeForClipping(e){const t=this.context.gl;return new En({func:t.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,t.KEEP,t.KEEP,t.REPLACE)}stencilConfigForOverlap(e){const t=this.context.gl,n=e.sort(((e,t)=>t.overscaledZ-e.overscaledZ)),r=n[n.length-1].overscaledZ,i=n[0].overscaledZ-r+1;if(i>1){this.currentStencilSource=void 0,this.nextStencilID+i>256&&this.clearStencil();const e={};for(let n=0;n<i;n++)e[n+r]=new En({func:t.GEQUAL,mask:255},n+this.nextStencilID,255,t.KEEP,t.KEEP,t.REPLACE);return this.nextStencilID+=i,[e,n]}return[{[r]:En.disabled},n]}colorModeForRenderPass(){const t=this.context.gl;if(this._showOverdrawInspector){const n=1/8;return new xn([t.CONSTANT_COLOR,t.ONE],new e.Color(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?xn.unblended:xn.alphaBlended}depthModeForSublayer(e,t,n){if(!this.opaquePassEnabledForLayer())return wn.disabled;const r=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new wn(n||this.context.gl.LEQUAL,t,[r,r])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,n){this.style=t,this.options=n,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.exported.now()),this.imageManager.beginFrame();const r=this.style._order,i=this.style.sourceCaches,o=this.style.terrain&&new Kn(this);for(const e in i){const t=i[e];t.used&&t.prepare(this.context)}const a={},s={},l={};for(const e in i){const t=i[e];a[e]=t.getVisibleCoordinates(),s[e]=a[e].slice().reverse(),l[e]=t.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let e=0;e<r.length;e++)if(this.style._layers[r[e]].is3D()){this.opaquePassCutoff=e;break}if(o){this.opaquePassCutoff=0;const t=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!e.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||t.length)&&(e.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(t,n){const r=t.context,i=r.gl,o=xn.unblended,a=new wn(i.LEQUAL,wn.ReadWrite,[0,1]),s=n.getTerrainMesh(),l=n.sourceCache.getRenderableTiles(),c=t.useProgram("terrainDepth");r.bindFramebuffer.set(n.getFramebuffer("depth").framebuffer),r.viewport.set([0,0,t.width/devicePixelRatio,t.height/devicePixelRatio]),r.clear({color:e.Color.transparent,depth:1});for(const e of l){const l=n.getTerrainData(e.tileID),u=t.transform.calculatePosMatrix(e.tileID.toUnwrapped());c.draw(r,i.TRIANGLES,a,En.disabled,o,Sn.backCCW,{u_matrix:u},l,"terrain",s.vertexBuffer,s.indexBuffer,s.segments)}r.bindFramebuffer.set(null),r.viewport.set([0,0,t.width,t.height])}(this,this.style.terrain),function(t,n){const r=t.context,i=r.gl,o=xn.unblended,a=new wn(i.LEQUAL,wn.ReadWrite,[0,1]),s=n.getTerrainMesh(),l=n.getCoordsTexture(),c=n.sourceCache.getRenderableTiles(),u=t.useProgram("terrainCoords");r.bindFramebuffer.set(n.getFramebuffer("coords").framebuffer),r.viewport.set([0,0,t.width/devicePixelRatio,t.height/devicePixelRatio]),r.clear({color:e.Color.transparent,depth:1}),n.coordsIndex=[];for(const e of c){const c=n.getTerrainData(e.tileID);r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,l.texture);const h=t.transform.calculatePosMatrix(e.tileID.toUnwrapped());u.draw(r,i.TRIANGLES,a,En.disabled,o,Sn.backCCW,{u_matrix:h,u_terrain_coords_id:(255-n.coordsIndex.length)/255,u_texture:0},c,"terrain",s.vertexBuffer,s.indexBuffer,s.segments),n.coordsIndex.push(e.tileID.key)}r.bindFramebuffer.set(null),r.viewport.set([0,0,t.width,t.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const e of r){const t=this.style._layers[e];if(!t.hasOffscreenPass()||t.isHidden(this.transform.zoom))continue;const n=s[t.source];("custom"===t.type||n.length)&&this.renderLayer(this,i[t.source],t,n)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],!o)for(this.renderPass="opaque",this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){const e=this.style._layers[r[this.currentLayer]],t=i[e.source],n=a[e.source];this._renderTileClippingMasks(e,n),this.renderLayer(this,t,e,n)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<r.length;this.currentLayer++){const e=this.style._layers[r[this.currentLayer]],t=i[e.source];if(o&&o.renderLayer(e))continue;const n=("symbol"===e.type?l:s)[e.source];this._renderTileClippingMasks(e,a[e.source]),this.renderLayer(this,t,e,n)}if(this.options.showTileBoundaries){let e,t;Object.values(this.style._layers).forEach((n=>{n.source&&!n.isHidden(this.transform.zoom)&&(n.source!==(t&&t.id)&&(t=this.style.sourceCaches[n.source]),(!e||e.getSource().maxzoom<t.getSource().maxzoom)&&(e=t))})),e&&Jn.debug(this,e,e.getVisibleCoordinates())}this.options.showPadding&&function(e){const t=e.transform.padding;Wn(e,e.transform.height-(t.top||0),3,Nn),Wn(e,t.bottom||0,3,jn),Hn(e,t.left||0,3,Vn),Hn(e,e.transform.width-(t.right||0),3,Gn);const n=e.transform.centerPoint;!function(e,t,n,r){$n(e,t-1,n-10,2,20,r),$n(e,t-10,n-1,20,2,r)}(e,n.x,e.transform.height-n.y,qn)}(this),this.context.setDefault()}renderLayer(e,t,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"custom"===n.type||(r||[]).length)&&(this.id=n.id,this.gpuTimingStart(n),Jn[n.type](e,t,n,r,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(e){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;let n=this.gpuTimers[e.id];n||(n=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:t.createQueryEXT()}),n.calls++,t.beginQueryEXT(t.TIME_ELAPSED_EXT,n.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}collectGpuTimers(){const e=this.gpuTimers;return this.gpuTimers={},e}queryGpuTimers(e){const t={};for(const n in e){const r=e[n],i=this.context.extTimerQuery,o=i.getQueryObjectEXT(r.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(r.query),t[n]=o}return t}translatePosMatrix(t,n,r,i,o){if(!r[0]&&!r[1])return t;const a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){const e=Math.sin(a),t=Math.cos(a);r=[r[0]*t-r[1]*e,r[0]*e+r[1]*t]}const s=[o?r[0]:xe(n,r[0],this.transform.zoom),o?r[1]:xe(n,r[1],this.transform.zoom),0],l=new Float32Array(16);return e.translate(l,t,s),l}saveTileTexture(e){const t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const t=this._tileTextures[e];return t&&t.length>0?t.pop():null}isPatternMissing(e){if(!e)return!1;if(!e.from||!e.to)return!0;const t=this.imageManager.getPattern(e.from.toString()),n=this.imageManager.getPattern(e.to.toString());return!t||!n}useProgram(e,t){this.cache=this.cache||{};const n=e+(t?t.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[n]||(this.cache[n]=new st(this.context,e,rt[e],t,Dt[e],this._showOverdrawInspector,this.style.terrain)),this.cache[n]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new l(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class er{constructor(e,t){this.points=e,this.planes=t}static fromInvProjectionMatrix(t,n,r){const i=Math.pow(2,r),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((r=>{const o=1/(r=e.transformMat4([],r,t))[3]/n*i;return e.mul$1(r,r,[o,o,1/r[3],o])})),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((t=>{const n=e.sub([],o[t[0]],o[t[1]]),r=e.sub([],o[t[2]],o[t[1]]),i=e.normalize([],e.cross([],n,r)),a=-e.dot(i,o[t[1]]);return i.concat(a)}));return new er(o,a)}}class tr{constructor(t,n){this.min=t,this.max=n,this.center=e.scale$1([],e.add([],this.min,this.max),.5)}quadrant(t){const n=[t%2==0,t<2],r=e.clone$2(this.min),i=e.clone$2(this.max);for(let e=0;e<n.length;e++)r[e]=n[e]?this.min[e]:this.center[e],i[e]=n[e]?this.center[e]:this.max[e];return i[2]=this.max[2],new tr(r,i)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}intersects(t){const n=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let r=!0;for(let i=0;i<t.planes.length;i++){const o=t.planes[i];let a=0;for(let t=0;t<n.length;t++)e.dot$1(o,n[t])>=0&&a++;if(0===a)return 0;a!==n.length&&(r=!1)}if(r)return 2;for(let e=0;e<3;e++){let n=Number.MAX_VALUE,r=-Number.MAX_VALUE;for(let i=0;i<t.points.length;i++){const o=t.points[i][e]-this.min[e];n=Math.min(n,o),r=Math.max(r,o)}if(r<0||n>this.max[e]-this.min[e])return 0}return 1}}class nr{constructor(e=0,t=0,n=0,r=0){if(isNaN(e)||e<0||isNaN(t)||t<0||isNaN(n)||n<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=t,this.left=n,this.right=r}interpolate(t,n,r){return null!=n.top&&null!=t.top&&(this.top=e.number(t.top,n.top,r)),null!=n.bottom&&null!=t.bottom&&(this.bottom=e.number(t.bottom,n.bottom,r)),null!=n.left&&null!=t.left&&(this.left=e.number(t.left,n.left,r)),null!=n.right&&null!=t.right&&(this.right=e.number(t.right,n.right,r)),this}getCenter(t,n){const r=e.clamp((this.left+t-this.right)/2,0,t),i=e.clamp((this.top+n-this.bottom)/2,0,n);return new e.pointGeometry(r,i)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new nr(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class rr{constructor(t,n,r,i,o){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=void 0===o||!!o,this._minZoom=t||0,this._maxZoom=n||22,this._minPitch=null==r?0:r,this._maxPitch=null==i?60:i,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new nr,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const e=new rr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return e.tileSize=this.tileSize,e.latRange=this.latRange,e.width=this.width,e.height=this.height,e._center=this._center,e._elevation=this._elevation,e.zoom=this.zoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._calcMatrices(),e}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new e.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(t){const n=-e.wrap(t,-180,180)*Math.PI/180;var r;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=(r=new e.ARRAY_TYPE(4),e.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r),function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);e[0]=r*l+o*s,e[1]=i*l+a*s,e[2]=r*-s+o*l,e[3]=i*-s+a*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(t){const n=e.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(e){const t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(e){e!==this._elevation&&(this._elevation=e,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,t,n){this._unmodified=!1,this._edgeInsets.interpolate(e,t,n),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){const t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}getVisibleUnwrappedCoordinates(t){const n=[new e.UnwrappedTileID(0,t)];if(this._renderWorldCopies){const r=this.pointCoordinate(new e.pointGeometry(0,0)),i=this.pointCoordinate(new e.pointGeometry(this.width,0)),o=this.pointCoordinate(new e.pointGeometry(this.width,this.height)),a=this.pointCoordinate(new e.pointGeometry(0,this.height)),s=Math.floor(Math.min(r.x,i.x,o.x,a.x)),l=Math.floor(Math.max(r.x,i.x,o.x,a.x)),c=1;for(let r=s-c;r<=l+c;r++)0!==r&&n.push(new e.UnwrappedTileID(r,t))}return n}coveringTiles(t){var n,r;let i=this.coveringZoomLevel(t);const o=i;if(void 0!==t.minzoom&&i<t.minzoom)return[];void 0!==t.maxzoom&&i>t.maxzoom&&(i=t.maxzoom);const a=this.pointCoordinate(this.getCameraPoint()),s=e.MercatorCoordinate.fromLngLat(this.center),l=Math.pow(2,i),c=[l*a.x,l*a.y,0],u=[l*s.x,l*s.y,0],h=er.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,i);let f=t.minzoom||0;!t.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(f=i);const p=t.terrain?2/Math.min(this.tileSize,t.tileSize)*this.tileSize:3,d=e=>({aabb:new tr([e*l,0,0],[(e+1)*l,l,0]),zoom:0,x:0,y:0,wrap:e,fullyVisible:!1}),m=[],g=[],y=i,v=t.reparseOverscaled?o:i;if(this._renderWorldCopies)for(let e=1;e<=3;e++)m.push(d(-e)),m.push(d(e));for(m.push(d(0));m.length>0;){const i=m.pop(),o=i.x,a=i.y;let s=i.fullyVisible;if(!s){const e=i.aabb.intersects(h);if(0===e)continue;s=2===e}const l=t.terrain?c:u,d=i.aabb.distanceX(l),b=i.aabb.distanceY(l),_=Math.max(Math.abs(d),Math.abs(b)),x=p+(1<<y-i.zoom)-2;if(i.zoom===y||_>x&&i.zoom>=f){const t=y-i.zoom,n=c[0]-.5-(o<<t),r=c[1]-.5-(a<<t);g.push({tileID:new e.OverscaledTileID(i.zoom===y?v:i.zoom,i.wrap,i.zoom,o,a),distanceSq:e.sqrLen([u[0]-.5-o,u[1]-.5-a]),tileDistanceToCamera:Math.sqrt(n*n+r*r)})}else for(let l=0;l<4;l++){const c=(o<<1)+l%2,u=(a<<1)+(l>>1),h=i.zoom+1;let f=i.aabb.quadrant(l);if(t.terrain){const o=new e.OverscaledTileID(h,i.wrap,h,c,u),a=t.terrain.getMinMaxElevation(o),s=null!==(n=a.minElevation)&&void 0!==n?n:this.elevation,l=null!==(r=a.maxElevation)&&void 0!==r?r:this.elevation;f=new tr([f.min[0],f.min[1],s],[f.max[0],f.max[1],l])}m.push({aabb:f,zoom:h,x:c,y:u,wrap:i.wrap,fullyVisible:s})}}return g.sort(((e,t)=>e.distanceSq-t.distanceSq)).map((e=>e.tileID))}resize(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(t){const n=e.clamp(t.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.pointGeometry(e.mercatorXfromLng(t.lng)*this.worldSize,e.mercatorYfromLat(n)*this.worldSize)}unproject(t){return new e.MercatorCoordinate(t.x/this.worldSize,t.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(e){this.freezeElevation||(this.elevation=e?this.getElevation(this._center,e):0)}getElevation(t,n){const r=e.MercatorCoordinate.fromLngLat(t),i=(1<<this.tileZoom)*e.EXTENT,o=r.x*i,a=r.y*i,s=Math.floor(o/e.EXTENT),l=Math.floor(a/e.EXTENT),c=new e.OverscaledTileID(this.tileZoom,0,this.tileZoom,s,l);return n.getElevation(c,o%e.EXTENT,a%e.EXTENT,e.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(t){const n=this.pointLocation(this.centerPoint,t),r=this.getElevation(n,t);if(!(this.elevation-r))return;const i=this.getCameraPosition(),o=e.MercatorCoordinate.fromLngLat(i.lngLat,i.altitude),a=e.MercatorCoordinate.fromLngLat(n,r),s=o.x-a.x,l=o.y-a.y,c=o.z-a.z,u=Math.sqrt(s*s+l*l+c*c),h=this.scaleZoom(this.cameraToCenterDistance/u/this.tileSize);this._elevation=r,this._center=n,this.zoom=h}setLocationAtPoint(t,n){const r=this.pointCoordinate(n),i=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(t),a=new e.MercatorCoordinate(o.x-(r.x-i.x),o.y-(r.y-i.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(e,t){return t?this.coordinatePoint(this.locationCoordinate(e),this.getElevation(e,t),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(e))}pointLocation(e,t){return this.coordinateLocation(this.pointCoordinate(e,t))}locationCoordinate(t){return e.MercatorCoordinate.fromLngLat(t)}coordinateLocation(e){return e&&e.toLngLat()}pointCoordinate(t,n){if(n){const e=n.pointCoordinate(t);if(null!=e)return e}const r=[t.x,t.y,0,1],i=[t.x,t.y,1,1];e.transformMat4(r,r,this.pixelMatrixInverse),e.transformMat4(i,i,this.pixelMatrixInverse);const o=r[3],a=i[3],s=r[1]/o,l=i[1]/a,c=r[2]/o,u=i[2]/a,h=c===u?0:(0-c)/(u-c);return new e.MercatorCoordinate(e.number(r[0]/o,i[0]/a,h)/this.worldSize,e.number(s,l,h)/this.worldSize)}coordinatePoint(t,n=0,r=this.pixelMatrix){const i=[t.x*this.worldSize,t.y*this.worldSize,n,1];return e.transformMat4(i,i,r),new e.pointGeometry(i[0]/i[3],i[1]/i[3])}getBounds(){const t=Math.max(0,this.height/2-this.getHorizon());return(new e.LngLatBounds).extend(this.pointLocation(new e.pointGeometry(0,t))).extend(this.pointLocation(new e.pointGeometry(this.width,t))).extend(this.pointLocation(new e.pointGeometry(this.width,this.height))).extend(this.pointLocation(new e.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(t,n=!1){const r=t.key,i=n?this._alignedPosMatrixCache:this._posMatrixCache;if(i[r])return i[r];const o=t.canonical,a=this.worldSize/this.zoomScale(o.z),s=o.x+Math.pow(2,o.z)*t.wrap,l=e.identity(new Float64Array(16));return e.translate(l,l,[s*a,o.y*a,0]),e.scale(l,l,[a/e.EXTENT,a/e.EXTENT,1]),e.multiply(l,n?this.alignedProjMatrix:this.projMatrix,l),i[r]=new Float32Array(l),i[r]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let t,n,r,i,o=-90,a=90,s=-180,l=180;const c=this.size,u=this._unmodified;if(this.latRange){const n=this.latRange;o=e.mercatorYfromLat(n[1])*this.worldSize,a=e.mercatorYfromLat(n[0])*this.worldSize,t=a-o<c.y?c.y/(a-o):0}if(this.lngRange){const t=this.lngRange;s=e.wrap(e.mercatorXfromLng(t[0])*this.worldSize,0,this.worldSize),l=e.wrap(e.mercatorXfromLng(t[1])*this.worldSize,0,this.worldSize),l<s&&(l+=this.worldSize),n=l-s<c.x?c.x/(l-s):0}const h=this.point,f=Math.max(n||0,t||0);if(f)return this.center=this.unproject(new e.pointGeometry(n?(l+s)/2:h.x,t?(a+o)/2:h.y)),this.zoom+=this.scaleZoom(f),this._unmodified=u,void(this._constraining=!1);if(this.latRange){const e=h.y,t=c.y/2;e-t<o&&(i=o+t),e+t>a&&(i=a-t)}if(this.lngRange){const t=(s+l)/2,n=e.wrap(h.x,t-this.worldSize/2,t+this.worldSize/2),i=c.x/2;n-i<s&&(r=s+i),n+i>l&&(r=l-i)}void 0===r&&void 0===i||(this.center=this.unproject(new e.pointGeometry(void 0!==r?r:h.x,void 0!==i?i:h.y)).wrap()),this._unmodified=u,this._constraining=!1}_calcMatrices(){if(!this.height)return;const t=this.centerOffset,n=this.point.x,r=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let i=e.identity(new Float64Array(16));e.scale(i,i,[this.width/2,-this.height/2,1]),e.translate(i,i,[1,-1,0]),this.labelPlaneMatrix=i,i=e.identity(new Float64Array(16)),e.scale(i,i,[1,-1,1]),e.translate(i,i,[-1,-1,0]),e.scale(i,i,[2/this.width,2/this.height,1]),this.glCoordMatrix=i,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const o=Math.PI/2+this._pitch,a=this._fov*(.5+t.y/this.height),s=Math.sin(a)*this.cameraToSeaLevelDistance/Math.sin(e.clamp(Math.PI-o-a,.01,Math.PI-.01)),l=this.getHorizon(),c=2*Math.atan(l/this.cameraToCenterDistance)*(.5+t.y/(2*l)),u=Math.sin(c)*this.cameraToSeaLevelDistance/Math.sin(e.clamp(Math.PI-o-c,.01,Math.PI-.01)),h=Math.cos(Math.PI/2-this._pitch)*s+this.cameraToSeaLevelDistance,f=Math.cos(Math.PI/2-this._pitch)*u+this.cameraToSeaLevelDistance,p=1.01*Math.min(h,f),d=this.height/50;i=new Float64Array(16),e.perspective(i,this._fov,this.width/this.height,d,p),i[8]=2*-t.x/this.width,i[9]=2*t.y/this.height,e.scale(i,i,[1,-1,1]),e.translate(i,i,[0,0,-this.cameraToCenterDistance]),e.rotateX(i,i,this._pitch),e.rotateZ(i,i,this.angle),e.translate(i,i,[-n,-r,0]),this.mercatorMatrix=e.scale([],i,[this.worldSize,this.worldSize,this.worldSize]),e.scale(i,i,[1,1,this._pixelPerMeter]),this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,i),e.translate(i,i,[0,0,-this.elevation]),this.projMatrix=i,this.invProjMatrix=e.invert([],i),this.pixelMatrix3D=e.multiply(new Float64Array(16),this.labelPlaneMatrix,i);const m=this.width%2/2,g=this.height%2/2,y=Math.cos(this.angle),v=Math.sin(this.angle),b=n-Math.round(n)+y*m+v*g,_=r-Math.round(r)+y*g+v*m,x=new Float64Array(i);if(e.translate(x,x,[b>.5?b-1:b,_>.5?_-1:_,0]),this.alignedProjMatrix=x,i=e.invert(new Float64Array(16),this.pixelMatrix),!i)throw new Error("failed to invert matrix");this.pixelMatrixInverse=i,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const t=this.pointCoordinate(new e.pointGeometry(0,0)),n=[t.x*this.worldSize,t.y*this.worldSize,0,1];return e.transformMat4(n,n,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.pointGeometry(0,t))}getCameraQueryGeometry(t){const n=this.getCameraPoint();if(1===t.length)return[t[0],n];{let r=n.x,i=n.y,o=n.x,a=n.y;for(const e of t)r=Math.min(r,e.x),i=Math.min(i,e.y),o=Math.max(o,e.x),a=Math.max(a,e.y);return[new e.pointGeometry(r,i),new e.pointGeometry(o,i),new e.pointGeometry(o,a),new e.pointGeometry(r,a),new e.pointGeometry(r,i)]}}}class ir{constructor(t){this._hashName=t&&encodeURIComponent(t),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(e,t){let n=!1,r=null;const i=()=>{r=null,n&&(e(),r=setTimeout(i,300),n=!1)};return()=>(n=!0,r||i(),r)}(this._updateHashUnthrottled.bind(this))}addTo(e){return this._map=e,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(e){const t=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,r=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,r),o=Math.round(t.lng*i)/i,a=Math.round(t.lat*i)/i,s=this._map.getBearing(),l=this._map.getPitch();let c="";if(c+=e?`/${o}/${a}/${n}`:`${n}/${a}/${o}`,(s||l)&&(c+="/"+Math.round(10*s)/10),l&&(c+=`/${Math.round(l)}`),this._hashName){const e=this._hashName;let t=!1;const n=window.location.hash.slice(1).split("&").map((n=>{const r=n.split("=")[0];return r===e?(t=!0,`${r}=${c}`):n})).filter((e=>e));return t||n.push(`${e}=${c}`),`#${n.join("&")}`}return`#${c}`}_getCurrentHash(){const e=window.location.hash.replace("#","");if(this._hashName){let t;return e.split("&").map((e=>e.split("="))).forEach((e=>{e[0]===this._hashName&&(t=e)})),(t&&t[1]||"").split("/")}return e.split("/")}_onHashChange(){const e=this._getCurrentHash();if(e.length>=3&&!e.some((e=>isNaN(e)))){const t=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(e[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:t,pitch:+(e[4]||0)}),!0}return!1}_updateHashUnthrottled(){const e=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,e)}catch(e){}}}const or={linearity:.3,easing:e.bezier(0,0,.3,1)},ar=e.extend({deceleration:2500,maxSpeed:1400},or),sr=e.extend({deceleration:20,maxSpeed:1400},or),lr=e.extend({deceleration:1e3,maxSpeed:360},or),cr=e.extend({deceleration:1e3,maxSpeed:90},or);class ur{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.exported.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,n=e.exported.now();for(;t.length>0&&n-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const n={zoom:0,bearing:0,pitch:0,pan:new e.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:e}of this._inertiaBuffer)n.zoom+=e.zoomDelta||0,n.bearing+=e.bearingDelta||0,n.pitch+=e.pitchDelta||0,e.panDelta&&n.pan._add(e.panDelta),e.around&&(n.around=e.around),e.pinchAround&&(n.pinchAround=e.pinchAround);const r=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,i={};if(n.pan.mag()){const o=fr(n.pan.mag(),r,e.extend({},ar,t||{}));i.offset=n.pan.mult(o.amount/n.pan.mag()),i.center=this._map.transform.center,hr(i,o)}if(n.zoom){const e=fr(n.zoom,r,sr);i.zoom=this._map.transform.zoom+e.amount,hr(i,e)}if(n.bearing){const t=fr(n.bearing,r,lr);i.bearing=this._map.transform.bearing+e.clamp(t.amount,-179,179),hr(i,t)}if(n.pitch){const e=fr(n.pitch,r,cr);i.pitch=this._map.transform.pitch+e.amount,hr(i,e)}if(i.zoom||i.bearing){const e=void 0===n.pinchAround?n.around:n.pinchAround;i.around=e?this._map.unproject(e):this._map.getCenter()}return this.clear(),e.extend(i,{noMoveStart:!0})}}function hr(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function fr(t,n,r){const{maxSpeed:i,linearity:o,deceleration:a}=r,s=e.clamp(t*o/(n/1e3),-i,i),l=Math.abs(s)/(a*o);return{easing:r.easing,duration:1e3*l,amount:s*(l/2)}}class pr extends e.Event{constructor(t,n,r,i={}){const a=o.mousePos(n.getCanvasContainer(),r),s=n.unproject(a);super(t,e.extend({point:a,lngLat:s,originalEvent:r},i)),this._defaultPrevented=!1,this.target=n}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class dr extends e.Event{constructor(t,n,r){const i="touchend"===t?r.changedTouches:r.touches,a=o.touchPos(n.getCanvasContainer(),i),s=a.map((e=>n.unproject(e))),l=a.reduce(((e,t,n,r)=>e.add(t.div(r.length))),new e.pointGeometry(0,0));super(t,{points:a,point:l,lngLats:s,lngLat:n.unproject(l),originalEvent:r}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class mr extends e.Event{constructor(e,t,n){super(e,{originalEvent:n}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class gr{constructor(e,t){this._map=e,this._clickTolerance=t.clickTolerance}reset(){delete this._mousedownPos}wheel(e){return this._firePreventable(new mr(e.type,this._map,e))}mousedown(e,t){return this._mousedownPos=t,this._firePreventable(new pr(e.type,this._map,e))}mouseup(e){this._map.fire(new pr(e.type,this._map,e))}click(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||this._map.fire(new pr(e.type,this._map,e))}dblclick(e){return this._firePreventable(new pr(e.type,this._map,e))}mouseover(e){this._map.fire(new pr(e.type,this._map,e))}mouseout(e){this._map.fire(new pr(e.type,this._map,e))}touchstart(e){return this._firePreventable(new dr(e.type,this._map,e))}touchmove(e){this._map.fire(new dr(e.type,this._map,e))}touchend(e){this._map.fire(new dr(e.type,this._map,e))}touchcancel(e){this._map.fire(new dr(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class yr{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(e){this._map.fire(new pr(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new pr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._ignoreContextMenu||this._map.fire(new pr(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class vr{constructor(e,t){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(o.disableDrag(),this._startPos=this._lastPos=t,this._active=!0)}mousemoveWindow(e,t){if(!this._active)return;const n=t;if(this._lastPos.equals(n)||!this._box&&n.dist(this._startPos)<this._clickTolerance)return;const r=this._startPos;this._lastPos=n,this._box||(this._box=o.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));const i=Math.min(r.x,n.x),a=Math.max(r.x,n.x),s=Math.min(r.y,n.y),l=Math.max(r.y,n.y);o.setTransform(this._box,`translate(${i}px,${s}px)`),this._box.style.width=a-i+"px",this._box.style.height=l-s+"px"}mouseupWindow(t,n){if(!this._active)return;if(0!==t.button)return;const r=this._startPos,i=n;if(this.reset(),o.suppressClick(),r.x!==i.x||r.y!==i.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:e=>e.fitScreenCoordinates(r,i,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",t)}keydown(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(o.remove(this._box),this._box=null),o.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(t,n){return this._map.fire(new e.Event(t,{originalEvent:n}))}}function br(e,t){if(e.length!==t.length)throw new Error(`The number of touches and points are not equal - touches ${e.length}, points ${t.length}`);const n={};for(let r=0;r<e.length;r++)n[e[r].identifier]=t[r];return n}class _r{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(t,n,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=t.timeStamp),r.length===this.numTouches&&(this.centroid=function(t){const n=new e.pointGeometry(0,0);for(const e of t)n._add(e);return n.div(t.length)}(n),this.touches=br(r,n)))}touchmove(e,t,n){if(this.aborted||!this.centroid)return;const r=br(n,t);for(const e in this.touches){const t=this.touches[e],n=r[e];(!n||n.dist(t)>30)&&(this.aborted=!0)}}touchend(e,t,n){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){const e=!this.aborted&&this.centroid;if(this.reset(),e)return e}}}class xr{constructor(e){this.singleTap=new _r(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(e,t,n){this.singleTap.touchstart(e,t,n)}touchmove(e,t,n){this.singleTap.touchmove(e,t,n)}touchend(e,t,n){const r=this.singleTap.touchend(e,t,n);if(r){const t=e.timeStamp-this.lastTime<500,n=!this.lastTap||this.lastTap.dist(r)<30;if(t&&n||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}}}class Ar{constructor(){this._zoomIn=new xr({numTouches:1,numTaps:2}),this._zoomOut=new xr({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,t,n){this._zoomIn.touchstart(e,t,n),this._zoomOut.touchstart(e,t,n)}touchmove(e,t,n){this._zoomIn.touchmove(e,t,n),this._zoomOut.touchmove(e,t,n)}touchend(e,t,n){const r=this._zoomIn.touchend(e,t,n),i=this._zoomOut.touchend(e,t,n);return r?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(r)},{originalEvent:e})}):i?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(i)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const wr={0:1,2:2};class Cr{constructor(e){this.reset(),this._clickTolerance=e.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(e,t){return!1}_move(e,t){return{}}mousedown(e,t){if(this._lastPoint)return;const n=o.mouseButton(e);this._correctButton(e,n)&&(this._lastPoint=t,this._eventButton=n)}mousemoveWindow(e,t){const n=this._lastPoint;if(n)if(e.preventDefault(),function(e,t){const n=wr[t];return void 0===e.buttons||(e.buttons&n)!==n}(e,this._eventButton))this.reset();else if(this._moved||!(t.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(n,t)}mouseupWindow(e){this._lastPoint&&o.mouseButton(e)===this._eventButton&&(this._moved&&o.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Er extends Cr{mousedown(e,t){super.mousedown(e,t),this._lastPoint&&(this._active=!0)}_correctButton(e,t){return 0===t&&!e.ctrlKey}_move(e,t){return{around:t,panDelta:t.sub(e)}}}class Sr extends Cr{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const n=.8*(t.x-e.x);if(n)return this._active=!0,{bearingDelta:n}}contextmenu(e){e.preventDefault()}}class Tr extends Cr{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const n=-.5*(t.y-e.y);if(n)return this._active=!0,{pitchDelta:n}}contextmenu(e){e.preventDefault()}}class Br{constructor(e,t){this._minTouches=e.cooperativeGestures?2:1,this._clickTolerance=e.clickTolerance||1,this._map=t,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new e.pointGeometry(0,0),setTimeout((()=>{this._cancelCooperativeMessage=!1}),200)}touchstart(e,t,n){return this._calculateTransform(e,t,n)}touchmove(e,t,n){if(this._map._cooperativeGestures&&(2===this._minTouches&&n.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(e,!1,n.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(n.length<this._minTouches))return e.preventDefault(),this._calculateTransform(e,t,n)}touchend(e,t,n){this._calculateTransform(e,t,n),this._active&&n.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,n,r){r.length>0&&(this._active=!0);const i=br(r,n),o=new e.pointGeometry(0,0),a=new e.pointGeometry(0,0);let s=0;for(const e in i){const t=i[e],n=this._touches[e];n&&(o._add(t),a._add(t.sub(n)),s++,i[e]=t)}if(this._touches=i,s<this._minTouches||!a.mag())return;const l=a.div(s);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(s),panDelta:l}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class kr{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(e){}_move(e,t,n){return{}}touchstart(e,t,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([t[0],t[1]]))}touchmove(e,t,n){if(!this._firstTwoTouches)return;e.preventDefault();const[r,i]=this._firstTwoTouches,o=Mr(n,t,r),a=Mr(n,t,i);if(!o||!a)return;const s=this._aroundCenter?null:o.add(a).div(2);return this._move([o,a],s,e)}touchend(e,t,n){if(!this._firstTwoTouches)return;const[r,i]=this._firstTwoTouches,a=Mr(n,t,r),s=Mr(n,t,i);a&&s||(this._active&&o.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Mr(e,t,n){for(let r=0;r<e.length;r++)if(e[r].identifier===n)return t[r]}function Pr(e,t){return Math.log(e/t)/Math.LN2}class Ir extends kr{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,t){const n=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Pr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Pr(this._distance,n),pinchAround:t}}}function Or(e,t){return 180*e.angleWith(t)/Math.PI}class Dr extends kr{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,t){const n=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Or(this._vector,n),pinchAround:t}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const t=25/(Math.PI*this._minDiameter)*360,n=Or(e,this._startVector);return Math.abs(n)<t}}function zr(e){return Math.abs(e.y)>Math.abs(e.x)}class Lr extends kr{constructor(e){super(),this._map=e}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(e,t,n){super.touchstart(e,t,n),this._currentTouchCount=n.length}_start(e){this._lastPoints=e,zr(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,t,n){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const r=e[0].sub(this._lastPoints[0]),i=e[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(r,i,n.timeStamp),this._valid?(this._lastPoints=e,this._active=!0,{pitchDelta:(r.y+i.y)/2*-.5}):void 0}gestureBeginsVertically(e,t,n){if(void 0!==this._valid)return this._valid;const r=e.mag()>=2,i=t.mag()>=2;if(!r&&!i)return;if(!r||!i)return void 0===this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;const o=e.y>0==t.y>0;return zr(e)&&zr(t)&&o}}const Rr={panStep:100,bearingStep:15,pitchStep:10};class Fr{constructor(){const e=Rr;this._panStep=e.panStep,this._bearingStep=e.bearingStep,this._pitchStep=e.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let t=0,n=0,r=0,i=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?n=-1:(e.preventDefault(),i=-1);break;case 39:e.shiftKey?n=1:(e.preventDefault(),i=1);break;case 38:e.shiftKey?r=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?r=-1:(e.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(n=0,r=0),{cameraAnimation:a=>{const s=a.getZoom();a.easeTo({duration:300,easeId:"keyboardHandler",easing:Ur,zoom:t?Math.round(s)+t*(e.shiftKey?2:1):s,bearing:a.getBearing()+n*this._bearingStep,pitch:a.getPitch()+r*this._pitchStep,offset:[-i*this._panStep,-o*this._panStep],center:a.getCenter()},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Ur(e){return e*(2-e)}const Nr=4.000244140625;class jr{constructor(t,n){this._map=t,this._el=t.getCanvasContainer(),this._handler=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,e.bindAll(["_onTimeout"],this)}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=e&&"center"===e.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(t){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;t.preventDefault()}let n=t.deltaMode===WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const r=e.exported.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%Nr==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),t.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=t,this._delta-=n,this._active||this._start(t)),t.preventDefault()}_onTimeout(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const n=o.mousePos(this._el,t);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(n)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const t=this._map.transform;if(0!==this._delta){const e="wheel"===this._type&&Math.abs(this._delta)>Nr?this._wheelZoomRate:this._defaultZoomRate;let n=2/(1+Math.exp(-Math.abs(this._delta*e)));this._delta<0&&0!==n&&(n=1/n);const r="number"==typeof this._targetZoom?t.zoomScale(this._targetZoom):t.scale;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(r*n))),"wheel"===this._type&&(this._startZoom=t.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const n="number"==typeof this._targetZoom?this._targetZoom:t.zoom,r=this._startZoom,i=this._easing;let o,a=!1;if("wheel"===this._type&&r&&i){const t=Math.min((e.exported.now()-this._lastWheelEventTime)/200,1),s=i(t);o=e.number(r,n,s),t<1?this._frameId||(this._frameId=!0):a=!0}else o=n,a=!0;return this._active=!0,a&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!a,zoomDelta:o-t.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let n=e.ease;if(this._prevEase){const t=this._prevEase,r=(e.exported.now()-t.start)/t.duration,i=t.easing(r+.01)-t.easing(r),o=.27/Math.sqrt(i*i+1e-4)*.01,a=Math.sqrt(.0729-o*o);n=e.bezier(o,a,.25,1)}return this._prevEase={start:e.exported.now(),duration:t,easing:n},n}reset(){this._active=!1}}class Vr{constructor(e,t){this._clickZoom=e,this._tapZoom=t}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Gr{constructor(){this.reset()}reset(){this._active=!1}dblclick(e,t){return e.preventDefault(),{cameraAnimation:n=>{n.easeTo({duration:300,zoom:n.getZoom()+(e.shiftKey?-1:1),around:n.unproject(t)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class qr{constructor(){this._tap=new xr({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(e,t,n){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=t[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(e,t,n))}touchmove(e,t,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;const r=t[0],i=r.y-this._swipePoint.y;return this._swipePoint=r,e.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(e,t,n)}touchend(e,t,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(e,t,n)&&(this._tapTime=e.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Wr{constructor(e,t,n){this._el=e,this._mousePan=t,this._touchPan=n}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Hr{constructor(e,t,n){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=t,this._mousePitch=n}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class $r{constructor(e,t,n,r){this._el=e,this._touchZoom=t,this._touchRotate=n,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Xr=e=>e.zoom||e.drag||e.pitch||e.rotate;class Zr extends e.Event{}function Yr(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}class Kr{constructor(t,n){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ur(t),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(n),e.bindAll(["handleEvent","handleWindowEvent"],this);const r=this._el;this._listeners=[[r,"touchstart",{passive:!0}],[r,"touchmove",{passive:!1}],[r,"touchend",void 0],[r,"touchcancel",void 0],[r,"mousedown",void 0],[r,"mousemove",void 0],[r,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[r,"mouseover",void 0],[r,"mouseout",void 0],[r,"dblclick",void 0],[r,"click",void 0],[r,"keydown",{capture:!1}],[r,"keyup",void 0],[r,"wheel",{passive:!1}],[r,"contextmenu",void 0],[window,"blur",void 0]];for(const[e,t,n]of this._listeners)o.addEventListener(e,t,e===document?this.handleWindowEvent:this.handleEvent,n)}destroy(){for(const[e,t,n]of this._listeners)o.removeEventListener(e,t,e===document?this.handleWindowEvent:this.handleEvent,n)}_addDefaultHandlers(e){const t=this._map,n=t.getCanvasContainer();this._add("mapEvent",new gr(t,e));const r=t.boxZoom=new vr(t,e);this._add("boxZoom",r);const i=new Ar,o=new Gr;t.doubleClickZoom=new Vr(o,i),this._add("tapZoom",i),this._add("clickZoom",o);const a=new qr;this._add("tapDragZoom",a);const s=t.touchPitch=new Lr(t);this._add("touchPitch",s);const l=new Sr(e),c=new Tr(e);t.dragRotate=new Hr(e,l,c),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);const u=new Er(e),h=new Br(e,t);t.dragPan=new Wr(n,u,h),this._add("mousePan",u),this._add("touchPan",h,["touchZoom","touchRotate"]);const f=new Dr,p=new Ir;t.touchZoomRotate=new $r(n,p,f,a),this._add("touchRotate",f,["touchPan","touchZoom"]),this._add("touchZoom",p,["touchPan","touchRotate"]);const d=t.scrollZoom=new jr(t,this);this._add("scrollZoom",d,["mousePan"]);const m=t.keyboard=new Fr;this._add("keyboard",m),this._add("blockableMapEvent",new yr(t));for(const n of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])e.interactive&&e[n]&&t[n].enable(e[n])}_add(e,t,n){this._handlers.push({handlerName:e,handler:t,allowed:n}),this._handlersById[e]=t}stop(e){if(!this._updatingCamera){for(const{handler:e}of this._handlers)e.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Xr(this._eventsInProgress))||this.isZooming()}_blockedByActive(e,t,n){for(const r in e)if(r!==n&&(!t||t.indexOf(r)<0))return!0;return!1}handleWindowEvent(e){this.handleEvent(e,`${e.type}Window`)}_getMapTouches(e){const t=[];for(const n of e)this._el.contains(n.target)&&t.push(n);return t}handleEvent(e,t){if("blur"===e.type)return void this.stop(!0);this._updatingCamera=!0;const n="renderFrame"===e.type?void 0:e,r={needsRenderFrame:!1},i={},a={},s=e.touches,l=s?this._getMapTouches(s):void 0,c=l?o.touchPos(this._el,l):o.mousePos(this._el,e);for(const{handlerName:o,handler:s,allowed:u}of this._handlers){if(!s.isEnabled())continue;let h;this._blockedByActive(a,u,o)?s.reset():s[t||e.type]&&(h=s[t||e.type](e,c,l),this.mergeHandlerResult(r,i,h,o,n),h&&h.needsRenderFrame&&this._triggerRenderFrame()),(h||s.isActive())&&(a[o]=s)}const u={};for(const e in this._previousActiveHandlers)a[e]||(u[e]=n);this._previousActiveHandlers=a,(Object.keys(u).length||Yr(r))&&(this._changes.push([r,i,u]),this._triggerRenderFrame()),(Object.keys(a).length||Yr(r))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:h}=r;h&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],h(this._map))}mergeHandlerResult(t,n,r,i,o){if(!r)return;e.extend(t,r);const a={handlerName:i,originalEvent:r.originalEvent||o};void 0!==r.zoomDelta&&(n.zoom=a),void 0!==r.panDelta&&(n.drag=a),void 0!==r.pitchDelta&&(n.pitch=a),void 0!==r.bearingDelta&&(n.rotate=a)}_applyChanges(){const t={},n={},r={};for(const[i,o,a]of this._changes)i.panDelta&&(t.panDelta=(t.panDelta||new e.pointGeometry(0,0))._add(i.panDelta)),i.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+i.zoomDelta),i.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+i.bearingDelta),i.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+i.pitchDelta),void 0!==i.around&&(t.around=i.around),void 0!==i.pinchAround&&(t.pinchAround=i.pinchAround),i.noInertia&&(t.noInertia=i.noInertia),e.extend(n,o),e.extend(r,a);this._updateMapTransform(t,n,r),this._changes=[]}_updateMapTransform(t,n,r){const i=this._map,o=i.transform,a=i.style&&i.style.terrain;if(!(Yr(t)||a&&this._drag))return this._fireEvents(n,r,!0);let{panDelta:s,zoomDelta:l,bearingDelta:c,pitchDelta:u,around:h,pinchAround:f}=t;void 0!==f&&(h=f),i._stop(!0),h=h||i.transform.centerPoint;const p=o.pointLocation(s?h.sub(s):h);c&&(o.bearing+=c),u&&(o.pitch+=u),l&&(o.zoom+=l),a?n.drag&&!this._drag?(this._drag={center:o.centerPoint,lngLat:o.pointLocation(h),point:h,handlerName:n.drag.handlerName},i.fire(new e.Event("freezeElevation",{freeze:!0}))):this._drag&&r[this._drag.handlerName]?(i.fire(new e.Event("freezeElevation",{freeze:!1})),this._drag=null):n.drag&&this._drag&&(o.center=o.pointLocation(o.centerPoint.sub(s))):o.setLocationAtPoint(p,h),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(n,r,!0)}_fireEvents(t,n,r){const i=Xr(this._eventsInProgress),o=Xr(t),a={};for(const e in t){const{originalEvent:n}=t[e];this._eventsInProgress[e]||(a[`${e}start`]=n),this._eventsInProgress[e]=t[e]}!i&&o&&this._fireEvent("movestart",o.originalEvent);for(const e in a)this._fireEvent(e,a[e]);o&&this._fireEvent("move",o.originalEvent);for(const e in t){const{originalEvent:n}=t[e];this._fireEvent(e,n)}const s={};let l;for(const e in this._eventsInProgress){const{handlerName:t,originalEvent:r}=this._eventsInProgress[e];this._handlersById[t].isActive()||(delete this._eventsInProgress[e],l=n[t]||r,s[`${e}end`]=l)}for(const e in s)this._fireEvent(e,s[e]);const c=Xr(this._eventsInProgress);if(r&&(i||o)&&!c){this._updatingCamera=!0;const t=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),n=e=>0!==e&&-this._bearingSnap<e&&e<this._bearingSnap;t?(n(t.bearing||this._map.getBearing())&&(t.bearing=0),this._map.easeTo(t,{originalEvent:l})):(this._map.fire(new e.Event("moveend",{originalEvent:l})),n(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(t,n){this._map.fire(new e.Event(t,n?{originalEvent:n}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((e=>{delete this._frameId,this.handleEvent(new Zr("renderFrame",{timeStamp:e})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Jr={extend:(t,...n)=>e.extend(t,...n),run(e){e()},logToElement(e,t=!1,n="log"){const r=window.document.getElementById(n);r&&(t&&(r.innerHTML=""),r.innerHTML+=`<br>${e}`)}};class Qr extends e.Evented{constructor(t,n){super(),this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=n.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}getCenter(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(e,t){return this.jumpTo({center:e},t)}panBy(t,n,r){return t=e.pointGeometry.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},n),r)}panTo(t,n,r){return this.easeTo(e.extend({center:t},n),r)}getZoom(){return this.transform.zoom}setZoom(e,t){return this.jumpTo({zoom:e},t),this}zoomTo(t,n,r){return this.easeTo(e.extend({zoom:t},n),r)}zoomIn(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}zoomOut(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}getBearing(){return this.transform.bearing}setBearing(e,t){return this.jumpTo({bearing:e},t),this}getPadding(){return this.transform.padding}setPadding(e,t){return this.jumpTo({padding:e},t),this}rotateTo(t,n,r){return this.easeTo(e.extend({bearing:t},n),r)}resetNorth(t,n){return this.rotateTo(0,e.extend({duration:1e3},t),n),this}resetNorthPitch(t,n){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},t),n),this}snapToNorth(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}getPitch(){return this.transform.pitch}setPitch(e,t){return this.jumpTo({pitch:e},t),this}cameraForBounds(t,n){t=e.LngLatBounds.convert(t);const r=n&&n.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),r,n)}_cameraForBoxAndBearing(t,n,r,i){const o={top:0,bottom:0,right:0,left:0};if("number"==typeof(i=e.extend({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding){const e=i.padding;i.padding={top:e,bottom:e,right:e,left:e}}i.padding=e.extend(o,i.padding);const a=this.transform,s=a.padding,l=a.project(e.LngLat.convert(t)),c=a.project(e.LngLat.convert(n)),u=l.rotate(-r*Math.PI/180),h=c.rotate(-r*Math.PI/180),f=new e.pointGeometry(Math.max(u.x,h.x),Math.max(u.y,h.y)),p=new e.pointGeometry(Math.min(u.x,h.x),Math.min(u.y,h.y)),d=f.sub(p),m=(a.width-(s.left+s.right+i.padding.left+i.padding.right))/d.x,g=(a.height-(s.top+s.bottom+i.padding.top+i.padding.bottom))/d.y;if(g<0||m<0)return void e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const y=Math.min(a.scaleZoom(a.scale*Math.min(m,g)),i.maxZoom),v=e.pointGeometry.convert(i.offset),b=new e.pointGeometry((i.padding.left-i.padding.right)/2,(i.padding.top-i.padding.bottom)/2).rotate(r*Math.PI/180),_=v.add(b).mult(a.scale/a.zoomScale(y));return{center:a.unproject(l.add(c).div(2).sub(_)),zoom:y,bearing:r}}fitBounds(e,t,n){return this._fitInternal(this.cameraForBounds(e,t),t,n)}fitScreenCoordinates(t,n,r,i,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.pointGeometry.convert(t)),this.transform.pointLocation(e.pointGeometry.convert(n)),r,i),i,o)}_fitInternal(t,n,r){return t?(delete(n=e.extend(t,n)).padding,n.linear?this.easeTo(n,r):this.flyTo(n,r)):this}jumpTo(t,n){this.stop();const r=this.transform;let i=!1,o=!1,a=!1;return"zoom"in t&&r.zoom!==+t.zoom&&(i=!0,r.zoom=+t.zoom),void 0!==t.center&&(r.center=e.LngLat.convert(t.center)),"bearing"in t&&r.bearing!==+t.bearing&&(o=!0,r.bearing=+t.bearing),"pitch"in t&&r.pitch!==+t.pitch&&(a=!0,r.pitch=+t.pitch),null==t.padding||r.isPaddingEqual(t.padding)||(r.padding=t.padding),this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),i&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),o&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),a&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n))}calculateCameraOptionsFromTo(t,n,r,i=0){const o=e.MercatorCoordinate.fromLngLat(t,n),a=e.MercatorCoordinate.fromLngLat(r,i),s=a.x-o.x,l=a.y-o.y,c=a.z-o.z,u=Math.hypot(s,l,c);if(0===u)throw new Error("Can't calculate camera options with same From and To");const h=Math.hypot(s,l),f=this.transform.scaleZoom(this.transform.cameraToCenterDistance/u/this.transform.tileSize),p=180*Math.atan2(s,-l)/Math.PI;let d=180*Math.acos(h/u)/Math.PI;return d=c<0?90-d:90+d,{center:a.toLngLat(),zoom:f,pitch:d,bearing:p}}easeTo(t,n){this._stop(!1,t.easeId),(!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate||!t.essential&&e.exported.prefersReducedMotion)&&(t.duration=0);const r=this.transform,i=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in t?+t.zoom:i,c="bearing"in t?this._normalizeBearing(t.bearing,o):o,u="pitch"in t?+t.pitch:a,h="padding"in t?t.padding:r.padding,f=e.pointGeometry.convert(t.offset);let p=r.centerPoint.add(f);const d=r.pointLocation(p),m=e.LngLat.convert(t.center||d);this._normalizeCenter(m);const g=r.project(d),y=r.project(m).sub(g),v=r.zoomScale(l-i);let b,_;t.around&&(b=e.LngLat.convert(t.around),_=r.locationPoint(b));const x={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||l!==i,this._rotating=this._rotating||o!==c,this._pitching=this._pitching||u!==a,this._padding=!r.isPaddingEqual(h),this._easeId=t.easeId,this._prepareEase(n,t.noMoveStart,x),this._ease((t=>{if(this._zooming&&(r.zoom=e.number(i,l,t)),this._rotating&&(r.bearing=e.number(o,c,t)),this._pitching&&(r.pitch=e.number(a,u,t)),this._padding&&(r.interpolatePadding(s,h,t),p=r.centerPoint.add(f)),b)r.setLocationAtPoint(b,_);else{const e=r.zoomScale(r.zoom-i),n=l>i?Math.min(2,v):Math.max(.5,v),o=Math.pow(n,1-t),a=r.unproject(g.add(y.mult(t*o)).mult(e));r.setLocationAtPoint(r.renderWorldCopies?a.wrap():a,p)}this._fireMoveEvents(n)}),(e=>{this._afterEase(n,e)}),t),this}_prepareEase(t,n,r={}){this._moving=!0,this.fire(new e.Event("freezeElevation",{freeze:!0})),n||r.moving||this.fire(new e.Event("movestart",t)),this._zooming&&!r.zooming&&this.fire(new e.Event("zoomstart",t)),this._rotating&&!r.rotating&&this.fire(new e.Event("rotatestart",t)),this._pitching&&!r.pitching&&this.fire(new e.Event("pitchstart",t))}_fireMoveEvents(t){this.fire(new e.Event("move",t)),this._zooming&&this.fire(new e.Event("zoom",t)),this._rotating&&this.fire(new e.Event("rotate",t)),this._pitching&&this.fire(new e.Event("pitch",t))}_afterEase(t,n){if(this._easeId&&n&&this._easeId===n)return;delete this._easeId,this.fire(new e.Event("freezeElevation",{freeze:!1}));const r=this._zooming,i=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new e.Event("zoomend",t)),i&&this.fire(new e.Event("rotateend",t)),o&&this.fire(new e.Event("pitchend",t)),this.fire(new e.Event("moveend",t))}flyTo(t,n){if(!t.essential&&e.exported.prefersReducedMotion){const r=e.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(r,n)}this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);const r=this.transform,i=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in t?e.clamp(+t.zoom,r.minZoom,r.maxZoom):i,c="bearing"in t?this._normalizeBearing(t.bearing,o):o,u="pitch"in t?+t.pitch:a,h="padding"in t?t.padding:r.padding,f=r.zoomScale(l-i),p=e.pointGeometry.convert(t.offset);let d=r.centerPoint.add(p);const m=r.pointLocation(d),g=e.LngLat.convert(t.center||m);this._normalizeCenter(g);const y=r.project(m),v=r.project(g).sub(y);let b=t.curve;const _=Math.max(r.width,r.height),x=_/f,A=v.mag();if("minZoom"in t){const n=e.clamp(Math.min(t.minZoom,i,l),r.minZoom,r.maxZoom),o=_/r.zoomScale(n-i);b=Math.sqrt(o/A*2)}const w=b*b;function C(e){const t=(x*x-_*_+(e?-1:1)*w*w*A*A)/(2*(e?x:_)*w*A);return Math.log(Math.sqrt(t*t+1)-t)}function E(e){return(Math.exp(e)-Math.exp(-e))/2}function S(e){return(Math.exp(e)+Math.exp(-e))/2}const T=C(0);let B=function(e){return S(T)/S(T+b*e)},k=function(e){return _*((S(T)*(E(t=T+b*e)/S(t))-E(T))/w)/A;var t},M=(C(1)-T)/b;if(Math.abs(A)<1e-6||!isFinite(M)){if(Math.abs(_-x)<1e-6)return this.easeTo(t,n);const e=x<_?-1:1;M=Math.abs(Math.log(x/_))/b,k=function(){return 0},B=function(t){return Math.exp(e*b*t)}}return t.duration="duration"in t?+t.duration:1e3*M/("screenSpeed"in t?+t.screenSpeed/b:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=o!==c,this._pitching=u!==a,this._padding=!r.isPaddingEqual(h),this._prepareEase(n,!1),this._ease((t=>{const f=t*M,m=1/B(f);r.zoom=1===t?l:i+r.scaleZoom(m),this._rotating&&(r.bearing=e.number(o,c,t)),this._pitching&&(r.pitch=e.number(a,u,t)),this._padding&&(r.interpolatePadding(s,h,t),d=r.centerPoint.add(p));const b=1===t?g:r.unproject(y.add(v.mult(k(f))).mult(m));r.setLocationAtPoint(r.renderWorldCopies?b.wrap():b,d),this._fireMoveEvents(n)}),(()=>this._afterEase(n)),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const e=this._onEaseEnd;delete this._onEaseEnd,e.call(this,t)}if(!e){const e=this.handlers;e&&e.stop(!1)}return this}_ease(t,n,r){!1===r.animate||0===r.duration?(t(1),n()):(this._easeStart=e.exported.now(),this._easeOptions=r,this._onEaseFrame=t,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const t=Math.min((e.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(t,n){t=e.wrap(t,-180,180);const r=Math.abs(t-n);return Math.abs(t-360-n)<r&&(t-=360),Math.abs(t+360-n)<r&&(t+=360),t}_normalizeCenter(e){const t=this.transform;if(!t.renderWorldCopies||t.lngRange)return;const n=e.lng-t.center.lng;e.lng+=n>180?-360:n<-180?360:0}}class ei{constructor(t={}){this.options=t,e.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(e){return this._map=e,this._compact=this.options&&this.options.compact,this._container=o.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=o.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=o.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){o.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(e,t){const n=this._map._getUIString(`AttributionControl.${t}`);e.title=n,e.setAttribute("aria-label",n)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(e){!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType&&"terrain"!==e.type||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map((e=>"string"!=typeof e?"":e))):"string"==typeof this.options.customAttribution&&e.push(this.options.customAttribution)),this._map.style.stylesheet){const e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}const t=this._map.style.sourceCaches;for(const n in t){const r=t[n];if(r.used||r.usedForTerrain){const t=r.getSource();t.attribution&&e.indexOf(t.attribution)<0&&e.push(t.attribution)}}e=e.filter((e=>String(e).trim())),e.sort(((e,t)=>e.length-t.length)),e=e.filter(((t,n)=>{for(let r=n+1;r<e.length;r++)if(e[r].indexOf(t)>=0)return!1;return!0}));const n=e.join(" | ");n!==this._attribHTML&&(this._attribHTML=n,e.length?(this._innerContainer.innerHTML=n,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class ti{constructor(t={}){this.options=t,e.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(e){this._map=e,this._compact=this.options&&this.options.compact,this._container=o.create("div","maplibregl-ctrl mapboxgl-ctrl");const t=o.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://maplibre.org/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){o.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const e=this._container.children;if(e.length){const t=e[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&t.classList.add("maplibregl-compact","mapboxgl-compact"):t.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class ni{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}remove(e){const t=this._currentlyRunning,n=t?this._queue.concat(t):this._queue;for(const t of n)if(t.id===e)return void(t.cancelled=!0)}run(e=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const t=this._currentlyRunning=this._queue;this._queue=[];for(const n of t)if(!n.cancelled&&(n.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const ri={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},ii={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},oi={showCompass:!0,showZoom:!0,visualizePitch:!1};class ai{constructor(t,n,r=!1){this._clickTolerance=10,this.element=n,this.mouseRotate=new Sr({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,r&&(this.mousePitch=new Tr({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),o.addEventListener(n,"mousedown",this.mousedown),o.addEventListener(n,"touchstart",this.touchstart,{passive:!1}),o.addEventListener(n,"touchmove",this.touchmove),o.addEventListener(n,"touchend",this.touchend),o.addEventListener(n,"touchcancel",this.reset)}down(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),o.disableDrag()}move(e,t){const n=this.map,r=this.mouseRotate.mousemoveWindow(e,t);if(r&&r.bearingDelta&&n.setBearing(n.getBearing()+r.bearingDelta),this.mousePitch){const r=this.mousePitch.mousemoveWindow(e,t);r&&r.pitchDelta&&n.setPitch(n.getPitch()+r.pitchDelta)}}off(){const e=this.element;o.removeEventListener(e,"mousedown",this.mousedown),o.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),o.removeEventListener(e,"touchmove",this.touchmove),o.removeEventListener(e,"touchend",this.touchend),o.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}offTemp(){o.enableDrag(),o.removeEventListener(window,"mousemove",this.mousemove),o.removeEventListener(window,"mouseup",this.mouseup)}mousedown(t){this.down(e.extend({},t,{ctrlKey:!0,preventDefault:()=>t.preventDefault()}),o.mousePos(this.element,t)),o.addEventListener(window,"mousemove",this.mousemove),o.addEventListener(window,"mouseup",this.mouseup)}mousemove(e){this.move(e,o.mousePos(this.element,e))}mouseup(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()}touchstart(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=o.touchPos(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>e.preventDefault()},this._startPos))}touchmove(e){1!==e.targetTouches.length?this.reset():(this._lastPos=o.touchPos(this.element,e.targetTouches)[0],this.move({preventDefault:()=>e.preventDefault()},this._lastPos))}touchend(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function si(t,n,r){if(t=new e.LngLat(t.lng,t.lat),n){const i=new e.LngLat(t.lng-360,t.lat),o=new e.LngLat(t.lng+360,t.lat),a=r.locationPoint(t).distSqr(n);r.locationPoint(i).distSqr(n)<a?t=i:r.locationPoint(o).distSqr(n)<a&&(t=o)}for(;Math.abs(t.lng-r.center.lng)>180;){const e=r.locationPoint(t);if(e.x>=0&&e.y>=0&&e.x<=r.width&&e.y<=r.height)break;t.lng>r.center.lng?t.lng-=360:t.lng+=360}return t}const li={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ci(e,t,n){const r=e.classList;for(const e in li)r.remove(`maplibregl-${n}-anchor-${e}`,`mapboxgl-${n}-anchor-${e}`);r.add(`maplibregl-${n}-anchor-${t}`,`mapboxgl-${n}-anchor-${t}`)}class ui extends e.Evented{constructor(t,n){if(super(),(t instanceof HTMLElement||n)&&(t=e.extend({element:t},n)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&"auto"!==t.pitchAlignment?t.pitchAlignment:this._rotationAlignment,t&&t.element)this._element=t.element,this._offset=e.pointGeometry.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=o.create("div"),this._element.setAttribute("aria-label","Map marker");const n=o.createNS("http://www.w3.org/2000/svg","svg"),r=41,i=27;n.setAttributeNS(null,"display","block"),n.setAttributeNS(null,"height",`${r}px`),n.setAttributeNS(null,"width",`${i}px`),n.setAttributeNS(null,"viewBox",`0 0 ${i} ${r}`);const a=o.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"stroke","none"),a.setAttributeNS(null,"stroke-width","1"),a.setAttributeNS(null,"fill","none"),a.setAttributeNS(null,"fill-rule","evenodd");const s=o.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill-rule","nonzero");const l=o.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");const c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const e of c){const t=o.createNS("http://www.w3.org/2000/svg","ellipse");t.setAttributeNS(null,"opacity","0.04"),t.setAttributeNS(null,"cx","10.5"),t.setAttributeNS(null,"cy","5.80029008"),t.setAttributeNS(null,"rx",e.rx),t.setAttributeNS(null,"ry",e.ry),l.appendChild(t)}const u=o.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"fill",this._color);const h=o.createNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),u.appendChild(h);const f=o.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"opacity","0.25"),f.setAttributeNS(null,"fill","#000000");const p=o.createNS("http://www.w3.org/2000/svg","path");p.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),f.appendChild(p);const d=o.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"transform","translate(6.0, 7.0)"),d.setAttributeNS(null,"fill","#FFFFFF");const m=o.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(8.0, 8.0)");const g=o.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#000000"),g.setAttributeNS(null,"opacity","0.25"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962");const y=o.createNS("http://www.w3.org/2000/svg","circle");y.setAttributeNS(null,"fill","#FFFFFF"),y.setAttributeNS(null,"cx","5.5"),y.setAttributeNS(null,"cy","5.5"),y.setAttributeNS(null,"r","5.4999962"),m.appendChild(g),m.appendChild(y),s.appendChild(l),s.appendChild(u),s.appendChild(f),s.appendChild(d),s.appendChild(m),n.appendChild(s),n.setAttributeNS(null,"height",r*this._scale+"px"),n.setAttributeNS(null,"width",i*this._scale+"px"),this._element.appendChild(n),this._offset=e.pointGeometry.convert(t&&t.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",(e=>{e.preventDefault()})),this._element.addEventListener("mousedown",(e=>{e.preventDefault()})),ci(this._element,this._anchor,"marker"),this._popup=null}addTo(e){return this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),o.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const t=38.1,n=13.5,r=Math.sqrt(Math.pow(n,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[r,-1*(t-n+r)],"bottom-right":[-r,-1*(t-n+r)],left:[n,-1*(t-n)],right:[-n,-1*(t-n)]}:this._offset}this._popup=e,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(e){const t=e.code,n=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==n&&13!==n||this.togglePopup()}_onMapClick(e){const t=e.originalEvent.target,n=this._element;this._popup&&(t===n||n.contains(t))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const e=this._popup;return e?(e.isOpen()?e.remove():e.addTo(this._map),this):this}_update(e){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=si(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let t="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?t=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(t=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let n="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?n="rotateX(0deg)":"map"===this._pitchAlignment&&(n=`rotateX(${this._map.getPitch()}deg)`),e&&"moveend"!==e.type||(this._pos=this._pos.round()),o.setTransform(this._element,`${li[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${n} ${t}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout((()=>{const e=this._map.unproject(this._pos),t=40075016.686*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=e.distanceTo(this._lngLat)>20*t?"0.2":"1.0",this._opacityTimeout=null}),100))}getOffset(){return this._offset}setOffset(t){return this._offset=e.pointGeometry.convert(t),this._update(),this}_onMove(t){if(!this._isDragging){const e=this._clickTolerance||this._map._clickTolerance;this._isDragging=t.point.dist(this._pointerdownPos)>=e}this._isDragging&&(this._pos=t.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"}_addDragHandler(e){this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos).add(this._offset),this._pointerdownPos=e.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&"auto"!==e?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const hi={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let fi,pi=0,di=!1;const mi={maxWidth:100,unit:"metric"};function gi(e,t,n){const r=n&&n.maxWidth||100,i=e._container.clientHeight/2,o=e.unproject([0,i]),a=e.unproject([r,i]),s=o.distanceTo(a);if(n&&"imperial"===n.unit){const n=3.2808*s;n>5280?yi(t,r,n/5280,e._getUIString("ScaleControl.Miles")):yi(t,r,n,e._getUIString("ScaleControl.Feet"))}else n&&"nautical"===n.unit?yi(t,r,s/1852,e._getUIString("ScaleControl.NauticalMiles")):s>=1e3?yi(t,r,s/1e3,e._getUIString("ScaleControl.Kilometers")):yi(t,r,s,e._getUIString("ScaleControl.Meters"))}function yi(e,t,n,r){const i=function(e){const t=Math.pow(10,`${Math.floor(e)}`.length-1);let n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(e){const t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(n),t*n}(n);e.style.width=t*(i/n)+"px",e.innerHTML=`${i}&nbsp;${r}`}const vi={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},bi=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function _i(t){if(t){if("number"==typeof t){const n=Math.round(Math.sqrt(.5*Math.pow(t,2)));return{center:new e.pointGeometry(0,0),top:new e.pointGeometry(0,t),"top-left":new e.pointGeometry(n,n),"top-right":new e.pointGeometry(-n,n),bottom:new e.pointGeometry(0,-t),"bottom-left":new e.pointGeometry(n,-n),"bottom-right":new e.pointGeometry(-n,-n),left:new e.pointGeometry(t,0),right:new e.pointGeometry(-t,0)}}if(t instanceof e.pointGeometry||Array.isArray(t)){const n=e.pointGeometry.convert(t);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:e.pointGeometry.convert(t.center||[0,0]),top:e.pointGeometry.convert(t.top||[0,0]),"top-left":e.pointGeometry.convert(t["top-left"]||[0,0]),"top-right":e.pointGeometry.convert(t["top-right"]||[0,0]),bottom:e.pointGeometry.convert(t.bottom||[0,0]),"bottom-left":e.pointGeometry.convert(t["bottom-left"]||[0,0]),"bottom-right":e.pointGeometry.convert(t["bottom-right"]||[0,0]),left:e.pointGeometry.convert(t.left||[0,0]),right:e.pointGeometry.convert(t.right||[0,0])}}return _i(new e.pointGeometry(0,0))}const xi={supported:t,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:class extends Qr{constructor(t){var n;if(e.PerformanceUtils.mark(e.PerformanceMarkers.create),null!=(t=e.extend({},ii,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&t.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new rr(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies),{bearingSnap:t.bearingSnap}),this._interactive=t.interactive,this._cooperativeGestures=t.cooperativeGestures,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._antialias=t.antialias,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._crossSourceCollisions=t.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=t.collectResourceTiming,this._renderTaskQueue=new ni,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},ri,t.locale),this._clickTolerance=t.clickTolerance,this._pixelRatio=null!==(n=t.pixelRatio)&&void 0!==n?n:devicePixelRatio,this._requestManager=new a(t.transformRequest),"string"==typeof t.container){if(this._container=document.getElementById(t.container),!this._container)throw new Error(`Container '${t.container}' not found.`)}else{if(!(t.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}if(t.maxBounds&&this.setMaxBounds(t.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),"undefined"!=typeof window&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Kr(this,t),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=t.hash&&new ir("string"==typeof t.hash&&t.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(this.resize(),this.fitBounds(t.bounds,e.extend({},t.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&this.setStyle(t.style,{localIdeographFontFamily:t.localIdeographFontFamily}),t.attributionControl&&this.addControl(new ei({customAttribution:t.customAttribution})),t.maplibreLogo&&this.addControl(new ti,t.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(t=>{this._update("style"===t.dataType),this.fire(new e.Event(`${t.dataType}data`,t))})),this.on("dataloading",(t=>{this.fire(new e.Event(`${t.dataType}dataloading`,t))})),this.on("dataabort",(t=>{this.fire(new e.Event("sourcedataabort",t))}))}_getMapId(){return this._mapId}addControl(t,n){if(void 0===n&&(n=t.getDefaultPosition?t.getDefaultPosition():"top-right"),!t||!t.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const r=t.onAdd(this);this._controls.push(t);const i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this}removeControl(t){if(!t||!t.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(t);return n>-1&&this._controls.splice(n,1),t.onRemove(this),this}hasControl(e){return this._controls.indexOf(e)>-1}calculateCameraOptionsFromTo(e,t,n,r){return null==r&&this.style.terrain&&(r=this.transform.getElevation(n,this.style.terrain)),super.calculateCameraOptionsFromTo(e,t,n,r)}resize(t){const n=this._containerDimensions(),r=n[0],i=n[1];this._resizeCanvas(r,i,this.getPixelRatio()),this.transform.resize(r,i),this.painter.resize(r,i,this.getPixelRatio());const o=!this._moving;return o&&(this.stop(),this.fire(new e.Event("movestart",t)).fire(new e.Event("move",t))),this.fire(new e.Event("resize",t)),o&&this.fire(new e.Event("moveend",t)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(e){const[t,n]=this._containerDimensions();this._pixelRatio=e,this._resizeCanvas(t,n,e),this.painter.resize(t,n,e)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(t){return this.transform.setMaxBounds(e.LngLatBounds.convert(t)),this._update()}setMinZoom(e){if((e=null==e?-2:e)>=-2&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(e){if((e=null==e?0:e)<0)throw new Error("minPitch must be greater than or equal to 0");if(e>=0&&e<=this.transform.maxPitch)return this.transform.minPitch=e,this._update(),this.getPitch()<e&&this.setPitch(e),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(e){if((e=null==e?60:e)>85)throw new Error("maxPitch must be less than or equal to 85");if(e>=this.transform.minPitch)return this.transform.maxPitch=e,this._update(),this.getPitch()>e&&this.setPitch(e),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(e){return this.transform.renderWorldCopies=e,this._update()}project(t){return this.transform.locationPoint(e.LngLat.convert(t),this.style&&this.style.terrain)}unproject(t){return this.transform.pointLocation(e.pointGeometry.convert(t),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(e,t,n){if("mouseenter"===e||"mouseover"===e){let r=!1;const i=i=>{const o=this.getLayer(t)?this.queryRenderedFeatures(i.point,{layers:[t]}):[];o.length?r||(r=!0,n.call(this,new pr(e,this,i.originalEvent,{features:o}))):r=!1};return{layer:t,listener:n,delegates:{mousemove:i,mouseout:()=>{r=!1}}}}if("mouseleave"===e||"mouseout"===e){let r=!1;const i=i=>{(this.getLayer(t)?this.queryRenderedFeatures(i.point,{layers:[t]}):[]).length?r=!0:r&&(r=!1,n.call(this,new pr(e,this,i.originalEvent)))},o=t=>{r&&(r=!1,n.call(this,new pr(e,this,t.originalEvent)))};return{layer:t,listener:n,delegates:{mousemove:i,mouseout:o}}}{const r=e=>{const r=this.getLayer(t)?this.queryRenderedFeatures(e.point,{layers:[t]}):[];r.length&&(e.features=r,n.call(this,e),delete e.features)};return{layer:t,listener:n,delegates:{[e]:r}}}}on(e,t,n){if(void 0===n)return super.on(e,t);const r=this._createDelegatedListener(e,t,n);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(r);for(const e in r.delegates)this.on(e,r.delegates[e]);return this}once(e,t,n){if(void 0===n)return super.once(e,t);const r=this._createDelegatedListener(e,t,n);for(const e in r.delegates)this.once(e,r.delegates[e]);return this}off(e,t,n){return void 0===n?super.off(e,t):(this._delegatedListeners&&this._delegatedListeners[e]&&(r=>{const i=this._delegatedListeners[e];for(let e=0;e<i.length;e++){const r=i[e];if(r.layer===t&&r.listener===n){for(const e in r.delegates)this.off(e,r.delegates[e]);return i.splice(e,1),this}}})(),this)}queryRenderedFeatures(t,n){if(!this.style)return[];let r;if(void 0!==n||void 0===t||t instanceof e.pointGeometry||Array.isArray(t)||(n=t,t=void 0),n=n||{},(t=t||[[0,0],[this.transform.width,this.transform.height]])instanceof e.pointGeometry||"number"==typeof t[0])r=[e.pointGeometry.convert(t)];else{const n=e.pointGeometry.convert(t[0]),i=e.pointGeometry.convert(t[1]);r=[n,new e.pointGeometry(i.x,n.y),i,new e.pointGeometry(n.x,i.y),n]}return this.style.queryRenderedFeatures(r,n,this.transform)}querySourceFeatures(e,t){return this.style.querySourceFeatures(e,t)}setStyle(t,n){return!1!==(n=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&t?(this._diffStyle(t,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(t,n))}setTransformRequest(e){return this._requestManager.setTransformRequest(e),this}_getUIString(e){const t=this._locale[e];if(null==t)throw new Error(`Missing UI string '${e}'`);return t}_updateStyle(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove()),e?(this.style=new tt(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new tt(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(t,n){if("string"==typeof t){const r=this._requestManager.transformRequest(t,e.ResourceType.Style);e.getJSON(r,((t,r)=>{t?this.fire(new e.ErrorEvent(t)):r&&this._updateDiff(r,n)}))}else"object"==typeof t&&this._updateDiff(t,n)}_updateDiff(t,n){try{this.style.setState(t)&&this._update(!0)}catch(r){e.warnOnce(`Unable to perform style diff: ${r.message||r.error||r}.  Rebuilding the style from scratch.`),this._updateStyle(t,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")}addSource(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}isSourceLoaded(t){const n=this.style&&this.style.sourceCaches[t];if(void 0!==n)return n.loaded();this.fire(new e.ErrorEvent(new Error(`There is no source with ID '${t}'`)))}setTerrain(e){return this.style.setTerrain(e),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const e=this.style&&this.style.sourceCaches;for(const t in e){const n=e[t]._tiles;for(const e in n){const t=n[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}}return!0}addSourceType(e,t,n){return this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,n)}removeSource(e){return this.style.removeSource(e),this._update(!0)}getSource(e){return this.style.getSource(e)}addImage(t,n,{pixelRatio:r=1,sdf:i=!1,stretchX:o,stretchY:a,content:s}={}){if(this._lazyInitEmptyStyle(),n instanceof HTMLImageElement||e.isImageBitmap(n)){const{width:l,height:c,data:u}=e.exported.getImageData(n);this.style.addImage(t,{data:new e.RGBAImage({width:l,height:c},u),pixelRatio:r,stretchX:o,stretchY:a,content:s,sdf:i,version:0})}else{if(void 0===n.width||void 0===n.height)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:l,height:c,data:u}=n,h=n;this.style.addImage(t,{data:new e.RGBAImage({width:l,height:c},new Uint8Array(u)),pixelRatio:r,stretchX:o,stretchY:a,content:s,sdf:i,version:0,userImage:h}),h.onAdd&&h.onAdd(this,t)}}}updateImage(t,n){const r=this.style.getImage(t);if(!r)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const i=n instanceof HTMLImageElement||e.isImageBitmap(n)?e.exported.getImageData(n):n,{width:o,height:a,data:s}=i;if(void 0===o||void 0===a)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(o!==r.data.width||a!==r.data.height)return this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const l=!(n instanceof HTMLImageElement||e.isImageBitmap(n));r.data.replace(s,l),this.style.updateImage(t,r)}hasImage(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(e){this.style.removeImage(e)}loadImage(t,n){e.getImage(this._requestManager.transformRequest(t,e.ResourceType.Image),n)}listImages(){return this.style.listImages()}addLayer(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}moveLayer(e,t){return this.style.moveLayer(e,t),this._update(!0)}removeLayer(e){return this.style.removeLayer(e),this._update(!0)}getLayer(e){return this.style.getLayer(e)}setLayerZoomRange(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0)}setFilter(e,t,n={}){return this.style.setFilter(e,t,n),this._update(!0)}getFilter(e){return this.style.getFilter(e)}setPaintProperty(e,t,n,r={}){return this.style.setPaintProperty(e,t,n,r),this._update(!0)}getPaintProperty(e,t){return this.style.getPaintProperty(e,t)}setLayoutProperty(e,t,n,r={}){return this.style.setLayoutProperty(e,t,n,r),this._update(!0)}getLayoutProperty(e,t){return this.style.getLayoutProperty(e,t)}setLight(e,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(e,t){return this.style.setFeatureState(e,t),this._update()}removeFeatureState(e,t){return this.style.removeFeatureState(e,t),this._update()}getFeatureState(e){return this.style.getFeatureState(e)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let e=0,t=0;return this._container&&(e=this._container.clientWidth||400,t=this._container.clientHeight||300),[e,t]}_setupContainer(){const e=this._container;e.classList.add("maplibregl-map","mapboxgl-map");const t=this._canvasContainer=o.create("div","maplibregl-canvas-container mapboxgl-canvas-container",e);this._interactive&&t.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=o.create("canvas","maplibregl-canvas mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const n=this._containerDimensions();this._resizeCanvas(n[0],n[1],this.getPixelRatio());const r=this._controlContainer=o.create("div","maplibregl-control-container mapboxgl-control-container",e),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((e=>{i[e]=o.create("div",`maplibregl-ctrl-${e} mapboxgl-ctrl-${e}`,r)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const e=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=o.create("div","maplibregl-cooperative-gesture-screen",e);let t="Control",n="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";0===navigator.platform.indexOf("Mac")&&(n="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map",t="Meta"),this._cooperativeGesturesScreen.innerHTML=`\n            <div class="maplibregl-desktop-message">${n}</div>\n            <div class="maplibregl-mobile-message">${"boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>\n        `,document.addEventListener("keydown",(e=>{e.key===t&&(this._metaPress=!0)})),document.addEventListener("keyup",(e=>{e.key===t&&(this._metaPress=!1)})),this._canvasContainer.addEventListener("wheel",(e=>{this._onCooperativeGesture(e,this._metaPress,1)}),!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(e,t,n){this._canvas.width=n*e,this._canvas.height=n*t,this._canvas.style.width=`${e}px`,this._canvas.style.height=`${t}px`}_setupPainter(){const n=e.extend({},t.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n);r?(this.painter=new Qn(r,this.transform),e.exported$1.testSupport(r)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:t}))}_contextRestored(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:t}))}_onMapScroll(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(e,t,n){return!t&&n<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout((()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")}),100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(e){return this._update(),this._renderTaskQueue.add(e)}_cancelRenderFrame(e){this._renderTaskQueue.remove(e)}_render(t){let n,r=0;const i=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(n=i.createQueryEXT(),i.beginQueryEXT(i.TIME_ELAPSED_EXT,n),r=e.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(t),this._removed)return;let o=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const t=this.transform.zoom,n=e.exported.now();this.style.zoomHistory.update(t,n);const r=new e.EvaluationParameters(t,{now:n,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),i=r.crossFadingFactor();1===i&&i===this._crossFadingFactor||(o=!0,this._crossFadingFactor=i),this.style.update(r)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,e.PerformanceUtils.mark(e.PerformanceMarkers.load),this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||o)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const t=e.exported.now()-r;i.endQueryEXT(i.TIME_ELAPSED_EXT,n),setTimeout((()=>{const r=i.getQueryObjectEXT(n,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(n),this.fire(new e.Event("gpu-timing-frame",{cpuTime:t,gpuTime:r}))}),50)}if(this.listens("gpu-timing-layer")){const t=this.painter.collectGpuTimers();setTimeout((()=>{const n=this.painter.queryGpuTimers(t);this.fire(new e.Event("gpu-timing-layer",{layerTimes:n}))}),50)}const a=this._sourcesDirty||this._styleDirty||this._placementDirty;return a||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new e.Event("idle")),!this._loaded||this._fullyLoaded||a||(this._fullyLoaded=!0,e.PerformanceUtils.mark(e.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const e of this._controls)e.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),"undefined"!=typeof window&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),o.remove(this._canvasContainer),o.remove(this._controlContainer),this._cooperativeGestures&&o.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),e.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new e.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=e.exported.frame((t=>{e.PerformanceUtils.frame(t),this._frame=null,this._render(t)})))}_onWindowOnline(){this._update()}_onWindowResize(e){this._trackResize&&this.resize({originalEvent:e})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}get showPadding(){return!!this._showPadding}set showPadding(e){this._showPadding!==e&&(this._showPadding=e,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}get repaint(){return!!this._repaint}set repaint(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(e){this._vertices=e,this._update()}_setCacheLimits(t,n){e.setCacheLimits(t,n)}get version(){return"2.4.0"}},NavigationControl:class{constructor(t){this.options=e.extend({},oi,t),this._container=o.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",(e=>this._map.zoomIn({},{originalEvent:e}))),o.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",(e=>this._map.zoomOut({},{originalEvent:e}))),o.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",(e=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})})),this._compassIcon=o.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const e=this._map.getZoom(),t=e===this._map.getMaxZoom(),n=e===this._map.getMinZoom();this._zoomInButton.disabled=t,this._zoomOutButton.disabled=n,this._zoomInButton.setAttribute("aria-disabled",t.toString()),this._zoomOutButton.setAttribute("aria-disabled",n.toString())}_rotateCompassArrow(){const e=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=e}onAdd(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ai(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){o.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(e,t){const n=o.create("button",e,this._container);return n.type="button",n.addEventListener("click",t),n}_setButtonTitle(e,t){const n=this._map._getUIString(`NavigationControl.${t}`);e.title=n,e.setAttribute("aria-label",n)}},GeolocateControl:class extends e.Evented{constructor(t){super(),this.options=e.extend({},hi,t),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(e){var t;return this._map=e,this._container=o.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),t=this._setupUI,void 0!==fi?t(fi):void 0!==window.navigator.permissions?window.navigator.permissions.query({name:"geolocation"}).then((e=>{fi="denied"!==e.state,t(fi)})):(fi=!!window.navigator.geolocation,t(fi)),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),o.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,pi=0,di=!1}_isOutOfMapMaxBounds(e){const t=this._map.getMaxBounds(),n=e.coords;return t&&(n.longitude<t.getWest()||n.longitude>t.getEast()||n.latitude<t.getSouth()||n.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",t)),this._finish()}}_updateCamera(t){const n=new e.LngLat(t.coords.longitude,t.coords.latitude),r=t.coords.accuracy,i=this._map.getBearing(),o=e.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(r),o,{geolocateSource:!0})}_updateMarker(t){if(t){const n=new e.LngLat(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const e=this._map._container.clientHeight/2,t=this._map.unproject([0,e]),n=this._map.unproject([1,e]),r=t.distanceTo(n),i=Math.ceil(2*this._accuracy/r);this._circleElement.style.width=`${i}px`,this._circleElement.style.height=`${i}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&di)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",t)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(t){if(this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this._geolocateButton=o.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),o.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===t){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}else{const e=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=o.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new ui(this._dotElement),this._circleElement=o.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ui({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(t=>{t.geolocateSource||"ACTIVE_LOCK"!==this._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new e.Event("trackuserlocationend")))}))}trigger(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":pi--,di=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let e;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),pi++,pi>1?(e={maximumAge:6e5,timeout:0},di=!0):(e=this.options.positionOptions,di=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:ei,LogoControl:ti,ScaleControl:class{constructor(t){this.options=e.extend({},mi,t),e.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){gi(this._map,this._container,this.options)}onAdd(e){return this._map=e,this._container=o.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){o.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(e){this.options.unit=e,gi(this._map,this._container,this.options)}},FullscreenControl:class{constructor(t){this._fullscreen=!1,t&&t.container&&(t.container instanceof HTMLElement?this._container=t.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=o.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){o.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const e=this._fullscreenButton=o.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);o.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",e).setAttribute("aria-hidden","true"),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.title=e}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(t){this.options=t,e.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(e){return this._map=e,this._container=o.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=o.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),o.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){o.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends e.Evented{constructor(t){super(),this.options=e.extend(Object.create(vi),t),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&o.remove(this._content),this._container&&(o.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(e){return this.setDOMContent(document.createTextNode(e))}setHTML(e){const t=document.createDocumentFragment(),n=document.createElement("body");let r;for(n.innerHTML=e;r=n.firstChild,r;)t.appendChild(r);return this.setDOMContent(t)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(e){return this.options.maxWidth=e,this._update(),this}setDOMContent(e){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=o.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(e),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(e){this._container&&this._container.classList.add(e)}removeClassName(e){this._container&&this._container.classList.remove(e)}setOffset(e){return this.options.offset=e,this._update(),this}toggleClassName(e){if(this._container)return this._container.classList.toggle(e)}_createCloseButton(){this.options.closeButton&&(this._closeButton=o.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(e){this._update(e.point)}_onMouseMove(e){this._update(e.point)}_onDrag(e){this._update(e.point)}_update(e){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(this._container||(this._container=o.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=o.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((e=>this._container.classList.add(e))),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=si(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!e)return;const t=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat);let n=this.options.anchor;const r=_i(this.options.offset);if(!n){const e=this._container.offsetWidth,i=this._container.offsetHeight;let o;o=t.y+r.bottom.y<i?["top"]:t.y>this._map.transform.height-i?["bottom"]:[],t.x<e/2?o.push("left"):t.x>this._map.transform.width-e/2&&o.push("right"),n=0===o.length?"bottom":o.join("-")}const i=t.add(r[n]).round();o.setTransform(this._container,`${li[n]} translate(${i.x}px,${i.y}px)`),ci(this._container,n,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const e=this._container.querySelector(bi);e&&e.focus()}_onClose(){this.remove()}},Marker:ui,Style:tt,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.pointGeometry,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,AJAXError:e.AJAXError,config:e.config,CanvasSource:M,GeoJSONSource:S,ImageSource:B,RasterDEMTileSource:E,RasterTileSource:w,VectorTileSource:A,VideoSource:k,prewarm:function(){W().acquire(j)},clearPrewarmedResources:function(){const e=q;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(j),q=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return V.workerCount},set workerCount(e){V.workerCount=e},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage(t){e.clearTileCache(t)},workerUrl:"",addProtocol(t,n){e.config.REGISTERED_PROTOCOLS[t]=n},removeProtocol(t){delete e.config.REGISTERED_PROTOCOLS[t]}};return Jr.extend(xi,{isSafari:e.isSafari,getPerformanceMetrics:e.PerformanceUtils.getPerformanceMetrics}),xi})),n}()},64428:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Socket=t.io=t.Manager=t.protocol=void 0;const r=n(25253),i=n(36530),o=n(87055);Object.defineProperty(t,"Socket",{enumerable:!0,get:function(){return o.Socket}});const a=n(11227)("socket.io-client");e.exports=t=l;const s=t.managers={};function l(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};const n=r.url(e,t.path),o=n.source,l=n.id,c=n.path,u=s[l]&&c in s[l].nsps;let h;return t.forceNew||t["force new connection"]||!1===t.multiplex||u?(a("ignoring socket cache for %s",o),h=new i.Manager(o,t)):(s[l]||(a("new io instance for %s",o),s[l]=new i.Manager(o,t)),h=s[l]),n.query&&!t.query&&(t.query=n.queryKey),h.socket(n.path,t)}t.io=l;var c=n(95485);Object.defineProperty(t,"protocol",{enumerable:!0,get:function(){return c.protocol}}),t.connect=l;var u=n(36530);Object.defineProperty(t,"Manager",{enumerable:!0,get:function(){return u.Manager}})},36530:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Manager=void 0;const r=n(45983),i=n(87055),o=n(98767),a=n(95485),s=n(43598),l=n(43010),c=n(11227)("socket.io-client:manager");t.Manager=class extends o{constructor(e,t){super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new l({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const n=t.parser||a;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(c("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;c("opening %s",this.uri),this.engine=r(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const i=s.on(t,"open",(function(){n.onopen(),e&&e()})),o=s.on(t,"error",(t=>{c("error"),n.cleanup(),n._readyState="closed",super.emit("error",t),e?e(t):n.maybeReconnectOnOpen()}));if(!1!==this._timeout){const e=this._timeout;c("connect attempt will timeout after %d",e),0===e&&i();const n=setTimeout((()=>{c("connect attempt timed out after %d",e),i(),t.close(),t.emit("error",new Error("timeout"))}),e);this.subs.push((function(){clearTimeout(n)}))}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){c("open"),this.cleanup(),this._readyState="open",super.emit("open");const e=this.engine;this.subs.push(s.on(e,"ping",this.onping.bind(this)),s.on(e,"data",this.ondata.bind(this)),s.on(e,"error",this.onerror.bind(this)),s.on(e,"close",this.onclose.bind(this)),s.on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){super.emit("ping")}ondata(e){this.decoder.add(e)}ondecoded(e){super.emit("packet",e)}onerror(e){c("error",e),super.emit("error",e)}socket(e,t){let n=this.nsps[e];return n||(n=new i.Socket(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const e of t)if(this.nsps[e].active)return void c("socket %s is still active, skipping close",e);this._close()}_packet(e){c("writing packet %j",e);const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){c("cleanup"),this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){c("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,"opening"===this._readyState&&this.cleanup(),this.backoff.reset(),this._readyState="closed",this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e){c("onclose"),this.cleanup(),this.backoff.reset(),this._readyState="closed",super.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)c("reconnect failed"),this.backoff.reset(),super.emit("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();c("will wait %dms before reconnect attempt",t),this._reconnecting=!0;const n=setTimeout((()=>{e.skipReconnect||(c("attempting reconnect"),super.emit("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(c("reconnect attempt error"),e._reconnecting=!1,e.reconnect(),super.emit("reconnect_error",t)):(c("reconnect success"),e.onreconnect())})))}),t);this.subs.push((function(){clearTimeout(n)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),super.emit("reconnect",e)}}},43598:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.on=void 0,t.on=function(e,t,n){return e.on(t,n),function(){e.off(t,n)}}},87055:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Socket=void 0;const r=n(95485),i=n(98767),o=n(43598),a=n(11227)("socket.io-client:socket"),s=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});t.Socket=class extends i{constructor(e,t,n){super(),this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.auth&&(this.auth=n.auth),this.io._autoConnect&&this.open()}subEvents(){if(this.subs)return;const e=this.io;this.subs=[o.on(e,"open",this.onopen.bind(this)),o.on(e,"packet",this.onpacket.bind(this)),o.on(e,"error",this.onerror.bind(this)),o.on(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){if(s.hasOwnProperty(e))throw new Error('"'+e+'" is a reserved event name');t.unshift(e);const n={type:r.PacketType.EVENT,data:t,options:{}};n.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(a("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++);const i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return!this.flags.volatile||i&&this.connected?this.connected?this.packet(n):this.sendBuffer.push(n):a("discard packet as the transport is not currently writable"),this.flags={},this}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){a("transport is open - connecting"),"function"==typeof this.auth?this.auth((e=>{this.packet({type:r.PacketType.CONNECT,data:e})})):this.packet({type:r.PacketType.CONNECT,data:this.auth})}onerror(e){this.connected||super.emit("connect_error",e)}onclose(e){a("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,super.emit("disconnect",e)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case r.PacketType.CONNECT:if(e.data&&e.data.sid){const t=e.data.sid;this.onconnect(t)}else super.emit("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case r.PacketType.EVENT:case r.PacketType.BINARY_EVENT:this.onevent(e);break;case r.PacketType.ACK:case r.PacketType.BINARY_ACK:this.onack(e);break;case r.PacketType.DISCONNECT:this.ondisconnect();break;case r.PacketType.CONNECT_ERROR:const t=new Error(e.data.message);t.data=e.data.data,super.emit("connect_error",t)}}onevent(e){const t=e.data||[];a("emitting event %j",t),null!=e.id&&(a("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e)}ack(e){const t=this;let n=!1;return function(...i){n||(n=!0,a("sending ack %j",i),t.packet({type:r.PacketType.ACK,id:e,data:i}))}}onack(e){const t=this.acks[e.id];"function"==typeof t?(a("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):a("bad ack %s",e.id)}onconnect(e){a("socket connected with id %s",e),this.id=e,this.connected=!0,this.disconnected=!1,super.emit("connect"),this.emitBuffered()}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>this.packet(e))),this.sendBuffer=[]}ondisconnect(){a("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(a("performing disconnect (%s)",this.nsp),this.packet({type:r.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}}},25253:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.url=void 0;const r=n(64187),i=n(11227)("socket.io-client:url");t.url=function(e,t="",n){let o=e;n=n||"undefined"!=typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(i("protocol-less url %s",e),e=void 0!==n?n.protocol+"//"+e:"https://"+e),i("parse %s",e),o=r(e)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/";const a=-1!==o.host.indexOf(":")?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+a+":"+o.port+t,o.href=o.protocol+"://"+a+(n&&n.port===o.port?"":":"+o.port),o}},99477:(e,t,n)=>{"use strict";n.d(t,{CP7:()=>vo,DvJ:()=>Cn,FM8:()=>ne,IEO:()=>_o,Ilk:()=>ge,Kj0:()=>An,L5s:()=>sa,LgZ:()=>h,Ltg:()=>we,Lun:()=>io,Pa4:()=>Be,SUY:()=>la,TlE:()=>Ht,Vkp:()=>re,VzW:()=>w,WMw:()=>s,WdD:()=>Wn,Wid:()=>Uo,Wl3:()=>r,Xaj:()=>l,Y8D:()=>T,ZzF:()=>Pe,_12:()=>qn,_Li:()=>i,a$l:()=>Zt,aLr:()=>Ze,bdR:()=>a,dpR:()=>aa,ehD:()=>o,ejS:()=>Po,ghN:()=>u,hH6:()=>ia,iKG:()=>er,jyz:()=>Bn,lLk:()=>Qo,lRF:()=>ro,lb7:()=>xo,mSO:()=>U,rDY:()=>Tn,rpg:()=>m,u9r:()=>rn,vBJ:()=>Gt,wem:()=>b,wk1:()=>S,woe:()=>Ro,xEZ:()=>Ae,xsS:()=>bo,yGw:()=>it});const r=0,i=1,o=2,a=1,s=2,l=5,c=100,u=201,h=205,f=301,p=302,d=306,m=1e3,g=1001,y=1002,v=1003,b=1006,_=1008,x=1009,A=1014,w=1015,C=1016,E=1020,S=1023,T=1024,B=1026,k=1027,M=33776,P=33777,I=33778,O=33779,D=2300,z=2301,L=2302,R=3e3,F=3001,U=3201,N="srgb",j="srgb-linear",V=7680,G="300 es",q=1035;class W{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}const H=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],$=Math.PI/180,X=180/Math.PI;function Z(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(H[255&e]+H[e>>8&255]+H[e>>16&255]+H[e>>24&255]+"-"+H[255&t]+H[t>>8&255]+"-"+H[t>>16&15|64]+H[t>>24&255]+"-"+H[63&n|128]+H[n>>8&255]+"-"+H[n>>16&255]+H[n>>24&255]+H[255&r]+H[r>>8&255]+H[r>>16&255]+H[r>>24&255]).toLowerCase()}function Y(e,t,n){return Math.max(t,Math.min(n,e))}function K(e,t,n){return(1-n)*e+n*t}function J(e){return 0==(e&e-1)&&0!==e}function Q(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function ee(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function te(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}class ne{constructor(e=0,t=0){ne.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class re{constructor(){re.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,r,i,o,a,s,l){const c=this.elements;return c[0]=e,c[1]=r,c[2]=a,c[3]=t,c[4]=i,c[5]=s,c[6]=n,c[7]=o,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[3],s=n[6],l=n[1],c=n[4],u=n[7],h=n[2],f=n[5],p=n[8],d=r[0],m=r[3],g=r[6],y=r[1],v=r[4],b=r[7],_=r[2],x=r[5],A=r[8];return i[0]=o*d+a*y+s*_,i[3]=o*m+a*v+s*x,i[6]=o*g+a*b+s*A,i[1]=l*d+c*y+u*_,i[4]=l*m+c*v+u*x,i[7]=l*g+c*b+u*A,i[2]=h*d+f*y+p*_,i[5]=h*m+f*v+p*x,i[8]=h*g+f*b+p*A,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8];return t*o*c-t*a*l-n*i*c+n*a*s+r*i*l-r*o*s}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=c*o-a*l,h=a*s-c*i,f=l*i-o*s,p=t*u+n*h+r*f;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const d=1/p;return e[0]=u*d,e[1]=(r*l-c*n)*d,e[2]=(a*n-r*o)*d,e[3]=h*d,e[4]=(c*t-r*s)*d,e[5]=(r*i-a*t)*d,e[6]=f*d,e[7]=(n*s-l*t)*d,e[8]=(o*t-n*i)*d,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,o,a){const s=Math.cos(i),l=Math.sin(i);return this.set(n*s,n*l,-n*(s*o+l*a)+o+e,-r*l,r*s,-r*(-l*o+s*a)+a+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],l=r[4],c=r[7];return r[0]=t*i+n*s,r[3]=t*o+n*l,r[6]=t*a+n*c,r[1]=-n*i+t*s,r[4]=-n*o+t*l,r[7]=-n*a+t*c,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function ie(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}function oe(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function ae(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function se(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const le={[N]:{[j]:ae},[j]:{[N]:se}},ce={legacyMode:!0,get workingColorSpace(){return j},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(this.legacyMode||t===n||!t||!n)return e;if(le[t]&&void 0!==le[t][n]){const r=le[t][n];return e.r=r(e.r),e.g=r(e.g),e.b=r(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},ue={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},he={r:0,g:0,b:0},fe={h:0,s:0,l:0},pe={h:0,s:0,l:0};function de(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function me(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}class ge{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t="srgb"){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,ce.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r="srgb-linear"){return this.r=e,this.g=t,this.b=n,ce.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r="srgb-linear"){if(e=(e%(i=1)+i)%i,t=Y(t,0,1),n=Y(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=de(i,r,e+1/3),this.g=de(i,r,e),this.b=de(i,r,e-1/3)}var i;return ce.toWorkingColorSpace(this,r),this}setStyle(e,t="srgb"){function n(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let e;const i=r[1],o=r[2];switch(i){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,ce.toWorkingColorSpace(this,t),n(e[4]),this;if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,ce.toWorkingColorSpace(this,t),n(e[4]),this;break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){const r=parseFloat(e[1])/360,i=parseFloat(e[2])/100,o=parseFloat(e[3])/100;return n(e[4]),this.setHSL(r,i,o,t)}}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const e=r[1],n=e.length;if(3===n)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,ce.toWorkingColorSpace(this,t),this;if(6===n)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,ce.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t="srgb"){const n=ue[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ae(e.r),this.g=ae(e.g),this.b=ae(e.b),this}copyLinearToSRGB(e){return this.r=se(e.r),this.g=se(e.g),this.b=se(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e="srgb"){return ce.fromWorkingColorSpace(me(this,he),e),Y(255*he.r,0,255)<<16^Y(255*he.g,0,255)<<8^Y(255*he.b,0,255)<<0}getHexString(e="srgb"){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t="srgb-linear"){ce.fromWorkingColorSpace(me(this,he),t);const n=he.r,r=he.g,i=he.b,o=Math.max(n,r,i),a=Math.min(n,r,i);let s,l;const c=(a+o)/2;if(a===o)s=0,l=0;else{const e=o-a;switch(l=c<=.5?e/(o+a):e/(2-o-a),o){case n:s=(r-i)/e+(r<i?6:0);break;case r:s=(i-n)/e+2;break;case i:s=(n-r)/e+4}s/=6}return e.h=s,e.s=l,e.l=c,e}getRGB(e,t="srgb-linear"){return ce.fromWorkingColorSpace(me(this,he),t),e.r=he.r,e.g=he.g,e.b=he.b,e}getStyle(e="srgb"){return ce.fromWorkingColorSpace(me(this,he),e),e!==N?`color(${e} ${he.r} ${he.g} ${he.b})`:`rgb(${255*he.r|0},${255*he.g|0},${255*he.b|0})`}offsetHSL(e,t,n){return this.getHSL(fe),fe.h+=e,fe.s+=t,fe.l+=n,this.setHSL(fe.h,fe.s,fe.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(fe),e.getHSL(pe);const n=K(fe.h,pe.h,t),r=K(fe.s,pe.s,t),i=K(fe.l,pe.l,t);return this.setHSL(n,r,i),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}let ye;ge.NAMES=ue;class ve{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===ye&&(ye=oe("canvas")),ye.width=e.width,ye.height=e.height;const n=ye.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=ye}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=oe("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let e=0;e<i.length;e++)i[e]=255*ae(i[e]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*ae(t[e]/255)):t[e]=ae(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class be{constructor(e=null){this.isSource=!0,this.uuid=Z(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(_e(r[t].image)):e.push(_e(r[t]))}else e=_e(r);n.url=e}return t||(e.images[this.uuid]=n),n}}function _e(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?ve.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let xe=0;class Ae extends W{constructor(e=Ae.DEFAULT_IMAGE,t=Ae.DEFAULT_MAPPING,n=1001,r=1001,i=b,o=1008,a=S,s=1009,l=1,c=3e3){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:xe++}),this.uuid=Z(),this.name="",this.source=new be(e),this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=o,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=s,this.offset=new ne(0,0),this.repeat=new ne(1,1),this.center=new ne(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new re,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case m:e.x=e.x-Math.floor(e.x);break;case g:e.x=e.x<0?0:1;break;case y:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case m:e.y=e.y-Math.floor(e.y);break;case g:e.y=e.y<0?0:1;break;case y:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}Ae.DEFAULT_IMAGE=null,Ae.DEFAULT_MAPPING=300;class we{constructor(e=0,t=0,n=0,r=1){we.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const o=.01,a=.1,s=e.elements,l=s[0],c=s[4],u=s[8],h=s[1],f=s[5],p=s[9],d=s[2],m=s[6],g=s[10];if(Math.abs(c-h)<o&&Math.abs(u-d)<o&&Math.abs(p-m)<o){if(Math.abs(c+h)<a&&Math.abs(u+d)<a&&Math.abs(p+m)<a&&Math.abs(l+f+g-3)<a)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,s=(f+1)/2,y=(g+1)/2,v=(c+h)/4,b=(u+d)/4,_=(p+m)/4;return e>s&&e>y?e<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=v/n,i=b/n):s>y?s<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(s),n=v/r,i=_/r):y<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(y),n=b/i,r=_/i),this.set(n,r,i,t),this}let y=Math.sqrt((m-p)*(m-p)+(u-d)*(u-d)+(h-c)*(h-c));return Math.abs(y)<.001&&(y=1),this.x=(m-p)/y,this.y=(u-d)/y,this.z=(h-c)/y,this.w=Math.acos((l+f+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Ce extends W{constructor(e=1,t=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new we(0,0,e,t),this.scissorTest=!1,this.viewport=new we(0,0,e,t);const r={width:e,height:t,depth:1};this.texture=new Ae(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:b,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(e,t,n=1){this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new be(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ee extends Ae{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=v,this.minFilter=v,this.wrapR=g,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Se extends Ae{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=v,this.minFilter=v,this.wrapR=g,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Te{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,i,o,a){let s=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3];const h=i[o+0],f=i[o+1],p=i[o+2],d=i[o+3];if(0===a)return e[t+0]=s,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===a)return e[t+0]=h,e[t+1]=f,e[t+2]=p,void(e[t+3]=d);if(u!==d||s!==h||l!==f||c!==p){let e=1-a;const t=s*h+l*f+c*p+u*d,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),o=Math.atan2(i,t*n);e=Math.sin(e*o)/i,a=Math.sin(a*o)/i}const i=a*n;if(s=s*e+h*i,l=l*e+f*i,c=c*e+p*i,u=u*e+d*i,e===1-a){const e=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=e,l*=e,c*=e,u*=e}}e[t]=s,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,r,i,o){const a=n[r],s=n[r+1],l=n[r+2],c=n[r+3],u=i[o],h=i[o+1],f=i[o+2],p=i[o+3];return e[t]=a*p+c*u+s*f-l*h,e[t+1]=s*p+c*h+l*u-a*f,e[t+2]=l*p+c*f+a*h-s*u,e[t+3]=c*p-a*u-s*h-l*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,r=e._y,i=e._z,o=e._order,a=Math.cos,s=Math.sin,l=a(n/2),c=a(r/2),u=a(i/2),h=s(n/2),f=s(r/2),p=s(i/2);switch(o){case"XYZ":this._x=h*c*u+l*f*p,this._y=l*f*u-h*c*p,this._z=l*c*p+h*f*u,this._w=l*c*u-h*f*p;break;case"YXZ":this._x=h*c*u+l*f*p,this._y=l*f*u-h*c*p,this._z=l*c*p-h*f*u,this._w=l*c*u+h*f*p;break;case"ZXY":this._x=h*c*u-l*f*p,this._y=l*f*u+h*c*p,this._z=l*c*p+h*f*u,this._w=l*c*u-h*f*p;break;case"ZYX":this._x=h*c*u-l*f*p,this._y=l*f*u+h*c*p,this._z=l*c*p-h*f*u,this._w=l*c*u+h*f*p;break;case"YZX":this._x=h*c*u+l*f*p,this._y=l*f*u+h*c*p,this._z=l*c*p-h*f*u,this._w=l*c*u-h*f*p;break;case"XZY":this._x=h*c*u-l*f*p,this._y=l*f*u-h*c*p,this._z=l*c*p+h*f*u,this._w=l*c*u+h*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],o=t[1],a=t[5],s=t[9],l=t[2],c=t[6],u=t[10],h=n+a+u;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(c-s)*e,this._y=(i-l)*e,this._z=(o-r)*e}else if(n>a&&n>u){const e=2*Math.sqrt(1+n-a-u);this._w=(c-s)/e,this._x=.25*e,this._y=(r+o)/e,this._z=(i+l)/e}else if(a>u){const e=2*Math.sqrt(1+a-n-u);this._w=(i-l)/e,this._x=(r+o)/e,this._y=.25*e,this._z=(s+c)/e}else{const e=2*Math.sqrt(1+u-n-a);this._w=(o-r)/e,this._x=(i+l)/e,this._y=(s+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Y(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,l=t._z,c=t._w;return this._x=n*c+o*a+r*l-i*s,this._y=r*c+o*s+i*a-n*l,this._z=i*c+o*l+n*s-r*a,this._w=o*c-n*a-r*s-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,o=this._w;let a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;const s=1-a*a;if(s<=Number.EPSILON){const e=1-t;return this._w=e*o+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(s),c=Math.atan2(l,a),u=Math.sin((1-t)*c)/l,h=Math.sin(t*c)/l;return this._w=o*u+this._w*h,this._x=n*u+this._x*h,this._y=r*u+this._y*h,this._z=i*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Be{constructor(e=0,t=0,n=0){Be.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Me.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Me.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,l=s*t+o*r-a*n,c=s*n+a*t-i*r,u=s*r+i*n-o*t,h=-i*t-o*n-a*r;return this.x=l*s+h*-i+c*-a-u*-o,this.y=c*s+h*-o+u*-i-l*-a,this.z=u*s+h*-a+l*-o-c*-i,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return ke.copy(this).projectOnVector(e),this.sub(ke)}reflect(e){return this.sub(ke.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Y(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const ke=new Be,Me=new Te;class Pe{constructor(e=new Be(1/0,1/0,1/0),t=new Be(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,l=e.length;s<l;s+=3){const l=e[s],c=e[s+1],u=e[s+2];l<t&&(t=l),c<n&&(n=c),u<r&&(r=u),l>i&&(i=l),c>o&&(o=c),u>a&&(a=u)}return this.min.set(t,n,r),this.max.set(i,o,a),this}setFromBufferAttribute(e){let t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,l=e.count;s<l;s++){const l=e.getX(s),c=e.getY(s),u=e.getZ(s);l<t&&(t=l),c<n&&(n=c),u<r&&(r=u),l>i&&(i=l),c>o&&(o=c),u>a&&(a=u)}return this.min.set(t,n,r),this.max.set(i,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Oe.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n)if(t&&null!=n.attributes&&void 0!==n.attributes.position){const t=n.attributes.position;for(let n=0,r=t.count;n<r;n++)Oe.fromBufferAttribute(t,n).applyMatrix4(e.matrixWorld),this.expandByPoint(Oe)}else null===n.boundingBox&&n.computeBoundingBox(),De.copy(n.boundingBox),De.applyMatrix4(e.matrixWorld),this.union(De);const r=e.children;for(let e=0,n=r.length;e<n;e++)this.expandByObject(r[e],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Oe),Oe.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(je),Ve.subVectors(this.max,je),ze.subVectors(e.a,je),Le.subVectors(e.b,je),Re.subVectors(e.c,je),Fe.subVectors(Le,ze),Ue.subVectors(Re,Le),Ne.subVectors(ze,Re);let t=[0,-Fe.z,Fe.y,0,-Ue.z,Ue.y,0,-Ne.z,Ne.y,Fe.z,0,-Fe.x,Ue.z,0,-Ue.x,Ne.z,0,-Ne.x,-Fe.y,Fe.x,0,-Ue.y,Ue.x,0,-Ne.y,Ne.x,0];return!!We(t,ze,Le,Re,Ve)&&(t=[1,0,0,0,1,0,0,0,1],!!We(t,ze,Le,Re,Ve)&&(Ge.crossVectors(Fe,Ue),t=[Ge.x,Ge.y,Ge.z],We(t,ze,Le,Re,Ve)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Oe.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Oe).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Ie[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ie[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ie[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ie[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ie[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ie[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ie[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ie[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ie)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ie=[new Be,new Be,new Be,new Be,new Be,new Be,new Be,new Be],Oe=new Be,De=new Pe,ze=new Be,Le=new Be,Re=new Be,Fe=new Be,Ue=new Be,Ne=new Be,je=new Be,Ve=new Be,Ge=new Be,qe=new Be;function We(e,t,n,r,i){for(let o=0,a=e.length-3;o<=a;o+=3){qe.fromArray(e,o);const a=i.x*Math.abs(qe.x)+i.y*Math.abs(qe.y)+i.z*Math.abs(qe.z),s=t.dot(qe),l=n.dot(qe),c=r.dot(qe);if(Math.max(-Math.max(s,l,c),Math.min(s,l,c))>a)return!1}return!0}const He=new Pe,$e=new Be,Xe=new Be;class Ze{constructor(e=new Be,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):He.setFromPoints(e).getCenter(n);let r=0;for(let t=0,i=e.length;t<i;t++)r=Math.max(r,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;$e.subVectors(e,this.center);const t=$e.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector($e,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(Xe.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint($e.copy(e.center).add(Xe)),this.expandByPoint($e.copy(e.center).sub(Xe))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Ye=new Be,Ke=new Be,Je=new Be,Qe=new Be,et=new Be,tt=new Be,nt=new Be;class rt{constructor(e=new Be,t=new Be(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ye)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ye.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ye.copy(this.direction).multiplyScalar(t).add(this.origin),Ye.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){Ke.copy(e).add(t).multiplyScalar(.5),Je.copy(t).sub(e).normalize(),Qe.copy(this.origin).sub(Ke);const i=.5*e.distanceTo(t),o=-this.direction.dot(Je),a=Qe.dot(this.direction),s=-Qe.dot(Je),l=Qe.lengthSq(),c=Math.abs(1-o*o);let u,h,f,p;if(c>0)if(u=o*s-a,h=o*a-s,p=i*c,u>=0)if(h>=-p)if(h<=p){const e=1/c;u*=e,h*=e,f=u*(u+o*h+2*a)+h*(o*u+h+2*s)+l}else h=i,u=Math.max(0,-(o*h+a)),f=-u*u+h*(h+2*s)+l;else h=-i,u=Math.max(0,-(o*h+a)),f=-u*u+h*(h+2*s)+l;else h<=-p?(u=Math.max(0,-(-o*i+a)),h=u>0?-i:Math.min(Math.max(-i,-s),i),f=-u*u+h*(h+2*s)+l):h<=p?(u=0,h=Math.min(Math.max(-i,-s),i),f=h*(h+2*s)+l):(u=Math.max(0,-(o*i+a)),h=u>0?i:Math.min(Math.max(-i,-s),i),f=-u*u+h*(h+2*s)+l);else h=o>0?-i:i,u=Math.max(0,-(o*h+a)),f=-u*u+h*(h+2*s)+l;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),r&&r.copy(Je).multiplyScalar(h).add(Ke),f}intersectSphere(e,t){Ye.subVectors(e.center,this.origin);const n=Ye.dot(this.direction),r=Ye.dot(Ye)-n*n,i=e.radius*e.radius;if(r>i)return null;const o=Math.sqrt(i-r),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,o,a,s;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),c>=0?(i=(e.min.y-h.y)*c,o=(e.max.y-h.y)*c):(i=(e.max.y-h.y)*c,o=(e.min.y-h.y)*c),n>o||i>r?null:((i>n||isNaN(n))&&(n=i),(o<r||isNaN(r))&&(r=o),u>=0?(a=(e.min.z-h.z)*u,s=(e.max.z-h.z)*u):(a=(e.max.z-h.z)*u,s=(e.min.z-h.z)*u),n>s||a>r?null:((a>n||n!=n)&&(n=a),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,Ye)}intersectTriangle(e,t,n,r,i){et.subVectors(t,e),tt.subVectors(n,e),nt.crossVectors(et,tt);let o,a=this.direction.dot(nt);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}Qe.subVectors(this.origin,e);const s=o*this.direction.dot(tt.crossVectors(Qe,tt));if(s<0)return null;const l=o*this.direction.dot(et.cross(Qe));if(l<0)return null;if(s+l>a)return null;const c=-o*Qe.dot(nt);return c<0?null:this.at(c/a,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class it{constructor(){it.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,r,i,o,a,s,l,c,u,h,f,p,d,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=f,g[7]=p,g[11]=d,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new it).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/ot.setFromMatrixColumn(e,0).length(),i=1/ot.setFromMatrixColumn(e,1).length(),o=1/ot.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i);if("XYZ"===e.order){const e=o*c,n=o*u,r=a*c,i=a*u;t[0]=s*c,t[4]=-s*u,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-a*s,t[2]=i-e*l,t[6]=r+n*l,t[10]=o*s}else if("YXZ"===e.order){const e=s*c,n=s*u,r=l*c,i=l*u;t[0]=e+i*a,t[4]=r*a-n,t[8]=o*l,t[1]=o*u,t[5]=o*c,t[9]=-a,t[2]=n*a-r,t[6]=i+e*a,t[10]=o*s}else if("ZXY"===e.order){const e=s*c,n=s*u,r=l*c,i=l*u;t[0]=e-i*a,t[4]=-o*u,t[8]=r+n*a,t[1]=n+r*a,t[5]=o*c,t[9]=i-e*a,t[2]=-o*l,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){const e=o*c,n=o*u,r=a*c,i=a*u;t[0]=s*c,t[4]=r*l-n,t[8]=e*l+i,t[1]=s*u,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){const e=o*s,n=o*l,r=a*s,i=a*l;t[0]=s*c,t[4]=i-e*u,t[8]=r*u+n,t[1]=u,t[5]=o*c,t[9]=-a*c,t[2]=-l*c,t[6]=n*u+r,t[10]=e-i*u}else if("XZY"===e.order){const e=o*s,n=o*l,r=a*s,i=a*l;t[0]=s*c,t[4]=-u,t[8]=l*c,t[1]=e*u+i,t[5]=o*c,t[9]=n*u-r,t[2]=r*u-n,t[6]=a*c,t[10]=i*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(st,e,lt)}lookAt(e,t,n){const r=this.elements;return ht.subVectors(e,t),0===ht.lengthSq()&&(ht.z=1),ht.normalize(),ct.crossVectors(n,ht),0===ct.lengthSq()&&(1===Math.abs(n.z)?ht.x+=1e-4:ht.z+=1e-4,ht.normalize(),ct.crossVectors(n,ht)),ct.normalize(),ut.crossVectors(ht,ct),r[0]=ct.x,r[4]=ut.x,r[8]=ht.x,r[1]=ct.y,r[5]=ut.y,r[9]=ht.y,r[2]=ct.z,r[6]=ut.z,r[10]=ht.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],c=n[1],u=n[5],h=n[9],f=n[13],p=n[2],d=n[6],m=n[10],g=n[14],y=n[3],v=n[7],b=n[11],_=n[15],x=r[0],A=r[4],w=r[8],C=r[12],E=r[1],S=r[5],T=r[9],B=r[13],k=r[2],M=r[6],P=r[10],I=r[14],O=r[3],D=r[7],z=r[11],L=r[15];return i[0]=o*x+a*E+s*k+l*O,i[4]=o*A+a*S+s*M+l*D,i[8]=o*w+a*T+s*P+l*z,i[12]=o*C+a*B+s*I+l*L,i[1]=c*x+u*E+h*k+f*O,i[5]=c*A+u*S+h*M+f*D,i[9]=c*w+u*T+h*P+f*z,i[13]=c*C+u*B+h*I+f*L,i[2]=p*x+d*E+m*k+g*O,i[6]=p*A+d*S+m*M+g*D,i[10]=p*w+d*T+m*P+g*z,i[14]=p*C+d*B+m*I+g*L,i[3]=y*x+v*E+b*k+_*O,i[7]=y*A+v*S+b*M+_*D,i[11]=y*w+v*T+b*P+_*z,i[15]=y*C+v*B+b*I+_*L,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],l=e[13],c=e[2],u=e[6],h=e[10],f=e[14];return e[3]*(+i*s*u-r*l*u-i*a*h+n*l*h+r*a*f-n*s*f)+e[7]*(+t*s*f-t*l*h+i*o*h-r*o*f+r*l*c-i*s*c)+e[11]*(+t*l*u-t*a*f-i*o*u+n*o*f+i*a*c-n*l*c)+e[15]*(-r*a*c-t*s*u+t*a*h+r*o*u-n*o*h+n*s*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=e[9],h=e[10],f=e[11],p=e[12],d=e[13],m=e[14],g=e[15],y=u*m*l-d*h*l+d*s*f-a*m*f-u*s*g+a*h*g,v=p*h*l-c*m*l-p*s*f+o*m*f+c*s*g-o*h*g,b=c*d*l-p*u*l+p*a*f-o*d*f-c*a*g+o*u*g,_=p*u*s-c*d*s-p*a*h+o*d*h+c*a*m-o*u*m,x=t*y+n*v+r*b+i*_;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const A=1/x;return e[0]=y*A,e[1]=(d*h*i-u*m*i-d*r*f+n*m*f+u*r*g-n*h*g)*A,e[2]=(a*m*i-d*s*i+d*r*l-n*m*l-a*r*g+n*s*g)*A,e[3]=(u*s*i-a*h*i-u*r*l+n*h*l+a*r*f-n*s*f)*A,e[4]=v*A,e[5]=(c*m*i-p*h*i+p*r*f-t*m*f-c*r*g+t*h*g)*A,e[6]=(p*s*i-o*m*i-p*r*l+t*m*l+o*r*g-t*s*g)*A,e[7]=(o*h*i-c*s*i+c*r*l-t*h*l-o*r*f+t*s*f)*A,e[8]=b*A,e[9]=(p*u*i-c*d*i-p*n*f+t*d*f+c*n*g-t*u*g)*A,e[10]=(o*d*i-p*a*i+p*n*l-t*d*l-o*n*g+t*a*g)*A,e[11]=(c*a*i-o*u*i-c*n*l+t*u*l+o*n*f-t*a*f)*A,e[12]=_*A,e[13]=(c*d*r-p*u*r+p*n*h-t*d*h-c*n*m+t*u*m)*A,e[14]=(p*a*r-o*d*r-p*n*s+t*d*s+o*n*m-t*a*m)*A,e[15]=(o*u*r-c*a*r+c*n*s-t*u*s-o*n*h+t*a*h)*A,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,l=i*o,c=i*a;return this.set(l*o+n,l*a-r*s,l*s+r*a,0,l*a+r*s,c*a+n,c*s-r*o,0,l*s-r*a,c*s+r*o,i*s*s+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,o){return this.set(1,n,i,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,l=i+i,c=o+o,u=a+a,h=i*l,f=i*c,p=i*u,d=o*c,m=o*u,g=a*u,y=s*l,v=s*c,b=s*u,_=n.x,x=n.y,A=n.z;return r[0]=(1-(d+g))*_,r[1]=(f+b)*_,r[2]=(p-v)*_,r[3]=0,r[4]=(f-b)*x,r[5]=(1-(h+g))*x,r[6]=(m+y)*x,r[7]=0,r[8]=(p+v)*A,r[9]=(m-y)*A,r[10]=(1-(h+d))*A,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=ot.set(r[0],r[1],r[2]).length();const o=ot.set(r[4],r[5],r[6]).length(),a=ot.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],at.copy(this);const s=1/i,l=1/o,c=1/a;return at.elements[0]*=s,at.elements[1]*=s,at.elements[2]*=s,at.elements[4]*=l,at.elements[5]*=l,at.elements[6]*=l,at.elements[8]*=c,at.elements[9]*=c,at.elements[10]*=c,t.setFromRotationMatrix(at),n.x=i,n.y=o,n.z=a,this}makePerspective(e,t,n,r,i,o){const a=this.elements,s=2*i/(t-e),l=2*i/(n-r),c=(t+e)/(t-e),u=(n+r)/(n-r),h=-(o+i)/(o-i),f=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,r,i,o){const a=this.elements,s=1/(t-e),l=1/(n-r),c=1/(o-i),u=(t+e)*s,h=(n+r)*l,f=(o+i)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const ot=new Be,at=new it,st=new Be(0,0,0),lt=new Be(1,1,1),ct=new Be,ut=new Be,ht=new Be,ft=new it,pt=new Te;class dt{constructor(e=0,t=0,n=0,r=dt.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,i=r[0],o=r[4],a=r[8],s=r[1],l=r[5],c=r[9],u=r[2],h=r[6],f=r[10];switch(t){case"XYZ":this._y=Math.asin(Y(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,f),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Y(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-u,i),this._z=0);break;case"ZXY":this._x=Math.asin(Y(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,f),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-Y(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(Y(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,i)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-Y(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-c,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return ft.makeRotationFromQuaternion(e),this.setFromRotationMatrix(ft,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return pt.setFromEuler(this),this.setFromQuaternion(pt,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}dt.DefaultOrder="XYZ",dt.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class mt{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let gt=0;const yt=new Be,vt=new Te,bt=new it,_t=new Be,xt=new Be,At=new Be,wt=new Te,Ct=new Be(1,0,0),Et=new Be(0,1,0),St=new Be(0,0,1),Tt={type:"added"},Bt={type:"removed"};class kt extends W{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:gt++}),this.uuid=Z(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=kt.DefaultUp.clone();const e=new Be,t=new dt,n=new Te,r=new Be(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new it},normalMatrix:{value:new re}}),this.matrix=new it,this.matrixWorld=new it,this.matrixAutoUpdate=kt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=kt.DefaultMatrixWorldAutoUpdate,this.layers=new mt,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return vt.setFromAxisAngle(e,t),this.quaternion.multiply(vt),this}rotateOnWorldAxis(e,t){return vt.setFromAxisAngle(e,t),this.quaternion.premultiply(vt),this}rotateX(e){return this.rotateOnAxis(Ct,e)}rotateY(e){return this.rotateOnAxis(Et,e)}rotateZ(e){return this.rotateOnAxis(St,e)}translateOnAxis(e,t){return yt.copy(e).applyQuaternion(this.quaternion),this.position.add(yt.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Ct,e)}translateY(e){return this.translateOnAxis(Et,e)}translateZ(e){return this.translateOnAxis(St,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(bt.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?_t.copy(e):_t.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),xt.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?bt.lookAt(xt,_t,this.up):bt.lookAt(_t,xt,this.up),this.quaternion.setFromRotationMatrix(bt),r&&(bt.extractRotation(r.matrixWorld),vt.setFromRotationMatrix(bt),this.quaternion.premultiply(vt.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Tt)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Bt)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(Bt)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),bt.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),bt.multiply(e.parent.matrixWorld)),e.applyMatrix4(bt),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(xt,e,At),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(xt,wt,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++){const r=t[n];!0!==r.matrixWorldAutoUpdate&&!0!==e||r.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){const n=e[t];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=o(e.geometries),r=o(e.materials),i=o(e.textures),a=o(e.images),s=o(e.shapes),l=o(e.skeletons),c=o(e.animations),u=o(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),a.length>0&&(n.images=a),s.length>0&&(n.shapes=s),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=r,n;function o(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const n=e.children[t];this.add(n.clone())}return this}}kt.DefaultUp=new Be(0,1,0),kt.DefaultMatrixAutoUpdate=!0,kt.DefaultMatrixWorldAutoUpdate=!0;const Mt=new Be,Pt=new Be,It=new Be,Ot=new Be,Dt=new Be,zt=new Be,Lt=new Be,Rt=new Be,Ft=new Be,Ut=new Be;class Nt{constructor(e=new Be,t=new Be,n=new Be){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),Mt.subVectors(e,t),r.cross(Mt);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){Mt.subVectors(r,t),Pt.subVectors(n,t),It.subVectors(e,t);const o=Mt.dot(Mt),a=Mt.dot(Pt),s=Mt.dot(It),l=Pt.dot(Pt),c=Pt.dot(It),u=o*l-a*a;if(0===u)return i.set(-2,-1,-1);const h=1/u,f=(l*s-a*c)*h,p=(o*c-a*s)*h;return i.set(1-f-p,p,f)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,Ot),Ot.x>=0&&Ot.y>=0&&Ot.x+Ot.y<=1}static getUV(e,t,n,r,i,o,a,s){return this.getBarycoord(e,t,n,r,Ot),s.set(0,0),s.addScaledVector(i,Ot.x),s.addScaledVector(o,Ot.y),s.addScaledVector(a,Ot.z),s}static isFrontFacing(e,t,n,r){return Mt.subVectors(n,t),Pt.subVectors(e,t),Mt.cross(Pt).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Mt.subVectors(this.c,this.b),Pt.subVectors(this.a,this.b),.5*Mt.cross(Pt).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Nt.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Nt.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,i){return Nt.getUV(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return Nt.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Nt.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,i=this.c;let o,a;Dt.subVectors(r,n),zt.subVectors(i,n),Rt.subVectors(e,n);const s=Dt.dot(Rt),l=zt.dot(Rt);if(s<=0&&l<=0)return t.copy(n);Ft.subVectors(e,r);const c=Dt.dot(Ft),u=zt.dot(Ft);if(c>=0&&u<=c)return t.copy(r);const h=s*u-c*l;if(h<=0&&s>=0&&c<=0)return o=s/(s-c),t.copy(n).addScaledVector(Dt,o);Ut.subVectors(e,i);const f=Dt.dot(Ut),p=zt.dot(Ut);if(p>=0&&f<=p)return t.copy(i);const d=f*l-s*p;if(d<=0&&l>=0&&p<=0)return a=l/(l-p),t.copy(n).addScaledVector(zt,a);const m=c*p-f*u;if(m<=0&&u-c>=0&&f-p>=0)return Lt.subVectors(i,r),a=(u-c)/(u-c+(f-p)),t.copy(r).addScaledVector(Lt,a);const g=1/(m+d+h);return o=d*g,a=h*g,t.copy(n).addScaledVector(Dt,o).addScaledVector(zt,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let jt=0;class Vt extends W{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:jt++}),this.uuid=Z(),this.name="",this.type="Material",this.blending=a,this.side=r,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=h,this.blendEquation=c,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=V,this.stencilZFail=V,this.stencilZPass=V,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==a&&(n.blending=this.blending),this.side!==r&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){const t=i(e.textures),r=i(e.images);t.length>0&&(n.textures=t),r.length>0&&(n.images=r)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class Gt extends Vt{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ge(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const qt=new Be,Wt=new ne;class Ht{constructor(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)Wt.fromBufferAttribute(this,t),Wt.applyMatrix3(e),this.setXY(t,Wt.x,Wt.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)qt.fromBufferAttribute(this,t),qt.applyMatrix3(e),this.setXYZ(t,qt.x,qt.y,qt.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)qt.fromBufferAttribute(this,t),qt.applyMatrix4(e),this.setXYZ(t,qt.x,qt.y,qt.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)qt.fromBufferAttribute(this,t),qt.applyNormalMatrix(e),this.setXYZ(t,qt.x,qt.y,qt.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)qt.fromBufferAttribute(this,t),qt.transformDirection(e),this.setXYZ(t,qt.x,qt.y,qt.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ee(t,this.array)),t}setX(e,t){return this.normalized&&(t=te(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ee(t,this.array)),t}setY(e,t){return this.normalized&&(t=te(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ee(t,this.array)),t}setZ(e,t){return this.normalized&&(t=te(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ee(t,this.array)),t}setW(e,t){return this.normalized&&(t=te(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=te(t,this.array),n=te(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=te(t,this.array),n=te(n,this.array),r=te(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=te(t,this.array),n=te(n,this.array),r=te(r,this.array),i=te(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class $t extends Ht{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Xt extends Ht{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Zt extends Ht{constructor(e,t,n){super(new Float32Array(e),t,n)}}let Yt=0;const Kt=new it,Jt=new kt,Qt=new Be,en=new Pe,tn=new Pe,nn=new Be;class rn extends W{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Yt++}),this.uuid=Z(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(ie(e)?Xt:$t)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new re).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Kt.makeRotationFromQuaternion(e),this.applyMatrix4(Kt),this}rotateX(e){return Kt.makeRotationX(e),this.applyMatrix4(Kt),this}rotateY(e){return Kt.makeRotationY(e),this.applyMatrix4(Kt),this}rotateZ(e){return Kt.makeRotationZ(e),this.applyMatrix4(Kt),this}translate(e,t,n){return Kt.makeTranslation(e,t,n),this.applyMatrix4(Kt),this}scale(e,t,n){return Kt.makeScale(e,t,n),this.applyMatrix4(Kt),this}lookAt(e){return Jt.lookAt(e),Jt.updateMatrix(),this.applyMatrix4(Jt.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Qt).negate(),this.translate(Qt.x,Qt.y,Qt.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Zt(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Pe);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Be(-1/0,-1/0,-1/0),new Be(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];en.setFromBufferAttribute(n),this.morphTargetsRelative?(nn.addVectors(this.boundingBox.min,en.min),this.boundingBox.expandByPoint(nn),nn.addVectors(this.boundingBox.max,en.max),this.boundingBox.expandByPoint(nn)):(this.boundingBox.expandByPoint(en.min),this.boundingBox.expandByPoint(en.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Ze);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Be,1/0);if(e){const n=this.boundingSphere.center;if(en.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];tn.setFromBufferAttribute(n),this.morphTargetsRelative?(nn.addVectors(en.min,tn.min),en.expandByPoint(nn),nn.addVectors(en.max,tn.max),en.expandByPoint(nn)):(en.expandByPoint(tn.min),en.expandByPoint(tn.max))}en.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)nn.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(nn));if(t)for(let i=0,o=t.length;i<o;i++){const o=t[i],a=this.morphTargetsRelative;for(let t=0,i=o.count;t<i;t++)nn.fromBufferAttribute(o,t),a&&(Qt.fromBufferAttribute(e,t),nn.add(Qt)),r=Math.max(r,n.distanceToSquared(nn))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,r=t.position.array,i=t.normal.array,o=t.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Ht(new Float32Array(4*a),4));const s=this.getAttribute("tangent").array,l=[],c=[];for(let e=0;e<a;e++)l[e]=new Be,c[e]=new Be;const u=new Be,h=new Be,f=new Be,p=new ne,d=new ne,m=new ne,g=new Be,y=new Be;function v(e,t,n){u.fromArray(r,3*e),h.fromArray(r,3*t),f.fromArray(r,3*n),p.fromArray(o,2*e),d.fromArray(o,2*t),m.fromArray(o,2*n),h.sub(u),f.sub(u),d.sub(p),m.sub(p);const i=1/(d.x*m.y-m.x*d.y);isFinite(i)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(f,-d.y).multiplyScalar(i),y.copy(f).multiplyScalar(d.x).addScaledVector(h,-m.x).multiplyScalar(i),l[e].add(g),l[t].add(g),l[n].add(g),c[e].add(y),c[t].add(y),c[n].add(y))}let b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(let e=0,t=b.length;e<t;++e){const t=b[e],r=t.start;for(let e=r,i=r+t.count;e<i;e+=3)v(n[e+0],n[e+1],n[e+2])}const _=new Be,x=new Be,A=new Be,w=new Be;function C(e){A.fromArray(i,3*e),w.copy(A);const t=l[e];_.copy(t),_.sub(A.multiplyScalar(A.dot(t))).normalize(),x.crossVectors(w,t);const n=x.dot(c[e])<0?-1:1;s[4*e]=_.x,s[4*e+1]=_.y,s[4*e+2]=_.z,s[4*e+3]=n}for(let e=0,t=b.length;e<t;++e){const t=b[e],r=t.start;for(let e=r,i=r+t.count;e<i;e+=3)C(n[e+0]),C(n[e+1]),C(n[e+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new Ht(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new Be,i=new Be,o=new Be,a=new Be,s=new Be,l=new Be,c=new Be,u=new Be;if(e)for(let h=0,f=e.count;h<f;h+=3){const f=e.getX(h+0),p=e.getX(h+1),d=e.getX(h+2);r.fromBufferAttribute(t,f),i.fromBufferAttribute(t,p),o.fromBufferAttribute(t,d),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),a.fromBufferAttribute(n,f),s.fromBufferAttribute(n,p),l.fromBufferAttribute(n,d),a.add(c),s.add(c),l.add(c),n.setXYZ(f,a.x,a.y,a.z),n.setXYZ(p,s.x,s.y,s.z),n.setXYZ(d,l.x,l.y,l.z)}else for(let e=0,a=t.count;e<a;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),o.fromBufferAttribute(t,e+2),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)nn.fromBufferAttribute(e,t),nn.normalize(),e.setXYZ(t,nn.x,nn.y,nn.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,o=new n.constructor(t.length*r);let a=0,s=0;for(let i=0,l=t.length;i<l;i++){a=e.isInterleavedBufferAttribute?t[i]*e.data.stride+e.offset:t[i]*r;for(let e=0;e<r;e++)o[s++]=n[a++]}return new Ht(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new rn,n=this.index.array,r=this.attributes;for(const i in r){const o=e(r[i],n);t.setAttribute(i,o)}const i=this.morphAttributes;for(const r in i){const o=[],a=i[r];for(let t=0,r=a.length;t<r;t++){const r=e(a[t],n);o.push(r)}t.morphAttributes[r]=o}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let e=0,n=o.length;e<n;e++){const n=o[e];t.addGroup(n.start,n.count,n.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const t in n){const r=n[t];e.data.attributes[t]=r.toJSON(e.data)}const r={};let i=!1;for(const t in this.morphAttributes){const n=this.morphAttributes[t],o=[];for(let t=0,r=n.length;t<r;t++){const r=n[t];o.push(r.toJSON(e.data))}o.length>0&&(r[t]=o,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const e in r){const n=r[e];this.setAttribute(e,n.clone(t))}const i=e.morphAttributes;for(const e in i){const n=[],r=i[e];for(let e=0,i=r.length;e<i;e++)n.push(r[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let e=0,t=o.length;e<t;e++){const t=o[e];this.addGroup(t.start,t.count,t.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const s=e.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const on=new it,an=new rt,sn=new Ze,ln=new Be,cn=new Be,un=new Be,hn=new Be,fn=new Be,pn=new Be,dn=new Be,mn=new Be,gn=new Be,yn=new ne,vn=new ne,bn=new ne,_n=new Be,xn=new Be;class An extends kt{constructor(e=new rn,t=new Gt){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),sn.copy(n.boundingSphere),sn.applyMatrix4(i),!1===e.ray.intersectsSphere(sn))return;if(on.copy(i).invert(),an.copy(e.ray).applyMatrix4(on),null!==n.boundingBox&&!1===an.intersectsBox(n.boundingBox))return;let o;const a=n.index,s=n.attributes.position,l=n.morphAttributes.position,c=n.morphTargetsRelative,u=n.attributes.uv,h=n.attributes.uv2,f=n.groups,p=n.drawRange;if(null!==a)if(Array.isArray(r))for(let n=0,i=f.length;n<i;n++){const i=f[n],d=r[i.materialIndex];for(let n=Math.max(i.start,p.start),r=Math.min(a.count,Math.min(i.start+i.count,p.start+p.count));n<r;n+=3){const r=a.getX(n),f=a.getX(n+1),p=a.getX(n+2);o=wn(this,d,e,an,s,l,c,u,h,r,f,p),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=i.materialIndex,t.push(o))}}else for(let n=Math.max(0,p.start),i=Math.min(a.count,p.start+p.count);n<i;n+=3){const i=a.getX(n),f=a.getX(n+1),p=a.getX(n+2);o=wn(this,r,e,an,s,l,c,u,h,i,f,p),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}else if(void 0!==s)if(Array.isArray(r))for(let n=0,i=f.length;n<i;n++){const i=f[n],a=r[i.materialIndex];for(let n=Math.max(i.start,p.start),r=Math.min(s.count,Math.min(i.start+i.count,p.start+p.count));n<r;n+=3)o=wn(this,a,e,an,s,l,c,u,h,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=i.materialIndex,t.push(o))}else for(let n=Math.max(0,p.start),i=Math.min(s.count,p.start+p.count);n<i;n+=3)o=wn(this,r,e,an,s,l,c,u,h,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}}function wn(e,t,n,r,a,s,l,c,u,h,f,p){ln.fromBufferAttribute(a,h),cn.fromBufferAttribute(a,f),un.fromBufferAttribute(a,p);const d=e.morphTargetInfluences;if(s&&d){dn.set(0,0,0),mn.set(0,0,0),gn.set(0,0,0);for(let e=0,t=s.length;e<t;e++){const t=d[e],n=s[e];0!==t&&(hn.fromBufferAttribute(n,h),fn.fromBufferAttribute(n,f),pn.fromBufferAttribute(n,p),l?(dn.addScaledVector(hn,t),mn.addScaledVector(fn,t),gn.addScaledVector(pn,t)):(dn.addScaledVector(hn.sub(ln),t),mn.addScaledVector(fn.sub(cn),t),gn.addScaledVector(pn.sub(un),t)))}ln.add(dn),cn.add(mn),un.add(gn)}e.isSkinnedMesh&&(e.boneTransform(h,ln),e.boneTransform(f,cn),e.boneTransform(p,un));const m=function(e,t,n,r,a,s,l,c){let u;if(u=t.side===i?r.intersectTriangle(l,s,a,!0,c):r.intersectTriangle(a,s,l,t.side!==o,c),null===u)return null;xn.copy(c),xn.applyMatrix4(e.matrixWorld);const h=n.ray.origin.distanceTo(xn);return h<n.near||h>n.far?null:{distance:h,point:xn.clone(),object:e}}(e,t,n,r,ln,cn,un,_n);if(m){c&&(yn.fromBufferAttribute(c,h),vn.fromBufferAttribute(c,f),bn.fromBufferAttribute(c,p),m.uv=Nt.getUV(_n,ln,cn,un,yn,vn,bn,new ne)),u&&(yn.fromBufferAttribute(u,h),vn.fromBufferAttribute(u,f),bn.fromBufferAttribute(u,p),m.uv2=Nt.getUV(_n,ln,cn,un,yn,vn,bn,new ne));const e={a:h,b:f,c:p,normal:new Be,materialIndex:0};Nt.getNormal(ln,cn,un,e.normal),m.face=e}return m}class Cn extends rn{constructor(e=1,t=1,n=1,r=1,i=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};const a=this;r=Math.floor(r),i=Math.floor(i),o=Math.floor(o);const s=[],l=[],c=[],u=[];let h=0,f=0;function p(e,t,n,r,i,o,p,d,m,g,y){const v=o/m,b=p/g,_=o/2,x=p/2,A=d/2,w=m+1,C=g+1;let E=0,S=0;const T=new Be;for(let o=0;o<C;o++){const a=o*b-x;for(let s=0;s<w;s++){const h=s*v-_;T[e]=h*r,T[t]=a*i,T[n]=A,l.push(T.x,T.y,T.z),T[e]=0,T[t]=0,T[n]=d>0?1:-1,c.push(T.x,T.y,T.z),u.push(s/m),u.push(1-o/g),E+=1}}for(let e=0;e<g;e++)for(let t=0;t<m;t++){const n=h+t+w*e,r=h+t+w*(e+1),i=h+(t+1)+w*(e+1),o=h+(t+1)+w*e;s.push(n,r,o),s.push(r,i,o),S+=6}a.addGroup(f,S,y),f+=S,h+=E}p("z","y","x",-1,-1,n,t,e,o,i,0),p("z","y","x",1,-1,n,t,-e,o,i,1),p("x","z","y",1,1,e,n,t,r,o,2),p("x","z","y",1,-1,e,n,-t,r,o,3),p("x","y","z",1,-1,e,t,n,r,i,4),p("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new Zt(l,3)),this.setAttribute("normal",new Zt(c,3)),this.setAttribute("uv",new Zt(u,2))}static fromJSON(e){return new Cn(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function En(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function Sn(e){const t={};for(let n=0;n<e.length;n++){const r=En(e[n]);for(const e in r)t[e]=r[e]}return t}const Tn={clone:En,merge:Sn};class Bn extends Vt{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=En(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const r=this.uniforms[n].value;r&&r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class kn extends kt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new it,this.projectionMatrix=new it,this.projectionMatrixInverse=new it}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class Mn extends kn{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*X*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*$*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*X*Math.atan(Math.tan(.5*$*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*$*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const e=o.fullWidth,a=o.fullHeight;i+=o.offsetX*r/e,t-=o.offsetY*n/a,r*=o.width/e,n*=o.height/a}const a=this.filmOffset;0!==a&&(i+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Pn=90;class In extends kt{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n;const r=new Mn(Pn,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new Be(1,0,0)),this.add(r);const i=new Mn(Pn,1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Be(-1,0,0)),this.add(i);const o=new Mn(Pn,1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new Be(0,1,0)),this.add(o);const a=new Mn(Pn,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new Be(0,-1,0)),this.add(a);const s=new Mn(Pn,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new Be(0,0,1)),this.add(s);const l=new Mn(Pn,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new Be(0,0,-1)),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,i,o,a,s,l]=this.children,c=e.getRenderTarget(),u=e.toneMapping,h=e.xr.enabled;e.toneMapping=0,e.xr.enabled=!1;const f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,s),n.texture.generateMipmaps=f,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(c),e.toneMapping=u,e.xr.enabled=h,n.texture.needsPMREMUpdate=!0}}class On extends Ae{constructor(e,t,n,r,i,o,a,s,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:f,n,r,i,o,a,s,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Dn extends Ce{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new On(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:b}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",o="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new Cn(5,5,5),s=new Bn({name:"CubemapFromEquirect",uniforms:En(n),vertexShader:r,fragmentShader:o,side:i,blending:0});s.uniforms.tEquirect.value=t;const l=new An(a,s),c=t.minFilter;return t.minFilter===_&&(t.minFilter=b),new In(1,10,this).update(e,l),t.minFilter=c,l.geometry.dispose(),l.material.dispose(),this}clear(e,t,n,r){const i=e.getRenderTarget();for(let i=0;i<6;i++)e.setRenderTarget(this,i),e.clear(t,n,r);e.setRenderTarget(i)}}const zn=new Be,Ln=new Be,Rn=new re;class Fn{constructor(e=new Be(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=zn.subVectors(n,t).cross(Ln.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const n=e.delta(zn),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(n).multiplyScalar(i).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Rn.getNormalMatrix(e),r=this.coplanarPoint(zn).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Un=new Ze,Nn=new Be;class jn{constructor(e=new Fn,t=new Fn,n=new Fn,r=new Fn,i=new Fn,o=new Fn){this.planes=[e,t,n,r,i,o]}set(e,t,n,r,i,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],c=n[6],u=n[7],h=n[8],f=n[9],p=n[10],d=n[11],m=n[12],g=n[13],y=n[14],v=n[15];return t[0].setComponents(a-r,u-s,d-h,v-m).normalize(),t[1].setComponents(a+r,u+s,d+h,v+m).normalize(),t[2].setComponents(a+i,u+l,d+f,v+g).normalize(),t[3].setComponents(a-i,u-l,d-f,v-g).normalize(),t[4].setComponents(a-o,u-c,d-p,v-y).normalize(),t[5].setComponents(a+o,u+c,d+p,v+y).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Un.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Un)}intersectsSprite(e){return Un.center.set(0,0,0),Un.radius=.7071067811865476,Un.applyMatrix4(e.matrixWorld),this.intersectsSphere(Un)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let e=0;e<6;e++)if(t[e].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(Nn.x=r.normal.x>0?e.max.x:e.min.x,Nn.y=r.normal.y>0?e.max.y:e.min.y,Nn.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Nn)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Vn(){let e=null,t=!1,n=null,r=null;function i(t,o){n(t,o),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Gn(e,t){const n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){const e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const o=r.get(t);void 0===o?r.set(t,function(t,r){const i=t.array,o=t.usage,a=e.createBuffer();let s;if(e.bindBuffer(r,a),e.bufferData(r,i,o),t.onUploadCallback(),i instanceof Float32Array)s=5126;else if(i instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");s=5131}else s=5123;else if(i instanceof Int16Array)s=5122;else if(i instanceof Uint32Array)s=5125;else if(i instanceof Int32Array)s=5124;else if(i instanceof Int8Array)s=5120;else if(i instanceof Uint8Array)s=5121;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);s=5121}return{buffer:a,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,i)):o.version<t.version&&(function(t,r,i){const o=r.array,a=r.updateRange;e.bindBuffer(i,t),-1===a.count?e.bufferSubData(i,0,o):(n?e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}(o.buffer,t,i),o.version=t.version)}}}class qn extends rn{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,o=t/2,a=Math.floor(n),s=Math.floor(r),l=a+1,c=s+1,u=e/a,h=t/s,f=[],p=[],d=[],m=[];for(let e=0;e<c;e++){const t=e*h-o;for(let n=0;n<l;n++){const r=n*u-i;p.push(r,-t,0),d.push(0,0,1),m.push(n/a),m.push(1-e/s)}}for(let e=0;e<s;e++)for(let t=0;t<a;t++){const n=t+l*e,r=t+l*(e+1),i=t+1+l*(e+1),o=t+1+l*e;f.push(n,r,o),f.push(r,i,o)}this.setIndex(f),this.setAttribute("position",new Zt(p,3)),this.setAttribute("normal",new Zt(d,3)),this.setAttribute("uv",new Zt(m,2))}static fromJSON(e){return new qn(e.width,e.height,e.widthSegments,e.heightSegments)}}const Wn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert\n#define Material_LightProbeLOD( material )\t(0)",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Hn={common:{diffuse:{value:new ge(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new re},uv2Transform:{value:new re},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ne(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ge(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ge(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new re}},sprite:{diffuse:{value:new ge(16777215)},opacity:{value:1},center:{value:new ne(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new re}}},$n={basic:{uniforms:Sn([Hn.common,Hn.specularmap,Hn.envmap,Hn.aomap,Hn.lightmap,Hn.fog]),vertexShader:Wn.meshbasic_vert,fragmentShader:Wn.meshbasic_frag},lambert:{uniforms:Sn([Hn.common,Hn.specularmap,Hn.envmap,Hn.aomap,Hn.lightmap,Hn.emissivemap,Hn.bumpmap,Hn.normalmap,Hn.displacementmap,Hn.fog,Hn.lights,{emissive:{value:new ge(0)}}]),vertexShader:Wn.meshlambert_vert,fragmentShader:Wn.meshlambert_frag},phong:{uniforms:Sn([Hn.common,Hn.specularmap,Hn.envmap,Hn.aomap,Hn.lightmap,Hn.emissivemap,Hn.bumpmap,Hn.normalmap,Hn.displacementmap,Hn.fog,Hn.lights,{emissive:{value:new ge(0)},specular:{value:new ge(1118481)},shininess:{value:30}}]),vertexShader:Wn.meshphong_vert,fragmentShader:Wn.meshphong_frag},standard:{uniforms:Sn([Hn.common,Hn.envmap,Hn.aomap,Hn.lightmap,Hn.emissivemap,Hn.bumpmap,Hn.normalmap,Hn.displacementmap,Hn.roughnessmap,Hn.metalnessmap,Hn.fog,Hn.lights,{emissive:{value:new ge(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Wn.meshphysical_vert,fragmentShader:Wn.meshphysical_frag},toon:{uniforms:Sn([Hn.common,Hn.aomap,Hn.lightmap,Hn.emissivemap,Hn.bumpmap,Hn.normalmap,Hn.displacementmap,Hn.gradientmap,Hn.fog,Hn.lights,{emissive:{value:new ge(0)}}]),vertexShader:Wn.meshtoon_vert,fragmentShader:Wn.meshtoon_frag},matcap:{uniforms:Sn([Hn.common,Hn.bumpmap,Hn.normalmap,Hn.displacementmap,Hn.fog,{matcap:{value:null}}]),vertexShader:Wn.meshmatcap_vert,fragmentShader:Wn.meshmatcap_frag},points:{uniforms:Sn([Hn.points,Hn.fog]),vertexShader:Wn.points_vert,fragmentShader:Wn.points_frag},dashed:{uniforms:Sn([Hn.common,Hn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Wn.linedashed_vert,fragmentShader:Wn.linedashed_frag},depth:{uniforms:Sn([Hn.common,Hn.displacementmap]),vertexShader:Wn.depth_vert,fragmentShader:Wn.depth_frag},normal:{uniforms:Sn([Hn.common,Hn.bumpmap,Hn.normalmap,Hn.displacementmap,{opacity:{value:1}}]),vertexShader:Wn.meshnormal_vert,fragmentShader:Wn.meshnormal_frag},sprite:{uniforms:Sn([Hn.sprite,Hn.fog]),vertexShader:Wn.sprite_vert,fragmentShader:Wn.sprite_frag},background:{uniforms:{uvTransform:{value:new re},t2D:{value:null}},vertexShader:Wn.background_vert,fragmentShader:Wn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0}},vertexShader:Wn.backgroundCube_vert,fragmentShader:Wn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Wn.cube_vert,fragmentShader:Wn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Wn.equirect_vert,fragmentShader:Wn.equirect_frag},distanceRGBA:{uniforms:Sn([Hn.common,Hn.displacementmap,{referencePosition:{value:new Be},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Wn.distanceRGBA_vert,fragmentShader:Wn.distanceRGBA_frag},shadow:{uniforms:Sn([Hn.lights,Hn.fog,{color:{value:new ge(0)},opacity:{value:1}}]),vertexShader:Wn.shadow_vert,fragmentShader:Wn.shadow_frag}};function Xn(e,t,n,o,a,s,l){const c=new ge(0);let u,h,f=!0===s?0:1,p=null,m=0,g=null;function y(e,t){o.buffers.color.setClear(e.r,e.g,e.b,t,l)}return{getClearColor:function(){return c},setClearColor:function(e,t=1){c.set(e),f=t,y(c,f)},getClearAlpha:function(){return f},setClearAlpha:function(e){f=e,y(c,f)},render:function(o,s){let l=!1,v=!0===s.isScene?s.background:null;v&&v.isTexture&&(v=(s.backgroundBlurriness>0?n:t).get(v));const b=e.xr,_=b.getSession&&b.getSession();_&&"additive"===_.environmentBlendMode&&(v=null),null===v?y(c,f):v&&v.isColor&&(y(v,1),l=!0),(e.autoClear||l)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),v&&(v.isCubeTexture||v.mapping===d)?(void 0===h&&(h=new An(new Cn(1,1,1),new Bn({name:"BackgroundCubeMaterial",uniforms:En($n.backgroundCube.uniforms),vertexShader:$n.backgroundCube.vertexShader,fragmentShader:$n.backgroundCube.fragmentShader,side:i,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(h)),h.material.uniforms.envMap.value=v,h.material.uniforms.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,h.material.uniforms.backgroundBlurriness.value=s.backgroundBlurriness,p===v&&m===v.version&&g===e.toneMapping||(h.material.needsUpdate=!0,p=v,m=v.version,g=e.toneMapping),h.layers.enableAll(),o.unshift(h,h.geometry,h.material,0,0,null)):v&&v.isTexture&&(void 0===u&&(u=new An(new qn(2,2),new Bn({name:"BackgroundMaterial",uniforms:En($n.background.uniforms),vertexShader:$n.background.vertexShader,fragmentShader:$n.background.fragmentShader,side:r,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(u)),u.material.uniforms.t2D.value=v,!0===v.matrixAutoUpdate&&v.updateMatrix(),u.material.uniforms.uvTransform.value.copy(v.matrix),p===v&&m===v.version&&g===e.toneMapping||(u.material.needsUpdate=!0,p=v,m=v.version,g=e.toneMapping),u.layers.enableAll(),o.unshift(u,u.geometry,u.material,0,0,null))}}}function Zn(e,t,n,r){const i=e.getParameter(34921),o=r.isWebGL2?null:t.get("OES_vertex_array_object"),a=r.isWebGL2||null!==o,s={},l=p(null);let c=l,u=!1;function h(t){return r.isWebGL2?e.bindVertexArray(t):o.bindVertexArrayOES(t)}function f(t){return r.isWebGL2?e.deleteVertexArray(t):o.deleteVertexArrayOES(t)}function p(e){const t=[],n=[],r=[];for(let e=0;e<i;e++)t[e]=0,n[e]=0,r[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function d(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function m(e){g(e,0)}function g(n,i){const o=c.newAttributes,a=c.enabledAttributes,s=c.attributeDivisors;o[n]=1,0===a[n]&&(e.enableVertexAttribArray(n),a[n]=1),s[n]!==i&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i)}function y(){const t=c.newAttributes,n=c.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function v(t,n,i,o,a,s){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,o,a,s):e.vertexAttribIPointer(t,n,i,a,s)}function b(){_(),u=!0,c!==l&&(c=l,h(c.object))}function _(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,f,b,_){let x=!1;if(a){const t=function(t,n,i){const a=!0===i.wireframe;let l=s[t.id];void 0===l&&(l={},s[t.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[a];return void 0===u&&(u=p(r.isWebGL2?e.createVertexArray():o.createVertexArrayOES()),c[a]=u),u}(b,f,l);c!==t&&(c=t,h(c.object)),x=function(e,t,n,r){const i=c.attributes,o=t.attributes;let a=0;const s=n.getAttributes();for(const t in s)if(s[t].location>=0){const n=i[t];let r=o[t];if(void 0===r&&("instanceMatrix"===t&&e.instanceMatrix&&(r=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(r=e.instanceColor)),void 0===n)return!0;if(n.attribute!==r)return!0;if(r&&n.data!==r.data)return!0;a++}return c.attributesNum!==a||c.index!==r}(i,b,f,_),x&&function(e,t,n,r){const i={},o=t.attributes;let a=0;const s=n.getAttributes();for(const t in s)if(s[t].location>=0){let n=o[t];void 0===n&&("instanceMatrix"===t&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(n=e.instanceColor));const r={};r.attribute=n,n&&n.data&&(r.data=n.data),i[t]=r,a++}c.attributes=i,c.attributesNum=a,c.index=r}(i,b,f,_)}else{const e=!0===l.wireframe;c.geometry===b.id&&c.program===f.id&&c.wireframe===e||(c.geometry=b.id,c.program=f.id,c.wireframe=e,x=!0)}null!==_&&n.update(_,34963),(x||u)&&(u=!1,function(i,o,a,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;d();const l=s.attributes,c=a.getAttributes(),u=o.defaultAttributeValues;for(const t in c){const r=c[t];if(r.location>=0){let o=l[t];if(void 0===o&&("instanceMatrix"===t&&i.instanceMatrix&&(o=i.instanceMatrix),"instanceColor"===t&&i.instanceColor&&(o=i.instanceColor)),void 0!==o){const t=o.normalized,a=o.itemSize,l=n.get(o);if(void 0===l)continue;const c=l.buffer,u=l.type,h=l.bytesPerElement;if(o.isInterleavedBufferAttribute){const n=o.data,l=n.stride,f=o.offset;if(n.isInstancedInterleavedBuffer){for(let e=0;e<r.locationSize;e++)g(r.location+e,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<r.locationSize;e++)m(r.location+e);e.bindBuffer(34962,c);for(let e=0;e<r.locationSize;e++)v(r.location+e,a/r.locationSize,u,t,l*h,(f+a/r.locationSize*e)*h)}else{if(o.isInstancedBufferAttribute){for(let e=0;e<r.locationSize;e++)g(r.location+e,o.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=o.meshPerAttribute*o.count)}else for(let e=0;e<r.locationSize;e++)m(r.location+e);e.bindBuffer(34962,c);for(let e=0;e<r.locationSize;e++)v(r.location+e,a/r.locationSize,u,t,a*h,a/r.locationSize*e*h)}}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(r.location,n);break;case 3:e.vertexAttrib3fv(r.location,n);break;case 4:e.vertexAttrib4fv(r.location,n);break;default:e.vertexAttrib1fv(r.location,n)}}}}y()}(i,l,f,b),null!==_&&e.bindBuffer(34963,n.get(_).buffer))},reset:b,resetDefaultState:_,dispose:function(){b();for(const e in s){const t=s[e];for(const e in t){const n=t[e];for(const e in n)f(n[e].object),delete n[e];delete t[e]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0===s[e.id])return;const t=s[e.id];for(const e in t){const n=t[e];for(const e in n)f(n[e].object),delete n[e];delete t[e]}delete s[e.id]},releaseStatesOfProgram:function(e){for(const t in s){const n=s[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)f(r[e].object),delete r[e];delete n[e.id]}},initAttributes:d,enableAttribute:m,disableUnusedAttributes:y}}function Yn(e,t,n,r){const i=r.isWebGL2;let o;this.setMode=function(e){o=e},this.render=function(t,r){e.drawArrays(o,t,r),n.update(r,o,1)},this.renderInstances=function(r,a,s){if(0===s)return;let l,c;if(i)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](o,r,a,s),n.update(a,o,s)}}function Kn(e,t,n){let r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;let a=void 0!==n.precision?n.precision:"highp";const s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);const l=o||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,u=e.getParameter(34930),h=e.getParameter(35660),f=e.getParameter(3379),p=e.getParameter(34076),d=e.getParameter(34921),m=e.getParameter(36347),g=e.getParameter(36348),y=e.getParameter(36349),v=h>0,b=o||t.has("OES_texture_float");return{isWebGL2:o,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:p,maxAttributes:d,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:y,vertexTextures:v,floatFragmentTextures:b,floatVertexTextures:v&&b,maxSamples:o?e.getParameter(36183):0}}function Jn(e){const t=this;let n=null,r=0,i=!1,o=!1;const a=new Fn,s=new re,l={value:null,needsUpdate:!1};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function u(e,n,r,i){const o=null!==e?e.length:0;let c=null;if(0!==o){if(c=l.value,!0!==i||null===c){const t=r+4*o,i=n.matrixWorldInverse;s.getNormalMatrix(i),(null===c||c.length<t)&&(c=new Float32Array(t));for(let t=0,n=r;t!==o;++t,n+=4)a.copy(e[t]).applyMatrix4(i,s),a.normal.toArray(c,n),c[n+3]=a.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=o,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,o){const a=0!==e.length||t||0!==r||i;return i=t,n=u(e,o,0),r=e.length,a},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1,c()},this.setState=function(t,a,s){const h=t.clippingPlanes,f=t.clipIntersection,p=t.clipShadows,d=e.get(t);if(!i||null===h||0===h.length||o&&!p)o?u(null):c();else{const e=o?0:r,t=4*e;let i=d.clippingState||null;l.value=i,i=u(h,a,t,s);for(let e=0;e!==t;++e)i[e]=n[e];d.clippingState=i,this.numIntersection=f?this.numPlanes:0,this.numPlanes+=e}}}function Qn(e){let t=new WeakMap;function n(e,t){return 303===t?e.mapping=f:304===t&&(e.mapping=p),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){const o=i.mapping;if(303===o||304===o){if(t.has(i))return n(t.get(i).texture,i.mapping);{const o=i.image;if(o&&o.height>0){const a=new Dn(o.height/2);return a.fromEquirectangularTexture(e,i),t.set(i,a),i.addEventListener("dispose",r),n(a.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}$n.physical={uniforms:Sn([$n.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new ne(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new ge(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new ne},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new ge(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new ge(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Wn.meshphysical_vert,fragmentShader:Wn.meshphysical_frag};class er extends kn{constructor(e=-1,t=1,n=1,r=-1,i=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,o=i+e*this.view.width,a-=t*this.view.offsetY,s=a-t*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const tr=[.125,.215,.35,.446,.526,.582],nr=new er,rr=new ge;let ir=null;const or=(1+Math.sqrt(5))/2,ar=1/or,sr=[new Be(1,1,1),new Be(-1,1,1),new Be(1,1,-1),new Be(-1,1,-1),new Be(0,or,ar),new Be(0,or,-ar),new Be(ar,0,or),new Be(-ar,0,or),new Be(or,ar,0),new Be(-or,ar,0)];class lr{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){ir=this._renderer.getRenderTarget(),this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=fr(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=hr(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(ir),e.scissorTest=!1,ur(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===f||e.mapping===p?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),ir=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:b,minFilter:b,generateMipmaps:!1,type:C,format:S,encoding:R,depthBuffer:!1},r=cr(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=cr(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],r=[];let i=e;const o=e-4+1+tr.length;for(let a=0;a<o;a++){const o=Math.pow(2,i);n.push(o);let s=1/o;a>e-4?s=tr[a-e+4-1]:0===a&&(s=0),r.push(s);const l=1/(o-2),c=-l,u=1+l,h=[c,c,u,c,u,u,c,c,u,u,c,u],f=6,p=6,d=3,m=2,g=1,y=new Float32Array(d*p*f),v=new Float32Array(m*p*f),b=new Float32Array(g*p*f);for(let e=0;e<f;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];y.set(r,d*p*e),v.set(h,m*p*e);const i=[e,e,e,e,e,e];b.set(i,g*p*e)}const _=new rn;_.setAttribute("position",new Ht(y,d)),_.setAttribute("uv",new Ht(v,m)),_.setAttribute("faceIndex",new Ht(b,g)),t.push(_),i>4&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(e,t,n){const r=new Float32Array(20),i=new Be(0,1,0);return new Bn({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(r,e,t)}return r}_compileMaterial(e){const t=new An(this._lodPlanes[0],e);this._renderer.compile(t,nr)}_sceneToCubeUV(e,t,n,r){const o=new Mn(90,1,t,n),a=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],l=this._renderer,c=l.autoClear,u=l.toneMapping;l.getClearColor(rr),l.toneMapping=0,l.autoClear=!1;const h=new Gt({name:"PMREM.Background",side:i,depthWrite:!1,depthTest:!1}),f=new An(new Cn,h);let p=!1;const d=e.background;d?d.isColor&&(h.color.copy(d),e.background=null,p=!0):(h.color.copy(rr),p=!0);for(let t=0;t<6;t++){const n=t%3;0===n?(o.up.set(0,a[t],0),o.lookAt(s[t],0,0)):1===n?(o.up.set(0,0,a[t]),o.lookAt(0,s[t],0)):(o.up.set(0,a[t],0),o.lookAt(0,0,s[t]));const i=this._cubeSize;ur(r,n*i,t>2?i:0,i,i),l.setRenderTarget(r),p&&l.render(f,o),l.render(e,o)}f.geometry.dispose(),f.material.dispose(),l.toneMapping=u,l.autoClear=c,e.background=d}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===f||e.mapping===p;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=fr()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=hr());const i=r?this._cubemapMaterial:this._equirectMaterial,o=new An(this._lodPlanes[0],i);i.uniforms.envMap.value=e;const a=this._cubeSize;ur(t,0,0,3*a,2*a),n.setRenderTarget(t),n.render(o,nr)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let t=1;t<this._lodPlanes.length;t++){const n=Math.sqrt(this._sigmas[t]*this._sigmas[t]-this._sigmas[t-1]*this._sigmas[t-1]),r=sr[(t-1)%sr.length];this._blur(e,t-1,t,n,r)}t.autoClear=n}_blur(e,t,n,r,i){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",i),this._halfBlur(o,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,o,a){const s=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new An(this._lodPlanes[r],l),u=l.uniforms,h=this._sizeLods[n]-1,f=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,p=i/f,d=isFinite(i)?1+Math.floor(3*p):20;d>20&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${d} samples when the maximum is set to 20`);const m=[];let g=0;for(let e=0;e<20;++e){const t=e/p,n=Math.exp(-t*t/2);m.push(n),0===e?g+=n:e<d&&(g+=2*n)}for(let e=0;e<m.length;e++)m[e]=m[e]/g;u.envMap.value=e.texture,u.samples.value=d,u.weights.value=m,u.latitudinal.value="latitudinal"===o,a&&(u.poleAxis.value=a);const{_lodMax:y}=this;u.dTheta.value=f,u.mipInt.value=y-n;const v=this._sizeLods[r];ur(t,3*v*(r>y-4?r-y+4:0),4*(this._cubeSize-v),3*v,2*v),s.setRenderTarget(t),s.render(c,nr)}}function cr(e,t,n){const r=new Ce(e,t,n);return r.texture.mapping=d,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function ur(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function hr(){return new Bn({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function fr(){return new Bn({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function pr(e){let t=new WeakMap,n=null;function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const o=i.mapping,a=303===o||304===o,s=o===f||o===p;if(a||s){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;let r=t.get(i);return null===n&&(n=new lr(e)),r=a?n.fromEquirectangular(i,r):n.fromCubemap(i,r),t.set(i,r),r.texture}if(t.has(i))return t.get(i).texture;{const o=i.image;if(a&&o&&o.height>0||s&&o&&function(e){let t=0;for(let n=0;n<6;n++)void 0!==e[n]&&t++;return 6===t}(o)){null===n&&(n=new lr(e));const o=a?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,o),i.addEventListener("dispose",r),o.texture}return null}}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function dr(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function mr(e,t,n,r){const i={},o=new WeakMap;function a(e){const s=e.target;null!==s.index&&t.remove(s.index);for(const e in s.attributes)t.remove(s.attributes[e]);s.removeEventListener("dispose",a),delete i[s.id];const l=o.get(s);l&&(t.remove(l),o.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){const n=[],r=e.index,i=e.attributes.position;let a=0;if(null!==r){const e=r.array;a=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],o=e[t+2];n.push(r,i,i,o,o,r)}}else{const e=i.array;a=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}const s=new(ie(n)?Xt:$t)(n,1);s.version=a;const l=o.get(e);l&&t.remove(l),o.set(e,s)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",a),i[t.id]=!0,n.memory.geometries++),t},update:function(e){const n=e.attributes;for(const e in n)t.update(n[e],34962);const r=e.morphAttributes;for(const e in r){const n=r[e];for(let e=0,r=n.length;e<r;e++)t.update(n[e],34962)}},getWireframeAttribute:function(e){const t=o.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return o.get(e)}}}function gr(e,t,n,r){const i=r.isWebGL2;let o,a,s;this.setMode=function(e){o=e},this.setIndex=function(e){a=e.type,s=e.bytesPerElement},this.render=function(t,r){e.drawElements(o,r,a,t*s),n.update(r,o,1)},this.renderInstances=function(r,l,c){if(0===c)return;let u,h;if(i)u=e,h="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[h](o,l,a,r*s,c),n.update(l,o,c)}}function yr(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function vr(e,t){return e[0]-t[0]}function br(e,t){return Math.abs(t[1])-Math.abs(e[1])}function _r(e,t,n){const r={},i=new Float32Array(8),o=new WeakMap,a=new we,s=[];for(let e=0;e<8;e++)s[e]=[e,0];return{update:function(l,c,u,h){const f=l.morphTargetInfluences;if(!0===t.isWebGL2){const p=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,d=void 0!==p?p.length:0;let m=o.get(c);if(void 0===m||m.count!==d){void 0!==m&&m.texture.dispose();const v=void 0!==c.morphAttributes.position,b=void 0!==c.morphAttributes.normal,_=void 0!==c.morphAttributes.color,x=c.morphAttributes.position||[],A=c.morphAttributes.normal||[],C=c.morphAttributes.color||[];let E=0;!0===v&&(E=1),!0===b&&(E=2),!0===_&&(E=3);let S=c.attributes.position.count*E,T=1;S>t.maxTextureSize&&(T=Math.ceil(S/t.maxTextureSize),S=t.maxTextureSize);const B=new Float32Array(S*T*4*d),k=new Ee(B,S,T,d);k.type=w,k.needsUpdate=!0;const M=4*E;for(let I=0;I<d;I++){const O=x[I],D=A[I],z=C[I],L=S*T*4*I;for(let R=0;R<O.count;R++){const F=R*M;!0===v&&(a.fromBufferAttribute(O,R),B[L+F+0]=a.x,B[L+F+1]=a.y,B[L+F+2]=a.z,B[L+F+3]=0),!0===b&&(a.fromBufferAttribute(D,R),B[L+F+4]=a.x,B[L+F+5]=a.y,B[L+F+6]=a.z,B[L+F+7]=0),!0===_&&(a.fromBufferAttribute(z,R),B[L+F+8]=a.x,B[L+F+9]=a.y,B[L+F+10]=a.z,B[L+F+11]=4===z.itemSize?a.w:1)}}function P(){k.dispose(),o.delete(c),c.removeEventListener("dispose",P)}m={count:d,texture:k,size:new ne(S,T)},o.set(c,m),c.addEventListener("dispose",P)}let g=0;for(let U=0;U<f.length;U++)g+=f[U];const y=c.morphTargetsRelative?1:1-g;h.getUniforms().setValue(e,"morphTargetBaseInfluence",y),h.getUniforms().setValue(e,"morphTargetInfluences",f),h.getUniforms().setValue(e,"morphTargetsTexture",m.texture,n),h.getUniforms().setValue(e,"morphTargetsTextureSize",m.size)}else{const N=void 0===f?0:f.length;let j=r[c.id];if(void 0===j||j.length!==N){j=[];for(let H=0;H<N;H++)j[H]=[H,0];r[c.id]=j}for(let $=0;$<N;$++){const X=j[$];X[0]=$,X[1]=f[$]}j.sort(br);for(let Z=0;Z<8;Z++)Z<N&&j[Z][1]?(s[Z][0]=j[Z][0],s[Z][1]=j[Z][1]):(s[Z][0]=Number.MAX_SAFE_INTEGER,s[Z][1]=0);s.sort(vr);const V=c.morphAttributes.position,G=c.morphAttributes.normal;let q=0;for(let Y=0;Y<8;Y++){const K=s[Y],J=K[0],Q=K[1];J!==Number.MAX_SAFE_INTEGER&&Q?(V&&c.getAttribute("morphTarget"+Y)!==V[J]&&c.setAttribute("morphTarget"+Y,V[J]),G&&c.getAttribute("morphNormal"+Y)!==G[J]&&c.setAttribute("morphNormal"+Y,G[J]),i[Y]=Q,q+=Q):(V&&!0===c.hasAttribute("morphTarget"+Y)&&c.deleteAttribute("morphTarget"+Y),G&&!0===c.hasAttribute("morphNormal"+Y)&&c.deleteAttribute("morphNormal"+Y),i[Y]=0)}const W=c.morphTargetsRelative?1:1-q;h.getUniforms().setValue(e,"morphTargetBaseInfluence",W),h.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function xr(e,t,n,r){let i=new WeakMap;function o(e){const t=e.target;t.removeEventListener("dispose",o),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){const a=r.render.frame,s=e.geometry,l=t.get(e,s);return i.get(l)!==a&&(t.update(l),i.set(l,a)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",o)&&e.addEventListener("dispose",o),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),l},dispose:function(){i=new WeakMap}}}const Ar=new Ae,wr=new Ee,Cr=new Se,Er=new On,Sr=[],Tr=[],Br=new Float32Array(16),kr=new Float32Array(9),Mr=new Float32Array(4);function Pr(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let o=Sr[i];if(void 0===o&&(o=new Float32Array(i),Sr[i]=o),0!==t){r.toArray(o,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(o,i)}return o}function Ir(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Or(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function Dr(e,t){let n=Tr[t];void 0===n&&(n=new Int32Array(t),Tr[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function zr(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Lr(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Ir(n,t))return;e.uniform2fv(this.addr,t),Or(n,t)}}function Rr(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Ir(n,t))return;e.uniform3fv(this.addr,t),Or(n,t)}}function Fr(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Ir(n,t))return;e.uniform4fv(this.addr,t),Or(n,t)}}function Ur(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Ir(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Or(n,t)}else{if(Ir(n,r))return;Mr.set(r),e.uniformMatrix2fv(this.addr,!1,Mr),Or(n,r)}}function Nr(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Ir(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Or(n,t)}else{if(Ir(n,r))return;kr.set(r),e.uniformMatrix3fv(this.addr,!1,kr),Or(n,r)}}function jr(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Ir(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Or(n,t)}else{if(Ir(n,r))return;Br.set(r),e.uniformMatrix4fv(this.addr,!1,Br),Or(n,r)}}function Vr(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Gr(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Ir(n,t))return;e.uniform2iv(this.addr,t),Or(n,t)}}function qr(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Ir(n,t))return;e.uniform3iv(this.addr,t),Or(n,t)}}function Wr(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Ir(n,t))return;e.uniform4iv(this.addr,t),Or(n,t)}}function Hr(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function $r(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Ir(n,t))return;e.uniform2uiv(this.addr,t),Or(n,t)}}function Xr(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Ir(n,t))return;e.uniform3uiv(this.addr,t),Or(n,t)}}function Zr(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Ir(n,t))return;e.uniform4uiv(this.addr,t),Or(n,t)}}function Yr(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(t||Ar,i)}function Kr(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||Cr,i)}function Jr(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||Er,i)}function Qr(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||wr,i)}function ei(e,t){e.uniform1fv(this.addr,t)}function ti(e,t){const n=Pr(t,this.size,2);e.uniform2fv(this.addr,n)}function ni(e,t){const n=Pr(t,this.size,3);e.uniform3fv(this.addr,n)}function ri(e,t){const n=Pr(t,this.size,4);e.uniform4fv(this.addr,n)}function ii(e,t){const n=Pr(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function oi(e,t){const n=Pr(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function ai(e,t){const n=Pr(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function si(e,t){e.uniform1iv(this.addr,t)}function li(e,t){e.uniform2iv(this.addr,t)}function ci(e,t){e.uniform3iv(this.addr,t)}function ui(e,t){e.uniform4iv(this.addr,t)}function hi(e,t){e.uniform1uiv(this.addr,t)}function fi(e,t){e.uniform2uiv(this.addr,t)}function pi(e,t){e.uniform3uiv(this.addr,t)}function di(e,t){e.uniform4uiv(this.addr,t)}function mi(e,t,n){const r=this.cache,i=t.length,o=Dr(n,i);Ir(r,o)||(e.uniform1iv(this.addr,o),Or(r,o));for(let e=0;e!==i;++e)n.setTexture2D(t[e]||Ar,o[e])}function gi(e,t,n){const r=this.cache,i=t.length,o=Dr(n,i);Ir(r,o)||(e.uniform1iv(this.addr,o),Or(r,o));for(let e=0;e!==i;++e)n.setTexture3D(t[e]||Cr,o[e])}function yi(e,t,n){const r=this.cache,i=t.length,o=Dr(n,i);Ir(r,o)||(e.uniform1iv(this.addr,o),Or(r,o));for(let e=0;e!==i;++e)n.setTextureCube(t[e]||Er,o[e])}function vi(e,t,n){const r=this.cache,i=t.length,o=Dr(n,i);Ir(r,o)||(e.uniform1iv(this.addr,o),Or(r,o));for(let e=0;e!==i;++e)n.setTexture2DArray(t[e]||wr,o[e])}class bi{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return zr;case 35664:return Lr;case 35665:return Rr;case 35666:return Fr;case 35674:return Ur;case 35675:return Nr;case 35676:return jr;case 5124:case 35670:return Vr;case 35667:case 35671:return Gr;case 35668:case 35672:return qr;case 35669:case 35673:return Wr;case 5125:return Hr;case 36294:return $r;case 36295:return Xr;case 36296:return Zr;case 35678:case 36198:case 36298:case 36306:case 35682:return Yr;case 35679:case 36299:case 36307:return Kr;case 35680:case 36300:case 36308:case 36293:return Jr;case 36289:case 36303:case 36311:case 36292:return Qr}}(t.type)}}class _i{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return ei;case 35664:return ti;case 35665:return ni;case 35666:return ri;case 35674:return ii;case 35675:return oi;case 35676:return ai;case 5124:case 35670:return si;case 35667:case 35671:return li;case 35668:case 35672:return ci;case 35669:case 35673:return ui;case 5125:return hi;case 36294:return fi;case 36295:return pi;case 36296:return di;case 35678:case 36198:case 36298:case 36306:case 35682:return mi;case 35679:case 36299:case 36307:return gi;case 35680:case 36300:case 36308:case 36293:return yi;case 36289:case 36303:case 36311:case 36292:return vi}}(t.type)}}class xi{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const o=r[i];o.setValue(e,t[o.id],n)}}}const Ai=/(\w+)(\])?(\[|\.)?/g;function wi(e,t){e.seq.push(t),e.map[t.id]=t}function Ci(e,t,n){const r=e.name,i=r.length;for(Ai.lastIndex=0;;){const o=Ai.exec(r),a=Ai.lastIndex;let s=o[1];const l="]"===o[2],c=o[3];if(l&&(s|=0),void 0===c||"["===c&&a+2===i){wi(n,void 0===c?new bi(s,e,t):new _i(s,e,t));break}{let e=n.map[s];void 0===e&&(e=new xi(s),wi(n,e)),n=e}}}class Ei{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);Ci(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let i=0,o=t.length;i!==o;++i){const o=t[i],a=n[o.id];!1!==a.needsUpdate&&o.setValue(e,a.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n}}function Si(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}let Ti=0;function Bi(e,t,n){const r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const r=parseInt(o[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){const n=e.split("\n"),r=[],i=Math.max(t-6,0),o=Math.min(t+6,n.length);for(let e=i;e<o;e++){const i=e+1;r.push(`${i===t?">":" "} ${i}: ${n[e]}`)}return r.join("\n")}(e.getShaderSource(t),r)}return i}function ki(e,t){const n=function(e){switch(e){case R:return["Linear","( value )"];case F:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Mi(e,t){let n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Pi(e){return""!==e}function Ii(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Oi(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const Di=/^[ \t]*#include +<([\w\d./]+)>/gm;function zi(e){return e.replace(Di,Li)}function Li(e,t){const n=Wn[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return zi(n)}const Ri=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Fi(e){return e.replace(Ri,Ui)}function Ui(e,t,n,r){let i="";for(let e=parseInt(t);e<parseInt(n);e++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return i}function Ni(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function ji(e,t,n,r){const i=e.getContext(),o=n.defines;let a=n.vertexShader,s=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case f:case p:t="ENVMAP_TYPE_CUBE";break;case d:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),u=function(e){let t="ENVMAP_MODE_REFLECTION";return e.envMap&&e.envMapMode===p&&(t="ENVMAP_MODE_REFRACTION"),t}(n),h=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(n),m=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),g=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Pi).join("\n")}(n),y=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(o),v=i.createProgram();let b,_,x=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(b=[y].filter(Pi).join("\n"),b.length>0&&(b+="\n"),_=[g,y].filter(Pi).join("\n"),_.length>0&&(_+="\n")):(b=[Ni(n),"#define SHADER_NAME "+n.shaderName,y,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Pi).join("\n"),_=[g,Ni(n),"#define SHADER_NAME "+n.shaderName,y,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?Wn.tonemapping_pars_fragment:"",0!==n.toneMapping?Mi("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Wn.encodings_pars_fragment,ki("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Pi).join("\n")),a=zi(a),a=Ii(a,n),a=Oi(a,n),s=zi(s),s=Ii(s,n),s=Oi(s,n),a=Fi(a),s=Fi(s),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(x="#version 300 es\n",b=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+b,_=["#define varying in",n.glslVersion===G?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===G?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+_);const A=x+_+s,w=Si(i,35633,x+b+a),C=Si(i,35632,A);if(i.attachShader(v,w),i.attachShader(v,C),void 0!==n.index0AttributeName?i.bindAttribLocation(v,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(v,0,"position"),i.linkProgram(v),e.debug.checkShaderErrors){const e=i.getProgramInfoLog(v).trim(),t=i.getShaderInfoLog(w).trim(),n=i.getShaderInfoLog(C).trim();let r=!0,o=!0;if(!1===i.getProgramParameter(v,35714)){r=!1;const t=Bi(i,w,"vertex"),n=Bi(i,C,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(v,35715)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+n)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):""!==t&&""!==n||(o=!1);o&&(this.diagnostics={runnable:r,programLog:e,vertexShader:{log:t,prefix:b},fragmentShader:{log:n,prefix:_}})}let E,S;return i.deleteShader(w),i.deleteShader(C),this.getUniforms=function(){return void 0===E&&(E=new Ei(i,v)),E},this.getAttributes=function(){return void 0===S&&(S=function(e,t){const n={},r=e.getProgramParameter(t,35721);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i),o=r.name;let a=1;35674===r.type&&(a=2),35675===r.type&&(a=3),35676===r.type&&(a=4),n[o]={type:r.type,location:e.getAttribLocation(t,o),locationSize:a}}return n}(i,v)),S},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(v),this.program=void 0},this.name=n.shaderName,this.id=Ti++,this.cacheKey=t,this.usedTimes=1,this.program=v,this.vertexShader=w,this.fragmentShader=C,this}let Vi=0;class Gi{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(i)&&(o.add(i),i.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const e of t)e.usedTimes--,0===e.usedTimes&&this.shaderCache.delete(e.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new qi(e),t.set(e,n)),n}}class qi{constructor(e){this.id=Vi++,this.code=e,this.usedTimes=0}}function Wi(e,t,n,r,s,l,c){const u=new mt,h=new Gi,f=[],p=s.isWebGL2,m=s.logarithmicDepthBuffer,g=s.vertexTextures;let y=s.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(l,u,f,b,_){const x=b.fog,A=_.geometry,w=l.isMeshStandardMaterial?b.environment:null,C=(l.isMeshStandardMaterial?n:t).get(l.envMap||w),E=C&&C.mapping===d?C.image.height:null,S=v[l.type];null!==l.precision&&(y=s.getMaxPrecision(l.precision),y!==l.precision&&console.warn("THREE.WebGLProgram.getParameters:",l.precision,"not supported, using",y,"instead."));const T=A.morphAttributes.position||A.morphAttributes.normal||A.morphAttributes.color,B=void 0!==T?T.length:0;let k,M,P,I,O=0;if(void 0!==A.morphAttributes.position&&(O=1),void 0!==A.morphAttributes.normal&&(O=2),void 0!==A.morphAttributes.color&&(O=3),S){const e=$n[S];k=e.vertexShader,M=e.fragmentShader}else k=l.vertexShader,M=l.fragmentShader,h.update(l),P=h.getVertexShaderID(l),I=h.getFragmentShaderID(l);const D=e.getRenderTarget(),z=l.alphaTest>0,L=l.clearcoat>0,U=l.iridescence>0;return{isWebGL2:p,shaderID:S,shaderName:l.type,vertexShader:k,fragmentShader:M,defines:l.defines,customVertexShaderID:P,customFragmentShaderID:I,isRawShaderMaterial:!0===l.isRawShaderMaterial,glslVersion:l.glslVersion,precision:y,instancing:!0===_.isInstancedMesh,instancingColor:!0===_.isInstancedMesh&&null!==_.instanceColor,supportsVertexTextures:g,outputEncoding:null===D?e.outputEncoding:!0===D.isXRRenderTarget?D.texture.encoding:R,map:!!l.map,matcap:!!l.matcap,envMap:!!C,envMapMode:C&&C.mapping,envMapCubeUVHeight:E,lightMap:!!l.lightMap,aoMap:!!l.aoMap,emissiveMap:!!l.emissiveMap,bumpMap:!!l.bumpMap,normalMap:!!l.normalMap,objectSpaceNormalMap:1===l.normalMapType,tangentSpaceNormalMap:0===l.normalMapType,decodeVideoTexture:!!l.map&&!0===l.map.isVideoTexture&&l.map.encoding===F,clearcoat:L,clearcoatMap:L&&!!l.clearcoatMap,clearcoatRoughnessMap:L&&!!l.clearcoatRoughnessMap,clearcoatNormalMap:L&&!!l.clearcoatNormalMap,iridescence:U,iridescenceMap:U&&!!l.iridescenceMap,iridescenceThicknessMap:U&&!!l.iridescenceThicknessMap,displacementMap:!!l.displacementMap,roughnessMap:!!l.roughnessMap,metalnessMap:!!l.metalnessMap,specularMap:!!l.specularMap,specularIntensityMap:!!l.specularIntensityMap,specularColorMap:!!l.specularColorMap,opaque:!1===l.transparent&&l.blending===a,alphaMap:!!l.alphaMap,alphaTest:z,gradientMap:!!l.gradientMap,sheen:l.sheen>0,sheenColorMap:!!l.sheenColorMap,sheenRoughnessMap:!!l.sheenRoughnessMap,transmission:l.transmission>0,transmissionMap:!!l.transmissionMap,thicknessMap:!!l.thicknessMap,combine:l.combine,vertexTangents:!!l.normalMap&&!!A.attributes.tangent,vertexColors:l.vertexColors,vertexAlphas:!0===l.vertexColors&&!!A.attributes.color&&4===A.attributes.color.itemSize,vertexUvs:!!(l.map||l.bumpMap||l.normalMap||l.specularMap||l.alphaMap||l.emissiveMap||l.roughnessMap||l.metalnessMap||l.clearcoatMap||l.clearcoatRoughnessMap||l.clearcoatNormalMap||l.iridescenceMap||l.iridescenceThicknessMap||l.displacementMap||l.transmissionMap||l.thicknessMap||l.specularIntensityMap||l.specularColorMap||l.sheenColorMap||l.sheenRoughnessMap),uvsVertexOnly:!(l.map||l.bumpMap||l.normalMap||l.specularMap||l.alphaMap||l.emissiveMap||l.roughnessMap||l.metalnessMap||l.clearcoatNormalMap||l.iridescenceMap||l.iridescenceThicknessMap||l.transmission>0||l.transmissionMap||l.thicknessMap||l.specularIntensityMap||l.specularColorMap||l.sheen>0||l.sheenColorMap||l.sheenRoughnessMap||!l.displacementMap),fog:!!x,useFog:!0===l.fog,fogExp2:x&&x.isFogExp2,flatShading:!!l.flatShading,sizeAttenuation:l.sizeAttenuation,logarithmicDepthBuffer:m,skinning:!0===_.isSkinnedMesh,morphTargets:void 0!==A.morphAttributes.position,morphNormals:void 0!==A.morphAttributes.normal,morphColors:void 0!==A.morphAttributes.color,morphTargetsCount:B,morphTextureStride:O,numDirLights:u.directional.length,numPointLights:u.point.length,numSpotLights:u.spot.length,numSpotLightMaps:u.spotLightMap.length,numRectAreaLights:u.rectArea.length,numHemiLights:u.hemi.length,numDirLightShadows:u.directionalShadowMap.length,numPointLightShadows:u.pointShadowMap.length,numSpotLightShadows:u.spotShadowMap.length,numSpotLightShadowsWithMaps:u.numSpotLightShadowsWithMaps,numClippingPlanes:c.numPlanes,numClipIntersection:c.numIntersection,dithering:l.dithering,shadowMapEnabled:e.shadowMap.enabled&&f.length>0,shadowMapType:e.shadowMap.type,toneMapping:l.toneMapped?e.toneMapping:0,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:l.premultipliedAlpha,doubleSided:l.side===o,flipSided:l.side===i,useDepthPacking:!!l.depthPacking,depthPacking:l.depthPacking||0,index0AttributeName:l.index0AttributeName,extensionDerivatives:l.extensions&&l.extensions.derivatives,extensionFragDepth:l.extensions&&l.extensions.fragDepth,extensionDrawBuffers:l.extensions&&l.extensions.drawBuffers,extensionShaderTextureLOD:l.extensions&&l.extensions.shaderTextureLOD,rendererExtensionFragDepth:p||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:p||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:p||r.has("EXT_shader_texture_lod"),customProgramCacheKey:l.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(function(e,t){e.push(t.precision),e.push(t.outputEncoding),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.combine),e.push(t.vertexUvs),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){u.disableAll(),t.isWebGL2&&u.enable(0),t.supportsVertexTextures&&u.enable(1),t.instancing&&u.enable(2),t.instancingColor&&u.enable(3),t.map&&u.enable(4),t.matcap&&u.enable(5),t.envMap&&u.enable(6),t.lightMap&&u.enable(7),t.aoMap&&u.enable(8),t.emissiveMap&&u.enable(9),t.bumpMap&&u.enable(10),t.normalMap&&u.enable(11),t.objectSpaceNormalMap&&u.enable(12),t.tangentSpaceNormalMap&&u.enable(13),t.clearcoat&&u.enable(14),t.clearcoatMap&&u.enable(15),t.clearcoatRoughnessMap&&u.enable(16),t.clearcoatNormalMap&&u.enable(17),t.iridescence&&u.enable(18),t.iridescenceMap&&u.enable(19),t.iridescenceThicknessMap&&u.enable(20),t.displacementMap&&u.enable(21),t.specularMap&&u.enable(22),t.roughnessMap&&u.enable(23),t.metalnessMap&&u.enable(24),t.gradientMap&&u.enable(25),t.alphaMap&&u.enable(26),t.alphaTest&&u.enable(27),t.vertexColors&&u.enable(28),t.vertexAlphas&&u.enable(29),t.vertexUvs&&u.enable(30),t.vertexTangents&&u.enable(31),t.uvsVertexOnly&&u.enable(32),e.push(u.mask),u.disableAll(),t.fog&&u.enable(0),t.useFog&&u.enable(1),t.flatShading&&u.enable(2),t.logarithmicDepthBuffer&&u.enable(3),t.skinning&&u.enable(4),t.morphTargets&&u.enable(5),t.morphNormals&&u.enable(6),t.morphColors&&u.enable(7),t.premultipliedAlpha&&u.enable(8),t.shadowMapEnabled&&u.enable(9),t.physicallyCorrectLights&&u.enable(10),t.doubleSided&&u.enable(11),t.flipSided&&u.enable(12),t.useDepthPacking&&u.enable(13),t.dithering&&u.enable(14),t.specularIntensityMap&&u.enable(15),t.specularColorMap&&u.enable(16),t.transmission&&u.enable(17),t.transmissionMap&&u.enable(18),t.thicknessMap&&u.enable(19),t.sheen&&u.enable(20),t.sheenColorMap&&u.enable(21),t.sheenRoughnessMap&&u.enable(22),t.decodeVideoTexture&&u.enable(23),t.opaque&&u.enable(24),e.push(u.mask)}(n,t),n.push(e.outputEncoding)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=v[e.type];let n;if(t){const e=$n[t];n=Tn.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,t=f.length;e<t;e++){const t=f[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new ji(e,n,t,l),f.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){const t=f.indexOf(e);f[t]=f[f.length-1],f.pop(),e.destroy()}},releaseShaderCache:function(e){h.remove(e)},programs:f,dispose:function(){h.dispose()}}}function Hi(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function $i(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Xi(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Zi(){const e=[];let t=0;const n=[],r=[],i=[];function o(n,r,i,o,a,s){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:o,renderOrder:n.renderOrder,z:a,group:s},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=o,l.renderOrder=n.renderOrder,l.z=a,l.group=s),t++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,a,s,l,c){const u=o(e,t,a,s,l,c);a.transmission>0?r.push(u):!0===a.transparent?i.push(u):n.push(u)},unshift:function(e,t,a,s,l,c){const u=o(e,t,a,s,l,c);a.transmission>0?r.unshift(u):!0===a.transparent?i.unshift(u):n.unshift(u)},finish:function(){for(let n=t,r=e.length;n<r;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||$i),r.length>1&&r.sort(t||Xi),i.length>1&&i.sort(t||Xi)}}}function Yi(){let e=new WeakMap;return{get:function(t,n){const r=e.get(t);let i;return void 0===r?(i=new Zi,e.set(t,[i])):n>=r.length?(i=new Zi,r.push(i)):i=r[n],i},dispose:function(){e=new WeakMap}}}function Ki(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new Be,color:new ge};break;case"SpotLight":n={position:new Be,direction:new Be,color:new ge,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Be,color:new ge,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Be,skyColor:new ge,groundColor:new ge};break;case"RectAreaLight":n={color:new ge,position:new Be,halfWidth:new Be,halfHeight:new Be}}return e[t.id]=n,n}}}let Ji=0;function Qi(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function eo(e,t){const n=new Ki,r=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ne};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ne,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let e=0;e<9;e++)i.probe.push(new Be);const o=new Be,a=new it,s=new it;return{setup:function(o,a){let s=0,l=0,c=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let u=0,h=0,f=0,p=0,d=0,m=0,g=0,y=0,v=0,b=0;o.sort(Qi);const _=!0!==a?Math.PI:1;for(let e=0,t=o.length;e<t;e++){const t=o[e],a=t.color,x=t.intensity,A=t.distance,w=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)s+=a.r*x*_,l+=a.g*x*_,c+=a.b*x*_;else if(t.isLightProbe)for(let e=0;e<9;e++)i.probe[e].addScaledVector(t.sh.coefficients[e],x);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*_),t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.directionalShadow[u]=n,i.directionalShadowMap[u]=w,i.directionalShadowMatrix[u]=t.shadow.matrix,m++}i.directional[u]=e,u++}else if(t.isSpotLight){const e=n.get(t);e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(a).multiplyScalar(x*_),e.distance=A,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,i.spot[f]=e;const o=t.shadow;if(t.map&&(i.spotLightMap[v]=t.map,v++,o.updateMatrices(t),t.castShadow&&b++),i.spotLightMatrix[f]=o.matrix,t.castShadow){const e=r.get(t);e.shadowBias=o.bias,e.shadowNormalBias=o.normalBias,e.shadowRadius=o.radius,e.shadowMapSize=o.mapSize,i.spotShadow[f]=e,i.spotShadowMap[f]=w,y++}f++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(a).multiplyScalar(x),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),i.rectArea[p]=e,p++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*_),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,i.pointShadow[h]=n,i.pointShadowMap[h]=w,i.pointShadowMatrix[h]=t.shadow.matrix,g++}i.point[h]=e,h++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(x*_),e.groundColor.copy(t.groundColor).multiplyScalar(x*_),i.hemi[d]=e,d++}}p>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=Hn.LTC_FLOAT_1,i.rectAreaLTC2=Hn.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=Hn.LTC_HALF_1,i.rectAreaLTC2=Hn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=s,i.ambient[1]=l,i.ambient[2]=c;const x=i.hash;x.directionalLength===u&&x.pointLength===h&&x.spotLength===f&&x.rectAreaLength===p&&x.hemiLength===d&&x.numDirectionalShadows===m&&x.numPointShadows===g&&x.numSpotShadows===y&&x.numSpotMaps===v||(i.directional.length=u,i.spot.length=f,i.rectArea.length=p,i.point.length=h,i.hemi.length=d,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=y,i.spotShadowMap.length=y,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotLightMatrix.length=y+v-b,i.spotLightMap.length=v,i.numSpotLightShadowsWithMaps=b,x.directionalLength=u,x.pointLength=h,x.spotLength=f,x.rectAreaLength=p,x.hemiLength=d,x.numDirectionalShadows=m,x.numPointShadows=g,x.numSpotShadows=y,x.numSpotMaps=v,i.version=Ji++)},setupView:function(e,t){let n=0,r=0,l=0,c=0,u=0;const h=t.matrixWorldInverse;for(let t=0,f=e.length;t<f;t++){const f=e[t];if(f.isDirectionalLight){const e=i.directional[n];e.direction.setFromMatrixPosition(f.matrixWorld),o.setFromMatrixPosition(f.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(h),n++}else if(f.isSpotLight){const e=i.spot[l];e.position.setFromMatrixPosition(f.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(f.matrixWorld),o.setFromMatrixPosition(f.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(h),l++}else if(f.isRectAreaLight){const e=i.rectArea[c];e.position.setFromMatrixPosition(f.matrixWorld),e.position.applyMatrix4(h),s.identity(),a.copy(f.matrixWorld),a.premultiply(h),s.extractRotation(a),e.halfWidth.set(.5*f.width,0,0),e.halfHeight.set(0,.5*f.height,0),e.halfWidth.applyMatrix4(s),e.halfHeight.applyMatrix4(s),c++}else if(f.isPointLight){const e=i.point[r];e.position.setFromMatrixPosition(f.matrixWorld),e.position.applyMatrix4(h),r++}else if(f.isHemisphereLight){const e=i.hemi[u];e.direction.setFromMatrixPosition(f.matrixWorld),e.direction.transformDirection(h),u++}}},state:i}}function to(e,t){const n=new eo(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function no(e,t){let n=new WeakMap;return{get:function(r,i=0){const o=n.get(r);let a;return void 0===o?(a=new to(e,t),n.set(r,[a])):i>=o.length?(a=new to(e,t),o.push(a)):a=o[i],a},dispose:function(){n=new WeakMap}}}class ro extends Vt{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class io extends Vt{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Be,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function oo(e,t,n){let a=new jn;const s=new ne,l=new ne,c=new we,u=new ro({depthPacking:U}),h=new io,f={},p=n.maxTextureSize,d={0:i,1:r,2:o},m=new Bn({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ne},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),g=m.clone();g.defines.HORIZONTAL_PASS=1;const y=new rn;y.setAttribute("position",new Ht(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const b=new An(y,m),_=this;function x(n,r){const i=t.update(b);m.defines.VSM_SAMPLES!==n.blurSamples&&(m.defines.VSM_SAMPLES=n.blurSamples,g.defines.VSM_SAMPLES=n.blurSamples,m.needsUpdate=!0,g.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new Ce(s.x,s.y)),m.uniforms.shadow_pass.value=n.map.texture,m.uniforms.resolution.value=n.mapSize,m.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,m,b,null),g.uniforms.shadow_pass.value=n.mapPass.texture,g.uniforms.resolution.value=n.mapSize,g.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,g,b,null)}function A(t,n,r,i,o,a){let s=null;const l=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(s=void 0!==l?l:!0===r.isPointLight?h:u,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0){const e=s.uuid,t=n.uuid;let r=f[e];void 0===r&&(r={},f[e]=r);let i=r[t];void 0===i&&(i=s.clone(),r[t]=i),s=i}return s.visible=n.visible,s.wireframe=n.wireframe,s.side=3===a?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:d[n.side],s.alphaMap=n.alphaMap,s.alphaTest=n.alphaTest,s.clipShadows=n.clipShadows,s.clippingPlanes=n.clippingPlanes,s.clipIntersection=n.clipIntersection,s.displacementMap=n.displacementMap,s.displacementScale=n.displacementScale,s.displacementBias=n.displacementBias,s.wireframeLinewidth=n.wireframeLinewidth,s.linewidth=n.linewidth,!0===r.isPointLight&&!0===s.isMeshDistanceMaterial&&(s.referencePosition.setFromMatrixPosition(r.matrixWorld),s.nearDistance=i,s.farDistance=o),s}function w(n,r,i,o,s){if(!1===n.visible)return;if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===s)&&(!n.frustumCulled||a.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,n.matrixWorld);const r=t.update(n),a=n.material;if(Array.isArray(a)){const t=r.groups;for(let l=0,c=t.length;l<c;l++){const c=t[l],u=a[c.materialIndex];if(u&&u.visible){const t=A(n,u,o,i.near,i.far,s);e.renderBufferDirect(i,null,r,t,n,c)}}}else if(a.visible){const t=A(n,a,o,i.near,i.far,s);e.renderBufferDirect(i,null,r,t,n,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)w(l[e],r,i,o,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,n,r){if(!1===_.enabled)return;if(!1===_.autoUpdate&&!1===_.needsUpdate)return;if(0===t.length)return;const i=e.getRenderTarget(),o=e.getActiveCubeFace(),u=e.getActiveMipmapLevel(),h=e.state;h.setBlending(0),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);for(let i=0,o=t.length;i<o;i++){const o=t[i],u=o.shadow;if(void 0===u){console.warn("THREE.WebGLShadowMap:",o,"has no shadow.");continue}if(!1===u.autoUpdate&&!1===u.needsUpdate)continue;s.copy(u.mapSize);const f=u.getFrameExtents();if(s.multiply(f),l.copy(u.mapSize),(s.x>p||s.y>p)&&(s.x>p&&(l.x=Math.floor(p/f.x),s.x=l.x*f.x,u.mapSize.x=l.x),s.y>p&&(l.y=Math.floor(p/f.y),s.y=l.y*f.y,u.mapSize.y=l.y)),null===u.map){const e=3!==this.type?{minFilter:v,magFilter:v}:{};u.map=new Ce(s.x,s.y,e),u.map.texture.name=o.name+".shadowMap",u.camera.updateProjectionMatrix()}e.setRenderTarget(u.map),e.clear();const d=u.getViewportCount();for(let e=0;e<d;e++){const t=u.getViewport(e);c.set(l.x*t.x,l.y*t.y,l.x*t.z,l.y*t.w),h.viewport(c),u.updateMatrices(o,e),a=u.getFrustum(),w(n,r,u.camera,o,this.type)}!0!==u.isPointLightShadow&&3===this.type&&x(u,r),u.needsUpdate=!1}_.needsUpdate=!1,e.setRenderTarget(i,o,u)}}function ao(e,t,n){const r=n.isWebGL2,f=new function(){let t=!1;const n=new we;let r=null;const i=new we(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},p=new function(){let t=!1,n=null,r=null,i=null;return{setTest:function(e){e?X(2929):Z(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){switch(t){case 0:e.depthFunc(512);break;case 1:e.depthFunc(519);break;case 2:e.depthFunc(513);break;case 3:default:e.depthFunc(515);break;case 4:e.depthFunc(514);break;case 5:e.depthFunc(518);break;case 6:e.depthFunc(516);break;case 7:e.depthFunc(517)}r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},d=new function(){let t=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,c=null;return{setTest:function(e){t||(e?X(2960):Z(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){a===t&&s===n&&l===r||(e.stencilOp(t,n,r),a=t,s=n,l=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,c=null}}},m=new WeakMap,g=new WeakMap;let y={},v={},b=new WeakMap,_=[],x=null,A=!1,w=null,C=null,E=null,S=null,T=null,B=null,k=null,M=!1,P=null,I=null,O=null,D=null,z=null;const L=e.getParameter(35661);let R=!1,F=0;const U=e.getParameter(7938);-1!==U.indexOf("WebGL")?(F=parseFloat(/^WebGL (\d)/.exec(U)[1]),R=F>=1):-1!==U.indexOf("OpenGL ES")&&(F=parseFloat(/^OpenGL ES (\d)/.exec(U)[1]),R=F>=2);let N=null,j={};const V=e.getParameter(3088),G=e.getParameter(2978),q=(new we).fromArray(V),W=(new we).fromArray(G);function H(t,n,r){const i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let t=0;t<r;t++)e.texImage2D(n+t,0,6408,1,1,0,6408,5121,i);return o}const $={};function X(t){!0!==y[t]&&(e.enable(t),y[t]=!0)}function Z(t){!1!==y[t]&&(e.disable(t),y[t]=!1)}$[3553]=H(3553,3553,1),$[34067]=H(34067,34069,6),f.setClear(0,0,0,1),p.setClear(1),d.setClear(0),X(2929),p.setFunc(3),Q(!1),ee(1),X(2884),J(0);const Y={[c]:32774,101:32778,102:32779};if(r)Y[103]=32775,Y[104]=32776;else{const e=t.get("EXT_blend_minmax");null!==e&&(Y[103]=e.MIN_EXT,Y[104]=e.MAX_EXT)}const K={200:0,[u]:1,202:768,204:770,210:776,208:774,206:772,203:769,[h]:771,209:775,207:773};function J(t,n,r,i,o,u,h,f){if(0!==t){if(!1===A&&(X(3042),A=!0),t===l)o=o||n,u=u||r,h=h||i,n===C&&o===T||(e.blendEquationSeparate(Y[n],Y[o]),C=n,T=o),r===E&&i===S&&u===B&&h===k||(e.blendFuncSeparate(K[r],K[i],K[u],K[h]),E=r,S=i,B=u,k=h),w=t,M=null;else if(t!==w||f!==M){if(C===c&&T===c||(e.blendEquation(32774),C=c,T=c),f)switch(t){case a:e.blendFuncSeparate(1,771,1,771);break;case s:e.blendFunc(1,1);break;case 3:e.blendFuncSeparate(0,769,0,1);break;case 4:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case a:e.blendFuncSeparate(770,771,1,771);break;case s:e.blendFunc(770,1);break;case 3:e.blendFuncSeparate(0,769,0,1);break;case 4:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}E=null,S=null,B=null,k=null,w=t,M=f}}else!0===A&&(Z(3042),A=!1)}function Q(t){P!==t&&(t?e.frontFace(2304):e.frontFace(2305),P=t)}function ee(t){0!==t?(X(2884),t!==I&&(1===t?e.cullFace(1029):2===t?e.cullFace(1028):e.cullFace(1032))):Z(2884),I=t}function te(t,n,r){t?(X(32823),D===n&&z===r||(e.polygonOffset(n,r),D=n,z=r)):Z(32823)}return{buffers:{color:f,depth:p,stencil:d},enable:X,disable:Z,bindFramebuffer:function(t,n){return v[t]!==n&&(e.bindFramebuffer(t,n),v[t]=n,r&&(36009===t&&(v[36160]=n),36160===t&&(v[36009]=n)),!0)},drawBuffers:function(r,i){let o=_,a=!1;if(r)if(o=b.get(i),void 0===o&&(o=[],b.set(i,o)),r.isWebGLMultipleRenderTargets){const e=r.texture;if(o.length!==e.length||36064!==o[0]){for(let t=0,n=e.length;t<n;t++)o[t]=36064+t;o.length=e.length,a=!0}}else 36064!==o[0]&&(o[0]=36064,a=!0);else 1029!==o[0]&&(o[0]=1029,a=!0);a&&(n.isWebGL2?e.drawBuffers(o):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(o))},useProgram:function(t){return x!==t&&(e.useProgram(t),x=t,!0)},setBlending:J,setMaterial:function(e,t){e.side===o?Z(2884):X(2884);let n=e.side===i;t&&(n=!n),Q(n),e.blending===a&&!1===e.transparent?J(0):J(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),p.setFunc(e.depthFunc),p.setTest(e.depthTest),p.setMask(e.depthWrite),f.setMask(e.colorWrite);const r=e.stencilWrite;d.setTest(r),r&&(d.setMask(e.stencilWriteMask),d.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),d.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),te(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?X(32926):Z(32926)},setFlipSided:Q,setCullFace:ee,setLineWidth:function(t){t!==O&&(R&&e.lineWidth(t),O=t)},setPolygonOffset:te,setScissorTest:function(e){e?X(3089):Z(3089)},activeTexture:function(t){void 0===t&&(t=33984+L-1),N!==t&&(e.activeTexture(t),N=t)},bindTexture:function(t,n,r){void 0===r&&(r=null===N?33984+L-1:N);let i=j[r];void 0===i&&(i={type:void 0,texture:void 0},j[r]=i),i.type===t&&i.texture===n||(N!==r&&(e.activeTexture(r),N=r),e.bindTexture(t,n||$[t]),i.type=t,i.texture=n)},unbindTexture:function(){const t=j[N];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},updateUBOMapping:function(t,n){let r=g.get(n);void 0===r&&(r=new WeakMap,g.set(n,r));let i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function(t,n){const r=g.get(n).get(t);m.get(t)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),m.set(t,r))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===q.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),q.copy(t))},viewport:function(t){!1===W.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),W.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===r&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),y={},N=null,j={},v={},b=new WeakMap,_=[],x=null,A=!1,w=null,C=null,E=null,S=null,T=null,B=null,k=null,M=!1,P=null,I=null,O=null,D=null,z=null,q.set(0,0,e.canvas.width,e.canvas.height),W.set(0,0,e.canvas.width,e.canvas.height),f.reset(),p.reset(),d.reset()}}}function so(e,t,n,r,i,o,a){const s=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,u=i.maxTextureSize,h=i.maxSamples,f=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,p=/OculusBrowser/g.test("undefined"==typeof navigator?"":navigator.userAgent),d=new WeakMap;let T;const M=new WeakMap;let P=!1;try{P="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function I(e,t){return P?new OffscreenCanvas(e,t):oe("canvas")}function O(e,t,n,r){let i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const r=t?Q:Math.floor,o=r(i*e.width),a=r(i*e.height);void 0===T&&(T=I(o,a));const s=n?I(o,a):T;return s.width=o,s.height=a,s.getContext("2d").drawImage(e,0,0,o,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+a+")."),s}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function D(e){return J(e.width)&&J(e.height)}function z(e,t){return e.generateMipmaps&&t&&e.minFilter!==v&&e.minFilter!==b}function L(t){e.generateMipmap(t)}function U(n,r,i,o,a=!1){if(!1===s)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=r;return 6403===r&&(5126===i&&(l=33326),5131===i&&(l=33325),5121===i&&(l=33321)),33319===r&&(5126===i&&(l=33328),5131===i&&(l=33327),5121===i&&(l=33323)),6408===r&&(5126===i&&(l=34836),5131===i&&(l=34842),5121===i&&(l=o===F&&!1===a?35907:32856),32819===i&&(l=32854),32820===i&&(l=32855)),33325!==l&&33326!==l&&33327!==l&&33328!==l&&34842!==l&&34836!==l||t.get("EXT_color_buffer_float"),l}function N(e,t,n){return!0===z(e,n)||e.isFramebufferTexture&&e.minFilter!==v&&e.minFilter!==b?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function j(e){return e===v||1004===e||1005===e?9728:9729}function V(e){const t=e.target;t.removeEventListener("dispose",V),function(e){const t=r.get(e);if(void 0===t.__webglInit)return;const n=e.source,i=M.get(n);if(i){const r=i[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&W(e),0===Object.keys(i).length&&M.delete(n)}r.remove(e)}(t),t.isVideoTexture&&d.delete(t)}function G(t){const n=t.target;n.removeEventListener("dispose",G),function(t){const n=t.texture,i=r.get(t),o=r.get(n);if(void 0!==o.__webglTexture&&(e.deleteTexture(o.__webglTexture),a.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(i.__webglFramebuffer[t]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[t]);else{if(e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let t=0;t<i.__webglColorRenderbuffer.length;t++)i.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(i.__webglColorRenderbuffer[t]);i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);i.__webglTexture&&(e.deleteTexture(i.__webglTexture),a.memory.textures--),r.remove(n[t])}r.remove(n),r.remove(t)}(n)}function W(t){const n=r.get(t);e.deleteTexture(n.__webglTexture);const i=t.source;delete M.get(i)[n.__cacheKey],a.memory.textures--}let H=0;function $(e,t){const i=r.get(e);if(e.isVideoTexture&&function(e){const t=a.render.frame;d.get(e)!==t&&(d.set(e,t),e.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&i.__version!==e.version){const n=e.image;if(null===n)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==n.complete)return void ee(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(3553,i.__webglTexture,33984+t)}const X={[m]:10497,[g]:33071,[y]:33648},Z={[v]:9728,1004:9984,1005:9986,[b]:9729,1007:9985,[_]:9987};function Y(n,o,a){if(a?(e.texParameteri(n,10242,X[o.wrapS]),e.texParameteri(n,10243,X[o.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,X[o.wrapR]),e.texParameteri(n,10240,Z[o.magFilter]),e.texParameteri(n,10241,Z[o.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),o.wrapS===g&&o.wrapT===g||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,j(o.magFilter)),e.texParameteri(n,10241,j(o.minFilter)),o.minFilter!==v&&o.minFilter!==b&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const a=t.get("EXT_texture_filter_anisotropic");if(o.type===w&&!1===t.has("OES_texture_float_linear"))return;if(!1===s&&o.type===C&&!1===t.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(e.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function K(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",V));const i=n.source;let o=M.get(i);void 0===o&&(o={},M.set(i,o));const s=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.encoding),t.join()}(n);if(s!==t.__cacheKey){void 0===o[s]&&(o[s]={texture:e.createTexture(),usedTimes:0},a.memory.textures++,r=!0),o[s].usedTimes++;const i=o[t.__cacheKey];void 0!==i&&(o[t.__cacheKey].usedTimes--,0===i.usedTimes&&W(n)),t.__cacheKey=s,t.__webglTexture=o[s].texture}return r}function ee(t,i,a){let l=3553;(i.isDataArrayTexture||i.isCompressedArrayTexture)&&(l=35866),i.isData3DTexture&&(l=32879);const c=K(t,i),h=i.source;n.bindTexture(l,t.__webglTexture,33984+a);const f=r.get(h);if(h.version!==f.__version||!0===c){n.activeTexture(33984+a),e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment),e.pixelStorei(37443,0);const t=function(e){return!s&&(e.wrapS!==g||e.wrapT!==g||e.minFilter!==v&&e.minFilter!==b)}(i)&&!1===D(i.image);let r=O(i.image,t,!1,u);r=se(i,r);const p=D(r)||s,d=o.convert(i.format,i.encoding);let m,y=o.convert(i.type),_=U(i.internalFormat,d,y,i.encoding,i.isVideoTexture);Y(l,i,p);const x=i.mipmaps,C=s&&!0!==i.isVideoTexture,T=void 0===f.__version||!0===c,M=N(i,r,p);if(i.isDepthTexture)_=6402,s?_=i.type===w?36012:i.type===A?33190:i.type===E?35056:33189:i.type===w&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===B&&6402===_&&1012!==i.type&&i.type!==A&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=A,y=o.convert(i.type)),i.format===k&&6402===_&&(_=34041,i.type!==E&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=E,y=o.convert(i.type))),T&&(C?n.texStorage2D(3553,1,_,r.width,r.height):n.texImage2D(3553,0,_,r.width,r.height,0,d,y,null));else if(i.isDataTexture)if(x.length>0&&p){C&&T&&n.texStorage2D(3553,M,_,x[0].width,x[0].height);for(let e=0,t=x.length;e<t;e++)m=x[e],C?n.texSubImage2D(3553,e,0,0,m.width,m.height,d,y,m.data):n.texImage2D(3553,e,_,m.width,m.height,0,d,y,m.data);i.generateMipmaps=!1}else C?(T&&n.texStorage2D(3553,M,_,r.width,r.height),n.texSubImage2D(3553,0,0,0,r.width,r.height,d,y,r.data)):n.texImage2D(3553,0,_,r.width,r.height,0,d,y,r.data);else if(i.isCompressedTexture)if(i.isCompressedArrayTexture){C&&T&&n.texStorage3D(35866,M,_,x[0].width,x[0].height,r.depth);for(let e=0,t=x.length;e<t;e++)m=x[e],i.format!==S?null!==d?C?n.compressedTexSubImage3D(35866,e,0,0,0,m.width,m.height,r.depth,d,m.data,0,0):n.compressedTexImage3D(35866,e,_,m.width,m.height,r.depth,0,m.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):C?n.texSubImage3D(35866,e,0,0,0,m.width,m.height,r.depth,d,y,m.data):n.texImage3D(35866,e,_,m.width,m.height,r.depth,0,d,y,m.data)}else{C&&T&&n.texStorage2D(3553,M,_,x[0].width,x[0].height);for(let e=0,t=x.length;e<t;e++)m=x[e],i.format!==S?null!==d?C?n.compressedTexSubImage2D(3553,e,0,0,m.width,m.height,d,m.data):n.compressedTexImage2D(3553,e,_,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):C?n.texSubImage2D(3553,e,0,0,m.width,m.height,d,y,m.data):n.texImage2D(3553,e,_,m.width,m.height,0,d,y,m.data)}else if(i.isDataArrayTexture)C?(T&&n.texStorage3D(35866,M,_,r.width,r.height,r.depth),n.texSubImage3D(35866,0,0,0,0,r.width,r.height,r.depth,d,y,r.data)):n.texImage3D(35866,0,_,r.width,r.height,r.depth,0,d,y,r.data);else if(i.isData3DTexture)C?(T&&n.texStorage3D(32879,M,_,r.width,r.height,r.depth),n.texSubImage3D(32879,0,0,0,0,r.width,r.height,r.depth,d,y,r.data)):n.texImage3D(32879,0,_,r.width,r.height,r.depth,0,d,y,r.data);else if(i.isFramebufferTexture){if(T)if(C)n.texStorage2D(3553,M,_,r.width,r.height);else{let e=r.width,t=r.height;for(let r=0;r<M;r++)n.texImage2D(3553,r,_,e,t,0,d,y,null),e>>=1,t>>=1}}else if(x.length>0&&p){C&&T&&n.texStorage2D(3553,M,_,x[0].width,x[0].height);for(let e=0,t=x.length;e<t;e++)m=x[e],C?n.texSubImage2D(3553,e,0,0,d,y,m):n.texImage2D(3553,e,_,d,y,m);i.generateMipmaps=!1}else C?(T&&n.texStorage2D(3553,M,_,r.width,r.height),n.texSubImage2D(3553,0,0,0,d,y,r)):n.texImage2D(3553,0,_,d,y,r);z(i,p)&&L(l),f.__version=h.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}function te(t,i,a,s,l){const c=o.convert(a.format,a.encoding),u=o.convert(a.type),h=U(a.internalFormat,c,u,a.encoding);r.get(i).__hasExternalTextures||(32879===l||35866===l?n.texImage3D(l,0,h,i.width,i.height,i.depth,0,c,u,null):n.texImage2D(l,0,h,i.width,i.height,0,c,u,null)),n.bindFramebuffer(36160,t),ae(i)?f.framebufferTexture2DMultisampleEXT(36160,s,l,r.get(a).__webglTexture,0,ie(i)):(3553===l||l>=34069&&l<=34074)&&e.framebufferTexture2D(36160,s,l,r.get(a).__webglTexture,0),n.bindFramebuffer(36160,null)}function ne(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){let i=33189;if(r||ae(n)){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===w?i=36012:t.type===A&&(i=33190));const r=ie(n);ae(n)?f.renderbufferStorageMultisampleEXT(36161,r,i,n.width,n.height):e.renderbufferStorageMultisample(36161,r,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){const i=ie(n);r&&!1===ae(n)?e.renderbufferStorageMultisample(36161,i,35056,n.width,n.height):ae(n)?f.renderbufferStorageMultisampleEXT(36161,i,35056,n.width,n.height):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let i=0;i<t.length;i++){const a=t[i],s=o.convert(a.format,a.encoding),l=o.convert(a.type),c=U(a.internalFormat,s,l,a.encoding),u=ie(n);r&&!1===ae(n)?e.renderbufferStorageMultisample(36161,u,c,n.width,n.height):ae(n)?f.renderbufferStorageMultisampleEXT(36161,u,c,n.width,n.height):e.renderbufferStorage(36161,c,n.width,n.height)}}e.bindRenderbuffer(36161,null)}function re(t){const i=r.get(t),o=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),$(i.depthTexture,0);const o=r.get(i.depthTexture).__webglTexture,a=ie(i);if(i.depthTexture.format===B)ae(i)?f.framebufferTexture2DMultisampleEXT(36160,36096,3553,o,0,a):e.framebufferTexture2D(36160,36096,3553,o,0);else{if(i.depthTexture.format!==k)throw new Error("Unknown depthTexture format");ae(i)?f.framebufferTexture2DMultisampleEXT(36160,33306,3553,o,0,a):e.framebufferTexture2D(36160,33306,3553,o,0)}}(i.__webglFramebuffer,t)}else if(o){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(36160,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=e.createRenderbuffer(),ne(i.__webglDepthbuffer[r],t,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),ne(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function ie(e){return Math.min(h,e.samples)}function ae(e){const n=r.get(e);return s&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function se(e,n){const r=e.encoding,i=e.format,o=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===q||r!==R&&(r===F?!1===s?!0===t.has("EXT_sRGB")&&i===S?(e.format=q,e.minFilter=b,e.generateMipmaps=!1):n=ve.sRGBToLinear(n):i===S&&o===x||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",r)),n}this.allocateTextureUnit=function(){const e=H;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),H+=1,e},this.resetTextureUnits=function(){H=0},this.setTexture2D=$,this.setTexture2DArray=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?ee(i,e,t):n.bindTexture(35866,i.__webglTexture,33984+t)},this.setTexture3D=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?ee(i,e,t):n.bindTexture(32879,i.__webglTexture,33984+t)},this.setTextureCube=function(t,i){const a=r.get(t);t.version>0&&a.__version!==t.version?function(t,i,a){if(6!==i.image.length)return;const l=K(t,i),u=i.source;n.bindTexture(34067,t.__webglTexture,33984+a);const h=r.get(u);if(u.version!==h.__version||!0===l){n.activeTexture(33984+a),e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment),e.pixelStorei(37443,0);const t=i.isCompressedTexture||i.image[0].isCompressedTexture,r=i.image[0]&&i.image[0].isDataTexture,f=[];for(let e=0;e<6;e++)f[e]=t||r?r?i.image[e].image:i.image[e]:O(i.image[e],!1,!0,c),f[e]=se(i,f[e]);const p=f[0],d=D(p)||s,m=o.convert(i.format,i.encoding),g=o.convert(i.type),y=U(i.internalFormat,m,g,i.encoding),v=s&&!0!==i.isVideoTexture,b=void 0===h.__version||!0===l;let _,x=N(i,p,d);if(Y(34067,i,d),t){v&&b&&n.texStorage2D(34067,x,y,p.width,p.height);for(let e=0;e<6;e++){_=f[e].mipmaps;for(let t=0;t<_.length;t++){const r=_[t];i.format!==S?null!==m?v?n.compressedTexSubImage2D(34069+e,t,0,0,r.width,r.height,m,r.data):n.compressedTexImage2D(34069+e,t,y,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):v?n.texSubImage2D(34069+e,t,0,0,r.width,r.height,m,g,r.data):n.texImage2D(34069+e,t,y,r.width,r.height,0,m,g,r.data)}}}else{_=i.mipmaps,v&&b&&(_.length>0&&x++,n.texStorage2D(34067,x,y,f[0].width,f[0].height));for(let e=0;e<6;e++)if(r){v?n.texSubImage2D(34069+e,0,0,0,f[e].width,f[e].height,m,g,f[e].data):n.texImage2D(34069+e,0,y,f[e].width,f[e].height,0,m,g,f[e].data);for(let t=0;t<_.length;t++){const r=_[t].image[e].image;v?n.texSubImage2D(34069+e,t+1,0,0,r.width,r.height,m,g,r.data):n.texImage2D(34069+e,t+1,y,r.width,r.height,0,m,g,r.data)}}else{v?n.texSubImage2D(34069+e,0,0,0,m,g,f[e]):n.texImage2D(34069+e,0,y,m,g,f[e]);for(let t=0;t<_.length;t++){const r=_[t];v?n.texSubImage2D(34069+e,t+1,0,0,m,g,r.image[e]):n.texImage2D(34069+e,t+1,y,m,g,r.image[e])}}}z(i,d)&&L(34067),h.__version=u.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}(a,t,i):n.bindTexture(34067,a.__webglTexture,33984+i)},this.rebindTextures=function(e,t,n){const i=r.get(e);void 0!==t&&te(i.__webglFramebuffer,e,e.texture,36064,3553),void 0!==n&&re(e)},this.setupRenderTarget=function(t){const l=t.texture,c=r.get(t),u=r.get(l);t.addEventListener("dispose",G),!0!==t.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=l.version,a.memory.textures++);const h=!0===t.isWebGLCubeRenderTarget,f=!0===t.isWebGLMultipleRenderTargets,p=D(t)||s;if(h){c.__webglFramebuffer=[];for(let t=0;t<6;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else{if(c.__webglFramebuffer=e.createFramebuffer(),f)if(i.drawBuffers){const n=t.texture;for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);void 0===i.__webglTexture&&(i.__webglTexture=e.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(s&&t.samples>0&&!1===ae(t)){const r=f?l:[l];c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer);for(let n=0;n<r.length;n++){const i=r[n];c.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(36161,c.__webglColorRenderbuffer[n]);const a=o.convert(i.format,i.encoding),s=o.convert(i.type),l=U(i.internalFormat,a,s,i.encoding,!0===t.isXRRenderTarget),u=ie(t);e.renderbufferStorageMultisample(36161,u,l,t.width,t.height),e.framebufferRenderbuffer(36160,36064+n,36161,c.__webglColorRenderbuffer[n])}e.bindRenderbuffer(36161,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),ne(c.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}}if(h){n.bindTexture(34067,u.__webglTexture),Y(34067,l,p);for(let e=0;e<6;e++)te(c.__webglFramebuffer[e],t,l,36064,34069+e);z(l,p)&&L(34067),n.unbindTexture()}else if(f){const e=t.texture;for(let i=0,o=e.length;i<o;i++){const o=e[i],a=r.get(o);n.bindTexture(3553,a.__webglTexture),Y(3553,o,p),te(c.__webglFramebuffer,t,o,36064+i,3553),z(o,p)&&L(3553)}n.unbindTexture()}else{let e=3553;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(s?e=t.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(e,u.__webglTexture),Y(e,l,p),te(c.__webglFramebuffer,t,l,36064,e),z(l,p)&&L(e),n.unbindTexture()}t.depthBuffer&&re(t)},this.updateRenderTargetMipmap=function(e){const t=D(e)||s,i=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let o=0,a=i.length;o<a;o++){const a=i[o];if(z(a,t)){const t=e.isWebGLCubeRenderTarget?34067:3553,i=r.get(a).__webglTexture;n.bindTexture(t,i),L(t),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(s&&t.samples>0&&!1===ae(t)){const i=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],o=t.width,a=t.height;let s=16384;const l=[],c=t.stencilBuffer?33306:36096,u=r.get(t),h=!0===t.isWebGLMultipleRenderTargets;if(h)for(let t=0;t<i.length;t++)n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+t,36161,null),n.bindFramebuffer(36160,u.__webglFramebuffer),e.framebufferTexture2D(36009,36064+t,3553,null,0);n.bindFramebuffer(36008,u.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,u.__webglFramebuffer);for(let n=0;n<i.length;n++){l.push(36064+n),t.depthBuffer&&l.push(c);const f=void 0!==u.__ignoreDepthValues&&u.__ignoreDepthValues;if(!1===f&&(t.depthBuffer&&(s|=256),t.stencilBuffer&&(s|=1024)),h&&e.framebufferRenderbuffer(36008,36064,36161,u.__webglColorRenderbuffer[n]),!0===f&&(e.invalidateFramebuffer(36008,[c]),e.invalidateFramebuffer(36009,[c])),h){const t=r.get(i[n]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,t,0)}e.blitFramebuffer(0,0,o,a,0,0,o,a,s,9728),p&&e.invalidateFramebuffer(36008,l)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),h)for(let t=0;t<i.length;t++){n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+t,36161,u.__webglColorRenderbuffer[t]);const o=r.get(i[t]).__webglTexture;n.bindFramebuffer(36160,u.__webglFramebuffer),e.framebufferTexture2D(36009,36064+t,3553,o,0)}n.bindFramebuffer(36009,u.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=re,this.setupFrameBufferTexture=te,this.useMultisampledRTT=ae}function lo(e,t,n){const r=n.isWebGL2;return{convert:function(n,i=null){let o;if(n===x)return 5121;if(1017===n)return 32819;if(1018===n)return 32820;if(1010===n)return 5120;if(1011===n)return 5122;if(1012===n)return 5123;if(1013===n)return 5124;if(n===A)return 5125;if(n===w)return 5126;if(n===C)return r?5131:(o=t.get("OES_texture_half_float"),null!==o?o.HALF_FLOAT_OES:null);if(1021===n)return 6406;if(n===S)return 6408;if(n===T)return 6409;if(1025===n)return 6410;if(n===B)return 6402;if(n===k)return 34041;if(1028===n)return 6403;if(1022===n)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(n===q)return o=t.get("EXT_sRGB"),null!==o?o.SRGB_ALPHA_EXT:null;if(1029===n)return 36244;if(1030===n)return 33319;if(1031===n)return 33320;if(1033===n)return 36249;if(n===M||n===P||n===I||n===O)if(i===F){if(o=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===o)return null;if(n===M)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===P)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===I)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===O)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(o=t.get("WEBGL_compressed_texture_s3tc"),null===o)return null;if(n===M)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===P)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===I)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===O)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===n||35841===n||35842===n||35843===n){if(o=t.get("WEBGL_compressed_texture_pvrtc"),null===o)return null;if(35840===n)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===n)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===n)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===n)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===n)return o=t.get("WEBGL_compressed_texture_etc1"),null!==o?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===n||37496===n){if(o=t.get("WEBGL_compressed_texture_etc"),null===o)return null;if(37492===n)return i===F?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(37496===n)return i===F?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}if(37808===n||37809===n||37810===n||37811===n||37812===n||37813===n||37814===n||37815===n||37816===n||37817===n||37818===n||37819===n||37820===n||37821===n){if(o=t.get("WEBGL_compressed_texture_astc"),null===o)return null;if(37808===n)return i===F?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===n)return i===F?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===n)return i===F?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===n)return i===F?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===n)return i===F?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===n)return i===F?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===n)return i===F?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===n)return i===F?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===n)return i===F?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===n)return i===F?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===n)return i===F?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===n)return i===F?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===n)return i===F?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===n)return i===F?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===n){if(o=t.get("EXT_texture_compression_bptc"),null===o)return null;if(36492===n)return i===F?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}return n===E?r?34042:(o=t.get("WEBGL_depth_texture"),null!==o?o.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[n]?e[n]:null}}}class co extends Mn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class uo extends kt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const ho={type:"move"};class fo{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new uo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new uo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Be,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Be),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new uo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Be,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Be),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,o=null;const a=this._targetRay,s=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){o=!0;for(const r of e.hand.values()){const e=t.getJointPose(r,n);if(void 0===l.joints[r.jointName]){const e=new uo;e.matrixAutoUpdate=!1,e.visible=!1,l.joints[r.jointName]=e,l.add(e)}const i=l.joints[r.jointName];null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.jointRadius=e.radius),i.visible=null!==e}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],a=r.position.distanceTo(i.position),s=.02,c=.005;l.inputState.pinching&&a>s+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&a<=s-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(ho)))}return null!==a&&(a.visible=null!==r),null!==s&&(s.visible=null!==i),null!==l&&(l.visible=null!==o),this}}class po extends Ae{constructor(e,t,n,r,i,o,a,s,l,c){if((c=void 0!==c?c:B)!==B&&c!==k)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===B&&(n=A),void 0===n&&c===k&&(n=E),super(null,r,i,o,a,s,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:v,this.minFilter=void 0!==s?s:v,this.flipY=!1,this.generateMipmaps=!1}}class mo extends W{constructor(e,t){super();const n=this;let r=null,i=1,o=null,a="local-floor",s=null,l=null,c=null,u=null,h=null,f=null;const p=t.getContextAttributes();let d=null,m=null;const g=[],y=[],v=new Mn;v.layers.enable(1),v.viewport=new we;const b=new Mn;b.layers.enable(2),b.viewport=new we;const _=[v,b],w=new co;w.layers.enable(1),w.layers.enable(2);let C=null,T=null;function M(e){const t=y.indexOf(e.inputSource);if(-1===t)return;const n=g[t];void 0!==n&&n.dispatchEvent({type:e.type,data:e.inputSource})}function P(){r.removeEventListener("select",M),r.removeEventListener("selectstart",M),r.removeEventListener("selectend",M),r.removeEventListener("squeeze",M),r.removeEventListener("squeezestart",M),r.removeEventListener("squeezeend",M),r.removeEventListener("end",P),r.removeEventListener("inputsourceschange",I);for(let e=0;e<g.length;e++){const t=y[e];null!==t&&(y[e]=null,g[e].disconnect(t))}C=null,T=null,e.setRenderTarget(d),h=null,u=null,c=null,r=null,m=null,R.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function I(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],r=y.indexOf(n);r>=0&&(y[r]=null,g[r].dispatchEvent({type:"disconnected",data:n}))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let r=y.indexOf(n);if(-1===r){for(let e=0;e<g.length;e++){if(e>=y.length){y.push(n),r=e;break}if(null===y[e]){y[e]=n,r=e;break}}if(-1===r)break}const i=g[r];i&&i.dispatchEvent({type:"connected",data:n})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=g[e];return void 0===t&&(t=new fo,g[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=g[e];return void 0===t&&(t=new fo,g[e]=t),t.getGripSpace()},this.getHand=function(e){let t=g[e];return void 0===t&&(t=new fo,g[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){a=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return s||o},this.setReferenceSpace=function(e){s=e},this.getBaseLayer=function(){return null!==u?u:h},this.getBinding=function(){return c},this.getFrame=function(){return f},this.getSession=function(){return r},this.setSession=async function(l){if(r=l,null!==r){if(d=e.getRenderTarget(),r.addEventListener("select",M),r.addEventListener("selectstart",M),r.addEventListener("selectend",M),r.addEventListener("squeeze",M),r.addEventListener("squeezestart",M),r.addEventListener("squeezeend",M),r.addEventListener("end",P),r.addEventListener("inputsourceschange",I),!0!==p.xrCompatible&&await t.makeXRCompatible(),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2){const n={antialias:void 0!==r.renderState.layers||p.antialias,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:i};h=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:h}),m=new Ce(h.framebufferWidth,h.framebufferHeight,{format:S,type:x,encoding:e.outputEncoding,stencilBuffer:p.stencil})}else{let n=null,o=null,a=null;p.depth&&(a=p.stencil?35056:33190,n=p.stencil?k:B,o=p.stencil?E:A);const s={colorFormat:32856,depthFormat:a,scaleFactor:i};c=new XRWebGLBinding(r,t),u=c.createProjectionLayer(s),r.updateRenderState({layers:[u]}),m=new Ce(u.textureWidth,u.textureHeight,{format:S,type:x,depthTexture:new po(u.textureWidth,u.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:p.stencil,encoding:e.outputEncoding,samples:p.antialias?4:0}),e.properties.get(m).__ignoreDepthValues=u.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(1),s=null,o=await r.requestReferenceSpace(a),R.setContext(r),R.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const O=new Be,D=new Be;function z(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;w.near=b.near=v.near=e.near,w.far=b.far=v.far=e.far,C===w.near&&T===w.far||(r.updateRenderState({depthNear:w.near,depthFar:w.far}),C=w.near,T=w.far);const t=e.parent,n=w.cameras;z(w,t);for(let e=0;e<n.length;e++)z(n[e],t);w.matrixWorld.decompose(w.position,w.quaternion,w.scale),e.matrix.copy(w.matrix),e.matrix.decompose(e.position,e.quaternion,e.scale);const i=e.children;for(let e=0,t=i.length;e<t;e++)i[e].updateMatrixWorld(!0);2===n.length?function(e,t,n){O.setFromMatrixPosition(t.matrixWorld),D.setFromMatrixPosition(n.matrixWorld);const r=O.distanceTo(D),i=t.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),l=(i[9]+1)/i[5],c=(i[9]-1)/i[5],u=(i[8]-1)/i[0],h=(o[8]+1)/o[0],f=a*u,p=a*h,d=r/(-u+h),m=d*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(d),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=a+d,y=s+d,v=f-m,b=p+(r-m),_=l*s/y*g,x=c*s/y*g;e.projectionMatrix.makePerspective(v,b,_,x,g,y)}(w,v,b):w.projectionMatrix.copy(v.projectionMatrix)},this.getCamera=function(){return w},this.getFoveation=function(){return null!==u?u.fixedFoveation:null!==h?h.fixedFoveation:void 0},this.setFoveation=function(e){null!==u&&(u.fixedFoveation=e),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=e)};let L=null;const R=new Vn;R.setAnimationLoop((function(t,n){if(l=n.getViewerPose(s||o),f=n,null!==l){const t=l.views;null!==h&&(e.setRenderTargetFramebuffer(m,h.framebuffer),e.setRenderTarget(m));let n=!1;t.length!==w.cameras.length&&(w.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){const i=t[r];let o=null;if(null!==h)o=h.getViewport(i);else{const t=c.getViewSubImage(u,i);o=t.viewport,0===r&&(e.setRenderTargetTextures(m,t.colorTexture,u.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(m))}let a=_[r];void 0===a&&(a=new Mn,a.layers.enable(r),a.viewport=new we,_[r]=a),a.matrix.fromArray(i.transform.matrix),a.projectionMatrix.fromArray(i.projectionMatrix),a.viewport.set(o.x,o.y,o.width,o.height),0===r&&w.matrix.copy(a.matrix),!0===n&&w.cameras.push(a)}}for(let e=0;e<g.length;e++){const t=y[e],r=g[e];null!==t&&void 0!==r&&r.update(t,n,s||o)}L&&L(t,n),f=null})),this.setAnimationLoop=function(e){L=e},this.dispose=function(){}}}function go(e,t){function n(n,r){n.opacity.value=r.opacity,r.color&&n.diffuse.value.copy(r.color),r.emissive&&n.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(n.map.value=r.map),r.alphaMap&&(n.alphaMap.value=r.alphaMap),r.bumpMap&&(n.bumpMap.value=r.bumpMap,n.bumpScale.value=r.bumpScale,r.side===i&&(n.bumpScale.value*=-1)),r.displacementMap&&(n.displacementMap.value=r.displacementMap,n.displacementScale.value=r.displacementScale,n.displacementBias.value=r.displacementBias),r.emissiveMap&&(n.emissiveMap.value=r.emissiveMap),r.normalMap&&(n.normalMap.value=r.normalMap,n.normalScale.value.copy(r.normalScale),r.side===i&&n.normalScale.value.negate()),r.specularMap&&(n.specularMap.value=r.specularMap),r.alphaTest>0&&(n.alphaTest.value=r.alphaTest);const o=t.get(r).envMap;if(o&&(n.envMap.value=o,n.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,n.reflectivity.value=r.reflectivity,n.ior.value=r.ior,n.refractionRatio.value=r.refractionRatio),r.lightMap){n.lightMap.value=r.lightMap;const t=!0!==e.physicallyCorrectLights?Math.PI:1;n.lightMapIntensity.value=r.lightMapIntensity*t}let a,s;r.aoMap&&(n.aoMap.value=r.aoMap,n.aoMapIntensity.value=r.aoMapIntensity),r.map?a=r.map:r.specularMap?a=r.specularMap:r.displacementMap?a=r.displacementMap:r.normalMap?a=r.normalMap:r.bumpMap?a=r.bumpMap:r.roughnessMap?a=r.roughnessMap:r.metalnessMap?a=r.metalnessMap:r.alphaMap?a=r.alphaMap:r.emissiveMap?a=r.emissiveMap:r.clearcoatMap?a=r.clearcoatMap:r.clearcoatNormalMap?a=r.clearcoatNormalMap:r.clearcoatRoughnessMap?a=r.clearcoatRoughnessMap:r.iridescenceMap?a=r.iridescenceMap:r.iridescenceThicknessMap?a=r.iridescenceThicknessMap:r.specularIntensityMap?a=r.specularIntensityMap:r.specularColorMap?a=r.specularColorMap:r.transmissionMap?a=r.transmissionMap:r.thicknessMap?a=r.thicknessMap:r.sheenColorMap?a=r.sheenColorMap:r.sheenRoughnessMap&&(a=r.sheenRoughnessMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),n.uvTransform.value.copy(a.matrix)),r.aoMap?s=r.aoMap:r.lightMap&&(s=r.lightMap),void 0!==s&&(s.isWebGLRenderTarget&&(s=s.texture),!0===s.matrixAutoUpdate&&s.updateMatrix(),n.uv2Transform.value.copy(s.matrix))}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,o,a,s){r.isMeshBasicMaterial||r.isMeshLambertMaterial?n(e,r):r.isMeshToonMaterial?(n(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,r)):r.isMeshPhongMaterial?(n(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,r)):r.isMeshStandardMaterial?(n(e,r),function(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap),t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}(e,r),r.isMeshPhysicalMaterial&&function(e,t,n){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap)),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===i&&e.clearcoatNormalScale.value.negate())),t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap)),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)),e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,r,s)):r.isMeshMatcapMaterial?(n(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,r)):r.isMeshDepthMaterial?n(e,r):r.isMeshDistanceMaterial?(n(e,r),function(e,t){e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?n(e,r):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){let i;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?i=t.map:t.alphaMap&&(i=t.alphaMap),void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,o,a):r.isSpriteMaterial?function(e,t){let n;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?n=t.map:t.alphaMap&&(n=t.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function yo(e,t,n,r){let i={},o={},a=[];const s=n.isWebGL2?e.getParameter(35375):0;function l(e,t,n){const r=e.value;if(void 0===n[t])return n[t]="number"==typeof r?r:r.clone(),!0;if("number"==typeof r){if(n[t]!==r)return n[t]=r,!0}else{const e=n[t];if(!1===e.equals(r))return e.copy(r),!0}return!1}function c(e){const t=e.value,n={boundary:0,storage:0};return"number"==typeof t?(n.boundary=4,n.storage=4):t.isVector2?(n.boundary=8,n.storage=8):t.isVector3||t.isColor?(n.boundary=16,n.storage=12):t.isVector4?(n.boundary=16,n.storage=16):t.isMatrix3?(n.boundary=48,n.storage=48):t.isMatrix4?(n.boundary=64,n.storage=64):t.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",t),n}function u(t){const n=t.target;n.removeEventListener("dispose",u);const r=a.indexOf(n.__bindingPointIndex);a.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete o[n.id]}return{bind:function(e,t){const n=t.program;r.uniformBlockBinding(e,n)},update:function(n,h){let f=i[n.id];void 0===f&&(function(e){const t=e.uniforms;let n=0;let r=0;for(let e=0,i=t.length;e<i;e++){const i=t[e],o=c(i);if(i.__data=new Float32Array(o.storage/Float32Array.BYTES_PER_ELEMENT),i.__offset=n,e>0){r=n%16;const e=16-r;0!==r&&e-o.boundary<0&&(n+=16-r,i.__offset=n)}n+=o.storage}r=n%16,r>0&&(n+=16-r),e.__size=n,e.__cache={}}(n),f=function(t){const n=function(){for(let e=0;e<s;e++)if(-1===a.indexOf(e))return a.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;const r=e.createBuffer(),i=t.__size,o=t.usage;return e.bindBuffer(35345,r),e.bufferData(35345,i,o),e.bindBuffer(35345,null),e.bindBufferBase(35345,n,r),r}(n),i[n.id]=f,n.addEventListener("dispose",u));const p=h.program;r.updateUBOMapping(n,p);const d=t.render.frame;o[n.id]!==d&&(function(t){const n=i[t.id],r=t.uniforms,o=t.__cache;e.bindBuffer(35345,n);for(let t=0,n=r.length;t<n;t++){const n=r[t];if(!0===l(n,t,o)){const t=n.value,r=n.__offset;"number"==typeof t?(n.__data[0]=t,e.bufferSubData(35345,r,n.__data)):(n.value.isMatrix3?(n.__data[0]=n.value.elements[0],n.__data[1]=n.value.elements[1],n.__data[2]=n.value.elements[2],n.__data[3]=n.value.elements[0],n.__data[4]=n.value.elements[3],n.__data[5]=n.value.elements[4],n.__data[6]=n.value.elements[5],n.__data[7]=n.value.elements[0],n.__data[8]=n.value.elements[6],n.__data[9]=n.value.elements[7],n.__data[10]=n.value.elements[8],n.__data[11]=n.value.elements[0]):t.toArray(n.__data),e.bufferSubData(35345,r,n.__data))}}e.bindBuffer(35345,null)}(n),o[n.id]=d)},dispose:function(){for(const t in i)e.deleteBuffer(i[t]);a=[],i={},o={}}}}function vo(e={}){this.isWebGLRenderer=!0;const t=void 0!==e.canvas?e.canvas:function(){const e=oe("canvas");return e.style.display="block",e}(),n=void 0!==e.context?e.context:null,a=void 0===e.depth||e.depth,s=void 0===e.stencil||e.stencil,l=void 0!==e.antialias&&e.antialias,c=void 0===e.premultipliedAlpha||e.premultipliedAlpha,u=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,h=void 0!==e.powerPreference?e.powerPreference:"default",f=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let p;p=null!==n?n.getContextAttributes().alpha:void 0!==e.alpha&&e.alpha;let d=null,m=null;const g=[],y=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=R,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const v=this;let b=!1,A=0,E=0,T=null,B=-1,k=null;const M=new we,P=new we;let I=null,O=t.width,D=t.height,z=1,L=null,F=null;const U=new we(0,0,O,D),N=new we(0,0,O,D);let j=!1;const V=new jn;let G=!1,q=!1,W=null;const H=new it,$=new ne,X=new Be,Z={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Y(){return null===T?z:1}let K,J,ee,te,re,ie,ae,se,le,ce,ue,he,fe,pe,de,me,ge,ye,ve,be,_e,xe,Ae,Ee,Se=n;function Te(e,n){for(let r=0;r<e.length;r++){const i=e[r],o=t.getContext(i,n);if(null!==o)return o}return null}try{const e={alpha:!0,depth:a,stencil:s,antialias:l,premultipliedAlpha:c,preserveDrawingBuffer:u,powerPreference:h,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r146"),t.addEventListener("webglcontextlost",Pe,!1),t.addEventListener("webglcontextrestored",Ie,!1),t.addEventListener("webglcontextcreationerror",Oe,!1),null===Se){const t=["webgl2","webgl","experimental-webgl"];if(!0===v.isWebGL1Renderer&&t.shift(),Se=Te(t,e),null===Se)throw Te(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Se.getShaderPrecisionFormat&&(Se.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function ke(){K=new dr(Se),J=new Kn(Se,K,e),K.init(J),xe=new lo(Se,K,J),ee=new ao(Se,K,J),te=new yr,re=new Hi,ie=new so(Se,K,ee,re,J,xe,te),ae=new Qn(v),se=new pr(v),le=new Gn(Se,J),Ae=new Zn(Se,K,le,J),ce=new mr(Se,le,te,Ae),ue=new xr(Se,ce,le,te),ve=new _r(Se,J,ie),me=new Jn(re),he=new Wi(v,ae,se,K,J,Ae,me),fe=new go(v,re),pe=new Yi,de=new no(K,J),ye=new Xn(v,ae,se,ee,ue,p,c),ge=new oo(v,ue,J),Ee=new yo(Se,te,J,ee),be=new Yn(Se,K,te,J),_e=new gr(Se,K,te,J),te.programs=he.programs,v.capabilities=J,v.extensions=K,v.properties=re,v.renderLists=pe,v.shadowMap=ge,v.state=ee,v.info=te}ke();const Me=new mo(v,Se);function Pe(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),b=!0}function Ie(){console.log("THREE.WebGLRenderer: Context Restored."),b=!1;const e=te.autoReset,t=ge.enabled,n=ge.autoUpdate,r=ge.needsUpdate,i=ge.type;ke(),te.autoReset=e,ge.enabled=t,ge.autoUpdate=n,ge.needsUpdate=r,ge.type=i}function Oe(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function De(e){const t=e.target;t.removeEventListener("dispose",De),function(e){(function(e){const t=re.get(e).programs;void 0!==t&&(t.forEach((function(e){he.releaseProgram(e)})),e.isShaderMaterial&&he.releaseShaderCache(e))})(e),re.remove(e)}(t)}this.xr=Me,this.getContext=function(){return Se},this.getContextAttributes=function(){return Se.getContextAttributes()},this.forceContextLoss=function(){const e=K.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=K.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return z},this.setPixelRatio=function(e){void 0!==e&&(z=e,this.setSize(O,D,!1))},this.getSize=function(e){return e.set(O,D)},this.setSize=function(e,n,r){Me.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(O=e,D=n,t.width=Math.floor(e*z),t.height=Math.floor(n*z),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(O*z,D*z).floor()},this.setDrawingBufferSize=function(e,n,r){O=e,D=n,z=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(M)},this.getViewport=function(e){return e.copy(U)},this.setViewport=function(e,t,n,r){e.isVector4?U.set(e.x,e.y,e.z,e.w):U.set(e,t,n,r),ee.viewport(M.copy(U).multiplyScalar(z).floor())},this.getScissor=function(e){return e.copy(N)},this.setScissor=function(e,t,n,r){e.isVector4?N.set(e.x,e.y,e.z,e.w):N.set(e,t,n,r),ee.scissor(P.copy(N).multiplyScalar(z).floor())},this.getScissorTest=function(){return j},this.setScissorTest=function(e){ee.setScissorTest(j=e)},this.setOpaqueSort=function(e){L=e},this.setTransparentSort=function(e){F=e},this.getClearColor=function(e){return e.copy(ye.getClearColor())},this.setClearColor=function(){ye.setClearColor.apply(ye,arguments)},this.getClearAlpha=function(){return ye.getClearAlpha()},this.setClearAlpha=function(){ye.setClearAlpha.apply(ye,arguments)},this.clear=function(e=!0,t=!0,n=!0){let r=0;e&&(r|=16384),t&&(r|=256),n&&(r|=1024),Se.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Pe,!1),t.removeEventListener("webglcontextrestored",Ie,!1),t.removeEventListener("webglcontextcreationerror",Oe,!1),pe.dispose(),de.dispose(),re.dispose(),ae.dispose(),se.dispose(),ue.dispose(),Ae.dispose(),Ee.dispose(),he.dispose(),Me.dispose(),Me.removeEventListener("sessionstart",Le),Me.removeEventListener("sessionend",Re),W&&(W.dispose(),W=null),Fe.stop()},this.renderBufferDirect=function(e,t,n,r,i,o){null===t&&(t=Z);const a=i.isMesh&&i.matrixWorld.determinant()<0,s=function(e,t,n,r,i){!0!==t.isScene&&(t=Z),ie.resetTextureUnits();const o=t.fog,a=r.isMeshStandardMaterial?t.environment:null,s=null===T?v.outputEncoding:!0===T.isXRRenderTarget?T.texture.encoding:R,l=(r.isMeshStandardMaterial?se:ae).get(r.envMap||a),c=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!r.normalMap&&!!n.attributes.tangent,h=!!n.morphAttributes.position,f=!!n.morphAttributes.normal,p=!!n.morphAttributes.color,d=r.toneMapped?v.toneMapping:0,g=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,y=void 0!==g?g.length:0,b=re.get(r),_=m.state.lights;if(!0===G&&(!0===q||e!==k)){const t=e===k&&r.id===B;me.setState(r,e,t)}let x=!1;r.version===b.__version?b.needsLights&&b.lightsStateVersion!==_.state.version||b.outputEncoding!==s||i.isInstancedMesh&&!1===b.instancing?x=!0:i.isInstancedMesh||!0!==b.instancing?i.isSkinnedMesh&&!1===b.skinning?x=!0:i.isSkinnedMesh||!0!==b.skinning?b.envMap!==l||!0===r.fog&&b.fog!==o?x=!0:void 0===b.numClippingPlanes||b.numClippingPlanes===me.numPlanes&&b.numIntersection===me.numIntersection?(b.vertexAlphas!==c||b.vertexTangents!==u||b.morphTargets!==h||b.morphNormals!==f||b.morphColors!==p||b.toneMapping!==d||!0===J.isWebGL2&&b.morphTargetsCount!==y)&&(x=!0):x=!0:x=!0:x=!0:(x=!0,b.__version=r.version);let A=b.currentProgram;!0===x&&(A=Ge(r,t,i));let w=!1,C=!1,E=!1;const S=A.getUniforms(),M=b.uniforms;if(ee.useProgram(A.program)&&(w=!0,C=!0,E=!0),r.id!==B&&(B=r.id,C=!0),w||k!==e){if(S.setValue(Se,"projectionMatrix",e.projectionMatrix),J.logarithmicDepthBuffer&&S.setValue(Se,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),k!==e&&(k=e,C=!0,E=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){const t=S.map.cameraPosition;void 0!==t&&t.setValue(Se,X.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&S.setValue(Se,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&S.setValue(Se,"viewMatrix",e.matrixWorldInverse)}if(i.isSkinnedMesh){S.setOptional(Se,i,"bindMatrix"),S.setOptional(Se,i,"bindMatrixInverse");const e=i.skeleton;e&&(J.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),S.setValue(Se,"boneTexture",e.boneTexture,ie),S.setValue(Se,"boneTextureSize",e.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const P=n.morphAttributes;var I,O;if((void 0!==P.position||void 0!==P.normal||void 0!==P.color&&!0===J.isWebGL2)&&ve.update(i,n,r,A),(C||b.receiveShadow!==i.receiveShadow)&&(b.receiveShadow=i.receiveShadow,S.setValue(Se,"receiveShadow",i.receiveShadow)),r.isMeshGouraudMaterial&&null!==r.envMap&&(M.envMap.value=l,M.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1),C&&(S.setValue(Se,"toneMappingExposure",v.toneMappingExposure),b.needsLights&&(O=E,(I=M).ambientLightColor.needsUpdate=O,I.lightProbe.needsUpdate=O,I.directionalLights.needsUpdate=O,I.directionalLightShadows.needsUpdate=O,I.pointLights.needsUpdate=O,I.pointLightShadows.needsUpdate=O,I.spotLights.needsUpdate=O,I.spotLightShadows.needsUpdate=O,I.rectAreaLights.needsUpdate=O,I.hemisphereLights.needsUpdate=O),o&&!0===r.fog&&fe.refreshFogUniforms(M,o),fe.refreshMaterialUniforms(M,r,z,D,W),Ei.upload(Se,b.uniformsList,M,ie)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(Ei.upload(Se,b.uniformsList,M,ie),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&S.setValue(Se,"center",i.center),S.setValue(Se,"modelViewMatrix",i.modelViewMatrix),S.setValue(Se,"normalMatrix",i.normalMatrix),S.setValue(Se,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const e=r.uniformsGroups;for(let t=0,n=e.length;t<n;t++)if(J.isWebGL2){const n=e[t];Ee.update(n,A),Ee.bind(n,A)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return A}(e,t,n,r,i);ee.setMaterial(r,a);let l=n.index;const c=n.attributes.position;if(null===l){if(void 0===c||0===c.count)return}else if(0===l.count)return;let u,h=1;!0===r.wireframe&&(l=ce.getWireframeAttribute(n),h=2),Ae.setup(i,r,s,n,l);let f=be;null!==l&&(u=le.get(l),f=_e,f.setIndex(u));const p=null!==l?l.count:c.count,d=n.drawRange.start*h,g=n.drawRange.count*h,y=null!==o?o.start*h:0,b=null!==o?o.count*h:1/0,_=Math.max(d,y),x=Math.min(p,d+g,y+b)-1,A=Math.max(0,x-_+1);if(0!==A){if(i.isMesh)!0===r.wireframe?(ee.setLineWidth(r.wireframeLinewidth*Y()),f.setMode(1)):f.setMode(4);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),ee.setLineWidth(e*Y()),i.isLineSegments?f.setMode(1):i.isLineLoop?f.setMode(2):f.setMode(3)}else i.isPoints?f.setMode(0):i.isSprite&&f.setMode(4);if(i.isInstancedMesh)f.renderInstances(_,A,i.count);else if(n.isInstancedBufferGeometry){const e=Math.min(n.instanceCount,n._maxInstanceCount);f.renderInstances(_,A,e)}else f.render(_,A)}},this.compile=function(e,t){function n(e,t,n){!0===e.transparent&&e.side===o?(e.side=i,e.needsUpdate=!0,Ge(e,t,n),e.side=r,e.needsUpdate=!0,Ge(e,t,n),e.side=o):Ge(e,t,n)}m=de.get(e),m.init(),y.push(m),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(m.pushLight(e),e.castShadow&&m.pushShadow(e))})),m.setupLights(v.physicallyCorrectLights),e.traverse((function(t){const r=t.material;if(r)if(Array.isArray(r))for(let i=0;i<r.length;i++)n(r[i],e,t);else n(r,e,t)})),y.pop(),m=null};let ze=null;function Le(){Fe.stop()}function Re(){Fe.start()}const Fe=new Vn;function Ue(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)m.pushLight(e),e.castShadow&&m.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||V.intersectsSprite(e)){r&&X.setFromMatrixPosition(e.matrixWorld).applyMatrix4(H);const t=ue.update(e),i=e.material;i.visible&&d.push(e,t,i,n,X.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==te.render.frame&&(e.skeleton.update(),e.skeleton.frame=te.render.frame),!e.frustumCulled||V.intersectsObject(e))){r&&X.setFromMatrixPosition(e.matrixWorld).applyMatrix4(H);const t=ue.update(e),i=e.material;if(Array.isArray(i)){const r=t.groups;for(let o=0,a=r.length;o<a;o++){const a=r[o],s=i[a.materialIndex];s&&s.visible&&d.push(e,t,s,n,X.z,a)}}else i.visible&&d.push(e,t,i,n,X.z,null)}const i=e.children;for(let e=0,o=i.length;e<o;e++)Ue(i[e],t,n,r)}function Ne(e,t,n,r){const i=e.opaque,o=e.transmissive,a=e.transparent;m.setupLightsView(n),o.length>0&&function(e,t,n){const r=J.isWebGL2;null===W&&(W=new Ce(1,1,{generateMipmaps:!0,type:K.has("EXT_color_buffer_half_float")?C:x,minFilter:_,samples:r&&!0===l?4:0})),v.getDrawingBufferSize($),r?W.setSize($.x,$.y):W.setSize(Q($.x),Q($.y));const i=v.getRenderTarget();v.setRenderTarget(W),v.clear();const o=v.toneMapping;v.toneMapping=0,je(e,t,n),v.toneMapping=o,ie.updateMultisampleRenderTarget(W),ie.updateRenderTargetMipmap(W),v.setRenderTarget(i)}(i,t,n),r&&ee.viewport(M.copy(r)),i.length>0&&je(i,t,n),o.length>0&&je(o,t,n),a.length>0&&je(a,t,n),ee.buffers.depth.setTest(!0),ee.buffers.depth.setMask(!0),ee.buffers.color.setMask(!0),ee.setPolygonOffset(!1)}function je(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,o=e.length;i<o;i++){const o=e[i],a=o.object,s=o.geometry,l=null===r?o.material:r,c=o.group;a.layers.test(n.layers)&&Ve(a,t,n,s,l,c)}}function Ve(e,t,n,a,s,l){e.onBeforeRender(v,t,n,a,s,l),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),s.onBeforeRender(v,t,n,a,e,l),!0===s.transparent&&s.side===o?(s.side=i,s.needsUpdate=!0,v.renderBufferDirect(n,t,a,s,e,l),s.side=r,s.needsUpdate=!0,v.renderBufferDirect(n,t,a,s,e,l),s.side=o):v.renderBufferDirect(n,t,a,s,e,l),e.onAfterRender(v,t,n,a,s,l)}function Ge(e,t,n){!0!==t.isScene&&(t=Z);const r=re.get(e),i=m.state.lights,o=m.state.shadowsArray,a=i.state.version,s=he.getParameters(e,i.state,o,t,n),l=he.getProgramCacheKey(s);let c=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?se:ae).get(e.envMap||r.environment),void 0===c&&(e.addEventListener("dispose",De),c=new Map,r.programs=c);let u=c.get(l);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===a)return qe(e,s),u}else s.uniforms=he.getUniforms(e),e.onBuild(n,s,v),e.onBeforeCompile(s,v),u=he.acquireProgram(s,l),c.set(l,u),r.uniforms=s.uniforms;const h=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=me.uniform),qe(e,s),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=a,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotLightMatrix.value=i.state.spotLightMatrix,h.spotLightMap.value=i.state.spotLightMap,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);const f=u.getUniforms(),p=Ei.seqWithValue(f.seq,h);return r.currentProgram=u,r.uniformsList=p,u}function qe(e,t){const n=re.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Fe.setAnimationLoop((function(e){ze&&ze(e)})),"undefined"!=typeof self&&Fe.setContext(self),this.setAnimationLoop=function(e){ze=e,Me.setAnimationLoop(e),null===e?Fe.stop():Fe.start()},Me.addEventListener("sessionstart",Le),Me.addEventListener("sessionend",Re),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===b)return;!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===Me.enabled&&!0===Me.isPresenting&&(!0===Me.cameraAutoUpdate&&Me.updateCamera(t),t=Me.getCamera()),!0===e.isScene&&e.onBeforeRender(v,e,t,T),m=de.get(e,y.length),m.init(),y.push(m),H.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),V.setFromProjectionMatrix(H),q=this.localClippingEnabled,G=me.init(this.clippingPlanes,q,t),d=pe.get(e,g.length),d.init(),g.push(d),Ue(e,t,0,v.sortObjects),d.finish(),!0===v.sortObjects&&d.sort(L,F),!0===G&&me.beginShadows();const n=m.state.shadowsArray;if(ge.render(n,e,t),!0===G&&me.endShadows(),!0===this.info.autoReset&&this.info.reset(),ye.render(d,e),m.setupLights(v.physicallyCorrectLights),t.isArrayCamera){const n=t.cameras;for(let t=0,r=n.length;t<r;t++){const r=n[t];Ne(d,e,r,r.viewport)}}else Ne(d,e,t);null!==T&&(ie.updateMultisampleRenderTarget(T),ie.updateRenderTargetMipmap(T)),!0===e.isScene&&e.onAfterRender(v,e,t),Ae.resetDefaultState(),B=-1,k=null,y.pop(),m=y.length>0?y[y.length-1]:null,g.pop(),d=g.length>0?g[g.length-1]:null},this.getActiveCubeFace=function(){return A},this.getActiveMipmapLevel=function(){return E},this.getRenderTarget=function(){return T},this.setRenderTargetTextures=function(e,t,n){re.get(e.texture).__webglTexture=t,re.get(e.depthTexture).__webglTexture=n;const r=re.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===K.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){const n=re.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,n=0){T=e,A=t,E=n;let r=!0,i=null,o=!1,a=!1;if(e){const n=re.get(e);void 0!==n.__useDefaultFramebuffer?(ee.bindFramebuffer(36160,null),r=!1):void 0===n.__webglFramebuffer?ie.setupRenderTarget(e):n.__hasExternalTextures&&ie.rebindTextures(e,re.get(e.texture).__webglTexture,re.get(e.depthTexture).__webglTexture);const s=e.texture;(s.isData3DTexture||s.isDataArrayTexture||s.isCompressedArrayTexture)&&(a=!0);const l=re.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=l[t],o=!0):i=J.isWebGL2&&e.samples>0&&!1===ie.useMultisampledRTT(e)?re.get(e).__webglMultisampledFramebuffer:l,M.copy(e.viewport),P.copy(e.scissor),I=e.scissorTest}else M.copy(U).multiplyScalar(z).floor(),P.copy(N).multiplyScalar(z).floor(),I=j;if(ee.bindFramebuffer(36160,i)&&J.drawBuffers&&r&&ee.drawBuffers(e,i),ee.viewport(M),ee.scissor(P),ee.setScissorTest(I),o){const r=re.get(e.texture);Se.framebufferTexture2D(36160,36064,34069+t,r.__webglTexture,n)}else if(a){const r=re.get(e.texture),i=t||0;Se.framebufferTextureLayer(36160,36064,r.__webglTexture,n||0,i)}B=-1},this.readRenderTargetPixels=function(e,t,n,r,i,o,a){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=re.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){ee.bindFramebuffer(36160,s);try{const a=e.texture,s=a.format,l=a.type;if(s!==S&&xe.convert(s)!==Se.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===C&&(K.has("EXT_color_buffer_half_float")||J.isWebGL2&&K.has("EXT_color_buffer_float"));if(!(l===x||xe.convert(l)===Se.getParameter(35738)||l===w&&(J.isWebGL2||K.has("OES_texture_float")||K.has("WEBGL_color_buffer_float"))||c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&Se.readPixels(t,n,r,i,xe.convert(s),xe.convert(l),o)}finally{const e=null!==T?re.get(T).__webglFramebuffer:null;ee.bindFramebuffer(36160,e)}}},this.copyFramebufferToTexture=function(e,t,n=0){const r=Math.pow(2,-n),i=Math.floor(t.image.width*r),o=Math.floor(t.image.height*r);ie.setTexture2D(t,0),Se.copyTexSubImage2D(3553,n,0,0,e.x,e.y,i,o),ee.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r=0){const i=t.image.width,o=t.image.height,a=xe.convert(n.format),s=xe.convert(n.type);ie.setTexture2D(n,0),Se.pixelStorei(37440,n.flipY),Se.pixelStorei(37441,n.premultiplyAlpha),Se.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?Se.texSubImage2D(3553,r,e.x,e.y,i,o,a,s,t.image.data):t.isCompressedTexture?Se.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,a,t.mipmaps[0].data):Se.texSubImage2D(3553,r,e.x,e.y,a,s,t.image),0===r&&n.generateMipmaps&&Se.generateMipmap(3553),ee.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r,i=0){if(v.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const o=e.max.x-e.min.x+1,a=e.max.y-e.min.y+1,s=e.max.z-e.min.z+1,l=xe.convert(r.format),c=xe.convert(r.type);let u;if(r.isData3DTexture)ie.setTexture3D(r,0),u=32879;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");ie.setTexture2DArray(r,0),u=35866}Se.pixelStorei(37440,r.flipY),Se.pixelStorei(37441,r.premultiplyAlpha),Se.pixelStorei(3317,r.unpackAlignment);const h=Se.getParameter(3314),f=Se.getParameter(32878),p=Se.getParameter(3316),d=Se.getParameter(3315),m=Se.getParameter(32877),g=n.isCompressedTexture?n.mipmaps[0]:n.image;Se.pixelStorei(3314,g.width),Se.pixelStorei(32878,g.height),Se.pixelStorei(3316,e.min.x),Se.pixelStorei(3315,e.min.y),Se.pixelStorei(32877,e.min.z),n.isDataTexture||n.isData3DTexture?Se.texSubImage3D(u,i,t.x,t.y,t.z,o,a,s,l,c,g.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Se.compressedTexSubImage3D(u,i,t.x,t.y,t.z,o,a,s,l,g.data)):Se.texSubImage3D(u,i,t.x,t.y,t.z,o,a,s,l,c,g),Se.pixelStorei(3314,h),Se.pixelStorei(32878,f),Se.pixelStorei(3316,p),Se.pixelStorei(3315,d),Se.pixelStorei(32877,m),0===i&&r.generateMipmaps&&Se.generateMipmap(u),ee.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?ie.setTextureCube(e,0):e.isData3DTexture?ie.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?ie.setTexture2DArray(e,0):ie.setTexture2D(e,0),ee.unbindTexture()},this.resetState=function(){A=0,E=0,T=null,ee.reset(),Ae.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class extends vo{}).prototype.isWebGL1Renderer=!0;class bo extends kt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.backgroundBlurriness=this.backgroundBlurriness),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class _o extends Ae{constructor(e=null,t=1,n=1,r,i,o,a,s,l=1003,c=1003,u,h){super(null,o,a,s,l,c,r,i,u,h),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class xo extends Ht{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}class Ao extends Vt{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ge(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const wo=new Be,Co=new Be,Eo=new it,So=new rt,To=new Ze;class Bo extends kt{constructor(e=new rn,t=new Ao){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)wo.fromBufferAttribute(t,e-1),Co.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=wo.distanceTo(Co);e.setAttribute("lineDistance",new Zt(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),To.copy(n.boundingSphere),To.applyMatrix4(r),To.radius+=i,!1===e.ray.intersectsSphere(To))return;Eo.copy(r).invert(),So.copy(e.ray).applyMatrix4(Eo);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,l=new Be,c=new Be,u=new Be,h=new Be,f=this.isLineSegments?2:1,p=n.index,d=n.attributes.position;if(null!==p)for(let n=Math.max(0,o.start),r=Math.min(p.count,o.start+o.count)-1;n<r;n+=f){const r=p.getX(n),i=p.getX(n+1);if(l.fromBufferAttribute(d,r),c.fromBufferAttribute(d,i),So.distanceSqToSegment(l,c,h,u)>s)continue;h.applyMatrix4(this.matrixWorld);const o=e.ray.origin.distanceTo(h);o<e.near||o>e.far||t.push({distance:o,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}else for(let n=Math.max(0,o.start),r=Math.min(d.count,o.start+o.count)-1;n<r;n+=f){if(l.fromBufferAttribute(d,n),c.fromBufferAttribute(d,n+1),So.distanceSqToSegment(l,c,h,u)>s)continue;h.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(h);r<e.near||r>e.far||t.push({distance:r,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}const ko=new Be,Mo=new Be;class Po extends Bo{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)ko.fromBufferAttribute(t,e),Mo.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+ko.distanceTo(Mo);e.setAttribute("lineDistance",new Zt(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Io extends Vt{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ge(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Oo=new it,Do=new rt,zo=new Ze,Lo=new Be;class Ro extends kt{constructor(e=new rn,t=new Io){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),zo.copy(n.boundingSphere),zo.applyMatrix4(r),zo.radius+=i,!1===e.ray.intersectsSphere(zo))return;Oo.copy(r).invert(),Do.copy(e.ray).applyMatrix4(Oo);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,l=n.index,c=n.attributes.position;if(null!==l)for(let n=Math.max(0,o.start),i=Math.min(l.count,o.start+o.count);n<i;n++){const i=l.getX(n);Lo.fromBufferAttribute(c,i),Fo(Lo,i,s,r,e,t,this)}else for(let n=Math.max(0,o.start),i=Math.min(c.count,o.start+o.count);n<i;n++)Lo.fromBufferAttribute(c,n),Fo(Lo,n,s,r,e,t,this)}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function Fo(e,t,n,r,i,o,a){const s=Do.distanceSqToPoint(e);if(s<n){const n=new Be;Do.closestPointToPoint(e,n),n.applyMatrix4(r);const l=i.ray.origin.distanceTo(n);if(l<i.near||l>i.far)return;o.push({distance:l,distanceToRay:Math.sqrt(s),point:n,index:t,face:null,object:a})}}class Uo extends Vt{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ge(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ge(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}function No(e,t,n){return Vo(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)}function jo(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function Vo(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}class Go{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let o;n:{r:if(!(e<r)){for(let o=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(i=r,r=t[++n],e<r)break t}o=t.length;break n}if(e>=i)break e;{const a=t[1];e<a&&(n=2,i=a);for(let o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===o)break;if(r=i,i=t[--n-1],e>=i)break t}o=n,n=0}}for(;n<o;){const r=n+o>>>1;e<t[r]?o=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let e=0;e!==r;++e)t[e]=n[i+e];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class qo extends Go{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:i=e,a=2*t-n;break;case 2402:i=r.length-2,a=t+r[i]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:o=e,s=2*n-t;break;case 2402:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(s-n),this._offsetPrev=i*c,this._offsetNext=o*c}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(n-t)/(r-t),d=p*p,m=d*p,g=-h*m+2*h*d-h*p,y=(1+h)*m+(-1.5-2*h)*d+(-.5+h)*p+1,v=(-1-f)*m+(1.5+f)*d+.5*p,b=f*m-f*d;for(let e=0;e!==a;++e)i[e]=g*o[c+e]+y*o[l+e]+v*o[s+e]+b*o[u+e];return i}}class Wo extends Go{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=(n-t)/(r-t),u=1-c;for(let e=0;e!==a;++e)i[e]=o[l+e]*u+o[s+e]*c;return i}}class Ho extends Go{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class $o{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=jo(t,this.TimeBufferType),this.values=jo(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:jo(e.times,Array),values:jo(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new Ho(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Wo(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new qo(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case D:t=this.InterpolantFactoryMethodDiscrete;break;case z:t=this.InterpolantFactoryMethodLinear;break;case L:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return D;case this.InterpolantFactoryMethodLinear:return z;case this.InterpolantFactoryMethodSmooth:return L}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,o=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);const e=this.getValueSize();this.times=No(n,i,o),this.values=No(this.values,i*e,o*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let t=0;t!==i;t++){const r=n[t];if("number"==typeof r&&isNaN(r)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,r),e=!1;break}if(null!==o&&o>r){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,r,o),e=!1;break}o=r}if(void 0!==r&&Vo(r))for(let t=0,n=r.length;t!==n;++t){const n=r[t];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,n),e=!1;break}}return e}optimize(){const e=No(this.times),t=No(this.values),n=this.getValueSize(),r=this.getInterpolation()===L,i=e.length-1;let o=1;for(let a=1;a<i;++a){let i=!1;const s=e[a];if(s!==e[a+1]&&(1!==a||s!==e[0]))if(r)i=!0;else{const e=a*n,r=e-n,o=e+n;for(let a=0;a!==n;++a){const n=t[e+a];if(n!==t[r+a]||n!==t[o+a]){i=!0;break}}}if(i){if(a!==o){e[o]=e[a];const r=a*n,i=o*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++o}}if(i>0){e[o]=e[i];for(let e=i*n,r=o*n,a=0;a!==n;++a)t[r+a]=t[e+a];++o}return o!==e.length?(this.times=No(e,0,o),this.values=No(t,0,o*n)):(this.times=e,this.values=t),this}clone(){const e=No(this.times,0),t=No(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}$o.prototype.TimeBufferType=Float32Array,$o.prototype.ValueBufferType=Float32Array,$o.prototype.DefaultInterpolation=z;class Xo extends $o{}Xo.prototype.ValueTypeName="bool",Xo.prototype.ValueBufferType=Array,Xo.prototype.DefaultInterpolation=D,Xo.prototype.InterpolantFactoryMethodLinear=void 0,Xo.prototype.InterpolantFactoryMethodSmooth=void 0;(class extends $o{}).prototype.ValueTypeName="color";(class extends $o{}).prototype.ValueTypeName="number";class Zo extends Go{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-t)/(r-t);let l=e*a;for(let e=l+a;l!==e;l+=4)Te.slerpFlat(i,0,o,l-a,o,l,s);return i}}class Yo extends $o{InterpolantFactoryMethodLinear(e){return new Zo(this.times,this.values,this.getValueSize(),e)}}Yo.prototype.ValueTypeName="quaternion",Yo.prototype.DefaultInterpolation=z,Yo.prototype.InterpolantFactoryMethodSmooth=void 0;class Ko extends $o{}Ko.prototype.ValueTypeName="string",Ko.prototype.ValueBufferType=Array,Ko.prototype.DefaultInterpolation=D,Ko.prototype.InterpolantFactoryMethodLinear=void 0,Ko.prototype.InterpolantFactoryMethodSmooth=void 0;(class extends $o{}).prototype.ValueTypeName="vector";const Jo={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class Qo{constructor(e,t,n){const r=this;let i,o=!1,a=0,s=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){s++,!1===o&&void 0!==r.onStart&&r.onStart(e,a,s),o=!0},this.itemEnd=function(e){a++,void 0!==r.onProgress&&r.onProgress(e,a,s),a===s&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return i?i(e):e},this.setURLModifier=function(e){return i=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}}const ea=new Qo;class ta{constructor(e){this.manager=void 0!==e?e:ea,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const na={};class ra extends Error{constructor(e,t){super(e),this.response=t}}class ia extends ta{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=Jo.get(e);if(void 0!==i)return this.manager.itemStart(e),setTimeout((()=>{t&&t(i),this.manager.itemEnd(e)}),0),i;if(void 0!==na[e])return void na[e].push({onLoad:t,onProgress:n,onError:r});na[e]=[],na[e].push({onLoad:t,onProgress:n,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,s=this.responseType;fetch(o).then((t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=na[e],r=t.body.getReader(),i=t.headers.get("Content-Length"),o=i?parseInt(i):0,a=0!==o;let s=0;const l=new ReadableStream({start(e){!function t(){r.read().then((({done:r,value:i})=>{if(r)e.close();else{s+=i.byteLength;const r=new ProgressEvent("progress",{lengthComputable:a,loaded:s,total:o});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(r)}e.enqueue(i),t()}}))}()}});return new Response(l)}throw new ra(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`,t)})).then((e=>{switch(s){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((e=>(new DOMParser).parseFromString(e,a)));case"json":return e.json();default:if(void 0===a)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(a),n=t&&t[1]?t[1].toLowerCase():void 0,r=new TextDecoder(n);return e.arrayBuffer().then((e=>r.decode(e)))}}})).then((t=>{Jo.add(e,t);const n=na[e];delete na[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onLoad&&r.onLoad(t)}})).catch((t=>{const n=na[e];if(void 0===n)throw this.manager.itemError(e),t;delete na[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}this.manager.itemError(e)})).finally((()=>{this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class oa extends ta{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=Jo.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;const a=oe("img");function s(){c(),Jo.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){c(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function c(){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",s,!1),a.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a}}class aa extends ta{constructor(e){super(e)}load(e,t,n,r){const i=new Ae,o=new oa(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}class sa extends rn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class la{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=ca(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=ca();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function ca(){return("undefined"==typeof performance?Date:performance).now()}const ua=new RegExp("[\\[\\]\\.:\\/]","g"),ha="[^\\[\\]\\.:\\/]",fa="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",pa=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",ha)+/(WCOD+)?/.source.replace("WCOD",fa)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",ha)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",ha)+"$"),da=["material","materials","bones","map"];class ma{constructor(e,t,n){this.path=t,this.parsedPath=n||ma.parseTrackName(t),this.node=ma.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new ma.Composite(e,t,n):new ma(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(ua,"")}static parseTrackName(e){const t=pa.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==da.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const o=n(i.children);if(o)return o}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=ma.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const o=e[r];if(void 0===o){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let a=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}ma.Composite=class{constructor(e,t,n){const r=n||ma.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},ma.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},ma.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},ma.prototype.GetterByBindingType=[ma.prototype._getValue_direct,ma.prototype._getValue_array,ma.prototype._getValue_arrayElement,ma.prototype._getValue_toArray],ma.prototype.SetterByBindingTypeAndVersioning=[[ma.prototype._setValue_direct,ma.prototype._setValue_direct_setNeedsUpdate,ma.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ma.prototype._setValue_array,ma.prototype._setValue_array_setNeedsUpdate,ma.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ma.prototype._setValue_arrayElement,ma.prototype._setValue_arrayElement_setNeedsUpdate,ma.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ma.prototype._setValue_fromArray,ma.prototype._setValue_fromArray_setNeedsUpdate,ma.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1),"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"146"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="146")}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={id:e,loaded:!1,exports:{}};return i[e].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}a.m=i,a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var i=Object.create(null);a.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&n;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>o[e]=()=>n[e]));return o.default=()=>n,a.d(i,o),i},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,n)=>(a.f[n](e,t),t)),[])),a.u=e=>"./"+e+".index.js",a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},r="kx-luna:",a.l=(e,t,i,o)=>{if(n[e])n[e].push(t);else{var s,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==e||h.getAttribute("data-webpack")==r+i){s=h;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",r+i),s.src=e),n[e]=[t];var f=(t,r)=>{s.onerror=s.onload=null,clearTimeout(p);var i=n[e];if(delete n[e],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((e=>e(r))),t)return t(r)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),l&&document.head.appendChild(s)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{var e={179:0};a.f.j=(t,n)=>{var r=a.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise(((n,i)=>r=e[t]=[n,i]));n.push(r[2]=i);var o=a.p+a.u(t),s=new Error;a.l(o,(n=>{if(a.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,r[1](s)}}),"chunk-"+t,t)}};var t=(t,n)=>{var r,i,[o,s,l]=n,c=0;if(o.some((t=>0!==e[t]))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);l&&l(a)}for(t&&t(n);c<o.length;c++)i=o[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.webpackChunkkx_luna=self.webpackChunkkx_luna||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{"use strict";a.p})(),(()=>{"use strict";var e={};a.r(e),a.d(e,{scaleBand:()=>Gs,scaleDiverging:()=>Yh,scaleDivergingLog:()=>Kh,scaleDivergingPow:()=>Qh,scaleDivergingSqrt:()=>ef,scaleDivergingSymlog:()=>Jh,scaleIdentity:()=>Ll,scaleImplicit:()=>js,scaleLinear:()=>zl,scaleLog:()=>Wl,scaleOrdinal:()=>Vs,scalePoint:()=>Ws,scalePow:()=>ec,scaleQuantile:()=>cc,scaleQuantize:()=>uc,scaleRadial:()=>ic,scaleSequential:()=>Vh,scaleSequentialLog:()=>Gh,scaleSequentialPow:()=>Wh,scaleSequentialQuantile:()=>$h,scaleSequentialSqrt:()=>Hh,scaleSequentialSymlog:()=>qh,scaleSqrt:()=>tc,scaleSymlog:()=>Zl,scaleThreshold:()=>hc,scaleTime:()=>Fh,scaleUtc:()=>Uh,tickFormat:()=>Ol});var t={};a.r(t),a.d(t,{LayersReducer:()=>Ff,LoaderReducer:()=>Yf,MapReducer:()=>Vf,PanelReducer:()=>Kr,PolygonManagerReducer:()=>ti,SearchReducer:()=>Df,TabsReducer:()=>Hf,TimesliderReducer:()=>Bf,default:()=>Jf});var n={};a.r(n),a.d(n,{activateLayer:()=>Rp,addLayer:()=>Fp,addLayerProperties:()=>jp,addLayerProperty:()=>Np,addPanel:()=>hp,addPolygonToManager:()=>Gp,addTab:()=>cp,addToSearch:()=>op,collapseLayers:()=>Dp,expandLayer:()=>zp,fetchRequest:()=>wp,hidePanels:()=>fp,loadPolygonManager:()=>Hp,loader:()=>xp,mapItem:()=>Cp,mapItemMoved:()=>Ep,mapItemSelected:()=>Sp,mapPan:()=>Bp,panMapTo:()=>Tp,panelLoading:()=>dp,pauseTimeslider:()=>ip,playTimeslider:()=>rp,pushWidgets:()=>mp,removeLayer:()=>Up,removePanel:()=>yp,removePolygonFromManager:()=>qp,removeTab:()=>up,search:()=>ap,searchClear:()=>Jp,searchLoading:()=>Yp,searchPhrase:()=>Xp,searchResults:()=>Zp,searchValue:()=>Kp,setLayers:()=>Pp,setMapDrawMode:()=>kp,setMapDrawSelected:()=>Mp,setModalVisibility:()=>bp,setPolygonManager:()=>Vp,setSearchSelected:()=>sp,setTimesliderPercent:()=>ep,setTimesliderRange:()=>Qf,showPanels:()=>pp,socketRequest:()=>_p,socketRequestLatest:()=>Ap,switchTab:()=>lp,test:()=>$p,toggleLayer:()=>Ip,toggleLayersCompact:()=>Op,toggleTimesliderGraph:()=>tp,toggleTimesliderPlay:()=>np,updateBitratePlot:()=>vp,updateLayerProperty:()=>Lp,updatePanel:()=>gp,updatePolygonAtManager:()=>Wp});var r={};a.r(r),a.d(r,{Bar:()=>km,ButtonWidget:()=>Em,ButtonsWidget:()=>Cm,DescriptionList:()=>vm,ExportToCSVButton:()=>ym,Flat:()=>wm,HeaderParagraphWidget:()=>Am,LoaderExample:()=>Sm,PanelHeader:()=>_m,ScatterPlot:()=>Tm,Spinner:()=>Bm,TextWidget:()=>xm,VerticalTable:()=>bm});var i={};a.r(i),a.d(i,{ApertureSlider:()=>m_,CheckboxesList:()=>h_,Dropdown:()=>p_,Graphs:()=>g_,RadioGroup:()=>c_,Rangeslider:()=>d_});var o=a(99477);function s(e,t){var n={};for(var r in e)n[r]=e[r];for(var i in t)n[i]=t[i];return n}function l(e,t,n,r){r=r||{},r=s({format:o.Y8D,type:o.VzW},r);var i=new o.IEO(n,e,t,r.format,r.type);return i.needsUpdate=!0,i.generateMipmaps=!1,i}function c(e,t,n,r){r=r||{};var i={uniforms:n,vertexShader:e,fragmentShader:t,transparent:!0,depthTest:!1,side:o.ehD,blending:o.Xaj,blendSrc:o.ghN,blendDst:o.LgZ,depthWrite:!1};return i=s(i,r),new o.jyz(i)}var u,h=a(17187),f=a.n(h),p=a(73466),d=a.n(p),m=!1;function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function y(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function A(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}function w(e,t){return w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},w(e,t)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=T(e);if(t){var i=T(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}document.onreadystatechange=function(){"complete"===document.readyState&&m&&((u=new(d())).showPanel(0),u.dom.style.position="fixed",u.dom.style.top="0px",document.body.appendChild(u.dom))};var B=function(e){A(n,e);var t=C(n);function n(e,r){var i;return b(this,n),i=t.call(this),e||console.error("LunaLayer cannot be initialized without DOM target"),i.container=document.getElementById(e),i.basemap=r,i.initialized=!1,i.loaderManager=new k,i.layers=[],i.activeLayers=[],i.loaderManager.on("loadProgress",(function(e){i.emit("loadProgress",e)})),i.loaderManager.on("loadError",(function(e){console.log("error loading resource: "+e)})),i}return x(n,[{key:"setActiveLayerId",value:function(e){this.activeLayers=[e]}},{key:"addLayer",value:function(e){var t=this;return e.on("ready",(function(){console.log("adding a layer"),e.id=t.layers.length,t.layers.push(e),e.bindToMap(t);var n,r=y(e.objects);try{for(r.s();!(n=r.n()).done;){var i=n.value;t.overlay.add(i)}}catch(e){r.e(e)}finally{r.f()}e.style.on("value-changed",(function(){t._handleLayerChanged(e)})),t.emit("layer-added",e),t.renderTick()})),e.init(),e}},{key:"removeLayer",value:function(e){("string"==typeof e||e instanceof String)&&(e=this.getLayerByName(e));var t=luna.layers.findIndex((function(t){return t.metadata.friendlyName==e.metadata.friendlyName}));t>=0?(this.emit("layer-removed",e),e.deinit(),console.log("layer deinit"),this.layers.splice(t,1),console.log("removed layer")):console.log("removeLayer: unable to find layer")}},{key:"getLayerByName",value:function(e){var t,n=y(this.layers);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.metadata.friendlyName==e)return r}}catch(e){n.e(e)}finally{n.f()}}},{key:"updateLayers",value:function(){var e,t=y(this.layers);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.style.view_size=this.overlay.zoom+2,n.style.view_correction=new o.FM8(0,0),n.style.view=this.overlay.view,n.update()}}catch(e){t.e(e)}finally{t.f()}}},{key:"_handleLayerChanged",value:function(e){2===this.options.render_timing&&this.requestRender()}},{key:"_initMap",value:function(e){this.map=this.basemap.initMap(e)}},{key:"_initOverlay",value:function(){var e=this;console.log("creating overlay"),this.overlay=this.basemap.initOverlay({render:function(){0!==e.options.render_timing&&2!=e.options.render_timing||e._render()},mousemove:function(t){e.emit("mousemove",t),e.renderTick()},click:function(t){e.emit("click",t),e.renderTick()}}),this.renderer=this.overlay.renderer,this.scene=this.overlay.scene,this.camera=this.overlay.camera}},{key:"requestRender",value:function(){2===this.render_timing&&this._render()}},{key:"start",value:function(e){console.log("luna booting");var t={show_stats:!0,render_timing:1,map_options:{container:this.container,start_lat:-27,start_lng:133,start_zoom:3}},n=window.location.hash;if(n.indexOf("loc")>=0){var r=n.substring(5).split(",");t.map_options.start_lat=parseFloat(r[0]),t.map_options.start_lng=parseFloat(r[1]),t.map_options.start_zoom=parseInt(r[2])}e=Object.assign(t,e),this.options=e,this._initMap(this.options.map_options),this._initOverlay(),this.resources={},console.log("loading"),this._load(),this.options.show_stats&&(m=!0),this.emit("ready"),this._render()}},{key:"renderTick",value:function(){var e=this;2===this.options.render_timing&&(this.overlay.animationFrame=requestAnimationFrame((function(){e._render()})))}},{key:"render",value:function(){!0===this.initialized&&(this.updateLayers(),this.emit("render"),this.renderer.render(this.scene,this.camera))}},{key:"_render",value:function(e){this.options.show_stats&&u&&u.begin(),this.render&&this.render(),0===this.options.render_timing?this.overlay.animationFrame=requestAnimationFrame(this.overlay.render):1===this.options.render_timing&&requestAnimationFrame(this._render.bind(this)),this.options.show_stats&&u&&u.end()}},{key:"_load",value:function(){var e=this;this.loadingManager=new o.lLk,this.textureLoader=new o.dpR(this.loadingManager),this.textureLoader.crossOrigin="",this.arrayLoader=new o.hH6(this.loadingManager),this.arrayLoader.setResponseType("arraybuffer"),this.jsonLoader=new o.hH6(this.loadingManager),this.jsonLoader.setResponseType("json"),this.loadingManager.onError=function(t){console.log("Error loading resource: "+t),e.emit("loadError",t)},this.loadingManager.onLoad=function(){e.emit("init"),e._init()},this.loadingManager.onProgress=function(t,n,r){e.emit("loadProgress",n/r),2===e.options.render_timing&&e.renderTick()},this.emit("loadResources")}},{key:"_init",value:function(){this.initialized=!0,console.log("component init")}},{key:"getCanvas",value:function(){return this.renderer.domElement()}}]),n}(f()),k=function(e){A(n,e);var t=C(n);function n(){var e;return b(this,n),(e=t.call(this)).loaders=[],e}return x(n,[{key:"getPercentComplete",value:function(){var e,t=[],n=y(this.loaders);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.percentComplete)}}catch(e){n.e(e)}finally{n.f()}var i=t.reduce((function(e,t){return e+t}));return i/t.length}},{key:"addLoader",value:function(e){var t=this;this.loaders.push(e),e.on("error",(function(n){t.emit("error",n,e)})),e.on("load",(function(){t.emit("load",e)})),e.on("loadProgress",(function(e,n,r){t.emit("loadProgress",t.getPercentComplete())}))}}]),n}(f()),M=function(e){A(n,e);var t=C(n);function n(e){var r;return b(this,n),(r=t.call(this)).crossOrigin="",r.manager=e,r.manager.addLoader(S(r)),r.completed=!1,r.percentComplete=0,r.loadingManager=new o.lLk,r.textureLoader=new o.dpR(r.loadingManager),r.textureLoader.crossOrigin=r.crossOrigin,r.arrayLoader=new o.hH6(r.loadingManager),r.arrayLoader.setResponseType("arraybuffer"),r.arrayLoader.crossOrigin=r.crossOrigin,r.jsonLoader=new o.hH6(r.loadingManager),r.jsonLoader.setResponseType("json"),r.jsonLoader.crossOrigin=r.crossOrigin,r.loadingManager.onError=function(e){console.log("Error loading resource: "+e),r.emit("loadError",e)},r.loadingManager.onLoad=function(){r.percentComplete=1,r.emit("load")},r.loadingManager.onProgress=function(e,t,n){r.percentComplete=t/n,r.emit("loadProgress",e,t,n)},r}return x(n)}(f());function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},O(e,t)}function D(e,t){if(t&&("object"===P(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function z(e){return z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},z(e)}var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(s,e);var t,n,r,i,o,a=(i=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=z(i);if(o){var n=z(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return D(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=a.call(this)).params=e,t}return t=s,n=[{key:"getData",value:function(){var e=this;switch(this.params.mode){case"IMMEDIATE":return this.buffers=this.params.buffers,this.metadata=this.params.metadata,this.assets=this.params.assets,this.emit("loadProgress",1),Promise.resolve(this);case"PATH":return new Promise((function(t,n){e._createLoaders(e.params.path),e.on("ready",(function(){t(e)}))}));default:return console.error("unknown bundle mode "+this.mode),Promise.reject("unknown bundle mode")}}},{key:"_createLoaders",value:function(e){var t=this;this.manager=this.manager||new k,this.loader=new M(this.manager),this.loader.on("loadProgress",(function(e,t,n){})),this.loader.on("load",(function(){t.emit("load"),t.emit("ready")})),this.loader.jsonLoader.load(e+".meta",(function(n){n.name=e,t.metadata=n,"local-precomputed"===t.metadata.pickingMode&&(t.loader.arrayLoader.load(e+".p",(function(e){t.pick_p=new Float32Array(e)})),t.loader.arrayLoader.load(e+".i",(function(e){t.pick_i=new Uint32Array(e)})))})),this.loader.arrayLoader.load(e,(function(e){t.buffers=[new Float32Array(e)]}))}}],r=[{key:"fromValues",value:function(e,t,n,r){return new s({metadata:t,buffers:n,assets:r,map:e,mode:"IMMEDIATE"})}},{key:"fromPath",value:function(e,t){var n=new s({path:t,mode:"PATH",map:e});return n.manager=e.loaderManager,n}}],n&&I(t.prototype,n),r&&I(t,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(f()),R=a(80344),F=a.n(R);function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var N=function(){function e(t){var n=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.points=t,this.keys=Object.keys(this.points).map((function(e){return parseFloat(e)})),this.keys.sort((function(e,t){return e-t})),this.x=[],this.y=[],this.xy=[],this.max_x=0,Object.keys(t).forEach((function(e){var r=parseFloat(e),i=t[e];n.x.push(r),n.y.push(i),n.xy.push([r,i]),r>n.max_x&&(n.max_x=r)})),this.interpolator=F()(this.xy)}var t,n,r;return t=e,r=[{key:"lerp",value:function(e,t,n){return n*t+(1-n)*e}}],(n=[{key:"_getKey",value:function(e){return e=Math.min(e,this.keys.length-1),e=Math.max(e,0),this.keys[e]}},{key:"_findKeyIndex",value:function(e){for(var t=null,n=1e16,r=0;r<this.keys.length;r++){var i=this.keys[r],o=Math.abs(i-e);o<n&&(t=r,n=o)}return t}},{key:"findKey",value:function(e){return this._getKey(this._findKeyIndex(e))}},{key:"getValue",value:function(e){return e=Math.min(e,this.max_x),this.interpolator(e)}}])&&U(t.prototype,n),r&&U(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t){return G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},G(e,t)}function q(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function W(e){return W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},W(e)}var H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G(e,t)}(c,e);var t,n,r,i,a,l=(t=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=W(t);if(n){var i=W(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return q(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=l.call(this)).layer=e,t._opacity=1,t._visible=!0,t._time=0,t._size=16,t._view_size=1,t.scale_curve=new N({4:.15,5:.15,10:.15,12:.25,14:.5,15:1}),t._view=new o.FM8(0,0),t._view_correction=new o.FM8(0,0),t.faderTarget=1,t.fader=1,t.ui_bindings={opacity:{type:"Rangeslider",value:t._opacity,min:0,max:1,step:.01,label:"opacity",binding:"style.opacity"},size:{type:"Rangeslider",value:t._size,min:.1,max:4,step:.01,label:"size",binding:"style.size"}},t}return r=c,i=[{key:"extend_ui_bindings",value:function(e){this.ui_bindings=s(this.ui_bindings,e)}},{key:"view_size",get:function(){return this._view_size},set:function(e){this._view_size=this.scale_curve.getValue(e)*window.devicePixelRatio,this.size=this._size}},{key:"view",get:function(){return this._view},set:function(e){this._view=e,this.setMaterialParam("view",e,!0)}},{key:"view_correction",get:function(){return this._view_correction},set:function(e){this._view_correction=e,this.setMaterialParam("view_correction",e,!0)}},{key:"size",get:function(){return this._size},set:function(e){this.setMaterialParam("size",e*this._view_size),this._size=e}},{key:"time",get:function(){return this._time},set:function(e){this.setMaterialParam("time",e),this.pushValueChange(this._time,e,"time")}},{key:"opacity",get:function(){return this._opacity},set:function(e){this.setMaterialParam("opacity",e*this.fader),this.pushValueChange(this._opacity,e,"opacity"),this._opacity=e}},{key:"pushValueChange",value:function(e,t,n){e!==t&&this.emit("value-changed",n,t,e)}},{key:"faderTick",value:function(){var e=this,t=this.faderTarget-this.fader;this.fader=this.fader+.33*t,this.opacity=this.opacity,Math.abs(t)<.01?(this.fader=this.faderTarget,this.opacity=this.opacity):setTimeout((function(){e.faderTick()}),10),this.layer.objects[0].visible=0!==this.fader}},{key:"visible",get:function(){return this._visible},set:function(e){this.faderTarget=1*e,this.faderTick(),this.pushValueChange(this._visible,e,"visible"),this._visible=e}},{key:"setMaterialParam",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0!==this.layer.objects[0]){var r=this.layer.objects[0].material.uniforms[e];if(void 0!==r)r.value=t;else{if(n)return;console.warn("setting undeclared uniform ".concat(e," of ").concat(this))}}}}],i&&V(r.prototype,i),a&&V(r,a),Object.defineProperty(r,"prototype",{writable:!1}),c}(f());function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t){return Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Z(e,t)}function Y(e,t){if(t&&("object"===$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function K(e){return K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},K(e)}var J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z(e,t)}(a,e);var t,n,r,i,o=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=K(r);if(i){var n=K(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Y(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this)).layer=e,t.init(),t}return t=a,(n=[{key:"init",value:function(){}},{key:"pick",value:function(e){console.error("pick not implemented")}},{key:"mouseOver",value:function(e){console.error("mouseOver not implemented")}},{key:"pickRange",value:function(e,t,n,r){console.error("pickRange not implemented")}}])&&X(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(f());function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e,t){return ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ne(e,t)}function re(e,t){if(t&&("object"===Q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ie(e){return ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ie(e)}var oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ne(e,t)}(a,e);var t,n,r,i,o=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ie(r);if(i){var n=ie(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return re(this,e)});function a(){return ee(this,a),o.apply(this,arguments)}return t=a,n=[{key:"init",value:function(){this.createBuffer()}},{key:"createBuffer",value:function(){var e=this.layer.buffers.position,t=e.length/3,n=[];this.lx=[],this.ly=[];for(var r=0;r<t;r++){var i=3*r,o=[e[i+0],e[i+1]];n.push(o)}this.buffer=n}},{key:"pick",value:function(e){for(var t=e.world.x,n=e.world.y,r=0,i=1e11,o=0;o<this.buffer.length;o+=1){var a=this.buffer[o],s=a[0],l=a[1],c=(s-t)*(s-t)+(l-n)*(l-n);c<i&&(r=o,i=c)}this.emit("object-selected",r)}}],n&&te(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(J);function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}function se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e,t){return ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ce(e,t)}function ue(e,t){if(t&&("object"===ae(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function he(e){return he=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},he(e)}var fe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ce(e,t)}(a,e);var t,n,r,i,o=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=he(r);if(i){var n=he(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ue(this,e)});function a(){return se(this,a),o.apply(this,arguments)}return t=a,n=[{key:"init",value:function(){}},{key:"pick",value:function(e){if(this.buffer=this.layer.getInterpolatedState(this.layer.factors.current,this.layer.factors.next,this.layer.factors.blend),this.buffer){for(var t=e.world.x,n=e.world.y,r=0,i=1e11,o=0;o<this.buffer.length;o+=4){var a=this.buffer[o],s=this.buffer[o+1],l=(a-t)*(a-t)+(s-n)*(s-n);l<i&&(r=o/4,i=l,window.nx=a,window.ny=s)}this.emit("object-selected",r)}}},{key:"mouseOver",value:function(e){if(this.buffer=this.layer.getInterpolatedState(this.layer.factors.current,this.layer.factors.next,this.layer.factors.blend),this.buffer){for(var t=e.world.x,n=e.world.y,r=0,i=1e11,o=0;o<this.buffer.length;o+=4){var a=this.buffer[o],s=this.buffer[o+1],l=(a-t)*(a-t)+(s-n)*(s-n);l<i&&(r=o/4,i=l,window.nx=a,window.ny=s)}this.emit("object-proximal",r)}}}],n&&le(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(J);function pe(e){return pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pe(e)}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ge(e,t){return ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ge(e,t)}function ye(e,t){if(t&&("object"===pe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ve(e)}function ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function be(e){return be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},be(e)}function _e(e,t,n){var r;console.log("_setGeometryAttribute",t,n),"f64"===t.gtype?(console.warn("Downcasting f64 to f32 for "+t.name+" of "+t.layer.name),r=new Float32Array(n)):"f32"===t.gtype?r=new Float32Array(n):"u32"===t.gtype?r=new Uint32Array(n):"u16"===t.gtype?r=new Uint16Array(n):console.error("Unknown gtype "+t.gtype+" for "+t.name+" of"+t.layer.name),"index"===t.name?e.setIndex(new o.TlE(r,t.stride)):e.setAttribute(t.name,new o.TlE(r,t.stride))}var xe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ge(e,t)}(l,e);var t,n,r,i,a,s=(i=l,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=be(i);if(a){var n=be(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ye(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=s.call(this)).metadata={vectors:[],pickingMode:"none"},t.fromBundle(e),t.objects=[],t.buffers={},t.style=new H(ve(t)),t.last_selection=null,t.annotations={},t.tooltips={},t}return t=l,n=[{key:"init",value:function(){!1===this.bundle_async&&this.emit("ready")}},{key:"deinit",value:function(){this.objects=[],this.buffers={},this.removeAllListeners(),delete this.style,delete this.pickingProvider}},{key:"fromBundle",value:function(e){var t=this;"null bundle"!==e?e.getData().then((function(n){t.metadata=e.metadata,t.buffers=e.buffers,t.assets=e.assets,t.pick_i=e.pick_i,t.pick_p=e.pick_p,t.bundle_async=!0,t.emit("ready")}),(function(t){console.error("failed resolving bundle: "+e)})):this.bundle_async=!1}},{key:"update",value:function(){}},{key:"onPointPicked",value:function(e){var t;console.log("onPointPicked",e);var n=void 0!==this.metadata.pickingIndex;n&&(t=this.metadata.pickingIndex[e]);var r={x:this.buffers.position[3*e],y:this.buffers.position[3*e+1]},i={location:{projected:r,latlong:this.map.overlay.p2l(r)},idx:e,tag:t,has_tag:n};this.last_selection=i,this._fireItemSelected(i)}},{key:"onPointProximal",value:function(e){var t,n=void 0!==this.metadata.pickingIndex;n&&(t=this.metadata.pickingIndex[e]);var r={x:this.buffers.position[3*e],y:this.buffers.position[3*e+1]},i={location:{projected:r,latlong:this.map.overlay.p2l(r)},idx:e,tag:t,has_tag:n};this.last_selection=i,this._fireItemProximal(i)}},{key:"isActive",value:function(){return this.map.activeLayers.includes(this.id)}},{key:"updateAnnotationForId",value:function(e,t){this.annotations[e]=t,this.tracked_index==e&&(window.anno.text=t,window.anno.sync())}},{key:"updateTooltipForId",value:function(e,t){this.tooltips[e]=t,this.proximal_index==e&&(window.tooltip.text=t,window.tooltip.sync())}},{key:"getDataAvailabilityGraph",value:function(){console.log("getDataAvailabilityGraph nyi")}},{key:"_fireItemSelected",value:function(e){this.isActive()&&(console.log("".concat(e.id," is now selected")),e.layer_id=this,this.emit("item-selected",e),window.cube,window.anno&&(this.annotations[e.id]&&(window.anno.text=this.annotations[e.id]),window.anno.sync()))}},{key:"updateSelectedObjectId",value:function(e){window.anno&&(this.annotations[pickEvent.id]&&(window.anno.text=this.annotations[pickEvent.id]),window.anno.sync())}},{key:"_fireItemProximal",value:function(e){this.isActive()&&(e.layer_id=this,this.emit("item-proximal",e),window.tooltip&&(this.tooltips[e.id]&&(window.tooltip.text=this.tooltips[e.id]),window.tooltip.sync()))}},{key:"bindToMap",value:function(e){var t=this;console.log("bindToMap",e),this.map=e,this.map.on("mousemove",(function(e){var n=e;t.mouseOverPoint(n)})),this.map.on("click",(function(e){var n=e;t.pickPoint(n)})),this.createObjects(),this.initPickingBuffer()}},{key:"initPickingBuffer",value:function(){var e=this;if("pickingMode"in this.metadata==0)return console.warn("metadata does not define picking mode"),void console.warn(this);switch(this.metadata.pickingMode){case"local-precomputed":case"local":this.pickingProvider=new oe(this);break;case"vtf":this.pickingProvider=new fe(this);break;case"none":break;default:console.warn("unsupported picking mode ".concat(this.metadata.pickingMode)),console.warn(this)}this.pickingProvider&&(this.pickingProvider.on("object-proximal",(function(t){e.onPointProximal(t)})),this.pickingProvider.on("object-selected",(function(t){e.onPointPicked(t)})))}},{key:"pickPoint",value:function(e){if(this.pickingProvider)return this.pickingProvider.pick(e);"none"!=this.metadata.pickingMode&&console.warn("No picking provider available on ".concat(this.metadata.name,".         Expecting ").concat(this.metadata.pickingMode))}},{key:"mouseOverPoint",value:function(e){if(this.pickingProvider)return this.pickingProvider.mouseOver(e);"none"!=this.metadata.pickingMode&&console.warn("No picking provider available on ".concat(this.metadata.name,".         Expecting ").concat(this.metadata.pickingMode))}},{key:"createObjects",value:function(){var e=l.createLayerGeometry(this),t={blending:o.WMw},n=l.createLayerObject(e,"circle_vs_solid","diffuse_fs_solid",{size:{type:"f",value:1},opacity:{type:"f",value:1},selectors:{type:"fv1",value:[1,1,1,1,1]},min_size:{type:"f",value:.01},multiplier:{type:"fv3",value:[1,1,1]},subscaler:{type:"f",value:0}},t);this.objects.push(n)}}],r=[{key:"createLayerObject",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=arguments.length>5?arguments[5]:void 0;a=a||o.woe;var s=c(t,n,r,i),l=new a(e,s);return l}},{key:"createLayerGeometry",value:function(e){var t,n=new o.u9r,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return de(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?de(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(e.metadata.vectors);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.layer=e.metadata;var a=e.buffers[0].subarray(i.offset,i.offset+i.size);_e(n,i,a),e.buffers[i.name]=a}}catch(e){r.e(e)}finally{r.f()}return e.arrays=[],n}}],n&&me(t.prototype,n),r&&me(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(f()),Ae=a(97702),we=a.n(Ae),Ce=a(39691),Ee=a.n(Ce),Se=a(64227),Te=a.n(Se),Be=a(97423),ke=a.n(Be),Me=a(28113),Pe=a.n(Me),Ie=a(24794),Oe=a.n(Ie),De=a(82331),ze=a.n(De),Le=a(62452),Re=a.n(Le),Fe=a(39825),Ue=a.n(Fe),Ne=a(59962),je=a.n(Ne),Ve=a(61250),Ge=a.n(Ve),qe=a(24700),We=a.n(qe);const He={vs:{circle_solid:we(),lightning:Ee(),dslam:Te(),nac:ke(),filled:Pe(),vtf:Oe()},fs:{diffuse_solid:ze(),lightning:Re(),dslam:Ue(),filled:je(),vtf:Ge(),line_solid:We()}};function $e(e){return $e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$e(e)}function Xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ze(e,t){return Ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ze(e,t)}function Ye(e,t){if(t&&("object"===$e(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ke(e){return Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ke(e)}var Je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ze(e,t)}(s,e);var t,n,r,i,a=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ke(r);if(i){var n=Ke(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ye(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=a.call(this,e)).style.size=48,t}return t=s,(n=[{key:"createObjects",value:function(){var e=xe.createLayerGeometry(this),t={size:{type:"f",value:10},opacity:{type:"f",value:1},selectors:{type:"fv1",value:[1,1,1,1,1]},min_size:{type:"f",value:.01},multiplier:{type:"fv3",value:[1,1,1]},subscaler:{type:"f",value:0},time:{type:"f",value:0},texSprite:{type:"t",value:window.textures.pin},time_aperture:{type:"f",value:.002},selected_dslam:{type:"f",value:-1}},n={blending:o.bdR},r=xe.createLayerObject(e,He.vs.dslam,He.fs.dslam,t,n);r.renderOrder=1,this.objects.push(r)}}])&&Xe(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(xe);function Qe(e){return Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qe(e)}function et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tt(e,t){return tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},tt(e,t)}function nt(e,t){if(t&&("object"===Qe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function rt(e){return rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},rt(e)}var it=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tt(e,t)}(s,e);var t,n,r,i,a=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=rt(r);if(i){var n=rt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return nt(this,e)});function s(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),a.call(this,e)}return t=s,n=[{key:"createObjects",value:function(){var e=xe.createLayerGeometry(this),t={size:{type:"f",value:.5},opacity:{type:"f",value:1},selectors:{type:"fv1",value:[1,1,1,1,1]},min_size:{type:"f",value:.01},multiplier:{type:"fv3",value:[1,1,1]},subscaler:{type:"f",value:0},texSprite:{type:"t",value:window.textures.dot}},n={blending:o.bdR};this.style.size=1,this.style.scale_curve=new N({4:1,5:1.5,8:3,13:7,15:15}),window.curve=this.style.scale_curve;var r=o.woe;"triangles"==this.metadata.geometryType&&(r=o.Kj0);var i=xe.createLayerObject(e,He.vs.circle_solid,He.fs.diffuse_solid,t,n,r);this.objects.push(i)}}],n&&et(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(xe);function ot(e){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ot(e)}function at(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function st(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lt(e,t,n){return t&&st(e.prototype,t),n&&st(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ct(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ut(e,t)}function ut(e,t){return ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ut(e,t)}function ht(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=dt(e);if(t){var i=dt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ft(this,n)}}function ft(e,t){if(t&&("object"===ot(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return pt(e)}function pt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dt(e){return dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},dt(e)}var mt=function(e){ct(n,e);var t=ht(n);function n(e){var r;return at(this,n),(r=t.call(this,e)).style=new gt(pt(r)),r.style.size=1.25,r.style.scale_curve=new N({4:1,5:1,13:4,15:6}),r}return lt(n,[{key:"createObjects",value:function(){var e=xe.createLayerGeometry(this),t={size:{type:"f",value:2.5},opacity:{type:"f",value:1},selectors:{type:"fv1",value:[1,1,1,1,1]},min_size:{type:"f",value:.01},multiplier:{type:"fv3",value:[1,1,1]},subscaler:{type:"f",value:0},time:{type:"f",value:0},texSprite:{type:"t",value:window.textures.dot},time_aperture:{type:"f",value:.002}},n={blending:o.WMw},r=xe.createLayerObject(e,He.vs.lightning,He.fs.lightning,t,n);this.objects.push(r)}}]),n}(xe),gt=function(e){ct(n,e);var t=ht(n);function n(e){var r;at(this,n),(r=t.call(this,e))._time_aperture=.002;var i={time_aperture:{type:"ApertureSlider",value:r._time_aperture,min:0,max:1,step:.001,label:"Time Aperture",binding:"style.time_aperture"}};return r.extend_ui_bindings(i),r}return lt(n,[{key:"time_aperture",get:function(){return this._time_aperture},set:function(e){this.setMaterialParam("time_aperture",e),this.pushValueChange(this._time_aperture,e,"time_aperture"),this._time_aperture=e}}]),n}(H);function yt(e){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yt(e)}function vt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bt(e,t){return bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},bt(e,t)}function _t(e,t){if(t&&("object"===yt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function xt(e){return xt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},xt(e)}var At=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bt(e,t)}(s,e);var t,n,r,i,a=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=xt(r);if(i){var n=xt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return _t(this,e)});function s(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),a.call(this,e)}return t=s,n=[{key:"createObjects",value:function(){var e=xe.createLayerGeometry(this),t={size:{type:"f",value:.5},opacity:{type:"f",value:1},selectors:{type:"fv1",value:[1,1,1,1,1]},min_size:{type:"f",value:.01},multiplier:{type:"fv3",value:[1,1,1]},subscaler:{type:"f",value:0},texSprite:{type:"t",value:window.textures.dot}},n={blending:o.WMw};this.style.size=.3,this.style.scale_curve=new N({4:1,16:16});var r=o.woe;"lines"==this.metadata.geometryType&&(r=o.ejS);var i=xe.createLayerObject(e,He.vs.circle_solid,He.fs.line_solid,t,n,r);i.frustumCulled=!1,this.objects.push(i)}}],n&&vt(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(xe);function wt(e){return wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wt(e)}function Ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Et(e,t){return Et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Et(e,t)}function St(e,t){if(t&&("object"===wt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Tt(e){return Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Tt(e)}var Bt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Et(e,t)}(s,e);var t,n,r,i,a=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Tt(r);if(i){var n=Tt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return St(this,e)});function s(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),a.call(this,e)}return t=s,n=[{key:"createObjects",value:function(){var e=xe.createLayerGeometry(this),t={size:{type:"f",value:.5},opacity:{type:"f",value:1},selectors:{type:"fv1",value:[1,1,1,1,1]},min_size:{type:"f",value:.01},multiplier:{type:"fv3",value:[1,1,1]},subscaler:{type:"f",value:0},texSprite:{type:"t",value:window.textures.dot}},n={blending:o.WMw};this.style.size=1,this.style.scale_curve=new N({4:1,5:1,13:2,15:4});var r=o.woe;"triangles"==this.metadata.geometryType&&(r=o.Kj0,console.log(this));var i=xe.createLayerObject(e,He.vs.circle_solid,He.fs.diffuse_solid,t,n,r);this.objects.push(i)}}],n&&Ct(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(xe);function kt(e){return kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kt(e)}function Mt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pt(e,t){return Pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Pt(e,t)}function It(e,t){if(t&&("object"===kt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ot(e){return Ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ot(e)}var Dt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pt(e,t)}(s,e);var t,n,r,i,o,a=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Ot(t);if(n){var i=Ot(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return It(this,e)});function s(e){var t;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,s),(t=a.call(this,e))._color_mode=0,t._selector_state=null;var n={selector:{type:"RadioGroup",label:"Data Field",value:"test",options:["LoopLenMeas","Corrected Anomaly"],binding:"style.selector_state"},color_mode:{type:"Rangeslider",value:t._color_mode,min:0,max:1,step:.1,label:"Output",binding:"style.color_mode"}};return t.extend_ui_bindings(n),t}return r=s,(i=[{key:"selector_state",get:function(){return this._selector_state},set:function(e){this._selector_state=e}},{key:"color_mode",get:function(){return this._color_mode},set:function(e){this.setMaterialParam("color_mode",e),this.pushValueChange(this._color_mode,e,"color_mode"),this._color_mode=e}}])&&Mt(r.prototype,i),o&&Mt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),s}(H);function zt(e){return zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zt(e)}function Lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rt(e,t){return Rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Rt(e,t)}function Ft(e,t){if(t&&("object"===zt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ut(e)}function Ut(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nt(e){return Nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Nt(e)}var jt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rt(e,t)}(s,e);var t,n,r,i,a=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Nt(r);if(i){var n=Nt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ft(this,e)});function s(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var r=new L.fromValues(e,{pickingMode:"none",vectors:[],friendlyName:t},[],null);return(n=a.call(this,r)).style=new H(Ut(n)),n}return t=s,n=[{key:"createObjects",value:function(){var e=new o.DvJ(1,1,1),t=new o.vBJ({color:"rgb(200,50,20)",transparent:!0}),n=new o.Kj0(e,t);n.position.set(234.51708984375,156.13525390625,0),n.scale.set(1.15/6,1.15/6,1.15/6),this.objects.push(n)}}],n&&Lt(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(xe);function Vt(e){return Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vt(e)}function Gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qt(e,t){return qt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},qt(e,t)}function Wt(e,t){if(t&&("object"===Vt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ht(e){return Ht=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ht(e)}var $t=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qt(e,t)}(s,e);var t,n,r,i,a=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ht(r);if(i){var n=Ht(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Wt(this,e)});function s(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),a.call(this,e)}return t=s,n=[{key:"createObjects",value:function(){var e=xe.createLayerGeometry(this),t={size:{type:"f",value:.5},opacity:{type:"f",value:1},selectors:{type:"fv1",value:[1,1,1,1,1]},min_size:{type:"f",value:.01},multiplier:{type:"fv3",value:[1,1,1]},subscaler:{type:"f",value:0},texSprite:{type:"t",value:window.textures.dot}},n={blending:o.bdR};this.style.size=1,this.style.scale_curve=new N({3:.5,4:1,13:1.5,14:2,15:4.5,18:6,19:10,20:35});var r=o.woe;"triangles"==this.metadata.geometryType&&(r=o.Kj0);var i=xe.createLayerObject(e,He.vs.circle_solid,He.fs.diffuse_solid,t,n,r);this.objects.push(i)}}],n&&Gt(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(xe);function Xt(e){return Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xt(e)}function Zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yt(e,t){return Yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Yt(e,t)}function Kt(e,t){if(t&&("object"===Xt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Jt(e){return Jt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Jt(e)}var Qt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yt(e,t)}(s,e);var t,n,r,i,a=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Jt(r);if(i){var n=Jt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Kt(this,e)});function s(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),a.call(this,e)}return t=s,n=[{key:"createObjects",value:function(){var e=xe.createLayerGeometry(this),t={size:{type:"f",value:.5},opacity:{type:"f",value:1},selectors:{type:"fv1",value:[1,1,1,1,1]},min_size:{type:"f",value:.01},multiplier:{type:"fv3",value:[1,1,1]},subscaler:{type:"f",value:0},texSprite:{type:"t",value:window.textures.poly_fill}},n={blending:o.WMw};this.style.size=.3,this.style.scale_curve=new N({4:1,16:16});var r=o.woe;"triangles"==this.metadata.geometryType&&(r=o.Kj0);var i=xe.createLayerObject(e,He.vs.filled,He.fs.filled,t,n,r);this.objects.push(i)}}],n&&Zt(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(xe);function en(e){return en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},en(e)}function tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nn(){return nn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=rn(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},nn.apply(this,arguments)}function rn(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sn(e)););return e}function on(e,t){return on=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},on(e,t)}function an(e,t){if(t&&("object"===en(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function sn(e){return sn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},sn(e)}var ln=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&on(e,t)}(s,e);var t,n,r,i,a=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=sn(r);if(i){var n=sn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return an(this,e)});function s(e,t,n){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(r=a.call(this,e,t)).videoUrl=n;var i=document.createElement("video");i.loop=!0,i.preload="auto",i.src="./assets/overlay_hd.mp4",i.load(),r.video=i;var l=document.createElement("canvas");l.width=2048,l.height=2048;var c=l.getContext("2d");r.videoImageContext=c,c.fillStyle="#000000",c.fillRect(0,0,l.width,l.height);var u=new o.xEZ(l);return u.minFilter=o.wem,u.magFilter=o.wem,r.texture=u,r}return t=s,n=[{key:"setFrame",value:function(e){this.video.pause(),this.video.currentTime=this.video.duration*e}},{key:"pause",value:function(){this.video.pause()}},{key:"play",value:function(e){this.video.playbackRate=e,this.video.play()}},{key:"update",value:function(){nn(sn(s.prototype),"update",this).call(this),this.video.readyState===this.video.HAVE_ENOUGH_DATA&&(this.videoImageContext.drawImage(this.video,0,0),this.texture&&(this.texture.needsUpdate=!0))}},{key:"createObjects",value:function(){var e=new o.DvJ(1,1,1),t=new o.vBJ({color:"rgb(255,255,255)",transparent:!0,map:this.texture}),n=new o.Kj0(e,t);n.rotation.set(0,0,Math.PI),n.position.set(224,144,0),n.scale.set(64,64,1),this.objects.push(n),this.style.visible=!1}}],n&&tn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(jt);function cn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var un=function(){function e(t,n,r,i,o,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elements_x=t,this.elements_y=n,this.geometry=null,this.scaler=r,this.offset=i,this.sprite=o,this.sprites=a}var t,n;return t=e,(n=[{key:"init",value:function(){this._initGeometry(),this._initMaterial();var e=new o.woe(this.geometry,this.material);return e.frustumCulled=!1,this.object=e,this.object}},{key:"_initMaterial",value:function(){console.log("PointMesh::initMaterial sprites",this.sprites);var e={uniforms:{size:{type:"f",value:1},time:{type:"f",value:0},opacity:{type:"f",value:1},texSprite:{type:"t",value:this.sprite},texSprite0:{type:"t",value:this.sprites[0]},texSprite1:{type:"t",value:this.sprites[1]},texSprite2:{type:"t",value:this.sprites[2]},texSprite3:{type:"t",value:this.sprites[3]},texSprite4:{type:"t",value:this.sprites[4]},texSprite5:{type:"t",value:this.sprites[5]},texSprite6:{type:"t",value:this.sprites[6]},texSprite7:{type:"t",value:this.sprites[7]},texSprite8:{type:"t",value:this.sprites[8]},texSprite9:{type:"t",value:this.sprites[9]},texSprite10:{type:"t",value:this.sprites[10]},texSprite11:{type:"t",value:this.sprites[11]},tex_lookup:{type:"t",value:window.textures.lookup},tex_attrib_1:{type:"t",value:null},tex_p_attrib_1:{type:"t",value:null},offset:{type:"v2",value:this.offset},time_aperture:{type:"f",value:.002},scaler:{type:"f",value:this.scaler},selected_index:{type:"f",value:0},handover_enabled:{type:"f",value:0}},vertexShader:He.vs.vtf,fragmentShader:He.fs.vtf,transparent:!0,depthTest:!1,side:o.Wl3,blending:o.Xaj,blendSrc:o.ghN,blendDst:o.LgZ,depthWrite:!1};this.material=new o.jyz(e)}},{key:"_initGeometry",value:function(){for(var e=[],t=0;t<this.elements_x;t++)for(var n=0;n<this.elements_y;n++){var r=t,i=n;e.push(new o.Pa4(r,i,0))}this.geometry=(new o.u9r).setFromPoints(e)}}])&&cn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function hn(e){return hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hn(e)}function fn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dn(e,t,n){return t&&pn(e.prototype,t),n&&pn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function mn(){return mn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=gn(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},mn.apply(this,arguments)}function gn(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=An(e)););return e}function yn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vn(e,t)}function vn(e,t){return vn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},vn(e,t)}function bn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=An(e);if(t){var i=An(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _n(this,n)}}function _n(e,t){if(t&&("object"===hn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return xn(e)}function xn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function An(e){return An=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},An(e)}var wn=function(e){yn(n,e);var t=bn(n);function n(e,r,i,a,s,l){var c;return fn(this,n),(c=t.call(this,"null bundle")).style=new Cn(xn(c)),c.style.size=1,c.style.scale_curve=new N({4:1,5:1,13:4,15:6}),c.sprite_textures=[],c.metadata.friendlyName="CTrace Locality"+a,c.metadata.pickingMode="vtf",window.vtf=xn(c),c.interpolated_state_cache_value="",c.tracked_index=-1,c.proximal_index=-1,c.clock=new o.SUY(!0),c.selected_location=null,c.selected_location_previous=null,c.mesh=r,c.stack=i,c.sprites=l,c.icon=s,window.vtfl=xn(c),c}return dn(n,[{key:"deinit",value:function(){mn(An(n.prototype),"deinit",this).call(this),delete this.stack}},{key:"onPointPicked",value:function(e){var t,n=void 0!==this.metadata.pickingIndex;n&&(t=this.metadata.pickingIndex[e]);var r={x:this.interpolated_state[4*e+0],y:this.interpolated_state[4*e+1]},i={location:{projected:r,latlong:this.map.overlay.p2l(r)},id:e,tag:t,has_tag:n};this.last_selection=i,this._fireItemSelected(i),this.tracked_index=e}},{key:"onPointProximal",value:function(e){var t,n=void 0!==this.metadata.pickingIndex;n&&(t=this.metadata.pickingIndex[e]);var r={x:this.interpolated_state[4*e+0],y:this.interpolated_state[4*e+1]},i={location:{projected:r,latlong:this.map.overlay.p2l(r)},id:e,tag:t,has_tag:n};this.last_selection=i,this._fireItemProximal(i),this.proximal_index=e}},{key:"getInterpolatedState",value:function(e,t,n){var r=this.stack.arrays[e],i=this.stack.arrays[t];if(r&&i){for(var o=new Float32Array(r.length),a=0;a<r.length;a++)o[a]=(1-n)*r[a]+n*i[a];return this.interpolated_state=o,this.interpolated_state}}},{key:"blendValue",value:function(e,t,n){return(1-n)*e+n*t}},{key:"getInterpolatedRecord",value:function(e,t,n,r){var i=this.stack.arrays[t],o=this.stack.arrays[n];if(i&&o){for(var a=new Float32Array(4),s=0;s<4;s++)a[s]=this.blendValue(i[e+s],o[e+s],r);return a}}},{key:"updatePointMesh",value:function(e){var t=this.stack.getFactors(e);this.mesh.material.uniforms.time.value=t.blend,this.mesh.material.uniforms.tex_attrib_1.value=this.stack.textures[t.current],this.mesh.material.uniforms.tex_p_attrib_1.value=this.stack.textures[t.next],this.factors=t,this.stack_current=t.current,this.stack_next=t.next}},{key:"_trackSelection",value:function(){if(null!==this.last_selection){if(null!==this.selected_location_previous){var e=Math.abs(this.selected_location.x-this.selected_location_previous.x),t=Math.abs(this.selected_location.y-this.selected_location_previous.y);if(e>=1e-8||t>=1e-8){var n=this.map.overlay.p2l(this.selected_location),r={location:{projected:this.selected_location,latlong:n}};this.emit("selection-moved",r)}}this.selected_location_previous=this.selected_location}}},{key:"update",value:function(){mn(An(n.prototype),"update",this).call(this);var e=this.clock.getElapsedTime();if(this.tracked_index>=0){var t=this.factors.current,r=this.factors.next,i=this.factors.blend;try{u=this.getInterpolatedRecord(4*this.tracked_index,t,r,i)}catch(e){console.log("warning: this.getInterpolatedRecord crashed, please report this error"),console.log(this.tracked_index),console.log(t),console.log(r),console.log(i)}var o=this.objects[0].material.uniforms.scaler.value,a=this.objects[0].material.uniforms.offset.value,s=u[0]*o+a.x,l=u[1]*o+a.y;this.selected_location={x:s,y:l},this.isActive()&&(window.cube.position.set(s,l,0),window.anno.position.set(s,l,0),window.anno.scale.x=5*window.luna.camera.scale.x,window.anno.scale.y=5*-window.luna.camera.scale.x);var c=7*window.luna.camera.scale.x;window.cube.scale.set(c,c,c),window.cube.material.opacity=.7+.2*Math.sin(15*e),this._trackSelection()}if(this.proximal_index>=0){var u,h=this.factors.current,f=this.factors.next,p=this.factors.blend;try{u=this.getInterpolatedRecord(4*this.proximal_index,h,f,p)}catch(e){console.log("warning: this.getInterpolatedRecord crashed, please report this error"),console.log(this.proximal_index),console.log(h),console.log(f),console.log(p)}var d=this.objects[0].material.uniforms.scaler.value,m=this.objects[0].material.uniforms.offset.value,g=u[0]*d+m.x,y=u[1]*d+m.y;this.selected_location={x:g,y},this.isActive()&&(window.tooltip.position.set(g,y,0),window.tooltip.scale.x=5*window.luna.camera.scale.x,window.tooltip.scale.y=5*-window.luna.camera.scale.x)}}},{key:"createObjects",value:function(){var e,t=this;if(this.icon&&(this.icon=this.icon.trim()),this.icon&&this.icon.startsWith("fa-")){var n=this.icon.trim().split(/\s+/),r=n[0],i=n[1];console.log("loading font awesome icon name="+r+" colour="+i),e=this.fontAwesomeIconAsTexture(r,i)}else if(this.icon&&""!=this.icon){var o="/modules/Luna/luna/assets/"+this.icon;e=this.map.textureLoader.load(o)}else e=window.textures.sprite;this.sprite_textures=this.sprites.map((function(e){console.log("VTFLayer.createObjects::processing sprite",e);var n=e.Descriptor;if(n&&(n=n.trim()),n&&n.startsWith("fa-")){var r=n.trim().split(/\s+/),i=r[0],o=r[1];return console.log("sprite: loading font awesome icon name="+i+" colour="+o),t.fontAwesomeIconAsTexture(i,o)}if(n&&""!=n){console.log("sprite: loading image asset icon name="+name+" path=/modules/Luna/luna/assets/"+n);var a="/modules/Luna/luna/assets/"+n;return t.map.textureLoader.load(a)}return console.log("sprite: loading default sprite"),window.textures.sprite})),console.log("VTFLayer.createObjects::sprite textures",this.sprite_textures),console.log("VTFLayer.createObjects::new PointMesh"),this.mesh=new un(256,256,this.scaler,this.offset,e,this.sprite_textures),this.stack=this.stack;var a=this.mesh.init();window.ants=a,this.objects.push(a),this.updatePointMesh(0),this.style.size=1,this.scaler=this.objects[0].material.uniforms.scaler.value,this.offset=this.objects[0].material.uniforms.offset.value}},{key:"getDataAvailabilityGraph",value:function(){console.log("request for graph",this.stack.times);var e=[],t=Math.min.apply(Math.min,Object.values(this.stack.times));return console.log("start is",t),Object.values(this.stack.times).forEach((function(n){return e.push({x:new Date(0).setUTCSeconds(n-t),y:1})})),console.log("ts is now",e),e}},{key:"fontAwesomeNameToUnicode",value:function(e){var t=document.createElement("i");t.className="fas ".concat(e),document.body.appendChild(t);var n=window.getComputedStyle(t,":before").content.replace(/'|"/g,"");return t.remove(),n.charCodeAt(0)}},{key:"fontAwesomeIconAsTexture",value:function(e,t){var n=document.createElement("canvas");n.height=128,n.width=128,document.body.appendChild(n);var r=n.getContext("2d");r.textBaseline="middle",r.textAlign="center",r.font="900 96px FontAwesome",r.fillStyle=t;var i=this.fontAwesomeNameToUnicode(e);r.fillText(String.fromCharCode(parseInt(i,10)),n.width/2,n.height/2);var a=new o.xEZ(n);return a.needsUpdate=!0,n.remove(),a}}]),n}(xe),Cn=function(e){yn(n,e);var t=bn(n);function n(e){return fn(this,n),t.call(this,e)}return dn(n)}(H);const En={DSLAMLayer:Je,ElectionLayer:it,LightningLayer:mt,LineSegmentLayer:At,AVCLayer:Bt,NACLayer:Dt,OverlayLayer:jt,PointCloudLayer:$t,PolygonLayer:Qt,VideoOverlayLayer:ln,VTFLayer:wn};a(62065);const Sn={ant:a.p+"69f337e8920ddb1d4cb6c266f2079efc.png",circle:a.p+"1a2307a60f93922f985097f145c77bba.png",dark_fish_skin:a.p+"a1cd0e2ea608636ecf8ecb1856611499.png",dot2:a.p+"21573563de7c61344631ecbaf1f591fd.png",light_quadratic:a.p+"afa38902b4e403c3e0ed6122206cbab9.png",lightning:a.p+"2b03ff4820aea9fd9f8f0ede760fe747.png",node_icon_pin_shaded:a.p+"494d14c70f6443c8eca15d356a4114be.png",tm_colormap:a.p+"f25f42cee4db5bb256a3438d90554f32.png"};for(var Tn={},Bn=0,kn=[{name:"cool",fallback:"#44acab",colors:["#6e40aa","#6154c8","#4c6edb","#368ce1","#24aad8","#1ac7c2","#1ddea3","#30ee83","#52f667","#7ef658"]},{name:"viridis",fallback:"#4a7d70",colors:["#440154","#482475","#414487","#355f8d","#2a788e","#21908d","#22a884","#42be71","#7ad151","#bddf26"]},{name:"inferno",fallback:"#95483f",colors:["#000004","#160b39","#420a68","#6a176e","#932667","#ba3655","#dd513a","#f3761b","#fca50a","#f6d746"]},{name:"magma",fallback:"#944664",colors:["#000004","#140e36","#3b0f70","#641a80","#8c2981","#b5367a","#de4968","#f66e5c","#fe9f6d","#fecf92"]},{name:"plasma",fallback:"#a84a73",colors:["#0d0887","#41049d","#6a00a8","#8f0da4","#b12a90","#cb4679","#e16462","#f1834c","#fca636","#fcce25"]},{name:"warm",fallback:"#d46d72",colors:["#6e40aa","#963db3","#bf3caf","#e3419e","#fe4b83","#ff5e64","#ff7747","#fb9633","#e2b72f","#c7d63c"]},{name:"spectral",fallback:"#c1a082",colors:["#9e0142","#d13b4b","#f0704a","#fcab63","#fedc8c","#fbf8b0","#e0f3a1","#aadda2","#69bda9","#4288b5"]},{name:"rainbow",fallback:"#90958a",colors:["#6e40aa","#be3caf","#fe4b83","#ff7747","#e3b62f","#b0ef5a","#53f666","#1edfa2","#23acd8","#4c6fdc"]},{name:"cubehelix",fallback:"#727374",colors:["#000000","#1a1530","#163d4e","#1f6642","#53792f","#a07949","#d07e93","#d09cd9","#c1caf3","#d2eeef"]},{name:"RdYlGn",fallback:"#bd9f63",colors:["#a50026","#d3322b","#f16d43","#fcab63","#fedc8c","#f9f7ae","#d7ee8e","#a4d86f","#64bc61","#23964f"]},{name:"RdYlBu",fallback:"#c49a90",colors:["#a50026","#d3322b","#f16d43","#fcab64","#fedc90","#faf8c0","#dcf1ec","#abd6e8","#76abd0","#4a74b4"]},{name:"PuBuGn",fallback:"#7eafc1",colors:["#fff7fb","#efe7f2","#dbd8ea","#bfc9e2","#98b9d9","#6aa8cf","#4096c0","#1987a0","#047877","#016353"]},{name:"YlGnBu",fallback:"#78aeb5",colors:["#ffffd9","#eff9bd","#d5efb3","#a9ddb7","#74c9bd","#46b4c2","#2897bf","#2073b2","#234ea0","#1d3185"]},{name:"GnBu",fallback:"#87c3c7",colors:["#f7fcf0","#e5f5df","#d4eece","#bde5bf","#9fd9bb","#7bcbc4","#58b7cd","#399cc6","#1e7eb7","#0b60a1"]},{name:"YlOrRd",fallback:"#f08b5a",colors:["#ffffcc","#fff1a9","#fee087","#fec966","#feab4b","#fd893c","#fa5c2e","#ec3023","#d31121","#af0225"]},{name:"YlOrBr",fallback:"#e6a257",colors:["#ffffe5","#fff8c4","#feeba2","#fed676","#febb4a","#fb9a2c","#ee7919","#d85b0a","#b74304","#8f3204"]},{name:"RdBu",fallback:"#a88d9a",colors:["#67001f","#ab202e","#d55f50","#f0a285","#fad6c3","#f2efee","#cde3ee","#90c2dd","#4b94c4","#2265a3"]},{name:"BuGn",fallback:"#7fc1a3",colors:["#f7fcfd","#e8f6f9","#d5efed","#b7e4da","#8fd4c1","#69c2a3","#49b17f","#2f995a","#157f3c","#036429"]},{name:"BuPu",fallback:"#a896c5",colors:["#f7fcfd","#e4eff5","#ccddec","#b2cae1","#9cb3d5","#8f95c6","#8c74b5","#8952a5","#852d8f","#730f71"]},{name:"PuBu",fallback:"#80abcd",colors:["#fff7fb","#efeaf4","#dbdaeb","#bfc9e2","#9cb9d9","#72a8cf","#4494c3","#1b7db6","#0668a1","#045281"]},{name:"RdPu",fallback:"#db79ad",colors:["#fff7f3","#fde4e1","#fccfcc","#fbb5bc","#f993b0","#f369a3","#e03f98","#c11889","#99037c","#710174"]},{name:"PuRd",fallback:"#d376a8",colors:["#f7f4f9","#eae3f0","#dcc9e2","#d0aad2","#d08ac2","#dd63ae","#e33890","#d71c6c","#b80b50","#8f023a"]},{name:"YlGn",fallback:"#88c282",colors:["#ffffe5","#f7fcc4","#e4f4ac","#c7e89b","#a2d88a","#78c578","#4eaf63","#2f944e","#15793f","#036034"]},{name:"OrRd",fallback:"#eb8f70",colors:["#fff7ec","#feebcf","#fddcaf","#fdca94","#fdb07a","#fa8e5d","#f16c49","#e04630","#c81e13","#a70403"]},{name:"PiYG",fallback:"#bf9f98",colors:["#8e0152","#c0267e","#dd72ad","#f0b2d6","#fadded","#f5f3ef","#e1f2ca","#b7de88","#81bb48","#4f9125"]},{name:"PRGn",fallback:"#95989d",colors:["#40004b","#722e80","#9a6daa","#c1a4cd","#e3d2e6","#eff0ef","#d6eed1","#a2d79f","#5dad65","#217939"]},{name:"PuOr",fallback:"#bb9283",colors:["#7f3b08","#b15a09","#dd841f","#f8b664","#fdddb2","#f3eeea","#d7d7e9","#b0aad0","#8170ad","#552d84"]},{name:"RdGy",fallback:"#b98987",colors:["#67001f","#ab202e","#d55f50","#f0a285","#fcd8c4","#faf4f0","#dfdfdf","#b8b8b8","#868686","#4e4e4e"]},{name:"BrBG",fallback:"#96a180",colors:["#543005","#8b530f","#bc8434","#ddbd7b","#f2e4bf","#eef1ea","#c3e7e2","#80c9bf","#399890","#0a675f"]}];Bn<kn.length;Bn++){var Mn=kn[Bn];Tn[Mn.name]=Mn.colors}const Pn=Tn;window.setLoaderState=function(e){var t="hidden";e&&(t="visible"),document.getElementById("load-indicator").style.visibility=t};var In=a(40219),On=a.n(In);function Dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ln=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.times={},this.textures={},this.arrays={}}return t=e,n=[{key:"setTexture",value:function(e,t){this.textures[t]=e}},{key:"getFactors",value:function(e){var t=Object.keys(this.textures).length-1,n=e,r=Math.floor(n*t);return{current:r,next:Math.min(r+1,t),blend:n*t-r}}}],r=[{key:"loadImageStack",value:function(t,n){var r,i=new e,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Dn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(n);try{var a=function(){var e=r.value;t.load(e.url,(function(t){var n=t;i.setTexture(n,e.index)}),(function(e){}),(function(t){console.log("texture stack error loading "+e.url),console.log(t)}))};for(o.s();!(r=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}return i}},{key:"loadDataStack",value:function(t,n,r,i){var a=new e,s=n.map(On()(20,(function(e){return new Promise((function(n){t.load(e.url,(function(t){console.log(t);var s=new Float32Array(t);console.log(s);var c=l(r,i,s,{format:o.wk1,type:o.VzW});a.setTexture(c,e.index),a.arrays[e.index]=s,n()}),(function(e){}),(function(t){console.log("loadDataStack: error loading "+e.url,t),n()}))}))})));return Promise.all(s).then((function(){return console.log("all loaded"),a}))}}],n&&zn(t.prototype,n),r&&zn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e;var t,n,r}();function Rn(e){return Rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rn(e)}function Fn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Un(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nn(e,t){return Nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Nn(e,t)}function jn(e,t){if(t&&("object"===Rn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Vn(e){return Vn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Vn(e)}var Gn=(new Date).getTime(),qn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nn(e,t)}(a,e);var t,n,r,i,o=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Vn(t);if(n){var i=Vn(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return jn(this,e)});function a(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return Fn(this,a),(t=o.call(this)).state_values={},t.throttle_rate=n,t.map=e,console.log(e),e.on("ready",(function(){e.overlay.on("bounds-changed",(function(e){t.update({bounds:e})}))})),t}return r=a,i=[{key:"push_state",value:function(){this.emit("update",this.state_values)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.state_values=Object.assign(this.state_values,e);var t=(new Date).getTime();t-Gn>=this.throttle_rate&&(this.push_state(),Gn=t)}}],i&&Un(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),a}(f()),Wn=a(67294);function Hn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$n(Object(n),!0).forEach((function(t){Hn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$n(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zn(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Yn="function"==typeof Symbol&&Symbol.observable||"@@observable",Kn=function(){return Math.random().toString(36).substring(7).split("").join(".")},Jn={INIT:"@@redux/INIT"+Kn(),REPLACE:"@@redux/REPLACE"+Kn(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Kn()}};function Qn(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function er(e,t){return function(){return t(e.apply(this,arguments))}}function tr(e,t){if("function"==typeof e)return er(e,t);if("object"!=typeof e||null===e)throw new Error(Zn(16));var n={};for(var r in e){var i=e[r];"function"==typeof i&&(n[r]=er(i,t))}return n}function nr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}var rr=a(12520),ir="SET_TIMESLIDER_RANGE",or="TOGGLE_TIMESLIDER_PLAY",ar="TOGGLE_TIMESLIDER_GRAPH",sr="SET_TIMESLIDER_PERCENT",lr="PAN_MAP_TO",cr="SET_MAP_DRAW_MODE",ur="SET_MAP_DRAW_SELECTED",hr="SET_LAYERS",fr="PLAY_TIMESLIDER",pr="PAUSE_TIMESLIDER",dr="ADD_PANEL",mr="PUSH_WIDGETS",gr="PANEL_LOADING",yr="HIDE_PANELS",vr="SHOW_PANELS",br="REMOVE_PANEL",_r="UPDATE_PANEL",xr="MAP_PAN",Ar="TOGGLE_LAYER",wr="TOGGLE_LAYERS_COMPACT",Cr="COLLAPSE_LAYERS",Er="EXPAND_LAYER",Sr="UPDATE_LAYER_PROPERTY",Tr="ACTIVATE_LAYER",Br="ADD_LAYER",kr="REMOVE_LAYER",Mr="ADD_LAYER_PROPERTY",Pr="ADD_LAYER_PROPERTIES",Ir="SET_POLYGON_MANAGER",Or="ADD_POLYGON_TO_MANAGER",Dr="REMOVE_POLYGON_FROM_MANAGER",zr="UPDATE_POLYGON_AT_MANAGER",Lr="MAP_ITEM",Rr="MAP_ITEM_MOVED",Fr="SWITCH_TAB",Ur="ADD_TAB",Nr="REMOVE_TAB",jr="SEARCH_PHRASE",Vr="SEARCH_RESULTS",Gr="SEARCH_LOADING",qr="SEARCH_VALUE",Wr="SEARCH_CLEAR",Hr="UPDATE_BITRATE_PLOT",$r="LOAD_POLYGON_TO_MAP";function Xr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xr(Object(n),!0).forEach((function(t){Yr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{id:"new",widgets:[{type:"TextWidget",props:{text:"This is a new panel."}}]}],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case dr:var n,r=t.payload,i=r.panel,o=r.id,a=r.index,s=[],l=!0;return e[a]&&o===e[a].id&&(l=!1),l?(a<(s=e.slice(0)).length&&s.splice(a,e.length),i&&(n=i,i.widgets||(n.widgets=[]),i.view&&(n.widgets=i.view(t.payload))),s.push(i)):(s=e.slice(0)).splice(a,e.length),s;case _r:var c=t.payload,u=c.index,h=c.widgets,f=c.view,p=c.id,d=c.loading;u>e.length&&console.log("attempted to update a panel on a non-existing index.");var m=e.slice(0);if(D(m,u),m[u]){var g=m[u].widgets.slice(0);m[u].lock?g.splice(m[u].lock,g.length):g=[];var y=[];return h&&(y=h),f&&(y=f(t.payload)),y=g.concat(y),m[u]=Zr(Zr({},m[u]),{},{id:p,widgets:y,loading:d}),m}return e;case gr:var v=t.payload,b=(v.tab,v.index),_=v.loading,x=e.slice(0);return x[b]=Zr(Zr({},x[b]),{},{loading:_}),x;case mr:var A=t.payload,w=A.index,C=A.widgets,E=A.view,S=A.id,T=A.loading,B=e.slice(0),k=B[w].widgets.slice(0),M=[];C&&(M=C),E&&(M=E(t.payload));var P=k.concat(M);return B[w]=Zr(Zr({},B[w]),{},{id:S,widgets:P,loading:T}),B;case br:var I=t.payload;if(e[I]){var O=e.slice(0);return e.length>I&&D(O,I),O.splice(I,1),O}return e;default:return e}function D(t,n){t.splice(n+1,e.length)}}function Jr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jr(Object(n),!0).forEach((function(t){ei(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ei(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ti(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{id:"Melbourne Bounding Box",type:"Feature",properties:{},geometry:{coordinates:[[[145.01772691796646,-37.75884128506529],[144.92056657861082,-37.75721269143056],[144.9222831923807,-37.83263320090652],[144.98648454736082,-37.86841741355107],[145.02836992333772,-37.82314204994604],[145.01772691796646,-37.75884128506529]]],type:"Polygon"}}],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ir:return t.payload;case Or:var n=e.slice(0);return n.push(t.payload),n;case Dr:var r=e.slice(0);return r.splice(t.payload,1),r;case zr:var i=e.slice(0);return i[t.payload.index]=Qr(Qr({},i[t.payload.index]),{},{id:t.payload.id}),i;default:return e}}function ni(e,t){let n,r;if(void 0===t)for(const t of e)null!=t&&(void 0===n?t>=t&&(n=r=t):(n>t&&(n=t),r<t&&(r=t)));else{let i=-1;for(let o of e)null!=(o=t(o,++i,e))&&(void 0===n?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}function ri(e,t){let n;if(void 0===t)for(const t of e)null!=t&&(n<t||void 0===n&&t>=t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function ii(e,t){let n;if(void 0===t)for(const t of e)null!=t&&(n>t||void 0===n&&t>=t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function oi(e){if(!(i=e.length))return[];for(var t=-1,n=ii(e,ai),r=new Array(n);++t<n;)for(var i,o=-1,a=r[t]=new Array(i);++o<i;)a[o]=e[o][t];return r}function ai(e){return e.length}var si=Array.prototype.slice;function li(e){return e}var ci=1e-6;function ui(e){return"translate("+e+",0)"}function hi(e){return"translate(0,"+e+")"}function fi(e){return t=>+e(t)}function pi(e,t){return t=Math.max(0,e.bandwidth()-2*t)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function di(){return!this.__axis}function mi(e,t){var n=[],r=null,i=null,o=6,a=6,s=3,l="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,c=1===e||4===e?-1:1,u=4===e||2===e?"x":"y",h=1===e||3===e?ui:hi;function f(f){var p=null==r?t.ticks?t.ticks.apply(t,n):t.domain():r,d=null==i?t.tickFormat?t.tickFormat.apply(t,n):li:i,m=Math.max(o,0)+s,g=t.range(),y=+g[0]+l,v=+g[g.length-1]+l,b=(t.bandwidth?pi:fi)(t.copy(),l),_=f.selection?f.selection():f,x=_.selectAll(".domain").data([null]),A=_.selectAll(".tick").data(p,t).order(),w=A.exit(),C=A.enter().append("g").attr("class","tick"),E=A.select("line"),S=A.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),A=A.merge(C),E=E.merge(C.append("line").attr("stroke","currentColor").attr(u+"2",c*o)),S=S.merge(C.append("text").attr("fill","currentColor").attr(u,c*m).attr("dy",1===e?"0em":3===e?"0.71em":"0.32em")),f!==_&&(x=x.transition(f),A=A.transition(f),E=E.transition(f),S=S.transition(f),w=w.transition(f).attr("opacity",ci).attr("transform",(function(e){return isFinite(e=b(e))?h(e+l):this.getAttribute("transform")})),C.attr("opacity",ci).attr("transform",(function(e){var t=this.parentNode.__axis;return h((t&&isFinite(t=t(e))?t:b(e))+l)}))),w.remove(),x.attr("d",4===e||2===e?a?"M"+c*a+","+y+"H"+l+"V"+v+"H"+c*a:"M"+l+","+y+"V"+v:a?"M"+y+","+c*a+"V"+l+"H"+v+"V"+c*a:"M"+y+","+l+"H"+v),A.attr("opacity",1).attr("transform",(function(e){return h(b(e)+l)})),E.attr(u+"2",c*o),S.attr(u,c*m).text(d),_.filter(di).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===e?"start":4===e?"end":"middle"),_.each((function(){this.__axis=b}))}return f.scale=function(e){return arguments.length?(t=e,f):t},f.ticks=function(){return n=si.call(arguments),f},f.tickArguments=function(e){return arguments.length?(n=null==e?[]:si.call(e),f):n.slice()},f.tickValues=function(e){return arguments.length?(r=null==e?null:si.call(e),f):r&&r.slice()},f.tickFormat=function(e){return arguments.length?(i=e,f):i},f.tickSize=function(e){return arguments.length?(o=a=+e,f):o},f.tickSizeInner=function(e){return arguments.length?(o=+e,f):o},f.tickSizeOuter=function(e){return arguments.length?(a=+e,f):a},f.tickPadding=function(e){return arguments.length?(s=+e,f):s},f.offset=function(e){return arguments.length?(l=+e,f):l},f}function gi(e){return mi(3,e)}function yi(){}function vi(e){return null==e?yi:function(){return this.querySelector(e)}}function bi(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function _i(){return[]}function xi(e){return null==e?_i:function(){return this.querySelectorAll(e)}}function Ai(e){return function(){return this.matches(e)}}function wi(e){return function(t){return t.matches(e)}}var Ci=Array.prototype.find;function Ei(){return this.firstElementChild}var Si=Array.prototype.filter;function Ti(){return this.children}function Bi(e){return new Array(e.length)}function ki(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function Mi(e){return function(){return e}}function Pi(e,t,n,r,i,o){for(var a,s=0,l=t.length,c=o.length;s<c;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new ki(e,o[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function Ii(e,t,n,r,i,o,a){var s,l,c,u=new Map,h=t.length,f=o.length,p=new Array(h);for(s=0;s<h;++s)(l=t[s])&&(p[s]=c=a.call(l,l.__data__,s,t)+"",u.has(c)?i[s]=l:u.set(c,l));for(s=0;s<f;++s)c=a.call(e,o[s],s,o)+"",(l=u.get(c))?(r[s]=l,l.__data__=o[s],u.delete(c)):n[s]=new ki(e,o[s]);for(s=0;s<h;++s)(l=t[s])&&u.get(p[s])===l&&(i[s]=l)}function Oi(e){return e.__data__}function Di(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}ki.prototype={constructor:ki,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var zi="http://www.w3.org/1999/xhtml";const Li={svg:"http://www.w3.org/2000/svg",xhtml:zi,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ri(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),Li.hasOwnProperty(t)?{space:Li[t],local:e}:e}function Fi(e){return function(){this.removeAttribute(e)}}function Ui(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ni(e,t){return function(){this.setAttribute(e,t)}}function ji(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Vi(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Gi(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function qi(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Wi(e){return function(){this.style.removeProperty(e)}}function Hi(e,t,n){return function(){this.style.setProperty(e,t,n)}}function $i(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Xi(e,t){return e.style.getPropertyValue(t)||qi(e).getComputedStyle(e,null).getPropertyValue(t)}function Zi(e){return function(){delete this[e]}}function Yi(e,t){return function(){this[e]=t}}function Ki(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Ji(e){return e.trim().split(/^|\s+/)}function Qi(e){return e.classList||new eo(e)}function eo(e){this._node=e,this._names=Ji(e.getAttribute("class")||"")}function to(e,t){for(var n=Qi(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function no(e,t){for(var n=Qi(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function ro(e){return function(){to(this,e)}}function io(e){return function(){no(this,e)}}function oo(e,t){return function(){(t.apply(this,arguments)?to:no)(this,e)}}function ao(){this.textContent=""}function so(e){return function(){this.textContent=e}}function lo(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function co(){this.innerHTML=""}function uo(e){return function(){this.innerHTML=e}}function ho(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function fo(){this.nextSibling&&this.parentNode.appendChild(this)}function po(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function mo(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===zi&&t.documentElement.namespaceURI===zi?t.createElement(e):t.createElementNS(n,e)}}function go(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function yo(e){var t=Ri(e);return(t.local?go:mo)(t)}function vo(){return null}function bo(){var e=this.parentNode;e&&e.removeChild(this)}function _o(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function xo(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ao(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function wo(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function Co(e,t,n){return function(){var r,i=this.__on,o=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=t);this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function Eo(e,t,n){var r=qi(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function So(e,t){return function(){return Eo(this,e,t)}}function To(e,t){return function(){return Eo(this,e,t.apply(this,arguments))}}eo.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Bo=[null];function ko(e,t){this._groups=e,this._parents=t}function Mo(){return new ko([[document.documentElement]],Bo)}ko.prototype=Mo.prototype={constructor:ko,select:function(e){"function"!=typeof e&&(e=vi(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=t[i],l=s.length,c=r[i]=new Array(l),u=0;u<l;++u)(o=s[u])&&(a=e.call(o,o.__data__,u,s))&&("__data__"in o&&(a.__data__=o.__data__),c[u]=a);return new ko(r,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);return null==t?[]:bi(t)}}(e):xi(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a,s=t[o],l=s.length,c=0;c<l;++c)(a=s[c])&&(r.push(e.call(a,a.__data__,c,s)),i.push(a));return new ko(r,i)},selectChild:function(e){return this.select(null==e?Ei:function(e){return function(){return Ci.call(this.children,e)}}("function"==typeof e?e:wi(e)))},selectChildren:function(e){return this.selectAll(null==e?Ti:function(e){return function(){return Si.call(this.children,e)}}("function"==typeof e?e:wi(e)))},filter:function(e){"function"!=typeof e&&(e=Ai(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,l=r[i]=[],c=0;c<s;++c)(o=a[c])&&e.call(o,o.__data__,c,a)&&l.push(o);return new ko(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,Oi);var n=t?Ii:Pi,r=this._parents,i=this._groups;"function"!=typeof e&&(e=Mi(e));for(var o=i.length,a=new Array(o),s=new Array(o),l=new Array(o),c=0;c<o;++c){var u=r[c],h=i[c],f=h.length,p=bi(e.call(u,u&&u.__data__,c,r)),d=p.length,m=s[c]=new Array(d),g=a[c]=new Array(d),y=l[c]=new Array(f);n(u,h,m,g,y,p,t);for(var v,b,_=0,x=0;_<d;++_)if(v=m[_]){for(_>=x&&(x=_+1);!(b=g[x])&&++x<d;);v._next=b||null}}return(a=new ko(a,r))._enter=s,a._exit=l,a},enter:function(){return new ko(this._enter||this._groups.map(Bi),this._parents)},exit:function(){return new ko(this._exit||this._groups.map(Bi),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof e?e(r):r.append(e+""),null!=t&&(i=t(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(e){if(!(e instanceof ko))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l,c=t[s],u=n[s],h=c.length,f=a[s]=new Array(h),p=0;p<h;++p)(l=c[p]||u[p])&&(f[p]=l);for(;s<r;++s)a[s]=t[s];return new ko(a,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=Di);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],l=s.length,c=i[o]=new Array(l),u=0;u<l;++u)(a=s[u])&&(c[u]=a);c.sort(t)}return new ko(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],a=0,s=o.length;a<s;++a)(i=o[a])&&e.call(i,i.__data__,a,o);return this},attr:function(e,t){var n=Ri(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?Ui:Fi:"function"==typeof t?n.local?Gi:Vi:n.local?ji:Ni)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?Wi:"function"==typeof t?$i:Hi)(e,t,null==n?"":n)):Xi(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?Zi:"function"==typeof t?Ki:Yi)(e,t)):this.node()[e]},classed:function(e,t){var n=Ji(e+"");if(arguments.length<2){for(var r=Qi(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?oo:t?ro:io)(n,t))},text:function(e){return arguments.length?this.each(null==e?ao:("function"==typeof e?lo:so)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?co:("function"==typeof e?ho:uo)(e)):this.node().innerHTML},raise:function(){return this.each(fo)},lower:function(){return this.each(po)},append:function(e){var t="function"==typeof e?e:yo(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:yo(e),r=null==t?vo:"function"==typeof t?t:vi(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(bo)},clone:function(e){return this.select(e?xo:_o)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=Ao(e+""),a=o.length;if(!(arguments.length<2)){for(s=t?Co:wo,r=0;r<a;++r)this.each(s(o[r],t,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(r=0,l=s[c];r<a;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?To:So)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,i=e[t],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};const Po=Mo;var Io={value:()=>{}};function Oo(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new Do(r)}function Do(e){this._=e}function zo(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function Lo(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function Ro(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Io,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}Do.prototype=Oo.prototype={constructor:Do,on:function(e,t){var n,r=this._,i=zo(e+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<a;)if(n=(e=i[o]).type)r[n]=Ro(r[n],e.name,t);else if(null==t)for(n in r)r[n]=Ro(r[n],e.name,null);return this}for(;++o<a;)if((n=(e=i[o]).type)&&(n=Lo(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Do(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};const Fo=Oo;var Uo,No,jo=0,Vo=0,Go=0,qo=0,Wo=0,Ho=0,$o="object"==typeof performance&&performance.now?performance:Date,Xo="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Zo(){return Wo||(Xo(Yo),Wo=$o.now()+Ho)}function Yo(){Wo=0}function Ko(){this._call=this._time=this._next=null}function Jo(e,t,n){var r=new Ko;return r.restart(e,t,n),r}function Qo(){Wo=(qo=$o.now())+Ho,jo=Vo=0;try{!function(){Zo(),++jo;for(var e,t=Uo;t;)(e=Wo-t._time)>=0&&t._call.call(null,e),t=t._next;--jo}()}finally{jo=0,function(){for(var e,t,n=Uo,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Uo=t);No=e,ta(r)}(),Wo=0}}function ea(){var e=$o.now(),t=e-qo;t>1e3&&(Ho-=t,qo=e)}function ta(e){jo||(Vo&&(Vo=clearTimeout(Vo)),e-Wo>24?(e<1/0&&(Vo=setTimeout(Qo,e-$o.now()-Ho)),Go&&(Go=clearInterval(Go))):(Go||(qo=$o.now(),Go=setInterval(ea,1e3)),jo=1,Xo(Qo)))}function na(e,t,n){var r=new Ko;return t=null==t?0:+t,r.restart((n=>{r.stop(),e(n+t)}),t,n),r}Ko.prototype=Jo.prototype={constructor:Ko,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Zo():+n)+(null==t?0:+t),this._next||No===this||(No?No._next=this:Uo=this,No=this),this._call=e,this._time=n,ta()},stop:function(){this._call&&(this._call=null,this._time=1/0,ta())}};var ra=Fo("start","end","cancel","interrupt"),ia=[];function oa(e,t,n,r,i,o){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function o(l){var c,u,h,f;if(1!==n.state)return s();for(c in i)if((f=i[c]).name===n.name){if(3===f.state)return na(o);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete i[c]):+c<t&&(f.state=6,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete i[c])}if(na((function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(l))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(h=n.tween.length),c=0,u=-1;c<h;++c)(f=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++u]=f);r.length=u+1}}function a(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(s),n.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(e,i);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){for(var r in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=Jo((function(e){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)}),0,n.time)}(e,n,{name:t,index:r,group:i,on:ra,tween:ia,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function aa(e,t){var n=la(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function sa(e,t){var n=la(e,t);if(n.state>3)throw new Error("too late; already running");return n}function la(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function ca(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var ua,ha=180/Math.PI,fa={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function pa(e,t,n,r,i,o){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*ha,skewX:Math.atan(l)*ha,scaleX:a,scaleY:s}}function da(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(o,a){var s=[],l=[];return o=e(o),a=e(a),function(e,r,i,o,a,s){if(e!==i||r!==o){var l=a.push("translate(",null,t,null,n);s.push({i:l-4,x:ca(e,i)},{i:l-2,x:ca(r,o)})}else(i||o)&&a.push("translate("+i+t+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,l),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:ca(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(o.rotate,a.rotate,s,l),function(e,t,n,o){e!==t?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:ca(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(o.skewX,a.skewX,s,l),function(e,t,n,r,o,a){if(e!==n||t!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:ca(e,n)},{i:s-2,x:ca(t,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,l),o=a=null,function(e){for(var t,n=-1,r=l.length;++n<r;)s[(t=l[n]).i]=t.x(e);return s.join("")}}}var ma=da((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?fa:pa(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),ga=da((function(e){return null==e?fa:(ua||(ua=document.createElementNS("http://www.w3.org/2000/svg","g")),ua.setAttribute("transform",e),(e=ua.transform.baseVal.consolidate())?pa((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):fa)}),", ",")",")");function ya(e,t){var n,r;return function(){var i=sa(this,e),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}i.tween=r}}function va(e,t,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=sa(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=s;break}l===c&&i.push(s)}o.tween=i}}function ba(e,t,n){var r=e._id;return e.each((function(){var e=sa(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return la(e,r).value[t]}}function _a(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function xa(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Aa(){}var wa=.7,Ca=1/wa,Ea="\\s*([+-]?\\d+)\\s*",Sa="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ta="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ba=/^#([0-9a-f]{3,8})$/,ka=new RegExp("^rgb\\("+[Ea,Ea,Ea]+"\\)$"),Ma=new RegExp("^rgb\\("+[Ta,Ta,Ta]+"\\)$"),Pa=new RegExp("^rgba\\("+[Ea,Ea,Ea,Sa]+"\\)$"),Ia=new RegExp("^rgba\\("+[Ta,Ta,Ta,Sa]+"\\)$"),Oa=new RegExp("^hsl\\("+[Sa,Ta,Ta]+"\\)$"),Da=new RegExp("^hsla\\("+[Sa,Ta,Ta,Sa]+"\\)$"),za={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function La(){return this.rgb().formatHex()}function Ra(){return this.rgb().formatRgb()}function Fa(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Ba.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Ua(t):3===n?new Ga(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Na(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Na(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=ka.exec(e))?new Ga(t[1],t[2],t[3],1):(t=Ma.exec(e))?new Ga(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Pa.exec(e))?Na(t[1],t[2],t[3],t[4]):(t=Ia.exec(e))?Na(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Oa.exec(e))?$a(t[1],t[2]/100,t[3]/100,1):(t=Da.exec(e))?$a(t[1],t[2]/100,t[3]/100,t[4]):za.hasOwnProperty(e)?Ua(za[e]):"transparent"===e?new Ga(NaN,NaN,NaN,0):null}function Ua(e){return new Ga(e>>16&255,e>>8&255,255&e,1)}function Na(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ga(e,t,n,r)}function ja(e){return e instanceof Aa||(e=Fa(e)),e?new Ga((e=e.rgb()).r,e.g,e.b,e.opacity):new Ga}function Va(e,t,n,r){return 1===arguments.length?ja(e):new Ga(e,t,n,null==r?1:r)}function Ga(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function qa(){return"#"+Ha(this.r)+Ha(this.g)+Ha(this.b)}function Wa(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function Ha(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function $a(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Za(e,t,n,r)}function Xa(e){if(e instanceof Za)return new Za(e.h,e.s,e.l,e.opacity);if(e instanceof Aa||(e=Fa(e)),!e)return new Za;if(e instanceof Za)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new Za(a,s,l,e.opacity)}function Za(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Ya(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Ka(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}_a(Aa,Fa,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:La,formatHex:La,formatHsl:function(){return Xa(this).formatHsl()},formatRgb:Ra,toString:Ra}),_a(Ga,Va,xa(Aa,{brighter:function(e){return e=null==e?Ca:Math.pow(Ca,e),new Ga(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?wa:Math.pow(wa,e),new Ga(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:qa,formatHex:qa,formatRgb:Wa,toString:Wa})),_a(Za,(function(e,t,n,r){return 1===arguments.length?Xa(e):new Za(e,t,n,null==r?1:r)}),xa(Aa,{brighter:function(e){return e=null==e?Ca:Math.pow(Ca,e),new Za(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?wa:Math.pow(wa,e),new Za(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Ga(Ya(e>=240?e-240:e+120,i,r),Ya(e,i,r),Ya(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));const Ja=e=>()=>e;function Qa(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):Ja(isNaN(e)?t:e)}const es=function e(t){var n=function(e){return 1==(e=+e)?Qa:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Ja(isNaN(t)?n:t)}}(t);function r(e,t){var r=n((e=Va(e)).r,(t=Va(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=Qa(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function ts(e){return function(t){var n,r,i=t.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=Va(t[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=e(o),a=e(a),s=e(s),r.opacity=1,function(e){return r.r=o(e),r.g=a(e),r.b=s(e),r+""}}}ts((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return Ka((n-r/t)*t,a,i,o,s)}})),ts((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return Ka((n-r/t)*t,i,o,a,s)}}));var ns=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,rs=new RegExp(ns.source,"g");function is(e,t){var n,r,i,o=ns.lastIndex=rs.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=ns.exec(e))&&(r=rs.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:ca(n,r)})),o=rs.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function os(e,t){var n;return("number"==typeof t?ca:t instanceof Fa?es:(n=Fa(t))?(t=n,es):is)(e,t)}function as(e){return function(){this.removeAttribute(e)}}function ss(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ls(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttribute(e);return a===o?null:a===r?i:i=t(r=a,n)}}function cs(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===r?i:i=t(r=a,n)}}function us(e,t,n){var r,i,o;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttribute(e))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,l));this.removeAttribute(e)}}function hs(e,t,n){var r,i,o;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,l));this.removeAttributeNS(e.space,e.local)}}function fs(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ps(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ds(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&ps(e,i)),n}return i._value=t,i}function ms(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&fs(e,i)),n}return i._value=t,i}function gs(e,t){return function(){aa(this,e).delay=+t.apply(this,arguments)}}function ys(e,t){return t=+t,function(){aa(this,e).delay=t}}function vs(e,t){return function(){sa(this,e).duration=+t.apply(this,arguments)}}function bs(e,t){return t=+t,function(){sa(this,e).duration=t}}function _s(e,t){if("function"!=typeof t)throw new Error;return function(){sa(this,e).ease=t}}function xs(e,t,n){var r,i,o=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?aa:sa;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}var As=Po.prototype.constructor;function ws(e){return function(){this.style.removeProperty(e)}}function Cs(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Es(e,t,n){var r,i;function o(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Cs(e,o,n)),r}return o._value=t,o}function Ss(e){return function(t){this.textContent=e.call(this,t)}}function Ts(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Ss(r)),t}return r._value=e,r}var Bs=0;function ks(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Ms(){return++Bs}var Ps=Po.prototype;ks.prototype=function(e){return Po().transition(e)}.prototype={constructor:ks,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=vi(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,l,c=r[a],u=c.length,h=o[a]=new Array(u),f=0;f<u;++f)(s=c[f])&&(l=e.call(s,s.__data__,f,c))&&("__data__"in s&&(l.__data__=s.__data__),h[f]=l,oa(h[f],t,n,f,h,la(s,n)));return new ks(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=xi(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var l,c=r[s],u=c.length,h=0;h<u;++h)if(l=c[h]){for(var f,p=e.call(l,l.__data__,h,c),d=la(l,n),m=0,g=p.length;m<g;++m)(f=p[m])&&oa(f,t,n,m,p,d);o.push(p),a.push(l)}return new ks(o,a,t,n)},filter:function(e){"function"!=typeof e&&(e=Ai(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,l=r[i]=[],c=0;c<s;++c)(o=a[c])&&e.call(o,o.__data__,c,a)&&l.push(o);return new ks(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l,c=t[s],u=n[s],h=c.length,f=a[s]=new Array(h),p=0;p<h;++p)(l=c[p]||u[p])&&(f[p]=l);for(;s<r;++s)a[s]=t[s];return new ks(a,this._parents,this._name,this._id)},selection:function(){return new As(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=Ms(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,c=0;c<l;++c)if(a=s[c]){var u=la(a,t);oa(a,e,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new ks(r,this._parents,e,n)},call:Ps.call,nodes:Ps.nodes,node:Ps.node,size:Ps.size,empty:Ps.empty,each:Ps.each,on:function(e,t){var n=this._id;return arguments.length<2?la(this.node(),n).on.on(e):this.each(xs(n,e,t))},attr:function(e,t){var n=Ri(e),r="transform"===n?ga:os;return this.attrTween(e,"function"==typeof t?(n.local?hs:us)(n,r,ba(this,"attr."+e,t)):null==t?(n.local?ss:as)(n):(n.local?cs:ls)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=Ri(e);return this.tween(n,(r.local?ds:ms)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?ma:os;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var o=Xi(this,e),a=(this.style.removeProperty(e),Xi(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}(e,r)).on("end.style."+e,ws(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,i,o;return function(){var a=Xi(this,e),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(e),l=s=Xi(this,e)),a===l?null:a===r&&l===i?o:(i=l,o=t(r=a,s))}}(e,r,ba(this,"style."+e,t))).each(function(e,t){var n,r,i,o,a="style."+t,s="end."+a;return function(){var l=sa(this,e),c=l.on,u=null==l.value[a]?o||(o=ws(t)):void 0;c===n&&i===u||(r=(n=c).copy()).on(s,i=u),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,o=n+"";return function(){var a=Xi(this,e);return a===o?null:a===r?i:i=t(r=a,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,Es(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(ba(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,Ts(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=la(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===e)return r.value;return null}return this.each((null==t?ya:va)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?gs:ys)(t,e)):la(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?vs:bs)(t,e)):la(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(_s(t,e)):la(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;sa(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var s={value:a},l={value:function(){0==--i&&o()}};n.each((function(){var n=sa(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t})),0===i&&o()}))},[Symbol.iterator]:Ps[Symbol.iterator]};var Is={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Os(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}Po.prototype.interrupt=function(e){return this.each((function(){!function(e,t){var n,r,i,o=e.__transition,a=!0;if(o){for(i in t=null==t?null:t+"",o)(n=o[i]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete e.__transition}}(this,e)}))},Po.prototype.transition=function(e){var t,n;e instanceof ks?(t=e._id,e=e._name):(t=Ms(),(n=Is).time=Zo(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,c=0;c<l;++c)(a=s[c])&&oa(a,e,t,c,s,n||Os(a,t));return new ks(r,this._parents,e,t)};const{abs:Ds,max:zs,min:Ls}=Math;function Rs(e){return{type:e}}function Fs(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(i);++r<i;)o[r]=e+r*n;return o}function Us(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function Ns(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}["w","e"].map(Rs),["n","s"].map(Rs),["n","w","e","s","nw","ne","sw","se"].map(Rs);const js=Symbol("implicit");function Vs(){var e=new Map,t=[],n=[],r=js;function i(i){var o=i+"",a=e.get(o);if(!a){if(r!==js)return r;e.set(o,a=t.push(i))}return n[(a-1)%n.length]}return i.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new Map;for(const r of n){const n=r+"";e.has(n)||e.set(n,t.push(r))}return i},i.range=function(e){return arguments.length?(n=Array.from(e),i):n.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return Vs(t,n).unknown(r)},Us.apply(i,arguments),i}function Gs(){var e,t,n=Vs().unknown(void 0),r=n.domain,i=n.range,o=0,a=1,s=!1,l=0,c=0,u=.5;function h(){var n=r().length,h=a<o,f=h?a:o,p=h?o:a;e=(p-f)/Math.max(1,n-l+2*c),s&&(e=Math.floor(e)),f+=(p-f-e*(n-l))*u,t=e*(1-l),s&&(f=Math.round(f),t=Math.round(t));var d=Fs(n).map((function(t){return f+e*t}));return i(h?d.reverse():d)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),h()):r()},n.range=function(e){return arguments.length?([o,a]=e,o=+o,a=+a,h()):[o,a]},n.rangeRound=function(e){return[o,a]=e,o=+o,a=+a,s=!0,h()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(s=!!e,h()):s},n.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),h()):l},n.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),h()):l},n.paddingOuter=function(e){return arguments.length?(c=+e,h()):c},n.align=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),h()):u},n.copy=function(){return Gs(r(),[o,a]).round(s).paddingInner(l).paddingOuter(c).align(u)},Us.apply(h(),arguments)}function qs(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return qs(t())},e}function Ws(){return qs(Gs.apply(null,arguments).paddingInner(1))}var Hs=Math.sqrt(50),$s=Math.sqrt(10),Xs=Math.sqrt(2);function Zs(e,t,n){var r,i,o,a,s=-1;if(n=+n,(e=+e)==(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(a=Ys(e,t,n))||!isFinite(a))return[];if(a>0){let n=Math.round(e/a),r=Math.round(t/a);for(n*a<e&&++n,r*a>t&&--r,o=new Array(i=r-n+1);++s<i;)o[s]=(n+s)*a}else{a=-a;let n=Math.round(e*a),r=Math.round(t*a);for(n/a<e&&++n,r/a>t&&--r,o=new Array(i=r-n+1);++s<i;)o[s]=(n+s)/a}return r&&o.reverse(),o}function Ys(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=Hs?10:o>=$s?5:o>=Xs?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=Hs?10:o>=$s?5:o>=Xs?2:1)}function Ks(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=Hs?i*=10:o>=$s?i*=5:o>=Xs&&(i*=2),t<e?-i:i}function Js(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Qs(e){let t=e,n=e;function r(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const o=r+i>>>1;n(e[o],t)<0?r=o+1:i=o}return r}return 1===e.length&&(t=(t,n)=>e(t)-n,n=function(e){return(t,n)=>Js(e(t),n)}(e)),{left:r,center:function(e,n,i,o){null==i&&(i=0),null==o&&(o=e.length);const a=r(e,n,i,o-1);return a>i&&t(e[a-1],n)>-t(e[a],n)?a-1:a},right:function(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const o=r+i>>>1;n(e[o],t)>0?i=o:r=o+1}return r}}}function el(e){return null===e?NaN:+e}const tl=Qs(Js),nl=tl.right,rl=(tl.left,Qs(el).center,nl);function il(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=ll(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=o[n](e);return a}}function ol(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function al(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=ll(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}function sl(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(n=0;n<r;++n)i[n]=e[n]*(1-o)+t[n]*o;return i}}function ll(e,t){var n,r,i=typeof t;return null==t||"boolean"===i?Ja(t):("number"===i?ca:"string"===i?(n=Fa(t))?(t=n,es):is:t instanceof Fa?es:t instanceof Date?ol:(r=t,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(t)?il:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?al:ca:sl))(e,t)}function cl(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function ul(e){return+e}var hl=[0,1];function fl(e){return e}function pl(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function dl(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=pl(i,r),o=n(a,o)):(r=pl(r,i),o=n(o,a)),function(e){return o(r(e))}}function ml(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=pl(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(t){var n=rl(e,t,1,r)-1;return o[n](i[n](t))}}function gl(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function yl(){var e,t,n,r,i,o,a=hl,s=hl,l=ll,c=fl;function u(){var e=Math.min(a.length,s.length);return c!==fl&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(a[0],a[e-1])),r=e>2?ml:dl,i=o=null,h}function h(t){return null==t||isNaN(t=+t)?n:(i||(i=r(a.map(e),s,l)))(e(c(t)))}return h.invert=function(n){return c(t((o||(o=r(s,a.map(e),ca)))(n)))},h.domain=function(e){return arguments.length?(a=Array.from(e,ul),u()):a.slice()},h.range=function(e){return arguments.length?(s=Array.from(e),u()):s.slice()},h.rangeRound=function(e){return s=Array.from(e),l=cl,u()},h.clamp=function(e){return arguments.length?(c=!!e||fl,u()):c!==fl},h.interpolate=function(e){return arguments.length?(l=e,u()):l},h.unknown=function(e){return arguments.length?(n=e,h):n},function(n,r){return e=n,t=r,u()}}function vl(){return yl()(fl,fl)}var bl,_l=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function xl(e){if(!(t=_l.exec(e)))throw new Error("invalid format: "+e);var t;return new Al({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function Al(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function wl(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Cl(e){return(e=wl(Math.abs(e)))?e[1]:NaN}function El(e,t){var n=wl(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}xl.prototype=Al.prototype,Al.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Sl={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>El(100*e,t),r:El,s:function(e,t){var n=wl(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(bl=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+wl(e,Math.max(0,t+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Tl(e){return e}var Bl,kl,Ml,Pl=Array.prototype.map,Il=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Ol(e,t,n,r){var i,o=Ks(e,t,n);switch((r=xl(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Cl(t)/3)))-Cl(Math.abs(e)))}(o,a))||(r.precision=i),Ml(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Cl(t)-Cl(e))+1}(o,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(e){return Math.max(0,-Cl(Math.abs(e)))}(o))||(r.precision=i-2*("%"===r.type))}return kl(r)}function Dl(e){var t=e.domain;return e.ticks=function(e){var n=t();return Zs(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return Ol(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i,o=t(),a=0,s=o.length-1,l=o[a],c=o[s],u=10;for(c<l&&(i=l,l=c,c=i,i=a,a=s,s=i);u-- >0;){if((i=Ys(l,c,n))===r)return o[a]=l,o[s]=c,t(o);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i}r=i}return e},e}function zl(){var e=vl();return e.copy=function(){return gl(e,zl())},Us.apply(e,arguments),Dl(e)}function Ll(e){var t;function n(e){return null==e||isNaN(e=+e)?t:e}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=Array.from(t,ul),n):e.slice()},n.unknown=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return Ll(e).unknown(t)},e=arguments.length?Array.from(e,ul):[0,1],Dl(n)}function Rl(e,t){var n,r=0,i=(e=e.slice()).length-1,o=e[r],a=e[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),e[r]=t.floor(o),e[i]=t.ceil(a),e}function Fl(e){return Math.log(e)}function Ul(e){return Math.exp(e)}function Nl(e){return-Math.log(-e)}function jl(e){return-Math.exp(-e)}function Vl(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Gl(e){return function(t){return-e(-t)}}function ql(e){var t,n,r=e(Fl,Ul),i=r.domain,o=10;function a(){return t=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}(o),n=function(e){return 10===e?Vl:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}(o),i()[0]<0?(t=Gl(t),n=Gl(n),e(Nl,jl)):e(Fl,Ul),r}return r.base=function(e){return arguments.length?(o=+e,a()):o},r.domain=function(e){return arguments.length?(i(e),a()):i()},r.ticks=function(e){var r,a=i(),s=a[0],l=a[a.length-1];(r=l<s)&&(f=s,s=l,l=f);var c,u,h,f=t(s),p=t(l),d=null==e?10:+e,m=[];if(!(o%1)&&p-f<d){if(f=Math.floor(f),p=Math.ceil(p),s>0){for(;f<=p;++f)for(u=1,c=n(f);u<o;++u)if(!((h=c*u)<s)){if(h>l)break;m.push(h)}}else for(;f<=p;++f)for(u=o-1,c=n(f);u>=1;--u)if(!((h=c*u)<s)){if(h>l)break;m.push(h)}2*m.length<d&&(m=Zs(s,l,d))}else m=Zs(f,p,Math.min(p-f,d)).map(n);return r?m.reverse():m},r.tickFormat=function(e,i){if(null==i&&(i=10===o?".0e":","),"function"!=typeof i&&(i=kl(i)),e===1/0)return i;null==e&&(e=10);var a=Math.max(1,o*e/r.ticks().length);return function(e){var r=e/n(Math.round(t(e)));return r*o<o-.5&&(r*=o),r<=a?i(e):""}},r.nice=function(){return i(Rl(i(),{floor:function(e){return n(Math.floor(t(e)))},ceil:function(e){return n(Math.ceil(t(e)))}}))},r}function Wl(){var e=ql(yl()).domain([1,10]);return e.copy=function(){return gl(e,Wl()).base(e.base())},Us.apply(e,arguments),e}function Hl(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function $l(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Xl(e){var t=1,n=e(Hl(t),$l(t));return n.constant=function(n){return arguments.length?e(Hl(t=+n),$l(t)):t},Dl(n)}function Zl(){var e=Xl(yl());return e.copy=function(){return gl(e,Zl()).constant(e.constant())},Us.apply(e,arguments)}function Yl(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Kl(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Jl(e){return e<0?-e*e:e*e}function Ql(e){var t=e(fl,fl),n=1;function r(){return 1===n?e(fl,fl):.5===n?e(Kl,Jl):e(Yl(n),Yl(1/n))}return t.exponent=function(e){return arguments.length?(n=+e,r()):n},Dl(t)}function ec(){var e=Ql(yl());return e.copy=function(){return gl(e,ec()).exponent(e.exponent())},Us.apply(e,arguments),e}function tc(){return ec.apply(null,arguments).exponent(.5)}function nc(e){return Math.sign(e)*e*e}function rc(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function ic(){var e,t=vl(),n=[0,1],r=!1;function i(n){var i=rc(t(n));return isNaN(i)?e:r?Math.round(i):i}return i.invert=function(e){return t.invert(nc(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain()},i.range=function(e){return arguments.length?(t.range((n=Array.from(e,ul)).map(nc)),i):n.slice()},i.rangeRound=function(e){return i.range(e).round(!0)},i.round=function(e){return arguments.length?(r=!!e,i):r},i.clamp=function(e){return arguments.length?(t.clamp(e),i):t.clamp()},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return ic(t.domain(),n).round(r).clamp(t.clamp()).unknown(e)},Us.apply(i,arguments),Dl(i)}function oc(e,t,n=0,r=e.length-1,i=Js){for(;r>n;){if(r-n>600){const o=r-n+1,a=t-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);oc(e,t,Math.max(n,Math.floor(t-a*l/o+c)),Math.min(r,Math.floor(t+(o-a)*l/o+c)),i)}const o=e[t];let a=n,s=r;for(ac(e,n,t),i(e[r],o)>0&&ac(e,n,r);a<s;){for(ac(e,a,s),++a,--s;i(e[a],o)<0;)++a;for(;i(e[s],o)>0;)--s}0===i(e[n],o)?ac(e,n,s):(++s,ac(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function ac(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function sc(e,t,n){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(yield t);else{let n=-1;for(let r of e)null!=(r=t(r,++n,e))&&(r=+r)>=r&&(yield r)}}(e,n)),r=e.length){if((t=+t)<=0||r<2)return ii(e);if(t>=1)return ri(e);var r,i=(r-1)*t,o=Math.floor(i),a=ri(oc(e,o).subarray(0,o+1));return a+(ii(e.subarray(o+1))-a)*(i-o)}}function lc(e,t,n=el){if(r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e);return a+(+n(e[o+1],o+1,e)-a)*(i-o)}}function cc(){var e,t=[],n=[],r=[];function i(){var e=0,i=Math.max(1,n.length);for(r=new Array(i-1);++e<i;)r[e-1]=lc(t,e/i);return o}function o(t){return null==t||isNaN(t=+t)?e:n[rl(r,t)]}return o.invertExtent=function(e){var i=n.indexOf(e);return i<0?[NaN,NaN]:[i>0?r[i-1]:t[0],i<r.length?r[i]:t[t.length-1]]},o.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(Js),i()},o.range=function(e){return arguments.length?(n=Array.from(e),i()):n.slice()},o.unknown=function(t){return arguments.length?(e=t,o):e},o.quantiles=function(){return r.slice()},o.copy=function(){return cc().domain(t).range(n).unknown(e)},Us.apply(o,arguments)}function uc(){var e,t=0,n=1,r=1,i=[.5],o=[0,1];function a(t){return null!=t&&t<=t?o[rl(i,t,0,r)]:e}function s(){var e=-1;for(i=new Array(r);++e<r;)i[e]=((e+1)*n-(e-r)*t)/(r+1);return a}return a.domain=function(e){return arguments.length?([t,n]=e,t=+t,n=+n,s()):[t,n]},a.range=function(e){return arguments.length?(r=(o=Array.from(e)).length-1,s()):o.slice()},a.invertExtent=function(e){var a=o.indexOf(e);return a<0?[NaN,NaN]:a<1?[t,i[0]]:a>=r?[i[r-1],n]:[i[a-1],i[a]]},a.unknown=function(t){return arguments.length?(e=t,a):a},a.thresholds=function(){return i.slice()},a.copy=function(){return uc().domain([t,n]).range(o).unknown(e)},Us.apply(Dl(a),arguments)}function hc(){var e,t=[.5],n=[0,1],r=1;function i(i){return null!=i&&i<=i?n[rl(t,i,0,r)]:e}return i.domain=function(e){return arguments.length?(t=Array.from(e),r=Math.min(t.length,n.length-1),i):t.slice()},i.range=function(e){return arguments.length?(n=Array.from(e),r=Math.min(t.length,n.length-1),i):n.slice()},i.invertExtent=function(e){var r=n.indexOf(e);return[t[r-1],t[r]]},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return hc().domain(t).range(n).unknown(e)},Us.apply(i,arguments)}Bl=function(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?Tl:(t=Pl.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,o=[],a=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(e.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?Tl:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(Pl.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function h(e){var t=(e=xl(e)).fill,n=e.align,h=e.sign,f=e.symbol,p=e.zero,d=e.width,m=e.comma,g=e.precision,y=e.trim,v=e.type;"n"===v?(m=!0,v="g"):Sl[v]||(void 0===g&&(g=12),y=!0,v="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var b="$"===f?i:"#"===f&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",_="$"===f?o:/[%p]/.test(v)?l:"",x=Sl[v],A=/[defgprs%]/.test(v);function w(e){var i,o,l,f=b,w=_;if("c"===v)w=x(e)+w,e="";else{var C=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:x(Math.abs(e),g),y&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),C&&0==+e&&"+"!==h&&(C=!1),f=(C?"("===h?h:c:"-"===h||"("===h?"":h)+f,w=("s"===v?Il[8+bl/3]:"")+w+(C&&"("===h?")":""),A)for(i=-1,o=e.length;++i<o;)if(48>(l=e.charCodeAt(i))||l>57){w=(46===l?a+e.slice(i+1):e.slice(i))+w,e=e.slice(0,i);break}}m&&!p&&(e=r(e,1/0));var E=f.length+e.length+w.length,S=E<d?new Array(d-E+1).join(t):"";switch(m&&p&&(e=r(S+e,S.length?d-w.length:1/0),S=""),n){case"<":e=f+e+w+S;break;case"=":e=f+S+e+w;break;case"^":e=S.slice(0,E=S.length>>1)+f+e+w+S.slice(E);break;default:e=S+f+e+w}return s(e)}return g=void 0===g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),w.toString=function(){return e+""},w}return{format:h,formatPrefix:function(e,t){var n=h(((e=xl(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(Cl(t)/3))),i=Math.pow(10,-r),o=Il[8+r/3];return function(e){return n(i*e)+o}}}}({thousands:",",grouping:[3],currency:["$",""]}),kl=Bl.format,Ml=Bl.formatPrefix;const fc=1e3,pc=6e4,dc=36e5,mc=864e5,gc=6048e5,yc=31536e6;var vc=new Date,bc=new Date;function _c(e,t,n,r){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=function(t){return e(t=new Date(+t)),t},i.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},i.round=function(e){var t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return s;do{s.push(a=new Date(+n)),t(n,o),e(n)}while(a<n&&n<r);return s},i.filter=function(n){return _c((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(i.count=function(t,r){return vc.setTime(+t),bc.setTime(+r),e(vc),e(bc),Math.floor(n(vc,bc))},i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?function(t){return r(t)%e==0}:function(t){return i.count(0,t)%e==0}):i:null}),i}var xc=_c((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));xc.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?_c((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):xc:null};const Ac=xc;xc.range;var wc=_c((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*fc)}),(function(e,t){return(t-e)/fc}),(function(e){return e.getUTCSeconds()}));const Cc=wc;wc.range;var Ec=_c((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*fc)}),(function(e,t){e.setTime(+e+t*pc)}),(function(e,t){return(t-e)/pc}),(function(e){return e.getMinutes()}));const Sc=Ec;Ec.range;var Tc=_c((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*fc-e.getMinutes()*pc)}),(function(e,t){e.setTime(+e+t*dc)}),(function(e,t){return(t-e)/dc}),(function(e){return e.getHours()}));const Bc=Tc;Tc.range;var kc=_c((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*pc)/mc),(e=>e.getDate()-1));const Mc=kc;function Pc(e){return _c((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*pc)/gc}))}kc.range;var Ic=Pc(0),Oc=Pc(1),Dc=Pc(2),zc=Pc(3),Lc=Pc(4),Rc=Pc(5),Fc=Pc(6),Uc=(Ic.range,Oc.range,Dc.range,zc.range,Lc.range,Rc.range,Fc.range,_c((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()})));const Nc=Uc;Uc.range;var jc=_c((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));jc.every=function(e){return isFinite(e=Math.floor(e))&&e>0?_c((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};const Vc=jc;jc.range;var Gc=_c((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*pc)}),(function(e,t){return(t-e)/pc}),(function(e){return e.getUTCMinutes()}));const qc=Gc;Gc.range;var Wc=_c((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*dc)}),(function(e,t){return(t-e)/dc}),(function(e){return e.getUTCHours()}));const Hc=Wc;Wc.range;var $c=_c((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/mc}),(function(e){return e.getUTCDate()-1}));const Xc=$c;function Zc(e){return _c((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/gc}))}$c.range;var Yc=Zc(0),Kc=Zc(1),Jc=Zc(2),Qc=Zc(3),eu=Zc(4),tu=Zc(5),nu=Zc(6),ru=(Yc.range,Kc.range,Jc.range,Qc.range,eu.range,tu.range,nu.range,_c((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()})));const iu=ru;ru.range;var ou=_c((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));ou.every=function(e){return isFinite(e=Math.floor(e))&&e>0?_c((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};const au=ou;function su(e,t,n,r,i,o){const a=[[Cc,1,fc],[Cc,5,5e3],[Cc,15,15e3],[Cc,30,3e4],[o,1,pc],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,dc],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,mc],[r,2,1728e5],[n,1,gc],[t,1,2592e6],[t,3,7776e6],[e,1,yc]];function s(t,n,r){const i=Math.abs(n-t)/r,o=Qs((([,,e])=>e)).right(a,i);if(o===a.length)return e.every(Ks(t/yc,n/yc,r));if(0===o)return Ac.every(Math.max(Ks(t,n,r),1));const[s,l]=a[i/a[o-1][2]<a[o][2]/i?o-1:o];return s.every(l)}return[function(e,t,n){const r=t<e;r&&([e,t]=[t,e]);const i=n&&"function"==typeof n.range?n:s(e,t,n),o=i?i.range(e,+t+1):[];return r?o.reverse():o},s]}ou.range;const[lu,cu]=su(au,iu,Yc,Xc,Hc,qc),[uu,hu]=su(Vc,Nc,Ic,Mc,Bc,Sc);function fu(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function pu(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function du(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var mu,gu,yu,vu={"-":"",_:" ",0:"0"},bu=/^\s*\d+/,_u=/^%/,xu=/[\\^$*+?|[\]().{}]/g;function Au(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function wu(e){return e.replace(xu,"\\$&")}function Cu(e){return new RegExp("^(?:"+e.map(wu).join("|")+")","i")}function Eu(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function Su(e,t,n){var r=bu.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Tu(e,t,n){var r=bu.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Bu(e,t,n){var r=bu.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function ku(e,t,n){var r=bu.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Mu(e,t,n){var r=bu.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Pu(e,t,n){var r=bu.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Iu(e,t,n){var r=bu.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Ou(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Du(e,t,n){var r=bu.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function zu(e,t,n){var r=bu.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Lu(e,t,n){var r=bu.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Ru(e,t,n){var r=bu.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Fu(e,t,n){var r=bu.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Uu(e,t,n){var r=bu.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Nu(e,t,n){var r=bu.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function ju(e,t,n){var r=bu.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Vu(e,t,n){var r=bu.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Gu(e,t,n){var r=_u.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function qu(e,t,n){var r=bu.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Wu(e,t,n){var r=bu.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Hu(e,t){return Au(e.getDate(),t,2)}function $u(e,t){return Au(e.getHours(),t,2)}function Xu(e,t){return Au(e.getHours()%12||12,t,2)}function Zu(e,t){return Au(1+Mc.count(Vc(e),e),t,3)}function Yu(e,t){return Au(e.getMilliseconds(),t,3)}function Ku(e,t){return Yu(e,t)+"000"}function Ju(e,t){return Au(e.getMonth()+1,t,2)}function Qu(e,t){return Au(e.getMinutes(),t,2)}function eh(e,t){return Au(e.getSeconds(),t,2)}function th(e){var t=e.getDay();return 0===t?7:t}function nh(e,t){return Au(Ic.count(Vc(e)-1,e),t,2)}function rh(e){var t=e.getDay();return t>=4||0===t?Lc(e):Lc.ceil(e)}function ih(e,t){return e=rh(e),Au(Lc.count(Vc(e),e)+(4===Vc(e).getDay()),t,2)}function oh(e){return e.getDay()}function ah(e,t){return Au(Oc.count(Vc(e)-1,e),t,2)}function sh(e,t){return Au(e.getFullYear()%100,t,2)}function lh(e,t){return Au((e=rh(e)).getFullYear()%100,t,2)}function ch(e,t){return Au(e.getFullYear()%1e4,t,4)}function uh(e,t){var n=e.getDay();return Au((e=n>=4||0===n?Lc(e):Lc.ceil(e)).getFullYear()%1e4,t,4)}function hh(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Au(t/60|0,"0",2)+Au(t%60,"0",2)}function fh(e,t){return Au(e.getUTCDate(),t,2)}function ph(e,t){return Au(e.getUTCHours(),t,2)}function dh(e,t){return Au(e.getUTCHours()%12||12,t,2)}function mh(e,t){return Au(1+Xc.count(au(e),e),t,3)}function gh(e,t){return Au(e.getUTCMilliseconds(),t,3)}function yh(e,t){return gh(e,t)+"000"}function vh(e,t){return Au(e.getUTCMonth()+1,t,2)}function bh(e,t){return Au(e.getUTCMinutes(),t,2)}function _h(e,t){return Au(e.getUTCSeconds(),t,2)}function xh(e){var t=e.getUTCDay();return 0===t?7:t}function Ah(e,t){return Au(Yc.count(au(e)-1,e),t,2)}function wh(e){var t=e.getUTCDay();return t>=4||0===t?eu(e):eu.ceil(e)}function Ch(e,t){return e=wh(e),Au(eu.count(au(e),e)+(4===au(e).getUTCDay()),t,2)}function Eh(e){return e.getUTCDay()}function Sh(e,t){return Au(Kc.count(au(e)-1,e),t,2)}function Th(e,t){return Au(e.getUTCFullYear()%100,t,2)}function Bh(e,t){return Au((e=wh(e)).getUTCFullYear()%100,t,2)}function kh(e,t){return Au(e.getUTCFullYear()%1e4,t,4)}function Mh(e,t){var n=e.getUTCDay();return Au((e=n>=4||0===n?eu(e):eu.ceil(e)).getUTCFullYear()%1e4,t,4)}function Ph(){return"+0000"}function Ih(){return"%"}function Oh(e){return+e}function Dh(e){return Math.floor(+e/1e3)}function zh(e){return new Date(e)}function Lh(e){return e instanceof Date?+e:+new Date(+e)}function Rh(e,t,n,r,i,o,a,s,l,c){var u=vl(),h=u.invert,f=u.domain,p=c(".%L"),d=c(":%S"),m=c("%I:%M"),g=c("%I %p"),y=c("%a %d"),v=c("%b %d"),b=c("%B"),_=c("%Y");function x(e){return(l(e)<e?p:s(e)<e?d:a(e)<e?m:o(e)<e?g:r(e)<e?i(e)<e?y:v:n(e)<e?b:_)(e)}return u.invert=function(e){return new Date(h(e))},u.domain=function(e){return arguments.length?f(Array.from(e,Lh)):f().map(zh)},u.ticks=function(t){var n=f();return e(n[0],n[n.length-1],null==t?10:t)},u.tickFormat=function(e,t){return null==t?x:c(t)},u.nice=function(e){var n=f();return e&&"function"==typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?f(Rl(n,e)):u},u.copy=function(){return gl(u,Rh(e,t,n,r,i,o,a,s,l,c))},u}function Fh(){return Us.apply(Rh(uu,hu,Vc,Nc,Ic,Mc,Bc,Sc,Cc,gu).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Uh(){return Us.apply(Rh(lu,cu,au,iu,Yc,Xc,Hc,qc,Cc,yu).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Nh(){var e,t,n,r,i,o=0,a=1,s=fl,l=!1;function c(t){return null==t||isNaN(t=+t)?i:s(0===n?.5:(t=(r(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}function u(e){return function(t){var n,r;return arguments.length?([n,r]=t,s=e(n,r),c):[s(0),s(1)]}}return c.domain=function(i){return arguments.length?([o,a]=i,e=r(o=+o),t=r(a=+a),n=e===t?0:1/(t-e),c):[o,a]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(s=e,c):s},c.range=u(ll),c.rangeRound=u(cl),c.unknown=function(e){return arguments.length?(i=e,c):i},function(i){return r=i,e=i(o),t=i(a),n=e===t?0:1/(t-e),c}}function jh(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Vh(){var e=Dl(Nh()(fl));return e.copy=function(){return jh(e,Vh())},Ns.apply(e,arguments)}function Gh(){var e=ql(Nh()).domain([1,10]);return e.copy=function(){return jh(e,Gh()).base(e.base())},Ns.apply(e,arguments)}function qh(){var e=Xl(Nh());return e.copy=function(){return jh(e,qh()).constant(e.constant())},Ns.apply(e,arguments)}function Wh(){var e=Ql(Nh());return e.copy=function(){return jh(e,Wh()).exponent(e.exponent())},Ns.apply(e,arguments)}function Hh(){return Wh.apply(null,arguments).exponent(.5)}function $h(){var e=[],t=fl;function n(n){if(null!=n&&!isNaN(n=+n))return t((rl(e,n,1)-1)/(e.length-1))}return n.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(Js),n},n.interpolator=function(e){return arguments.length?(t=e,n):t},n.range=function(){return e.map(((n,r)=>t(r/(e.length-1))))},n.quantiles=function(t){return Array.from({length:t+1},((n,r)=>sc(e,r/t)))},n.copy=function(){return $h(t).domain(e)},Ns.apply(n,arguments)}function Xh(e,t){void 0===t&&(t=e,e=ll);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return o[t](e-t)}}function Zh(){var e,t,n,r,i,o,a,s=0,l=.5,c=1,u=1,h=fl,f=!1;function p(e){return isNaN(e=+e)?a:(e=.5+((e=+o(e))-t)*(u*e<u*t?r:i),h(f?Math.max(0,Math.min(1,e)):e))}function d(e){return function(t){var n,r,i;return arguments.length?([n,r,i]=t,h=Xh(e,[n,r,i]),p):[h(0),h(.5),h(1)]}}return p.domain=function(a){return arguments.length?([s,l,c]=a,e=o(s=+s),t=o(l=+l),n=o(c=+c),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),u=t<e?-1:1,p):[s,l,c]},p.clamp=function(e){return arguments.length?(f=!!e,p):f},p.interpolator=function(e){return arguments.length?(h=e,p):h},p.range=d(ll),p.rangeRound=d(cl),p.unknown=function(e){return arguments.length?(a=e,p):a},function(a){return o=a,e=a(s),t=a(l),n=a(c),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),u=t<e?-1:1,p}}function Yh(){var e=Dl(Zh()(fl));return e.copy=function(){return jh(e,Yh())},Ns.apply(e,arguments)}function Kh(){var e=ql(Zh()).domain([.1,1,10]);return e.copy=function(){return jh(e,Kh()).base(e.base())},Ns.apply(e,arguments)}function Jh(){var e=Xl(Zh());return e.copy=function(){return jh(e,Jh()).constant(e.constant())},Ns.apply(e,arguments)}function Qh(){var e=Ql(Zh());return e.copy=function(){return jh(e,Qh()).exponent(e.exponent())},Ns.apply(e,arguments)}function ef(){return Qh.apply(null,arguments).exponent(.5)}function tf(e){return"string"==typeof e?new ko([[document.querySelector(e)]],[document.documentElement]):new ko([[e]],Bo)}mu=function(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,s=e.months,l=e.shortMonths,c=Cu(i),u=Eu(i),h=Cu(o),f=Eu(o),p=Cu(a),d=Eu(a),m=Cu(s),g=Eu(s),y=Cu(l),v=Eu(l),b={a:function(e){return a[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:Hu,e:Hu,f:Ku,g:lh,G:uh,H:$u,I:Xu,j:Zu,L:Yu,m:Ju,M:Qu,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Oh,s:Dh,S:eh,u:th,U:nh,V:ih,w:oh,W:ah,x:null,X:null,y:sh,Y:ch,Z:hh,"%":Ih},_={a:function(e){return a[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:fh,e:fh,f:yh,g:Bh,G:Mh,H:ph,I:dh,j:mh,L:gh,m:vh,M:bh,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Oh,s:Dh,S:_h,u:xh,U:Ah,V:Ch,w:Eh,W:Sh,x:null,X:null,y:Th,Y:kh,Z:Ph,"%":Ih},x={a:function(e,t,n){var r=p.exec(t.slice(n));return r?(e.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=h.exec(t.slice(n));return r?(e.w=f.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=y.exec(t.slice(n));return r?(e.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return C(e,t,n,r)},d:Lu,e:Lu,f:Vu,g:Iu,G:Pu,H:Fu,I:Fu,j:Ru,L:ju,m:zu,M:Uu,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=u.get(r[0].toLowerCase()),n+r[0].length):-1},q:Du,Q:qu,s:Wu,S:Nu,u:Tu,U:Bu,V:ku,w:Su,W:Mu,x:function(e,t,r){return C(e,n,t,r)},X:function(e,t,n){return C(e,r,t,n)},y:Iu,Y:Pu,Z:Ou,"%":Gu};function A(e,t){return function(n){var r,i,o,a=[],s=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===e.charCodeAt(s)&&(a.push(e.slice(l,s)),null!=(i=vu[r=e.charAt(++s)])?r=e.charAt(++s):i="e"===r?" ":"0",(o=t[r])&&(r=o(n,i)),a.push(r),l=s+1);return a.push(e.slice(l,s)),a.join("")}}function w(e,t){return function(n){var r,i,o=du(1900,void 0,1);if(C(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(t&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=pu(du(o.y,0,1))).getUTCDay(),r=i>4||0===i?Kc.ceil(r):Kc(r),r=Xc.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=fu(du(o.y,0,1))).getDay(),r=i>4||0===i?Oc.ceil(r):Oc(r),r=Mc.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?pu(du(o.y,0,1)).getUTCDay():fu(du(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,pu(o)):fu(o)}}function C(e,t,n,r){for(var i,o,a=0,s=t.length,l=n.length;a<s;){if(r>=l)return-1;if(37===(i=t.charCodeAt(a++))){if(i=t.charAt(a++),!(o=x[i in vu?t.charAt(a++):i])||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=A(n,b),b.X=A(r,b),b.c=A(t,b),_.x=A(n,_),_.X=A(r,_),_.c=A(t,_),{format:function(e){var t=A(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=w(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=A(e+="",_);return t.toString=function(){return e},t},utcParse:function(e){var t=w(e+="",!0);return t.toString=function(){return e},t}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),gu=mu.format,mu.parse,yu=mu.utcFormat,mu.utcParse;const nf=Math.PI,rf=2*nf,of=1e-6,af=rf-of;function sf(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function lf(){return new sf}sf.prototype=lf.prototype={constructor:sf,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,o){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-e,l=r-t,c=o-e,u=a-t,h=c*c+u*u;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(h>of)if(Math.abs(u*s-l*c)>of&&i){var f=n-o,p=r-a,d=s*s+l*l,m=f*f+p*p,g=Math.sqrt(d),y=Math.sqrt(h),v=i*Math.tan((nf-Math.acos((d+h-m)/(2*g*y)))/2),b=v/y,_=v/g;Math.abs(b-1)>of&&(this._+="L"+(e+b*c)+","+(t+b*u)),this._+="A"+i+","+i+",0,0,"+ +(u*f>c*p)+","+(this._x1=e+_*s)+","+(this._y1=t+_*l)}else this._+="L"+(this._x1=e)+","+(this._y1=t)},arc:function(e,t,n,r,i,o){e=+e,t=+t,o=!!o;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),l=e+a,c=t+s,u=1^o,h=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>of||Math.abs(this._y1-c)>of)&&(this._+="L"+l+","+c),n&&(h<0&&(h=h%rf+rf),h>af?this._+="A"+n+","+n+",0,1,"+u+","+(e-a)+","+(t-s)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):h>of&&(this._+="A"+n+","+n+",0,"+ +(h>=nf)+","+u+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};const cf=lf;function uf(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function hf(e){return function(){return e}}function ff(e){this._context=e}function pf(e){return new ff(e)}function df(e){return e[0]}function mf(e){return e[1]}function gf(e,t){var n=hf(!0),r=null,i=pf,o=null;function a(a){var s,l,c,u=(a=uf(a)).length,h=!1;for(null==r&&(o=i(c=cf())),s=0;s<=u;++s)!(s<u&&n(l=a[s],s,a))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+e(l,s,a),+t(l,s,a));if(c)return o=null,c+""||null}return e="function"==typeof e?e:void 0===e?df:hf(e),t="function"==typeof t?t:void 0===t?mf:hf(t),a.x=function(t){return arguments.length?(e="function"==typeof t?t:hf(+t),a):e},a.y=function(e){return arguments.length?(t="function"==typeof e?e:hf(+e),a):t},a.defined=function(e){return arguments.length?(n="function"==typeof e?e:hf(!!e),a):n},a.curve=function(e){return arguments.length?(i=e,null!=r&&(o=i(r)),a):i},a.context=function(e){return arguments.length?(null==e?r=o=null:o=i(r=e),a):r},a}function yf(e,t,n){var r=null,i=hf(!0),o=null,a=pf,s=null;function l(l){var c,u,h,f,p,d=(l=uf(l)).length,m=!1,g=new Array(d),y=new Array(d);for(null==o&&(s=a(p=cf())),c=0;c<=d;++c){if(!(c<d&&i(f=l[c],c,l))===m)if(m=!m)u=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=c-1;h>=u;--h)s.point(g[h],y[h]);s.lineEnd(),s.areaEnd()}m&&(g[c]=+e(f,c,l),y[c]=+t(f,c,l),s.point(r?+r(f,c,l):g[c],n?+n(f,c,l):y[c]))}if(p)return s=null,p+""||null}function c(){return gf().defined(i).curve(a).context(o)}return e="function"==typeof e?e:void 0===e?df:hf(+e),t="function"==typeof t?t:hf(void 0===t?0:+t),n="function"==typeof n?n:void 0===n?mf:hf(+n),l.x=function(t){return arguments.length?(e="function"==typeof t?t:hf(+t),r=null,l):e},l.x0=function(t){return arguments.length?(e="function"==typeof t?t:hf(+t),l):e},l.x1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:hf(+e),l):r},l.y=function(e){return arguments.length?(t="function"==typeof e?e:hf(+e),n=null,l):t},l.y0=function(e){return arguments.length?(t="function"==typeof e?e:hf(+e),l):t},l.y1=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:hf(+e),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(e){return arguments.length?(i="function"==typeof e?e:hf(!!e),l):i},l.curve=function(e){return arguments.length?(a=e,null!=o&&(s=a(o)),l):a},l.context=function(e){return arguments.length?(null==e?o=s=null:s=a(o=e),l):o},l}function vf(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function bf(e,t){this._context=e,this._k=(1-t)/6}Array.prototype.slice,ff.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},bf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:vf(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:vf(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const _f=function e(t){function n(e){return new bf(e,t)}return n.tension=function(t){return e(+t)},n}(0);function xf(e,t,n){this.k=e,this.x=t,this.y=n}function Af(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Af(Object(n),!0).forEach((function(t){Cf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Af(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}xf.prototype={constructor:xf,scale:function(e){return 1===e?this:new xf(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new xf(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new xf(1,0,0),xf.prototype;var Ef=new Date("January 1, 2022 9:00:00"),Sf=new Date("January 2, 2022 21:00:00");function Tf(e,t){var n=[e,t];return Fh().domain(n).range([0,1])}function Bf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{start:Ef,end:Sf,value:new Date("January 1, 2022 9:00:00"),timescale:Tf(Ef,Sf),percent:0,graphs:{},timeseries:[],play:!1,playbackrate:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ir:var n=t.payload,r=n.start,i=n.end,o=Tf(e.start,e.end),a=Tf(r,i),s=o.invert(e.percent),l=1==e.percent?1:a(s);return console.log("reducer",e.percent,s,l,a.invert(l)),l=Math.round(1e5*l)/1e5,wf(wf({},e),{},{start:r,end:i,timescale:a,percent:l,value:a.invert(l)});case sr:var c=t.payload,u=c.percent,h=c.playbackrate;return wf(wf({},e),{},{value:e.timescale.invert(u),percent:u,playbackrate:h||0});case ar:var f=t.payload,p=f.id,d=f.path,m=e.timeseries.slice(0);if(e.graphs[p]){m.splice(m.indexOf(p),1);var g=Object.assign({},e.graphs);return delete g[p],wf(wf({},e),{},{graphs:g,timeseries:m})}return m.push(p),wf(wf({},e),{},{graphs:wf(wf({},e.graphs),{},Cf({},p,{id:p,path:d})),timeseries:m});case or:return wf(wf({},e),{},{play:!e.play,playbackrate:0});case fr:return wf(wf({},e),{},{play:!0,playbackrate:0});case pr:return wf(wf({},e),{},{play:!1,playbackrate:0});default:return e}}function kf(e){this.count=0,this.has={},this.at=null}function Mf(){this.root=new kf(""),this.limit=10}function Pf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function If(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pf(Object(n),!0).forEach((function(t){Of(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Of(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Df(e,t){if(!e)return{phrase:"",results:[],value:"",loading:!1};switch(t.type){case jr:return If(If({},e),{},{phrase:t.payload});case qr:return If(If({},e),{},{value:t.payload});case Vr:return If(If({},e),{},{results:t.payload.fetchResult,phrase:"Showing "+t.payload.fetchResult.length+" item(s)"});case Wr:return If(If({},e),{},{results:[],phrase:""});case Gr:return If(If({},e),{},{loading:t.payload});default:return e}}function zf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zf(Object(n),!0).forEach((function(t){Rf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ff(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{activeLayer:"",compact:!0,layers:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case hr:return e;case Tr:var n=t.payload;return Lf(Lf({},e),{},{activeLayer:n});case Ar:var r=t.payload;return Lf(Lf({},e),{},{layers:Lf(Lf({},e.layers),{},Rf({},r,Lf(Lf({},e.layers[r]),{},{visible:!e.layers[r].visible})))});case wr:return Lf(Lf({},e),{},{compact:!e.compact});case Cr:return Lf(Lf({},e),{},{compact:!0});case Er:var i=t.payload;return Lf(Lf({},e),{},{layers:Lf(Lf({},e.layers),{},Rf({},i,Lf(Lf({},e.layers[i]),{},{expand:!e.layers[i].expand})))});case kr:var o=t.payload,a=Object.assign({},Object.values(e.layers).filter((function(e){return e.id!=o.id})));return Lf(Lf({},e),{},{layers:a});case Br:var s=t.payload;return Lf(Lf({},e),{},{layers:Lf(Lf({},e.layers),{},Rf({},s.id,s))});case Mr:var l=t.payload,c=l.id,u=l.key,h=l.property;return Lf(Lf({},e),{},{layers:Lf(Lf({},e.layers),{},Rf({},c,Lf(Lf({},e.layers[c]),{},{properties:Lf(Lf({},e.layers[c].properties),{},Rf({},u,h))})))});case Pr:var f=t.payload,p=f.id,d=f.properties,m={};return Object.keys(d).map((function(e){m[e]=d[e]})),Lf(Lf({},e),{},{layers:Lf(Lf({},e.layers),{},Rf({},p,Lf(Lf({},e.layers[p]),{},{properties:m})))});case Sr:var g=t.payload,y=g.id,v=g.key,b=g.value;return Lf(Lf({},e),{},{layers:Lf(Lf({},e.layers),{},Rf({},y,Lf(Lf({},e.layers[y]),{},{properties:Lf(Lf({},e.layers[y].properties),{},Rf({},v,Lf(Lf({},e.layers[y].properties[v]),{},{value:b})))})))});default:return e}}function Uf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uf(Object(n),!0).forEach((function(t){jf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{histo1:[],drawMode:"",selectedIds:[],loadedDrawing:null,itemView:[],isMoving:!1,size:"",ev:{},polygonInspector:null,mapItem:null,latLng:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case lr:return Nf(Nf({},e),{},{latLng:t.payload});case xr:return Nf(Nf({},e),{},{histo1:t.payload});case $r:return Nf(Nf({},e),{},{loadedPolygon:t.payload});case cr:return Nf(Nf({},e),{},{drawMode:t.payload});case ur:return Nf(Nf({},e),{},{selectedIds:t.payload});case Lr:return Nf(Nf({},e),{},{mapItem:t.payload});case Hr:return Nf(Nf({},e),{},{filterData:t.payload.fetchResult});case Rr:return Nf(Nf({},e),{},{isMoving:t.payload});default:return e}}function Gf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gf(Object(n),!0).forEach((function(t){Wf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hf(e,t){if(!e)return{activeTab:"",hide:!1,tabs:{}};switch(t.type){case Fr:return qf(qf({},e),{},{activeTab:t.payload});case Ur:return qf(qf({},e),{},{tabs:qf(qf({},e.tabs),{},Wf({},t.payload.id,t.payload.panels))});case Nr:var n=Object.assign({},e);return delete n.tabs[t.payload],n;case vr:return qf(qf({},e),{},{hide:!1});case yr:return qf(qf({},e),{},{hide:!0});case dr:case mr:case gr:case _r:case br:return t.payload.tab?{activeTab:t.payload.activate?t.payload.tab:e.activeTab,tabs:qf(qf({},e.tabs),{},Wf({},t.payload.tab,Kr(e.tabs[t.payload.tab],t)))}:qf(qf({},e),{},{tabs:qf(qf({},e.tabs),{},Wf({},e.activeTab,Kr(e.tabs[e.activeTab],t)))});default:return e}}function $f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$f(Object(n),!0).forEach((function(t){Zf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"LOADER"===t.type?(console.log("LOADER"),Xf(Xf({},e),{},Zf({},t.payload.id,Xf({},t.payload)))):e}function Kf(e){return(0,rr.gT)(e,["SET_TIMESLIDER_VALUE","TOGGLE_TIMESLIDER_PLAY","SET_TIMESLIDER_PLAY"])}Mf.prototype.add=function(e,t,n){if(!this.root)return null;this._addNode(this.root,e,t,n)},Mf.prototype._addNode=function(e,t,n,r){e.count++;var i=t.charAt(0).toLowerCase(),o=e.has[i];o||(o=new kf(i),e.has[i]=o);var a=t.substring(1);a?this._addNode(o,a,n,r):(o.at||(o.at=[]),o.at.push({ix:n,to:r}))},Mf.prototype.contains=function(e){return!!this.root&&this._contains(this.root,e)},Mf.prototype._contains=function(e,t){if(!e||!t)return!1;var n=t.charAt(0),r=e.has[n];if(r){var i=t.substring(1);return!i&&!r.at||this._contains(r,i)}return!1},Mf.prototype.countWords=function(){if(!this.root)return console.log("No root node found");for(var e=[this.root],t=0;e.length;){var n=e.shift();for(var r in n.at||t++,n.has)n.has.hasOwnProperty(r)&&e.push(n.has[r])}return t},Mf.prototype.getWords=function(){var e=[];return this._getWords(this.root,e,e,""),e},Mf.prototype._getWords=function(e,t,n){for(var r in e.has)e.has.hasOwnProperty(r)&&(n+=r,e.has[r].at&&t.push(n),this._getWords(e.has[r],t,n),n=n.substring(0,n.length-1))},Mf.prototype.getLeafNodes=function(e,t){for(var n in e.has)e.has.hasOwnProperty(n)&&(e.has[n].at&&e.has[n].at.map((function(e){t.push(e)})),this.getLeafNodes(e.has[n],t))},Mf.prototype.getLeafNodesLimitedBy=function(e,t,n){for(var r in e.has){if(!(t.length<n))break;e.has.hasOwnProperty(r)&&(e.has[r].at?e.has[r].at.map((function(e){t.push(e)})):this.getLeafNodesLimitedBy(e.has[r],t,n))}},Mf.prototype.find=function(e,t){if(""===e)return{indices:[],count:0,phrase:""};for(var n=[],r=0,i="",o=e.split(""),a=!0,s=0;s<o.length;s++){var l=o[s].toLowerCase();if(!t.has[l]){a=!1;break}t=t.has[l]}return a?(t.at&&t.at.map((function(e){n.push(e),r+=1})),t.count<this.limit?(this.getLeafNodes(t,n),i+=(r+=t.count)+" matches, showing all."):(this.getLeafNodesLimitedBy(t,n,this.limit),i+=(r+=t.count)+" matches, showing "+this.limit+"."),{indices:n,count:r,phrase:i}):{indices:[],count:0,phrase:"No matches found."}};var Jf=function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];"function"==typeof e[i]&&(n[i]=e[i])}var o,a=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:Jn.INIT}))throw new Error(Zn(12));if(void 0===n(void 0,{type:Jn.PROBE_UNKNOWN_ACTION()}))throw new Error(Zn(13))}))}(n)}catch(e){o=e}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var r=!1,i={},s=0;s<a.length;s++){var l=a[s],c=n[l],u=e[l],h=c(u,t);if(void 0===h)throw t&&t.type,new Error(Zn(14));i[l]=h,r=r||h!==u}return(r=r||a.length!==Object.keys(e).length)?i:e}}({layers:Kf(Ff),tabs:Kf(Hf),timeslider:Bf,polygonManager:ti,search:Kf(Df),map:Kf(Vf),loader:Kf(Yf)});function Qf(e){return{type:ir,payload:e}}function ep(e){return{type:sr,payload:e}}function tp(e){return{type:ar,payload:e}}function np(){return{type:or}}function rp(){return{type:fr}}function ip(){return{type:pr}}function op(e){return{type:"ADD_TO_SEARCH",payload:e}}function ap(e){return{type:"SEARCH",payload:e}}function sp(e){return{type:"SET_SEARCH_SELECTED",payload:e}}function lp(e){return{type:Fr,payload:e}}function cp(e){return{type:Ur,payload:e}}function up(e){return{type:Nr,payload:e}}function hp(e){return{type:dr,payload:e}}function fp(){return{type:yr}}function pp(){return{type:vr}}function dp(e){return{type:gr,payload:e}}function mp(e){return{type:mr,payload:e}}function gp(e){return{type:_r,payload:e}}function yp(e){return{type:br,payload:e}}function vp(e){return{type:Hr,payload:e}}function bp(e){return{type:"SET_MODAL_VISIBILITY",payload:e}}function _p(e){return{type:"SOCKET_REQUEST",payload:e}}function xp(e){return{type:"LOADER",payload:e}}function Ap(e){return{type:"SOCKET_REQUEST_LATEST",payload:e}}function wp(e){return{type:"FETCH_REQUEST",payload:e}}function Cp(e){return{type:Lr,payload:e}}function Ep(e){return{type:Rr,payload:e}}function Sp(e){return{type:"MAP_ITEM_SELECTED",payload:e}}function Tp(e){return{type:lr,payload:e}}function Bp(e){return{type:xr,payload:e}}function kp(e){return{type:cr,payload:e}}function Mp(e){return{type:ur,payload:e}}function Pp(e){return{type:hr,payload:e}}function Ip(e){return{type:Ar,payload:e}}function Op(){return{type:wr}}function Dp(){return{type:Cr}}function zp(e){return{type:Er,payload:e}}function Lp(e){return{type:Sr,payload:e}}function Rp(e){return{type:Tr,payload:e}}function Fp(e){return{type:Br,payload:e}}function Up(e){return{type:kr,payload:e}}function Np(e){return{type:Mr,payload:e}}function jp(e){return{type:Pr,payload:e}}function Vp(e){return{type:Ir,payload:e}}function Gp(e){return{type:Or,payload:e}}function qp(e){return{type:Dr,payload:e}}function Wp(e){return{type:zr,payload:e}}function Hp(){}function $p(e){return{type:"TEST",payload:e}}function Xp(e){return{type:jr,payload:e}}function Zp(e){return{type:Vr,payload:e}}function Yp(e){return{type:Gr,payload:e}}function Kp(e){return{type:qr,payload:e}}function Jp(){return{type:Wr}}var Qp=a(20050),ed=a.n(Qp),td=a(45697),nd=a.n(td),rd=Wn.createContext(null),id=function(e){e()},od=function(){return id},ad={notify:function(){},get:function(){return[]}};function sd(e,t){var n,r=ad;function i(){a.onStateChange&&a.onStateChange()}function o(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=od(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var a={addNestedSub:function(e){return o(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:o,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=ad)},getListeners:function(){return r}};return a}var ld="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?Wn.useLayoutEffect:Wn.useEffect;const cd=function(e){var t=e.store,n=e.context,r=e.children,i=(0,Wn.useMemo)((function(){var e=sd(t);return{store:t,subscription:e}}),[t]),o=(0,Wn.useMemo)((function(){return t.getState()}),[t]);ld((function(){var e=i.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),o!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[i,o]);var a=n||rd;return Wn.createElement(a.Provider,{value:i},r)};function ud(){return ud=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ud.apply(this,arguments)}function hd(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var fd=a(8679),pd=a.n(fd),dd=a(72973),md=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],gd=["reactReduxForwardedRef"],yd=[],vd=[null,null];function bd(e,t){var n=e[1];return[t.payload,n+1]}function _d(e,t,n){ld((function(){return e.apply(void 0,t)}),n)}function xd(e,t,n,r,i,o,a){e.current=r,t.current=i,n.current=!1,o.current&&(o.current=null,a())}function Ad(e,t,n,r,i,o,a,s,l,c){if(e){var u=!1,h=null,f=function(){if(!u){var e,n,f=t.getState();try{e=r(f,i.current)}catch(e){n=e,h=e}n||(h=null),e===o.current?a.current||l():(o.current=e,s.current=e,a.current=!0,c({type:"STORE_UPDATED",payload:{error:n}}))}};return n.onStateChange=f,n.trySubscribe(),f(),function(){if(u=!0,n.tryUnsubscribe(),n.onStateChange=null,h)throw h}}}var wd=function(){return[null,0]};function Cd(e,t){void 0===t&&(t={});var n=t,r=n.getDisplayName,i=void 0===r?function(e){return"ConnectAdvanced("+e+")"}:r,o=n.methodName,a=void 0===o?"connectAdvanced":o,s=n.renderCountProp,l=void 0===s?void 0:s,c=n.shouldHandleStateChanges,u=void 0===c||c,h=n.storeKey,f=void 0===h?"store":h,p=(n.withRef,n.forwardRef),d=void 0!==p&&p,m=n.context,g=void 0===m?rd:m,y=hd(n,md),v=g;return function(t){var n=t.displayName||t.name||"Component",r=i(n),o=ud({},y,{getDisplayName:i,methodName:a,renderCountProp:l,shouldHandleStateChanges:u,storeKey:f,displayName:r,wrappedComponentName:n,WrappedComponent:t}),s=y.pure,c=s?Wn.useMemo:function(e){return e()};function h(n){var r=(0,Wn.useMemo)((function(){var e=n.reactReduxForwardedRef,t=hd(n,gd);return[n.context,e,t]}),[n]),i=r[0],a=r[1],s=r[2],l=(0,Wn.useMemo)((function(){return i&&i.Consumer&&(0,dd.isContextConsumer)(Wn.createElement(i.Consumer,null))?i:v}),[i,v]),h=(0,Wn.useContext)(l),f=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(h)&&Boolean(h.store);var p=f?n.store:h.store,d=(0,Wn.useMemo)((function(){return function(t){return e(t.dispatch,o)}(p)}),[p]),m=(0,Wn.useMemo)((function(){if(!u)return vd;var e=sd(p,f?null:h.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[p,f,h]),g=m[0],y=m[1],b=(0,Wn.useMemo)((function(){return f?h:ud({},h,{subscription:g})}),[f,h,g]),_=(0,Wn.useReducer)(bd,yd,wd),x=_[0][0],A=_[1];if(x&&x.error)throw x.error;var w=(0,Wn.useRef)(),C=(0,Wn.useRef)(s),E=(0,Wn.useRef)(),S=(0,Wn.useRef)(!1),T=c((function(){return E.current&&s===C.current?E.current:d(p.getState(),s)}),[p,x,s]);_d(xd,[C,w,S,s,T,E,y]),_d(Ad,[u,p,g,d,C,w,S,E,y,A],[p,g,d]);var B=(0,Wn.useMemo)((function(){return Wn.createElement(t,ud({},T,{ref:a}))}),[a,t,T]);return(0,Wn.useMemo)((function(){return u?Wn.createElement(l.Provider,{value:b},B):B}),[l,B,b])}var p=s?Wn.memo(h):h;if(p.WrappedComponent=t,p.displayName=h.displayName=r,d){var m=Wn.forwardRef((function(e,t){return Wn.createElement(p,ud({},e,{reactReduxForwardedRef:t}))}));return m.displayName=r,m.WrappedComponent=t,pd()(m,t)}return pd()(p,t)}}function Ed(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function Sd(e,t){if(Ed(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!Ed(e[n[i]],t[n[i]]))return!1;return!0}function Td(e){return function(t,n){var r=e(t,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function Bd(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function kd(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=Bd(e);var i=r(t,n);return"function"==typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=Bd(i),i=r(t,n)),i},r}}const Md=[function(e){return"function"==typeof e?kd(e):void 0},function(e){return e?void 0:Td((function(e){return{dispatch:e}}))},function(e){return e&&"object"==typeof e?Td((function(t){return function(e,t){var n={},r=function(r){var i=e[r];"function"==typeof i&&(n[r]=function(){return t(i.apply(void 0,arguments))})};for(var i in e)r(i);return n}(e,t)})):void 0}],Pd=[function(e){return"function"==typeof e?kd(e):void 0},function(e){return e?void 0:Td((function(){return{}}))}];function Id(e,t,n){return ud({},n,e,t)}const Od=[function(e){return"function"==typeof e?function(e){return function(t,n){n.displayName;var r,i=n.pure,o=n.areMergedPropsEqual,a=!1;return function(t,n,s){var l=e(t,n,s);return a?i&&o(l,r)||(r=l):(a=!0,r=l),r}}}(e):void 0},function(e){return e?void 0:function(){return Id}}];var Dd=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function zd(e,t,n,r){return function(i,o){return n(e(i,o),t(r,o),o)}}function Ld(e,t,n,r,i){var o,a,s,l,c,u=i.areStatesEqual,h=i.areOwnPropsEqual,f=i.areStatePropsEqual,p=!1;return function(i,d){return p?function(i,p){var d,m,g=!h(p,a),y=!u(i,o);return o=i,a=p,g&&y?(s=e(o,a),t.dependsOnOwnProps&&(l=t(r,a)),c=n(s,l,a)):g?(e.dependsOnOwnProps&&(s=e(o,a)),t.dependsOnOwnProps&&(l=t(r,a)),c=n(s,l,a)):y?(d=e(o,a),m=!f(d,s),s=d,m&&(c=n(s,l,a)),c):c}(i,d):(s=e(o=i,a=d),l=t(r,a),c=n(s,l,a),p=!0,c)}}function Rd(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,o=hd(t,Dd),a=n(e,o),s=r(e,o),l=i(e,o);return(o.pure?Ld:zd)(a,s,l,e,o)}var Fd=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function Ud(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function Nd(e,t){return e===t}function jd(e){var t=void 0===e?{}:e,n=t.connectHOC,r=void 0===n?Cd:n,i=t.mapStateToPropsFactories,o=void 0===i?Pd:i,a=t.mapDispatchToPropsFactories,s=void 0===a?Md:a,l=t.mergePropsFactories,c=void 0===l?Od:l,u=t.selectorFactory,h=void 0===u?Rd:u;return function(e,t,n,i){void 0===i&&(i={});var a=i,l=a.pure,u=void 0===l||l,f=a.areStatesEqual,p=void 0===f?Nd:f,d=a.areOwnPropsEqual,m=void 0===d?Sd:d,g=a.areStatePropsEqual,y=void 0===g?Sd:g,v=a.areMergedPropsEqual,b=void 0===v?Sd:v,_=hd(a,Fd),x=Ud(e,o,"mapStateToProps"),A=Ud(t,s,"mapDispatchToProps"),w=Ud(n,c,"mergeProps");return r(h,ud({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:x,initMapDispatchToProps:A,initMergeProps:w,pure:u,areStatesEqual:p,areOwnPropsEqual:m,areStatePropsEqual:y,areMergedPropsEqual:b},_))}}const Vd=jd();var Gd,qd=a(73935);Gd=qd.unstable_batchedUpdates,id=Gd;var Wd=a(64317),Hd=a(34444),$d=a.n(Hd),Xd=a(50080),Zd=a.n(Xd);function Yd(e){return Yd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yd(e)}function Kd(e,t){return Kd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Kd(e,t)}function Jd(e,t){if(t&&("object"===Yd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Qd(e)}function Qd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function em(e){return em=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},em(e)}function tm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var nm=function(e){var t=e.onClose,n=e.header,r=e.content;return Wn.createElement("div",null,Wn.createElement("div",{className:"middle-overlay"},Wn.createElement("div",{className:"fullscreen",onClick:t}),Wn.createElement("div",{style:{zIndex:1}},Wn.createElement("a",{className:"modal-close",onClick:t},Wn.createElement("i",{className:"tiny material-icons"},"clear")),Wn.createElement("div",{className:"modal-header"},n),Wn.createElement("div",{className:"modal-body"},r))))},rm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kd(e,t)}(o,e);var t,n,r,i=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=em(t);if(n){var i=em(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Jd(this,e)});function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),tm(Qd(t=i.call(this,e)),"handleChange",(function(e){t.setState({value:e.target.value})})),tm(Qd(t),"render",(function(){return Wn.createElement("div",{className:"middle-overlay"},Wn.createElement("div",{style:{minWidth:"10%"}},Wn.createElement("a",{className:"modal-close",onClick:t.props.onCancel},Wn.createElement("i",{className:"tiny material-icons"},"clear")),Wn.createElement("div",{className:"modal-header"},t.props.text),Wn.createElement("div",{className:"modal-body modal-padding"},Wn.createElement("div",{id:"popup-input"},Wn.createElement("input",{className:"input",type:"text",value:t.state.value,onChange:t.handleChange,id:"popupInput"})),Wn.createElement("div",{className:"row"},Wn.createElement("div",{className:"btn",onClick:t.props.onSave.bind(null,t.props.index,t.state.value)},"save"),Wn.createElement("div",{className:"btn",onClick:t.props.onCancel},"cancel")))))})),t.state={value:t.props.placeholder},t}return r=o,Object.defineProperty(r,"prototype",{writable:!1}),r}(Wn.Component),im=a(93162);function om(e){return om="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},om(e)}function am(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sm(e,t,n){return t&&am(e.prototype,t),n&&am(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function lm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cm(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&um(e,t)}function um(e,t){return um=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},um(e,t)}function hm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=dm(e);if(t){var i=dm(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return fm(this,n)}}function fm(e,t){if(t&&("object"===om(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return pm(e)}function pm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dm(e){return dm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},dm(e)}function mm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gm(){return gm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gm.apply(this,arguments)}var ym=function(e){var t=e.filename,n=e.data,r=e.fields,i=e.label;return Wn.createElement("a",{className:"button-widget",onClick:function(){return a.e(733).then(a.t.bind(a,95733,23)).then((function(e){e.default;var i=json2csv({data:n,fields:r}),o=new Blob([i],{type:"text/csv"});im.saveAs(o,t+".csv")}))}}," ",i," ")},vm=function(e){var t=e.data;return Wn.createElement("dl",{className:"description-list"},Object.keys(t).map((function(e){return[Wn.createElement("dt",null,e),Wn.createElement("dd",null,t[e]?t[e].toString():"")]})))},bm=function(e){var t=e.header,n=e.data,r=e.fixedLayout;return Wn.createElement("table",{className:"vertical-table",style:r&&{tableLayout:"fixed"}},t&&Wn.createElement("thead",null,Wn.createElement("tr",null,Wn.createElement("th",{colSpan:"2"},t))),Wn.createElement("tbody",null,Object.keys(n).map((function(e,t){return Wn.createElement("tr",{key:t},Wn.createElement("th",{style:r&&{width:"30%"}},e),Wn.createElement("td",null,n[e]))}))))},_m=function(e){var t=e.title,n=(e.text,e.color),r=e.active;return Wn.createElement("div",{className:"title-widget",style:{background:Zd()(n,r?20:10)}},Wn.createElement("h1",null,t))},xm=function(e){var t=e.text;return Wn.createElement("p",null,t)},Am=function(e){var t=e.header,n=e.paragraph,r=e.footer;return Wn.createElement("section",{className:"header-paragraph-widget"},Wn.createElement("h4",null,t),Wn.createElement("p",null,n),r&&Wn.createElement("p",{className:"bold"},r))},wm=function(e){var t=e.data,n=e.head,r=$d()(t);return Wn.createElement(bm,{head:n,data:r})},Cm=function(e){var t=e.actions,n=e.buttons,r=e.width;return Wn.createElement("div",{style:{width:r},className:"buttons-widget"},n.map((function(e){return Wn.createElement(Em,gm({key:e.label,actions:t},e))})))},Em=function(e){cm(n,e);var t=hm(n);function n(){var e;lm(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return mm(pm(e=t.call.apply(t,[this].concat(i))),"render",(function(){return Wn.createElement("a",{className:"button-widget",onClick:e.props.actions[e.props.actionCreator].bind(null,e.props.payload)},e.props.label)})),e}return sm(n)}(Wn.Component),Sm=function(e){cm(n,e);var t=hm(n);function n(){var e;lm(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return mm(pm(e=t.call.apply(t,[this].concat(i))),"render",(function(){return Wn.createElement("p",null,e.props.loader?e.props.loader.loading:"idle")})),e}return sm(n,[{key:"componentDidMount",value:function(){if(!this.props.loader){var e=this.props.widgetId;this.props.actions.socketRequest({request:{ctx:"TODO",type:"kdbquery",query:"dslam_info",params:["SWDSL0207134"]},onLoading:{type:"LOADER",payload:{id:e,loading:"loading"}},onSuccess:{type:"LOADER",payload:{id:e,loading:"success"}},onError:{type:"LOADER",payload:{id:e,loading:"error"}}})}}}]),n}(Wn.Component),Tm=function(e){cm(n,e);var t=hm(n);function n(e){var r;lm(this,n),mm(pm(r=t.call(this,e)),"onMouseMove",(function(e,t,n,i){tf("#hover").remove();var o=t.append("g").attr("id","hover"),a=zl().domain([0,r.props.graph.path.length]).range([0,r.state.group.width]),s=Math.round(a.invert(e[0])),l=r.props.graph.path[s];if(l){var c=n(l.x);i(l.y),o.append("line").attr("x1",c).attr("x2",c).attr("y1",0).attr("y2",r.state.group.height).attr("class","path-luna-primary nopointerevents"),o.append("text").attr("class","path-luna-primary").attr("text-anchor","left").attr("x",0).attr("y",r.state.group.height+40).text(l.x+", "+l.y)}}));var i={top:20,right:10,bottom:30,left:40},o=e.width?e.width:400,a=e.width?e.width-e.width/5:320;return r.state={group:{width:o-i.left-i.right,height:a-i.top-i.bottom},container:{width:o+i.left+i.right,height:a+i.top+i.bottom},margin:i},r}return sm(n,[{key:"componentDidMount",value:function(){this.setup()}},{key:"componentDidUpdate",value:function(){this.setup()}},{key:"setup",value:function(){var e=this,t=this.props,n=t.graph,r=t.start,i=t.end,o=t.yAxis,a=t.xAxis,s=this.state,l=s.group,c=(s.container,s.margin),u=tf(this.svg);u.selectAll("*").remove();var h=Math.min.apply(Math,n.path.map((function(e){return e.y}))),f=Math.max.apply(Math,n.path.map((function(e){return e.y}))),p=zl().domain([r,i]).range([0,l.width]),d=zl().domain([h,f]).range([l.height,0]),m=u.append("g").attr("transform","translate("+c.left+","+c.top+")");n.path.map((function(e,t){var n=Zd()(Pn.BrBG[Math.round(d(e.y)/l.height*9)],100);m.append("circle").attr("fill",n).attr("cx",p(e.x)).attr("cy",d(e.y)).attr("r",1)})),m.append("rect").attr("width",l.width).attr("height",l.height).attr("style","fill: rgba(0,0,0,0);").on("mousemove",(function(t,n){e.onMouseMove(function(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}(t.currentTarget),m,p,d)}));var g,y=zl().domain(ni(n.path,(function(e){return e.x}))).range([0,l.width]),v=zl().domain(ni(n.path,(function(e){return e.y}))).range([l.height,0]);m.append("g").attr("class","path-luna-primary").attr("transform","translate( 0, "+l.height+")").call(gi(y)).append("text").attr("class","path-luna-primary").attr("y",6).attr("dy","3em").attr("dx",l.width/2).style("text-anchor","start").text(a),m.append("g").attr("class","path-luna-primary").call((g=v,mi(4,g))).append("text").attr("class","path-luna-primary").attr("transform","rotate(-90)").attr("y",6).attr("dy","-3.5em").style("text-anchor","end").text(o)}},{key:"render",value:function(){var e=this,t=this.props.graph,n=this.state.container;return Wn.createElement("div",{className:"scatter_plot",key:"svg_sp_"+t.id,style:{width:n.width+"px"}},Wn.createElement("p",null," ",t.id," "),Wn.createElement("p",{className:"ts"}," ",t.timestamp," "),Wn.createElement("svg",{ref:function(t){e.svg=t},preserveAspectRatio:"none",viewBox:"0 0 "+n.width+" "+n.height,height:n.height+"px"}))}}]),n}(Wn.Component),Bm=function(){return Wn.createElement("div",{id:"spinner"},Wn.createElement("div",{className:"spinner"},"."))},km=function(e){cm(n,e);var t=hm(n);function n(e){var r;lm(this,n),mm(pm(r=t.call(this,e)),"componentDidMount",(function(){var e=r.props,t=e.values,n=e.label,i=r.state.margin;if(t){var o=tf("#"+r.props.id);o.selectAll("*").remove();var a=r.state.group,s=Gs().rangeRound([0,a.width]).padding(.75),l=zl().rangeRound([a.height,0]);r.x=s,r.y=l;var c=o.append("g").attr("transform","translate("+i.left+","+i.top+")");pm(r),s.domain(t.map((function(e){return e.label}))),l.domain([0,ri(t,(function(e){return e.value}))]);var u=c.selectAll(".bar").data(t).enter(),h=s.bandwidth()/2;u.append("rect").attr("class","h-rect").attr("style",(function(e){return"fill: #d1dadb"})).attr("x",(function(e){return s(e.label)})).attr("width",s.bandwidth()).attr("y",(function(e){return l(e.value)})).attr("height",(function(e){return a.height-l(e.value)})),c.selectAll(".text").data(t).enter().append("text").text((function(e){return e.value})).attr("x",(function(e){return s(e.label)+h})).attr("y",(function(e){return l(e.value)-6})).attr("dy",".35em").attr("alignment-baseline","ideographic").attr("text-anchor","middle"),c.selectAll(".text").data(t).enter().append("text").text((function(e){return e.label})).attr("x",(function(e){return s(e.label)+h})).attr("y",a.height+2).attr("dy",".35em").attr("alignment-baseline","hanging").attr("text-anchor","middle"),o.append("text").attr("x",a.width/2).attr("y",i.top/3.5).text(n).attr("alignment-baseline","hanging").attr("text-anchor","middle").attr("dy",".35em")}})),mm(pm(r),"render",(function(){var e=r.state,t=(e.group,e.container);return Wn.createElement("div",{className:"chart"},Wn.createElement("svg",{height:t.height,width:t.width,id:r.props.id,viewBox:"0 0 "+parseInt(t.width)+" "+parseInt(t.height),preserveAspectRatio:"none"}))}));var i=e.width?e.width:400,o=e.height?e.height:i/2,a={top:o/1.5,right:0,bottom:o/5,left:0};return r.state={group:{width:i-a.left-a.right,height:o-a.bottom},container:{width:i,height:o+a.top+a.bottom},margin:a},r}return sm(n)}(Wn.Component),Mm=a(75980),Pm=a.n(Mm),Im=a(14893),Om=new(a.n(Im)())({lightness:.3,saturation:.5});function Dm(e){return Dm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dm(e)}function zm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rm(e,t,n){return t&&Lm(e.prototype,t),n&&Lm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fm(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Um(e,t)}function Um(e,t){return Um=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Um(e,t)}function Nm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Gm(e);if(t){var i=Gm(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return jm(this,n)}}function jm(e,t){if(t&&("object"===Dm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Vm(e)}function Vm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gm(e){return Gm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Gm(e)}function qm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Wm={};function Hm(e,t){Wm[e]=t}var $m=function(e){Fm(n,e);var t=Nm(n);function n(e){var r;return zm(this,n),qm(Vm(r=t.call(this,e)),"onKeyDown",(function(e){r.props.results&&"Escape"===e.code&&r.onClear()})),qm(Vm(r),"onChange",(function(e){var t=e.target.value;""===t?r.onClear():(r.setState({value:t}),r.props.actions.socketRequestLatest({request:{ctx:"searchtext"+Date.now(),type:"kdbquery",query:"text_search",params:[t]},onSuccess:{type:"SEARCH_RESULTS"}}))})),qm(Vm(r),"onClear",(function(){document.getElementById("searchInput").value="",r.setState({value:""}),r.props.actions.searchClear()})),qm(Vm(r),"onClick",(function(e){var t=r.props,n=t.panelIndex,i=t.panelTab;t.actions.socketRequestLatest({request:{ctx:"searchclick"+Date.now(),type:"kdbquery",query:e.type+"_info",params:[e.id]},onLoading:{type:"ADD_PANEL",payload:{index:n+1,panel:{id:"loading",loading:!0}}},onSuccess:{type:"UPDATE_PANEL",payload:{index:n+1,tab:i,id:e.id,view:Wm[e.type],loading:!1}},onError:{type:"UPDATE_PANEL",payload:{index:n+1,tab:i,id:e.id+"_report_error",loadingError:!0}}})})),qm(Vm(r),"onFocus",(function(){r.setState({isActive:!0})})),qm(Vm(r),"onBlur",(function(){r.setState({isActive:!1})})),r.state={isActive:!1,list:[],value:""},r}return Rm(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.onKeyDown,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onKeyDown,!1)}},{key:"render",value:function(){var e=this.props.results,t=this.state,n=t.isActive,r=(t.postfix,t.value);return Wn.createElement("div",{id:"search"},Wn.createElement("div",{id:"search-bar",className:n?"search-active row":"row"},Wn.createElement("div",{className:"col s1 m1 l1 justified"},Wn.createElement(Pm(),{name:"search"})),Wn.createElement("div",{className:"col s11 m11 l11 justified"},Wn.createElement("input",{id:"searchInput",placeholder:"Search",type:"text",onChange:this.onChange,className:"input",onFocus:this.onFocus,onBlur:this.onBlur})),Wn.createElement("div",{className:"col s1 m1 l1 justified"},""!==r&&Wn.createElement(Pm(),{name:"close",onClick:this.onClear}))),Wn.createElement(Xm,{results:e,value:r,onClick:this.onClick}))}}]),n}(Wn.Component);$m.PropTypes={actions:nd().object};var Xm=function(e){Fm(n,e);var t=Nm(n);function n(){return zm(this,n),t.apply(this,arguments)}return Rm(n,[{key:"render",value:function(){var e=this.props,t=(e.index,e.results),n=(e.value,e.onClick),r=[];return t&&(r=t.map((function(e,t){return Wn.createElement("li",{key:t+"_sr",className:"search-autocomplete-item",onClick:n.bind(null,e),style:{borderLeft:"solid 2px "+Om.hex(e.type)}},e.text?e.text:e.id)}))),Wn.createElement(Wd.Transition,{component:"ul",id:"search-results",transitionName:"searchitem",transitionAppear:!1,transitionEnter:!1,transitionLeave:!1,transitionAppearTimeout:150,transitionEnterTimeout:150,transitionLeaveTimeout:150},r)}}]),n}(Wn.Component);const Zm=Vd((function(e){return{results:e.search.results,phrase:e.search.phrase,value:e.search.value}}),(function(e){return{actions:tr(n,e)}}))($m);function Ym(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Km(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jm(e,t,n){return t&&Km(e.prototype,t),n&&Km(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Qm(e,t){return Qm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Qm(e,t)}function eg(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qm(e,t)}function tg(e){return tg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},tg(e)}function ng(e){return ng="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ng(e)}function rg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ig(e,t){if(t&&("object"===ng(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return rg(e)}function og(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=tg(e);if(t){var i=tg(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ig(this,n)}}var ag={};function sg(e,t){}const lg=function(e,t){!function(e,t,n){t||ag[n]||(e(!1,n),ag[n]=!0)}(sg,e,t)},cg=function(e){var t,n,r=e.className,i=e.included,o=e.vertical,a=e.style,s=e.length,l=e.offset,c=e.reverse;s<0&&(c=!c,s=Math.abs(s),l=100-l);var u=o?(Hn(t={},c?"top":"bottom","".concat(l,"%")),Hn(t,c?"bottom":"top","auto"),Hn(t,"height","".concat(s,"%")),t):(Hn(n={},c?"right":"left","".concat(l,"%")),Hn(n,c?"left":"right","auto"),Hn(n,"width","".concat(s,"%")),n),h=Xn(Xn({},a),u);return i?Wn.createElement("div",{className:r,style:h}):null};function ug(e,t){if(null==e)return{};var n,r,i=hd(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function hg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fg(e,t){if(e){if("string"==typeof e)return hg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hg(e,t):void 0}}function pg(e){return function(e){if(Array.isArray(e))return hg(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||fg(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dg(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tg(e)););return e}function mg(){return mg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=dg(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},mg.apply(this,arguments)}function gg(e,t,n,r){var i=qd.unstable_batchedUpdates?function(e){qd.unstable_batchedUpdates(n,e)}:n;return e.addEventListener&&e.addEventListener(t,i,r),{remove:function(){e.removeEventListener&&e.removeEventListener(t,i)}}}var yg=a(94184),vg=a.n(yg);const bg=function(e){var t=e.prefixCls,n=e.vertical,r=e.reverse,i=e.marks,o=e.dots,a=e.step,s=e.included,l=e.lowerBound,c=e.upperBound,u=e.max,h=e.min,f=e.dotStyle,p=e.activeDotStyle,d=u-h,m=function(e,t,n,r,i,o){lg(!n||r>0,"`Slider[step]` should be a positive number in order to make Slider[dots] work.");var a=Object.keys(t).map(parseFloat).sort((function(e,t){return e-t}));if(n&&r)for(var s=i;s<=o;s+=r)-1===a.indexOf(s)&&a.push(s);return a}(0,i,o,a,h,u).map((function(e){var i,o="".concat(Math.abs(e-h)/d*100,"%"),a=!s&&e===c||s&&e<=c&&e>=l,u=Xn(Xn({},f),{},Hn({},n?r?"top":"bottom":r?"right":"left",o));a&&(u=Xn(Xn({},u),p));var m=vg()((Hn(i={},"".concat(t,"-dot"),!0),Hn(i,"".concat(t,"-dot-active"),a),Hn(i,"".concat(t,"-dot-reverse"),r),i));return Wn.createElement("span",{className:m,style:u,key:e})}));return Wn.createElement("div",{className:"".concat(t,"-step")},m)},_g=function(e){var t=e.className,n=e.vertical,r=e.reverse,i=e.marks,o=e.included,a=e.upperBound,s=e.lowerBound,l=e.max,c=e.min,u=e.onClickLabel,h=Object.keys(i),f=l-c,p=h.map(parseFloat).sort((function(e,t){return e-t})).map((function(e){var l,h=i[e],p="object"===ng(h)&&!Wn.isValidElement(h),d=p?h.label:h;if(!d&&0!==d)return null;var m=!o&&e===a||o&&e<=a&&e>=s,g=vg()((Hn(l={},"".concat(t,"-text"),!0),Hn(l,"".concat(t,"-text-active"),m),l)),y=Hn({marginBottom:"-50%"},r?"top":"bottom","".concat((e-c)/f*100,"%")),v=Hn({transform:"translateX(".concat(r?"50%":"-50%",")"),msTransform:"translateX(".concat(r?"50%":"-50%",")")},r?"right":"left","".concat((e-c)/f*100,"%")),b=n?y:v,_=p?Xn(Xn({},b),h.style):b;return Wn.createElement("span",{className:g,style:_,key:e,onMouseDown:function(t){return u(t,e)},onTouchStart:function(t){return u(t,e)}},d)}));return Wn.createElement("div",{className:t},p)};var xg=function(e){eg(n,e);var t=og(n);function n(){var e;return Ym(this,n),(e=t.apply(this,arguments)).state={clickFocused:!1},e.setHandleRef=function(t){e.handle=t},e.handleMouseUp=function(){document.activeElement===e.handle&&e.setClickFocus(!0)},e.handleMouseDown=function(t){t.preventDefault(),e.focus()},e.handleBlur=function(){e.setClickFocus(!1)},e.handleKeyDown=function(){e.setClickFocus(!1)},e}return Jm(n,[{key:"componentDidMount",value:function(){this.onMouseUpListener=gg(document,"mouseup",this.handleMouseUp)}},{key:"componentWillUnmount",value:function(){this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"setClickFocus",value:function(e){this.setState({clickFocused:e})}},{key:"clickFocus",value:function(){this.setClickFocus(!0),this.focus()}},{key:"focus",value:function(){this.handle.focus()}},{key:"blur",value:function(){this.handle.blur()}},{key:"render",value:function(){var e,t,n,r=this.props,i=r.prefixCls,o=r.vertical,a=r.reverse,s=r.offset,l=r.style,c=r.disabled,u=r.min,h=r.max,f=r.value,p=r.tabIndex,d=r.ariaLabel,m=r.ariaLabelledBy,g=r.ariaValueTextFormatter,y=ug(r,["prefixCls","vertical","reverse","offset","style","disabled","min","max","value","tabIndex","ariaLabel","ariaLabelledBy","ariaValueTextFormatter"]),v=vg()(this.props.className,Hn({},"".concat(i,"-handle-click-focused"),this.state.clickFocused)),b=o?(Hn(e={},a?"top":"bottom","".concat(s,"%")),Hn(e,a?"bottom":"top","auto"),Hn(e,"transform",a?null:"translateY(+50%)"),e):(Hn(t={},a?"right":"left","".concat(s,"%")),Hn(t,a?"left":"right","auto"),Hn(t,"transform","translateX(".concat(a?"+":"-","50%)")),t),_=Xn(Xn({},l),b),x=p||0;return(c||null===p)&&(x=null),g&&(n=g(f)),Wn.createElement("div",ud({ref:this.setHandleRef,tabIndex:x},y,{className:v,style:_,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,role:"slider","aria-valuemin":u,"aria-valuemax":h,"aria-valuenow":f,"aria-disabled":!!c,"aria-label":d,"aria-labelledby":m,"aria-valuetext":n}))}}]),n}(Wn.Component),Ag={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=Ag.F1&&t<=Ag.F12)return!1;switch(t){case Ag.ALT:case Ag.CAPS_LOCK:case Ag.CONTEXT_MENU:case Ag.CTRL:case Ag.DOWN:case Ag.END:case Ag.ESC:case Ag.HOME:case Ag.INSERT:case Ag.LEFT:case Ag.MAC_FF_META:case Ag.META:case Ag.NUMLOCK:case Ag.NUM_CENTER:case Ag.PAGE_DOWN:case Ag.PAGE_UP:case Ag.PAUSE:case Ag.PRINT_SCREEN:case Ag.RIGHT:case Ag.SHIFT:case Ag.UP:case Ag.WIN_KEY:case Ag.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=Ag.ZERO&&e<=Ag.NINE)return!0;if(e>=Ag.NUM_ZERO&&e<=Ag.NUM_MULTIPLY)return!0;if(e>=Ag.A&&e<=Ag.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case Ag.SPACE:case Ag.QUESTION_MARK:case Ag.NUM_PLUS:case Ag.NUM_MINUS:case Ag.NUM_PERIOD:case Ag.NUM_DIVISION:case Ag.SEMICOLON:case Ag.DASH:case Ag.EQUALS:case Ag.COMMA:case Ag.PERIOD:case Ag.SLASH:case Ag.APOSTROPHE:case Ag.SINGLE_QUOTE:case Ag.OPEN_SQUARE_BRACKET:case Ag.BACKSLASH:case Ag.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};const wg=Ag;function Cg(e,t){try{return Object.keys(t).some((function(n){return e.target===(0,qd.findDOMNode)(t[n])}))}catch(e){return!1}}function Eg(e,t){var n=t.min,r=t.max;return e<n||e>r}function Sg(e){return e.touches.length>1||"touchend"===e.type.toLowerCase()&&e.touches.length>0}function Tg(e,t){var n=t.marks,r=t.step,i=t.min,o=t.max,a=Object.keys(n).map(parseFloat);if(null!==r){var s=Math.pow(10,Bg(r)),l=Math.floor((o*s-i*s)/(r*s)),c=Math.min((e-i)/r,l),u=Math.round(c)*r+i;a.push(u)}var h=a.map((function(t){return Math.abs(e-t)}));return a[h.indexOf(Math.min.apply(Math,pg(h)))]}function Bg(e){var t=e.toString(),n=0;return t.indexOf(".")>=0&&(n=t.length-t.indexOf(".")-1),n}function kg(e,t){return e?t.clientY:t.pageX}function Mg(e,t){return e?t.touches[0].clientY:t.touches[0].pageX}function Pg(e,t){var n=t.getBoundingClientRect();return e?n.top+.5*n.height:window.pageXOffset+n.left+.5*n.width}function Ig(e,t){var n=t.max,r=t.min;return e<=r?r:e>=n?n:e}function Og(e,t){var n=t.step,r=isFinite(Tg(e,t))?Tg(e,t):0;return null===n?r:parseFloat(r.toFixed(Bg(n)))}function Dg(e){e.stopPropagation(),e.preventDefault()}function zg(e,t,n){var r="increase",i="decrease",o=r;switch(e.keyCode){case wg.UP:o=t&&n?i:r;break;case wg.RIGHT:o=!t&&n?i:r;break;case wg.DOWN:o=t&&n?r:i;break;case wg.LEFT:o=!t&&n?r:i;break;case wg.END:return function(e,t){return t.max};case wg.HOME:return function(e,t){return t.min};case wg.PAGE_UP:return function(e,t){return e+2*t.step};case wg.PAGE_DOWN:return function(e,t){return e-2*t.step};default:return}return function(e,t){return function(e,t,n){var r={increase:function(e,t){return e+t},decrease:function(e,t){return e-t}},i=r[e](Object.keys(n.marks).indexOf(JSON.stringify(t)),1),o=Object.keys(n.marks)[i];return n.step?r[e](t,n.step):Object.keys(n.marks).length&&n.marks[o]?n.marks[o]:t}(o,e,t)}}function Lg(){}function Rg(e){var t;return t=function(e){eg(n,e);var t=og(n);function n(e){var r;Ym(this,n),(r=t.call(this,e)).onDown=function(e,t){var n=t,i=r.props,o=i.draggableTrack,a=i.vertical,s=r.state.bounds,l=o&&r.positionGetValue&&r.positionGetValue(n)||[],c=Cg(e,r.handlesRefs);if(r.dragTrack=o&&s.length>=2&&!c&&!l.map((function(e,t){var n=!!t||e>=s[t];return t===l.length-1?e<=s[t]:n})).some((function(e){return!e})),r.dragTrack)r.dragOffset=n,r.startBounds=pg(s);else{if(c){var u=Pg(a,e.target);r.dragOffset=n-u,n=u}else r.dragOffset=0;r.onStart(n)}},r.onMouseDown=function(e){if(0===e.button){r.removeDocumentEvents();var t=kg(r.props.vertical,e);r.onDown(e,t),r.addDocumentMouseEvents()}},r.onTouchStart=function(e){if(!Sg(e)){var t=Mg(r.props.vertical,e);r.onDown(e,t),r.addDocumentTouchEvents(),Dg(e)}},r.onFocus=function(e){var t=r.props,n=t.onFocus,i=t.vertical;if(Cg(e,r.handlesRefs)&&!r.dragTrack){var o=Pg(i,e.target);r.dragOffset=0,r.onStart(o),Dg(e),n&&n(e)}},r.onBlur=function(e){var t=r.props.onBlur;r.dragTrack||r.onEnd(),t&&t(e)},r.onMouseUp=function(){r.handlesRefs[r.prevMovedHandleIndex]&&r.handlesRefs[r.prevMovedHandleIndex].clickFocus()},r.onMouseMove=function(e){if(r.sliderRef){var t=kg(r.props.vertical,e);r.onMove(e,t-r.dragOffset,r.dragTrack,r.startBounds)}else r.onEnd()},r.onTouchMove=function(e){if(!Sg(e)&&r.sliderRef){var t=Mg(r.props.vertical,e);r.onMove(e,t-r.dragOffset,r.dragTrack,r.startBounds)}else r.onEnd()},r.onKeyDown=function(e){r.sliderRef&&Cg(e,r.handlesRefs)&&r.onKeyboard(e)},r.onClickMarkLabel=function(e,t){e.stopPropagation(),r.onChange({value:t}),r.setState({value:t},(function(){return r.onEnd(!0)}))},r.saveSlider=function(e){r.sliderRef=e};var i=e.step,o=e.max,a=e.min,s=!isFinite(o-a)||(o-a)%i==0;return lg(!i||Math.floor(i)!==i||s,"Slider[max] - Slider[min] (".concat(o-a,") should be a multiple of Slider[step] (").concat(i,")")),r.handlesRefs={},r}return Jm(n,[{key:"componentDidMount",value:function(){this.document=this.sliderRef&&this.sliderRef.ownerDocument;var e=this.props,t=e.autoFocus,n=e.disabled;t&&!n&&this.focus()}},{key:"componentWillUnmount",value:function(){mg(tg(n.prototype),"componentWillUnmount",this)&&mg(tg(n.prototype),"componentWillUnmount",this).call(this),this.removeDocumentEvents()}},{key:"getSliderStart",value:function(){var e=this.sliderRef,t=this.props,n=t.vertical,r=t.reverse,i=e.getBoundingClientRect();return n?r?i.bottom:i.top:window.pageXOffset+(r?i.right:i.left)}},{key:"getSliderLength",value:function(){var e=this.sliderRef;if(!e)return 0;var t=e.getBoundingClientRect();return this.props.vertical?t.height:t.width}},{key:"addDocumentTouchEvents",value:function(){this.onTouchMoveListener=gg(this.document,"touchmove",this.onTouchMove),this.onTouchUpListener=gg(this.document,"touchend",this.onEnd)}},{key:"addDocumentMouseEvents",value:function(){this.onMouseMoveListener=gg(this.document,"mousemove",this.onMouseMove),this.onMouseUpListener=gg(this.document,"mouseup",this.onEnd)}},{key:"removeDocumentEvents",value:function(){this.onTouchMoveListener&&this.onTouchMoveListener.remove(),this.onTouchUpListener&&this.onTouchUpListener.remove(),this.onMouseMoveListener&&this.onMouseMoveListener.remove(),this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"focus",value:function(){var e;this.props.disabled||null===(e=this.handlesRefs[0])||void 0===e||e.focus()}},{key:"blur",value:function(){var e=this;this.props.disabled||Object.keys(this.handlesRefs).forEach((function(t){var n,r;null===(n=e.handlesRefs[t])||void 0===n||null===(r=n.blur)||void 0===r||r.call(n)}))}},{key:"calcValue",value:function(e){var t=this.props,n=t.vertical,r=t.min,i=t.max,o=Math.abs(Math.max(e,0)/this.getSliderLength());return n?(1-o)*(i-r)+r:o*(i-r)+r}},{key:"calcValueByPos",value:function(e){var t=(this.props.reverse?-1:1)*(e-this.getSliderStart());return this.trimAlignValue(this.calcValue(t))}},{key:"calcOffset",value:function(e){var t=this.props,n=t.min,r=(e-n)/(t.max-n);return Math.max(0,100*r)}},{key:"saveHandle",value:function(e,t){this.handlesRefs[e]=t}},{key:"render",value:function(){var e,t=this.props,r=t.prefixCls,i=t.className,o=t.marks,a=t.dots,s=t.step,l=t.included,c=t.disabled,u=t.vertical,h=t.reverse,f=t.min,p=t.max,d=t.children,m=t.maximumTrackStyle,g=t.style,y=t.railStyle,v=t.dotStyle,b=t.activeDotStyle,_=mg(tg(n.prototype),"render",this).call(this),x=_.tracks,A=_.handles,w=vg()(r,(Hn(e={},"".concat(r,"-with-marks"),Object.keys(o).length),Hn(e,"".concat(r,"-disabled"),c),Hn(e,"".concat(r,"-vertical"),u),Hn(e,i,i),e));return Wn.createElement("div",{ref:this.saveSlider,className:w,onTouchStart:c?Lg:this.onTouchStart,onMouseDown:c?Lg:this.onMouseDown,onMouseUp:c?Lg:this.onMouseUp,onKeyDown:c?Lg:this.onKeyDown,onFocus:c?Lg:this.onFocus,onBlur:c?Lg:this.onBlur,style:g},Wn.createElement("div",{className:"".concat(r,"-rail"),style:Xn(Xn({},m),y)}),x,Wn.createElement(bg,{prefixCls:r,vertical:u,reverse:h,marks:o,dots:a,step:s,included:l,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:p,min:f,dotStyle:v,activeDotStyle:b}),A,Wn.createElement(_g,{className:"".concat(r,"-mark"),onClickLabel:c?Lg:this.onClickMarkLabel,vertical:u,marks:o,included:l,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:p,min:f,reverse:h}),d)}}]),n}(e),t.displayName="ComponentEnhancer(".concat(e.displayName,")"),t.defaultProps=Xn(Xn({},e.defaultProps),{},{prefixCls:"rc-slider",className:"",min:0,max:100,step:1,marks:{},handle:function(e){var t=e.index,n=ug(e,["index"]);return delete n.dragging,null===n.value?null:Wn.createElement(xg,ud({},n,{key:t}))},onBeforeChange:Lg,onChange:Lg,onAfterChange:Lg,included:!0,disabled:!1,dots:!1,vertical:!1,reverse:!1,trackStyle:[{}],handleStyle:[{}],railStyle:{},dotStyle:{},activeDotStyle:{}}),t}var Fg=function(e){eg(n,e);var t=og(n);function n(e){var r;Ym(this,n),(r=t.call(this,e)).positionGetValue=function(e){return[]},r.onEnd=function(e){var t=r.state.dragging;r.removeDocumentEvents(),(t||e)&&r.props.onAfterChange(r.getValue()),r.setState({dragging:!1})};var i=void 0!==e.defaultValue?e.defaultValue:e.min,o=void 0!==e.value?e.value:i;return r.state={value:r.trimAlignValue(o),dragging:!1},lg(!("minimumTrackStyle"in e),"minimumTrackStyle will be deprecated, please use trackStyle instead."),lg(!("maximumTrackStyle"in e),"maximumTrackStyle will be deprecated, please use railStyle instead."),r}return Jm(n,[{key:"calcValueByPos",value:function(e){return 0}},{key:"calcOffset",value:function(e){return 0}},{key:"saveHandle",value:function(e,t){}},{key:"removeDocumentEvents",value:function(){}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,r=n.min,i=n.max,o=n.value,a=n.onChange;if("min"in this.props||"max"in this.props){var s=void 0!==o?o:t.value,l=this.trimAlignValue(s,this.props);l!==t.value&&(this.setState({value:l}),r===e.min&&i===e.max||!Eg(s,this.props)||a(l))}}},{key:"onChange",value:function(e){var t=this.props,n=!("value"in t),r=e.value>this.props.max?Xn(Xn({},e),{},{value:this.props.max}):e;n&&this.setState(r);var i=r.value;t.onChange(i)}},{key:"onStart",value:function(e){this.setState({dragging:!0});var t=this.props,n=this.getValue();t.onBeforeChange(n);var r=this.calcValueByPos(e);this.startValue=r,this.startPosition=e,r!==n&&(this.prevMovedHandleIndex=0,this.onChange({value:r}))}},{key:"onMove",value:function(e,t){Dg(e);var n=this.state.value,r=this.calcValueByPos(t);r!==n&&this.onChange({value:r})}},{key:"onKeyboard",value:function(e){var t=this.props,n=t.reverse,r=zg(e,t.vertical,n);if(r){Dg(e);var i=this.state.value,o=r(i,this.props),a=this.trimAlignValue(o);if(a===i)return;this.onChange({value:a}),this.props.onAfterChange(a),this.onEnd()}}},{key:"getValue",value:function(){return this.state.value}},{key:"getLowerBound",value:function(){var e=this.props.startPoint||this.props.min;return this.state.value>e?e:this.state.value}},{key:"getUpperBound",value:function(){return this.state.value<this.props.startPoint?this.props.startPoint:this.state.value}},{key:"trimAlignValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===e)return null;var n=Xn(Xn({},this.props),t),r=Ig(e,n);return Og(r,n)}},{key:"render",value:function(){var e=this,t=this.props,n=t.prefixCls,r=t.vertical,i=t.included,o=t.disabled,a=t.minimumTrackStyle,s=t.trackStyle,l=t.handleStyle,c=t.tabIndex,u=t.ariaLabelForHandle,h=t.ariaLabelledByForHandle,f=t.ariaValueTextFormatterForHandle,p=t.min,d=t.max,m=t.startPoint,g=t.reverse,y=t.handle,v=this.state,b=v.value,_=v.dragging,x=this.calcOffset(b),A=y({className:"".concat(n,"-handle"),prefixCls:n,vertical:r,offset:x,value:b,dragging:_,disabled:o,min:p,max:d,reverse:g,index:0,tabIndex:c,ariaLabel:u,ariaLabelledBy:h,ariaValueTextFormatter:f,style:l[0]||l,ref:function(t){return e.saveHandle(0,t)}}),w=void 0!==m?this.calcOffset(m):0,C=s[0]||s;return{tracks:Wn.createElement(cg,{className:"".concat(n,"-track"),vertical:r,included:i,offset:w,reverse:g,length:x-w,style:Xn(Xn({},a),C)}),handles:A}}}]),n}(Wn.Component);const Ug=Rg(Fg);var Ng=function(e){var t=e.value,n=e.handle,r=e.bounds,i=e.props,o=i.allowCross,a=i.pushable,s=Number(a),l=Ig(t,i),c=l;return o||null==n||void 0===r||(n>0&&l<=r[n-1]+s&&(c=r[n-1]+s),n<r.length-1&&l>=r[n+1]-s&&(c=r[n+1]-s)),Og(c,i)},jg=function(e){eg(n,e);var t=og(n);function n(e){var r;Ym(this,n),(r=t.call(this,e)).positionGetValue=function(e){var t=r.getValue(),n=r.calcValueByPos(e),i=r.getClosestBound(n),o=r.getBoundNeedMoving(n,i);if(n===t[o])return null;var a=pg(t);return a[o]=n,a},r.onEnd=function(e){var t=r.state.handle;r.removeDocumentEvents(),t||(r.dragTrack=!1),(null!==t||e)&&r.props.onAfterChange(r.getValue()),r.setState({handle:null})};var i=e.count,o=e.min,a=e.max,s=Array.apply(void 0,pg(Array(i+1))).map((function(){return o})),l="defaultValue"in e?e.defaultValue:s,c=(void 0!==e.value?e.value:l).map((function(t,n){return Ng({value:t,handle:n,props:e})})),u=c[0]===a?0:c.length-1;return r.state={handle:null,recent:u,bounds:c},r}return Jm(n,[{key:"calcValueByPos",value:function(e){return 0}},{key:"getSliderLength",value:function(){return 0}},{key:"calcOffset",value:function(e){return 0}},{key:"saveHandle",value:function(e,t){}},{key:"removeDocumentEvents",value:function(){}},{key:"componentDidUpdate",value:function(e,t){var n=this,r=this.props,i=r.onChange,o=r.value,a=r.min,s=r.max;if(("min"in this.props||"max"in this.props)&&(a!==e.min||s!==e.max)){var l=o||t.bounds;l.some((function(e){return Eg(e,n.props)}))&&i(l.map((function(e){return Ig(e,n.props)})))}}},{key:"onChange",value:function(e){var t=this.props;if("value"in t){var n={};["handle","recent"].forEach((function(t){void 0!==e[t]&&(n[t]=e[t])})),Object.keys(n).length&&this.setState(n)}else this.setState(e);var r=Xn(Xn({},this.state),e).bounds;t.onChange(r)}},{key:"onStart",value:function(e){var t=this.props,n=this.state,r=this.getValue();t.onBeforeChange(r);var i=this.calcValueByPos(e);this.startValue=i,this.startPosition=e;var o=this.getClosestBound(i);if(this.prevMovedHandleIndex=this.getBoundNeedMoving(i,o),this.setState({handle:this.prevMovedHandleIndex,recent:this.prevMovedHandleIndex}),i!==r[this.prevMovedHandleIndex]){var a=pg(n.bounds);a[this.prevMovedHandleIndex]=i,this.onChange({bounds:a})}}},{key:"onMove",value:function(e,t,n,r){Dg(e);var i=this.state,o=this.props,a=o.max||100,s=o.min||0;if(n){var l=o.vertical?-t:t;l=o.reverse?-l:l;var c=a-Math.max.apply(Math,pg(r)),u=s-Math.min.apply(Math,pg(r)),h=Math.min(Math.max(l/(this.getSliderLength()/(a-s)),u),c),f=r.map((function(e){return Math.floor(Math.max(Math.min(e+h,a),s))}));i.bounds.map((function(e,t){return e===f[t]})).some((function(e){return!e}))&&this.onChange({bounds:f})}else{var p=this.calcValueByPos(t);p!==i.bounds[i.handle]&&this.moveTo(p)}}},{key:"onKeyboard",value:function(e){var t=this.props,n=t.reverse,r=zg(e,t.vertical,n);if(r){Dg(e);var i=this.state,o=this.props,a=i.bounds,s=i.handle,l=a[null===s?i.recent:s],c=r(l,o),u=Ng({value:c,handle:s,bounds:i.bounds,props:o});if(u===l)return;this.moveTo(u,!0)}}},{key:"getValue",value:function(){return this.state.bounds}},{key:"getClosestBound",value:function(e){for(var t=this.state.bounds,n=0,r=1;r<t.length-1;r+=1)e>=t[r]&&(n=r);return Math.abs(t[n+1]-e)<Math.abs(t[n]-e)&&(n+=1),n}},{key:"getBoundNeedMoving",value:function(e,t){var n=this.state,r=n.bounds,i=n.recent,o=t,a=r[t+1]===r[t];return a&&r[i]===r[t]&&(o=i),a&&e!==r[t+1]&&(o=e<r[t+1]?t:t+1),o}},{key:"getLowerBound",value:function(){return this.state.bounds[0]}},{key:"getUpperBound",value:function(){var e=this.state.bounds;return e[e.length-1]}},{key:"getPoints",value:function(){var e=this.props,t=e.marks,n=e.step,r=e.min,i=e.max,o=this.internalPointsCache;if(!o||o.marks!==t||o.step!==n){var a=Xn({},t);if(null!==n)for(var s=r;s<=i;s+=n)a[s]=s;var l=Object.keys(a).map(parseFloat);l.sort((function(e,t){return e-t})),this.internalPointsCache={marks:t,step:n,points:l}}return this.internalPointsCache.points}},{key:"moveTo",value:function(e,t){var n=this,r=this.state,i=this.props,o=pg(r.bounds),a=null===r.handle?r.recent:r.handle;o[a]=e;var s=a;!1!==i.pushable?this.pushSurroundingHandles(o,s):i.allowCross&&(o.sort((function(e,t){return e-t})),s=o.indexOf(e)),this.onChange({recent:s,handle:s,bounds:o}),t&&(this.props.onAfterChange(o),this.setState({},(function(){n.handlesRefs[s].focus()})),this.onEnd())}},{key:"pushSurroundingHandles",value:function(e,t){var n=e[t],r=this.props.pushable,i=Number(r),o=0;if(e[t+1]-n<i&&(o=1),n-e[t-1]<i&&(o=-1),0!==o){var a=t+o,s=o*(e[a]-n);this.pushHandle(e,a,o,i-s)||(e[t]=e[a]-o*i)}}},{key:"pushHandle",value:function(e,t,n,r){for(var i=e[t],o=e[t];n*(o-i)<r;){if(!this.pushHandleOnePoint(e,t,n))return e[t]=i,!1;o=e[t]}return!0}},{key:"pushHandleOnePoint",value:function(e,t,n){var r=this.getPoints(),i=r.indexOf(e[t])+n;if(i>=r.length||i<0)return!1;var o=t+n,a=r[i],s=this.props.pushable,l=Number(s),c=n*(e[o]-a);return!!this.pushHandle(e,o,n,l-c)&&(e[t]=a,!0)}},{key:"trimAlignValue",value:function(e){var t=this.state,n=t.handle,r=t.bounds;return Ng({value:e,handle:n,bounds:r,props:this.props})}},{key:"render",value:function(){var e=this,t=this.state,n=t.handle,r=t.bounds,i=this.props,o=i.prefixCls,a=i.vertical,s=i.included,l=i.disabled,c=i.min,u=i.max,h=i.reverse,f=i.handle,p=i.trackStyle,d=i.handleStyle,m=i.tabIndex,g=i.ariaLabelGroupForHandles,y=i.ariaLabelledByGroupForHandles,v=i.ariaValueTextFormatterGroupForHandles,b=r.map((function(t){return e.calcOffset(t)})),_="".concat(o,"-handle"),x=r.map((function(t,r){var i,s=m[r]||0;(l||null===m[r])&&(s=null);var p=n===r;return f({className:vg()((i={},Hn(i,_,!0),Hn(i,"".concat(_,"-").concat(r+1),!0),Hn(i,"".concat(_,"-dragging"),p),i)),prefixCls:o,vertical:a,dragging:p,offset:b[r],value:t,index:r,tabIndex:s,min:c,max:u,reverse:h,disabled:l,style:d[r],ref:function(t){return e.saveHandle(r,t)},ariaLabel:g[r],ariaLabelledBy:y[r],ariaValueTextFormatter:v[r]})}));return{tracks:r.slice(0,-1).map((function(e,t){var n,r=t+1,i=vg()((Hn(n={},"".concat(o,"-track"),!0),Hn(n,"".concat(o,"-track-").concat(r),!0),n));return Wn.createElement(cg,{className:i,vertical:a,reverse:h,included:s,offset:b[r-1],length:b[r]-b[r-1],style:p[t],key:r})})),handles:x}}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(!("value"in e||"min"in e||"max"in e))return null;var n=e.value||t.bounds,r=n.map((function(n,r){return Ng({value:n,handle:r,bounds:t.bounds,props:e})}));if(t.bounds.length===r.length){if(r.every((function(e,n){return e===t.bounds[n]})))return null}else r=n.map((function(t,n){return Ng({value:t,handle:n,props:e})}));return Xn(Xn({},t),{},{bounds:r})}}]),n}(Wn.Component);jg.displayName="Range",jg.defaultProps={count:1,allowCross:!0,pushable:!1,draggableTrack:!1,tabIndex:[],ariaLabelGroupForHandles:[],ariaLabelledByGroupForHandles:[],ariaValueTextFormatterGroupForHandles:[]};const Vg=Rg(jg);var Gg=function(e){return+setTimeout(e,16)},qg=function(e){return clearTimeout(e)};"undefined"!=typeof window&&"requestAnimationFrame"in window&&(Gg=function(e){return window.requestAnimationFrame(e)},qg=function(e){return window.cancelAnimationFrame(e)});var Wg=0,Hg=new Map;function $g(e){Hg.delete(e)}function Xg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=Wg+=1;function r(t){if(0===t)$g(n),e();else{var i=Gg((function(){r(t-1)}));Hg.set(n,i)}}return r(t),n}function Zg(e,t){return!!e&&e.contains(t)}function Yg(e){return e instanceof HTMLElement?e:qd.findDOMNode(e)}Xg.cancel=function(e){var t=Hg.get(e);return $g(t),qg(t)};var Kg=a(59864);function Jg(e,t){"function"==typeof e?e(t):"object"===ng(e)&&e&&"current"in e&&(e.current=t)}function Qg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter((function(e){return e}));return r.length<=1?r[0]:function(e){t.forEach((function(t){Jg(t,e)}))}}function ey(e){var t,n,r=(0,Kg.isMemo)(e)?e.type.type:e.type;return!("function"==typeof r&&!(null===(t=r.prototype)||void 0===t?void 0:t.render)||"function"==typeof e&&!(null===(n=e.prototype)||void 0===n?void 0:n.render))}function ty(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}var ny=(0,Wn.forwardRef)((function(e,t){var n=e.didUpdate,r=e.getContainer,i=e.children,o=(0,Wn.useRef)(),a=(0,Wn.useRef)();(0,Wn.useImperativeHandle)(t,(function(){return{}}));var s=(0,Wn.useRef)(!1);return!s.current&&ty()&&(a.current=r(),o.current=a.current.parentNode,s.current=!0),(0,Wn.useEffect)((function(){null==n||n(e)})),(0,Wn.useEffect)((function(){return null===a.current.parentNode&&null!==o.current&&o.current.appendChild(a.current),function(){var e,t;null===(e=a.current)||void 0===e||null===(t=e.parentNode)||void 0===t||t.removeChild(a.current)}}),[]),a.current?qd.createPortal(i,a.current):null}));const ry=ny;function iy(e,t,n){return n?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function oy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||fg(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ay(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit".concat(e)]="webkit".concat(t),n["Moz".concat(e)]="moz".concat(t),n["ms".concat(e)]="MS".concat(t),n["O".concat(e)]="o".concat(t.toLowerCase()),n}var sy=function(e,t){var n={animationend:ay("Animation","AnimationEnd"),transitionend:ay("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete n.animationend.animation,"TransitionEvent"in t||delete n.transitionend.transition),n}(ty(),"undefined"!=typeof window?window:{}),ly={};if(ty()){var cy=document.createElement("div");ly=cy.style}var uy={};function hy(e){if(uy[e])return uy[e];var t=sy[e];if(t)for(var n=Object.keys(t),r=n.length,i=0;i<r;i+=1){var o=n[i];if(Object.prototype.hasOwnProperty.call(t,o)&&o in ly)return uy[e]=t[o],uy[e]}return""}var fy=hy("animationend"),py=hy("transitionend"),dy=!(!fy||!py),my=fy||"animationend",gy=py||"transitionend";function yy(e,t){if(!e)return null;if("object"===ng(e)){var n=t.replace(/-\w/g,(function(e){return e[1].toUpperCase()}));return e[n]}return"".concat(e,"-").concat(t)}var vy="none",by="appear",_y="enter",xy="leave",Ay="none",wy="prepare",Cy="start",Ey="active",Sy="end";function Ty(e){var t=Wn.useRef(!1),n=oy(Wn.useState(e),2),r=n[0],i=n[1];return Wn.useEffect((function(){return t.current=!1,function(){t.current=!0}}),[]),[r,function(e,n){n&&t.current||i(e)}]}const By=ty()?Wn.useLayoutEffect:Wn.useEffect;var ky=[wy,Cy,Ey,Sy];function My(e){return e===Ey||e===Sy}function Py(e,t,n,r){var i=r.motionEnter,o=void 0===i||i,a=r.motionAppear,s=void 0===a||a,l=r.motionLeave,c=void 0===l||l,u=r.motionDeadline,h=r.motionLeaveImmediately,f=r.onAppearPrepare,p=r.onEnterPrepare,d=r.onLeavePrepare,m=r.onAppearStart,g=r.onEnterStart,y=r.onLeaveStart,v=r.onAppearActive,b=r.onEnterActive,_=r.onLeaveActive,x=r.onAppearEnd,A=r.onEnterEnd,w=r.onLeaveEnd,C=r.onVisibleChanged,E=oy(Ty(),2),S=E[0],T=E[1],B=oy(Ty(vy),2),k=B[0],M=B[1],P=oy(Ty(null),2),I=P[0],O=P[1],D=(0,Wn.useRef)(!1),z=(0,Wn.useRef)(null);function L(){return n()}var R=(0,Wn.useRef)(!1);function F(e){var t=L();if(!e||e.deadline||e.target===t){var n,r=R.current;k===by&&r?n=null==x?void 0:x(t,e):k===_y&&r?n=null==A?void 0:A(t,e):k===xy&&r&&(n=null==w?void 0:w(t,e)),k!==vy&&r&&!1!==n&&(M(vy,!0),O(null,!0))}}var U=function(e){var t=(0,Wn.useRef)(),n=(0,Wn.useRef)(e);n.current=e;var r=Wn.useCallback((function(e){n.current(e)}),[]);function i(e){e&&(e.removeEventListener(gy,r),e.removeEventListener(my,r))}return Wn.useEffect((function(){return function(){i(t.current)}}),[]),[function(e){t.current&&t.current!==e&&i(t.current),e&&e!==t.current&&(e.addEventListener(gy,r),e.addEventListener(my,r),t.current=e)},i]}(F),N=oy(U,1)[0],j=Wn.useMemo((function(){var e,t,n;switch(k){case by:return Hn(e={},wy,f),Hn(e,Cy,m),Hn(e,Ey,v),e;case _y:return Hn(t={},wy,p),Hn(t,Cy,g),Hn(t,Ey,b),t;case xy:return Hn(n={},wy,d),Hn(n,Cy,y),Hn(n,Ey,_),n;default:return{}}}),[k]),V=oy(function(e,t){var n=oy(Ty(Ay),2),r=n[0],i=n[1],o=function(){var e=Wn.useRef(null);function t(){Xg.cancel(e.current)}return Wn.useEffect((function(){return function(){t()}}),[]),[function n(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;t();var o=Xg((function(){i<=1?r({isCanceled:function(){return o!==e.current}}):n(r,i-1)}));e.current=o},t]}(),a=oy(o,2),s=a[0],l=a[1];return By((function(){if(r!==Ay&&r!==Sy){var e=ky.indexOf(r),n=ky[e+1],o=t(r);!1===o?i(n,!0):s((function(e){function t(){e.isCanceled()||i(n,!0)}!0===o?t():Promise.resolve(o).then(t)}))}}),[e,r]),Wn.useEffect((function(){return function(){l()}}),[]),[function(){i(wy,!0)},r]}(k,(function(e){if(e===wy){var t=j.prepare;return!!t&&t(L())}var n;return q in j&&O((null===(n=j[q])||void 0===n?void 0:n.call(j,L(),null))||null),q===Ey&&(N(L()),u>0&&(clearTimeout(z.current),z.current=setTimeout((function(){F({deadline:!0})}),u))),!0})),2),G=V[0],q=V[1],W=My(q);R.current=W,By((function(){T(t);var n,r=D.current;D.current=!0,e&&(!r&&t&&s&&(n=by),r&&t&&o&&(n=_y),(r&&!t&&c||!r&&h&&!t&&c)&&(n=xy),n&&(M(n),G()))}),[t]),(0,Wn.useEffect)((function(){(k===by&&!s||k===_y&&!o||k===xy&&!c)&&M(vy)}),[s,o,c]),(0,Wn.useEffect)((function(){return function(){D.current=!1,clearTimeout(z.current)}}),[]),(0,Wn.useEffect)((function(){void 0!==S&&k===vy&&(null==C||C(S))}),[S,k]);var H=I;return j.prepare&&q===Cy&&(H=Xn({transition:"none"},H)),[k,q,H,null!=S?S:t]}const Iy=function(e){eg(n,e);var t=og(n);function n(){return Ym(this,n),t.apply(this,arguments)}return Jm(n,[{key:"render",value:function(){return this.props.children}}]),n}(Wn.Component),Oy=function(e){var t=e;function n(e){return!(!e.motionName||!t)}"object"===ng(e)&&(t=e.transitionSupport);var r=Wn.forwardRef((function(e,t){var r=e.visible,i=void 0===r||r,o=e.removeOnLeave,a=void 0===o||o,s=e.forceRender,l=e.children,c=e.motionName,u=e.leavedClassName,h=e.eventProps,f=n(e),p=(0,Wn.useRef)(),d=(0,Wn.useRef)(),m=oy(Py(f,i,(function(){try{return p.current instanceof HTMLElement?p.current:Yg(d.current)}catch(e){return null}}),e),4),g=m[0],y=m[1],v=m[2],b=m[3],_=Wn.useRef(b);b&&(_.current=!0);var x,A=Wn.useCallback((function(e){p.current=e,Jg(t,e)}),[t]),w=Xn(Xn({},h),{},{visible:i});if(l)if(g!==vy&&n(e)){var C,E;y===wy?E="prepare":My(y)?E="active":y===Cy&&(E="start"),x=l(Xn(Xn({},w),{},{className:vg()(yy(c,g),(C={},Hn(C,yy(c,"".concat(g,"-").concat(E)),E),Hn(C,c,"string"==typeof c),C)),style:v}),A)}else x=b?l(Xn({},w),A):!a&&_.current?l(Xn(Xn({},w),{},{className:u}),A):s?l(Xn(Xn({},w),{},{style:{display:"none"}}),A):null;else x=null;return Wn.isValidElement(x)&&ey(x)&&(x.ref||(x=Wn.cloneElement(x,{ref:A}))),Wn.createElement(Iy,{ref:d},x)}));return r.displayName="CSSMotion",r}(dy);var Dy="add",zy="keep",Ly="remove",Ry="removed";function Fy(e){var t;return Xn(Xn({},t=e&&"object"===ng(e)&&"key"in e?e:{key:e}),{},{key:String(t.key)})}function Uy(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(Fy)}function Ny(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=0,i=t.length,o=Uy(e),a=Uy(t);o.forEach((function(e){for(var t=!1,o=r;o<i;o+=1){var s=a[o];if(s.key===e.key){r<o&&(n=n.concat(a.slice(r,o).map((function(e){return Xn(Xn({},e),{},{status:Dy})}))),r=o),n.push(Xn(Xn({},s),{},{status:zy})),r+=1,t=!0;break}}t||n.push(Xn(Xn({},e),{},{status:Ly}))})),r<i&&(n=n.concat(a.slice(r).map((function(e){return Xn(Xn({},e),{},{status:Dy})}))));var s={};n.forEach((function(e){var t=e.key;s[t]=(s[t]||0)+1}));var l=Object.keys(s).filter((function(e){return s[e]>1}));return l.forEach((function(e){(n=n.filter((function(t){var n=t.key,r=t.status;return n!==e||r!==Ly}))).forEach((function(t){t.key===e&&(t.status=zy)}))})),n}var jy=["component","children","onVisibleChanged"],Vy=["status"],Gy=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Oy,n=function(e){eg(r,e);var n=og(r);function r(){var e;Ym(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).state={keyEntities:[]},e.removeKey=function(t){e.setState((function(e){return{keyEntities:e.keyEntities.map((function(e){return e.key!==t?e:Xn(Xn({},e),{},{status:Ry})}))}}))},e}return Jm(r,[{key:"render",value:function(){var e=this,n=this.state.keyEntities,r=this.props,i=r.component,o=r.children,a=r.onVisibleChanged,s=ug(r,jy),l=i||Wn.Fragment,c={};return Gy.forEach((function(e){c[e]=s[e],delete s[e]})),delete s.keys,Wn.createElement(l,s,n.map((function(n){var r=n.status,i=ug(n,Vy),s=r===Dy||r===zy;return Wn.createElement(t,ud({},c,{key:i.key,visible:s,eventProps:i,onVisibleChanged:function(t){null==a||a(t,{key:i.key}),t||e.removeKey(i.key)}}),o)})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.keys,r=t.keyEntities,i=Uy(n);return{keyEntities:Ny(r,i).filter((function(e){var t=r.find((function(t){var n=t.key;return e.key===n}));return!t||t.status!==Ry||e.status!==Ly}))}}}]),r}(Wn.Component);n.defaultProps={component:"div"}}(dy);const qy=Oy;function Wy(e){var t=e.prefixCls,n=e.motion,r=e.animation,i=e.transitionName;return n||(r?{motionName:"".concat(t,"-").concat(r)}:i?{motionName:i}:null)}function Hy(e){var t=e.prefixCls,n=e.visible,r=e.zIndex,i=e.mask,o=e.maskMotion,a=e.maskAnimation,s=e.maskTransitionName;if(!i)return null;var l={};return(o||s||a)&&(l=Xn({motionAppear:!0},Wy({motion:o,prefixCls:t,transitionName:s,animation:a}))),Wn.createElement(qy,ud({},l,{visible:n,removeOnLeave:!0}),(function(e){var n=e.className;return Wn.createElement("div",{style:{zIndex:r},className:vg()("".concat(t,"-mask"),n)})}))}function $y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$y(Object(n),!0).forEach((function(t){Yy(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zy(e){return Zy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zy(e)}function Yy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ky,Jy={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function Qy(){if(void 0!==Ky)return Ky;Ky="";var e=document.createElement("p").style;for(var t in Jy)t+"Transform"in e&&(Ky=t);return Ky}function ev(){return Qy()?"".concat(Qy(),"TransitionProperty"):"transitionProperty"}function tv(){return Qy()?"".concat(Qy(),"Transform"):"transform"}function nv(e,t){var n=ev();n&&(e.style[n]=t,"transitionProperty"!==n&&(e.style.transitionProperty=t))}function rv(e,t){var n=tv();n&&(e.style[n]=t,"transform"!==n&&(e.style.transform=t))}var iv,ov=/matrix\((.*)\)/,av=/matrix3d\((.*)\)/;function sv(e){var t=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=t}function lv(e,t,n){var r=n;if("object"!==Zy(t))return void 0!==r?("number"==typeof r&&(r="".concat(r,"px")),void(e.style[t]=r)):iv(e,t);for(var i in t)t.hasOwnProperty(i)&&lv(e,i,t[i])}function cv(e,t){var n=e["page".concat(t?"Y":"X","Offset")],r="scroll".concat(t?"Top":"Left");if("number"!=typeof n){var i=e.document;"number"!=typeof(n=i.documentElement[r])&&(n=i.body[r])}return n}function uv(e){return cv(e)}function hv(e){return cv(e,!0)}function fv(e){var t=function(e){var t,n,r,i=e.ownerDocument,o=i.body,a=i&&i.documentElement;return n=(t=e.getBoundingClientRect()).left,r=t.top,{left:n-=a.clientLeft||o.clientLeft||0,top:r-=a.clientTop||o.clientTop||0}}(e),n=e.ownerDocument,r=n.defaultView||n.parentWindow;return t.left+=uv(r),t.top+=hv(r),t}function pv(e){return null!=e&&e==e.window}function dv(e){return pv(e)?e.document:9===e.nodeType?e:e.ownerDocument}var mv=new RegExp("^(".concat(/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,")(?!px)[a-z%]+$"),"i"),gv=/^(top|right|bottom|left)$/;function yv(e,t){return"left"===e?t.useCssRight?"right":e:t.useCssBottom?"bottom":e}function vv(e){return"left"===e?"right":"right"===e?"left":"top"===e?"bottom":"bottom"===e?"top":void 0}function bv(e,t,n){"static"===lv(e,"position")&&(e.style.position="relative");var r=-999,i=-999,o=yv("left",n),a=yv("top",n),s=vv(o),l=vv(a);"left"!==o&&(r=999),"top"!==a&&(i=999);var c,u="",h=fv(e);("left"in t||"top"in t)&&(u=(c=e).style.transitionProperty||c.style[ev()]||"",nv(e,"none")),"left"in t&&(e.style[s]="",e.style[o]="".concat(r,"px")),"top"in t&&(e.style[l]="",e.style[a]="".concat(i,"px")),sv(e);var f=fv(e),p={};for(var d in t)if(t.hasOwnProperty(d)){var m=yv(d,n),g="left"===d?r:i,y=h[d]-f[d];p[m]=m===d?g+y:g-y}lv(e,p),sv(e),("left"in t||"top"in t)&&nv(e,u);var v={};for(var b in t)if(t.hasOwnProperty(b)){var _=yv(b,n),x=t[b]-h[b];v[_]=b===_?p[_]+x:p[_]-x}lv(e,v)}function _v(e,t){for(var n=0;n<e.length;n++)t(e[n])}function xv(e){return"border-box"===iv(e,"boxSizing")}"undefined"!=typeof window&&(iv=window.getComputedStyle?function(e,t,n){var r=n,i="",o=dv(e);return(r=r||o.defaultView.getComputedStyle(e,null))&&(i=r.getPropertyValue(t)||r[t]),i}:function(e,t){var n=e.currentStyle&&e.currentStyle[t];if(mv.test(n)&&!gv.test(t)){var r=e.style,i=r.left,o=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left,r.left="fontSize"===t?"1em":n||0,n=r.pixelLeft+"px",r.left=i,e.runtimeStyle.left=o}return""===n?"auto":n});var Av=["margin","border","padding"];function wv(e,t,n){var r,i={},o=e.style;for(r in t)t.hasOwnProperty(r)&&(i[r]=o[r],o[r]=t[r]);for(r in n.call(e),t)t.hasOwnProperty(r)&&(o[r]=i[r])}function Cv(e,t,n){var r,i,o,a=0;for(i=0;i<t.length;i++)if(r=t[i])for(o=0;o<n.length;o++){var s;s="border"===r?"".concat(r).concat(n[o],"Width"):r+n[o],a+=parseFloat(iv(e,s))||0}return a}var Ev={getParent:function(e){var t=e;do{t=11===t.nodeType&&t.host?t.host:t.parentNode}while(t&&1!==t.nodeType&&9!==t.nodeType);return t}};function Sv(e,t,n){var r=n;if(pv(e))return"width"===t?Ev.viewportWidth(e):Ev.viewportHeight(e);if(9===e.nodeType)return"width"===t?Ev.docWidth(e):Ev.docHeight(e);var i="width"===t?["Left","Right"]:["Top","Bottom"],o="width"===t?e.getBoundingClientRect().width:e.getBoundingClientRect().height,a=xv(e),s=0;(null==o||o<=0)&&(o=void 0,(null==(s=iv(e,t))||Number(s)<0)&&(s=e.style[t]||0),s=parseFloat(s)||0),void 0===r&&(r=a?1:-1);var l=void 0!==o||a,c=o||s;return-1===r?l?c-Cv(e,["border","padding"],i):s:l?1===r?c:c+(2===r?-Cv(e,["border"],i):Cv(e,["margin"],i)):s+Cv(e,Av.slice(r),i)}_v(["Width","Height"],(function(e){Ev["doc".concat(e)]=function(t){var n=t.document;return Math.max(n.documentElement["scroll".concat(e)],n.body["scroll".concat(e)],Ev["viewport".concat(e)](n))},Ev["viewport".concat(e)]=function(t){var n="client".concat(e),r=t.document,i=r.body,o=r.documentElement[n];return"CSS1Compat"===r.compatMode&&o||i&&i[n]||o}}));var Tv={position:"absolute",visibility:"hidden",display:"block"};function Bv(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=t[0];return 0!==i.offsetWidth?r=Sv.apply(void 0,t):wv(i,Tv,(function(){r=Sv.apply(void 0,t)})),r}function kv(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}_v(["width","height"],(function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);Ev["outer".concat(t)]=function(t,n){return t&&Bv(t,e,n?0:1)};var n="width"===e?["Left","Right"]:["Top","Bottom"];Ev[e]=function(t,r){var i=r;return void 0!==i?t?(xv(t)&&(i+=Cv(t,["padding","border"],n)),lv(t,e,i)):void 0:t&&Bv(t,e,-1)}}));var Mv={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getDocument:dv,offset:function(e,t,n){if(void 0===t)return fv(e);!function(e,t,n){if(n.ignoreShake){var r=fv(e),i=r.left.toFixed(0),o=r.top.toFixed(0),a=t.left.toFixed(0),s=t.top.toFixed(0);if(i===a&&o===s)return}n.useCssRight||n.useCssBottom?bv(e,t,n):n.useCssTransform&&tv()in document.body.style?function(e,t){var n=fv(e),r=function(e){var t=window.getComputedStyle(e,null),n=t.getPropertyValue("transform")||t.getPropertyValue(tv());if(n&&"none"!==n){var r=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(r[12]||r[4],0),y:parseFloat(r[13]||r[5],0)}}return{x:0,y:0}}(e),i={x:r.x,y:r.y};"left"in t&&(i.x=r.x+t.left-n.left),"top"in t&&(i.y=r.y+t.top-n.top),function(e,t){var n=window.getComputedStyle(e,null),r=n.getPropertyValue("transform")||n.getPropertyValue(tv());if(r&&"none"!==r){var i,o=r.match(ov);o?((i=(o=o[1]).split(",").map((function(e){return parseFloat(e,10)})))[4]=t.x,i[5]=t.y,rv(e,"matrix(".concat(i.join(","),")"))):((i=r.match(av)[1].split(",").map((function(e){return parseFloat(e,10)})))[12]=t.x,i[13]=t.y,rv(e,"matrix3d(".concat(i.join(","),")")))}else rv(e,"translateX(".concat(t.x,"px) translateY(").concat(t.y,"px) translateZ(0)"))}(e,i)}(e,t):bv(e,t,n)}(e,t,n||{})},isWindow:pv,each:_v,css:lv,clone:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);if(e.overflow)for(t in e)e.hasOwnProperty(t)&&(n.overflow[t]=e.overflow[t]);return n},mix:kv,getWindowScrollLeft:function(e){return uv(e)},getWindowScrollTop:function(e){return hv(e)},merge:function(){for(var e={},t=0;t<arguments.length;t++)Mv.mix(e,t<0||arguments.length<=t?void 0:arguments[t]);return e},viewportWidth:0,viewportHeight:0};kv(Mv,Ev);var Pv=Mv.getParent;function Iv(e){if(Mv.isWindow(e)||9===e.nodeType)return null;var t,n=Mv.getDocument(e).body,r=Mv.css(e,"position");if("fixed"!==r&&"absolute"!==r)return"html"===e.nodeName.toLowerCase()?null:Pv(e);for(t=Pv(e);t&&t!==n&&9!==t.nodeType;t=Pv(t))if("static"!==(r=Mv.css(t,"position")))return t;return null}var Ov=Mv.getParent;function Dv(e,t){for(var n={left:0,right:1/0,top:0,bottom:1/0},r=Iv(e),i=Mv.getDocument(e),o=i.defaultView||i.parentWindow,a=i.body,s=i.documentElement;r;){if(-1!==navigator.userAgent.indexOf("MSIE")&&0===r.clientWidth||r===a||r===s||"visible"===Mv.css(r,"overflow")){if(r===a||r===s)break}else{var l=Mv.offset(r);l.left+=r.clientLeft,l.top+=r.clientTop,n.top=Math.max(n.top,l.top),n.right=Math.min(n.right,l.left+r.clientWidth),n.bottom=Math.min(n.bottom,l.top+r.clientHeight),n.left=Math.max(n.left,l.left)}r=Iv(r)}var c=null;Mv.isWindow(e)||9===e.nodeType||(c=e.style.position,"absolute"===Mv.css(e,"position")&&(e.style.position="fixed"));var u=Mv.getWindowScrollLeft(o),h=Mv.getWindowScrollTop(o),f=Mv.viewportWidth(o),p=Mv.viewportHeight(o),d=s.scrollWidth,m=s.scrollHeight,g=window.getComputedStyle(a);if("hidden"===g.overflowX&&(d=o.innerWidth),"hidden"===g.overflowY&&(m=o.innerHeight),e.style&&(e.style.position=c),t||function(e){if(Mv.isWindow(e)||9===e.nodeType)return!1;var t=Mv.getDocument(e),n=t.body,r=null;for(r=Ov(e);r&&r!==n&&r!==t;r=Ov(r))if("fixed"===Mv.css(r,"position"))return!0;return!1}(e))n.left=Math.max(n.left,u),n.top=Math.max(n.top,h),n.right=Math.min(n.right,u+f),n.bottom=Math.min(n.bottom,h+p);else{var y=Math.max(d,u+f);n.right=Math.min(n.right,y);var v=Math.max(m,h+p);n.bottom=Math.min(n.bottom,v)}return n.top>=0&&n.left>=0&&n.bottom>n.top&&n.right>n.left?n:null}function zv(e){var t,n,r;if(Mv.isWindow(e)||9===e.nodeType){var i=Mv.getWindow(e);t={left:Mv.getWindowScrollLeft(i),top:Mv.getWindowScrollTop(i)},n=Mv.viewportWidth(i),r=Mv.viewportHeight(i)}else t=Mv.offset(e),n=Mv.outerWidth(e),r=Mv.outerHeight(e);return t.width=n,t.height=r,t}function Lv(e,t){var n=t.charAt(0),r=t.charAt(1),i=e.width,o=e.height,a=e.left,s=e.top;return"c"===n?s+=o/2:"b"===n&&(s+=o),"c"===r?a+=i/2:"r"===r&&(a+=i),{left:a,top:s}}function Rv(e,t,n,r,i){var o=Lv(t,n[1]),a=Lv(e,n[0]),s=[a.left-o.left,a.top-o.top];return{left:Math.round(e.left-s[0]+r[0]-i[0]),top:Math.round(e.top-s[1]+r[1]-i[1])}}function Fv(e,t,n){return e.left<n.left||e.left+t.width>n.right}function Uv(e,t,n){return e.top<n.top||e.top+t.height>n.bottom}function Nv(e,t,n){var r=[];return Mv.each(e,(function(e){r.push(e.replace(t,(function(e){return n[e]})))})),r}function jv(e,t){return e[t]=-e[t],e}function Vv(e,t){return(/%$/.test(e)?parseInt(e.substring(0,e.length-1),10)/100*t:parseInt(e,10))||0}function Gv(e,t){e[0]=Vv(e[0],t.width),e[1]=Vv(e[1],t.height)}function qv(e,t,n,r){var i=n.points,o=n.offset||[0,0],a=n.targetOffset||[0,0],s=n.overflow,l=n.source||e;o=[].concat(o),a=[].concat(a);var c={},u=0,h=Dv(l,!(!(s=s||{})||!s.alwaysByViewport)),f=zv(l);Gv(o,f),Gv(a,t);var p=Rv(f,t,i,o,a),d=Mv.merge(f,p);if(h&&(s.adjustX||s.adjustY)&&r){if(s.adjustX&&Fv(p,f,h)){var m=Nv(i,/[lr]/gi,{l:"r",r:"l"}),g=jv(o,0),y=jv(a,0);(function(e,t,n){return e.left>n.right||e.left+t.width<n.left})(Rv(f,t,m,g,y),f,h)||(u=1,i=m,o=g,a=y)}if(s.adjustY&&Uv(p,f,h)){var v=Nv(i,/[tb]/gi,{t:"b",b:"t"}),b=jv(o,1),_=jv(a,1);(function(e,t,n){return e.top>n.bottom||e.top+t.height<n.top})(Rv(f,t,v,b,_),f,h)||(u=1,i=v,o=b,a=_)}u&&(p=Rv(f,t,i,o,a),Mv.mix(d,p));var x=Fv(p,f,h),A=Uv(p,f,h);if(x||A){var w=i;x&&(w=Nv(i,/[lr]/gi,{l:"r",r:"l"})),A&&(w=Nv(i,/[tb]/gi,{t:"b",b:"t"})),i=w,o=n.offset||[0,0],a=n.targetOffset||[0,0]}c.adjustX=s.adjustX&&x,c.adjustY=s.adjustY&&A,(c.adjustX||c.adjustY)&&(d=function(e,t,n,r){var i=Mv.clone(e),o={width:t.width,height:t.height};return r.adjustX&&i.left<n.left&&(i.left=n.left),r.resizeWidth&&i.left>=n.left&&i.left+o.width>n.right&&(o.width-=i.left+o.width-n.right),r.adjustX&&i.left+o.width>n.right&&(i.left=Math.max(n.right-o.width,n.left)),r.adjustY&&i.top<n.top&&(i.top=n.top),r.resizeHeight&&i.top>=n.top&&i.top+o.height>n.bottom&&(o.height-=i.top+o.height-n.bottom),r.adjustY&&i.top+o.height>n.bottom&&(i.top=Math.max(n.bottom-o.height,n.top)),Mv.mix(i,o)}(p,f,h,c))}return d.width!==f.width&&Mv.css(l,"width",Mv.width(l)+d.width-f.width),d.height!==f.height&&Mv.css(l,"height",Mv.height(l)+d.height-f.height),Mv.offset(l,{left:d.left,top:d.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform,ignoreShake:n.ignoreShake}),{points:i,offset:o,targetOffset:a,overflow:c}}function Wv(e,t,n){var r=n.target||t,i=zv(r),o=!function(e,t){var n=Dv(e,t),r=zv(e);return!n||r.left+r.width<=n.left||r.top+r.height<=n.top||r.left>=n.right||r.top>=n.bottom}(r,n.overflow&&n.overflow.alwaysByViewport);return qv(e,i,n,o)}Wv.__getOffsetParent=Iv,Wv.__getVisibleRectForElement=Dv;var Hv=a(18446),$v=a.n(Hv),Xv=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},t}()}(),Zv="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,Yv=void 0!==a.g&&a.g.Math===Math?a.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),Kv="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(Yv):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)},Jv=["top","right","bottom","left","width","height","size","weight"],Qv="undefined"!=typeof MutationObserver,eb=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,i=0;function o(){n&&(n=!1,e()),r&&s()}function a(){Kv(o)}function s(){var e=Date.now();if(n){if(e-i<2)return;r=!0}else n=!0,r=!1,setTimeout(a,20);i=e}return s}(this.refresh.bind(this))}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){Zv&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Qv?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){Zv&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;Jv.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),tb=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},nb=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||Yv},rb=lb(0,0,0,0);function ib(e){return parseFloat(e)||0}function ob(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+ib(e["border-"+n+"-width"])}),0)}var ab="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof nb(e).SVGGraphicsElement}:function(e){return e instanceof nb(e).SVGElement&&"function"==typeof e.getBBox};function sb(e){return Zv?ab(e)?function(e){var t=e.getBBox();return lb(0,0,t.width,t.height)}(e):function(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return rb;var r=nb(e).getComputedStyle(e),i=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],o=e["padding-"+i];t[i]=ib(o)}return t}(r),o=i.left+i.right,a=i.top+i.bottom,s=ib(r.width),l=ib(r.height);if("border-box"===r.boxSizing&&(Math.round(s+o)!==t&&(s-=ob(r,"left","right")+o),Math.round(l+a)!==n&&(l-=ob(r,"top","bottom")+a)),!function(e){return e===nb(e).document.documentElement}(e)){var c=Math.round(s+o)-t,u=Math.round(l+a)-n;1!==Math.abs(c)&&(s-=c),1!==Math.abs(u)&&(l-=u)}return lb(i.left,i.top,s,l)}(e):rb}function lb(e,t,n,r){return{x:e,y:t,width:n,height:r}}var cb=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=lb(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=sb(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),ub=function(e,t){var n,r,i,o,a,s,l,c=(r=(n=t).x,i=n.y,o=n.width,a=n.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(s.prototype),tb(l,{x:r,y:i,width:o,height:a,top:i,right:r+o,bottom:a+i,left:r}),l);tb(this,{target:e,contentRect:c})},hb=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new Xv,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof nb(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new cb(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof nb(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new ub(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),fb="undefined"!=typeof WeakMap?new WeakMap:new Xv,pb=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=eb.getInstance(),r=new hb(t,n,this);fb.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){pb.prototype[e]=function(){var t;return(t=fb.get(this))[e].apply(t,arguments)}}));const db=void 0!==Yv.ResizeObserver?Yv.ResizeObserver:pb;function mb(e,t){var n=null,r=null,i=new db((function(e){var i=oy(e,1)[0].target;if(document.documentElement.contains(i)){var o=i.getBoundingClientRect(),a=o.width,s=o.height,l=Math.floor(a),c=Math.floor(s);n===l&&r===c||Promise.resolve().then((function(){t({width:l,height:c})})),n=l,r=c}}));return e&&i.observe(e),function(){i.disconnect()}}function gb(e){return"function"!=typeof e?null:e()}function yb(e){return"object"===ng(e)&&e?e:null}var vb=function(e,t){var n=e.children,r=e.disabled,i=e.target,o=e.align,a=e.onAlign,s=e.monitorWindowResize,l=e.monitorBufferTime,c=void 0===l?0:l,u=Wn.useRef({}),h=Wn.useRef(),f=Wn.Children.only(n),p=Wn.useRef({});p.current.disabled=r,p.current.target=i,p.current.align=o,p.current.onAlign=a;var d=function(e,t){var n=Wn.useRef(!1),r=Wn.useRef(null);function i(){window.clearTimeout(r.current)}return[function e(o){if(n.current&&!0!==o)i(),r.current=window.setTimeout((function(){n.current=!1,e()}),t);else{if(!1===function(){var e=p.current,t=e.disabled,n=e.target,r=e.align,i=e.onAlign;if(!t&&n){var o,a=h.current,s=gb(n),l=yb(n);u.current.element=s,u.current.point=l,u.current.align=r;var c=document.activeElement;return s&&function(e){if(!e)return!1;if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox();if(t.width||t.height)return!0}if(e.getBoundingClientRect){var n=e.getBoundingClientRect();if(n.width||n.height)return!0}return!1}(s)?o=Wv(a,s,r):l&&(o=function(e,t,n){var r,i,o=Mv.getDocument(e),a=o.defaultView||o.parentWindow,s=Mv.getWindowScrollLeft(a),l=Mv.getWindowScrollTop(a),c=Mv.viewportWidth(a),u=Mv.viewportHeight(a),h={left:r="pageX"in t?t.pageX:s+t.clientX,top:i="pageY"in t?t.pageY:l+t.clientY,width:0,height:0},f=r>=0&&r<=s+c&&i>=0&&i<=l+u,p=[n.points[0],"cc"];return qv(e,h,Xy(Xy({},n),{},{points:p}),f)}(a,l,r)),function(e,t){e!==document.activeElement&&Zg(t,e)&&"function"==typeof e.focus&&e.focus()}(c,a),i&&o&&i(a,o),!0}return!1}())return;n.current=!0,i(),r.current=window.setTimeout((function(){n.current=!1}),t)}},function(){n.current=!1,i()}]}(0,c),m=oy(d,2),g=m[0],y=m[1],v=Wn.useRef({cancel:function(){}}),b=Wn.useRef({cancel:function(){}});Wn.useEffect((function(){var e,t,n=gb(i),r=yb(i);h.current!==b.current.element&&(b.current.cancel(),b.current.element=h.current,b.current.cancel=mb(h.current,g)),u.current.element===n&&((e=u.current.point)===(t=r)||e&&t&&("pageX"in t&&"pageY"in t?e.pageX===t.pageX&&e.pageY===t.pageY:"clientX"in t&&"clientY"in t&&e.clientX===t.clientX&&e.clientY===t.clientY))&&$v()(u.current.align,o)||(g(),v.current.element!==n&&(v.current.cancel(),v.current.element=n,v.current.cancel=mb(n,g)))})),Wn.useEffect((function(){r?y():g()}),[r]);var _=Wn.useRef(null);return Wn.useEffect((function(){s?_.current||(_.current=gg(window,"resize",g)):_.current&&(_.current.remove(),_.current=null)}),[s]),Wn.useEffect((function(){return function(){v.current.cancel(),b.current.cancel(),_.current&&_.current.remove(),y()}}),[]),Wn.useImperativeHandle(t,(function(){return{forceAlign:function(){return g(!0)}}})),Wn.isValidElement(f)&&(f=Wn.cloneElement(f,{ref:Qg(f.ref,h)})),f},bb=Wn.forwardRef(vb);bb.displayName="Align";const _b=bb,xb=ty()?Wn.useLayoutEffect:Wn.useEffect;var Ab=a(87757),wb=a.n(Ab);function Cb(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function Eb(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Cb(o,r,i,a,s,"next",e)}function s(e){Cb(o,r,i,a,s,"throw",e)}a(void 0)}))}}var Sb=["measure","align",null,"motion"],Tb=Wn.forwardRef((function(e,t){var n=e.visible,r=e.prefixCls,i=e.className,o=e.style,a=e.children,s=e.zIndex,l=e.stretch,c=e.destroyPopupOnHide,u=e.forceRender,h=e.align,f=e.point,p=e.getRootDomNode,d=e.getClassNameFromAlign,m=e.onAlign,g=e.onMouseEnter,y=e.onMouseLeave,v=e.onMouseDown,b=e.onTouchStart,_=(0,Wn.useRef)(),x=(0,Wn.useRef)(),A=oy((0,Wn.useState)(),2),w=A[0],C=A[1],E=function(e){var t=oy(Wn.useState({width:0,height:0}),2),n=t[0],r=t[1];return[Wn.useMemo((function(){var t={};if(e){var r=n.width,i=n.height;-1!==e.indexOf("height")&&i?t.height=i:-1!==e.indexOf("minHeight")&&i&&(t.minHeight=i),-1!==e.indexOf("width")&&r?t.width=r:-1!==e.indexOf("minWidth")&&r&&(t.minWidth=r)}return t}),[e,n]),function(e){r({width:e.offsetWidth,height:e.offsetHeight})}]}(l),S=oy(E,2),T=S[0],B=S[1],k=function(e,t){var n=oy(Ty(null),2),r=n[0],i=n[1],o=(0,Wn.useRef)();function a(e){i(e,!0)}function s(){Xg.cancel(o.current)}return(0,Wn.useEffect)((function(){a("measure")}),[e]),(0,Wn.useEffect)((function(){"measure"===r&&(l&&B(p())),r&&(o.current=Xg(Eb(wb().mark((function e(){var t,n;return wb().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Sb.indexOf(r),(n=Sb[t+1])&&-1!==t&&a(n);case 3:case"end":return e.stop()}}),e)})))))}),[r]),(0,Wn.useEffect)((function(){return function(){s()}}),[]),[r,function(e){s(),o.current=Xg((function(){a((function(e){switch(r){case"align":return"motion";case"motion":return"stable"}return e})),null==e||e()}))}]}(n),M=oy(k,2),P=M[0],I=M[1],O=oy((0,Wn.useState)(null),2),D=O[0],z=O[1],L=(0,Wn.useRef)();function R(){var e;null===(e=_.current)||void 0===e||e.forceAlign()}function F(e,t){var n=d(t);w!==n&&C(n),z(t),"align"===P&&(null==m||m(e,t))}xb((function(){if(D&&"align"===P){var e=d(D);w!==e?R():I((function(){var e;null===(e=L.current)||void 0===e||e.call(L)}))}}),[D]);var U=Xn({},Wy(e));function N(){return new Promise((function(e){L.current=e}))}["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach((function(e){var t=U[e];U[e]=function(e,n){return I(),null==t?void 0:t(e,n)}})),Wn.useEffect((function(){U.motionName||"motion"!==P||I()}),[U.motionName,P]),Wn.useImperativeHandle(t,(function(){return{forceAlign:R,getElement:function(){return x.current}}}));var j=Xn(Xn({},T),{},{zIndex:s,opacity:"motion"!==P&&"stable"!==P&&n?0:void 0,pointerEvents:n||"stable"===P?void 0:"none"},o),V=!0;!(null==h?void 0:h.points)||"align"!==P&&"stable"!==P||(V=!1);var G=a;return Wn.Children.count(a)>1&&(G=Wn.createElement("div",{className:"".concat(r,"-content")},a)),Wn.createElement(qy,ud({visible:n,ref:x,leavedClassName:"".concat(r,"-hidden")},U,{onAppearPrepare:N,onEnterPrepare:N,removeOnLeave:c,forceRender:u}),(function(e,t){var n=e.className,o=e.style,a=vg()(r,i,w,n);return Wn.createElement(_b,{target:f||p,key:"popup",ref:_,monitorWindowResize:!0,disabled:V,align:h,onAlign:F},Wn.createElement("div",{ref:t,className:a,onMouseEnter:g,onMouseLeave:y,onMouseDownCapture:v,onTouchStartCapture:b,style:Xn(Xn({},o),j)},G))}))}));Tb.displayName="PopupInner";const Bb=Tb;var kb=Wn.forwardRef((function(e,t){var n=e.prefixCls,r=e.visible,i=e.zIndex,o=e.children,a=e.mobile,s=(a=void 0===a?{}:a).popupClassName,l=a.popupStyle,c=a.popupMotion,u=void 0===c?{}:c,h=a.popupRender,f=Wn.useRef();Wn.useImperativeHandle(t,(function(){return{forceAlign:function(){},getElement:function(){return f.current}}}));var p=Xn({zIndex:i},l),d=o;return Wn.Children.count(o)>1&&(d=Wn.createElement("div",{className:"".concat(n,"-content")},o)),h&&(d=h(d)),Wn.createElement(qy,ud({visible:r,ref:f,removeOnLeave:!0},u),(function(e,t){var r=e.className,i=e.style,o=vg()(n,s,r);return Wn.createElement("div",{ref:t,className:o,style:Xn(Xn({},i),p)},d)}))}));kb.displayName="MobilePopupInner";const Mb=kb;var Pb=["visible","mobile"],Ib=Wn.forwardRef((function(e,t){var n=e.visible,r=e.mobile,i=ug(e,Pb),o=oy((0,Wn.useState)(n),2),a=o[0],s=o[1],l=oy((0,Wn.useState)(!1),2),c=l[0],u=l[1],h=Xn(Xn({},i),{},{visible:a});(0,Wn.useEffect)((function(){s(n),n&&r&&u(function(){if("undefined"==typeof navigator||"undefined"==typeof window)return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return!(!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(null==e?void 0:e.substr(0,4)))}())}),[n,r]);var f=c?Wn.createElement(Mb,ud({},h,{mobile:r,ref:t})):Wn.createElement(Bb,ud({},h,{ref:t}));return Wn.createElement("div",null,Wn.createElement(Hy,h),f)}));Ib.displayName="Popup";const Ob=Ib,Db=Wn.createContext(null);function zb(){}var Lb=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];const Rb=(Fb=ry,Ub=function(e){eg(n,e);var t=og(n);function n(e){var r,i;return Ym(this,n),(r=t.call(this,e)).popupRef=Wn.createRef(),r.triggerRef=Wn.createRef(),r.portalContainer=void 0,r.attachId=void 0,r.clickOutsideHandler=void 0,r.touchOutsideHandler=void 0,r.contextMenuOutsideHandler1=void 0,r.contextMenuOutsideHandler2=void 0,r.mouseDownTimeout=void 0,r.focusTime=void 0,r.preClickTime=void 0,r.preTouchTime=void 0,r.delayTimer=void 0,r.hasPopupMouseDown=void 0,r.onMouseEnter=function(e){var t=r.props.mouseEnterDelay;r.fireEvents("onMouseEnter",e),r.delaySetPopupVisible(!0,t,t?null:e)},r.onMouseMove=function(e){r.fireEvents("onMouseMove",e),r.setPoint(e)},r.onMouseLeave=function(e){r.fireEvents("onMouseLeave",e),r.delaySetPopupVisible(!1,r.props.mouseLeaveDelay)},r.onPopupMouseEnter=function(){r.clearDelayTimer()},r.onPopupMouseLeave=function(e){var t;e.relatedTarget&&!e.relatedTarget.setTimeout&&Zg(null===(t=r.popupRef.current)||void 0===t?void 0:t.getElement(),e.relatedTarget)||r.delaySetPopupVisible(!1,r.props.mouseLeaveDelay)},r.onFocus=function(e){r.fireEvents("onFocus",e),r.clearDelayTimer(),r.isFocusToShow()&&(r.focusTime=Date.now(),r.delaySetPopupVisible(!0,r.props.focusDelay))},r.onMouseDown=function(e){r.fireEvents("onMouseDown",e),r.preClickTime=Date.now()},r.onTouchStart=function(e){r.fireEvents("onTouchStart",e),r.preTouchTime=Date.now()},r.onBlur=function(e){r.fireEvents("onBlur",e),r.clearDelayTimer(),r.isBlurToHide()&&r.delaySetPopupVisible(!1,r.props.blurDelay)},r.onContextMenu=function(e){e.preventDefault(),r.fireEvents("onContextMenu",e),r.setPopupVisible(!0,e)},r.onContextMenuClose=function(){r.isContextMenuToShow()&&r.close()},r.onClick=function(e){if(r.fireEvents("onClick",e),r.focusTime){var t;if(r.preClickTime&&r.preTouchTime?t=Math.min(r.preClickTime,r.preTouchTime):r.preClickTime?t=r.preClickTime:r.preTouchTime&&(t=r.preTouchTime),Math.abs(t-r.focusTime)<20)return;r.focusTime=0}r.preClickTime=0,r.preTouchTime=0,r.isClickToShow()&&(r.isClickToHide()||r.isBlurToHide())&&e&&e.preventDefault&&e.preventDefault();var n=!r.state.popupVisible;(r.isClickToHide()&&!n||n&&r.isClickToShow())&&r.setPopupVisible(!r.state.popupVisible,e)},r.onPopupMouseDown=function(){var e;r.hasPopupMouseDown=!0,clearTimeout(r.mouseDownTimeout),r.mouseDownTimeout=window.setTimeout((function(){r.hasPopupMouseDown=!1}),0),r.context&&(e=r.context).onPopupMouseDown.apply(e,arguments)},r.onDocumentClick=function(e){if(!r.props.mask||r.props.maskClosable){var t=e.target,n=r.getRootDomNode(),i=r.getPopupDomNode();Zg(n,t)&&!r.isContextMenuOnly()||Zg(i,t)||r.hasPopupMouseDown||r.close()}},r.getRootDomNode=function(){var e=r.props.getTriggerDOMNode;if(e)return e(r.triggerRef.current);try{var t=Yg(r.triggerRef.current);if(t)return t}catch(e){}return qd.findDOMNode(rg(r))},r.getPopupClassNameFromAlign=function(e){var t=[],n=r.props,i=n.popupPlacement,o=n.builtinPlacements,a=n.prefixCls,s=n.alignPoint,l=n.getPopupClassNameFromAlign;return i&&o&&t.push(function(e,t,n,r){for(var i=n.points,o=Object.keys(e),a=0;a<o.length;a+=1){var s=o[a];if(iy(e[s].points,i,r))return"".concat(t,"-placement-").concat(s)}return""}(o,a,e,s)),l&&t.push(l(e)),t.join(" ")},r.getComponent=function(){var e=r.props,t=e.prefixCls,n=e.destroyPopupOnHide,i=e.popupClassName,o=e.onPopupAlign,a=e.popupMotion,s=e.popupAnimation,l=e.popupTransitionName,c=e.popupStyle,u=e.mask,h=e.maskAnimation,f=e.maskTransitionName,p=e.maskMotion,d=e.zIndex,m=e.popup,g=e.stretch,y=e.alignPoint,v=e.mobile,b=e.forceRender,_=r.state,x=_.popupVisible,A=_.point,w=r.getPopupAlign(),C={};return r.isMouseEnterToShow()&&(C.onMouseEnter=r.onPopupMouseEnter),r.isMouseLeaveToHide()&&(C.onMouseLeave=r.onPopupMouseLeave),C.onMouseDown=r.onPopupMouseDown,C.onTouchStart=r.onPopupMouseDown,Wn.createElement(Ob,ud({prefixCls:t,destroyPopupOnHide:n,visible:x,point:y&&A,className:i,align:w,onAlign:o,animation:s,getClassNameFromAlign:r.getPopupClassNameFromAlign},C,{stretch:g,getRootDomNode:r.getRootDomNode,style:c,mask:u,zIndex:d,transitionName:l,maskAnimation:h,maskTransitionName:f,maskMotion:p,ref:r.popupRef,motion:a,mobile:v,forceRender:b}),"function"==typeof m?m():m)},r.attachParent=function(e){Xg.cancel(r.attachId);var t,n=r.props,i=n.getPopupContainer,o=n.getDocument,a=r.getRootDomNode();i?(a||0===i.length)&&(t=i(a)):t=o(r.getRootDomNode()).body,t?t.appendChild(e):r.attachId=Xg((function(){r.attachParent(e)}))},r.getContainer=function(){if(!r.portalContainer){var e=(0,r.props.getDocument)(r.getRootDomNode()).createElement("div");e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",r.portalContainer=e}return r.attachParent(r.portalContainer),r.portalContainer},r.setPoint=function(e){r.props.alignPoint&&e&&r.setState({point:{pageX:e.pageX,pageY:e.pageY}})},r.handlePortalUpdate=function(){r.state.prevPopupVisible!==r.state.popupVisible&&r.props.afterPopupVisibleChange(r.state.popupVisible)},r.triggerContextValue={onPopupMouseDown:r.onPopupMouseDown},i="popupVisible"in e?!!e.popupVisible:!!e.defaultPopupVisible,r.state={prevPopupVisible:i,popupVisible:i},Lb.forEach((function(e){r["fire".concat(e)]=function(t){r.fireEvents(e,t)}})),r}return Jm(n,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e,t=this.props;if(this.state.popupVisible)return this.clickOutsideHandler||!this.isClickToHide()&&!this.isContextMenuToShow()||(e=t.getDocument(this.getRootDomNode()),this.clickOutsideHandler=gg(e,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(e=e||t.getDocument(this.getRootDomNode()),this.touchOutsideHandler=gg(e,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(e=e||t.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=gg(e,"scroll",this.onContextMenuClose)),void(!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=gg(window,"blur",this.onContextMenuClose)));this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),Xg.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var e;return(null===(e=this.popupRef.current)||void 0===e?void 0:e.getElement())||null}},{key:"getPopupAlign",value:function(){var e=this.props,t=e.popupPlacement,n=e.popupAlign,r=e.builtinPlacements;return t&&r?function(e,t,n){return Xn(Xn({},e[t]||{}),n)}(r,t,n):n}},{key:"setPopupVisible",value:function(e,t){var n=this.props.alignPoint,r=this.state.popupVisible;this.clearDelayTimer(),r!==e&&("popupVisible"in this.props||this.setState({popupVisible:e,prevPopupVisible:r}),this.props.onPopupVisibleChange(e)),n&&t&&e&&this.setPoint(t)}},{key:"delaySetPopupVisible",value:function(e,t,n){var r=this,i=1e3*t;if(this.clearDelayTimer(),i){var o=n?{pageX:n.pageX,pageY:n.pageY}:null;this.delayTimer=window.setTimeout((function(){r.setPopupVisible(e,o),r.clearDelayTimer()}),i)}else this.setPopupVisible(e,n)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(e){var t=this.props.children.props,n=this.props;return t[e]&&n[e]?this["fire".concat(e)]:t[e]||n[e]}},{key:"isClickToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isContextMenuOnly",value:function(){var e=this.props.action;return"contextMenu"===e||1===e.length&&"contextMenu"===e[0]}},{key:"isContextMenuToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("contextMenu")||-1!==n.indexOf("contextMenu")}},{key:"isClickToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isMouseEnterToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseEnter")}},{key:"isMouseLeaveToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseLeave")}},{key:"isFocusToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("focus")}},{key:"isBlurToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("blur")}},{key:"forcePopupAlign",value:function(){var e;this.state.popupVisible&&(null===(e=this.popupRef.current)||void 0===e||e.forceAlign())}},{key:"fireEvents",value:function(e,t){var n=this.props.children.props[e];n&&n(t);var r=this.props[e];r&&r(t)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var e=this.state.popupVisible,t=this.props,n=t.children,r=t.forceRender,i=t.alignPoint,o=t.className,a=t.autoDestroy,s=Wn.Children.only(n),l={key:"trigger"};this.isContextMenuToShow()?l.onContextMenu=this.onContextMenu:l.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(l.onClick=this.onClick,l.onMouseDown=this.onMouseDown,l.onTouchStart=this.onTouchStart):(l.onClick=this.createTwoChains("onClick"),l.onMouseDown=this.createTwoChains("onMouseDown"),l.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(l.onMouseEnter=this.onMouseEnter,i&&(l.onMouseMove=this.onMouseMove)):l.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?l.onMouseLeave=this.onMouseLeave:l.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(l.onFocus=this.onFocus,l.onBlur=this.onBlur):(l.onFocus=this.createTwoChains("onFocus"),l.onBlur=this.createTwoChains("onBlur"));var c=vg()(s&&s.props&&s.props.className,o);c&&(l.className=c);var u=Xn({},l);ey(s)&&(u.ref=Qg(this.triggerRef,s.ref));var h,f=Wn.cloneElement(s,u);return(e||this.popupRef.current||r)&&(h=Wn.createElement(Fb,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!e&&a&&(h=null),Wn.createElement(Db.Provider,{value:this.triggerContextValue},f,h)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.popupVisible,r={};return void 0!==n&&t.popupVisible!==n&&(r.popupVisible=n,r.prevPopupVisible=t.popupVisible),r}}]),n}(Wn.Component),Ub.contextType=Db,Ub.defaultProps={prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:function(){return""},getDocument:function(e){return e?e.ownerDocument:window.document},onPopupVisibleChange:zb,afterPopupVisibleChange:zb,onPopupAlign:zb,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1},Ub);var Fb,Ub,Nb={adjustX:1,adjustY:1},jb=[0,0],Vb={left:{points:["cr","cl"],overflow:Nb,offset:[-4,0],targetOffset:jb},right:{points:["cl","cr"],overflow:Nb,offset:[4,0],targetOffset:jb},top:{points:["bc","tc"],overflow:Nb,offset:[0,-4],targetOffset:jb},bottom:{points:["tc","bc"],overflow:Nb,offset:[0,4],targetOffset:jb},topLeft:{points:["bl","tl"],overflow:Nb,offset:[0,-4],targetOffset:jb},leftTop:{points:["tr","tl"],overflow:Nb,offset:[-4,0],targetOffset:jb},topRight:{points:["br","tr"],overflow:Nb,offset:[0,-4],targetOffset:jb},rightTop:{points:["tl","tr"],overflow:Nb,offset:[4,0],targetOffset:jb},bottomRight:{points:["tr","br"],overflow:Nb,offset:[0,4],targetOffset:jb},rightBottom:{points:["bl","br"],overflow:Nb,offset:[4,0],targetOffset:jb},bottomLeft:{points:["tl","bl"],overflow:Nb,offset:[0,4],targetOffset:jb},leftBottom:{points:["br","bl"],overflow:Nb,offset:[-4,0],targetOffset:jb}};const Gb=function(e){var t=e.overlay,n=e.prefixCls,r=e.id,i=e.overlayInnerStyle;return Wn.createElement("div",{className:"".concat(n,"-inner"),id:r,role:"tooltip",style:i},"function"==typeof t?t():t)};var qb=function(e,t){var n=e.overlayClassName,r=e.trigger,i=void 0===r?["hover"]:r,o=e.mouseEnterDelay,a=void 0===o?0:o,s=e.mouseLeaveDelay,l=void 0===s?.1:s,c=e.overlayStyle,u=e.prefixCls,h=void 0===u?"rc-tooltip":u,f=e.children,p=e.onVisibleChange,d=e.afterVisibleChange,m=e.transitionName,g=e.animation,y=e.motion,v=e.placement,b=void 0===v?"right":v,_=e.align,x=void 0===_?{}:_,A=e.destroyTooltipOnHide,w=void 0!==A&&A,C=e.defaultVisible,E=e.getTooltipContainer,S=e.overlayInnerStyle,T=ug(e,["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle"]),B=(0,Wn.useRef)(null);(0,Wn.useImperativeHandle)(t,(function(){return B.current}));var k=Xn({},T);"visible"in e&&(k.popupVisible=e.visible);var M=!1,P=!1;if("boolean"==typeof w)M=w;else if(w&&"object"===ng(w)){var I=w.keepParent;M=!0===I,P=!1===I}return Wn.createElement(Rb,ud({popupClassName:n,prefixCls:h,popup:function(){var t=e.arrowContent,n=void 0===t?null:t,r=e.overlay,i=e.id;return[Wn.createElement("div",{className:"".concat(h,"-arrow"),key:"arrow"},n),Wn.createElement(Gb,{key:"content",prefixCls:h,id:i,overlay:r,overlayInnerStyle:S})]},action:i,builtinPlacements:Vb,popupPlacement:b,ref:B,popupAlign:x,getPopupContainer:E,onPopupVisibleChange:p,afterPopupVisibleChange:d,popupTransitionName:m,popupAnimation:g,popupMotion:y,defaultPopupVisible:C,destroyPopupOnHide:M,autoDestroy:P,mouseLeaveDelay:l,popupStyle:c,mouseEnterDelay:a},k),f)};const Wb=(0,Wn.forwardRef)(qb),Hb=Wn.forwardRef((function(e,t){var n=e.visible,r=e.overlay,i=Wn.useRef(null),o=Qg(t,i),a=Wn.useRef(null);function s(){Xg.cancel(a.current)}return Wn.useEffect((function(){return n?a.current=Xg((function(){var e;null===(e=i.current)||void 0===e||e.forcePopupAlign()})):s(),s}),[n,r]),Wn.createElement(Wb,ud({ref:o},e))}));var $b=Ug;$b.Range=Vg,$b.Handle=xg,$b.createSliderWithTooltip=function(e){var t;return t=function(t){eg(r,t);var n=og(r);function r(){var e;return Ym(this,r),(e=n.apply(this,arguments)).state={visibles:{}},e.handleTooltipVisibleChange=function(t,n){e.setState((function(e){return{visibles:Xn(Xn({},e.visibles),{},Hn({},t,n))}}))},e.handleWithTooltip=function(t){var n,r=t.value,i=t.dragging,o=t.index,a=t.disabled,s=ug(t,["value","dragging","index","disabled"]),l=e.props,c=l.tipFormatter,u=l.tipProps,h=l.handleStyle,f=l.getTooltipContainer,p=u.prefixCls,d=void 0===p?"rc-slider-tooltip":p,m=u.overlay,g=void 0===m?c(r):m,y=u.placement,v=void 0===y?"top":y,b=u.visible,_=void 0!==b&&b,x=ug(u,["prefixCls","overlay","placement","visible"]);return n=Array.isArray(h)?h[o]||h[0]:h,Wn.createElement(Hb,ud({},x,{getTooltipContainer:f,prefixCls:d,overlay:g,placement:v,visible:!a&&(e.state.visibles[o]||i)||_,key:o}),Wn.createElement(xg,ud({},s,{style:Xn({},n),value:r,onMouseEnter:function(){return e.handleTooltipVisibleChange(o,!0)},onMouseLeave:function(){return e.handleTooltipVisibleChange(o,!1)}})))},e}return Jm(r,[{key:"render",value:function(){return Wn.createElement(e,ud({},this.props,{handle:this.handleWithTooltip}))}}]),r}(Wn.Component),t.defaultProps={tipFormatter:function(e){return e},handleStyle:[{}],tipProps:{},getTooltipContainer:function(e){return e.parentNode}},t};const Xb=$b;var Zb,Yb,Kb,Jb,Qb=a(97596);function e_(e,t,n){Zb&&t_("mouse"),Kb&&t_("touch"),"mouse"===t?(Zb=(0,Qb.Z)(document,"mousemove",n.bind(e)),Yb=(0,Qb.Z)(document,"mouseup",t_.bind(this,"mouse"))):"touch"===t&&(Kb=(0,Qb.Z)(document,"touchmove",n.bind(e)),Jb=(0,Qb.Z)(document,"touchend",t_.bind(this,"touch")))}function t_(e){"mouse"===e?(Zb.remove(),Yb.remove()):"touch"===e&&(Kb.remove(),Jb.remove())}function n_(e){return n_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n_(e)}function r_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i_(e,t){return i_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i_(e,t)}function o_(e,t){if(t&&("object"===n_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return a_(e)}function a_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s_(e){return s_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s_(e)}function l_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c_=function(e){var t=e.onChange,n=e.options,r=e.value,i=n.map((function(e,n){return Wn.createElement(u_,{key:e+"radio_"+n,onClick:t.bind(null,e),label:e,icon:e==r?"dot-circle-o":"circle-o"})}));return Wn.createElement("section",{className:"layer-control radio-check"},i)},u_=function(e){var t=e.onClick,n=e.label,r=e.icon;return Wn.createElement("div",{className:"row pointer",onClick:t},Wn.createElement("div",{className:"col l1"},Wn.createElement(Pm(),{name:r})),Wn.createElement("div",{className:"col l11"},n))},h_=function(e){var t=e.options,n=e.value,r=e.onChange,i=t.map((function(e,t){return Wn.createElement(f_,{key:e.value+"_radio"+t,className:"row pointer",onClick:function(e){var t=n.slice(0),i=t.indexOf(e);i>-1?t.splice(i,1):t.push(e),r(t)}.bind(null,e.value),icon:n.indexOf(e.value)>-1?"square":"square-o",label:e.label})}));return Wn.createElement("section",{className:"layer-control radio-check"},i)},f_=function(e){var t=e.onClick,n=e.label,r=e.icon;return Wn.createElement("div",{className:"row pointer",onClick:t},Wn.createElement("div",{className:"col l1"},Wn.createElement(Pm(),{name:r})),Wn.createElement("div",{className:"col l11"},n))},p_=function(e){var t=e.value,n=e.options,r=e.onChange;return Wn.createElement("select",{defaultValue:t,className:"dropdown noselect",name:"form-field-name",onChange:function(e){e.persist(),r(e.target.value)}},n.map((function(e,t){return Wn.createElement("option",{className:"dropdown-option",key:e+"op"+t}," ",e," ")})))},d_=function(e){var t=e.value,n=e.min,r=e.max,i=e.step,o=e.onChange;return Wn.createElement("div",{className:"rangeslider"},Wn.createElement("p",null,t),Wn.createElement(Xb,{value:t,min:n,max:r,step:i,onChange:function(e){o(e)},onAfterChange:function(){}}))},m_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i_(e,t)}(a,e);var t,n,r,i,o=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=s_(t);if(n){var i=s_(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return o_(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),l_(a_(t=o.call(this,e)),"onMove",(function(e){var n=t.props.width/2;e.preventDefault();var r="mousemove"===e.type?e.pageX-t.state.left:e.touches[0].pageX-t.state.left,i=0;i=r>n?t.x.invert(r-n).toFixed(3):t.x.invert(n-r).toFixed(3);var o=t.props,a=o.min,s=o.max;i=(i=i>s?s:i)<a?a:i,t.props.onChange(Number(i))})),l_(a_(t),"onClick",(function(e){e_(a_(t),e,t.onMove)})),l_(a_(t),"render",(function(){var e=t.props,n=(e.min,e.max,e.value),r=(e.id,e.width),i=r/2,o=i+t.x(n),a=i-t.x(n);return Wn.createElement("svg",{ref:"apr_ctrl",preserveAspectRatio:"none",width:r,height:"50px",style:{cursor:"ew-resize"},onMouseDown:t.onClick.bind(a_(t),"mouse"),onTouchStart:t.onClick.bind(a_(t),"touch"),onTouchEnd:t_,onMouseUp:t_},Wn.createElement("g",null,Wn.createElement("rect",{className:"aperture-area",width:o-a,height:"16px",x:a,y:22}),Wn.createElement("rect",{className:"aperture-rail",width:r,height:"1px",x:0,y:30}),Wn.createElement("circle",{className:"aperture-midpoint",r:"4",cx:i,cy:30}),Wn.createElement("rect",{className:"aperture-marker",width:"1px",height:"30px",x:a,y:15}),Wn.createElement("rect",{className:"aperture-marker",width:"1px",height:"30px",x:o-1,y:15}),Wn.createElement("text",{className:"aperture-label noselect",x:i,y:"10px",textAnchor:"middle"},n)))})),t}return r=a,(i=[{key:"componentWillMount",value:function(){var e=this.props.width/2;this.x=zl().domain([this.props.min,this.props.max]).range([0,e])}},{key:"componentDidMount",value:function(){this.setState({left:this.refs.apr_ctrl.getBoundingClientRect().left})}}])&&r_(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),a}(Wn.Component),g_=Vd((function(e){return{timeseries:e.timeslider.timeseries}}))((function(e){var t=e.graphs,n=e.width,r=e.actions,i=e.onChange,o=e.start,a=e.end,s=e.timeseries;return Wn.createElement("div",{style:{width:n}},Object.keys(t).map((function(e,l){var c=t[e];return Wn.createElement(y_,{key:c.id,start:o,end:a,graph:c,width:n,onClick:function(e,n,o){r.toggleTimesliderGraph({id:t[n].id,path:t[n].path}),i(e)}.bind(null,l,c.id,c.path),highlighted:s.indexOf(c.id)>-1})})))})),y_=function(e){var t=e.graph,n=e.start,r=e.end,i=e.highlighted,o=e.onClick,a=e.width,s=[],l=[];s.push(Math.min.apply(Math,t.path.map((function(e){return e.y})))),l.push(Math.max.apply(Math,t.path.map((function(e){return e.y}))));var c=Math.min.apply(Math,s),u=Math.max.apply(Math,l),h=zl().domain([n,r]).range([0,a]),f=zl().domain([c,u+30]).range([40,0]),p=yf().x((function(e){return h(e.x)})).y0(40).y1((function(e){return f(e.y)}));return Wn.createElement("svg",{preserveAspectRatio:"none",width:a,height:"40px",onClick:o},Wn.createElement("g",null,Wn.createElement("path",{key:"path_"+Object.keys(t)[0],className:i?"graph-luna-primary":"graph-luna-light",d:p(t.path)})))};function v_(e){return v_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v_(e)}function b_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function __(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b_(Object(n),!0).forEach((function(t){M_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A_(e,t,n){return t&&x_(e.prototype,t),n&&x_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function w_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C_(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E_(e,t)}function E_(e,t){return E_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},E_(e,t)}function S_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k_(e);if(t){var i=k_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return T_(this,n)}}function T_(e,t){if(t&&("object"===v_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return B_(e)}function B_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k_(e){return k_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},k_(e)}function M_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a(37727);var P_=function(e){C_(n,e);var t=S_(n);function n(e){var r;return w_(this,n),M_(B_(r=t.call(this,e)),"componentDidMount",(function(){r.setState({maxHeight:window.innerHeight-.1*window.innerHeight})})),M_(B_(r),"compact",(function(){r.props.actions.toggleLayersCompact()})),M_(B_(r),"expandLayer",(function(e){r.props.actions.expandLayer(e)})),M_(B_(r),"activate",(function(e){r.props.actions.activateLayer(e)})),M_(B_(r),"removeLayer",(function(e){r.props.actions.removeLayer(e)})),M_(B_(r),"toggle",(function(e){r.props.actions.toggleLayer(e)})),M_(B_(r),"onChange",(function(e,t,n,i){r.props.actions.updateLayerProperty({id:e,key:t,value:n,binding:i})})),M_(B_(r),"render",(function(){var e=r.props.actions,t=r.state,n=t.width,i=t.maxHeight,o=r.props.layers,a=o.layers,s=o.activeLayer,l=o.compact,c=B_(r);if(!a)return Wn.createElement("p",null);var u=[],h=[];return Object.keys(a).map((function(t){var i=a[t];if(i.visible){var o=i.id===s?"toggle on":"toggle off";u.push(Wn.createElement("div",{key:i.id,className:o,onClick:c.activate.bind(null,i.id)},i.label,Wn.createElement("div",{className:"layer-stripe",style:{background:i.color}})))}h.push(Wn.createElement(I_,{key:i.id,id:i.id,properties:i.properties,label:i.label,onChange:r.onChange,activate:r.activate.bind(null,i.id),toggle:r.toggle.bind(null,i.id),isActive:i.id===s,isExpanded:i.expand,remove:r.removeLayer.bind(null,i),expand:r.expandLayer.bind(null,i.id),isVisible:i.visible,actions:e,width:n,color:i.color}))})),Wn.createElement("aside",{id:"layers"},Wn.createElement("nav",{className:"layers-nav"},Wn.createElement("div",{className:"toggles"},u),Wn.createElement("a",{onClick:r.compact},Wn.createElement("h5",null,Wn.createElement(Pm(),{name:l?"angle-down":"angle-up"})," Layers"))),!l&&Wn.createElement("div",{className:"layers-expanded",style:{maxHeight:i||400}},h))})),r.state={width:r.props.width?r.props.width:400},r}return A_(n)}(Wn.Component);P_.propTypes={actions:nd().object,layers:nd().object};var I_=function(e){C_(n,e);var t=S_(n);function n(){var e;w_(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return M_(B_(e=t.call.apply(t,[this].concat(i))),"onChange",(function(t,n,r){e.props.onChange(e.props.id,t,n,r)})),M_(B_(e),"render",(function(){var t=e.props,n=t.id,r=t.actions,i=t.properties,o=t.activate,a=t.expand,s=t.remove,l=t.isVisible,c=t.toggle,u=t.label,h=t.isActive,f=t.isExpanded,p=t.width,d=t.color;return B_(e),Wn.createElement("div",{className:"layer noselect"},Wn.createElement("div",{className:"layer-stripe",style:{background:d}}),Wn.createElement("div",{className:h?"layer-bar-active":"layer-bar-inactive"},Wn.createElement("div",{className:"layer-bar-title",onClick:o,onDoubleClick:a},u.toUpperCase()),Wn.createElement("div",{className:"layer-bar-button",onClick:s},Wn.createElement(Pm(),{name:"trash"})),Wn.createElement("div",{className:"layer-bar-button",style:{color:l?"":"rgb(75, 95, 99)"},onClick:c},Wn.createElement(Pm(),{name:l?"eye":"eye-slash"})),i&&Wn.createElement("div",{className:"layer-bar-button",onClick:a},Wn.createElement(Pm(),{name:f?"angle-up":"angle-down"}))),Wn.createElement("div",{className:f?"layer-controls expand":"layer-controls"},i&&Object.keys(i).map((function(t){if("None"!==i[t].type)return Wn.createElement(O_,{key:n+"_"+t,propertyId:t,layerId:n,property:i[t],onChange:e.onChange,actions:r,width:p})}))))})),e}return A_(n)}(Wn.Component),O_=function(e){C_(n,e);var t=S_(n);function n(){var e;w_(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return M_(B_(e=t.call.apply(t,[this].concat(o))),"onChange",(function(t){var n=e.props,r=n.propertyId,i=n.property;e.props.onChange(r,t,i.binding)})),M_(B_(e),"render",(function(){var t=e.props,n=t.propertyId,r=t.layerId,o=t.property,a=t.actions,s=t.width,l=(t.color,Wn.createElement(i[o.type],__(__({},o),{},{onChange:e.onChange,actions:a,id:r+n,width:s-.1*s})));return Wn.createElement("div",{className:"layer-property"},Wn.createElement("div",{className:"property-bar"},o.label),Wn.createElement("div",{className:"property-control"},l))})),e}return A_(n)}(Wn.Component);I_.propTypes={isActive:nd().bool,activate:nd().func,isVisible:nd().bool,toggle:nd().func,properties:nd().object,label:nd().string,id:nd().node,onChange:nd().func};const D_=Vd((function(e){return{layers:e.layers}}),(function(e){return{actions:tr(n,e)}}))(P_);var z_=Object.assign({Search:Zm,Layers:D_},r),L_=function(e,t){z_[e]&&console.warn("Component named ".concat(e," already exists")),z_[e]=t};function R_(e){return R_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R_(e)}function F_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F_(Object(n),!0).forEach((function(t){Z_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V_(e,t,n){return t&&j_(e.prototype,t),n&&j_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function G_(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q_(e,t)}function q_(e,t){return q_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},q_(e,t)}function W_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=X_(e);if(t){var i=X_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return H_(this,n)}}function H_(e,t){if(t&&("object"===R_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $_(e)}function $_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X_(e){return X_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},X_(e)}function Z_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Y_=function(e){G_(n,e);var t=W_(n);function n(){var e;N_(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Z_($_(e=t.call.apply(t,[this].concat(i))),"onKeyDown",(function(t){if("Escape"===t.code){var n=e.props.panels;n&&(n.length>1?e.props.actions.removePanel(n.length-1):(e.props.actions.hidePanels(),e.props.actions.switchTab("")))}})),Z_($_(e),"onClose",(function(t){e.props.actions.removePanel(t)})),Z_($_(e),"switchTab",(function(t){e.props.activeTab==t?(e.props.actions.hidePanels(),e.props.actions.switchTab("")):(e.props.actions.switchTab(t),e.props.actions.showPanels())})),Z_($_(e),"render",(function(){var t=e.props,n=t.tabs,r=t.activeTab,i=t.panels,o=t.actions,a=t.layersColorIndex,s=t.hide,l=t.loader,c=$_(e);return Wn.createElement("div",{id:"topbar_panels"},n&&Wn.createElement(J_,{tabs:n,onClick:e.switchTab,activeTab:r}),i&&i.map((function(e,t){return s?null:Wn.createElement(K_,{panel:e,tab:r,key:t,index:t,onClose:c.onClose.bind(null,t,e),actions:o,loader:l,layersColorIndex:a})})))})),e}return V_(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.onKeyDown,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onKeyDown,!1)}}]),n}(Wn.Component);Y_.propTypes={panels:nd().array};var K_=function(e){G_(n,e);var t=W_(n);function n(){return N_(this,n),t.apply(this,arguments)}return V_(n,[{key:"shouldComponentUpdate",value:function(e){return this.props.panel.id!==e.panel.id}},{key:"render",value:function(){var e=this.props,t=e.panel,n=e.onClose,r=e.index,i=e.actions,o=(e.layersColorIndex,e.tab),a=(e.hidden,e.loader,t.width?t.width:18),s=.01*a*document.body.clientWidth,l=s-.04*s-4;return Wn.createElement("section",{id:t.id,className:0===r?"panel scrolly":"panel scrolly secondary",style:{width:a+"vw",zIndex:-1*r}},0===r?null:Wn.createElement("a",{className:"close-button",onClick:n},Wn.createElement("i",{className:"tiny material-icons"},"clear")),t.widgets&&t.widgets.map((function(e,t){var n,a=o+r+t,s=Object.assign({},e.props,{panelIndex:r,panelTab:o,actions:i,width:l,widgetId:a});return e.fetch?n=Wn.createElement(nx(a,e),s):e.loader?n=Wn.createElement(rx(a,e.type),s):(z_[e.type]||console.log(e.type+" widget type not found."),n=Wn.createElement(z_[e.type],s)),Wn.createElement("article",{key:t,id:"section_"+t},e.subtitle?Wn.createElement("header",null,e.subtitle):null,n)})),1==t.loading&&Wn.createElement(Bm,null),2==t.loading&&Wn.createElement("center",null,Wn.createElement("p",null," Loading error. ")))}}]),n}(Wn.Component),J_=function(e){var t=e.activeTab,n=e.tabs,r=e.onClick;return Wn.createElement("div",{className:"topbar"},n&&Object.keys(n).map((function(e){return Wn.createElement("div",{key:"tabK_"+e,className:t===e?"tab active":"tab",onClick:r.bind(null,e)},e)})))};Vd((function(e){return{tabs:e.tabs.tabs,loader:e.loader,activeTab:e.tabs.activeTab,hide:e.tabs.hide,panels:e.tabs.tabs[e.tabs.activeTab],layersColorIndex:e.layers.layersColorIndex}}),(function(e){return{actions:tr(n,e)}}))(Y_);var Q_,ex,tx=function(e){G_(n,e);var t=W_(n);function n(){return N_(this,n),t.apply(this,arguments)}return V_(n,[{key:"componentDidMount",value:function(){if(!this.props.loader){var e=this.props,t=e.widgetId,n=e.widget;this.props.actions.socketRequest({request:n.request,onLoading:{type:"LOADER",payload:{id:t,loading:"loading"}},onSuccess:{type:"LOADER",payload:{id:t,loading:"success"}},onError:{type:"LOADER",payload:{id:t,loading:"error"}}})}}},{key:"render",value:function(){var e=this.props,t=e.widget,n=e.loader;if(this.props.loader){if("loading"==n.loading)return Wn.createElement(Bm,null);if("success"==n.loading){var r=U_(U_({},this.props),{},Z_({},t.fetchResultToProp,n.fetchResult));return Wn.createElement(z_[t.type],r)}return Wn.createElement("p",null," Widget loading error. ")}return null}}]),n}(Wn.Component),nx=function(e,t){return Vd((function(n){return{loader:n.loader[e],widget:t}}))(tx)},rx=function(e,t){return Vd((function(t){return{loader:t.loader[e]}}))(z_[t])};function ix(e){return ix="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ix(e)}function ox(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ax(e,t,n){return t&&ox(e.prototype,t),n&&ox(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function sx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lx(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cx(e,t)}function cx(e,t){return cx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},cx(e,t)}function ux(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=px(e);if(t){var i=px(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return hx(this,n)}}function hx(e,t){if(t&&("object"===ix(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return fx(e)}function fx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function px(e){return px=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},px(e)}function dx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a(1775);var mx=function(e){lx(n,e);var t=ux(n);function n(e){var r;return sx(this,n),dx(fx(r=t.call(this,e)),"startTimer",(function(e){window.cancelAnimationFrame(Q_),r.clock.start(),Q_=window.requestAnimationFrame(e)})),dx(fx(r),"stopTimer",(function(){r.clock.stop(),window.cancelAnimationFrame(Q_)})),dx(fx(r),"componentWillUnmount",(function(){window.cancelAnimationFrame(Q_)})),dx(fx(r),"componentDidMount",(function(){r.clock=new o.SUY(!1),r.setState({sliderWidth:document.getElementById("timeslider-timeline").offsetWidth,left:document.getElementById("timeslider-timeline").getBoundingClientRect().left});var e=fx(r);window.addEventListener("resize",(function(){clearTimeout(ex),ex=setTimeout((function(){e.setState({sliderWidth:document.getElementById("timeslider-timeline").offsetWidth,left:document.getElementById("timeslider-timeline").getBoundingClientRect().left})}),250)}))})),dx(fx(r),"componentDidUpdate",(function(){r.props.timeslider.play?r.state.isPlaying||(r.startTimer(r.play),r.setState({isPlaying:!0})):r.state.isPlaying&&r.setState({isPlaying:!1},r.stopTimer())})),dx(fx(r),"handleWheel",(function(e){r.boundary(r.props.timeslider.percent+-4e-5*e.deltaY),r.stopTimer()})),dx(fx(r),"positionToDateTime",(function(e){var t=[r.props.timeslider.start,r.props.timeslider.end];return Fh().domain(t).range([0,1]).invert(e)})),dx(fx(r),"formatDateTimeForHandleLabel",(function(e){return gu("%Y-%m-%d at %H:%M:%S.%L")(e)})),dx(fx(r),"checkDatetimeValue",(function(e){var t;return e>r.props.timeslider.end||e<r.props.timeslider.start?(e>r.props.timeslider.end&&(t=r.props.timeslider.end),e<r.props.timeslider.start&&(t=r.props.timeslider.start)):t=e,t})),dx(fx(r),"animate",(function(e){var t=r.props.timeslider.percent;r.props.timeslider.play&&r.props.actions.pauseTimeslider(),Math.abs(e-t)>1e-4?(t+=(e-t)*r.state.sliderWidth*.005*r.clock.getDelta(),r.props.actions.setTimesliderPercent({percent:t}),Q_=window.requestAnimationFrame((function(){r.animate(e)}))):r.stopTimer()})),dx(fx(r),"play",(function(){var e=r.props.timeslider.percent;e<1?e+=.02*r.state.speed*r.clock.getDelta():r.state.loop?e=0:(e=1,r.stopTimer(),r.props.actions.pauseTimeslider()),r.props.timeslider.playbackrate?r.props.actions.setTimesliderPercent({percent:e,playbackrate:.01*r.state.speed}):r.props.actions.setTimesliderPercent({percent:r.props.timeslider.percent,playbackrate:.01*r.state.speed}),Q_=window.requestAnimationFrame(r.play)})),dx(fx(r),"updateLabel",(function(e){var t=r.positionToDateTime(e),n=r.checkDatetimeValue(t);return r.formatDateTimeForHandleLabel(n)})),dx(fx(r),"shift",(function(e){var t=Fh().domain([r.props.timeslider.start,r.props.timeslider.end]).range([0,r.state.sliderWidth]);r.props.actions.setTimesliderRange(t.invert(-e.nativeEvent.movementX),t.invert(r.state.sliderWidth-e.nativeEvent.movementX))})),dx(fx(r),"drag",(function(e){var t=(e.clientX-r.state.left-2)/r.state.sliderWidth;r.boundary(t)})),dx(fx(r),"boundary",(function(e){if(e<0)r.props.actions.setTimesliderPercent({percent:0});else if(e>1)r.props.actions.setTimesliderPercent({percent:1});else{var t=Fh().domain([r.props.timeslider.start,r.props.timeslider.end]).range([0,r.state.sliderWidth]);e=t(t.invert(e)),r.props.actions.setTimesliderPercent({percent:e})}})),dx(fx(r),"ease",(function(e){var t=(e.clientX-r.state.left-2)/r.state.sliderWidth;r.startTimer((function(){r.animate(t)}))})),dx(fx(r),"offset",(function(e){var t=e.clientX,n=e.clientY,i=window.innerHeight,o=i-n,a=r.props.timeslider.percent,s=r.state.sliderWidth,l=(t-r.state.left-2)/s;if(r.prevY,1===r.tickSinceClick)r.props.actions.setTimesliderPercent({percent:l});else if(o<100)r.boundary(l);else{var c=a+(t-r.prevX)*(n/i)*.5/s;r.boundary(c)}r.prevX=t,r.prevY=n})),dx(fx(r),"onMouseDown",(function(e){e.stopPropagation(),e.preventDefault(),r.tickSinceClick=0,e_(fx(r),"mouse",r.onMouseMove),r.props.timeslider.play&&(r.props.actions.pauseTimeslider(),r.stopTimer()),r.state.shiftMode||r.ease(e)})),dx(fx(r),"onMouseMove",(function(e){e.stopPropagation(),e.preventDefault(),r.stopTimer(),r.state.shiftMode?r.shift(e):(r.tickSinceClick+=1,r.offset(e))})),dx(fx(r),"onTouchStart",(function(e){e.stopPropagation(),e.preventDefault(),r.tickSinceClick=0,e_(fx(r),"touch",r.onTouchMove),r.props.timeslider.play&&(r.props.actions.pauseTimeslider(),r.stopTimer()),r.state.shiftMode||r.ease(e.touches[0])})),dx(fx(r),"onTouchMove",(function(e){e.stopPropagation(),e.preventDefault(),r.stopTimer(),r.state.shiftMode?r.shift(e):(r.tickSinceClick+=1,r.offset(e.touches[0]))})),dx(fx(r),"togglePlay",(function(){r.props.timeslider.play?r.props.actions.pauseTimeslider():r.props.actions.playTimeslider()})),dx(fx(r),"loopButton",(function(){r.state.loop?r.setState({loop:!1}):r.setState({loop:!0})})),dx(fx(r),"speedButton",(function(){var e=r.state.speed;e===r.speedTicks?e=1:e+=1,r.setState({speed:e})})),dx(fx(r),"switchMode",(function(){r.setState({shiftMode:!r.state.shiftMode})})),dx(fx(r),"updateSpeed",(function(e){r.setState({speed:e})})),dx(fx(r),"render",(function(){var e=fx(r),t=e.baseWidth,n=e.speedTicks,i=r.state,o=i.sliderWidth,a=i.loop,s=r.props.timeslider,l=s.start,c=s.end,u=s.graphs,h=s.value,f=s.play,p=o*s.percent;return Wn.createElement("aside",{className:"timeslider-pane",style:{width:t}},Wn.createElement("section",{className:"timeslider-wrapper",id:"timeslider",draggable:!1},Wn.createElement("section",{className:"timeslider-buttons-wrapper"},Wn.createElement("div",{className:"timeslider-buttons row"},Wn.createElement(wx,{onChange:r.updateSpeed,ledCount:n}),f?Wn.createElement("div",{className:vg()("playback-button-rect col s4 m4 l4","on"),onClick:r.togglePlay},Wn.createElement(Pm(),{name:"pause"})):Wn.createElement("div",{className:vg()("playback-button-rect col s4 m4 l4"),onClick:r.togglePlay}," ",Wn.createElement(Pm(),{name:"play"})),Wn.createElement("div",{className:vg()("playback-button-rect col s4 m4 l4",a?"on":""),onClick:r.loopButton},Wn.createElement(Pm(),{name:"repeat"})))),Wn.createElement("div",{id:"timeslider-timeline",className:vg()("timeslider-timeline","noselect"),onTouchStart:r.onTouchStart,onMouseDown:r.onMouseDown,onWheel:r.handleWheel,onContextMenu:function(e){e.preventDefault()}},Wn.createElement(gx,{width:o,start:l,end:c,graphs:u,label:r.formatDateTimeForHandleLabel(h),position:p}))))})),r.state={percent:0,handleLabel:null,toPosition:0,speed:.2,showTicks:!0,isPlaying:!1,sliderWidth:0,windowHeight:window.height,shiftMode:!1,down:0,isPlaybackDefined:!1},r.baseWidth="100%",r.speedTicks=10,r.prevX=0,r.prevY=0,r.displacement=0,r.tickSinceClick=0,r}return ax(n)}(Wn.Component),gx=function(e){var t=e.width,n=e.start,r=e.end,i=e.graphs,o=e.position,a=e.label;return Wn.createElement("svg",{preserveAspectRatio:"none",width:"100%",height:"40px",viewBox:"0 0 "+t+" 40",className:"svg-content"},Wn.createElement(yx,{start:n,end:r,width:t}),i&&Wn.createElement(vx,{graphs:i,start:n,end:r,width:t}),Wn.createElement(bx,{label:a,position:o,timelineWidth:t}))},yx=function(e){lx(n,e);var t=ux(n);function n(){var e;sx(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return dx(fx(e=t.call.apply(t,[this].concat(i))),"shouldComponentUpdate",(function(t){return e.props.start!==t.start||e.props.end!==t.end||e.props.width!==t.width})),dx(fx(e),"render",(function(){for(var t=e.props,n=t.start,r=t.end,i=t.width,o=Fh().domain([n,r]).range([0,i]),a=gu("%B %d"),s=Mc.range(n,r),l=Bc.range(n,r),c=Sc.range(n,r),u=5*s.length,h=u,f=[],p=0;p<c.length;p++)h<u?h++:(h=1,f.push(c[p]));var d=[];for(var m in f)d.push(Wn.createElement("rect",{className:"minute-rect",key:m+"_mt",width:"1px",height:"10px",x:o(f[m]),y:30}));for(var g in l)d.push(Wn.createElement("rect",{className:"hour-rect",key:g+"_ht",width:"1px",height:"20px",x:o(l[g]),y:20}));for(var y in d.push(Wn.createElement("rect",{className:"day-rect",key:"start_dt",width:"1px",height:"30px",x:"0",y:10})),s)d.push(Wn.createElement("rect",{className:"day-rect",key:y+"_dt",width:"1px",height:"30px",x:o(s[y]),y:10})),d.push(Wn.createElement("text",{className:"day-rect",key:y+"_dtl",x:o(s[y])+10,y:"20"},a(s[y])));return d.push(Wn.createElement("rect",{className:"day-rect",key:"end_dt",width:"1px",height:"30px",x:o(r)-1,y:10})),Wn.createElement("g",null,d)})),e}return ax(n)}(Wn.Component),vx=function(e){lx(n,e);var t=ux(n);function n(){var e;sx(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return dx(fx(e=t.call.apply(t,[this].concat(i))),"render",(function(){var t=e.props,n=t.graphs,r=t.start,i=t.end,o=t.width,a=[],s=[];Object.keys(n).map((function(e){a.push(Math.min.apply(Math,n[e].path.map((function(e){return e.y})))),s.push(Math.max.apply(Math,n[e].path.map((function(e){return e.y}))))}));var l=Math.min.apply(Math,a),c=Math.max.apply(Math,s),u=zl().domain([r,i]).range([0,o]),h=zl().domain([l,c+30]).range([40,0]),f=yf().curve(_f).x((function(e){return u(e.x)})).y0(40).y1((function(e){return h(e.y)})),p=0,d=["orange","cyan","blue","red","yellow"];return Wn.createElement("g",null,Object.keys(n).map((function(e){return p=p<4?p++:0,Wn.createElement("path",{key:"graph_"+n[e].id,className:"graph-"+d[p],d:f(n[e].path)})})))})),e}return ax(n)}(Wn.Component),bx=function(e){var t=e.position,n=e.label,r=t>=e.timelineWidth;return Wn.createElement("g",null,Wn.createElement("rect",{id:"handle",className:"handle-rect",x:t,y:"0",width:"1px",height:"40px"}),Wn.createElement("text",{className:"handle-rect",x:t>165?t-165:t+10,y:"10"},n),r&&Wn.createElement("circle",{className:"handle-live",cx:t>165?t-8:t+165,cy:"6",r:"4",fill:"red"}))},_x=0,xx=0,Ax=!1,wx=function(e){lx(n,e);var t=ux(n);function n(e){var r;return sx(this,n),dx(fx(r=t.call(this,e)),"rotate",(function(e){var t=r.state.degree;if(e.clientX,e.clientY,0!==_x&&0!==xx){var n,i=t-(_x-e.clientX)+(xx-e.clientY);i>161&&(i=161),i<-161&&(i=-161),n=Math.round((161+i)/322*r.props.ledCount),r.setState({lit:n,degree:i}),n>0?r.props.onChange(n+.7):r.props.onChange(.2)}_x=e.clientX,xx=e.clientY})),dx(fx(r),"increment",(function(){var e=r.state.lit,t=r.state.degree;e<r.props.ledCount?(r.setState({lit:e+1,degree:t+46}),r.props.onChange(e+.7)):(r.setState({lit:0,degree:-161}),r.props.onChange(.2))})),dx(fx(r),"onMouseDown",(function(){r.setState({interacting:!0}),Ax=!0})),dx(fx(r),"onMouseMove",(function(e){Ax=!1,r.state.interacting&&r.rotate(e)})),dx(fx(r),"onMouseUp",(function(){Ax&&(r.increment(),Ax=!1),_x=0,xx=0,r.setState({interacting:!1})})),dx(fx(r),"onTouchMove",(function(e){e.preventDefault(),r.state.interacting&&r.rotate(e.touches[0])})),dx(fx(r),"render",(function(){for(var e=[],t=0;t<r.props.ledCount;t++)t<r.state.lit?e.push(Wn.createElement("div",{key:"led_"+t,className:vg()("led","active-led")})):e.push(Wn.createElement("div",{key:"led_"+t,className:"led"}));return Wn.createElement("div",{onTouchStart:r.onMouseDown,onTouchEnd:r.onMouseUp,onMouseDown:r.onMouseDown,onMouseUp:r.onMouseUp,id:"knob",className:vg()("playback-button-rect col s4 m4 l4 knob-rect","noselect")},Wn.createElement("div",{className:"leds"},e),r.state.interacting?Wn.createElement("div",{className:"fullscreen",onMouseUp:r.onMouseUp,onMouseMove:r.onMouseMove,onTouchMove:r.onTouchMove,onTouchEnd:r.onMouseUp}):"")})),r.state={degree:0,lit:1,interacting:!1},r}return ax(n)}(Wn.Component);const Cx=Vd((function(e){return{timeslider:e.timeslider}}),(function(e){return{actions:tr(n,e)}}))(mx);function Ex(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Sx=function(){function e(r,i,o,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=r,this.luna=o,this.map=o.map,this.saga=i,this.actions=n,this.reducers=t,this.saga.middleware.run(this.saga.root,this.luna,a)}return r=e,i=[{key:"dispatch",value:function(e,t){this.store.dispatch(n[e](t))}},{key:"on",value:function(e,t){var n=ed()(this.store.getState,e);this.store.subscribe(n((function(e){return t(e)})))}},{key:"watchers",value:function(e){var t=this;e.map((function(e){t.on(e.path,e.handler)}))}},{key:"removeLayer",value:function(e){this.dispatch("removeLayer",e)}},{key:"setLayer",value:function(e){var t;t={label:e.metadata.friendlyName,id:e.id,visible:!!e.style.visible,expand:!1,properties:e.style.ui_bindings,color:Om.hex(e.metadata.friendlyName)},this.dispatch("addLayer",t)}},{key:"getActiveLayer",value:function(){return this.store.getState().layers.activeLayer}},{key:"getLayerPropertyValue",value:function(e,t,n){var r=this.store.getState().layers.layers[e].properties[t].value;return n?r.indexOf(n)>-1:r}}],i&&Ex(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),e;var r,i}(),Tx=function(e){return"@@redux-saga/"+e},Bx=Tx("CANCEL_PROMISE"),kx=Tx("CHANNEL_END"),Mx=Tx("IO"),Px=Tx("MATCH"),Ix=Tx("MULTICAST"),Ox=Tx("SAGA_ACTION"),Dx=Tx("SELF_CANCELLATION"),zx=Tx("TASK"),Lx=Tx("TASK_CANCEL"),Rx=Tx("TERMINATE"),Fx=Tx("LOCATION"),Ux=function(e){return null==e},Nx=function(e){return null!=e},jx=function(e){return"function"==typeof e},Vx=function(e){return"string"==typeof e},Gx=Array.isArray,qx=function(e){return e&&jx(e.then)},Wx=function(e){return e&&jx(e.next)&&jx(e.throw)},Hx=function e(t){return t&&(Vx(t)||Zx(t)||jx(t)||Gx(t)&&t.every(e))},$x=function(e){return e&&jx(e.take)&&jx(e.close)},Xx=function(e){return jx(e)&&e.hasOwnProperty("toString")},Zx=function(e){return Boolean(e)&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype},Yx=function(e){return function(){return true}}(),Kx=function(){},Jx=function(e){return e};"function"==typeof Symbol&&Symbol.asyncIterator&&Symbol.asyncIterator;var Qx=function(e,t){ud(e,t),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach((function(n){e[n]=t[n]}))};function eA(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}var tA=function(e){throw e},nA=function(e){return{value:e,done:!0}};function rA(e,t,n){void 0===t&&(t=tA),void 0===n&&(n="iterator");var r={meta:{name:n},next:e,throw:t,return:nA,isSagaIterator:!0};return"undefined"!=typeof Symbol&&(r[Symbol.iterator]=function(){return r}),r}function iA(e,t){var n=t.sagaStack;console.error(e),console.error(n)}var oA=function(e){return Array.apply(null,new Array(e))},aA=function(e){return function(t){return e(Object.defineProperty(t,Ox,{value:!0}))}},sA=function(e){return e===Rx},lA=function(e){return e===Lx},cA=function(e){return sA(e)||lA(e)};function uA(e,t){var n,r=Object.keys(e),i=r.length,o=0,a=Gx(e)?oA(i):{},s={};return r.forEach((function(e){var r=function(r,s){n||(s||cA(r)?(t.cancel(),t(r,s)):(a[e]=r,++o===i&&(n=!0,t(a))))};r.cancel=Kx,s[e]=r})),t.cancel=function(){n||(n=!0,r.forEach((function(e){return s[e].cancel()})))},s}function hA(e){return{name:e.name||"anonymous",location:fA(e)}}function fA(e){return e[Fx]}var pA=function(e){return function(e,t){void 0===e&&(e=10);var n=new Array(e),r=0,i=0,o=0,a=function(t){n[i]=t,i=(i+1)%e,r++},s=function(){if(0!=r){var t=n[o];return n[o]=null,r--,o=(o+1)%e,t}},l=function(){for(var e=[];r;)e.push(s());return e};return{isEmpty:function(){return 0==r},put:function(s){var c;if(r<e)a(s);else switch(t){case 1:throw new Error("Channel's Buffer overflow!");case 3:n[i]=s,o=i=(i+1)%e;break;case 4:c=2*e,n=l(),r=n.length,i=n.length,o=0,n.length=c,e=c,a(s)}},take:s,flush:l}}(e,4)},dA="TAKE",mA="CALL",gA="FORK",yA=function(e,t){var n;return(n={})[Mx]=!0,n.combinator=!1,n.type=e,n.payload=t,n};function vA(e,t){return void 0===e&&(e="*"),Hx(e)?yA(dA,{pattern:e}):$x(n=e)&&n[Ix]&&Nx(t)&&Hx(t)?yA(dA,{channel:e,pattern:t}):$x(e)?yA(dA,{channel:e}):void 0;var n}function bA(e,t){return Ux(t)&&(t=e,e=void 0),yA("PUT",{channel:e,action:t})}function _A(e,t){var n,r=null;return jx(e)?n=e:(Gx(e)?(r=e[0],n=e[1]):(r=e.context,n=e.fn),r&&Vx(n)&&jx(r[n])&&(n=r[n])),{context:r,fn:n,args:t}}function xA(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return yA(mA,_A(e,n))}function AA(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return yA(gA,_A(e,n))}function wA(e){return void 0===e&&(e=Dx),yA("CANCEL",e)}const CA=function(){var e={};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e};var EA=[],SA=0;function TA(e){try{MA(),e()}finally{PA()}}function BA(e){EA.push(e),SA||(MA(),IA())}function kA(e){try{return MA(),e()}finally{IA()}}function MA(){SA++}function PA(){SA--}function IA(){var e;for(PA();!SA&&void 0!==(e=EA.shift());)TA(e)}var OA=function(e){return function(t){return e.some((function(e){return FA(e)(t)}))}},DA=function(e){return function(t){return e(t)}},zA=function(e){return function(t){return t.type===String(e)}},LA=function(e){return function(t){return t.type===e}},RA=function(){return Yx};function FA(e){var t="*"===e?RA:Vx(e)?zA:Gx(e)?OA:Xx(e)?zA:jx(e)?DA:Zx(e)?LA:null;if(null===t)throw new Error("invalid pattern: "+e);return t(e)}var UA={type:kx},NA=function(e){return e&&e.type===kx};function jA(){var e,t,n,r,i,o,a=(t=!1,r=n=[],i=function(){r===n&&(r=n.slice())},o=function(){t=!0;var e=n=r;r=[],e.forEach((function(e){e(UA)}))},(e={})[Ix]=!0,e.put=function(e){if(!t)if(NA(e))o();else for(var i=n=r,a=0,s=i.length;a<s;a++){var l=i[a];l[Px](e)&&(l.cancel(),l(e))}},e.take=function(e,n){var o,a;void 0===n&&(n=RA),t?e(UA):(e[Px]=n,i(),r.push(e),e.cancel=(o=function(){i(),eA(r,e)},a=!1,function(){a||(a=!0,o())}))},e.close=o,e),s=a.put;return a.put=function(e){e[Ox]?s(e):BA((function(){s(e)}))},a}function VA(e,t){var n=e[Bx];jx(n)&&(t.cancel=n),e.then(t,(function(e){t(e,!0)}))}var GA,qA=0,WA=function(){return++qA};function HA(e){e.isRunning()&&e.cancel()}var $A=((GA={}).TAKE=function(e,t,n){var r=t.channel,i=void 0===r?e.channel:r,o=t.pattern,a=t.maybe,s=function(e){e instanceof Error?n(e,!0):!NA(e)||a?n(e):n(Rx)};try{i.take(s,Nx(o)?FA(o):null)}catch(e){return void n(e,!0)}n.cancel=s.cancel},GA.PUT=function(e,t,n){var r=t.channel,i=t.action,o=t.resolve;BA((function(){var t;try{t=(r?r.put:e.dispatch)(i)}catch(e){return void n(e,!0)}o&&qx(t)?VA(t,n):n(t)}))},GA.ALL=function(e,t,n,r){var i=r.digestEffect,o=qA,a=Object.keys(t);if(0!==a.length){var s=uA(t,n);a.forEach((function(e){i(t[e],o,s[e],e)}))}else n(Gx(t)?[]:{})},GA.RACE=function(e,t,n,r){var i=r.digestEffect,o=qA,a=Object.keys(t),s=Gx(t)?oA(a.length):{},l={},c=!1;a.forEach((function(e){var t=function(t,r){c||(r||cA(t)?(n.cancel(),n(t,r)):(n.cancel(),c=!0,s[e]=t,n(s)))};t.cancel=Kx,l[e]=t})),n.cancel=function(){c||(c=!0,a.forEach((function(e){return l[e].cancel()})))},a.forEach((function(e){c||i(t[e],o,l[e],e)}))},GA.CALL=function(e,t,n,r){var i=t.context,o=t.fn,a=t.args,s=r.task;try{var l=o.apply(i,a);if(qx(l))return void VA(l,n);if(Wx(l))return void rw(e,l,s.context,qA,hA(o),!1,n);n(l)}catch(e){n(e,!0)}},GA.CPS=function(e,t,n){var r=t.context,i=t.fn,o=t.args;try{var a=function(e,t){Ux(e)?n(t):n(e,!0)};i.apply(r,o.concat(a)),a.cancel&&(n.cancel=a.cancel)}catch(e){n(e,!0)}},GA.FORK=function(e,t,n,r){var i=t.context,o=t.fn,a=t.args,s=t.detached,l=r.task,c=function(e){var t=e.context,n=e.fn,r=e.args;try{var i=n.apply(t,r);if(Wx(i))return i;var o=!1;return rA((function(e){return o?{value:e,done:!0}:(o=!0,{value:i,done:!qx(i)})}))}catch(e){return rA((function(){throw e}))}}({context:i,fn:o,args:a}),u=function(e,t){return e.isSagaIterator?{name:e.meta.name}:hA(t)}(c,o);kA((function(){var t=rw(e,c,l.context,qA,u,s,void 0);s?n(t):t.isRunning()?(l.queue.addTask(t),n(t)):t.isAborted()?l.queue.abort(t.error()):n(t)}))},GA.JOIN=function(e,t,n,r){var i=r.task,o=function(e,t){if(e.isRunning()){var n={task:i,cb:t};t.cancel=function(){e.isRunning()&&eA(e.joiners,n)},e.joiners.push(n)}else e.isAborted()?t(e.error(),!0):t(e.result())};if(Gx(t)){if(0===t.length)return void n([]);var a=uA(t,n);t.forEach((function(e,t){o(e,a[t])}))}else o(t,n)},GA.CANCEL=function(e,t,n,r){var i=r.task;t===Dx?HA(i):Gx(t)?t.forEach(HA):HA(t),n()},GA.SELECT=function(e,t,n){var r=t.selector,i=t.args;try{n(r.apply(void 0,[e.getState()].concat(i)))}catch(e){n(e,!0)}},GA.ACTION_CHANNEL=function(e,t,n){var r=t.pattern,i=function(e){void 0===e&&(e=pA());var t=!1,n=[];return{take:function(r){t&&e.isEmpty()?r(UA):e.isEmpty()?(n.push(r),r.cancel=function(){eA(n,r)}):r(e.take())},put:function(r){if(!t){if(0===n.length)return e.put(r);n.shift()(r)}},flush:function(n){t&&e.isEmpty()?n(UA):n(e.flush())},close:function(){if(!t){t=!0;var e=n;n=[];for(var r=0,i=e.length;r<i;r++)(0,e[r])(UA)}}}}(t.buffer),o=FA(r),a=function t(n){NA(n)||e.channel.take(t,o),i.put(n)},s=i.close;i.close=function(){a.cancel(),s()},e.channel.take(a,o),n(i)},GA.CANCELLED=function(e,t,n,r){n(r.task.isCancelled())},GA.FLUSH=function(e,t,n){t.flush(n)},GA.GET_CONTEXT=function(e,t,n,r){n(r.task.context[t])},GA.SET_CONTEXT=function(e,t,n,r){var i=r.task;Qx(i.context,t),n()},GA);function XA(e,t){return e+"?"+t}function ZA(e){var t=e.name,n=e.location;return n?t+"  "+XA(n.fileName,n.lineNumber):t}function YA(e){var t,n,r,i=(t=function(e){return e.cancelledTasks},n=e,(r=[]).concat.apply(r,n.map(t)));return i.length?["Tasks cancelled due to error:"].concat(i).join("\n"):""}var KA=null,JA=[],QA=function(e){e.crashedEffect=KA,JA.push(e)},ew=function(){KA=null,JA.length=0},tw=function(){var e=JA[0],t=JA.slice(1),n=e.crashedEffect?function(e){var t=fA(e);return t?t.code+"  "+XA(t.fileName,t.lineNumber):""}(e.crashedEffect):null;return["The above error occurred in task "+ZA(e.meta)+(n?" \n when executing effect "+n:"")].concat(t.map((function(e){return"    created by "+ZA(e.meta)})),[YA(JA)]).join("\n")};function nw(e,t,n,r,i,o,a){var s;void 0===a&&(a=Kx);var l,c,u=0,h=null,f=[],p=Object.create(n),d=function(e,t,n){var r,i=[],o=!1;function a(e){f.push.apply(f,d.getTasks().map((function(e){return e.meta.name}))),l(),n(e,!0)}function s(t){i.push(t),t.cont=function(s,l){o||(eA(i,t),t.cont=Kx,l?a(s):(t===e&&(r=s),i.length||(o=!0,n(r))))}}function l(){o||(o=!0,i.forEach((function(e){e.cont=Kx,e.cancel()})),i=[])}return s(e),{addTask:s,cancelAll:l,abort:a,getTasks:function(){return i}}}(t,0,m);function m(t,n){if(n){if(u=2,QA({meta:i,cancelledTasks:f}),g.isRoot){var r=tw();ew(),e.onError(t,{sagaStack:r})}c=t,h&&h.reject(t)}else t===Lx?u=1:1!==u&&(u=3),l=t,h&&h.resolve(t);g.cont(t,n),g.joiners.forEach((function(e){e.cb(t,n)})),g.joiners=null}var g=((s={})[zx]=!0,s.id=r,s.meta=i,s.isRoot=o,s.context=p,s.joiners=[],s.queue=d,s.cancel=function(){0===u&&(u=1,d.cancelAll(),m(Lx,!1))},s.cont=a,s.end=m,s.setContext=function(e){Qx(p,e)},s.toPromise=function(){return h||(h=CA(),2===u?h.reject(c):0!==u&&h.resolve(l)),h.promise},s.isRunning=function(){return 0===u},s.isCancelled=function(){return 1===u||0===u&&1===t.status},s.isAborted=function(){return 2===u},s.result=function(){return l},s.error=function(){return c},s);return g}function rw(e,t,n,r,i,o,a){var s=e.finalizeRunEffect((function(t,n,r){qx(t)?VA(t,r):Wx(t)?rw(e,t,c.context,n,i,!1,r):t&&t[Mx]?(0,$A[t.type])(e,t.payload,r,u):r(t)}));h.cancel=Kx;var l={meta:i,cancel:function(){0===l.status&&(l.status=1,h(Lx))},status:0},c=nw(e,l,n,r,i,o,a),u={task:c,digestEffect:f};return a&&(a.cancel=c.cancel),h(),c;function h(e,n){try{var i;n?(i=t.throw(e),ew()):lA(e)?(l.status=1,h.cancel(),i=jx(t.return)?t.return(Lx):{done:!0,value:Lx}):i=sA(e)?jx(t.return)?t.return():{done:!0}:t.next(e),i.done?(1!==l.status&&(l.status=3),l.cont(i.value)):f(i.value,r,h)}catch(e){if(1===l.status)throw e;l.status=2,l.cont(e,!0)}}function f(t,n,r,i){void 0===i&&(i="");var o,a=WA();function l(n,i){o||(o=!0,r.cancel=Kx,e.sagaMonitor&&(i?e.sagaMonitor.effectRejected(a,n):e.sagaMonitor.effectResolved(a,n)),i&&function(e){KA=e}(t),r(n,i))}e.sagaMonitor&&e.sagaMonitor.effectTriggered({effectId:a,parentEffectId:n,label:i,effect:t}),l.cancel=Kx,r.cancel=function(){o||(o=!0,l.cancel(),l.cancel=Kx,e.sagaMonitor&&e.sagaMonitor.effectCancelled(a))},s(t,a,l)}}function iw(e,t){for(var n=e.channel,r=void 0===n?jA():n,i=e.dispatch,o=e.getState,a=e.context,s=void 0===a?{}:a,l=e.sagaMonitor,c=e.effectMiddlewares,u=e.onError,h=void 0===u?iA:u,f=arguments.length,p=new Array(f>2?f-2:0),d=2;d<f;d++)p[d-2]=arguments[d];var m,g=t.apply(void 0,p),y=WA();if(l&&(l.rootSagaStarted=l.rootSagaStarted||Kx,l.effectTriggered=l.effectTriggered||Kx,l.effectResolved=l.effectResolved||Kx,l.effectRejected=l.effectRejected||Kx,l.effectCancelled=l.effectCancelled||Kx,l.actionDispatched=l.actionDispatched||Kx,l.rootSagaStarted({effectId:y,saga:t,args:p})),c){var v=nr.apply(void 0,c);m=function(e){return function(t,n,r){return v((function(t){return e(t,n,r)}))(t)}}}else m=Jx;var b={channel:r,dispatch:aA(i),getState:o,sagaMonitor:l,onError:h,finalizeRunEffect:m};return kA((function(){var e=rw(b,g,s,y,hA(t),!0,void 0);return l&&l.effectResolved(y,e),e}))}const ow=function(e){var t,n=void 0===e?{}:e,r=n.context,i=void 0===r?{}:r,o=n.channel,a=void 0===o?jA():o,s=n.sagaMonitor,l=hd(n,["context","channel","sagaMonitor"]);function c(e){var n=e.getState,r=e.dispatch;return t=iw.bind(null,ud({},l,{context:i,channel:a,dispatch:r,getState:n,sagaMonitor:s})),function(e){return function(t){s&&s.actionDispatched&&s.actionDispatched(t);var n=e(t);return a.put(t),n}}}return c.run=function(){return t.apply(void 0,arguments)},c.setContext=function(e){Qx(i,e)},c};a(71079),a(35666);var aw=function(e){return{done:!0,value:e}},sw={};function lw(e){return $x(e)?"channel":Xx(e)?String(e):jx(e)?e.name:String(e)}function cw(e,t,n){var r,i,o,a=t;function s(t,n){if(a===sw)return aw(t);if(n&&!i)throw a=sw,n;r&&r(t);var s=n?e[i](n):e[a]();return a=s.nextState,o=s.effect,r=s.stateUpdater,i=s.errorState,a===sw?aw(t):o}return rA(s,(function(e){return s(null,e)}),n)}function uw(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o,a={done:!1,value:vA(e)},s=function(e){return{done:!1,value:AA.apply(void 0,[t].concat(r,[e]))}},l=function(e){return o=e};return cw({q1:function(){return{nextState:"q2",effect:a,stateUpdater:l}},q2:function(){return{nextState:"q1",effect:s(o)}}},"q1","takeEvery("+lw(e)+", "+t.name+")")}function hw(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o,a,s={done:!1,value:vA(e)},l=function(e){return{done:!1,value:AA.apply(void 0,[t].concat(r,[e]))}},c=function(e){return{done:!1,value:wA(e)}},u=function(e){return o=e},h=function(e){return a=e};return cw({q1:function(){return{nextState:"q2",effect:s,stateUpdater:h}},q2:function(){return o?{nextState:"q3",effect:c(o)}:{nextState:"q1",effect:l(a),stateUpdater:u}},q3:function(){return{nextState:"q1",effect:l(a),stateUpdater:u}}},"q1","takeLatest("+lw(e)+", "+t.name+")")}function fw(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return AA.apply(void 0,[uw,e,t].concat(r))}function pw(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return AA.apply(void 0,[hw,e,t].concat(r))}function dw(e){return dw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dw(e)}var mw="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==mw&&mw,gw="URLSearchParams"in mw,yw="Symbol"in mw&&"iterator"in Symbol,vw="FileReader"in mw&&"Blob"in mw&&function(){try{return new Blob,!0}catch(e){return!1}}(),bw="FormData"in mw,_w="ArrayBuffer"in mw;if(_w)var xw=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],Aw=ArrayBuffer.isView||function(e){return e&&xw.indexOf(Object.prototype.toString.call(e))>-1};function ww(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function Cw(e){return"string"!=typeof e&&(e=String(e)),e}function Ew(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return yw&&(t[Symbol.iterator]=function(){return t}),t}function Sw(e){this.map={},e instanceof Sw?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function Tw(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function Bw(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function kw(e){var t=new FileReader,n=Bw(t);return t.readAsArrayBuffer(e),n}function Mw(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function Pw(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:vw&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:bw&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:gw&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():_w&&vw&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=Mw(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):_w&&(ArrayBuffer.prototype.isPrototypeOf(e)||Aw(e))?this._bodyArrayBuffer=Mw(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):gw&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},vw&&(this.blob=function(){var e=Tw(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?Tw(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(kw)}),this.text=function(){var e=Tw(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,n=Bw(t);return t.readAsText(e),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},bw&&(this.formData=function(){return this.text().then(Dw)}),this.json=function(){return this.text().then(JSON.parse)},this}Sw.prototype.append=function(e,t){e=ww(e),t=Cw(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},Sw.prototype.delete=function(e){delete this.map[ww(e)]},Sw.prototype.get=function(e){return e=ww(e),this.has(e)?this.map[e]:null},Sw.prototype.has=function(e){return this.map.hasOwnProperty(ww(e))},Sw.prototype.set=function(e,t){this.map[ww(e)]=Cw(t)},Sw.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},Sw.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),Ew(e)},Sw.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),Ew(e)},Sw.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),Ew(e)},yw&&(Sw.prototype[Symbol.iterator]=Sw.prototype.entries);var Iw=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Ow(e,t){if(!(this instanceof Ow))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,r,i=(t=t||{}).body;if(e instanceof Ow){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new Sw(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new Sw(t.headers)),this.method=(r=(n=t.method||this.method||"GET").toUpperCase(),Iw.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var o=/([?&])_=[^&]*/;o.test(this.url)?this.url=this.url.replace(o,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function Dw(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function zw(e,t){if(!(this instanceof zw))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new Sw(t.headers),this.url=t.url||"",this._initBody(e)}Ow.prototype.clone=function(){return new Ow(this,{body:this._bodyInit})},Pw.call(Ow.prototype),Pw.call(zw.prototype),zw.prototype.clone=function(){return new zw(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Sw(this.headers),url:this.url})},zw.error=function(){var e=new zw(null,{status:0,statusText:""});return e.type="error",e};var Lw=[301,302,303,307,308];zw.redirect=function(e,t){if(-1===Lw.indexOf(t))throw new RangeError("Invalid status code");return new zw(null,{status:t,headers:{location:e}})};var Rw=mw.DOMException;try{new Rw}catch(e){(Rw=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),Rw.prototype.constructor=Rw}function Fw(e,t){return new Promise((function(n,r){var i=new Ow(e,t);if(i.signal&&i.signal.aborted)return r(new Rw("Aborted","AbortError"));var o=new XMLHttpRequest;function a(){o.abort()}o.onload=function(){var e,t,r={status:o.status,statusText:o.statusText,headers:(e=o.getAllResponseHeaders()||"",t=new Sw,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}})),t)};r.url="responseURL"in o?o.responseURL:r.headers.get("X-Request-URL");var i="response"in o?o.response:o.responseText;setTimeout((function(){n(new zw(i,r))}),0)},o.onerror=function(){setTimeout((function(){r(new TypeError("Network request failed"))}),0)},o.ontimeout=function(){setTimeout((function(){r(new TypeError("Network request failed"))}),0)},o.onabort=function(){setTimeout((function(){r(new Rw("Aborted","AbortError"))}),0)},o.open(i.method,function(e){try{return""===e&&mw.location.href?mw.location.href:e}catch(t){return e}}(i.url),!0),"include"===i.credentials?o.withCredentials=!0:"omit"===i.credentials&&(o.withCredentials=!1),"responseType"in o&&(vw?o.responseType="blob":_w&&i.headers.get("Content-Type")&&-1!==i.headers.get("Content-Type").indexOf("application/octet-stream")&&(o.responseType="arraybuffer")),!t||"object"!=typeof t.headers||t.headers instanceof Sw?i.headers.forEach((function(e,t){o.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){o.setRequestHeader(e,Cw(t.headers[e]))})),i.signal&&(i.signal.addEventListener("abort",a),o.onreadystatechange=function(){4===o.readyState&&i.signal.removeEventListener("abort",a)}),o.send(void 0===i._bodyInit?null:i._bodyInit)}))}Fw.polyfill=!0,mw.fetch||(mw.fetch=Fw,mw.Headers=Sw,mw.Request=Ow,mw.Response=zw);var Uw=a(64428);Uw.Manager;const Nw=Uw;function jw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jw(Object(n),!0).forEach((function(t){Gw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qw,Ww,Hw,$w=regeneratorRuntime.mark(Yw),Xw=regeneratorRuntime.mark(eC),Zw=regeneratorRuntime.mark(aC);function Yw(e,t){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return qw=e,Kw(t),n.next=4,fw("TOGGLE_LAYER",rC);case 4:return n.t0=n.sent,n.next=7,fw("UPDATE_LAYER_PROPERTY",iC);case 7:return n.t1=n.sent,n.next=10,fw("FETCH_REQUEST",aC);case 10:return n.t2=n.sent,n.next=13,fw("PAN_MAP_TO",oC);case 13:return n.t3=n.sent,n.next=16,fw("SET_MAP_DRAW_MODE",nC);case 16:return n.t4=n.sent,n.next=19,fw("SOCKET_REQUEST",eC);case 19:return n.t5=n.sent,n.next=22,pw("SOCKET_REQUEST_LATEST",eC);case 22:return n.t6=n.sent,n.next=25,[n.t0,n.t1,n.t2,n.t3,n.t4,n.t5,n.t6];case 25:case"end":return n.stop()}}),$w)}function Kw(e){(Ww=Nw(e.sio_url,{path:e.sio_url_path,autoConnect:!1})).on("connect",(function(){console.log("sio proxy is up on saga")})),Ww.on("connect",(function(){Jw("connect")})),Ww.on("reconnect",(function(){Jw("reconnect")})),Ww.on("error",(function(){Qw("error")})),Ww.on("disconnect",(function(){Qw("disconnect")})),Ww.on("reconnect_error",(function(){Qw("reconnect error")})),Ww.on("reconnect_failed",(function(){Qw("reconnect failed")}))}function Jw(e){var t=document.getElementById("socket-indicator");t.classList.remove("socket-error"),t.classList.add("socket-success"),t.innerHTML=" sio "+e}function Qw(e){var t=document.getElementById("socket-indicator");t.classList.remove("socket-success"),t.classList.add("socket-error"),t.innerHTML=" sio "+e}function eC(e){var t,n,r,i,o,a,s;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,tC;case 2:if(t=l.sent,n=e.payload,r=n.request,i=n.onLoading,o=n.onSuccess,a=n.onError,!i){l.next=7;break}return l.next=7,bA({type:i.type,payload:i.payload});case 7:return l.prev=7,l.next=10,xA(t,r);case 10:return s=l.sent,l.next=13,bA({type:o.type,payload:Vw({fetchResult:s.data},o.payload)});case 13:l.next=21;break;case 15:if(l.prev=15,l.t0=l.catch(7),console.log(l.t0),!a){l.next=21;break}return l.next=21,bA({type:a.type,payload:Vw({fetchResult:l.t0},a.payload)});case 21:case"end":return l.stop()}}),Xw,null,[[7,15]])}function tC(e){return new Promise((function(t,n){Ww.emit("query",e),Ww.on("reply",(function(r){"success"!==r.type?n(r):r.ctx==e.ctx&&t(r)}))}))}function nC(e){var t=qw.map._controls.drawControl;"direct_select"===e.payload?t.changeMode("simple_select"):t.changeMode(e.payload)}function rC(e){qw.layers[e.payload].style.visible=!qw.layers[e.payload].style.visible}function iC(e){if(e.payload.binding&&""!==e.payload.binding)return function(e,t,n){var r,i=t.split(".");i.length>0?(r=e.hasOwnProperty(i[0])?e[i[0]]:null,i.map((function(e,t){t>0&&(r[e]?"object"===dw(r[e])?r=r[i[e]]:r[e]=n:Object.getOwnPropertyDescriptor(r,"_"+e)?r[e]=n:console.log('error: resolver key "'+e+'" not found.',r))}))):e[t]?e[t]=n:console.log("error")}(qw.layers[e.payload.id],e.payload.binding,e.payload.value)}function oC(e){var t=e.payload,n=t.lat,r=[t.lng,n];qw.map.flyTo({center:r,zoom:13,bearing:0,speed:10,curve:.8,easing:function(e){return e}})}function aC(e){var t,n,r,i,o,a;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(t=e.payload,n=t.onLoading,r=t.onSuccess,i=t.onError,o=!1,Hw&&r.type===Hw.payload.onSuccess.payload.type&&e.payload.query===Hw.query&&(o=!0),o){s.next=18;break}return s.next=6,bA({type:n.type,payload:n.payload});case 6:return s.prev=6,s.next=9,xA(sC,e.payload.query);case 9:return a=s.sent,s.next=12,bA({type:r.type,payload:Vw({fetchResult:a},r.payload)});case 12:s.next=18;break;case 14:return s.prev=14,s.t0=s.catch(6),s.next=18,bA({type:i.type,payload:Vw({fetchResult:s.t0},i.payload)});case 18:Hw=e;case 19:case"end":return s.stop()}}),Zw,null,[[6,14]])}function sC(e){var t=new Promise((function(e){setTimeout(e,300)})),n=fetch(e).then((function(e){return e.json().then((function(e){return e}))})).catch((function(e){return!1}));return Promise.all([n,t]).then((function(e){if(e[0])return e[0];throw Error()}))}var lC={middleware:ow(),root:Yw},cC=function e(t,n,r){var i;if("function"==typeof n&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(Zn(0));if("function"==typeof n&&void 0===r&&(r=n,n=void 0),void 0!==r){if("function"!=typeof r)throw new Error(Zn(1));return r(e)(t,n)}if("function"!=typeof t)throw new Error(Zn(2));var o=t,a=n,s=[],l=s,c=!1;function u(){l===s&&(l=s.slice())}function h(){if(c)throw new Error(Zn(3));return a}function f(e){if("function"!=typeof e)throw new Error(Zn(4));if(c)throw new Error(Zn(5));var t=!0;return u(),l.push(e),function(){if(t){if(c)throw new Error(Zn(6));t=!1,u();var n=l.indexOf(e);l.splice(n,1),s=null}}}function p(e){if(!Qn(e))throw new Error(Zn(7));if(void 0===e.type)throw new Error(Zn(8));if(c)throw new Error(Zn(9));try{c=!0,a=o(a,e)}finally{c=!1}for(var t=s=l,n=0;n<t.length;n++)(0,t[n])();return e}function d(e){if("function"!=typeof e)throw new Error(Zn(10));o=e,p({type:Jn.REPLACE})}function m(){var e,t=f;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(Zn(11));function n(){e.next&&e.next(h())}return n(),{unsubscribe:t(n)}}})[Yn]=function(){return this},e}return p({type:Jn.INIT}),(i={dispatch:p,subscribe:f,getState:h,replaceReducer:d})[Yn]=m,i}(Jf,nr(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(Zn(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=t.map((function(e){return e(i)}));return r=nr.apply(void 0,o)(n.dispatch),Xn(Xn({},n),{},{dispatch:r})}}}(lC.middleware),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}));const uC=Sx;var hC=a(4061),fC=a.n(hC);function pC(e){return pC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pC(e)}function dC(e,t){return dC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},dC(e,t)}function mC(e,t){if(t&&("object"===pC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return gC(e)}function gC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yC(e){return yC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},yC(e)}function vC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dC(e,t)}(o,e);var t,n,r,i=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=yC(t);if(n){var i=yC(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return mC(this,e)});function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),vC(gC(t=i.call(this,e)),"load",(function(e){t.props.drawControl.set({type:"FeatureCollection",features:[e]});var n=fC()(e.geometry.coordinates,1);t.props.actions.panMapTo({lng:n[0],lat:n[1]})})),vC(gC(t),"edit",(function(e){t.setState({edit:!0,index:e,poly:t.props.polygonManager[e].id})})),vC(gC(t),"inspect",(function(e){t.setState({inspectorModal:!0})})),vC(gC(t),"remove",(function(e){t.props.actions.removePolygonFromManager(e)})),vC(gC(t),"onEditSave",(function(e,n){t.props.actions.updatePolygonAtManager({index:e,id:n}),t.setState({edit:!1})})),vC(gC(t),"onEditCancel",(function(){t.setState({edit:!1})})),vC(gC(t),"render",(function(){var e=t.props.polygonManager.map((function(e,n){return Wn.createElement("div",{key:"node_row_"+e.id,className:"item"},Wn.createElement("div",{className:"key"},e.id),Wn.createElement("div",{className:"value"},Wn.createElement("div",{className:"table-btn pointer",onClick:t.remove.bind(null,n)},Wn.createElement(Pm(),{name:"trash-o"})," delete"),Wn.createElement("div",{className:"table-btn pointer",onClick:t.edit.bind(null,n)},Wn.createElement(Pm(),{name:"edit"})," rename"),Wn.createElement("div",{className:"table-btn pointer",onClick:t.load.bind(null,e)},Wn.createElement(Pm(),{name:"map-o"})," load"),Wn.createElement("div",{className:"table-btn pointer",onClick:t.inspect.bind(null,e)},Wn.createElement(Pm(),{name:"table"})," inspect")))})),n=t.state.edit?Wn.createElement(rm,{text:"Enter polygon id: ",placeholder:t.state.poly,index:t.state.index,onSave:t.onEditSave,onCancel:t.onEditCancel}):null;return Wn.createElement("div",{className:"details",style:{width:"750px"}},t.state.inspectorModal?Wn.createElement(nm,{header:"Inspect",content:Wn.createElement("div",{style:{width:"400px",height:"200px",padding:"10px"}},Wn.createElement("p",null," Sorry, feature not avaiable. ")),onClose:function(){t.setState({inspectorModal:!1})}}):null,Wn.createElement("div",{className:"item"},Wn.createElement("div",{className:"key"},"ID"),Wn.createElement("div",{className:"value"},"ACTIONS")),e,n)})),t.state={edit:!1,index:null,poly:null,inspectorModal:!1},t}return r=o,Object.defineProperty(r,"prototype",{writable:!1}),r}(Wn.Component);const _C=Vd((function(e){return{polygonManager:e.polygonManager}}),(function(e){return{actions:tr(n,e)}}))(bC);function xC(e){return xC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xC(e)}function AC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AC(Object(n),!0).forEach((function(t){kC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function CC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function EC(e,t){return EC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},EC(e,t)}function SC(e,t){if(t&&("object"===xC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return TC(e)}function TC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BC(e){return BC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},BC(e)}function kC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var MC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&EC(e,t)}(a,e);var t,n,r,i,o=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=BC(t);if(n){var i=BC(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return SC(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),kC(TC(t=o.call(this,e)),"toggle",(function(e){t.props.map.drawMode!==e?t.props.actions.setMapDrawMode(e):t.props.actions.setMapDrawMode("static")})),kC(TC(t),"trash",(function(){t.props.drawControl.deleteAll().getAll(),t.props.actions.setMapDrawMode("static"),t.props.actions.setMapDrawSelected([])})),kC(TC(t),"inspect",(function(){t.setState({inspectorModal:!0})})),kC(TC(t),"manager",(function(){t.setState({featureManager:!0})})),kC(TC(t),"zoomIn",(function(){t.props.mapboxgl.zoomIn()})),kC(TC(t),"zoomOut",(function(){t.props.mapboxgl.zoomOut()})),kC(TC(t),"save",(function(e,n){var r=wC(wC({},t.props.drawControl.getSelected().features[0]),{},{id:n});t.props.actions.addPolygonToManager(r),t.trash(),t.onSaveCancel()})),kC(TC(t),"onSave",(function(){t.setState({saveInput:!0})})),kC(TC(t),"onSaveCancel",(function(){t.setState({saveInput:!1})})),t.state={saveInput:!1,inspectorModal:!1,featureManager:!1},t}return r=a,i=[{key:"render",value:function(){for(var e=this,t=this.props,n=t.drawControl,r=t.map,i=this.state,o=(i.inspectorModal,i.featureManager,Wn.createElement("div",null,Wn.createElement("button",{label:"inspect",className:"draw-ctrl-btn selection inspect-btn",onClick:this.inspect}),Wn.createElement("button",{label:"save",className:"draw-ctrl-btn selection save-btn",onClick:this.onSave}))),a=[],s=0;s<Math.floor(5*Math.random())+1;s++)a.push(s);return Wn.createElement("aside",{id:"draw_ctrl",className:"draw-ctrl"},this.state.inspectorModal?Wn.createElement(nm,{header:"Inspect",content:Wn.createElement("div",{style:{width:"400px",height:"200px",padding:"10px"}},Wn.createElement("p",null," Sorry, feature not avaiable. ")),onClose:function(){e.setState({inspectorModal:!1})}}):null,Wn.createElement("button",{label:"zoom-in",className:"draw-ctrl-btn zoomIn-btn",onClick:this.zoomIn}),Wn.createElement("button",{label:"zoom-out",className:"draw-ctrl-btn zoomOut-btn",onClick:this.zoomOut}),Wn.createElement("button",{label:"select",className:"simple_select"===n.getMode()?"draw-ctrl-btn select-btn active":"draw-ctrl-btn select-btn",onClick:this.toggle.bind(null,"simple_select")}),Wn.createElement("button",{label:"manager",className:"draw-ctrl-btn manager-btn",onClick:this.manager}),this.state.featureManager?Wn.createElement(nm,{header:"Feature Manager",content:Wn.createElement(_C,{drawControl:n}),onClose:function(){e.setState({featureManager:!1})}}):null,Wn.createElement("button",{label:"draw",className:"draw_polygon"===n.getMode()?"draw-ctrl-btn draw-btn active":"draw-ctrl-btn draw-btn",onClick:this.toggle.bind(null,"draw_polygon")}),Wn.createElement("button",{label:"clear",className:"draw-ctrl-btn clear-btn",onClick:this.trash}),r.selectedIds.length>0&&o,this.state.saveInput&&Wn.createElement(rm,{text:"Enter polygon id: ",placeholder:Date.now().toString(),onSave:this.save,onCancel:this.onSaveCancel}))}}],i&&CC(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),a}(Wn.Component),PC=(Vd((function(e){return{map:e.map}}),(function(e){return{actions:tr(n,e)}}))(MC),a(1307)),IC=a.n(PC),OC=a(50209),DC=a.n(OC),zC=a(6158),LC=a.n(zC);function RC(e){return RC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},RC(e)}function FC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function UC(e,t){return UC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},UC(e,t)}function NC(e,t){if(t&&("object"===RC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function jC(e){return jC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},jC(e)}var VC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&UC(e,t)}(a,e);var t,n,r,i,o=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=jC(t);if(n){var i=jC(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return NC(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).div=document.createElement("div"),t.div.id="popup",t}return r=a,i=[{key:"componentDidUpdate",value:function(){var e=this.props,t=(e.map,e.actions),n=e.mapItem,r=e.isMoving;r?(qd.render(Wn.createElement(GC,{actions:t,itemView:n.itemView,size:n.size}),this.div),this.popup.setLngLat([r.location.latlong.lng,r.location.latlong.lat])):(n.itemView&&(this.popup=new(LC().Popup)({anchor:"bottom",offset:[5,-2]}).setDOMContent(this.div).addTo(this.props.map).setLngLat([n.location.latlong.lng,n.location.latlong.lat])),qd.render(Wn.createElement(GC,{actions:t,itemView:n.itemView,size:n.size}),this.div))}},{key:"render",value:function(){return null}}],i&&FC(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),a}(Wn.Component),GC=function(e){var t=e.actions,n=e.itemView,r={};switch(e.size){case"s":r={w:"100px",mh:"10px"};break;case"m":default:r={w:"250px",mh:"100px"};break;case"l":r={w:"300px",mh:"300px"}}return Wn.createElement(qC,{actions:t,widgets:n,width:r.w,minHeight:r.mh})},qC=function(e){var t=e.widgets,n=e.width,r=e.minHeight,i=e.actions;return Wn.createElement("div",{id:"popup-item-view",style:{width:n,height:"auto",minHeight:r}},t&&t.map((function(e,t){var r=Wn.createElement(z_[e.type],Object.assign({},e.props,{actions:i,width:n||"300px"}));return Wn.createElement("article",{key:t,id:"section_"+t,className:"map-popup"},e.subtitle?Wn.createElement("header",null,e.subtitle):null,r)})))};const WC=Vd((function(e){return{isMoving:e.map.isMoving,size:e.map.size,mapItem:e.map.mapItem}}),(function(e){return{actions:tr(n,e)}}))(VC);var HC=a(711),$C=a.n(HC),XC=a(13311),ZC=a.n(XC),YC=a(23560),KC=a.n(YC),JC=a(23493),QC=a.n(JC),eE=a(89734),tE=a.n(eE),nE=a(27361),rE=a.n(nE),iE=a(96026),oE=a.n(iE),aE=a(14293),sE=a.n(aE),lE=a(51584),cE=a.n(lE),uE=a(1469),hE=a.n(uE),fE=a(13218),pE=a.n(fE);function dE(e){return dE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dE(e)}var mE=["viewBox","children"],gE=["className","color","height","id","lang","max","media","method","min","name","style","target","type","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","points","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],yE=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],vE=function(e,t,n){if(!e||"function"==typeof e||"boolean"==typeof e)return null;var r=e;if((0,Wn.isValidElement)(e)&&(r=e.props),!pE()(r))return null;var i={};return Object.keys(r).forEach((function(e){(gE.includes(e)||n&&mE.includes(e)||t&&yE.includes(e))&&(i[e]=r[e])})),i},bE=function(e,t){if(!e||"function"==typeof e||"boolean"==typeof e)return null;var n=e;if((0,Wn.isValidElement)(e)&&(n=e.props),!pE()(n))return null;var r={};return Object.keys(n).forEach((function(e){yE.includes(e)&&(r[e]=t||function(t){return n[e](n,t)})})),r},_E=function(e,t,n){if(!pE()(e)||"object"!==dE(e))return null;var r=null;return Object.keys(e).forEach((function(i){var o=e[i];yE.includes(i)&&"function"==typeof o&&(r||(r={}),r[i]=function(e,t,n){return function(r){return e(t,n,r),null}}(o,t,n))})),r};function xE(){return xE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xE.apply(this,arguments)}function AE(e){var t=e.children,n=e.width,r=e.height,i=e.viewBox,o=e.className,a=e.style,s=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,["children","width","height","viewBox","className","style"]),l=i||{width:n,height:r,x:0,y:0},c=vg()("recharts-surface",o);return Wn.createElement("svg",xE({},vE(s,!0,!0),{className:c,width:n,height:r,style:a,viewBox:"".concat(l.x," ").concat(l.y," ").concat(l.width," ").concat(l.height),version:"1.1"}),t)}function wE(){return wE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wE.apply(this,arguments)}function CE(e){var t=e.children,n=e.className,r=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,["children","className"]),i=vg()("recharts-layer",n);return Wn.createElement("g",wE({className:i},vE(r,!0)),t)}var EE=a(45578),SE=a.n(EE),TE=a(58367),BE=a(54087),kE=a.n(BE);function ME(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=-1,r=function r(i){n<0&&(n=i),i-n>t?(e(i),n=-1):kE()(r)};kE()(r)}function PE(e){return PE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PE(e)}function IE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function OE(){var e=function(){return null},t=!1,n=function n(r){if(!t){if(Array.isArray(r)){if(!r.length)return;var i=function(e){if(Array.isArray(e))return e}(s=r)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(s)||function(e,t){if(e){if("string"==typeof e)return IE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?IE(e,t):void 0}}(s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=i[0],a=i.slice(1);return"number"==typeof o?void ME(n.bind(null,a),o):(n(o),void ME(n.bind(null,a)))}"object"===PE(r)&&e(r),"function"==typeof r&&r()}var s};return{stop:function(){t=!0},start:function(e){t=!1,n(e)},subscribe:function(t){return e=t,function(){e=function(){return null}}}}}function DE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DE(Object(n),!0).forEach((function(t){LE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function LE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var RE=["Webkit","Moz","O","ms"],FE=["-webkit-","-moz-","-o-","-ms-"],UE=["transform","transformOrigin","transition"],NE=function(e){return e},jE=function(e,t){return Object.keys(t).reduce((function(n,r){return zE(zE({},n),{},LE({},r,e(r,t[r])))}),{})},VE=function(e){return Object.keys(e).reduce((function(e,t){return zE(zE({},e),function(e,t){if(-1===UE.indexOf(e))return LE({},e,t);var n="transition"===e,r=e.replace(/(\w)/,(function(e){return e.toUpperCase()})),i=t;return RE.reduce((function(e,o,a){return n&&(i=t.replace(/(transform|transform-origin)/gim,"".concat(FE[a],"$1"))),zE(zE({},e),{},LE({},o+r,i))}),{})}(t,e[t]))}),e)},GE=function(e,t,n){return e.map((function(e){return"".concat(function(e){return e.replace(/([A-Z])/g,(function(e){return"-".concat(e.toLowerCase())}))}(e)," ").concat(t,"ms ").concat(n)})).join(",")};function qE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||WE(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function WE(e,t){if(e){if("string"==typeof e)return HE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?HE(e,t):void 0}}function HE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $E=1e-4,XE=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},ZE=function(e,t){return e.map((function(e,n){return e*Math.pow(t,n)})).reduce((function(e,t){return e+t}))},YE=function(e,t){return function(n){var r=XE(e,t);return ZE(r,n)}},KE=function(e,t){return function(n){var r,i=XE(e,t),o=[].concat(function(e){if(Array.isArray(e))return HE(e)}(r=i.map((function(e,t){return e*t})).slice(1))||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(r)||WE(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[0]);return ZE(o,n)}},JE=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],o=t[2],a=t[3];if(1===t.length)switch(t[0]){case"linear":r=0,i=0,o=1,a=1;break;case"ease":r=.25,i=.1,o=.25,a=1;break;case"ease-in":r=.42,i=0,o=1,a=1;break;case"ease-out":r=.42,i=0,o=.58,a=1;break;case"ease-in-out":r=0,i=0,o=.58,a=1;break;default:var s=t[0].split("(");if("cubic-bezier"===s[0]&&4===s[1].split(")")[0].split(",").length){var l=s[1].split(")")[0].split(",").map((function(e){return parseFloat(e)})),c=qE(l,4);r=c[0],i=c[1],o=c[2],a=c[3]}}[r,o,i,a].every((function(e){return"number"==typeof e&&e>=0&&e<=1}));var u=YE(r,o),h=YE(i,a),f=KE(r,o),p=function(e){return e>1?1:e<0?0:e},d=function(e){for(var t=e>1?1:e,n=t,r=0;r<8;++r){var i=u(n)-t,o=f(n);if(Math.abs(i-t)<$E||o<$E)return h(n);n=p(n-i/o)}return h(n)};return d.isStepper=!1,d},QE=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stiff,n=void 0===t?100:t,r=e.damping,i=void 0===r?8:r,o=e.dt,a=void 0===o?17:o,s=function(e,t,r){var o=r+(-(e-t)*n-r*i)*a/1e3,s=r*a/1e3+e;return Math.abs(s-t)<$E&&Math.abs(o)<$E?[t,0]:[s,o]};return s.isStepper=!0,s.dt=a,s};function eS(e){return function(e){if(Array.isArray(e))return oS(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||iS(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tS(Object(n),!0).forEach((function(t){rS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iS(e,t){if(e){if("string"==typeof e)return oS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oS(e,t):void 0}}function oS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var aS=function(e,t,n){return e+(t-e)*n},sS=function(e){return e.from!==e.to},lS=function e(t,n,r){var i=jE((function(e,n){if(sS(n)){var r=(a=t(n.from,n.to,n.velocity),s=2,function(e){if(Array.isArray(e))return e}(a)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(a,s)||iS(a,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=r[0],o=r[1];return nS(nS({},n),{},{from:i,velocity:o})}var a,s;return n}),n);return r<1?jE((function(e,t){return sS(t)?nS(nS({},t),{},{velocity:aS(t.velocity,i[e].velocity,r),from:aS(t.from,i[e].from,r)}):t}),n):e(t,i,r-1)};function cS(e){return cS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cS(e)}function uS(e){return function(e){if(Array.isArray(e))return hS(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return hS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hS(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fS(Object(n),!0).forEach((function(t){dS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gS(e,t){return gS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},gS(e,t)}function yS(e,t){return!t||"object"!==cS(t)&&"function"!=typeof t?vS(e):t}function vS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bS(e){return bS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},bS(e)}var _S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gS(e,t)}(a,e);var t,n,r,i,o=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=bS(t);if(n){var i=bS(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return yS(this,e)});function a(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var r=(n=o.call(this,e,t)).props,i=r.isActive,s=r.attributeName,l=r.from,c=r.to,u=r.steps,h=r.children;if(n.handleStyleChange=n.handleStyleChange.bind(vS(n)),n.changeStyle=n.changeStyle.bind(vS(n)),!i)return n.state={style:{}},"function"==typeof h&&(n.state={style:c}),yS(n);if(u&&u.length)n.state={style:u[0].style};else if(l){if("function"==typeof h)return n.state={style:l},yS(n);n.state={style:s?dS({},s,l):l}}else n.state={style:{}};return n}return r=a,i=[{key:"componentDidMount",value:function(){var e=this.props,t=e.isActive,n=e.canBegin;this.mounted=!0,t&&n&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isActive,r=t.canBegin,i=t.attributeName,o=t.shouldReAnimate;if(r)if(n){if(!((0,TE.deepEqual)(e.to,this.props.to)&&e.canBegin&&e.isActive)){var a=!e.canBegin||!e.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var s=a||o?this.props.from:e.to;if(this.state&&this.state.style){var l={style:i?dS({},i,s):s};(i&&this.state.style[i]!==s||!i&&this.state.style!==s)&&this.setState(l)}this.runAnimation(pS(pS({},this.props),{},{from:s,begin:0}))}}else{var c={style:i?dS({},i,this.props.to):this.props.to};this.state&&this.state.style&&(i&&this.state.style[i]!==this.props.to||!i&&this.state.style!==this.props.to)&&this.setState(c)}}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation()}},{key:"runJSAnimation",value:function(e){var t=this,n=e.from,r=e.to,i=e.duration,o=e.easing,a=e.begin,s=e.onAnimationEnd,l=e.onAnimationStart,c=function(e,t,n,r,i){var o,a,s,l,c=(o=e,a=t,[Object.keys(o),Object.keys(a)].reduce((function(e,t){return e.filter((function(e){return t.includes(e)}))}))),u=c.reduce((function(n,r){return nS(nS({},n),{},rS({},r,[e[r],t[r]]))}),{}),h=c.reduce((function(n,r){return nS(nS({},n),{},rS({},r,{from:e[r],velocity:0,to:t[r]}))}),{}),f=-1,p=function(){return null};return p=n.isStepper?function(r){s||(s=r);var o=(r-s)/n.dt;h=lS(n,h,o),i(nS(nS(nS({},e),t),jE((function(e,t){return t.from}),h))),s=r,Object.values(h).filter(sS).length&&(f=kE()(p))}:function(o){l||(l=o);var a=(o-l)/r,s=jE((function(e,t){return aS.apply(void 0,eS(t).concat([n(a)]))}),u);if(i(nS(nS(nS({},e),t),s)),a<1)f=kE()(p);else{var c=jE((function(e,t){return aS.apply(void 0,eS(t).concat([n(1)]))}),u);i(nS(nS(nS({},e),t),c))}},function(){return kE()(p),function(){(0,BE.cancel)(f)}}}(n,r,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];if("string"==typeof r)switch(r){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return JE(r);case"spring":return QE();default:if("cubic-bezier"===r.split("(")[0])return JE(r)}return"function"==typeof r?r:null}(o),i,this.changeStyle);this.manager.start([l,a,function(){t.stopJSAnimation=c()},i,s])}},{key:"runStepAnimation",value:function(e){var t=this,n=e.steps,r=e.begin,i=e.onAnimationStart,o=n[0],a=o.style,s=o.duration,l=void 0===s?0:s;return this.manager.start([i].concat(uS(n.reduce((function(e,r,i){if(0===i)return e;var o=r.duration,a=r.easing,s=void 0===a?"ease":a,l=r.style,c=r.properties,u=r.onAnimationEnd,h=i>0?n[i-1]:r,f=c||Object.keys(l);if("function"==typeof s||"spring"===s)return[].concat(uS(e),[t.runJSAnimation.bind(t,{from:h.style,to:l,duration:o,easing:s}),o]);var p=GE(f,o,s),d=pS(pS(pS({},h.style),l),{},{transition:p});return[].concat(uS(e),[d,o,u]).filter(NE)}),[a,Math.max(l,r)])),[e.onAnimationEnd]))}},{key:"runAnimation",value:function(e){this.manager||(this.manager=OE());var t=e.begin,n=e.duration,r=e.attributeName,i=e.to,o=e.easing,a=e.onAnimationStart,s=e.onAnimationEnd,l=e.steps,c=e.children,u=this.manager;if(this.unSubscribe=u.subscribe(this.handleStyleChange),"function"!=typeof o&&"function"!=typeof c&&"spring"!==o)if(l.length>1)this.runStepAnimation(e);else{var h=r?dS({},r,i):i,f=GE(Object.keys(h),n,o);u.start([a,t,pS(pS({},h),{},{transition:f}),n,s])}else this.runJSAnimation(e)}},{key:"handleStyleChange",value:function(e){this.changeStyle(e)}},{key:"changeStyle",value:function(e){this.mounted&&this.setState({style:e})}},{key:"render",value:function(){var e=this.props,t=e.children,n=(e.begin,e.duration,e.attributeName,e.easing,e.isActive),r=(e.steps,e.from,e.to,e.canBegin,e.onAnimationEnd,e.shouldReAnimate,e.onAnimationReStart,function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"])),i=Wn.Children.count(t),o=VE(this.state.style);if("function"==typeof t)return t(o);if(!n||0===i)return t;var a=function(e){var t=e.props,n=t.style,i=void 0===n?{}:n,a=t.className;return(0,Wn.cloneElement)(e,pS(pS({},r),{},{style:pS(pS({},i),o),className:a}))};return 1===i?a(Wn.Children.only(t)):Wn.createElement("div",null,Wn.Children.map(t,(function(e){return a(e)})))}}],i&&mS(r.prototype,i),a}(Wn.PureComponent);_S.displayName="Animate",_S.propTypes={from:nd().oneOfType([nd().object,nd().string]),to:nd().oneOfType([nd().object,nd().string]),attributeName:nd().string,duration:nd().number,begin:nd().number,easing:nd().oneOfType([nd().string,nd().func]),steps:nd().arrayOf(nd().shape({duration:nd().number.isRequired,style:nd().object.isRequired,easing:nd().oneOfType([nd().oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),nd().func]),properties:nd().arrayOf("string"),onAnimationEnd:nd().func})),children:nd().oneOfType([nd().node,nd().func]),isActive:nd().bool,canBegin:nd().bool,onAnimationEnd:nd().func,shouldReAnimate:nd().bool,onAnimationStart:nd().func,onAnimationReStart:nd().func},_S.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};const xS=_S;var AS=a(29469);function wS(e){return wS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wS(e)}function CS(){return CS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CS.apply(this,arguments)}function ES(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ES(Object(n),!0).forEach((function(t){TS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ES(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function TS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function MS(e,t){return MS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},MS(e,t)}function PS(e,t){return!t||"object"!==wS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function IS(e){return IS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},IS(e)}void 0===Number.isFinite&&(Number.isFinite=function(e){return"number"==typeof e&&isFinite(e)});var OS=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.steps,n=e.duration;return t&&t.length?t.reduce((function(e,t){return e+(Number.isFinite(t.duration)&&t.duration>0?t.duration:0)}),0):Number.isFinite(n)?n:0},DS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MS(e,t)}(a,e);var t,n,r,i,o=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=IS(t);if(n){var i=IS(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return PS(this,e)});function a(){var e;BS(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).state={isActive:!1},e.handleEnter=function(t,n){var r=e.props,i=r.appearOptions,o=r.enterOptions;e.handleStyleActive(n?i:o)},e.handleExit=function(){e.handleStyleActive(e.props.leaveOptions)},e}return r=a,i=[{key:"handleStyleActive",value:function(e){if(e){var t=e.onAnimationEnd?function(){e.onAnimationEnd()}:null;this.setState(SS(SS({},e),{},{onAnimationEnd:t,isActive:!0}))}}},{key:"parseTimeout",value:function(){var e=this.props,t=e.appearOptions,n=e.enterOptions,r=e.leaveOptions;return OS(t)+OS(n)+OS(r)}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=(t.appearOptions,t.enterOptions,t.leaveOptions,function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(t,["children","appearOptions","enterOptions","leaveOptions"]));return Wn.createElement(AS.Transition,CS({},r,{onEnter:this.handleEnter,onExit:this.handleExit,timeout:this.parseTimeout()}),(function(){return Wn.createElement(xS,e.state,Wn.Children.only(n))}))}}],i&&kS(r.prototype,i),a}(Wn.Component);DS.propTypes={appearOptions:nd().object,enterOptions:nd().object,leaveOptions:nd().object,children:nd().element};const zS=DS;function LS(e){var t=e.component,n=e.children,r=e.appear,i=e.enter,o=e.leave;return Wn.createElement(AS.TransitionGroup,{component:t},Wn.Children.map(n,(function(e,t){return Wn.createElement(zS,{appearOptions:r,enterOptions:i,leaveOptions:o,key:"child-".concat(t)},e)})))}LS.propTypes={appear:nd().object,enter:nd().object,leave:nd().object,children:nd().oneOfType([nd().array,nd().element]),component:nd().any},LS.defaultProps={component:"span"};const RS=xS;var FS=a(7654),US=a.n(FS),NS=a(81763),jS=a.n(NS),VS=a(47037),GS=a.n(VS),qS=function(e){return 0===e?0:e>0?1:-1},WS=function(e){return GS()(e)&&e.indexOf("%")===e.length-1},HS=function(e){return jS()(e)&&!US()(e)},$S=function(e){return HS(e)||GS()(e)},XS=0,ZS=function(e){var t=++XS;return"".concat(e||"").concat(t)},YS=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!HS(e)&&!GS()(e))return r;if(WS(e)){var o=e.indexOf("%");n=t*parseFloat(e.slice(0,o))/100}else n=+e;return US()(n)&&(n=r),i&&n>t&&(n=t),n},KS=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},JS=function(e,t){return HS(e)&&HS(t)?function(n){return e+n*(t-e)}:function(){return t}};function QS(e,t,n){return e&&e.length?e.find((function(e){return e&&("function"==typeof t?t(e):rE()(e,t))===n})):null}function eT(e){return eT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eT(e)}function tT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nT(Object(n),!0).forEach((function(t){iT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function iT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sT(e,t){return sT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},sT(e,t)}function lT(e,t){return!t||"object"!==eT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cT(e){return cT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},cT(e)}function uT(e){return hE()(e)&&$S(e[0])&&$S(e[1])?e.join(" ~ "):e}var hT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sT(e,t)}(a,e);var t,n,r,i,o=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=cT(t);if(n){var i=cT(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return lT(this,e)});function a(){return oT(this,a),o.apply(this,arguments)}return r=a,i=[{key:"renderContent",value:function(){var e=this.props,t=e.payload,n=e.separator,r=e.formatter,i=e.itemStyle,o=e.itemSorter;if(t&&t.length){var a=(o?tE()(t,o):t).map((function(e,o){if("none"===e.type)return null;var a=rT({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},i),s=e.formatter||r||uT,l=e.name,c=e.value;if(s){var u=s(c,l,e,o,t);if(Array.isArray(u)){var h=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return tT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tT(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(u,2);c=h[0],l=h[1]}else c=u}return Wn.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(o),style:a},$S(l)?Wn.createElement("span",{className:"recharts-tooltip-item-name"},l):null,$S(l)?Wn.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,Wn.createElement("span",{className:"recharts-tooltip-item-value"},c),Wn.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))}));return Wn.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},a)}return null}},{key:"render",value:function(){var e=this.props,t=e.wrapperClassName,n=e.contentStyle,r=e.labelClassName,i=e.labelStyle,o=e.label,a=e.labelFormatter,s=e.payload,l=rT({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),c=rT({margin:0},i),u=!sE()(o),h=u?o:"",f=vg()("recharts-default-tooltip",t),p=vg()("recharts-tooltip-label",r);return u&&a&&(h=a(o,s)),Wn.createElement("div",{className:f,style:l},Wn.createElement("p",{className:p,style:c},Wn.isValidElement(h)?h:"".concat(h)),this.renderContent())}}],i&&aT(r.prototype,i),a}(Wn.PureComponent);hT.displayName="DefaultTooltipContent",hT.defaultProps={separator:" : ",contentStyle:{},itemStyle:{},labelStyle:{}};var fT={isSsr:!("undefined"!=typeof window&&window.document&&window.document.createElement&&window.setTimeout),get:function(e){return fT[e]},set:function(e,t){if("string"==typeof e)fT[e]=t;else{var n=Object.keys(e);n&&n.length&&n.forEach((function(t){fT[t]=e[t]}))}}};function pT(e){return pT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pT(e)}function dT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dT(Object(n),!0).forEach((function(t){gT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bT(e,t){return bT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},bT(e,t)}function _T(e,t){return!t||"object"!==pT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xT(e){return xT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},xT(e)}var AT="recharts-tooltip-wrapper";function wT(e){return e.dataKey}var CT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bT(e,t)}(a,e);var t,n,r,i,o=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=xT(t);if(n){var i=xT(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return _T(this,e)});function a(){var e;yT(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).state={boxWidth:-1,boxHeight:-1},e.wrapperNode=void 0,e.getTranslate=function(t){var n=t.key,r=t.tooltipDimension,i=t.viewBoxDimension,o=e.props,a=o.allowEscapeViewBox,s=o.coordinate,l=o.offset,c=o.position,u=o.viewBox;if(c&&HS(c[n]))return c[n];var h=s[n]-r-l,f=s[n]+l;return a[n]?f:s[n]+r+l>u[n]+i?Math.max(h,u[n]):Math.max(f,u[n])},e}return r=a,i=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"updateBBox",value:function(){var e=this.state,t=e.boxWidth,n=e.boxHeight;if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-t)>1||Math.abs(r.height-n)>1)&&this.setState({boxWidth:r.width,boxHeight:r.height})}else-1===t&&-1===n||this.setState({boxWidth:-1,boxHeight:-1})}},{key:"render",value:function(){var e,t,n,r=this,i=this.props,o=i.payload,a=i.isAnimationActive,s=i.animationDuration,l=i.animationEasing,c=i.filterNull,u=function(e,t){return!0===e?SE()(t,wT):KC()(e)?SE()(t,e):t}(i.payloadUniqBy,c&&o&&o.length?o.filter((function(e){return!sE()(e.value)})):o),h=u&&u.length,f=this.props,p=f.content,d=f.viewBox,m=f.coordinate,g=f.position,y=f.active,v=mT({pointerEvents:"none",visibility:y&&h?"visible":"hidden",position:"absolute",top:0,left:0},f.wrapperStyle);if(g&&HS(g.x)&&HS(g.y))t=g.x,n=g.y;else{var b=this.state,_=b.boxWidth,x=b.boxHeight;_>0&&x>0&&m?(t=this.getTranslate({key:"x",tooltipDimension:_,viewBoxDimension:d.width}),n=this.getTranslate({key:"y",tooltipDimension:x,viewBoxDimension:d.height})):v.visibility="hidden"}v=mT(mT({},VE({transform:this.props.useTranslate3d?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")})),v),a&&y&&(v=mT(mT({},VE({transition:"transform ".concat(s,"ms ").concat(l)})),v));var A=vg()(AT,(gT(e={},"".concat(AT,"-right"),HS(t)&&m&&HS(m.x)&&t>=m.x),gT(e,"".concat(AT,"-left"),HS(t)&&m&&HS(m.x)&&t<m.x),gT(e,"".concat(AT,"-bottom"),HS(n)&&m&&HS(m.y)&&n>=m.y),gT(e,"".concat(AT,"-top"),HS(n)&&m&&HS(m.y)&&n<m.y),e));return Wn.createElement("div",{className:A,style:v,ref:function(e){r.wrapperNode=e}},function(e,t){return Wn.isValidElement(e)?Wn.cloneElement(e,t):KC()(e)?Wn.createElement(e,t):Wn.createElement(hT,t)}(p,mT(mT({},this.props),{},{payload:u})))}}],i&&vT(r.prototype,i),a}(Wn.PureComponent);CT.displayName="Tooltip",CT.defaultProps={active:!1,allowEscapeViewBox:{x:!1,y:!1},offset:10,viewBox:{x1:0,x2:0,y1:0,y2:0},coordinate:{x:0,y:0},cursorStyle:{},separator:" : ",wrapperStyle:{},contentStyle:{},itemStyle:{},labelStyle:{},cursor:!0,trigger:"hover",isAnimationActive:!fT.isSsr,animationEasing:"ease",animationDuration:400,filterNull:!0,useTranslate3d:!1};var ET=a(11700),ST=a.n(ET),TT=(Math.abs,Math.atan2,Math.cos,Math.max,Math.min,Math.sin,Math.sqrt,Math.PI),BT=2*TT;const kT={draw:function(e,t){var n=Math.sqrt(t/TT);e.moveTo(n,0),e.arc(0,0,n,0,BT)}},MT={draw:function(e,t){var n=Math.sqrt(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}};var PT=Math.sqrt(1/3),IT=2*PT;const OT={draw:function(e,t){var n=Math.sqrt(t/IT),r=n*PT;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},DT={draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}};var zT=Math.sin(TT/10)/Math.sin(7*TT/10),LT=Math.sin(BT/10)*zT,RT=-Math.cos(BT/10)*zT;const FT={draw:function(e,t){var n=Math.sqrt(.8908130915292852*t),r=LT*n,i=RT*n;e.moveTo(0,-n),e.lineTo(r,i);for(var o=1;o<5;++o){var a=BT*o/5,s=Math.cos(a),l=Math.sin(a);e.lineTo(l*n,-s*n),e.lineTo(s*r-l*i,l*r+s*i)}e.closePath()}};var UT=Math.sqrt(3);const NT={draw:function(e,t){var n=-Math.sqrt(t/(3*UT));e.moveTo(0,2*n),e.lineTo(-UT*n,-n),e.lineTo(UT*n,-n),e.closePath()}};var jT=-.5,VT=Math.sqrt(3)/2,GT=1/Math.sqrt(12),qT=3*(GT/2+1);const WT={draw:function(e,t){var n=Math.sqrt(t/qT),r=n/2,i=n*GT,o=r,a=n*GT+n,s=-o,l=a;e.moveTo(r,i),e.lineTo(o,a),e.lineTo(s,l),e.lineTo(jT*r-VT*i,VT*r+jT*i),e.lineTo(jT*o-VT*a,VT*o+jT*a),e.lineTo(jT*s-VT*l,VT*s+jT*l),e.lineTo(jT*r+VT*i,jT*i-VT*r),e.lineTo(jT*o+VT*a,jT*a-VT*o),e.lineTo(jT*s+VT*l,jT*l-VT*s),e.closePath()}};function HT(e){return HT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HT(e)}function $T(){return $T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$T.apply(this,arguments)}function XT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function YT(e,t){return YT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},YT(e,t)}function KT(e,t){return!t||"object"!==HT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function JT(e){return JT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},JT(e)}var QT={symbolCircle:kT,symbolCross:MT,symbolDiamond:OT,symbolSquare:DT,symbolStar:FT,symbolTriangle:NT,symbolWye:WT},eB=Math.PI/180,tB=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&YT(e,t)}(a,e);var t,n,r,i,o=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=JT(t);if(n){var i=JT(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return KT(this,e)});function a(){return XT(this,a),o.apply(this,arguments)}return r=a,i=[{key:"getPath",value:function(){var e=this.props,t=e.size,n=e.sizeType,r=e.type,i=function(e){var t="symbol".concat(ST()(e));return QT[t]||kT}(r),o=function(e,t){var n=null;function r(){var r;if(n||(n=r=cf()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),r)return n=null,r+""||null}return e="function"==typeof e?e:hf(e||kT),t="function"==typeof t?t:hf(void 0===t?64:+t),r.type=function(t){return arguments.length?(e="function"==typeof t?t:hf(t),r):e},r.size=function(e){return arguments.length?(t="function"==typeof e?e:hf(+e),r):t},r.context=function(e){return arguments.length?(n=null==e?null:e,r):n},r}().type(i).size(function(e,t,n){if("area"===t)return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var r=18*eB;return 1.25*e*e*(Math.tan(r)-Math.tan(2*r)*Math.pow(Math.tan(r),2));case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}}(t,n,r));return o()}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.cx,r=e.cy,i=e.size;return n===+n&&r===+r&&i===+i?Wn.createElement("path",$T({},vE(this.props,!0),{className:vg()("recharts-symbols",t),transform:"translate(".concat(n,", ").concat(r,")"),d:this.getPath()})):null}}],i&&ZT(r.prototype,i),a}(Wn.PureComponent);function nB(e){return nB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nB(e)}function rB(){return rB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rB.apply(this,arguments)}function iB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lB(e,t){return lB=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},lB(e,t)}function cB(e,t){return!t||"object"!==nB(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function uB(e){return uB=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},uB(e)}tB.defaultProps={type:"circle",size:64,sizeType:"area"},tB.registerSymbol=function(e,t){QT["symbol".concat(ST()(e))]=t};var hB=32,fB=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lB(e,t)}(a,e);var t,n,r,i,o=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=uB(t);if(n){var i=uB(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return cB(this,e)});function a(){return aB(this,a),o.apply(this,arguments)}return r=a,i=[{key:"renderIcon",value:function(e){var t=this.props.inactiveColor,n=16,r=hB/6,i=hB/3,o=e.inactive?t:e.color;if("plainline"===e.type)return Wn.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:n,x2:hB,y2:n,className:"recharts-legend-icon"});if("line"===e.type)return Wn.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(n,"h").concat(i,"\n            A").concat(r,",").concat(r,",0,1,1,").concat(2*i,",").concat(n,"\n            H").concat(hB,"M").concat(2*i,",").concat(n,"\n            A").concat(r,",").concat(r,",0,1,1,").concat(i,",").concat(n),className:"recharts-legend-icon"});if("rect"===e.type)return Wn.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(4,"h").concat(hB,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(Wn.isValidElement(e.legendIcon)){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iB(Object(n),!0).forEach((function(t){oB(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return delete a.legendIcon,Wn.cloneElement(e.legendIcon,a)}return Wn.createElement(tB,{fill:o,cx:n,cy:n,size:hB,sizeType:"diameter",type:e.type})}},{key:"renderItems",value:function(){var e=this,t=this.props,n=t.payload,r=t.iconSize,i=t.layout,o=t.formatter,a=t.inactiveColor,s={x:0,y:0,width:hB,height:hB},l={display:"horizontal"===i?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return n.map((function(t,n){var i,u=t.formatter||o,h=vg()((oB(i={"recharts-legend-item":!0},"legend-item-".concat(n),!0),oB(i,"inactive",t.inactive),i));if("none"===t.type)return null;var f=t.inactive?a:t.color;return Wn.createElement("li",rB({className:h,style:l,key:"legend-item-".concat(n)},_E(e.props,t,n)),Wn.createElement(AE,{width:r,height:r,viewBox:s,style:c},e.renderIcon(t)),Wn.createElement("span",{className:"recharts-legend-item-text",style:{color:f}},u?u(t.value,t,n):t.value))}))}},{key:"render",value:function(){var e=this.props,t=e.payload,n=e.layout,r=e.align;if(!t||!t.length)return null;var i={padding:0,margin:0,textAlign:"horizontal"===n?r:"left"};return Wn.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}],i&&sB(r.prototype,i),a}(Wn.PureComponent);function pB(e){return pB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pB(e)}function dB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dB(Object(n),!0).forEach((function(t){gB(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bB(e,t){return bB=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},bB(e,t)}function _B(e,t){return!t||"object"!==pB(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xB(e){return xB=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},xB(e)}function AB(e){return e.value}function wB(e,t){return!0===e?SE()(t,AB):KC()(e)?SE()(t,e):t}fB.displayName="Legend",fB.defaultProps={iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"};var CB=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bB(e,t)}(s,e);var t,n,r,i,o,a=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=xB(t);if(n){var i=xB(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return _B(this,e)});function s(){var e;yB(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).wrapperNode=void 0,e.state={boxWidth:-1,boxHeight:-1},e}return r=s,o=[{key:"getWithHeight",value:function(e,t){var n=e.props.layout;return"vertical"===n&&HS(e.props.height)?{height:e.props.height}:"horizontal"===n?{width:e.props.width||t}:null}}],(i=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){return this.wrapperNode&&this.wrapperNode.getBoundingClientRect?this.wrapperNode.getBoundingClientRect():null}},{key:"getBBoxSnapshot",value:function(){var e=this.state,t=e.boxWidth,n=e.boxHeight;return t>=0&&n>=0?{width:t,height:n}:null}},{key:"getDefaultPosition",value:function(e){var t,n,r=this.props,i=r.layout,o=r.align,a=r.verticalAlign,s=r.margin,l=r.chartWidth,c=r.chartHeight;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(t="center"===o&&"vertical"===i?{left:((l||0)-(this.getBBoxSnapshot()||{width:0}).width)/2}:"right"===o?{right:s&&s.right||0}:{left:s&&s.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(n="middle"===a?{top:((c||0)-(this.getBBoxSnapshot()||{height:0}).height)/2}:"bottom"===a?{bottom:s&&s.bottom||0}:{top:s&&s.top||0}),mB(mB({},t),n)}},{key:"updateBBox",value:function(){var e=this.state,t=e.boxWidth,n=e.boxHeight,r=this.props.onBBoxUpdate;if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var i=this.wrapperNode.getBoundingClientRect();(Math.abs(i.width-t)>1||Math.abs(i.height-n)>1)&&this.setState({boxWidth:i.width,boxHeight:i.height},(function(){r&&r(i)}))}else-1===t&&-1===n||this.setState({boxWidth:-1,boxHeight:-1},(function(){r&&r(null)}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.content,r=t.width,i=t.height,o=t.wrapperStyle,a=t.payloadUniqBy,s=t.payload,l=mB(mB({position:"absolute",width:r||"auto",height:i||"auto"},this.getDefaultPosition(o)),o);return Wn.createElement("div",{className:"recharts-legend-wrapper",style:l,ref:function(t){e.wrapperNode=t}},function(e,t){if(Wn.isValidElement(e))return Wn.cloneElement(e,t);if(KC()(e))return Wn.createElement(e,t);t.ref;var n=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(t,["ref"]);return Wn.createElement(fB,n)}(n,mB(mB({},this.props),{},{payload:wB(a,s)})))}}])&&vB(r.prototype,i),o&&vB(r,o),s}(Wn.PureComponent);function EB(){}function SB(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function TB(e){this._context=e}function BB(e){this._context=e}function kB(e){this._context=e}function MB(e){this._context=e}function PB(e){return e<0?-1:1}function IB(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(PB(o)+PB(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function OB(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function DB(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,s=(o-r)/3;e._context.bezierCurveTo(r+s,i+s*t,o-s,a-s*n,o,a)}function zB(e){this._context=e}function LB(e){this._context=new RB(e)}function RB(e){this._context=e}function FB(e){this._context=e}function UB(e){var t,n,r=e.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/o[t-1],o[t]-=n,a[t]-=n*a[t-1];for(i[r-1]=a[r-1]/o[r-1],t=r-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function NB(e,t){this._context=e,this._t=t}function jB(e){return jB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jB(e)}function VB(){return VB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},VB.apply(this,arguments)}function GB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GB(Object(n),!0).forEach((function(t){WB(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function WB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function XB(e,t){return XB=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},XB(e,t)}function ZB(e,t){return!t||"object"!==jB(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function YB(e){return YB=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},YB(e)}CB.displayName="Legend",CB.defaultProps={iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"},TB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:SB(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:SB(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},BB.prototype={areaStart:EB,areaEnd:EB,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:SB(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},kB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:SB(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},MB.prototype={areaStart:EB,areaEnd:EB,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},zB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:DB(this,this._t0,OB(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,DB(this,OB(this,n=IB(this,e,t)),n);break;default:DB(this,this._t0,n=IB(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(LB.prototype=Object.create(zB.prototype)).point=function(e,t){zB.prototype.point.call(this,t,e)},RB.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}},FB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=UB(e),i=UB(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[a],t[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},NB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var KB={curveBasisClosed:function(e){return new BB(e)},curveBasisOpen:function(e){return new kB(e)},curveBasis:function(e){return new TB(e)},curveLinearClosed:function(e){return new MB(e)},curveLinear:pf,curveMonotoneX:function(e){return new zB(e)},curveMonotoneY:function(e){return new LB(e)},curveNatural:function(e){return new FB(e)},curveStep:function(e){return new NB(e,.5)},curveStepAfter:function(e){return new NB(e,1)},curveStepBefore:function(e){return new NB(e,0)}},JB=function(e){return e.x===+e.x&&e.y===+e.y},QB=function(e){return e.x},ek=function(e){return e.y},tk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&XB(e,t)}(a,e);var t,n,r,i,o=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=YB(t);if(n){var i=YB(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return ZB(this,e)});function a(){return HB(this,a),o.apply(this,arguments)}return r=a,i=[{key:"getPath",value:function(){var e,t=this.props,n=t.type,r=t.points,i=t.baseLine,o=t.layout,a=t.connectNulls,s=function(e,t){if(KC()(e))return e;var n="curve".concat(ST()(e));return"curveMonotone"===n&&t?KB["".concat(n).concat("vertical"===t?"Y":"X")]:KB[n]||pf}(n,o),l=a?r.filter((function(e){return JB(e)})):r;if(hE()(i)){var c=a?i.filter((function(e){return JB(e)})):i,u=l.map((function(e,t){return qB(qB({},e),{},{base:c[t]})}));return(e="vertical"===o?yf().y(ek).x1(QB).x0((function(e){return e.base.x})):yf().x(QB).y1(ek).y0((function(e){return e.base.y}))).defined(JB).curve(s),e(u)}return(e="vertical"===o&&HS(i)?yf().y(ek).x1(QB).x0(i):HS(i)?yf().x(QB).y1(ek).y0(i):gf().x(QB).y(ek)).defined(JB).curve(s),e(l)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.points,r=e.path,i=e.pathRef;if(!(n&&n.length||r))return null;var o=n&&n.length?this.getPath():r;return Wn.createElement("path",VB({},vE(this.props),bE(this.props),{className:vg()("recharts-curve",t),d:o,ref:i}))}}],i&&$B(r.prototype,i),a}(Wn.PureComponent);function nk(e){return nk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nk(e)}function rk(){return rk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rk.apply(this,arguments)}function ik(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ok(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ak(e,t){return ak=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ak(e,t)}function sk(e,t){return!t||"object"!==nk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lk(e){return lk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},lk(e)}tk.defaultProps={type:"linear",points:[],connectNulls:!1};var ck=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ak(e,t)}(s,e);var t,n,r,i,o,a=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=lk(t);if(n){var i=lk(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return sk(this,e)});function s(){return ik(this,s),a.apply(this,arguments)}return r=s,o=[{key:"getPath",value:function(e,t,n,r,i,o){return"M".concat(e,",").concat(i,"v").concat(r,"M").concat(o,",").concat(t,"h").concat(n)}}],(i=[{key:"render",value:function(){var e=this.props,t=e.x,n=e.y,r=e.width,i=e.height,o=e.top,a=e.left,l=e.className;return HS(t)&&HS(n)&&HS(r)&&HS(i)&&HS(o)&&HS(a)?Wn.createElement("path",rk({},vE(this.props,!0),{className:vg()("recharts-cross",l),d:s.getPath(t,n,r,i,o,a)})):null}}])&&ok(r.prototype,i),o&&ok(r,o),s}(Wn.PureComponent);ck.defaultProps={x:0,y:0,top:0,left:0,width:0,height:0};var uk=a(6162),hk=a.n(uk),fk=a(53632),pk=a.n(fk),dk=a(94654),mk=a.n(dk),gk=a(29887),yk=a.n(gk);function vk(e){return function(e){if(Array.isArray(e))return bk(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return bk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bk(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _k=function(e){return e},xk={"@@functional/placeholder":!0},Ak=function(e){return e===xk},wk=function(e){return function t(){return 0===arguments.length||1===arguments.length&&Ak(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},Ck=function e(t,n){return 1===t?n:wk((function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=i.filter((function(e){return e!==xk})).length;return a>=t?n.apply(void 0,i):e(t-a,wk((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var o=i.map((function(e){return Ak(e)?t.shift():e}));return n.apply(void 0,vk(o).concat(t))})))}))},Ek=function(e){return Ck(e.length,e)},Sk=function(e,t){for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},Tk=Ek((function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map((function(e){return t[e]})).map(e)})),Bk=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return _k;var r=t.reverse(),i=r[0],o=r.slice(1);return function(){return o.reduce((function(e,t){return t(e)}),i.apply(void 0,arguments))}},kk=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},Mk=function(e){var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t&&i.every((function(e,n){return e===t[n]}))?n:(t=i,n=e.apply(void 0,i))}};Ek((function(e,t,n){var r=+e;return r+n*(+t-r)})),Ek((function(e,t,n){var r=t-+e;return(n-e)/(r||1/0)})),Ek((function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))}));const Pk=function(e,t,n){for(var r=new(yk())(e),i=0,o=[];r.lt(t)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o},Ik=function(e){return 0===e?1:Math.floor(new(yk())(e).abs().log(10).toNumber())+1};function Ok(e){return function(e){if(Array.isArray(e))return Lk(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||zk(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||zk(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zk(e,t){if(e){if("string"==typeof e)return Lk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lk(e,t):void 0}}function Lk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Rk(e){var t=Dk(e,2),n=t[0],r=t[1],i=n,o=r;return n>r&&(i=r,o=n),[i,o]}function Fk(e,t,n){if(e.lte(0))return new(yk())(0);var r=Ik(e.toNumber()),i=new(yk())(10).pow(r),o=e.div(i),a=1!==r?.05:.1,s=new(yk())(Math.ceil(o.div(a).toNumber())).add(n).mul(a).mul(i);return t?s:new(yk())(Math.ceil(s))}function Uk(e,t,n){var r=1,i=new(yk())(e);if(!i.isint()&&n){var o=Math.abs(e);o<1?(r=new(yk())(10).pow(Ik(e)-1),i=new(yk())(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new(yk())(Math.floor(e)))}else 0===e?i=new(yk())(Math.floor((t-1)/2)):n||(i=new(yk())(Math.floor(e)));var a=Math.floor((t-1)/2);return Bk(Tk((function(e){return i.add(new(yk())(e-a).mul(r)).toNumber()})),Sk)(0,t)}function Nk(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new(yk())(0),tickMin:new(yk())(0),tickMax:new(yk())(0)};var o,a=Fk(new(yk())(t).sub(e).div(n-1),r,i);o=e<=0&&t>=0?new(yk())(0):(o=new(yk())(e).add(t).div(2)).sub(new(yk())(o).mod(a));var s=Math.ceil(o.sub(e).div(a).toNumber()),l=Math.ceil(new(yk())(t).sub(o).div(a).toNumber()),c=s+l+1;return c>n?Nk(e,t,n,r,i+1):(c<n&&(l=t>0?l+(n-c):l,s=t>0?s:s+(n-c)),{step:a,tickMin:o.sub(new(yk())(s).mul(a)),tickMax:o.add(new(yk())(l).mul(a))})}var jk=Mk((function(e){var t=Dk(e,2),n=t[0],r=t[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Math.max(i,2),s=Rk([n,r]),l=Dk(s,2),c=l[0],u=l[1];if(c===-1/0||u===1/0){var h=u===1/0?[c].concat(Ok(Sk(0,i-1).map((function(){return 1/0})))):[].concat(Ok(Sk(0,i-1).map((function(){return-1/0}))),[u]);return n>r?kk(h):h}if(c===u)return Uk(c,i,o);var f=Nk(c,u,a,o),p=f.step,d=f.tickMin,m=f.tickMax,g=Pk(d,m.add(new(yk())(.1).mul(p)),p);return n>r?kk(g):g})),Vk=(Mk((function(e){var t=Dk(e,2),n=t[0],r=t[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Math.max(i,2),s=Rk([n,r]),l=Dk(s,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[n,r];if(c===u)return Uk(c,i,o);var h=Fk(new(yk())(u).sub(c).div(a-1),o,0),f=Bk(Tk((function(e){return new(yk())(c).add(new(yk())(e).mul(h)).toNumber()})),Sk),p=f(0,a).filter((function(e){return e>=c&&e<=u}));return n>r?kk(p):p})),Mk((function(e,t){var n=Dk(e,2),r=n[0],i=n[1],o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Rk([r,i]),s=Dk(a,2),l=s[0],c=s[1];if(l===-1/0||c===1/0)return[r,i];if(l===c)return[l];var u=Math.max(t,2),h=Fk(new(yk())(c).sub(l).div(u-1),o,0),f=[].concat(Ok(Pk(new(yk())(l),new(yk())(c).sub(new(yk())(.99).mul(h)),h)),[c]);return r>i?kk(f):f})));function Gk(e,t){if((i=e.length)>1)for(var n,r,i,o=1,a=e[t[0]],s=a.length;o<i;++o)for(r=a,a=e[t[o]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function qk(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Wk(e,t){return e[t]}function Hk(e){const t=[];return t.key=e,t}function $k(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function Xk(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Zk={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},Yk=function(e){return"string"==typeof e?e:e?e.displayName||e.name||"Component":""},Kk=null,Jk=null,Qk=function e(t){if(t===Kk&&hE()(Jk))return Jk;var n=[];return Wn.Children.forEach(t,(function(t){sE()(t)||((0,Kg.isFragment)(t)?n=n.concat(e(t.props.children)):n.push(t))})),Jk=n,Kk=t,n},eM=function(e,t){var n=[],r=[];return r=hE()(t)?t.map((function(e){return Yk(e)})):[Yk(t)],Qk(e).forEach((function(e){var t=rE()(e,"type.displayName")||rE()(e,"type.name");-1!==r.indexOf(t)&&n.push(e)})),n},tM=function(e,t){var n=eM(e,t);return n&&n[0]},nM=function(e){if(!e||!e.props)return!1;var t=e.props,n=t.width,r=t.height;return!(!HS(n)||n<=0||!HS(r)||r<=0)},rM=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],iM=function e(t,n){if(t===n)return!0;var r=Wn.Children.count(t);if(r!==Wn.Children.count(n))return!1;if(0===r)return!0;if(1===r)return oM(hE()(t)?t[0]:t,hE()(n)?n[0]:n);for(var i=0;i<r;i++){var o=t[i],a=n[i];if(hE()(o)||hE()(a)){if(!e(o,a))return!1}else if(!oM(o,a))return!1}return!0},oM=function(e,t){if(sE()(e)&&sE()(t))return!0;if(!sE()(e)&&!sE()(t)){var n=e.props||{},r=n.children,i=Xk(n,["children"]),o=t.props||{},a=o.children,s=Xk(o,["children"]);return r&&a?$k(i,s)&&iM(r,a):!r&&!a&&$k(i,s)}return!1},aM=function(e,t){var n=[],r={};return Qk(e).forEach((function(e,i){if(function(e){return e&&e.type&&GS()(e.type)&&rM.indexOf(e.type)>=0}(e))n.push(e);else if(e){var o=Yk(e.type),a=t[o]||{},s=a.handler,l=a.once;if(s&&(!l||!r[o])){var c=s(e,o,i);n.push(c),r[o]=!0}}})),n},sM=function(e,t){return Qk(t).indexOf(e)};function lM(e){return function(e){if(Array.isArray(e))return cM(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return cM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cM(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cM(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function uM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uM(Object(n),!0).forEach((function(t){fM(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uM(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pM(e,t,n){return sE()(e)||sE()(t)?n:$S(t)?rE()(e,t,n):KC()(t)?t(e):n}function dM(e,t,n,r){var i=mk()(e,(function(e){return pM(e,t)}));if("number"===n){var o=i.filter((function(e){return HS(e)||parseFloat(e)}));return o.length?[pk()(o),hk()(o)]:[1/0,-1/0]}return(r?i.filter((function(e){return!sE()(e)})):i).map((function(e){return $S(e)||e instanceof Date?e:""}))}var mM=function(e){var t,n=e.type.displayName,r=e.props,i=r.stroke,o=r.fill;switch(n){case"Line":t=i;break;case"Area":case"Radar":t=i&&"none"!==i?i:o;break;default:t=o}return t},gM=function(e){var t,n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,o=e.legendContent,a=tM(n,CB.displayName);return a?(t=a.props&&a.props.payload?a.props&&a.props.payload:"children"===o?(r||[]).reduce((function(e,t){var n=t.item,r=t.props,i=r.sectors||r.data||[];return e.concat(i.map((function(e){return{type:a.props.iconType||n.props.legendType,value:e.name,color:e.fill,payload:e}})))}),[]):(r||[]).map((function(e){var t=e.item,n=t.props,r=n.dataKey,i=n.name,o=n.legendType;return{inactive:n.hide,dataKey:r,type:a.props.iconType||o||"square",color:mM(t),value:i||r,payload:t.props}})),hM(hM(hM({},a.props),CB.getWithHeight(a,i)),{},{payload:t,item:a})):null},yM=function(e,t,n,r){var i=t.props.children,o=eM(i,"ErrorBar").filter((function(e){var t=e.props.direction;return!(!sE()(t)&&!sE()(r))||r.indexOf(t)>=0}));if(o&&o.length){var a=o.map((function(e){return e.props.dataKey}));return e.reduce((function(e,t){var r=pM(t,n,0),i=hE()(r)?[pk()(r),hk()(r)]:[r,r],o=a.reduce((function(e,n){var r=pM(t,n,0),o=i[0]-Math.abs(hE()(r)?r[0]:r),a=i[1]+Math.abs(hE()(r)?r[1]:r);return[Math.min(o,e[0]),Math.max(a,e[1])]}),[1/0,-1/0]);return[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}),[1/0,-1/0])}return null},vM=function(e,t,n,r){var i=t.map((function(t){var i=t.props.dataKey;return"number"===n&&i&&yM(e,t,i)||dM(e,i,n,r)}));if("number"===n)return i.reduce((function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}),[1/0,-1/0]);var o={};return i.reduce((function(e,t){for(var n=0,r=t.length;n<r;n++)o[t[n]]||(o[t[n]]=!0,e.push(t[n]));return e}),[])},bM=function(e,t){return"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t},_M=function(e,t,n){var r,i,o=e.map((function(e){return e.coordinate===t&&(r=!0),e.coordinate===n&&(i=!0),e.coordinate}));return r||o.push(t),i||o.push(n),o},xM=function(e,t,n){if(!e)return null;var r=e.scale,i=e.duplicateDomain,o=e.type,a=e.range,s=(t||n)&&"category"===o&&r.bandwidth?r.bandwidth()/2:0;return s="angleAxis"===e.axisType?2*qS(a[0]-a[1])*s:s,t&&(e.ticks||e.niceTicks)?(e.ticks||e.niceTicks).map((function(e){var t=i?i.indexOf(e):e;return{coordinate:r(t)+s,value:e,offset:s}})):e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map((function(e,t){return{coordinate:r(e)+s,value:e,index:t,offset:s}})):r.ticks&&!n?r.ticks(e.tickCount).map((function(e){return{coordinate:r(e)+s,value:e,offset:s}})):r.domain().map((function(e,t){return{coordinate:r(e)+s,value:i?i[e]:e,index:t,offset:s}}))},AM=function(e,t,n){var r;return KC()(n)?r=n:KC()(t)&&(r=t),KC()(e)||r?function(t,n,i,o){KC()(e)&&e(t,n,i,o),KC()(r)&&r(t,n,i,o)}:null},wM=1e-4,CM={sign:function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,o=0,a=0;a<t;++a){var s=US()(e[a][n][1])?e[a][n][0]:e[a][n][1];s>=0?(e[a][n][0]=i,e[a][n][1]=i+s,i=e[a][n][1]):(e[a][n][0]=o,e[a][n][1]=o+s,o=e[a][n][1])}},expand:function(e,t){if((r=e.length)>0){for(var n,r,i,o=0,a=e[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=e[n][o][1]||0;if(i)for(n=0;n<r;++n)e[n][o][1]/=i}Gk(e,t)}},none:Gk,silhouette:function(e,t){if((n=e.length)>0){for(var n,r=0,i=e[t[0]],o=i.length;r<o;++r){for(var a=0,s=0;a<n;++a)s+=e[a][r][1]||0;i[r][1]+=i[r][0]=-s/2}Gk(e,t)}},wiggle:function(e,t){if((i=e.length)>0&&(r=(n=e[t[0]]).length)>0){for(var n,r,i,o=0,a=1;a<r;++a){for(var s=0,l=0,c=0;s<i;++s){for(var u=e[t[s]],h=u[a][1]||0,f=(h-(u[a-1][1]||0))/2,p=0;p<s;++p){var d=e[t[p]];f+=(d[a][1]||0)-(d[a-1][1]||0)}l+=h,c+=f*h}n[a-1][1]+=n[a-1][0]=o,l&&(o-=c/l)}n[a-1][1]+=n[a-1][0]=o,Gk(e,t)}},positive:function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,o=0;o<t;++o){var a=US()(e[o][n][1])?e[o][n][0]:e[o][n][1];a>=0?(e[o][n][0]=i,e[o][n][1]=i+a,i=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}}},EM=function(e,t,n){var r=t.map((function(e){return e.props.dataKey})),i=function(){var e=hf([]),t=qk,n=Gk,r=Wk;function i(i){var o,a,s=Array.from(e.apply(this,arguments),Hk),l=s.length,c=-1;for(const e of i)for(o=0,++c;o<l;++o)(s[o][c]=[0,+r(e,s[o].key,c,i)]).data=e;for(o=0,a=uf(t(s));o<l;++o)s[a[o]].index=o;return n(s,a),s}return i.keys=function(t){return arguments.length?(e="function"==typeof t?t:hf(Array.from(t)),i):e},i.value=function(e){return arguments.length?(r="function"==typeof e?e:hf(+e),i):r},i.order=function(e){return arguments.length?(t=null==e?qk:"function"==typeof e?e:hf(Array.from(e)),i):t},i.offset=function(e){return arguments.length?(n=null==e?Gk:e,i):n},i}().keys(r).value((function(e,t){return+pM(e,t,0)})).order(qk).offset(CM[n]);return i(e)},SM=function(e,t,n){return Object.keys(e).reduce((function(r,i){var o=e[i].stackedData.reduce((function(e,r){var i=r.slice(t,n+1).reduce((function(e,t){return[pk()(t.concat([e[0]]).filter(HS)),hk()(t.concat([e[1]]).filter(HS))]}),[1/0,-1/0]);return[Math.min(e[0],i[0]),Math.max(e[1],i[1])]}),[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]}),[1/0,-1/0]).map((function(e){return e===1/0||e===-1/0?0:e}))},TM=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,BM=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,kM=function(e,t,n){if(KC()(e))return e(t,n);if(!hE()(e))return t;var r=[];if(HS(e[0]))r[0]=n?e[0]:Math.min(e[0],t[0]);else if(TM.test(e[0])){var i=+TM.exec(e[0])[1];r[0]=t[0]-i}else KC()(e[0])?r[0]=e[0](t[0]):r[0]=t[0];if(HS(e[1]))r[1]=n?e[1]:Math.max(e[1],t[1]);else if(BM.test(e[1])){var o=+BM.exec(e[1])[1];r[1]=t[1]+o}else KC()(e[1])?r[1]=e[1](t[1]):r[1]=t[1];return r},MM=function(e,t,n){if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=tE()(t,(function(e){return e.coordinate})),o=1/0,a=1,s=i.length;a<s;a++){var l=i[a],c=i[a-1];o=Math.min((l.coordinate||0)-(c.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},PM=function(e,t,n){return e&&e.length?$v()(e,rE()(n,"type.defaultProps.domain"))?t:e:t},IM=function(e,t){var n=e.props,r=n.dataKey,i=n.name,o=n.unit,a=n.formatter,s=n.tooltipType,l=n.chartType;return hM(hM({},vE(e)),{},{dataKey:r,unit:o,formatter:a,name:i||r,color:mM(e),value:pM(t,r),type:s,payload:t,chartType:l})};function OM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function DM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?OM(Object(n),!0).forEach((function(t){zM(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OM(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LM(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var RM=Math.PI/180,FM=function(e){return 180*e/Math.PI},UM=function(e,t,n,r){return{x:e+Math.cos(-RM*r)*n,y:t+Math.sin(-RM*r)*n}},NM=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(t-(n.top||0)-(n.bottom||0)))/2},jM=function(e,t){var n=t.startAngle,r=t.endAngle,i=Math.floor(n/360),o=Math.floor(r/360);return e+360*Math.min(i,o)},VM=function(e,t){var n=function(e,t){var n=e.x,r=e.y,i=t.cx,o=t.cy,a=function(e,t){var n=e.x,r=e.y,i=t.x,o=t.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(r-o,2))}({x:n,y:r},{x:i,y:o});if(a<=0)return{radius:a};var s=(n-i)/a,l=Math.acos(s);return r>o&&(l=2*Math.PI-l),{radius:a,angle:FM(l),angleInRadian:l}}({x:e.x,y:e.y},t),r=n.radius,i=n.angle,o=t.innerRadius,a=t.outerRadius;if(r<o||r>a)return!1;if(0===r)return!0;var s,l=function(e){var t=e.startAngle,n=e.endAngle,r=Math.floor(t/360),i=Math.floor(n/360),o=Math.min(r,i);return{startAngle:t-360*o,endAngle:n-360*o}}(t),c=l.startAngle,u=l.endAngle,h=i;if(c<=u){for(;h>u;)h-=360;for(;h<c;)h+=360;s=h>=c&&h<=u}else{for(;h>c;)h-=360;for(;h<u;)h+=360;s=h>=u&&h<=c}return s?DM(DM({},t),{},{radius:r,angle:jM(h,t)}):null};function GM(e){return GM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},GM(e)}function qM(){return qM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qM.apply(this,arguments)}function WM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $M(e,t){return $M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$M(e,t)}function XM(e,t){return!t||"object"!==GM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ZM(e){return ZM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ZM(e)}var YM=function(e){var t=e.cx,n=e.cy,r=e.radius,i=e.angle,o=e.sign,a=e.isExternal,s=e.cornerRadius,l=e.cornerIsExternal,c=s*(a?1:-1)+r,u=Math.asin(s/c)/RM,h=l?i:i+o*u,f=l?i-o*u:i;return{center:UM(t,n,c,h),circleTangency:UM(t,n,r,h),lineTangency:UM(t,n,c*Math.cos(u*RM),f),theta:u}},KM=function(e){var t=e.cx,n=e.cy,r=e.innerRadius,i=e.outerRadius,o=e.startAngle,a=function(e,t){return qS(t-e)*Math.min(Math.abs(t-e),359.999)}(o,e.endAngle),s=o+a,l=UM(t,n,i,o),c=UM(t,n,i,s),u="M ".concat(l.x,",").concat(l.y,"\n    A ").concat(i,",").concat(i,",0,\n    ").concat(+(Math.abs(a)>180),",").concat(+(o>s),",\n    ").concat(c.x,",").concat(c.y,"\n  ");if(r>0){var h=UM(t,n,r,o),f=UM(t,n,r,s);u+="L ".concat(f.x,",").concat(f.y,"\n            A ").concat(r,",").concat(r,",0,\n            ").concat(+(Math.abs(a)>180),",").concat(+(o<=s),",\n            ").concat(h.x,",").concat(h.y," Z")}else u+="L ".concat(t,",").concat(n," Z");return u},JM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$M(e,t)}(a,e);var t,n,r,i,o=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=ZM(t);if(n){var i=ZM(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return XM(this,e)});function a(){return WM(this,a),o.apply(this,arguments)}return r=a,i=[{key:"render",value:function(){var e=this.props,t=e.cx,n=e.cy,r=e.innerRadius,i=e.outerRadius,o=e.cornerRadius,a=e.forceCornerRadius,s=e.cornerIsExternal,l=e.startAngle,c=e.endAngle,u=e.className;if(i<r||l===c)return null;var h,f=vg()("recharts-sector",u),p=i-r,d=YS(o,p,0,!0);return h=d>0&&Math.abs(l-c)<360?function(e){var t=e.cx,n=e.cy,r=e.innerRadius,i=e.outerRadius,o=e.cornerRadius,a=e.forceCornerRadius,s=e.cornerIsExternal,l=e.startAngle,c=e.endAngle,u=qS(c-l),h=YM({cx:t,cy:n,radius:i,angle:l,sign:u,cornerRadius:o,cornerIsExternal:s}),f=h.circleTangency,p=h.lineTangency,d=h.theta,m=YM({cx:t,cy:n,radius:i,angle:c,sign:-u,cornerRadius:o,cornerIsExternal:s}),g=m.circleTangency,y=m.lineTangency,v=m.theta,b=s?Math.abs(l-c):Math.abs(l-c)-d-v;if(b<0)return a?"M ".concat(p.x,",").concat(p.y,"\n        a").concat(o,",").concat(o,",0,0,1,").concat(2*o,",0\n        a").concat(o,",").concat(o,",0,0,1,").concat(2*-o,",0\n      "):KM({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:l,endAngle:c});var _="M ".concat(p.x,",").concat(p.y,"\n    A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(f.x,",").concat(f.y,"\n    A").concat(i,",").concat(i,",0,").concat(+(b>180),",").concat(+(u<0),",").concat(g.x,",").concat(g.y,"\n    A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(y.x,",").concat(y.y,"\n  ");if(r>0){var x=YM({cx:t,cy:n,radius:r,angle:l,sign:u,isExternal:!0,cornerRadius:o,cornerIsExternal:s}),A=x.circleTangency,w=x.lineTangency,C=x.theta,E=YM({cx:t,cy:n,radius:r,angle:c,sign:-u,isExternal:!0,cornerRadius:o,cornerIsExternal:s}),S=E.circleTangency,T=E.lineTangency,B=E.theta,k=s?Math.abs(l-c):Math.abs(l-c)-C-B;if(k<0&&0===o)return"".concat(_,"L").concat(t,",").concat(n,"Z");_+="L".concat(T.x,",").concat(T.y,"\n      A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(S.x,",").concat(S.y,"\n      A").concat(r,",").concat(r,",0,").concat(+(k>180),",").concat(+(u>0),",").concat(A.x,",").concat(A.y,"\n      A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(w.x,",").concat(w.y,"Z")}else _+="L".concat(t,",").concat(n,"Z");return _}({cx:t,cy:n,innerRadius:r,outerRadius:i,cornerRadius:Math.min(d,p/2),forceCornerRadius:a,cornerIsExternal:s,startAngle:l,endAngle:c}):KM({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:l,endAngle:c}),Wn.createElement("path",qM({},vE(this.props,!0),{className:f,d:h}))}}],i&&HM(r.prototype,i),a}(Wn.PureComponent);function QM(e){return QM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QM(e)}function eP(){return eP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eP.apply(this,arguments)}function tP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rP(e,t){return rP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},rP(e,t)}function iP(e,t){return!t||"object"!==QM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oP(e){return oP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},oP(e)}JM.defaultProps={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1};var aP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rP(e,t)}(a,e);var t,n,r,i,o=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=oP(t);if(n){var i=oP(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return iP(this,e)});function a(){return tP(this,a),o.apply(this,arguments)}return r=a,(i=[{key:"render",value:function(){var e=this.props,t=e.cx,n=e.cy,r=e.r,i=e.className,o=vg()("recharts-dot",i);return t===+t&&n===+n&&r===+r?Wn.createElement("circle",eP({},vE(this.props),bE(this.props),{className:o,cx:t,cy:n,r})):null}}])&&nP(r.prototype,i),a}(Wn.PureComponent);function sP(e){return sP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sP(e)}function lP(){return lP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lP.apply(this,arguments)}function cP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hP(e,t){return hP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},hP(e,t)}function fP(e,t){return!t||"object"!==sP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pP(e){return pP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},pP(e)}var dP=function(e,t,n,r,i){var o,a=Math.min(Math.abs(n)/2,Math.abs(r)/2),s=r>=0?1:-1,l=n>=0?1:-1,c=r>=0&&n>=0||r<0&&n<0?1:0;if(a>0&&i instanceof Array){for(var u=[0,0,0,0],h=0;h<4;h++)u[h]=i[h]>a?a:i[h];o="M".concat(e,",").concat(t+s*u[0]),u[0]>0&&(o+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(c,",").concat(e+l*u[0],",").concat(t)),o+="L ".concat(e+n-l*u[1],",").concat(t),u[1]>0&&(o+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(c,",\n        ").concat(e+n,",").concat(t+s*u[1])),o+="L ".concat(e+n,",").concat(t+r-s*u[2]),u[2]>0&&(o+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(c,",\n        ").concat(e+n-l*u[2],",").concat(t+r)),o+="L ".concat(e+l*u[3],",").concat(t+r),u[3]>0&&(o+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(c,",\n        ").concat(e,",").concat(t+r-s*u[3])),o+="Z"}else if(a>0&&i===+i&&i>0){var f=Math.min(a,i);o="M ".concat(e,",").concat(t+s*f,"\n            A ").concat(f,",").concat(f,",0,0,").concat(c,",").concat(e+l*f,",").concat(t,"\n            L ").concat(e+n-l*f,",").concat(t,"\n            A ").concat(f,",").concat(f,",0,0,").concat(c,",").concat(e+n,",").concat(t+s*f,"\n            L ").concat(e+n,",").concat(t+r-s*f,"\n            A ").concat(f,",").concat(f,",0,0,").concat(c,",").concat(e+n-l*f,",").concat(t+r,"\n            L ").concat(e+l*f,",").concat(t+r,"\n            A ").concat(f,",").concat(f,",0,0,").concat(c,",").concat(e,",").concat(t+r-s*f," Z")}else o="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return o},mP=function(e,t){if(!e||!t)return!1;var n=e.x,r=e.y,i=t.x,o=t.y,a=t.width,s=t.height;if(Math.abs(a)>0&&Math.abs(s)>0){var l=Math.min(i,i+a),c=Math.max(i,i+a),u=Math.min(o,o+s),h=Math.max(o,o+s);return n>=l&&n<=c&&r>=u&&r<=h}return!1},gP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hP(e,t)}(a,e);var t,n,r,i,o=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=pP(t);if(n){var i=pP(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return fP(this,e)});function a(){var e;cP(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).state={totalLength:-1},e.node=void 0,e}return r=a,(i=[{key:"componentDidMount",value:function(){if(this.node&&this.node.getTotalLength)try{var e=this.node.getTotalLength();e&&this.setState({totalLength:e})}catch(e){}}},{key:"render",value:function(){var e=this,t=this.props,n=t.x,r=t.y,i=t.width,o=t.height,a=t.radius,s=t.className,l=this.state.totalLength,c=this.props,u=c.animationEasing,h=c.animationDuration,f=c.animationBegin,p=c.isAnimationActive,d=c.isUpdateAnimationActive;if(n!==+n||r!==+r||i!==+i||o!==+o||0===i||0===o)return null;var m=vg()("recharts-rectangle",s);return d?Wn.createElement(RS,{canBegin:l>0,from:{width:i,height:o,x:n,y:r},to:{width:i,height:o,x:n,y:r},duration:h,animationEasing:u,isActive:d},(function(t){var n=t.width,r=t.height,i=t.x,o=t.y;return Wn.createElement(RS,{canBegin:l>0,from:"0px ".concat(-1===l?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:f,duration:h,isActive:p,easing:u},Wn.createElement("path",lP({},vE(e.props,!0),{className:m,d:dP(i,o,n,r,a),ref:function(t){e.node=t}})))})):Wn.createElement("path",lP({},vE(this.props,!0),{className:m,d:dP(n,r,i,o,a)}))}}])&&uP(r.prototype,i),a}(Wn.PureComponent);function yP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yP(Object(n),!0).forEach((function(t){bP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _P(e){return function(e){if(Array.isArray(e))return xP(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return xP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xP(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}gP.defaultProps={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"};var AP={widthCache:{},cacheCount:0},wP={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},CP=["minWidth","maxWidth","width","minHeight","maxHeight","height","top","left","fontSize","lineHeight","padding","margin","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"],EP="recharts_measurement_span",SP=function(e){return Object.keys(e).reduce((function(t,n){return"".concat(t).concat((r=n,r.split("").reduce((function(e,t){return t===t.toUpperCase()?[].concat(_P(e),["-",t.toLowerCase()]):[].concat(_P(e),[t])}),[]).join("")),":").concat(function(e,t){return CP.indexOf(e)>=0&&t===+t?"".concat(t,"px"):t}(n,e[n]),";");var r}),"")},TP=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e||fT.isSsr)return{width:0,height:0};var n="".concat(e),r=SP(t),i="".concat(n,"-").concat(r);if(AP.widthCache[i])return AP.widthCache[i];try{var o=document.getElementById(EP);o||((o=document.createElement("span")).setAttribute("id",EP),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var a=vP(vP({},wP),t);Object.keys(a).map((function(e){return o.style[e]=a[e],e})),o.textContent=n;var s=o.getBoundingClientRect(),l={width:s.width,height:s.height};return AP.widthCache[i]=l,++AP.cacheCount>2e3&&(AP.cacheCount=0,AP.widthCache={}),l}catch(e){return{width:0,height:0}}},BP=a(84275),kP=a.n(BP);function MP(e){return MP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},MP(e)}function PP(){return PP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PP.apply(this,arguments)}function IP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function DP(e,t){return DP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},DP(e,t)}function zP(e,t){return!t||"object"!==MP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function LP(e){return LP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},LP(e)}function RP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return FP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?FP(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function UP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function NP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?UP(Object(n),!0).forEach((function(t){jP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var VP=/[ \f\n\r\t\v\u2028\u2029]+/,GP=function(e){try{var t=[];return sE()(e.children)||(t=e.breakAll?e.children.toString().split(""):e.children.toString().split(VP)),{wordsWithComputedWidth:t.map((function(t){return{word:t,width:TP(t,e.style).width}})),spaceWidth:e.breakAll?0:TP("",e.style).width}}catch(e){return null}},qP=function(e){return[{words:sE()(e)?[]:e.toString().split(VP)}]},WP=function(e,t){if((e.width||e.scaleToFit)&&!fT.isSsr&&t){var n=GP(e);return n?function(e,t,n,r,i){var o=HS(e.maxLines),a=e.children,s=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(e,t){var o=t.word,a=t.width,s=e[e.length-1];if(s&&(null==r||i||s.width+a+n<r))s.words.push(o),s.width+=a+n;else{var l={words:[o],width:a};e.push(l)}return e}),[])},l=s(t);if(!o)return l;for(var c,u=function(t){var n=a.slice(0,t),i=GP(NP(NP({},e),{},{children:n+""})).wordsWithComputedWidth,o=s(i),l=o.length>e.maxLines||function(e){return e.reduce((function(e,t){return e.width>t.width?e:t}))}(o).width>r;return[l,o]},h=0,f=a.length-1,p=0;h<=f&&p<=a.length-1;){var d=Math.floor((h+f)/2),m=RP(u(d-1),2),g=m[0],y=m[1],v=RP(u(d),1)[0];if(g||v||(h=d+1),g&&v&&(f=d-1),!g&&v){c=y;break}p++}return c||l}(e,n.wordsWithComputedWidth,n.spaceWidth,e.width,e.scaleToFit):qP(e.children)}return qP(e.children)},HP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&DP(e,t)}(s,e);var t,n,r,i,o,a=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=LP(t);if(n){var i=LP(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return zP(this,e)});function s(){var e;IP(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).state={},e}return r=s,i=[{key:"render",value:function(){var e=this.props,t=e.dx,n=e.dy,r=e.textAnchor,i=e.verticalAnchor,o=e.scaleToFit,a=e.angle,s=e.lineHeight,l=e.capHeight,c=e.className,u=e.breakAll,h=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,["dx","dy","textAnchor","verticalAnchor","scaleToFit","angle","lineHeight","capHeight","className","breakAll"]),f=this.state.wordsByLines;if(!$S(h.x)||!$S(h.y))return null;var p,d=h.x+(HS(t)?t:0),m=h.y+(HS(n)?n:0);switch(i){case"start":p=kP()("calc(".concat(l,")"));break;case"middle":p=kP()("calc(".concat((f.length-1)/2," * -").concat(s," + (").concat(l," / 2))"));break;default:p=kP()("calc(".concat(f.length-1," * -").concat(s,")"))}var g=[];if(o){var y=f[0].width,v=this.props.width;g.push("scale(".concat((HS(v)?v/y:1)/y,")"))}return a&&g.push("rotate(".concat(a,", ").concat(d,", ").concat(m,")")),g.length&&(h.transform=g.join(" ")),Wn.createElement("text",PP({},vE(h,!0),{x:d,y:m,className:vg()("recharts-text",c),textAnchor:r}),f.map((function(e,t){return Wn.createElement("tspan",{x:d,dy:0===t?p:s,key:t},e.words.join(u?"":" "))})))}}],o=[{key:"getDerivedStateFromProps",value:function(e,t){if(e.width!==t.prevWidth||e.scaleToFit!==t.prevScaleToFit||e.children!==t.prevChildren||e.style!==t.prevStyle||e.breakAll!==t.prevBreakAll){var n=e.children!==t.prevChildren||e.style!==t.prevStyle||e.breakAll!==t.prevBreakAll;return{prevWidth:e.width,prevScaleToFit:e.scaleToFit,prevChildren:e.children,prevStyle:e.style,wordsByLines:WP(e,n)}}return null}}],i&&OP(r.prototype,i),o&&OP(r,o),s}(Wn.Component);function $P(e){return function(e){if(Array.isArray(e))return XP(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return XP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?XP(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function XP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ZP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function YP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ZP(Object(n),!0).forEach((function(t){KP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function KP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JP(){return JP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},JP.apply(this,arguments)}HP.defaultProps={x:0,y:0,lineHeight:"1em",capHeight:"0.71em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end"};function QP(e){var t,n=e.viewBox,r=e.position,i=e.value,o=e.children,a=e.content,s=e.className,l=void 0===s?"":s,c=e.textBreakAll;if(!n||sE()(i)&&sE()(o)&&!(0,Wn.isValidElement)(a)&&!KC()(a))return null;if((0,Wn.isValidElement)(a))return(0,Wn.cloneElement)(a,e);if(KC()(a)){if(t=(0,Wn.createElement)(a,e),(0,Wn.isValidElement)(t))return t}else t=function(e){var t=e.value,n=e.formatter,r=sE()(e.children)?t:e.children;return KC()(n)?n(r):r}(e);var u=function(e){return HS(e.cx)}(n),h=vE(e,!0);if(u&&("insideStart"===r||"insideEnd"===r||"end"===r))return function(e,t,n){var r,i,o=e.position,a=e.viewBox,s=e.offset,l=e.className,c=a,u=c.cx,h=c.cy,f=c.innerRadius,p=c.outerRadius,d=c.startAngle,m=c.endAngle,g=c.clockWise,y=(f+p)/2,v=function(e,t){return qS(t-e)*Math.min(Math.abs(t-e),360)}(d,m),b=v>=0?1:-1;"insideStart"===o?(r=d+b*s,i=g):"insideEnd"===o?(r=m-b*s,i=!g):"end"===o&&(r=m+b*s,i=g),i=v<=0?i:!i;var _=UM(u,h,y,r),x=UM(u,h,y,r+359*(i?1:-1)),A="M".concat(_.x,",").concat(_.y,"\n    A").concat(y,",").concat(y,",0,1,").concat(i?0:1,",\n    ").concat(x.x,",").concat(x.y),w=sE()(e.id)?ZS("recharts-radial-line-"):e.id;return Wn.createElement("text",JP({},n,{dominantBaseline:"central",className:vg()("recharts-radial-bar-label",l)}),Wn.createElement("defs",null,Wn.createElement("path",{id:w,d:A})),Wn.createElement("textPath",{xlinkHref:"#".concat(w)},t))}(e,t,h);var f=u?function(e){var t=e.viewBox,n=e.offset,r=e.position,i=t,o=i.cx,a=i.cy,s=i.innerRadius,l=i.outerRadius,c=(i.startAngle+i.endAngle)/2;if("outside"===r){var u=UM(o,a,l+n,c),h=u.x;return{x:h,y:u.y,textAnchor:h>=o?"start":"end",verticalAnchor:"middle"}}if("center"===r)return{x:o,y:a,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===r)return{x:o,y:a,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===r)return{x:o,y:a,textAnchor:"middle",verticalAnchor:"end"};var f=UM(o,a,(s+l)/2,c);return{x:f.x,y:f.y,textAnchor:"middle",verticalAnchor:"middle"}}(e):function(e){var t=e.viewBox,n=e.parentViewBox,r=e.offset,i=e.position,o=t,a=o.x,s=o.y,l=o.width,c=o.height,u=c>=0?1:-1,h=u*r,f=u>0?"end":"start",p=u>0?"start":"end",d=l>=0?1:-1,m=d*r,g=d>0?"end":"start",y=d>0?"start":"end";if("top"===i)return YP(YP({},{x:a+l/2,y:s-u*r,textAnchor:"middle",verticalAnchor:f}),n?{height:Math.max(s-n.y,0),width:l}:{});if("bottom"===i)return YP(YP({},{x:a+l/2,y:s+c+h,textAnchor:"middle",verticalAnchor:p}),n?{height:Math.max(n.y+n.height-(s+c),0),width:l}:{});if("left"===i){var v={x:a-m,y:s+c/2,textAnchor:g,verticalAnchor:"middle"};return YP(YP({},v),n?{width:Math.max(v.x-n.x,0),height:c}:{})}if("right"===i){var b={x:a+l+m,y:s+c/2,textAnchor:y,verticalAnchor:"middle"};return YP(YP({},b),n?{width:Math.max(n.x+n.width-b.x,0),height:c}:{})}var _=n?{width:l,height:c}:{};return"insideLeft"===i?YP({x:a+m,y:s+c/2,textAnchor:y,verticalAnchor:"middle"},_):"insideRight"===i?YP({x:a+l-m,y:s+c/2,textAnchor:g,verticalAnchor:"middle"},_):"insideTop"===i?YP({x:a+l/2,y:s+h,textAnchor:"middle",verticalAnchor:p},_):"insideBottom"===i?YP({x:a+l/2,y:s+c-h,textAnchor:"middle",verticalAnchor:f},_):"insideTopLeft"===i?YP({x:a+m,y:s+h,textAnchor:y,verticalAnchor:p},_):"insideTopRight"===i?YP({x:a+l-m,y:s+h,textAnchor:g,verticalAnchor:p},_):"insideBottomLeft"===i?YP({x:a+m,y:s+c-h,textAnchor:y,verticalAnchor:f},_):"insideBottomRight"===i?YP({x:a+l-m,y:s+c-h,textAnchor:g,verticalAnchor:f},_):pE()(i)&&(HS(i.x)||WS(i.x))&&(HS(i.y)||WS(i.y))?YP({x:a+YS(i.x,l),y:s+YS(i.y,c),textAnchor:"end",verticalAnchor:"end"},_):YP({x:a+l/2,y:s+c/2,textAnchor:"middle",verticalAnchor:"middle"},_)}(e);return Wn.createElement(HP,JP({className:vg()("recharts-label",l)},h,f,{breakAll:c}),t)}QP.displayName="Label",QP.defaultProps={offset:5};var eI=function(e){var t=e.cx,n=e.cy,r=e.angle,i=e.startAngle,o=e.endAngle,a=e.r,s=e.radius,l=e.innerRadius,c=e.outerRadius,u=e.x,h=e.y,f=e.top,p=e.left,d=e.width,m=e.height,g=e.clockWise,y=e.labelViewBox;if(y)return y;if(HS(d)&&HS(m)){if(HS(u)&&HS(h))return{x:u,y:h,width:d,height:m};if(HS(f)&&HS(p))return{x:f,y:p,width:d,height:m}}return HS(u)&&HS(h)?{x:u,y:h,width:0,height:0}:HS(t)&&HS(n)?{cx:t,cy:n,startAngle:i||r||0,endAngle:o||r||0,innerRadius:l||0,outerRadius:c||s||a||0,clockWise:g}:e.viewBox?e.viewBox:{}},tI=function(e,t){return e?!0===e?Wn.createElement(QP,{key:"label-implicit",viewBox:t}):$S(e)?Wn.createElement(QP,{key:"label-implicit",viewBox:t,value:e}):(0,Wn.isValidElement)(e)?e.type===QP?(0,Wn.cloneElement)(e,{key:"label-implicit",viewBox:t}):Wn.createElement(QP,{key:"label-implicit",content:e,viewBox:t}):KC()(e)?Wn.createElement(QP,{key:"label-implicit",content:e,viewBox:t}):pE()(e)?Wn.createElement(QP,JP({viewBox:t},e,{key:"label-implicit"})):null:null};function nI(e){return nI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nI(e)}function rI(){return rI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rI.apply(this,arguments)}function iI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iI(Object(n),!0).forEach((function(t){aI(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function aI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sI(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function lI(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uI(e,t){return uI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},uI(e,t)}function hI(e,t){return!t||"object"!==nI(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fI(e){return fI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},fI(e)}QP.parseViewBox=eI,QP.renderCallByParent=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var r=e.children,i=eI(e),o=eM(r,QP.displayName).map((function(e,n){return(0,Wn.cloneElement)(e,{viewBox:t||i,key:"label-".concat(n)})}));if(!n)return o;var a=tI(e.label,t||i);return[a].concat($P(o))};var pI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uI(e,t)}(s,e);var t,n,r,i,o,a=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=fI(t);if(n){var i=fI(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return hI(this,e)});function s(){return lI(this,s),a.apply(this,arguments)}return r=s,i=[{key:"shouldComponentUpdate",value:function(e){var t=e.viewBox,n=sI(e,["viewBox"]),r=this.props,i=r.viewBox,o=sI(r,["viewBox"]);return!$k(t,i)||!$k(n,o)}},{key:"getTickLineCoord",value:function(e){var t,n,r,i,o,a,s=this.props,l=s.x,c=s.y,u=s.width,h=s.height,f=s.orientation,p=s.tickSize,d=s.mirror,m=s.tickMargin,g=d?-1:1,y=e.tickSize||p,v=HS(e.tickCoord)?e.tickCoord:e.coordinate;switch(f){case"top":t=n=e.coordinate,a=(r=(i=c+ +!d*h)-g*y)-g*m,o=v;break;case"left":r=i=e.coordinate,o=(t=(n=l+ +!d*u)-g*y)-g*m,a=v;break;case"right":r=i=e.coordinate,o=(t=(n=l+ +d*u)+g*y)+g*m,a=v;break;default:t=n=e.coordinate,a=(r=(i=c+ +d*h)+g*y)+g*m,o=v}return{line:{x1:t,y1:r,x2:n,y2:i},tick:{x:o,y:a}}}},{key:"getTickTextAnchor",value:function(){var e,t=this.props,n=t.orientation,r=t.mirror;switch(n){case"left":e=r?"start":"end";break;case"right":e=r?"end":"start";break;default:e="middle"}return e}},{key:"getTickVerticalAnchor",value:function(){var e=this.props,t=e.orientation,n=e.mirror,r="end";switch(t){case"left":case"right":r="middle";break;case"top":r=n?"start":"end";break;default:r=n?"end":"start"}return r}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.x,n=e.y,r=e.width,i=e.height,o=e.orientation,a=e.mirror,s=e.axisLine,l=oI(oI(oI({},vE(this.props)),vE(s)),{},{fill:"none"});if("top"===o||"bottom"===o){var c=+("top"===o&&!a||"bottom"===o&&a);l=oI(oI({},l),{},{x1:t,y1:n+c*i,x2:t+r,y2:n+c*i})}else{var u=+("left"===o&&!a||"right"===o&&a);l=oI(oI({},l),{},{x1:t+u*r,y1:n,x2:t+u*r,y2:n+i})}return Wn.createElement("line",rI({},l,{className:vg()("recharts-cartesian-axis-line",rE()(s,"className"))}))}},{key:"renderTicks",value:function(e){var t=this,n=this.props,r=n.tickLine,i=n.stroke,o=n.tick,a=n.tickFormatter,l=n.unit,c=s.getTicks(oI(oI({},this.props),{},{ticks:e})),u=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),f=vE(this.props),p=vE(o),d=oI(oI({},f),{},{fill:"none"},vE(r)),m=c.map((function(e,n){var m=t.getTickLineCoord(e),g=m.line,y=m.tick,v=oI(oI(oI(oI({textAnchor:u,verticalAnchor:h},f),{},{stroke:"none",fill:i},p),y),{},{index:n,payload:e,visibleTicksCount:c.length,tickFormatter:a});return Wn.createElement(CE,rI({className:"recharts-cartesian-axis-tick",key:"tick-".concat(n)},_E(t.props,e,n)),r&&Wn.createElement("line",rI({},d,g,{className:vg()("recharts-cartesian-axis-tick-line",rE()(r,"className"))})),o&&s.renderTickItem(o,v,"".concat(KC()(a)?a(e.value,n):e.value).concat(l||"")))}));return Wn.createElement("g",{className:"recharts-cartesian-axis-ticks"},m)}},{key:"render",value:function(){var e=this.props,t=e.axisLine,n=e.width,r=e.height,i=e.ticksGenerator,o=e.className;if(e.hide)return null;var a=this.props,s=a.ticks,l=sI(a,["ticks"]),c=s;return KC()(i)&&(c=s&&s.length>0?i(this.props):i(l)),n<=0||r<=0||!c||!c.length?null:Wn.createElement(CE,{className:vg()("recharts-cartesian-axis",o)},t&&this.renderAxisLine(),this.renderTicks(c),QP.renderCallByParent(this.props))}}],o=[{key:"getTicks",value:function(e){var t=e.tick,n=e.ticks,r=e.viewBox,i=e.minTickGap,o=e.orientation,a=e.interval,l=e.tickFormatter,c=e.unit;return n&&n.length&&t?HS(a)||fT.isSsr?s.getNumberIntervalTicks(n,"number"==typeof a&&HS(a)?a:0):"preserveStartEnd"===a?s.getTicksStart({ticks:n,tickFormatter:l,viewBox:r,orientation:o,minTickGap:i,unit:c},!0):"preserveStart"===a?s.getTicksStart({ticks:n,tickFormatter:l,viewBox:r,orientation:o,minTickGap:i,unit:c}):s.getTicksEnd({ticks:n,tickFormatter:l,viewBox:r,orientation:o,minTickGap:i,unit:c}):[]}},{key:"getNumberIntervalTicks",value:function(e,t){return e.filter((function(e,n){return n%(t+1)==0}))}},{key:"getTicksStart",value:function(e,t){var n,r,i=e.ticks,o=e.tickFormatter,a=e.viewBox,s=e.orientation,l=e.minTickGap,c=e.unit,u=a.x,h=a.y,f=a.width,p=a.height,d="top"===s||"bottom"===s?"width":"height",m=(i||[]).slice(),g=c&&"width"===d?TP(c)[d]:0,y=m.length,v=y>=2?qS(m[1].coordinate-m[0].coordinate):1;if(1===v?(n="width"===d?u:h,r="width"===d?u+f:h+p):(n="width"===d?u+f:h+p,r="width"===d?u:h),t){var b=i[y-1],_=KC()(o)?o(b.value,y-1):b.value,x=TP(_)[d]+g,A=v*(b.coordinate+v*x/2-r);m[y-1]=b=oI(oI({},b),{},{tickCoord:A>0?b.coordinate-A*v:b.coordinate}),v*(b.tickCoord-v*x/2-n)>=0&&v*(b.tickCoord+v*x/2-r)<=0&&(r=b.tickCoord-v*(x/2+l),m[y-1]=oI(oI({},b),{},{isShow:!0}))}for(var w=t?y-1:y,C=0;C<w;C++){var E=m[C],S=KC()(o)?o(E.value,C):E.value,T=TP(S)[d]+g;if(0===C){var B=v*(E.coordinate-v*T/2-n);m[C]=E=oI(oI({},E),{},{tickCoord:B<0?E.coordinate-B*v:E.coordinate})}else m[C]=E=oI(oI({},E),{},{tickCoord:E.coordinate});v*(E.tickCoord-v*T/2-n)>=0&&v*(E.tickCoord+v*T/2-r)<=0&&(n=E.tickCoord+v*(T/2+l),m[C]=oI(oI({},E),{},{isShow:!0}))}return m.filter((function(e){return e.isShow}))}},{key:"getTicksEnd",value:function(e){var t,n,r=e.ticks,i=e.tickFormatter,o=e.viewBox,a=e.orientation,s=e.minTickGap,l=e.unit,c=o.x,u=o.y,h=o.width,f=o.height,p="top"===a||"bottom"===a?"width":"height",d=l&&"width"===p?TP(l)[p]:0,m=(r||[]).slice(),g=m.length,y=g>=2?qS(m[1].coordinate-m[0].coordinate):1;1===y?(t="width"===p?c:u,n="width"===p?c+h:u+f):(t="width"===p?c+h:u+f,n="width"===p?c:u);for(var v=g-1;v>=0;v--){var b=m[v],_=KC()(i)?i(b.value,g-v-1):b.value,x=TP(_)[p]+d;if(v===g-1){var A=y*(b.coordinate+y*x/2-n);m[v]=b=oI(oI({},b),{},{tickCoord:A>0?b.coordinate-A*y:b.coordinate})}else m[v]=b=oI(oI({},b),{},{tickCoord:b.coordinate});y*(b.tickCoord-y*x/2-t)>=0&&y*(b.tickCoord+y*x/2-n)<=0&&(n=b.tickCoord-y*(x/2+s),m[v]=oI(oI({},b),{},{isShow:!0}))}return m.filter((function(e){return e.isShow}))}},{key:"renderTickItem",value:function(e,t,n){return Wn.isValidElement(e)?Wn.cloneElement(e,t):KC()(e)?e(t):Wn.createElement(HP,rI({},t,{className:"recharts-cartesian-axis-tick-value"}),n)}}],i&&cI(r.prototype,i),o&&cI(r,o),s}(Wn.Component);function dI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dI(Object(n),!0).forEach((function(t){gI(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}pI.displayName="CartesianAxis",pI.defaultProps={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};var yI=["Webkit","Moz","O","ms"];function vI(e){return vI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vI(e)}function bI(){return bI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bI.apply(this,arguments)}function _I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_I(Object(n),!0).forEach((function(t){AI(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function AI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function CI(e,t){return CI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},CI(e,t)}function EI(e,t){return!t||"object"!==vI(t)&&"function"!=typeof t?SI(e):t}function SI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TI(e){return TI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},TI(e)}var BI=function(e){return e.changedTouches&&!!e.changedTouches.length},kI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CI(e,t)}(s,e);var t,n,r,i,o,a=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=TI(t);if(n){var i=TI(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return EI(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=a.call(this,e)).leaveTimer=void 0,t.travellerDragStartHandlers=void 0,t.handleDrag=function(e){t.leaveTimer&&(clearTimeout(t.leaveTimer),t.leaveTimer=null),t.state.isTravellerMoving?t.handleTravellerMove(e):t.state.isSlideMoving&&t.handleSlideDrag(e)},t.handleTouchMove=function(e){null!=e.changedTouches&&e.changedTouches.length>0&&t.handleDrag(e.changedTouches[0])},t.handleDragEnd=function(){t.setState({isTravellerMoving:!1,isSlideMoving:!1}),t.detachDragEndListener()},t.handleLeaveWrapper=function(){(t.state.isTravellerMoving||t.state.isSlideMoving)&&(t.leaveTimer=window.setTimeout(t.handleDragEnd,t.props.leaveTimeOut))},t.handleEnterSlideOrTraveller=function(){t.setState({isTextActive:!0})},t.handleLeaveSlideOrTraveller=function(){t.setState({isTextActive:!1})},t.handleSlideDragStart=function(e){var n=BI(e)?e.changedTouches[0]:e;t.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:n.pageX}),t.attachDragEndListener()},t.travellerDragStartHandlers={startX:t.handleTravellerDragStart.bind(SI(t),"startX"),endX:t.handleTravellerDragStart.bind(SI(t),"endX")},t.state={},t}return r=s,i=[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(e){var t=e.startX,n=e.endX,r=this.state.scaleValues,i=this.props,o=i.gap,a=i.data.length-1,l=Math.min(t,n),c=Math.max(t,n),u=s.getIndexInRange(r,l),h=s.getIndexInRange(r,c);return{startIndex:u-u%o,endIndex:h===a?a:h-h%o}}},{key:"getTextOfTick",value:function(e){var t=this.props,n=t.data,r=t.tickFormatter,i=t.dataKey,o=pM(n[e],i,e);return KC()(r)?r(o,e):o}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0)}},{key:"handleSlideDrag",value:function(e){var t=this.state,n=t.slideMoveStartX,r=t.startX,i=t.endX,o=this.props,a=o.x,s=o.width,l=o.travellerWidth,c=o.startIndex,u=o.endIndex,h=o.onChange,f=e.pageX-n;f>0?f=Math.min(f,a+s-l-i,a+s-l-r):f<0&&(f=Math.max(f,a-r,a-i));var p=this.getIndex({startX:r+f,endX:i+f});p.startIndex===c&&p.endIndex===u||!h||h(p),this.setState({startX:r+f,endX:i+f,slideMoveStartX:e.pageX})}},{key:"handleTravellerDragStart",value:function(e,t){var n=BI(t)?t.changedTouches[0]:t;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:e,brushMoveStartX:n.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(e){var t,n=this.state,r=n.brushMoveStartX,i=n.movingTravellerId,o=n.endX,a=n.startX,s=this.state[i],l=this.props,c=l.x,u=l.width,h=l.travellerWidth,f=l.onChange,p=l.gap,d=l.data,m={startX:this.state.startX,endX:this.state.endX},g=e.pageX-r;g>0?g=Math.min(g,c+u-h-s):g<0&&(g=Math.max(g,c-s)),m[i]=s+g;var y=this.getIndex(m),v=y.startIndex,b=y.endIndex;this.setState((AI(t={},i,s+g),AI(t,"brushMoveStartX",e.pageX),t),(function(){var e;f&&(e=d.length-1,("startX"===i&&(o>a?v%p==0:b%p==0)||o<a&&b===e||"endX"===i&&(o>a?b%p==0:v%p==0)||o>a&&b===e)&&f(y))}))}},{key:"renderBackground",value:function(){var e=this.props,t=e.x,n=e.y,r=e.width,i=e.height,o=e.fill,a=e.stroke;return Wn.createElement("rect",{stroke:a,fill:o,x:t,y:n,width:r,height:i})}},{key:"renderPanorama",value:function(){var e=this.props,t=e.x,n=e.y,r=e.width,i=e.height,o=e.data,a=e.children,s=e.padding,l=Wn.Children.only(a);return l?Wn.cloneElement(l,{x:t,y:n,width:r,height:i,margin:s,compact:!0,data:o}):null}},{key:"renderTravellerLayer",value:function(e,t){var n=this.props,r=n.y,i=n.travellerWidth,o=n.height,a=n.traveller,l=Math.max(e,this.props.x),c=xI(xI({},vE(this.props)),{},{x:l,y:r,width:i,height:o});return Wn.createElement(CE,{className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[t],onTouchStart:this.travellerDragStartHandlers[t],style:{cursor:"col-resize"}},s.renderTraveller(a,c))}},{key:"renderSlide",value:function(e,t){var n=this.props,r=n.y,i=n.height,o=n.stroke,a=n.travellerWidth,s=Math.min(e,t)+a,l=Math.max(Math.abs(t-e)-a,0);return Wn.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:o,fillOpacity:.2,x:s,y:r,width:l,height:i})}},{key:"renderText",value:function(){var e=this.props,t=e.startIndex,n=e.endIndex,r=e.y,i=e.height,o=e.travellerWidth,a=e.stroke,s=this.state,l=s.startX,c=s.endX,u={pointerEvents:"none",fill:a};return Wn.createElement(CE,{className:"recharts-brush-texts"},Wn.createElement(HP,bI({textAnchor:"end",verticalAnchor:"middle",x:Math.min(l,c)-5,y:r+i/2},u),this.getTextOfTick(t)),Wn.createElement(HP,bI({textAnchor:"start",verticalAnchor:"middle",x:Math.max(l,c)+o+5,y:r+i/2},u),this.getTextOfTick(n)))}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.className,r=e.children,i=e.x,o=e.y,a=e.width,s=e.height,l=e.alwaysShowText,c=this.state,u=c.startX,h=c.endX,f=c.isTextActive,p=c.isSlideMoving,d=c.isTravellerMoving;if(!t||!t.length||!HS(i)||!HS(o)||!HS(a)||!HS(s)||a<=0||s<=0)return null;var m=vg()("recharts-brush",n),g=1===Wn.Children.count(r),y=function(e,t){var n=e.replace(/(\w)/,(function(e){return e.toUpperCase()})),r=yI.reduce((function(e,r){return mI(mI({},e),{},gI({},r+n,t))}),{});return r[e]=t,r}("userSelect","none");return Wn.createElement(CE,{className:m,onMouseMove:this.handleDrag,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:y},this.renderBackground(),g&&this.renderPanorama(),this.renderSlide(u,h),this.renderTravellerLayer(u,"startX"),this.renderTravellerLayer(h,"endX"),(f||p||d||l)&&this.renderText())}}],o=[{key:"renderDefaultTraveller",value:function(e){var t=e.x,n=e.y,r=e.width,i=e.height,o=e.stroke,a=Math.floor(n+i/2)-1;return Wn.createElement(Wn.Fragment,null,Wn.createElement("rect",{x:t,y:n,width:r,height:i,fill:o,stroke:"none"}),Wn.createElement("line",{x1:t+1,y1:a,x2:t+r-1,y2:a,fill:"none",stroke:"#fff"}),Wn.createElement("line",{x1:t+1,y1:a+2,x2:t+r-1,y2:a+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(e,t){return Wn.isValidElement(e)?Wn.cloneElement(e,t):KC()(e)?e(t):s.renderDefaultTraveller(t)}},{key:"getDerivedStateFromProps",value:function(e,t){var n=e.data,r=e.width,i=e.x,o=e.travellerWidth,a=e.updateId,s=e.startIndex,l=e.endIndex;if(n!==t.prevData||a!==t.prevUpdateId)return xI({prevData:n,prevTravellerWidth:o,prevUpdateId:a,prevX:i,prevWidth:r},n&&n.length?function(e){var t=e.data,n=e.startIndex,r=e.endIndex,i=e.x,o=e.width,a=e.travellerWidth;if(!t||!t.length)return{};var s=t.length,l=Ws().domain(oE()(0,s)).range([i,i+o-a]),c=l.domain().map((function(e){return l(e)}));return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,startX:l(n),endX:l(r),scale:l,scaleValues:c}}({data:n,width:r,x:i,travellerWidth:o,startIndex:s,endIndex:l}):{scale:null,scaleValues:null});if(t.scale&&(r!==t.prevWidth||i!==t.prevX||o!==t.prevTravellerWidth)){t.scale.range([i,i+r-o]);var c=t.scale.domain().map((function(e){return t.scale(e)}));return{prevData:n,prevTravellerWidth:o,prevUpdateId:a,prevX:i,prevWidth:r,startX:t.scale(e.startIndex),endX:t.scale(e.endIndex),scaleValues:c}}return null}},{key:"getIndexInRange",value:function(e,t){for(var n=0,r=e.length-1;r-n>1;){var i=Math.floor((n+r)/2);e[i]>t?r=i:n=i}return t>=e[r]?r:n}}],i&&wI(r.prototype,i),o&&wI(r,o),s}(Wn.PureComponent);kI.displayName="Brush",kI.defaultProps={height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1};var MI=function(e,t){var n=e.alwaysShow,r=e.ifOverflow;return n&&(r="extendDomain"),r===t},PI=a(66604),II=a.n(PI);function OI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function DI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DI(Object(n),!0).forEach((function(t){LI(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function LI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var RI=function(e,t){var n=e.x,r=e.y,i=t.x,o=t.y;return{x:Math.min(n,i),y:Math.min(r,o),width:Math.abs(i-n),height:Math.abs(o-r)}},FI=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scale=void 0,this.scale=t}return t=e,n=[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.bandAware,r=t.position;if(void 0!==e){if(r)switch(r){case"start":default:return this.scale(e);case"middle":var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i;case"end":var o=this.bandwidth?this.bandwidth():0;return this.scale(e)+o}if(n){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}return this.scale(e)}}},{key:"isInRange",value:function(e){var t=this.range(),n=t[0],r=t[t.length-1];return n<=r?e>=n&&e<=r:e>=r&&e<=n}}],r=[{key:"create",value:function(t){return new e(t)}}],n&&OI(t.prototype,n),r&&OI(t,r),e;var t,n,r}();FI.EPS=1e-4;var UI=function(e){var t=Object.keys(e).reduce((function(t,n){return zI(zI({},t),{},LI({},n,FI.create(e[n])))}),{});return zI(zI({},t),{},{apply:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.bandAware,i=n.position;return II()(e,(function(e,n){return t[n].apply(e,{bandAware:r,position:i})}))},isInRange:function(e){return $C()(e,(function(e,n){return t[n].isInRange(e)}))}})},NI=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i]};function jI(){return jI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jI.apply(this,arguments)}function VI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function GI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?VI(Object(n),!0).forEach((function(t){qI(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WI(e){var t=e.x,n=e.y,r=e.r,i=e.alwaysShow,o=e.clipPathId,a=$S(t),s=$S(n);if(NI(void 0===i,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!a||!s)return null;var l=function(e){var t=e.x,n=e.y,r=e.xAxis,i=e.yAxis,o=UI({x:r.scale,y:i.scale}),a=o.apply({x:t,y:n},{bandAware:!0});return MI(e,"discard")&&!o.isInRange(a)?null:a}(e);if(!l)return null;var c=l.x,u=l.y,h=e.shape,f=e.className,p=GI(GI({clipPath:MI(e,"hidden")?"url(#".concat(o,")"):void 0},vE(e,!0)),{},{cx:c,cy:u});return Wn.createElement(CE,{className:vg()("recharts-reference-dot",f)},WI.renderDot(h,p),QP.renderCallByParent(e,{x:c-r,y:u-r,width:2*r,height:2*r}))}WI.displayName="ReferenceDot",WI.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1},WI.renderDot=function(e,t){return Wn.isValidElement(e)?Wn.cloneElement(e,t):KC()(e)?e(t):Wn.createElement(aP,jI({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"}))};var HI=a(59704),$I=a.n(HI);function XI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ZI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?XI(Object(n),!0).forEach((function(t){YI(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function YI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function JI(){return JI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},JI.apply(this,arguments)}function QI(e){var t=e.x,n=e.y,r=e.segment,i=e.xAxis,o=e.yAxis,a=e.shape,s=e.className,l=e.alwaysShow,c=e.clipPathId;NI(void 0===l,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var u=function(e,t,n,r,i){var o=i.viewBox,a=o.x,s=o.y,l=o.width,c=o.height,u=i.position;if(n){var h=i.y,f=i.yAxis.orientation,p=e.y.apply(h,{position:u});if(MI(i,"discard")&&!e.y.isInRange(p))return null;var d=[{x:a+l,y:p},{x:a,y:p}];return"left"===f?d.reverse():d}if(t){var m=i.x,g=i.xAxis.orientation,y=e.x.apply(m,{position:u});if(MI(i,"discard")&&!e.x.isInRange(y))return null;var v=[{x:y,y:s+c},{x:y,y:s}];return"top"===g?v.reverse():v}if(r){var b=i.segment.map((function(t){return e.apply(t,{position:u})}));return MI(i,"discard")&&$I()(b,(function(t){return!e.isInRange(t)}))?null:b}return null}(UI({x:i.scale,y:o.scale}),$S(t),$S(n),r&&2===r.length,e);if(!u)return null;var h,f,p,d=(f=2,function(e){if(Array.isArray(e))return e}(h=u)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(h,f)||function(e,t){if(e){if("string"==typeof e)return KI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?KI(e,t):void 0}}(h,f)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=d[0],g=m.x,y=m.y,v=d[1],b=v.x,_=v.y,x=ZI(ZI({clipPath:MI(e,"hidden")?"url(#".concat(c,")"):void 0},vE(e,!0)),{},{x1:g,y1:y,x2:b,y2:_});return Wn.createElement(CE,{className:vg()("recharts-reference-line",s)},function(e,t){return Wn.isValidElement(e)?Wn.cloneElement(e,t):KC()(e)?e(t):Wn.createElement("line",JI({},t,{className:"recharts-reference-line-line"}))}(a,x),QP.renderCallByParent(e,(p={x1:g,y1:y,x2:b,y2:_},RI({x:p.x1,y:p.y1},{x:p.x2,y:p.y2}))))}function eO(){return eO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eO.apply(this,arguments)}function tO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tO(Object(n),!0).forEach((function(t){rO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iO(e){var t=e.x1,n=e.x2,r=e.y1,i=e.y2,o=e.className,a=e.alwaysShow,s=e.clipPathId;NI(void 0===a,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var l=$S(t),c=$S(n),u=$S(r),h=$S(i),f=e.shape;if(!(l||c||u||h||f))return null;var p=function(e,t,n,r,i){var o=i.x1,a=i.x2,s=i.y1,l=i.y2,c=i.xAxis,u=i.yAxis;if(!c||!u)return null;var h=UI({x:c.scale,y:u.scale}),f={x:e?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(s,{position:"start"}):h.y.rangeMin},p={x:t?h.x.apply(a,{position:"end"}):h.x.rangeMax,y:r?h.y.apply(l,{position:"end"}):h.y.rangeMax};return!MI(i,"discard")||h.isInRange(f)&&h.isInRange(p)?RI(f,p):null}(l,c,u,h,e);if(!p&&!f)return null;var d=MI(e,"hidden")?"url(#".concat(s,")"):void 0;return Wn.createElement(CE,{className:vg()("recharts-reference-area",o)},iO.renderRect(f,nO(nO({clipPath:d},vE(e,!0)),p)),QP.renderCallByParent(e,p))}QI.displayName="ReferenceLine",QI.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"},iO.displayName="ReferenceArea",iO.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1},iO.renderRect=function(e,t){return Wn.isValidElement(e)?Wn.cloneElement(e,t):KC()(e)?e(t):Wn.createElement(gP,eO({},t,{className:"recharts-reference-area-rect"}))};var oO=function(e,t,n,r,i){var o=eM(e,QI.displayName),a=eM(e,WI.displayName),s=o.concat(a),l=eM(e,iO.displayName),c="".concat(r,"Id"),u=r[0],h=t;if(s.length&&(h=s.reduce((function(e,t){if(t.props[c]===n&&MI(t.props,"extendDomain")&&HS(t.props[u])){var r=t.props[u];return[Math.min(e[0],r),Math.max(e[1],r)]}return e}),h)),l.length){var f="".concat(u,"1"),p="".concat(u,"2");h=l.reduce((function(e,t){if(t.props[c]===n&&MI(t.props,"extendDomain")&&HS(t.props[f])&&HS(t.props[p])){var r=t.props[f],i=t.props[p];return[Math.min(e[0],r,i),Math.max(e[1],r,i)]}return e}),h)}return i&&i.length&&(h=i.reduce((function(e,t){return HS(t)?[Math.min(e[0],t),Math.max(e[1],t)]:e}),h)),h},aO=a(26729),sO=new(a.n(aO)());sO.setMaxListeners&&sO.setMaxListeners(10);var lO="recharts.syncMouseEvents";function cO(e){return cO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cO(e)}function uO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||bO(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hO(){return hO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hO.apply(this,arguments)}function fO(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function pO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dO(e,t){return dO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},dO(e,t)}function mO(e,t){return!t||"object"!==cO(t)&&"function"!=typeof t?gO(e):t}function gO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yO(e){return yO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},yO(e)}function vO(e){return function(e){if(Array.isArray(e))return _O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||bO(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bO(e,t){if(e){if("string"==typeof e)return _O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_O(e,t):void 0}}function _O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function AO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xO(Object(n),!0).forEach((function(t){wO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var CO={xAxis:["bottom","top"],yAxis:["left","right"]},EO={x:0,y:0},SO=Number.isFinite?Number.isFinite:isFinite,TO="function"==typeof requestAnimationFrame?requestAnimationFrame:"function"==typeof setImmediate?setImmediate:setTimeout,BO="function"==typeof cancelAnimationFrame?cancelAnimationFrame:"function"==typeof clearImmediate?clearImmediate:clearTimeout,kO=function(e,t,n){var r=t.graphicalItems,i=t.dataStartIndex,o=t.dataEndIndex,a=(r||[]).reduce((function(e,t){var n=t.props.data;return n&&n.length?[].concat(vO(e),vO(n)):e}),[]);return a&&a.length>0?a:n&&n.props&&n.props.data&&n.props.data.length>0?n.props.data:e&&e.length&&HS(i)&&HS(o)?e.slice(i,o+1):[]},MO=function(e,t,n,r){var i=e.graphicalItems,o=e.tooltipAxis,a=kO(t,e);return n<0||!i||!i.length||n>=a.length?null:i.reduce((function(e,t){if(t.props.hide)return e;var i,s=t.props.data;return(i=o.dataKey&&!o.allowDuplicatedCategory?QS(void 0===s?a:s,o.dataKey,r):s&&s[n]||a[n])?[].concat(vO(e),[IM(t,i)]):e}),[])},PO=function(e,t,n,r){var i=r||{x:e.chartX,y:e.chartY},o=function(e,t){return"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius}(i,n),a=e.orderedTooltipTicks,s=e.tooltipAxis,l=e.tooltipTicks,c=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,a=null!==(t=null==n?void 0:n.length)&&void 0!==t?t:0;if(a>1){if(i&&"angleAxis"===i.axisType&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var s=i.range,l=0;l<a;l++){var c=l>0?r[l-1].coordinate:r[a-1].coordinate,u=r[l].coordinate,h=l>=a-1?r[0].coordinate:r[l+1].coordinate,f=void 0;if(qS(u-c)!==qS(h-u)){var p=[];if(qS(h-u)===qS(s[1]-s[0])){f=h;var d=u+s[1]-s[0];p[0]=Math.min(d,(d+c)/2),p[1]=Math.max(d,(d+c)/2)}else{f=c;var m=h+s[1]-s[0];p[0]=Math.min(u,(m+u)/2),p[1]=Math.max(u,(m+u)/2)}var g=[Math.min(u,(f+u)/2),Math.max(u,(f+u)/2)];if(e>g[0]&&e<=g[1]||e>=p[0]&&e<=p[1]){o=r[l].index;break}}else{var y=Math.min(c,h),v=Math.max(c,h);if(e>(y+u)/2&&e<=(v+u)/2){o=r[l].index;break}}}else for(var b=0;b<a;b++)if(0===b&&e<=(n[b].coordinate+n[b+1].coordinate)/2||b>0&&b<a-1&&e>(n[b].coordinate+n[b-1].coordinate)/2&&e<=(n[b].coordinate+n[b+1].coordinate)/2||b===a-1&&e>(n[b].coordinate+n[b-1].coordinate)/2){o=n[b].index;break}}else o=0;return o}(o,a,l,s);if(c>=0&&l){var u=l[c]&&l[c].value,h=MO(e,t,c,u),f=function(e,t,n,r){var i=t.find((function(e){return e&&e.index===n}));if(i){if("horizontal"===e)return{x:i.coordinate,y:r.y};if("vertical"===e)return{x:r.x,y:i.coordinate};if("centric"===e){var o=i.coordinate,a=r.radius;return AO(AO(AO({},r),UM(r.cx,r.cy,a,o)),{},{angle:o,radius:a})}var s=i.coordinate,l=r.angle;return AO(AO(AO({},r),UM(r.cx,r.cy,s,l)),{},{angle:l,radius:s})}return EO}(n,a,c,i);return{activeTooltipIndex:c,activeLabel:u,activePayload:h,activeCoordinate:f}}return null},IO=function(e,t){var n=t.axisType,r=void 0===n?"xAxis":n,i=t.AxisComp,o=t.graphicalItems,a=t.stackGroups,s=t.dataStartIndex,l=t.dataEndIndex,c=e.children,u="".concat(r,"Id"),h=eM(c,i),f={};return h&&h.length?f=function(e,t){var n=t.axes,r=t.graphicalItems,i=t.axisType,o=t.axisIdKey,a=t.stackGroups,s=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,u=e.children,h=e.stackOffset,f=bM(c,i),p=n.reduce((function(t,n){var p=n.props,d=p.type,m=p.dataKey,g=p.allowDataOverflow,y=p.allowDuplicatedCategory,v=p.scale,b=p.ticks,_=n.props[o],x=kO(e.data,{graphicalItems:r.filter((function(e){return e.props[o]===_})),dataStartIndex:s,dataEndIndex:l}),A=x.length;if(!t[_]){var w,C,E;if(m){if(w=dM(x,m,d),"category"===d&&f){var S=function(e){if(!hE()(e))return!1;for(var t=e.length,n={},r=0;r<t;r++){if(n[e[r]])return!0;n[e[r]]=!0}return!1}(w);y&&S?(C=w,w=oE()(0,A)):y||(w=PM(n.props.domain,w,n).reduce((function(e,t){return e.indexOf(t)>=0?e:[].concat(vO(e),[t])}),[]))}else if("category"===d)w=y?w.filter((function(e){return""!==e&&!sE()(e)})):PM(n.props.domain,w,n).reduce((function(e,t){return e.indexOf(t)>=0||""===t||sE()(t)?e:[].concat(vO(e),[t])}),[]);else if("number"===d){var T=function(e,t,n,r){var i=t.map((function(t){return yM(e,t,n,r)})).filter((function(e){return!sE()(e)}));return i&&i.length?i.reduce((function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}),[1/0,-1/0]):null}(x,r.filter((function(e){return e.props[o]===_&&!e.props.hide})),m,i);T&&(w=T)}!f||"number"!==d&&"auto"===v||(E=dM(x,m,"category"))}else w=f?oE()(0,A):a&&a[_]&&a[_].hasStack&&"number"===d?"expand"===h?[0,1]:SM(a[_].stackGroups,s,l):vM(x,r.filter((function(e){return e.props[o]===_&&!e.props.hide})),d,!0);if("number"===d)w=oO(u,w,_,i,b),n.props.domain&&(w=kM(n.props.domain,w,g));else if("category"===d&&n.props.domain){var B=n.props.domain;w.every((function(e){return B.indexOf(e)>=0}))&&(w=B)}return AO(AO({},t),{},wO({},_,AO(AO({},n.props),{},{axisType:i,domain:w,categoricalDomain:E,duplicateDomain:C,originalDomain:n.props.domain,isCategorical:f,layout:c})))}return t}),{});return p}(e,{axes:h,graphicalItems:o,axisType:r,axisIdKey:u,stackGroups:a,dataStartIndex:s,dataEndIndex:l}):o&&o.length&&(f=function(e,t){var n=t.graphicalItems,r=t.Axis,i=t.axisType,o=t.axisIdKey,a=t.stackGroups,s=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,u=e.children,h=kO(e.data,{graphicalItems:n,dataStartIndex:s,dataEndIndex:l}),f=h.length,p=bM(c,i),d=-1;return n.reduce((function(e,t){var m,g=t.props[o];return e[g]?e:(d++,p?m=oE()(0,f):a&&a[g]&&a[g].hasStack?(m=SM(a[g].stackGroups,s,l),m=oO(u,m,g,i)):(m=kM(r.defaultProps.domain,vM(h,n.filter((function(e){return e.props[o]===g&&!e.props.hide})),"number"),r.defaultProps.allowDataOverflow),m=oO(u,m,g,i)),AO(AO({},e),{},wO({},g,AO(AO({axisType:i},r.defaultProps),{},{hide:!0,orientation:rE()(CO,"".concat(i,".").concat(d%2),null),domain:m,originalDomain:r.defaultProps.domain,isCategorical:p,layout:c}))))}),{})}(e,{Axis:i,graphicalItems:o,axisType:r,axisIdKey:u,stackGroups:a,dataStartIndex:s,dataEndIndex:l})),f},OO=function(e){var t=e.children,n=e.defaultShowTooltip,r=tM(t,kI.displayName);return{chartX:0,chartY:0,dataStartIndex:r&&r.props&&r.props.startIndex||0,dataEndIndex:r&&r.props&&r.props.endIndex||e.data&&e.data.length-1||0,activeTooltipIndex:-1,isTooltipActive:!sE()(n)&&n}},DO=function(e){return"horizontal"===e?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:"vertical"===e?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:"centric"===e?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}};function zO(e){return zO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zO(e)}function LO(){return LO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LO.apply(this,arguments)}function RO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function UO(e,t){return UO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},UO(e,t)}function NO(e,t){return!t||"object"!==zO(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jO(e){return jO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},jO(e)}function VO(e){return function(e){if(Array.isArray(e))return GO(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return GO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?GO(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function GO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var qO=function(e){return e&&e.x===+e.x&&e.y===+e.y},WO=function(e,t){var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[[]];return e.forEach((function(e){qO(e)?t[t.length-1].push(e):t[t.length-1].length>0&&t.push([])})),qO(e[0])&&t[t.length-1].push(e[0]),t[t.length-1].length<=0&&(t=t.slice(0,-1)),t}(e);t&&(n=[n.reduce((function(e,t){return[].concat(VO(e),VO(t))}),[])]);var r=n.map((function(e){return e.reduce((function(e,t,n){return"".concat(e).concat(0===n?"M":"L").concat(t.x,",").concat(t.y)}),"")})).join("");return 1===n.length?"".concat(r,"Z"):r},HO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&UO(e,t)}(a,e);var t,n,r,i,o=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=jO(t);if(n){var i=jO(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return NO(this,e)});function a(){return RO(this,a),o.apply(this,arguments)}return r=a,(i=[{key:"render",value:function(){var e=this.props,t=e.points,n=e.className,r=e.baseLinePoints,i=e.connectNulls,o=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,["points","className","baseLinePoints","connectNulls"]);if(!t||!t.length)return null;var a=vg()("recharts-polygon",n);if(r&&r.length){var s=o.stroke&&"none"!==o.stroke,l=function(e,t,n){var r=WO(e,n);return"".concat("Z"===r.slice(-1)?r.slice(0,-1):r,"L").concat(WO(t.reverse(),n).slice(1))}(t,r,i);return Wn.createElement("g",{className:a},Wn.createElement("path",LO({},vE(o,!0),{fill:"Z"===l.slice(-1)?o.fill:"none",stroke:"none",d:l})),s?Wn.createElement("path",LO({},vE(o,!0),{fill:"none",d:WO(t,i)})):null,s?Wn.createElement("path",LO({},vE(o,!0),{fill:"none",d:WO(r,i)})):null)}var c=WO(t,i);return Wn.createElement("path",LO({},vE(o,!0),{fill:"Z"===c.slice(-1)?o.fill:"none",className:a,d:c}))}}])&&FO(r.prototype,i),a}(Wn.PureComponent);function $O(e){return $O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$O(e)}function XO(){return XO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},XO.apply(this,arguments)}function ZO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function YO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ZO(Object(n),!0).forEach((function(t){KO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function KO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function QO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eD(e,t){return eD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},eD(e,t)}function tD(e,t){return!t||"object"!==$O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nD(e){return nD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},nD(e)}var rD=Math.PI/180,iD=1e-5,oD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eD(e,t)}(s,e);var t,n,r,i,o,a=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=nD(t);if(n){var i=nD(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return tD(this,e)});function s(){return JO(this,s),a.apply(this,arguments)}return r=s,i=[{key:"getTickLineCoord",value:function(e){var t=this.props,n=t.cx,r=t.cy,i=t.radius,o=t.orientation,a=t.tickSize||8,s=UM(n,r,i,e.coordinate),l=UM(n,r,i+("inner"===o?-1:1)*a,e.coordinate);return{x1:s.x,y1:s.y,x2:l.x,y2:l.y}}},{key:"getTickTextAnchor",value:function(e){var t=this.props.orientation,n=Math.cos(-e.coordinate*rD);return n>iD?"outer"===t?"start":"end":n<-iD?"outer"===t?"end":"start":"middle"}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,n=e.cy,r=e.radius,i=e.axisLine,o=e.axisLineType,a=YO(YO({},vE(this.props)),{},{fill:"none"},vE(i));if("circle"===o)return Wn.createElement(aP,XO({className:"recharts-polar-angle-axis-line"},a,{cx:t,cy:n,r}));var s=this.props.ticks.map((function(e){return UM(t,n,r,e.coordinate)}));return Wn.createElement(HO,XO({className:"recharts-polar-angle-axis-line"},a,{points:s}))}},{key:"renderTicks",value:function(){var e=this,t=this.props,n=t.ticks,r=t.tick,i=t.tickLine,o=t.tickFormatter,a=t.stroke,l=vE(this.props),c=vE(r),u=YO(YO({},l),{},{fill:"none"},vE(i)),h=n.map((function(t,n){var h=e.getTickLineCoord(t),f=YO(YO(YO({textAnchor:e.getTickTextAnchor(t)},l),{},{stroke:"none",fill:a},c),{},{index:n,payload:t,x:h.x2,y:h.y2});return Wn.createElement(CE,XO({className:"recharts-polar-angle-axis-tick",key:"tick-".concat(n)},_E(e.props,t,n)),i&&Wn.createElement("line",XO({className:"recharts-polar-angle-axis-tick-line"},u,h)),r&&s.renderTickItem(r,f,o?o(t.value,n):t.value))}));return Wn.createElement(CE,{className:"recharts-polar-angle-axis-ticks"},h)}},{key:"render",value:function(){var e=this.props,t=e.ticks,n=e.radius,r=e.axisLine;return n<=0||!t||!t.length?null:Wn.createElement(CE,{className:"recharts-polar-angle-axis"},r&&this.renderAxisLine(),this.renderTicks())}}],o=[{key:"renderTickItem",value:function(e,t,n){return Wn.isValidElement(e)?Wn.cloneElement(e,t):KC()(e)?e(t):Wn.createElement(HP,XO({},t,{className:"recharts-polar-angle-axis-tick-value"}),n)}}],i&&QO(r.prototype,i),o&&QO(r,o),s}(Wn.PureComponent);oD.displayName="PolarAngleAxis",oD.axisType="angleAxis",oD.defaultProps={type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,domain:[0,"auto"],orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0};var aD=a(22762),sD=a.n(aD),lD=a(84753),cD=a.n(lD);function uD(e){return uD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uD(e)}function hD(){return hD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hD.apply(this,arguments)}function fD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fD(Object(n),!0).forEach((function(t){dD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mD(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function gD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vD(e,t){return vD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},vD(e,t)}function bD(e,t){return!t||"object"!==uD(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _D(e){return _D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_D(e)}var xD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vD(e,t)}(s,e);var t,n,r,i,o,a=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=_D(t);if(n){var i=_D(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return bD(this,e)});function s(){return gD(this,s),a.apply(this,arguments)}return r=s,i=[{key:"getTickValueCoord",value:function(e){var t=e.coordinate,n=this.props,r=n.angle,i=n.cx,o=n.cy;return UM(i,o,t,r)}},{key:"getTickTextAnchor",value:function(){var e;switch(this.props.orientation){case"left":e="end";break;case"right":e="start";break;default:e="middle"}return e}},{key:"getViewBox",value:function(){var e=this.props,t=e.cx,n=e.cy,r=e.angle,i=e.ticks,o=cD()(i,(function(e){return e.coordinate||0}));return{cx:t,cy:n,startAngle:r,endAngle:r,innerRadius:sD()(i,(function(e){return e.coordinate||0})).coordinate||0,outerRadius:o.coordinate||0}}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,n=e.cy,r=e.angle,i=e.ticks,o=e.axisLine,a=mD(e,["cx","cy","angle","ticks","axisLine"]),s=i.reduce((function(e,t){return[Math.min(e[0],t.coordinate),Math.max(e[1],t.coordinate)]}),[1/0,-1/0]),l=UM(t,n,s[0],r),c=UM(t,n,s[1],r),u=pD(pD(pD({},vE(a)),{},{fill:"none"},vE(o)),{},{x1:l.x,y1:l.y,x2:c.x,y2:c.y});return Wn.createElement("line",hD({className:"recharts-polar-radius-axis-line"},u))}},{key:"renderTicks",value:function(){var e=this,t=this.props,n=t.ticks,r=t.tick,i=t.angle,o=t.tickFormatter,a=t.stroke,l=mD(t,["ticks","tick","angle","tickFormatter","stroke"]),c=this.getTickTextAnchor(),u=vE(l),h=vE(r),f=n.map((function(t,n){var l=e.getTickValueCoord(t),f=pD(pD(pD(pD({textAnchor:c,transform:"rotate(".concat(90-i,", ").concat(l.x,", ").concat(l.y,")")},u),{},{stroke:"none",fill:a},h),{},{index:n},l),{},{payload:t});return Wn.createElement(CE,hD({className:"recharts-polar-radius-axis-tick",key:"tick-".concat(n)},_E(e.props,t,n)),s.renderTickItem(r,f,o?o(t.value,n):t.value))}));return Wn.createElement(CE,{className:"recharts-polar-radius-axis-ticks"},f)}},{key:"render",value:function(){var e=this.props,t=e.ticks,n=e.axisLine,r=e.tick;return t&&t.length?Wn.createElement(CE,{className:"recharts-polar-radius-axis"},n&&this.renderAxisLine(),r&&this.renderTicks(),QP.renderCallByParent(this.props,this.getViewBox())):null}}],o=[{key:"renderTickItem",value:function(e,t,n){return Wn.isValidElement(e)?Wn.cloneElement(e,t):KC()(e)?e(t):Wn.createElement(HP,hD({},t,{className:"recharts-polar-radius-axis-tick-value"}),n)}}],i&&yD(r.prototype,i),o&&yD(r,o),s}(Wn.PureComponent);xD.displayName="PolarRadiusAxis",xD.axisType="radiusAxis",xD.defaultProps={type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,domain:[0,"auto"],allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0};var AD=a(68630),wD=a.n(AD),CD=a(10928),ED=a.n(CD);function SD(e){return function(e){if(Array.isArray(e))return TD(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return TD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?TD(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function TD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function BD(){return BD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},BD.apply(this,arguments)}function kD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kD(Object(n),!0).forEach((function(t){PD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function PD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ID={valueAccessor:function(e){return hE()(e.value)?ED()(e.value):e.value}};function OD(e){var t=e.data,n=e.valueAccessor,r=e.dataKey,i=e.clockWise,o=e.id,a=e.textBreakAll,s=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,["data","valueAccessor","dataKey","clockWise","id","textBreakAll"]);return t&&t.length?Wn.createElement(CE,{className:"recharts-label-list"},t.map((function(e,t){var l=sE()(r)?n(e,t):pM(e&&e.payload,r),c=sE()(o)?{}:{id:"".concat(o,"-").concat(t)};return Wn.createElement(QP,BD({},vE(e,!0),s,c,{parentViewBox:e.parentViewBox,index:t,value:l,textBreakAll:a,viewBox:QP.parseViewBox(sE()(i)?e:MD(MD({},e),{},{clockWise:i})),key:"label-".concat(t)}))}))):null}function DD(e,t){return e?!0===e?Wn.createElement(OD,{key:"labelList-implicit",data:t}):Wn.isValidElement(e)||KC()(e)?Wn.createElement(OD,{key:"labelList-implicit",data:t,content:e}):pE()(e)?Wn.createElement(OD,BD({data:t},e,{key:"labelList-implicit"})):null:null}OD.displayName="LabelList",OD.renderCallByParent=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var r=e.children,i=eM(r,OD.displayName).map((function(e,n){return(0,Wn.cloneElement)(e,{data:t,key:"labelList-".concat(n)})}));if(!n)return i;var o=DD(e.label,t);return[o].concat(SD(i))},OD.defaultProps=ID;var zD=function(e){return null};function LD(e){return LD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},LD(e)}function RD(){return RD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RD.apply(this,arguments)}function FD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function UD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FD(Object(n),!0).forEach((function(t){ND(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ND(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function VD(e,t){return VD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},VD(e,t)}function GD(e,t){return!t||"object"!==LD(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qD(e){return qD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},qD(e)}zD.displayName="Cell";var WD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&VD(e,t)}(s,e);var t,n,r,i,o,a=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=qD(t);if(n){var i=qD(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return GD(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=a.call(this,e)).state=void 0,t.id=ZS("recharts-pie-"),t.handleAnimationEnd=function(){var e=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),KC()(e)&&e()},t.handleAnimationStart=function(){var e=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),KC()(e)&&e()},t.state={isAnimationFinished:!e.isAnimationActive,prevIsAnimationActive:e.isAnimationActive,prevAnimationId:e.animationId},t}return r=s,o=[{key:"getDerivedStateFromProps",value:function(e,t){return t.prevIsAnimationActive!==e.isAnimationActive?{prevIsAnimationActive:e.isAnimationActive,prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:[]}:e.isAnimationActive&&e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:t.curSectors}:e.sectors!==t.curSectors?{curSectors:e.sectors}:null}},{key:"getTextAnchor",value:function(e,t){return e>t?"start":e<t?"end":"middle"}},{key:"renderLabelLineItem",value:function(e,t){return Wn.isValidElement(e)?Wn.cloneElement(e,t):KC()(e)?e(t):Wn.createElement(tk,RD({},t,{type:"linear",className:"recharts-pie-label-line"}))}},{key:"renderLabelItem",value:function(e,t,n){if(Wn.isValidElement(e))return Wn.cloneElement(e,t);var r=n;return KC()(e)&&(r=e(t),Wn.isValidElement(r))?r:Wn.createElement(HP,RD({},t,{alignmentBaseline:"middle",className:"recharts-pie-label-text"}),r)}},{key:"renderSectorItem",value:function(e,t){return Wn.isValidElement(e)?Wn.cloneElement(e,t):KC()(e)?e(t):wD()(e)?Wn.createElement(JM,RD({},t,e)):Wn.createElement(JM,t)}}],(i=[{key:"isActiveIndex",value:function(e){var t=this.props.activeIndex;return Array.isArray(t)?-1!==t.indexOf(e):e===t}},{key:"renderLabels",value:function(e){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var t=this.props,n=t.label,r=t.labelLine,i=t.dataKey,o=t.valueKey,a=vE(this.props),l=vE(n),c=vE(r),u=n&&n.offsetRadius||20,h=e.map((function(e,t){var h=(e.startAngle+e.endAngle)/2,f=UM(e.cx,e.cy,e.outerRadius+u,h),p=UD(UD(UD(UD({},a),e),{},{stroke:"none"},l),{},{index:t,textAnchor:s.getTextAnchor(f.x,e.cx)},f),d=UD(UD(UD(UD({},a),e),{},{fill:"none",stroke:e.fill},c),{},{index:t,points:[UM(e.cx,e.cy,e.outerRadius,h),f],key:"line"}),m=i;return sE()(i)&&sE()(o)?m="value":sE()(i)&&(m=o),Wn.createElement(CE,{key:"label-".concat(t)},r&&s.renderLabelLineItem(r,d),s.renderLabelItem(n,p,pM(e,m)))}));return Wn.createElement(CE,{className:"recharts-pie-labels"},h)}},{key:"renderSectorsStatically",value:function(e){var t=this,n=this.props,r=n.activeShape,i=n.blendStroke;return e.map((function(e,n){var o=t.isActiveIndex(n)?r:null,a=UD(UD({},e),{},{stroke:i?e.fill:e.stroke});return Wn.createElement(CE,RD({className:"recharts-pie-sector"},_E(t.props,e,n),{key:"sector-".concat(n)}),s.renderSectorItem(o,a))}))}},{key:"renderSectorsWithAnimation",value:function(){var e=this,t=this.props,n=t.sectors,r=t.isAnimationActive,i=t.animationBegin,o=t.animationDuration,a=t.animationEasing,s=t.animationId,l=this.state,c=l.prevSectors,u=l.prevIsAnimationActive;return Wn.createElement(RS,{begin:i,duration:o,isActive:r,easing:a,from:{t:0},to:{t:1},key:"pie-".concat(s,"-").concat(u),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},(function(t){var r=t.t,i=[],o=(n&&n[0]).startAngle;return n.forEach((function(e,t){var n=c&&c[t],a=t>0?rE()(e,"paddingAngle",0):0;if(n){var s=JS(n.endAngle-n.startAngle,e.endAngle-e.startAngle),l=UD(UD({},e),{},{startAngle:o+a,endAngle:o+s(r)+a});i.push(l),o=l.endAngle}else{var u=e.endAngle,h=e.startAngle,f=JS(0,u-h)(r),p=UD(UD({},e),{},{startAngle:o+a,endAngle:o+f+a});i.push(p),o=p.endAngle}})),Wn.createElement(CE,null,e.renderSectorsStatically(i))}))}},{key:"renderSectors",value:function(){var e=this.props,t=e.sectors,n=e.isAnimationActive,r=this.state.prevSectors;return!(n&&t&&t.length)||r&&$v()(r,t)?this.renderSectorsStatically(t):this.renderSectorsWithAnimation()}},{key:"render",value:function(){var e=this.props,t=e.hide,n=e.sectors,r=e.className,i=e.label,o=e.cx,a=e.cy,s=e.innerRadius,l=e.outerRadius,c=e.isAnimationActive,u=this.state.isAnimationFinished;if(t||!n||!n.length||!HS(o)||!HS(a)||!HS(s)||!HS(l))return null;var h=vg()("recharts-pie",r);return Wn.createElement(CE,{className:h},this.renderSectors(),i&&this.renderLabels(n),QP.renderCallByParent(this.props,null,!1),(!c||u)&&OD.renderCallByParent(this.props,n,!1))}}])&&jD(r.prototype,i),o&&jD(r,o),s}(Wn.PureComponent);WD.displayName="Pie",WD.defaultProps={stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!fT.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1},WD.parseDeltaAngle=function(e,t){return qS(t-e)*Math.min(Math.abs(t-e),360)},WD.getRealPieData=function(e){var t=e.props,n=t.data,r=t.children,i=vE(e.props),o=eM(r,zD.displayName);return n&&n.length?n.map((function(e,t){return UD(UD(UD({payload:e},i),e),o&&o[t]&&o[t].props)})):o&&o.length?o.map((function(e){return UD(UD({},i),e.props)})):[]},WD.parseCoordinateOfPie=function(e,t){var n=t.top,r=t.left,i=t.width,o=t.height,a=NM(i,o);return{cx:r+YS(e.props.cx,i,i/2),cy:n+YS(e.props.cy,o,o/2),innerRadius:YS(e.props.innerRadius,a,0),outerRadius:YS(e.props.outerRadius,a,.8*a),maxRadius:e.props.maxRadius||Math.sqrt(i*i+o*o)/2}},WD.getComposedData=function(e){var t=e.item,n=e.offset,r=WD.getRealPieData(t);if(!r||!r.length)return null;var i=t.props,o=i.cornerRadius,a=i.startAngle,s=i.endAngle,l=i.paddingAngle,c=i.dataKey,u=i.nameKey,h=i.valueKey,f=i.tooltipType,p=Math.abs(t.props.minAngle),d=WD.parseCoordinateOfPie(t,n),m=WD.parseDeltaAngle(a,s),g=Math.abs(m),y=c;sE()(c)&&sE()(h)?(NI(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),y="value"):sE()(c)&&(NI(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),y=h);var v,b,_=r.filter((function(e){return 0!==pM(e,y,0)})).length,x=g-_*p-(g>=360?_:_-1)*l,A=r.reduce((function(e,t){var n=pM(t,y,0);return e+(HS(n)?n:0)}),0);return A>0&&(v=r.map((function(e,t){var n,r=pM(e,y,0),i=pM(e,u,t),s=(HS(r)?r:0)/A,c=(n=t?b.endAngle+qS(m)*l*(0!==r?1:0):a)+qS(m)*((0!==r?p:0)+s*x),h=(n+c)/2,g=(d.innerRadius+d.outerRadius)/2,v=[{name:i,value:r,payload:e,dataKey:y,type:f}],_=UM(d.cx,d.cy,g,h);return b=UD(UD(UD({percent:s,cornerRadius:o,name:i,tooltipPayload:v,midAngle:h,middleRadius:g,tooltipPosition:_},e),d),{},{value:pM(e,y),startAngle:n,endAngle:c,payload:e,paddingAngle:qS(m)*l})}))),UD(UD({},d),{},{sectors:v,data:r})};var HD=function(e){var t,n,r=e.chartName,i=e.GraphicalChild,o=e.defaultTooltipEventType,a=void 0===o?"axis":o,s=e.validateTooltipEventTypes,l=void 0===s?["axis"]:s,c=e.axisComponents,u=e.legendContent,h=e.formatAxisMap,f=e.defaultProps,p=function(e,t){var n=e.props,o=e.dataStartIndex,a=e.dataEndIndex,s=e.updateId;if(!nM({props:n}))return null;var l=n.children,u=n.layout,f=n.stackOffset,p=n.data,d=n.reverseStackOrder,m=DO(u),g=m.numericAxisName,y=m.cateAxisName,v=eM(l,i),b=function(e,t,n,r,i,o){if(!e)return null;var a=(o?t.reverse():t).reduce((function(e,t){var i=t.props,o=i.stackId;if(i.hide)return e;var a=t.props[n],s=e[a]||{hasStack:!1,stackGroups:{}};if($S(o)){var l=s.stackGroups[o]||{numericAxisId:n,cateAxisId:r,items:[]};l.items.push(t),s.hasStack=!0,s.stackGroups[o]=l}else s.stackGroups[ZS("_stackId_")]={numericAxisId:n,cateAxisId:r,items:[t]};return hM(hM({},e),{},fM({},a,s))}),{});return Object.keys(a).reduce((function(t,o){var s=a[o];return s.hasStack&&(s.stackGroups=Object.keys(s.stackGroups).reduce((function(t,o){var a=s.stackGroups[o];return hM(hM({},t),{},fM({},o,{numericAxisId:n,cateAxisId:r,items:a.items,stackedData:EM(e,a.items,i)}))}),{})),hM(hM({},t),{},fM({},o,s))}),{})}(p,v,"".concat(g,"Id"),"".concat(y,"Id"),f,d),_=c.reduce((function(e,t){var r="".concat(t.axisType,"Map");return AO(AO({},e),{},wO({},r,IO(n,AO(AO({},t),{},{graphicalItems:v,stackGroups:t.axisType===g&&b,dataStartIndex:o,dataEndIndex:a}))))}),{}),x=function(e,t){var n=e.props,r=(e.graphicalItems,e.xAxisMap),i=void 0===r?{}:r,o=e.yAxisMap,a=void 0===o?{}:o,s=n.width,l=n.height,c=n.children,u=n.margin||{},h=tM(c,kI.displayName),f=tM(c,CB.displayName),p=Object.keys(a).reduce((function(e,t){var n=a[t],r=n.orientation;return n.mirror||n.hide?e:AO(AO({},e),{},wO({},r,e[r]+n.width))}),{left:u.left||0,right:u.right||0}),d=Object.keys(i).reduce((function(e,t){var n=i[t],r=n.orientation;return n.mirror||n.hide?e:AO(AO({},e),{},wO({},r,rE()(e,"".concat(r))+n.height))}),{top:u.top||0,bottom:u.bottom||0}),m=AO(AO({},d),p),g=m.bottom;return h&&(m.bottom+=h.props.height||kI.defaultProps.height),f&&t&&(m=function(e,t,n,r){var i=n.children,o=n.width,a=n.margin,s=o-(a.left||0)-(a.right||0),l=gM({children:i,legendWidth:s}),c=e;if(l){var u=r||{},h=l.align,f=l.verticalAlign,p=l.layout;("vertical"===p||"horizontal"===p&&"center"===f)&&HS(e[h])&&(c=hM(hM({},e),{},fM({},h,c[h]+(u.width||0)))),("horizontal"===p||"vertical"===p&&"center"===h)&&HS(e[f])&&(c=hM(hM({},e),{},fM({},f,c[f]+(u.height||0))))}return c}(m,0,n,t)),AO(AO({brushBottom:g},m),{},{width:s-m.left-m.right,height:l-m.top-m.bottom})}(AO(AO({},_),{},{props:n,graphicalItems:v}),null==t?void 0:t.legendBBox);Object.keys(_).forEach((function(e){_[e]=h(n,_[e],x,e.replace("Map",""),r)}));var A=function(e){var t=KS(e),n=xM(t,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:tE()(n,(function(e){return e.coordinate})),tooltipAxis:t,tooltipAxisBandSize:MM(t,n)}}(_["".concat(y,"Map")]),w=function(e,t){var n=t.graphicalItems,r=t.stackGroups,i=t.offset,o=t.updateId,a=t.dataStartIndex,s=t.dataEndIndex,l=e.barSize,u=e.layout,h=e.barGap,f=e.barCategoryGap,p=e.maxBarSize,d=DO(u),m=d.numericAxisName,g=d.cateAxisName,y=function(e){return!(!e||!e.length)&&e.some((function(e){var t=Yk(e&&e.type);return t&&t.indexOf("Bar")>=0}))}(n),v=y&&function(e){var t=e.barSize,n=e.stackGroups,r=void 0===n?{}:n;if(!r)return{};for(var i={},o=Object.keys(r),a=0,s=o.length;a<s;a++)for(var l=r[o[a]].stackGroups,c=Object.keys(l),u=0,h=c.length;u<h;u++){var f=l[c[u]],p=f.items,d=f.cateAxisId,m=p.filter((function(e){return Yk(e.type).indexOf("Bar")>=0}));if(m&&m.length){var g=m[0].props.barSize,y=m[0].props[d];i[y]||(i[y]=[]),i[y].push({item:m[0],stackList:m.slice(1),barSize:sE()(g)?t:g})}}return i}({barSize:l,stackGroups:r}),b=[];return n.forEach((function(n,l){var d=kO(e.data,{dataStartIndex:a,dataEndIndex:s},n),y=n.props,_=y.dataKey,x=y.maxBarSize,A=n.props["".concat(m,"Id")],w=n.props["".concat(g,"Id")],C=c.reduce((function(e,r){var i,o=t["".concat(r.axisType,"Map")],a=n.props["".concat(r.axisType,"Id")],s=o&&o[a];return AO(AO({},e),{},(wO(i={},r.axisType,s),wO(i,"".concat(r.axisType,"Ticks"),xM(s)),i))}),{}),E=C[g],S=C["".concat(g,"Ticks")],T=r&&r[A]&&r[A].hasStack&&function(e,t){var n=e.props.stackId;if($S(n)){var r=t[n];if(r&&r.items.length){for(var i=-1,o=0,a=r.items.length;o<a;o++)if(r.items[o]===e){i=o;break}return i>=0?r.stackedData[i]:null}}return null}(n,r[A].stackGroups),B=Yk(n.type).indexOf("Bar")>=0,k=MM(E,S),M=[];if(B){var P,I,O=sE()(x)?p:x,D=null!==(P=null!==(I=MM(E,S,!0))&&void 0!==I?I:O)&&void 0!==P?P:0;M=function(e){var t=e.barGap,n=e.barCategoryGap,r=e.bandSize,i=e.sizeList,o=void 0===i?[]:i,a=e.maxBarSize,s=o.length;if(s<1)return null;var l,c=YS(t,r,0,!0);if(o[0].barSize===+o[0].barSize){var u=!1,h=r/s,f=o.reduce((function(e,t){return e+t.barSize||0}),0);(f+=(s-1)*c)>=r&&(f-=(s-1)*c,c=0),f>=r&&h>0&&(u=!0,f=s*(h*=.9));var p={offset:((r-f)/2>>0)-c,size:0};l=o.reduce((function(e,t){var n=[].concat(lM(e),[{item:t.item,position:{offset:p.offset+p.size+c,size:u?h:t.barSize}}]);return p=n[n.length-1].position,t.stackList&&t.stackList.length&&t.stackList.forEach((function(e){n.push({item:e,position:p})})),n}),[])}else{var d=YS(n,r,0,!0);r-2*d-(s-1)*c<=0&&(c=0);var m=(r-2*d-(s-1)*c)/s;m>1&&(m>>=0);var g=a===+a?Math.min(m,a):m;l=o.reduce((function(e,t,n){var r=[].concat(lM(e),[{item:t.item,position:{offset:d+(m+c)*n+(m-g)/2,size:g}}]);return t.stackList&&t.stackList.length&&t.stackList.forEach((function(e){r.push({item:e,position:r[r.length-1].position})})),r}),[])}return l}({barGap:h,barCategoryGap:f,bandSize:D!==k?D:k,sizeList:v[w],maxBarSize:O}),D!==k&&(M=M.map((function(e){return AO(AO({},e),{},{position:AO(AO({},e.position),{},{offset:e.position.offset-D/2})})})))}var z,L=n&&n.type&&n.type.getComposedData;L&&b.push({props:AO(AO({},L(AO(AO({},C),{},{displayedData:d,props:e,dataKey:_,item:n,bandSize:k,barPosition:M,offset:i,stackedData:T,layout:u,dataStartIndex:a,dataEndIndex:s}))),{},(z={key:n.key||"item-".concat(l)},wO(z,m,C[m]),wO(z,g,C[g]),wO(z,"animationId",o),z)),childIndex:sM(n,e.children),item:n})})),b}(n,AO(AO({},_),{},{dataStartIndex:o,dataEndIndex:a,updateId:s,graphicalItems:v,stackGroups:b,offset:x}));return AO(AO({formattedGraphicalItems:w,graphicalItems:v,offset:x,stackGroups:b},A),_)};return n=t=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dO(e,t)}(c,e);var t,n,i,o,s=(t=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=yO(t);if(n){var i=yO(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return mO(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).uniqueChartId=void 0,t.clipPathId=void 0,t.legendInstance=void 0,t.deferId=void 0,t.container=void 0,t.clearDeferId=function(){!sE()(t.deferId)&&BO&&BO(t.deferId),t.deferId=null},t.handleLegendBBoxUpdate=function(e){if(e){var n=t.state,r=n.dataStartIndex,i=n.dataEndIndex,o=n.updateId;t.setState(AO({legendBBox:e},p({props:t.props,dataStartIndex:r,dataEndIndex:i,updateId:o},AO(AO({},t.state),{},{legendBBox:e}))))}},t.handleReceiveSyncEvent=function(e,n,r){t.props.syncId===e&&n!==t.uniqueChartId&&(t.clearDeferId(),t.deferId=TO&&TO(t.applySyncEvent.bind(gO(t),r)))},t.handleBrushChange=function(e){var n=e.startIndex,r=e.endIndex;if(n!==t.state.dataStartIndex||r!==t.state.dataEndIndex){var i=t.state.updateId;t.setState((function(){return AO({dataStartIndex:n,dataEndIndex:r},p({props:t.props,dataStartIndex:n,dataEndIndex:r,updateId:i},t.state))})),t.triggerSyncEvent({dataStartIndex:n,dataEndIndex:r})}},t.handleMouseEnter=function(e){var n=t.props.onMouseEnter,r=t.getMouseInfo(e);if(r){var i=AO(AO({},r),{},{isTooltipActive:!0});t.setState(i),t.triggerSyncEvent(i),KC()(n)&&n(i,e)}},t.triggeredAfterMouseMove=function(e){var n=t.props.onMouseMove,r=t.getMouseInfo(e),i=r?AO(AO({},r),{},{isTooltipActive:!0}):{isTooltipActive:!1};t.setState(i),t.triggerSyncEvent(i),KC()(n)&&n(i,e)},t.handleItemMouseEnter=function(e){t.setState((function(){return{isTooltipActive:!0,activeItem:e,activePayload:e.tooltipPayload,activeCoordinate:e.tooltipPosition||{x:e.cx,y:e.cy}}}))},t.handleItemMouseLeave=function(){t.setState((function(){return{isTooltipActive:!1}}))},t.handleMouseMove=function(e){e&&KC()(e.persist)&&e.persist(),t.triggeredAfterMouseMove(e)},t.handleMouseLeave=function(e){var n=t.props.onMouseLeave,r={isTooltipActive:!1};t.setState(r),t.triggerSyncEvent(r),KC()(n)&&n(r,e),t.cancelThrottledTriggerAfterMouseMove()},t.handleOuterEvent=function(e){var n=function(e){var t=e&&e.type;return t&&Zk[t]?Zk[t]:null}(e),r=rE()(t.props,"".concat(n));n&&KC()(r)&&r(/.*touch.*/i.test(n)?t.getMouseInfo(e.changedTouches[0]):t.getMouseInfo(e),e)},t.handleClick=function(e){var n=t.props.onClick,r=t.getMouseInfo(e);if(r){var i=AO(AO({},r),{},{isTooltipActive:!0});t.setState(i),t.triggerSyncEvent(i),KC()(n)&&n(i,e)}},t.handleMouseDown=function(e){var n=t.props.onMouseDown;KC()(n)&&n(t.getMouseInfo(e),e)},t.handleMouseUp=function(e){var n=t.props.onMouseUp;KC()(n)&&n(t.getMouseInfo(e),e)},t.handleTouchMove=function(e){null!=e.changedTouches&&e.changedTouches.length>0&&t.handleMouseMove(e.changedTouches[0])},t.handleTouchStart=function(e){null!=e.changedTouches&&e.changedTouches.length>0&&t.handleMouseDown(e.changedTouches[0])},t.handleTouchEnd=function(e){null!=e.changedTouches&&e.changedTouches.length>0&&t.handleMouseUp(e.changedTouches[0])},t.verticalCoordinatesGenerator=function(e){var t=e.xAxis,n=e.width,r=e.height,i=e.offset;return _M(pI.getTicks(AO(AO(AO({},pI.defaultProps),t),{},{ticks:xM(t,!0),viewBox:{x:0,y:0,width:n,height:r}})),i.left,i.left+i.width)},t.horizontalCoordinatesGenerator=function(e){var t=e.yAxis,n=e.width,r=e.height,i=e.offset;return _M(pI.getTicks(AO(AO(AO({},pI.defaultProps),t),{},{ticks:xM(t,!0),viewBox:{x:0,y:0,width:n,height:r}})),i.top,i.top+i.height)},t.axesTicksGenerator=function(e){return xM(e,!0)},t.renderCursor=function(e){var n=t.state,i=n.isTooltipActive,o=n.activeCoordinate,a=n.activePayload,s=n.offset,l=n.activeTooltipIndex,c=t.getTooltipEventType();if(!e||!e.props.cursor||!i||!o||"ScatterChart"!==r&&"axis"!==c)return null;var u,h=t.props.layout,f=tk;if("ScatterChart"===r)u=o,f=ck;else if("BarChart"===r)u=t.getCursorRectangle(),f=gP;else if("radial"===h){var p=t.getCursorPoints(),d=p.cx,m=p.cy,g=p.radius;u={cx:d,cy:m,startAngle:p.startAngle,endAngle:p.endAngle,innerRadius:g,outerRadius:g},f=JM}else u={points:t.getCursorPoints()},f=tk;var y=e.key||"_recharts-cursor",v=AO(AO(AO(AO({stroke:"#ccc",pointerEvents:"none"},s),u),vE(e.props.cursor)),{},{payload:a,payloadIndex:l,key:y,className:"recharts-tooltip-cursor"});return(0,Wn.isValidElement)(e.props.cursor)?(0,Wn.cloneElement)(e.props.cursor,v):(0,Wn.createElement)(f,v)},t.renderPolarAxis=function(e,n,r){var i=rE()(e,"type.axisType"),o=rE()(t.state,"".concat(i,"Map"))[e.props["".concat(i,"Id")]];return(0,Wn.cloneElement)(e,AO(AO({},o),{},{className:i,key:e.key||"".concat(n,"-").concat(r),ticks:xM(o,!0)}))},t.renderXAxis=function(e,n,r){var i=t.state.xAxisMap[e.props.xAxisId];return t.renderAxis(i,e,n,r)},t.renderYAxis=function(e,n,r){var i=t.state.yAxisMap[e.props.yAxisId];return t.renderAxis(i,e,n,r)},t.renderGrid=function(e){var n=t.state,r=n.xAxisMap,i=n.yAxisMap,o=n.offset,a=t.props,s=a.width,l=a.height,c=KS(r),u=ZC()(i,(function(e){return $C()(e.domain,SO)})),h=u||KS(i),f=e.props||{};return(0,Wn.cloneElement)(e,{key:e.key||"grid",x:HS(f.x)?f.x:o.left,y:HS(f.y)?f.y:o.top,width:HS(f.width)?f.width:o.width,height:HS(f.height)?f.height:o.height,xAxis:c,yAxis:h,offset:o,chartWidth:s,chartHeight:l,verticalCoordinatesGenerator:f.verticalCoordinatesGenerator||t.verticalCoordinatesGenerator,horizontalCoordinatesGenerator:f.horizontalCoordinatesGenerator||t.horizontalCoordinatesGenerator})},t.renderPolarGrid=function(e){var n=e.props,r=n.radialLines,i=n.polarAngles,o=n.polarRadius,a=t.state,s=a.radiusAxisMap,l=a.angleAxisMap,c=KS(s),u=KS(l),h=u.cx,f=u.cy,p=u.innerRadius,d=u.outerRadius;return(0,Wn.cloneElement)(e,{polarAngles:hE()(i)?i:xM(u,!0).map((function(e){return e.coordinate})),polarRadius:hE()(o)?o:xM(c,!0).map((function(e){return e.coordinate})),cx:h,cy:f,innerRadius:p,outerRadius:d,key:e.key||"polar-grid",radialLines:r})},t.renderLegend=function(){var e=t.state.formattedGraphicalItems,n=t.props,r=n.children,i=n.width,o=n.height,a=t.props.margin||{},s=i-(a.left||0)-(a.right||0),l=gM({children:r,formattedGraphicalItems:e,legendWidth:s,legendContent:u});if(!l)return null;var c=l.item,h=fO(l,["item"]);return(0,Wn.cloneElement)(c,AO(AO({},h),{},{chartWidth:i,chartHeight:o,margin:a,ref:function(e){t.legendInstance=e},onBBoxUpdate:t.handleLegendBBoxUpdate}))},t.renderTooltip=function(){var e=t.props.children,n=tM(e,CT.displayName);if(!n)return null;var r=t.state,i=r.isTooltipActive,o=r.activeCoordinate,a=r.activePayload,s=r.activeLabel,l=r.offset;return(0,Wn.cloneElement)(n,{viewBox:AO(AO({},l),{},{x:l.left,y:l.top}),active:i,label:s,payload:i?a:[],coordinate:o})},t.renderBrush=function(e){var n=t.props,r=n.margin,i=n.data,o=t.state,a=o.offset,s=o.dataStartIndex,l=o.dataEndIndex,c=o.updateId;return(0,Wn.cloneElement)(e,{key:e.key||"_recharts-brush",onChange:AM(t.handleBrushChange,null,e.props.onChange),data:i,x:HS(e.props.x)?e.props.x:a.left,y:HS(e.props.y)?e.props.y:a.top+a.height+a.brushBottom-(r.bottom||0),width:HS(e.props.width)?e.props.width:a.width,startIndex:s,endIndex:l,updateId:"brush-".concat(c)})},t.renderReferenceElement=function(e,n,r){if(!e)return null;var i=gO(t).clipPathId,o=t.state,a=o.xAxisMap,s=o.yAxisMap,l=o.offset,c=e.props,u=c.xAxisId,h=c.yAxisId;return(0,Wn.cloneElement)(e,{key:e.key||"".concat(n,"-").concat(r),xAxis:a[u],yAxis:s[h],viewBox:{x:l.left,y:l.top,width:l.width,height:l.height},clipPathId:i})},t.renderActivePoints=function(e){var t=e.item,n=e.activePoint,r=e.basePoint,i=e.childIndex,o=e.isRange,a=[],s=t.props.key,l=t.item.props,u=l.activeDot,h=AO(AO({index:i,dataKey:l.dataKey,cx:n.x,cy:n.y,r:4,fill:mM(t.item),strokeWidth:2,stroke:"#fff",payload:n.payload,value:n.value,key:"".concat(s,"-activePoint-").concat(i)},vE(u)),bE(u));return a.push(c.renderActiveDot(u,h)),r?a.push(c.renderActiveDot(u,AO(AO({},h),{},{cx:r.x,cy:r.y,key:"".concat(s,"-basePoint-").concat(i)}))):o&&a.push(null),a},t.renderGraphicChild=function(e,n,r){var i=t.filterFormatItem(e,n,r);if(!i)return null;var o=t.getTooltipEventType(),a=t.state,s=a.isTooltipActive,l=a.tooltipAxis,c=a.activeTooltipIndex,u=a.activeLabel,h=t.props.children,f=tM(h,CT.displayName),p=i.props,d=p.points,m=p.isRange,g=p.baseLine,y=i.item.props,v=y.activeDot,b=!y.hide&&s&&f&&v&&c>=0,_={};"axis"!==o&&f&&"click"===f.props.trigger?_={onClick:AM(t.handleItemMouseEnter,null,e.props.onCLick)}:"axis"!==o&&(_={onMouseLeave:AM(t.handleItemMouseLeave,null,e.props.onMouseLeave),onMouseEnter:AM(t.handleItemMouseEnter,null,e.props.onMouseEnter)});var x=(0,Wn.cloneElement)(e,AO(AO({},i.props),_));if(b){var A,w;if(l.dataKey&&!l.allowDuplicatedCategory){var C="function"==typeof l.dataKey?function(e){return"function"==typeof l.dataKey?l.dataKey(e.payload):null}:"payload.".concat(l.dataKey.toString());A=QS(d,C,u),w=m&&g&&QS(g,C,u)}else A=d[c],w=m&&g&&g[c];if(!sE()(A))return[x].concat(vO(t.renderActivePoints({item:i,activePoint:A,basePoint:w,childIndex:c,isRange:m})))}return m?[x,null,null]:[x,null]},t.renderCustomized=function(e,n,r){return(0,Wn.cloneElement)(e,AO(AO({key:"recharts-customized-".concat(r)},t.props),t.state))},t.uniqueChartId=sE()(e.id)?ZS("recharts"):e.id,t.clipPathId="".concat(t.uniqueChartId,"-clip"),e.throttleDelay&&(t.triggeredAfterMouseMove=QC()(t.triggeredAfterMouseMove,e.throttleDelay)),t.state={},t}return i=c,o=[{key:"componentDidMount",value:function(){sE()(this.props.syncId)||this.addListener()}},{key:"componentDidUpdate",value:function(e){sE()(e.syncId)&&!sE()(this.props.syncId)&&this.addListener(),!sE()(e.syncId)&&sE()(this.props.syncId)&&this.removeListener()}},{key:"componentWillUnmount",value:function(){this.clearDeferId(),sE()(this.props.syncId)||this.removeListener(),this.cancelThrottledTriggerAfterMouseMove()}},{key:"cancelThrottledTriggerAfterMouseMove",value:function(){"function"==typeof this.triggeredAfterMouseMove.cancel&&this.triggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var e=tM(this.props.children,CT.displayName);if(e&&cE()(e.props.shared)){var t=e.props.shared?"axis":"item";return l.indexOf(t)>=0?t:a}return a}},{key:"getMouseInfo",value:function(e){if(!this.container)return null;var t,n,r,i=function(e,t){return{chartX:Math.round(e.pageX-t.left),chartY:Math.round(e.pageY-t.top)}}(e,(t=this.container,n=t.ownerDocument.documentElement,r={top:0,left:0},void 0!==t.getBoundingClientRect&&(r=t.getBoundingClientRect()),{top:r.top+window.pageYOffset-n.clientTop,left:r.left+window.pageXOffset-n.clientLeft})),o=this.inRange(i.chartX,i.chartY);if(!o)return null;var a=this.state,s=a.xAxisMap,l=a.yAxisMap;if("axis"!==this.getTooltipEventType()&&s&&l){var c=KS(s).scale,u=KS(l).scale,h=c&&c.invert?c.invert(i.chartX):null,f=u&&u.invert?u.invert(i.chartY):null;return AO(AO({},i),{},{xValue:h,yValue:f})}var p=PO(this.state,this.props.data,this.props.layout,o);return p?AO(AO({},i),p):null}},{key:"getCursorRectangle",value:function(){var e=this.props.layout,t=this.state,n=t.activeCoordinate,r=t.offset,i=t.tooltipAxisBandSize,o=i/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?n.x-o:r.left+.5,y:"horizontal"===e?r.top+.5:n.y-o,width:"horizontal"===e?i:r.width-1,height:"horizontal"===e?r.height-1:i}}},{key:"getCursorPoints",value:function(){var e,t,n,r,i=this.props.layout,o=this.state,a=o.activeCoordinate,s=o.offset;if("horizontal"===i)n=e=a.x,t=s.top,r=s.top+s.height;else if("vertical"===i)r=t=a.y,e=s.left,n=s.left+s.width;else if(!sE()(a.cx)||!sE()(a.cy)){if("centric"!==i){var l=a.cx,c=a.cy,u=a.radius,h=a.startAngle,f=a.endAngle;return{points:[UM(l,c,u,h),UM(l,c,u,f)],cx:l,cy:c,radius:u,startAngle:h,endAngle:f}}var p=a.cx,d=a.cy,m=a.innerRadius,g=a.outerRadius,y=a.angle,v=UM(p,d,m,y),b=UM(p,d,g,y);e=v.x,t=v.y,n=b.x,r=b.y}return[{x:e,y:t},{x:n,y:r}]}},{key:"inRange",value:function(e,t){var n=this.props.layout;if("horizontal"===n||"vertical"===n){var r=this.state.offset;return e>=r.left&&e<=r.left+r.width&&t>=r.top&&t<=r.top+r.height?{x:e,y:t}:null}var i=this.state,o=i.angleAxisMap,a=i.radiusAxisMap;if(o&&a){var s=KS(o);return VM({x:e,y:t},s)}return null}},{key:"parseEventsOfWrapper",value:function(){var e=this.props.children,t=this.getTooltipEventType(),n=tM(e,CT.displayName),r={};return n&&"axis"===t&&(r="click"===n.props.trigger?{onClick:this.handleClick}:{onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd}),AO(AO({},bE(this.props,this.handleOuterEvent)),r)}},{key:"addListener",value:function(){sO.on(lO,this.handleReceiveSyncEvent),sO.setMaxListeners&&sO._maxListeners&&sO.setMaxListeners(sO._maxListeners+1)}},{key:"removeListener",value:function(){sO.removeListener(lO,this.handleReceiveSyncEvent),sO.setMaxListeners&&sO._maxListeners&&sO.setMaxListeners(sO._maxListeners-1)}},{key:"triggerSyncEvent",value:function(e){var t=this.props.syncId;sE()(t)||sO.emit(lO,t,this.uniqueChartId,e)}},{key:"applySyncEvent",value:function(e){var t=this.props,n=t.layout,r=t.syncMethod,i=this.state.updateId,o=e.dataStartIndex,a=e.dataEndIndex;if(sE()(e.dataStartIndex)&&sE()(e.dataEndIndex))if(sE()(e.activeTooltipIndex))this.setState(e);else{var s=e.chartX,l=e.chartY,c=e.activeTooltipIndex,u=this.state,h=u.offset,f=u.tooltipTicks;if(!h)return;if("function"==typeof r)c=r(f,e);else if("value"===r){c=-1;for(var d=0;d<f.length;d++)if(f[d].value===e.activeLabel){c=d;break}}var m=AO(AO({},h),{},{x:h.left,y:h.top}),g=Math.min(s,m.x+m.width),y=Math.min(l,m.y+m.height),v=f[c]&&f[c].value,b=MO(this.state,this.props.data,c),_=f[c]?{x:"horizontal"===n?f[c].coordinate:g,y:"horizontal"===n?y:f[c].coordinate}:EO;this.setState(AO(AO({},e),{},{activeLabel:v,activeCoordinate:_,activePayload:b,activeTooltipIndex:c}))}else this.setState(AO({dataStartIndex:o,dataEndIndex:a},p({props:this.props,dataStartIndex:o,dataEndIndex:a,updateId:i},this.state)))}},{key:"filterFormatItem",value:function(e,t,n){for(var r=this.state.formattedGraphicalItems,i=0,o=r.length;i<o;i++){var a=r[i];if(a.item===e||a.props.key===e.key||t===Yk(a.item.type)&&n===a.childIndex)return a}return null}},{key:"renderAxis",value:function(e,t,n,r){var i=this.props,o=i.width,a=i.height;return Wn.createElement(pI,hO({},e,{className:"recharts-".concat(e.axisType," ").concat(e.axisType),key:t.key||"".concat(n,"-").concat(r),viewBox:{x:0,y:0,width:o,height:a},ticksGenerator:this.axesTicksGenerator}))}},{key:"renderClipPath",value:function(){var e=this.clipPathId,t=this.state.offset,n=t.left,r=t.top,i=t.height,o=t.width;return Wn.createElement("defs",null,Wn.createElement("clipPath",{id:e},Wn.createElement("rect",{x:n,y:r,height:i,width:o})))}},{key:"getXScales",value:function(){var e=this.state.xAxisMap;return e?Object.entries(e).reduce((function(e,t){var n=uO(t,2),r=n[0],i=n[1];return AO(AO({},e),{},wO({},r,i.scale))}),{}):null}},{key:"getYScales",value:function(){var e=this.state.yAxisMap;return e?Object.entries(e).reduce((function(e,t){var n=uO(t,2),r=n[0],i=n[1];return AO(AO({},e),{},wO({},r,i.scale))}),{}):null}},{key:"getXScaleByAxisId",value:function(e){var t,n;return null===(t=this.state.xAxisMap)||void 0===t||null===(n=t[e])||void 0===n?void 0:n.scale}},{key:"getYScaleByAxisId",value:function(e){var t,n;return null===(t=this.state.yAxisMap)||void 0===t||null===(n=t[e])||void 0===n?void 0:n.scale}},{key:"getItemByXY",value:function(e){var t=this.state.formattedGraphicalItems;if(t&&t.length)for(var n=0,r=t.length;n<r;n++){var i=t[n],o=i.props,a=i.item,s=Yk(a.type);if("Bar"===s){var l=(o.data||[]).find((function(t){return mP(e,t)}));if(l)return{graphicalItem:i,payload:l}}else if("RadialBar"===s){var c=(o.data||[]).find((function(t){return VM(e,t)}));if(c)return{graphicalItem:i,payload:c}}}return null}},{key:"render",value:function(){var e=this;if(!nM(this))return null;var t=this.props,n=t.children,r=t.className,i=t.width,o=t.height,a=t.style,s=t.compact,l=fO(t,["children","className","width","height","style","compact"]),c=vE(l),u={CartesianGrid:{handler:this.renderGrid,once:!0},ReferenceArea:{handler:this.renderReferenceElement},ReferenceLine:{handler:this.renderReferenceElement},ReferenceDot:{handler:this.renderReferenceElement},XAxis:{handler:this.renderXAxis},YAxis:{handler:this.renderYAxis},Brush:{handler:this.renderBrush,once:!0},Bar:{handler:this.renderGraphicChild},Line:{handler:this.renderGraphicChild},Area:{handler:this.renderGraphicChild},Radar:{handler:this.renderGraphicChild},RadialBar:{handler:this.renderGraphicChild},Scatter:{handler:this.renderGraphicChild},Pie:{handler:this.renderGraphicChild},Funnel:{handler:this.renderGraphicChild},Tooltip:{handler:this.renderCursor,once:!0},PolarGrid:{handler:this.renderPolarGrid,once:!0},PolarAngleAxis:{handler:this.renderPolarAxis},PolarRadiusAxis:{handler:this.renderPolarAxis},Customized:{handler:this.renderCustomized}};if(s)return Wn.createElement(AE,hO({},c,{width:i,height:o}),this.renderClipPath(),aM(n,u));var h=this.parseEventsOfWrapper();return Wn.createElement("div",hO({className:vg()("recharts-wrapper",r),style:AO({position:"relative",cursor:"default",width:i,height:o},a)},h,{ref:function(t){e.container=t}}),Wn.createElement(AE,hO({},c,{width:i,height:o}),this.renderClipPath(),aM(n,u)),this.renderLegend(),this.renderTooltip())}}],o&&pO(i.prototype,o),c}(Wn.Component),t.displayName=r,t.defaultProps=AO({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f),t.getDerivedStateFromProps=function(e,t){var n=e.data,r=e.children,i=e.width,o=e.height,a=e.layout,s=e.stackOffset,l=e.margin;if(sE()(t.updateId)){var c=OO(e);return AO(AO(AO({},c),{},{updateId:0},p(AO(AO({props:e},c),{},{updateId:0}),t)),{},{prevData:n,prevWidth:i,prevHeight:o,prevLayout:a,prevStackOffset:s,prevMargin:l,prevChildren:r})}if(n!==t.prevData||i!==t.prevWidth||o!==t.prevHeight||a!==t.prevLayout||s!==t.prevStackOffset||!$k(l,t.prevMargin)){var u=OO(e),h={chartX:t.chartX,chartY:t.chartY,isTooltipActive:t.isTooltipActive},f=AO(AO({},PO(t,n,a)),{},{updateId:t.updateId+1}),d=AO(AO(AO({},u),h),f);return AO(AO(AO({},d),p(AO({props:e},d),t)),{},{prevData:n,prevWidth:i,prevHeight:o,prevLayout:a,prevStackOffset:s,prevMargin:l,prevChildren:r})}if(!iM(r,t.prevChildren)){var m=sE()(n)?t.updateId+1:t.updateId;return AO(AO({updateId:m},p(AO(AO({props:e},t),{},{updateId:m}),t)),{},{prevChildren:r})}return null},t.renderActiveDot=function(e,t){var n;return n=(0,Wn.isValidElement)(e)?(0,Wn.cloneElement)(e,t):KC()(e)?e(t):Wn.createElement(aP,t),Wn.createElement(CE,{className:"recharts-active-dot",key:t.key},n)},n}({chartName:"PieChart",GraphicalChild:WD,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:oD},{axisType:"radiusAxis",AxisComp:xD}],formatAxisMap:function(t,n,r,i,o){var a=t.width,s=t.height,l=t.startAngle,c=t.endAngle,u=YS(t.cx,a,a/2),h=YS(t.cy,s,s/2),f=NM(a,s,r),p=YS(t.innerRadius,f,0),d=YS(t.outerRadius,f,.8*f);return Object.keys(n).reduce((function(t,r){var a,s,f,m=n[r],g=m.domain,y=m.reversed;if(sE()(m.range))"angleAxis"===i?a=[l,c]:"radiusAxis"===i&&(a=[p,d]),y&&(a=[a[1],a[0]]);else{var v=(s=a=m.range,f=2,function(e){if(Array.isArray(e))return e}(s)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(s,f)||function(e,t){if(e){if("string"==typeof e)return LM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?LM(e,t):void 0}}(s,f)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());l=v[0],c=v[1]}var b=function(t,n,r){var i=t.scale,o=t.type,a=t.layout,s=t.axisType;if("auto"===i)return"radial"===a&&"radiusAxis"===s?{scale:Gs(),realScaleType:"band"}:"radial"===a&&"angleAxis"===s?{scale:zl(),realScaleType:"linear"}:"category"===o&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0)?{scale:Ws(),realScaleType:"point"}:"category"===o?{scale:Gs(),realScaleType:"band"}:{scale:zl(),realScaleType:"linear"};if(GS()(i)){var l="scale".concat(ST()(i));return{scale:(e[l]||Ws)(),realScaleType:e[l]?l:"point"}}return KC()(i)?{scale:i}:{scale:Ws(),realScaleType:"point"}}(m,o),_=b.realScaleType,x=b.scale;x.domain(g).range(a),function(e){var t=e.domain();if(t&&!(t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-wM,o=Math.max(r[0],r[1])+wM,a=e(t[0]),s=e(t[n-1]);(a<i||a>o||s<i||s>o)&&e.domain([t[0],t[n-1]])}}(x);var A=function(e,t){var n=t.realScaleType,r=t.type,i=t.tickCount,o=t.originalDomain,a=t.allowDecimals,s=n||t.scale;if("auto"!==s&&"linear"!==s)return null;if(i&&"number"===r&&o&&("auto"===o[0]||"auto"===o[1])){var l=e.domain();if(!l.length)return null;var c=jk(l,i,a);return e.domain(function(e,t){return"number"===t?[pk()(e),hk()(e)]:e}(c,r)),{niceTicks:c}}if(i&&"number"===r){var u=e.domain();return{niceTicks:Vk(u,i,a)}}return null}(x,DM(DM({},m),{},{realScaleType:_})),w=DM(DM(DM({},m),A),{},{range:a,radius:d,realScaleType:_,scale:x,cx:u,cy:h,innerRadius:p,outerRadius:d,startAngle:l,endAngle:c});return DM(DM({},t),{},zM({},r,w))}),{})},defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});function $D(e,t,n){if(t){var r;switch(t){case"int":r=parseInt(e);break;case"x100int":r=parseInt(100*e);break;case"fix2x100":r=parseInt(100*Number(e).toFixed(2));break;case"1000fix1":r=Number(e/1e3).toFixed(1);break;case"1000fix2":r=(Number(e)/1e3).toFixed(2);break;case"fix1":r=Number(e).toFixed(1);break;case"boolDot":r=e?"":"";break;case"bool":r=e?"true":"false";break;default:return e}return n?r+n:r}return n?e+n:e}function XD(e){return XD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},XD(e)}function ZD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function YD(e,t,n){return t&&ZD(e.prototype,t),n&&ZD(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function KD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JD(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&QD(e,t)}function QD(e,t){return QD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},QD(e,t)}function ez(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=rz(e);if(t){var i=rz(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return tz(this,n)}}function tz(e,t){if(t&&("object"===XD(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return nz(e)}function nz(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rz(e){return rz=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},rz(e)}function iz(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oz=function(e,t,n){return zl().domain(az(t,n,e.length)).range(e)},az=function(e,t,n){for(var r=[],i=(t-e)/(n-1),o=0;o<n-1;)r.push(e+o*i),o++;return r.push(t),r},sz=function(e){JD(n,e);var t=ez(n);function n(e){var r;return KD(this,n),iz(nz(r=t.call(this,e)),"clearCanvas",(function(e,t,n){var r=document.getElementById(e);r&&r.getContext("2d").clearRect(0,0,2*t,2*n)})),iz(nz(r),"renderCanvas",(function(e,t,n,i,o,a){var s=document.getElementById(e),l=r.state.data;if(!s)return console.log("AsyncXYPlot canvas not found: "+e),null;if(!t||!l)return console.log("AsyncXYPlot missing data."),null;var c=2*n/(l.x.max-l.x.min),u=2*i/(l.y.max-l.y.min),h=l.x.min,f=(l.x.max,l.y.min),p=(l.y.max,s.getContext("2d"));o=o||1,s.width=2*n,s.height=2*i,s.style.width=n+"px",s.style.height=i+"px",p.clearRect(0,0,2*n,2*i),p.translate(0,2*i),p.scale(1,-1);var d=null,m=0;return function e(){for(var n=m,r=t.x.data.length;n<r;n++){var i=a(t.value.data[n]);if(d!==i&&(d=i,p.fillStyle=d),p.fillRect((t.x.data[n]-h)*c,(t.y.data[n]-f)*u,o,o),n-m>=15e3&&n!==r){m=n+1,setTimeout(e,0);break}}}(),s})),iz(nz(r),"componentWillReceiveProps",(function(e){r.setState({filterData:e.filterData})})),iz(nz(r),"componentDidUpdate",(function(){var e=r.state,t=e.width,n=e.height,i=(e.labels,e.data),o=e.filterData;if(o){var a=oz(r.state.colours,i.value.min,i.value.max);r.renderCanvas(r.props.id+"-filter-canvas",o,t,n,4,a)}else r.clearCanvas(r.props.id+"-filter-canvas",t,n)})),iz(nz(r),"componentDidMount",(function(){var e=r.state,t=e.width,n=e.height,i=(e.labels,e.data),o=e.filterData;if(!i)return null;var a=oz(r.state.colours,i.value.min,i.value.max);r.renderCanvas(r.props.id+"-canvas",i,t,n,1,a),o&&r.renderCanvas(r.props.id+"-filter-canvas",o,t,n,4,a)})),iz(nz(r),"onMouseMove",(function(e){var t=r.state,n=t.width,i=t.height,o=t.data,a=2*n/(o.x.max-o.x.min),s=2*i/(o.y.max-o.y.min),l=i-(e.nativeEvent.offsetY<0?0:e.nativeEvent.offsetY),c=e.nativeEvent.offsetX<0?0:e.nativeEvent.offsetX,u=Math.round(c/a*2+o.x.min),h=Math.round(l/s*2+o.y.min);r.setState({tooltip:{x:u,y:h}})})),iz(nz(r),"onMouseOut",(function(e){r.setState({tooltip:null})})),iz(nz(r),"render",(function(){var e,t=r.state,n=t.width,i=t.height,o=t.labels,a=t.tooltip,s=t.filterData;return e=o&&a?Wn.createElement("dl",{className:"xyplot-tooltip"},Wn.createElement("dt",null,o.x),Wn.createElement("dd",null,a.x),Wn.createElement("dt",null,o.y),Wn.createElement("dd",null,a.y)):null,Wn.createElement("div",{className:"xyplot",id:r.props.id},e,Wn.createElement("canvas",{style:{opacity:s?1:0,display:s?"initial":"none"},className:"xyplot-filter",height:i,width:n,id:r.props.id+"-filter-canvas",viewBox:"0 0 "+n+" "+i}),Wn.createElement("canvas",{onMouseMove:r.onMouseMove,onMouseOut:r.onMouseOut,style:{opacity:s?.3:1},height:i,width:n,id:r.props.id+"-canvas",viewBox:"0 0 "+n+" "+i}))})),r.state={width:e.width?e.width:415,height:e.height?e.height:300,colours:e.colours?e.colours.slice().reverse():Pn.RdYlGn.slice().reverse(),data:e.data?e.data:null,filterData:e.filterData?e.filterData:null,labels:e.labels?e.labels:{x:null,y:null},tooltip:null},r}return YD(n)}(Wn.Component),lz=function(e){JD(n,e);var t=ez(n);function n(e){var r;return KD(this,n),iz(nz(r=t.call(this,e)),"componentDidMount",(function(){var e=r.state,t=e.height,n=e.width,i=e.steps,o=e.colours,a=e.data,s=tf("#"+r.props.id);if(!s)return console.log("GradientLegend: Could not find #"+r.props.id+"."),null;var l=gi(zl().range([0,n]).domain([a[0],a[1]])).ticks(i);s.append("g").attr("class","xyplot-axis").attr("transform","translate(7,5)").call(l);var c=function(){return oi(arguments)}(az(0,100,o.length).map((function(e){return Math.round(e)+"%"})),o),u=s.append("defs").append("linearGradient").attr("id",r.props.id+"-xyplot-gradient").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").attr("spreadMethod","pad");c.forEach((function(e){u.append("stop").attr("offset",e[0]).attr("stop-color",e[1]).attr("stop-opacity",1)})),s.append("rect").attr("x1",0).attr("y1",0).attr("width",n).attr("height",t).style("fill","url(#"+r.props.id+"-xyplot-gradient)")})),iz(nz(r),"render",(function(){var e=r.state,t=e.width,n=e.height,i=e.title;return Wn.createElement("div",{className:"gradient-legend"},Wn.createElement("p",{className:"gradient-legend-title"},i),Wn.createElement("svg",{height:n+20,width:t,id:r.props.id}))})),r.state={width:e.width?e.width:415,height:e.height?e.height:5,colours:e.colours?e.colours:Pn.RdYlGn,steps:e.steps?e.steps:5,data:e.data.value?[e.data.value.min,e.data.value.max]:[0,1],title:e.title?e.title:""},r}return YD(n)}(Wn.Component);function cz(e){return cz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cz(e)}function uz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hz(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uz(Object(n),!0).forEach((function(t){Az(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uz(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fz(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mz(e,t,n){return t&&dz(e.prototype,t),n&&dz(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function gz(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yz(e,t)}function yz(e,t){return yz=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},yz(e,t)}function vz(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xz(e);if(t){var i=xz(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bz(this,n)}}function bz(e,t){if(t&&("object"===cz(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _z(e)}function _z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xz(e){return xz=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},xz(e)}function Az(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var wz=function(e){gz(n,e);var t=vz(n);function n(e){var r;return pz(this,n),Az(_z(r=t.call(this,e)),"onClick",(function(e){var t=r.props,n=t.panelIndex,i=t.panelTab,o=t.ctx,a=t.targetQuery,s=t.targetView;r.props.actions.socketRequestLatest({request:{ctx:o+Date.now(),type:"kdbquery",query:a,params:[e]},onLoading:{type:"ADD_PANEL",payload:{index:n+1,panel:{width:23,id:"loading",loading:1}}},onSuccess:{type:"UPDATE_PANEL",payload:{index:n+1,tab:i,id:e+"_report",view:s,loading:0}},onError:{type:"UPDATE_PANEL",payload:{index:n+1,tab:i,id:"loading_error",loading:2}}}),r.setState({active:e})})),Az(_z(r),"pageRequest",(function(e){var t=r.state,n=t.onLoading,i=t.onError,o=r.props,a=o.panelIndex,s=o.panelTab,l=o.ctx,c=o.paginationQuery,u=(o.targetView,o.viewId);r.props.actions.socketRequest({request:{ctx:l+"page"+Date.now(),type:"kdbquery",query:c,params:e},onLoading:n,onSuccess:{type:"UPDATE_PANEL",payload:{tab:s,index:a,id:"p"+e[0]+(e[1]&&e[1][0]?e[1][0][0]+e[1][0][1]:""),view:u,loading:0}},onError:i})})),Az(_z(r),"onNext",(function(){r.pageRequest([r.state.requestIndex+1,r.state.sorting]),r.setState({requestIndex:r.state.requestIndex+1,loading:!0,reset:!0})})),Az(_z(r),"onPrev",(function(){var e=r.state.requestIndex-1;e<0&&(e=0),r.pageRequest([e,r.state.sorting]),r.setState({requestIndex:e,loading:!0,reset:!0})})),Az(_z(r),"onSort",(function(e){var t=[[e,r.state.sorting&&r.state.sorting[0]&&r.state.sorting[0][0]===e&&"asc"===r.state.sorting[0][1]?"desc":"asc"]];r.pageRequest([r.state.requestIndex,t]),r.setState({sorting:t,loading:!0,reset:!0})})),Az(_z(r),"render",(function(){if(0===r.props.data.length)return Wn.createElement("p",null,"No items found");var e=r.state,t=e.requestIndex,n=e.pageSize,i=(e.sorting,e.active),o=e.loading,a=t*n,s=r.props,l=s.idField,c=s.fields,u=s.data;return Wn.createElement("div",null,o?Wn.createElement("div",{className:"loading-overlay"},Wn.createElement(Bm,null)):null,Wn.createElement("table",{className:"sortable-table"},Wn.createElement("thead",null,Wn.createElement("tr",null,c.map((function(e){return Wn.createElement(Cz,{key:e.name,field:e.name,onClick:r.onSort,style:e.style,title:e.title,sortable:e.sortable,sortFields:r.state.sorting})})))),Wn.createElement("tbody",null,u.map((function(e,t){return Wn.createElement(Ez,{key:e[l],id:"ll_"+t,active:e[l]===i,row:e,fields:c,onClick:r.onClick.bind(null,e[l])})})))),Wn.createElement("div",{className:"paging"},"Showing ",a+1," of ",a+n,0===a?Wn.createElement("button",{className:"paging-button paging-button-disabled"},"<"," prev"):Wn.createElement("button",{className:"paging-button",onClick:r.onPrev},"<"," prev"),u.length>=n?Wn.createElement("button",{className:"paging-button",onClick:r.onNext},"next ",">"):Wn.createElement("button",{className:"paging-button paging-button-disabled"},"next ",">")))})),r.state={requestIndex:0,sorting:[[e.sortBy,"desc"]],loading:!1,reset:!1,pageSize:150,active:""},r}return mz(n,[{key:"componentWillReceiveProps",value:function(){this.state.loading&&this.setState({loading:!1})}}]),n}(Wn.Component),Cz=function(e){gz(n,e);var t=vz(n);function n(){return pz(this,n),t.apply(this,arguments)}return mz(n,[{key:"render",value:function(){var e,t,n,r=this.props,i=r.field,o=r.title,a=r.onClick,s=r.sortable,l=r.style,c=(r.className,r.sortFields),u=(t=c?c[0]:[null,null],n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,n)||function(e,t){if(e){if("string"==typeof e)return fz(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fz(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),h=u[0],f=u[1];return s&&(e=Wn.createElement("span",{className:"table-cell-sort-icon"},Wn.createElement(Pm(),{name:h===i?"sort-"+f:"sort"}))),Wn.createElement("th",{style:l,onClick:a.bind(null,i),className:s?"pointer table-cell-sortable":null},o,e)}}]),n}(Wn.Component),Ez=function(e){gz(n,e);var t=vz(n);function n(e){var r;return pz(this,n),Az(_z(r=t.call(this,e)),"render",(function(){var e=r.props,t=e.row,n=e.id,i=e.active,o=e.fields;return Wn.createElement("tr",{onClick:r.props.onClick,id:n,className:i?"active":""},o.map((function(e){return Wn.createElement("td",{key:e.name+"_r",style:e.style},$D(t[e.name],e.type,e.unit))})))})),r.state={width:0},r}return mz(n)}(Wn.Component),Sz=function(e){gz(n,e);var t=vz(n);function n(e){var r;return pz(this,n),Az(_z(r=t.call(this,e)),"onClick",(function(e,t){var n=r.props,i=(n.data,n.actions),o=n.panelIndex,a=n.panelTab,s=n.ctx,l=n.targetQuery,c=n.targetView;n.idfield,i.socketRequestLatest({request:{ctx:s+Date.now(),type:"kdbquery",query:l,params:[e]},onLoading:{type:"ADD_PANEL",payload:{index:o+1,panel:{id:"loading",loading:1}}},onSuccess:{type:"UPDATE_PANEL",payload:{index:o+1,tab:a,id:e,view:c}},onError:{type:"UPDATE_PANEL",payload:{index:o+1,tab:a,id:"loading_error",loading:2}}}),r.setState({active:e})})),r.state={active:""},r}return mz(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.data,r=t.idField,i=t.scoreField,o=t.fields,a=this.state.active;return Wn.createElement("div",null,Wn.createElement("table",{className:"score-table"},Wn.createElement("thead",null,Wn.createElement("tr",null,Wn.createElement("th",{className:"score-field"}," score "),o.map((function(e){return Wn.createElement("th",{key:e.title},e.title)})))),Wn.createElement("tbody",null,n.map((function(t,n){var s=100*t[i],l=s<50?"#5effa9":"#ed492d",c=Zd()(l,10),u=parseInt(s);return[Wn.createElement("tr",null,Wn.createElement("td",{className:"score-row-stripe",colSpan:o.length+1,style:{background:c}},Wn.createElement("div",{style:{width:u+"%",background:l,height:"100%"}}))),Wn.createElement(Tz,{key:t[r],id:"ll_"+n,score:u,background:c,color:l,active:t[r]===a,row:t,fields:o,scoreField:i,onClick:e.onClick.bind(null,t[r])})]})))))}}]),n}(Wn.Component),Tz=function(e){gz(n,e);var t=vz(n);function n(e){var r;return pz(this,n),Az(_z(r=t.call(this,e)),"componentDidMount",(function(){var e=r.props,t=e.scoreField,n=e.row,i=_z(r);r.timeout=setTimeout((function(){var e=100*n[t];parseFloat(e)>100&&(e="100%"),i.setState({width:e+"%"})}),10)})),Az(_z(r),"render",(function(){var e=r.props,t=e.row,n=e.fields,i=(e.onClick,e.animate,e.active),o=e.score,a=e.color;return e.background,Wn.createElement("tr",{onClick:r.props.onClick,className:i?"score-row active":"score-row"},Wn.createElement("th",{style:{color:a},className:"score-field score-row-th"},o),n.map((function(e){return Wn.createElement("td",{key:e.name+"_r",style:e.style},$D(t[e.name],e.type,e.unit))})))})),r.state={width:0},r}return mz(n,[{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}}]),n}(Wn.Component),Bz=function(e){gz(n,e);var t=vz(n);function n(e){var r;return pz(this,n),Az(_z(r=t.call(this,e)),"dslamRequest",(function(e){var t=r.state,n=t.onLoading,i=t.onError;_z(r),r.props.actions.socketRequest({request:{ctx:"actbitrateds_vs_len",type:"kdbquery",query:"actbitrateds_vs_len",params:e},onLoading:n,onSuccess:{type:"UPDATE_BITRATE_PLOT",payload:{}},onError:i})})),Az(_z(r),"componentWillReceiveProps",(function(e){var t=e.mapItem,n=e.filterData;if(t&&t.id!==r.state.mapItemId){if("dslam"===t.layer)return r.dslamRequest([t.id]),r.setState({mapItemId:t.id}),null;r.setState({mapItemId:null,filterData:null})}else n&&r.state.filterData!==n&&r.setState({filterData:n})})),r.state={width:e.width?e.width:300,height:230,data:{x:e.data.looplenestmax,y:e.data.actbitrateds,value:e.data.rehab_score},filterData:e.filterData,loading:!1,labels:{x:"length",y:"actual bitrate"},colours:Pn.RdYlGn.slice().reverse(),id:e.id?e.id:"bitrate-xyplot",mapItemId:null},r}return mz(n,[{key:"render",value:function(){var e,t=this.state,n=t.width,r=t.height,i=t.data,o=(t.id,t.filterData),a=t.colours,s=t.labels;return e=o?{x:o?o.looplenestmax:[],y:o?o.actbitrateds:[],value:o?o.rehab_score:[]}:null,Wn.createElement("div",{className:"xyplot-bitrate"},Wn.createElement(sz,{id:"bitrate-xyplot",labels:s,data:i,filterData:e,width:n,height:r,colours:a}),Wn.createElement(lz,{id:"bitrate-legend",data:{value:i.rehab_score},title:"rehab score",width:n-5,height:4,colours:a}))}}]),n}(Wn.Component);function kz(e){return kz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kz(e)}function Mz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pz(e,t){return Pz=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Pz(e,t)}function Iz(e,t){if(t&&("object"===kz(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Oz(e){return Oz=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Oz(e)}var Dz=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pz(e,t)}(a,e);var t,n,r,i,o=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Oz(t);if(n){var i=Oz(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Iz(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).state={isImage:!1,urls:[]},t}return r=a,i=[{key:"componentDidMount",value:function(){var e=this.props,t=e.graphs,n=e.width,r=e.panelIndex,i=this.state,o=(i.start,i.end,[]),a=[];if(t&&t.length>0){var s=t[0].path[0].x,l=t[0].path[t[0].path.length-1].x;t.map((function(e){o.push(Math.min.apply(Math,e.path.map((function(e){return e.y})))),a.push(Math.max.apply(Math,e.path.map((function(e){return e.y}))))}));var c=Math.min.apply(Math,o),u=Math.max.apply(Math,a),h=zl().domain([s,l]).range([0,n]),f=zl().domain([c,u]).range([60,0]);t.map((function(e){var t=document.getElementById("cnv_sml_"+e.id+r),n=t.getContext("2d");e.path.map((function(e){n.beginPath(),n.arc(h(e.x),f(e.y),1,0,2*Math.PI,!1),n.fillStyle=Zd()(Pn.BrBG[Math.round(f(e.y)/60*9)],7),n.fill()})),t.toDataURL("image/jpeg",1)})),this.state.isIamge||this.setState({})}}},{key:"render",value:function(){var e,t,n=this,r=this.props,i=r.graphs,o=r.width,a=r.xAxis,s=r.yAxis,l=r.actions,c=r.panelIndex;return i&&i.length>0&&(e=i[0].path[0].x,t=i[0].path[i[0].path.length-1].x),Wn.createElement("div",{id:"grs"},i&&i.map((function(n){return Wn.createElement("div",{key:"cnv_cnt"+n.id,id:"cnv_"+n.id},Wn.createElement("div",null,Wn.createElement("p",{style:{float:"left"}},n.id),Wn.createElement("p",{style:{float:"right"}},n.timestamp),Wn.createElement("div",{style:{clear:"both"}})),Wn.createElement("canvas",{id:"cnv_sml_"+n.id+c,className:"cnv-sml pointer",width:o,height:"80",onClick:function(){l.addPanel({index:c+1,panel:{id:n.id+"_hlog_panel",lock:0,widgets:[{type:"ScatterPlot",props:{id:"histogram_festival",width:o,graph:n,start:e,end:t,xAxis:a,yAxis:s}}]}})}}))})),0===i.length&&Wn.createElement("p",null," No hlogs. "),this.state.inspectGraph&&Wn.createElement(nm,{onClose:function(){n.setState({inspectGraph:!1})},header:this.props.id,content:Wn.createElement(Tm,{graph:this.state.selectedGraph,start:this.state.start,end:this.state.end,xAxis:this.props.xAxis,yAxis:this.props.yAxis})}))}}],i&&Mz(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),a}(Wn.Component);function zz(e){return zz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zz(e)}function Lz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rz(e,t){return Rz=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Rz(e,t)}function Fz(e,t){if(t&&("object"===zz(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Uz(e)}function Uz(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nz(e){return Nz=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Nz(e)}function jz(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Wn.Component;var Vz=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rz(e,t)}(l,e);var t,n,r,i,a,s=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Nz(t);if(n){var i=Nz(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Fz(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),jz(Uz(t=s.call(this,e)),"componentDidUpdate",(function(){var e=t.props.values;if(e){var n=tf("#"+t.props.id);n.selectAll("*").remove();var r=t.state,i=r.width,o=r.height,a=Gs().rangeRound([0,i]).padding(.4),s=zl().rangeRound([o,0]);t.x=a,t.y=s;var l=n.append("g"),c=Uz(t);a.domain(e.map((function(e){return e.x}))),s.domain([0,ri(e,(function(e){return e.y1}))]),l.selectAll(".bar").data(e).enter().append("rect").attr("class","h-rect").attr("style",(function(e){return"fill: "+Pn.cool[Math.round(s(e.y1)/o*9)]})).attr("x",(function(e){return a(e.x)})).attr("width",a.bandwidth()).attr("y",(function(e){return s(e.y1)})).attr("height",(function(e){return o-s(e.y1)})).on("mouseover",(function(e,t){c.onChange(e,t)}))}})),jz(Uz(t),"onChange",(function(e,t){})),jz(Uz(t),"render",(function(){var e=t.state,n=e.width,r=e.height+2*e.gap;return Wn.createElement("div",{className:"histogram",style:{height:r+20}},Wn.createElement("svg",{height:r,width:n,id:t.props.id,className:"inspector-svg",viewBox:"0 0 "+n+" "+r,preserveAspectRatio:"xMinYMin meet"}))})),t.state={labelPosition:0,label:"",area:null,width:e.width?e.width:415,height:e.height?e.height:100,gap:2},t.clock=new o.SUY(!1),t.animationRequest=null,t}return r=l,i&&Lz(r.prototype,i),a&&Lz(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r}(Wn.Component);L_("bars",(function(e){var t=e.width,n=e.left,r=e.right;return Wn.createElement("div",{className:"two-charts"},Wn.createElement("div",null,Wn.createElement(km,{id:n.id,width:t/2,height:100,label:n.label,values:n.values})),Wn.createElement("div",null,Wn.createElement(km,{id:r.id,width:t/2,height:100,label:r.label,values:r.values})))})),L_("Incidents",(function(e){var t=e.data,n=e.actions,r=e.panelIndex,i=e.panelTab,o=function(e){n.addPanel({index:r+1,tab:i,panel:{id:e.incident_number,widgets:[{subtitle:e.incident_number,type:"VerticalTable",props:{fixedLayout:!0,data:{date:new Date(e.date).toUTCString(),"incident no.":e.incident_number,"last modified":new Date(e.last_modified_date).toUTCString(),"AVC ID":e.avc_id,"reported date":e.reported_date?new Date(e.reported_date).toUTCString():"null","closed date":e.closed_date?new Date(e.closed_date).toUTCString():"null",status:e.status,"statud id":e.status_id}}},{type:"VerticalTable",props:{fixedLayout:!0,data:{"product categorization tier 1":e.product_categorization_tier_1,"categorization tier 2":e.categorization_tier_2,"resolution category":e.resolution_category,"resolution category tier 2":e.resolution_category_tier_2,"resolution category tier 3":e.resolution_category_tier_3}}}]}})};return 0==t.length?Wn.createElement("p",null," No incidents "):Wn.createElement("table",{className:"vertical-table"},Wn.createElement("tbody",null,t.map((function(e){var t=new Date(e.last_modified_date);return Wn.createElement("tr",{key:e.incident_number,className:"pointer",onClick:o.bind(null,e)},Wn.createElement("th",{style:{color:"#e6f4d7",background:Zd()("#e6f4d7",15)}},e.incident_number),Wn.createElement("td",{style:{color:"#e6f4d7",background:Zd()("#e6f4d7",7)}},t.toUTCString()))}))))})),L_("LunaRing",(function(e){var t=e.data,n=e.width||250;return Wn.createElement(HD,{width:n,height:140,margin:{top:10,bottom:20}},Wn.createElement(WD,{data:t,cx:n/2,cy:50,innerRadius:10,outerRadius:15,stroke:"none",label:!0}),Wn.createElement(CB,null))})),L_("RectChart",(function(e){var t=e.width,n=e.data,r=(zl().domain([0,ri(n,(function(e){return e.value}))]).range([0,t]),0),i=t-0,o=(n.length,function(e,t){let n=0;if(void 0===t)for(let t of e)(t=+t)&&(n+=t);else{let r=-1;for(let i of e)(i=+t(i,++r))&&(n+=i)}return n}(n,(function(e){return e.value})));return Wn.createElement("div",{style:{padding:"0px"}},Wn.createElement("svg",{height:10,width:i,className:"inspector-svg",viewBox:"0 0 "+i+" 10",preserveAspectRatio:"xMinYMin meet"},n.map((function(e,t){var n=e.value/o*i,a=Wn.createElement("rect",{key:t,x:r,width:n,y:0,height:10,style:{fill:e.fill,stroke:e.stroke}});return r+=n,a}))),Wn.createElement("div",{style:{display:"flex"}},n.map((function(e,t){return Wn.createElement("p",{key:"dl_"+t,style:{marginRight:"5px",color:e.fill}},Wn.createElement(Pm(),{name:"square"})," ",e.name+": "+e.value)}))))})),L_("ScoreTable",Sz),L_("SummaryCard",(function(e){var t=e.data,n=e.fields;return e.actions,Wn.createElement("table",{className:"vertical-table",style:{tableLayout:"fixed"}},Wn.createElement("tbody",null,n.map((function(e){return Wn.createElement("tr",{key:e.key},Wn.createElement("th",{style:hz({width:"30%"},e.style)},e.label),Wn.createElement("td",{style:e.style},$D(t[e.key],e.type,e.unit)))}))))})),L_("Table",wz),L_("HlogsReport",Dz),Vd((function(e){return{values:e.map.histo1}}))(Vz),L_("mapBitratePlot",Vd((function(e){return{mapItem:e.map.mapItem,filterData:e.map.filterData}}))(Bz));var Gz=function(e){return[{type:"Search"}]};Hm("default",Gz);var qz=function(e){return[{type:"mapBitratePlot",subtitle:"actual line rate vs length",props:{data:e.fetchResult}}]},Wz=function(e){var t=e.fetchResult[0],n=[{subtitle:e.id,type:"TextWidget",props:{text:"Rehab score: "+t.rehab_score}},{type:"VerticalTable",props:{fixedLayout:!0,data:{"Technology type":t.access_service_tech_type,"CVC type":t.cvc_type,"CVC ID":t.cvc_id,"CSA ID":t.csa_id,"Customer ID":t.customer_id,"Location ID":t.avc_location_code,"Subscriber name":t.subscriber_name,"Bandwidth profile":t.avc_bandwidth_profile}}},{type:"VerticalTable",props:{fixedLayout:!0,data:{"DSLAM Physical Name":t.dslam_physical_name,"DSLAM Logical Name":t.logical_name,"DSLAM Port":t.port,"DPBO Profile":t.dpboprofile,"Line length est. min":t.looplenestmin,"Line length est. max":t.looplenestmax,"CPI ID":t.cpi_id,"Below PIR":!0===t.rehab_candidate?"true":"false","Date of test":new Date(t.test_date).toDateString(),"First data date":new Date(t.first_data_date).toDateString()}}},{subtitle:"Line bitrates",type:"VerticalTable",props:{data:{"Actual Bitrate (downstream)":t.line[0]?(Number(t.line[0].actbitrateds)/1e3).toFixed(2):"","Attainable Bitrate (downstream)":t.line[0]?(Number(t.line[0].attbitrateds)/1e3).toFixed(2):"","Actual Bitrate (upstream)":t.line[0]?(Number(t.line[0].actbitrateus)/1e3).toFixed(2):"","Attainable Bitrate (upstream)":t.line[0]?(Number(t.line[0].attbitrateus)/1e3).toFixed(2):""}}},{subtitle:"Incidents",type:"Incidents",props:{data:t.incidents}},{type:"ButtonWidget",props:{actionCreator:"panMapTo",label:"Show AVC",payload:{lat:t.avc_lat,lng:t.avc_lng}}}];return n.concat(Xz(t.hlogs))};Hm("avc",Wz);var Hz=function(e){var t=e.fetchResult[0],n=[];return n.push({subtitle:t.logical_name,type:"TextWidget",props:{text:"Physical name: "+t.physical_name}},{type:"TextWidget",props:{text:"Node type: "+t.node_type}},{type:"SummaryCard",props:{data:t,fields:[{key:"incidents",label:"incidents",style:{color:Zd()("#e6f4d7",80)}},{key:"importance",label:"ranking score",type:"int",style:{color:Zd()("#5effa9",80)}},{key:"med_score",label:"median score",type:"x100int"},{key:"report_avc_count",label:"Number of services"},{key:"dpbo",label:"DPBO",type:"bool"}]}},{type:"bars",subtitle:"AVC count",props:{left:{id:"avcServiceRate",label:"by service rate",values:Object.keys(t.avc_count_by_service_rate).map((function(e){return{label:e,value:t.avc_count_by_service_rate[e]}}))},right:{id:"avcsBelAtt",label:"below attainable (Mbps)",values:Object.keys(t.avc_count_below_attainable).map((function(e){return{label:e,value:t.avc_count_below_attainable[e]}}))}}},{type:"ButtonWidget",props:{actionCreator:"panMapTo",label:"Show DSLAM",payload:{lat:t.lat,lng:t.lon}}},{type:"RectChart",props:{data:[{stroke:"none",name:"faulty port count",value:t.faulty_port_count,fill:"#ed492d"},{stroke:"none",name:"assigned port count",value:t.assigned_port_count,fill:"#5effa9"},{stroke:"none",name:"free port count",value:t.free_port_count,fill:"#d1dadb"}]}},{subtitle:"lines by below PIR",type:"TextWidget",props:{text:""}},{type:"LunaRing",props:{data:[{stroke:"#0f1111",name:"nominal",value:t.lines_below_pir[1],fill:"#d1dadb"},{stroke:"#0f1111",name:"Below PIR",value:t.lines_below_pir[0],fill:"#2c3a3a"}]}},{subtitle:"AVC Report",type:"ExportToCSVButton",props:{data:t.avc_report,filename:t.logical_name+"_avc_report_"+Math.floor(Date.now()/1e3),fields:["avc_id","rehab_score","model_expected","model_deviation","incidents"],label:"Export to CSV"}},{type:"ScoreTable",props:{data:t.avc_report,targetView:Wz,targetQuery:"avc_info",idField:"avc_id",ctx:"avc",scoreField:"rehab_score",fields:[{name:"avc_id",title:"id"},{name:"model_expected",title:"thresh.",type:"1000fix1"},{name:"model_deviation",title:"dev.",type:"1000fix1"},{name:"attbitrateds",title:"att. BR",type:"1000fix2"},{name:"rehab_candidate",title:"< PIR",type:"boolDot",style:{textAlign:"center"}},{name:"incidents",title:"inc.",style:{color:"#e6f4d7"}}]}}),n.concat(Xz(t.hlogs))};Hm("dslam",Hz);var $z=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Xz=function(e){var t=[];return e&&e.map((function(e){var n=e.hlog,r=[],i=e.timestamp.split("D"),o=i[0].split("-"),a=i[1].split(".");a=a[0].split(":");for(var s=0;s<n.length;s+=2)s>n.length-2||r.push({x:n[s],y:n[s+1]});t.push({id:e.line,path:r,timestamp:o[2]+"-"+$z[parseInt(o[1])-1]+"-"+o[0]+" "+a[0]+":"+a[1]})})),[{subtitle:"hlogs",type:"HlogsReport",props:{graphs:t,id:e.id}}]},Zz=function(e){return[{type:"Table",subtitle:"DSLAM List by Services below PIR",props:{data:e.fetchResult,ctx:"dslam",targetQuery:"dslam_info",targetView:Hz,idField:"logical_name",viewId:"populationReport",paginationQuery:"dslam_report_paginated",sortBy:"importance",fields:[{name:"logical_name",title:"dslam",sortable:!0},{name:"importance",title:"ranking",sortable:!0,type:"int",style:{color:Zd()("#5effa9",90)}},{name:"avc_count",title:"avcs",sortable:!0},{name:"avc_underperforming_count",title:"below PIR",sortable:!0},{name:"proportion_bad",title:"bad",sortable:!0,type:"fix2x100",unit:"%"},{name:"incidents",title:"incidents",sortable:!0,style:{color:"#e6f4d7"}}]}}]};function Yz(e){return Yz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yz(e)}function Kz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qz(e,t){return Qz=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Qz(e,t)}function eL(e,t){if(t&&("object"===Yz(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function tL(e){return tL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},tL(e)}var nL,rL,iL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qz(e,t)}(a,e);var t,n,r,i,o=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=tL(t);if(n){var i=tL(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return eL(this,e)});function a(){var e;Kz(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).init(),e}return r=a,(i=[{key:"init",value:function(){var e=this,t=IC().modes;t.static=DC(),this.draw=new(IC())({displayControlsDefault:!1,modes:t}),this.map.addControl(this.draw),this.draw.changeMode("static"),this.map._controls={},this.map._controls.drawControl=this.draw,this.map.on("draw.modechange",(function(t){e.dispatch("setMapDrawMode",e.draw.getMode()),e.dispatch("setMapDrawSelected",[])})),this.map.on("draw.selectionchange",(function(t){e.dispatch("setMapDrawSelected",t.features)})),this.map.on("click",(function(t){e.dispatch("collapseLayers")})),this.dispatch("addPanel",{index:0,tab:"Home",panel:{id:"default",view:Gz,lock:2,loading:1}}),this.dispatch("socketRequest",{request:{ctx:"actbitrateds_vs_len",type:"kdbquery",query:"actbitrateds_vs_len",params:[]},onLoading:{type:"PANEL_LOADING",payload:{index:0,tab:"Home",id:"loading",loading:1}},onSuccess:{type:"PUSH_WIDGETS",payload:{index:0,tab:"Home",view:qz,id:"bitrateplot"}},onError:{type:"PANEL_LOADING",payload:{index:0,tab:"Home",id:"error",loading:2}}}),this.dispatch("socketRequest",{request:{ctx:"dslam_report_paginated",type:"kdbquery",query:"dslam_report_paginated",params:[0]},onLoading:{type:"ADD_TAB",payload:{id:"Population Report",panels:[{id:"loading...",width:23,widgets:[],loading:!0}]}},onSuccess:{type:"UPDATE_PANEL",payload:{index:0,tab:"Population Report",id:"populationReport",view:Zz,loading:!1}},onError:{type:"UPDATE_PANEL",payload:{index:0,tab:"Population Report",id:"error",loadingError:!0}}}),document.addEventListener("keydown",(function(e){"INPUT"!==document.activeElement.tagName&&"KeyP"===e.code&&n.dispatch("toggleTimesliderPlay")}),!1);var n=this}}])&&Jz(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),a}(uC),oL=function(e){var t=e.map;return Wn.createElement("div",{id:"redux-react"},Wn.createElement(Cx,null),Wn.createElement(D_,null),Wn.createElement(Y_,null),Wn.createElement(WC,{map:t}))};function aL(e){return aL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aL(e)}function sL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lL(e,t){return lL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},lL(e,t)}function cL(e,t){if(t&&("object"===aL(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function uL(e){return uL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},uL(e)}function hL(){qd.render(Wn.createElement(mL,{percentage:rL}),document.getElementById(nL))}function fL(e){rL=e,hL(),e>=1&&qd.unmountComponentAtNode(document.getElementById(nL))}var pL={color:"#D1FFFC",fontSize:"5pt",fontFamily:"'Dosis', sans-serif",backgroundColor:"rgba(209, 255, 252, 0.2)",width:"300px",height:"2px"},dL={fontSize:".6em",color:"#D1FFFC",fontFamily:"'Dosis', sans-serif"},mL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lL(e,t)}(a,e);var t,n,r,i,o=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=uL(t);if(n){var i=uL(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return cL(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).state={progress:""},t}return r=a,(i=[{key:"render",value:function(){var e={marginTop:"2px",height:"2px",background:"#D1FFFC",WebkitBoxShadow:"0px 0px 10px 1px rgba(209, 255, 252, 0.5)",MozBoxShadow:"0px 0px 10px 1px rgba(209, 255, 252, 0.5)",BoxShadow:"0px 0px 10px 1px rgba(209, 255, 252, 0.5)",width:300*this.props.percentage+"px",transition:"width 2s ease"},t=-99===this.props.percentage?Wn.createElement("center",null,Wn.createElement("p",{style:dL},"Loading failed ...!")):Wn.createElement("div",{style:pL},Wn.createElement("div",{style:e}));return Wn.createElement("div",{className:"loader"},t)}}])&&sL(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),a}(Wn.Component),gL=a(93379),yL=a.n(gL),vL=a(2061);yL()(vL.Z,{insert:"head",singleton:!1}),vL.Z.locals;var bL=a(9156);yL()(bL.Z,{insert:"head",singleton:!1}),bL.Z.locals,a(59848),a(24613),a(83078);var _L=a(26731);yL()(_L.Z,{insert:"head",singleton:!1}),_L.Z.locals;var xL=a(26243);function AL(){var e=Object.create(null);function t(r,i){var o=r.id,a=r.name,s=r.dependencies;void 0===s&&(s=[]);var l=r.init;void 0===l&&(l=function(){});var c=r.getTransferables;if(void 0===c&&(c=null),!e[o])try{s=s.map((function(n){return n&&n.isWorkerModule&&(t(n,(function(e){if(e instanceof Error)throw e})),n=e[n.id].value),n})),l=n("<"+a+">.init",l),c&&(c=n("<"+a+">.getTransferables",c));var u=null;"function"==typeof l?u=l.apply(void 0,s):console.error("worker module init function failed to rehydrate"),e[o]={id:o,value:u,getTransferables:c},i(u)}catch(e){e&&e.noLog||console.error(e),i(e)}}function n(e,t){var n=void 0;self.troikaDefine=function(e){return n=e};var r=URL.createObjectURL(new Blob(["/** "+e.replace(/\*/g,"")+" **/\n\ntroikaDefine(\n"+t+"\n)"],{type:"application/javascript"}));try{importScripts(r)}catch(e){console.error(e)}return URL.revokeObjectURL(r),delete self.troikaDefine,n}self.addEventListener("message",(function(n){var r=n.data,i=r.messageId,o=r.action,a=r.data;try{"registerModule"===o&&t(a,(function(e){e instanceof Error?postMessage({messageId:i,success:!1,error:e.message}):postMessage({messageId:i,success:!0,result:{isCallable:"function"==typeof e}})})),"callModule"===o&&function(t,n){var r,i=t.id,o=t.args;e[i]&&"function"==typeof e[i].value||n(new Error("Worker module "+i+": not found or its 'init' did not return a function"));try{var a=(r=e[i]).value.apply(r,o);a&&"function"==typeof a.then?a.then(s,(function(e){return n(e instanceof Error?e:new Error(""+e))})):s(a)}catch(e){n(e)}function s(t){try{var r=e[i].getTransferables&&e[i].getTransferables(t);r&&Array.isArray(r)&&r.length||(r=void 0),n(t,r)}catch(e){console.error(e),n(e)}}}(a,(function(e,t){e instanceof Error?postMessage({messageId:i,success:!1,error:e.message}):postMessage({messageId:i,success:!0,result:e},t||void 0)}))}catch(e){postMessage({messageId:i,success:!1,error:e.stack})}}))}var wL=function(){var e=!1;if("undefined"!=typeof window&&void 0!==window.document)try{new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"}))).terminate(),e=!0}catch(e){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+e.message+"]")}return wL=function(){return e},e},CL=0,EL=0,SL=!1,TL=Object.create(null),BL=Object.create(null),kL=Object.create(null);function ML(e){if(!(e&&"function"==typeof e.init||SL))throw new Error("requires `options.init` function");var t=e.dependencies,n=e.init,r=e.getTransferables,i=e.workerId;if(!wL())return function(e){var t=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return t._getInitResult().then((function(t){if("function"==typeof t)return t.apply(void 0,e);throw new Error("Worker module function was called but `init` did not return a callable function")}))};return t._getInitResult=function(){var n=e.dependencies,r=e.init;n=Array.isArray(n)?n.map((function(e){return e&&e._getInitResult?e._getInitResult():e})):[];var i=Promise.all(n).then((function(e){return r.apply(null,e)}));return t._getInitResult=function(){return i},i},t}(e);null==i&&(i="#default");var o="workerModule"+ ++CL,a=e.name||o,s=null;function l(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(!s){s=IL(i,"registerModule",l.workerModuleData);var n=function(){s=null,BL[i].delete(n)};(BL[i]||(BL[i]=new Set)).add(n)}return s.then((function(t){if(t.isCallable)return IL(i,"callModule",{id:o,args:e});throw new Error("Worker module function was called but `init` did not return a callable function")}))}return t=t&&t.map((function(e){return"function"!=typeof e||e.workerModuleData||(SL=!0,e=ML({workerId:i,name:"<"+a+"> function dependency: "+e.name,init:"function(){return (\n"+PL(e)+"\n)}"}),SL=!1),e&&e.workerModuleData&&(e=e.workerModuleData),e})),l.workerModuleData={isWorkerModule:!0,id:o,name:a,dependencies:t,init:PL(n),getTransferables:r&&PL(r)},l}function PL(e){var t=e.toString();return!/^function/.test(t)&&/^\w+\s*\(/.test(t)&&(t="function "+t),t}function IL(e,t,n){return new Promise((function(r,i){var o=++EL;kL[o]=function(e){e.success?r(e.result):i(new Error("Error in worker "+t+" call: "+e.error))},function(e){var t=TL[e];if(!t){var n=PL(AL);(t=TL[e]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+e.replace(/\*/g,"")+" **/\n\n;("+n+")()"],{type:"application/javascript"})))).onmessage=function(e){var t=e.data,n=t.messageId,r=kL[n];if(!r)throw new Error("WorkerModule response with empty or unknown messageId");delete kL[n],r(t)}}return t}(e).postMessage({messageId:o,action:t,data:n})}))}function OL(){var e=function(e){function t(e,t,n,r,i,o,a,s,l,c){var u=1-l;c.x=u*u*u*e+3*u*u*l*n+3*u*l*l*i+l*l*l*a,c.y=u*u*u*t+3*u*u*l*r+3*u*l*l*o+l*l*l*s}function n(e,t){for(var n,r,i,o,a,s=/([MLQCZ])([^MLQCZ]*)/g;n=s.exec(e);){var l=n[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map((function(e){return parseFloat(e)}));switch(n[1]){case"M":o=r=l[0],a=i=l[1];break;case"L":l[0]===o&&l[1]===a||t("L",o,a,o=l[0],a=l[1]);break;case"Q":t("Q",o,a,o=l[2],a=l[3],l[0],l[1]);break;case"C":t("C",o,a,o=l[4],a=l[5],l[0],l[1],l[2],l[3]);break;case"Z":o===r&&a===i||t("L",o,a,r,i)}}}function r(e,r,i){void 0===i&&(i=16);var o={x:0,y:0};n(e,(function(e,n,a,s,l,c,u,h,f){switch(e){case"L":r(n,a,s,l);break;case"Q":for(var p=n,d=a,m=1;m<i;m++)b=a,_=u,x=l,void 0,C=1-(A=m/(i-1)),(w=o).x=C*C*n+2*C*A*c+A*A*s,w.y=C*C*b+2*C*A*_+A*A*x,r(p,d,o.x,o.y),p=o.x,d=o.y;break;case"C":for(var g=n,y=a,v=1;v<i;v++)t(n,a,c,u,h,f,s,l,v/(i-1),o),r(g,y,o.x,o.y),g=o.x,y=o.y}var b,_,x,A,w,C}))}var i="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",o=new WeakMap,a={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function s(e,t){var n=e.getContext?e.getContext("webgl",a):e,r=o.get(n);if(!r){var i="undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext,s={},l={},c={},u=-1,h=[];function f(e){var t=s[e];if(!t&&!(t=s[e]=n.getExtension(e)))throw new Error(e+" not supported");return t}function p(e,t){var r=n.createShader(t);return n.shaderSource(r,e),n.compileShader(r),r}function d(e,t,r,o){if(!l[e]){var a={},s={},c=n.createProgram();n.attachShader(c,p(t,n.VERTEX_SHADER)),n.attachShader(c,p(r,n.FRAGMENT_SHADER)),n.linkProgram(c),l[e]={program:c,transaction:function(e){n.useProgram(c),e({setUniform:function(e,t){for(var r=[],i=arguments.length-2;i-- >0;)r[i]=arguments[i+2];var o=s[t]||(s[t]=n.getUniformLocation(c,t));n["uniform"+e].apply(n,[o].concat(r))},setAttribute:function(e,t,r,o,s){var l=a[e];l||(l=a[e]={buf:n.createBuffer(),loc:n.getAttribLocation(c,e),data:null}),n.bindBuffer(n.ARRAY_BUFFER,l.buf),n.vertexAttribPointer(l.loc,t,n.FLOAT,!1,0,0),n.enableVertexAttribArray(l.loc),i?n.vertexAttribDivisor(l.loc,o):f("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(l.loc,o),s!==l.data&&(n.bufferData(n.ARRAY_BUFFER,s,r),l.data=s)}})}}}l[e].transaction(o)}function m(e,t){u++;try{n.activeTexture(n.TEXTURE0+u);var r=c[e];r||(r=c[e]=n.createTexture(),n.bindTexture(n.TEXTURE_2D,r),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST)),n.bindTexture(n.TEXTURE_2D,r),t(r,u)}finally{u--}}function g(e,t,r){var i=n.createFramebuffer();h.push(i),n.bindFramebuffer(n.FRAMEBUFFER,i),n.activeTexture(n.TEXTURE0+t),n.bindTexture(n.TEXTURE_2D,e),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);try{r(i)}finally{n.deleteFramebuffer(i),n.bindFramebuffer(n.FRAMEBUFFER,h[--h.length-1]||null)}}function y(){s={},l={},c={},u=-1,h.length=0}n.canvas.addEventListener("webglcontextlost",(function(e){y(),e.preventDefault()}),!1),o.set(n,r={gl:n,isWebGL2:i,getExtension:f,withProgram:d,withTexture:m,withTextureFramebuffer:g,handleContextLoss:y})}t(r)}function l(e,t,n,r,o,a,l,c){void 0===l&&(l=15),void 0===c&&(c=null),s(e,(function(e){var s=e.gl,u=e.withProgram;(0,e.withTexture)("copy",(function(e,h){s.texImage2D(s.TEXTURE_2D,0,s.RGBA,o,a,0,s.RGBA,s.UNSIGNED_BYTE,t),u("copy",i,"precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",(function(e){var t=e.setUniform;(0,e.setAttribute)("aUV",2,s.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),t("1i","image",h),s.bindFramebuffer(s.FRAMEBUFFER,c||null),s.disable(s.BLEND),s.colorMask(8&l,4&l,2&l,1&l),s.viewport(n,r,o,a),s.scissor(n,r,o,a),s.drawArrays(s.TRIANGLES,0,3)}))}))}))}var c=Object.freeze({__proto__:null,withWebGLContext:s,renderImageData:l,resizeWebGLCanvasWithoutClearing:function(e,t,n){var r=e.width,i=e.height;s(e,(function(o){var a=o.gl,s=new Uint8Array(r*i*4);a.readPixels(0,0,r,i,a.RGBA,a.UNSIGNED_BYTE,s),e.width=t,e.height=n,l(a,s,0,0,r,i)}))}});function u(e,t,n,i,o,a){void 0===a&&(a=1);var s=new Uint8Array(e*t),l=i[2]-i[0],c=i[3]-i[1],u=[];r(n,(function(e,t,n,r){u.push({x1:e,y1:t,x2:n,y2:r,minX:Math.min(e,n),minY:Math.min(t,r),maxX:Math.max(e,n),maxY:Math.max(t,r)})})),u.sort((function(e,t){return e.maxX-t.maxX}));for(var h=0;h<e;h++)for(var f=0;f<t;f++){var d=g(i[0]+l*(h+.5)/e,i[1]+c*(f+.5)/t),m=Math.pow(1-Math.abs(d)/o,a)/2;d<0&&(m=1-m),m=Math.max(0,Math.min(255,Math.round(255*m))),s[f*e+h]=m}return s;function g(e,t){for(var n=1/0,r=1/0,i=u.length;i--;){var o=u[i];if(o.maxX+r<=e)break;if(e+r>o.minX&&t-r<o.maxY&&t+r>o.minY){var a=p(e,t,o.x1,o.y1,o.x2,o.y2);a<n&&(n=a,r=Math.sqrt(n))}}return function(e,t){for(var n=0,r=u.length;r--;){var i=u[r];if(i.maxX<=e)break;i.y1>t!=i.y2>t&&e<(i.x2-i.x1)*(t-i.y1)/(i.y2-i.y1)+i.x1&&(n+=i.y1<i.y2?1:-1)}return 0!==n}(e,t)&&(r=-r),r}}function h(e,t,n,r,i,o,a,s,l,c){void 0===o&&(o=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===c&&(c=0),f(e,t,n,r,i,o,a,null,s,l,c)}function f(e,t,n,r,i,o,a,s,c,h,f){void 0===o&&(o=1),void 0===c&&(c=0),void 0===h&&(h=0),void 0===f&&(f=0);for(var p=u(e,t,n,r,i,o),d=new Uint8Array(4*p.length),m=0;m<p.length;m++)d[4*m+f]=p[m];l(a,d,c,h,e,t,1<<3-f,s)}function p(e,t,n,r,i,o){var a=i-n,s=o-r,l=a*a+s*s,c=l?Math.max(0,Math.min(1,((e-n)*a+(t-r)*s)/l)):0,u=e-(n+c*a),h=t-(r+c*s);return u*u+h*h}var d=Object.freeze({__proto__:null,generate:u,generateIntoCanvas:h,generateIntoFramebuffer:f}),m=new Float32Array([0,0,2,0,0,2]),g=null,y=!1,v={},b=new WeakMap;function _(e){if(!y&&!C(e))throw new Error("WebGL generation not supported")}function x(e,t,n,r,i,o,a){if(void 0===o&&(o=1),void 0===a&&(a=null),!a&&!(a=g)){var l="function"==typeof OffscreenCanvas?new OffscreenCanvas(1,1):"undefined"!=typeof document?document.createElement("canvas"):null;if(!l)throw new Error("OffscreenCanvas or DOM canvas not supported");a=g=l.getContext("webgl",{depth:!1})}_(a);var c=new Uint8Array(e*t*4);s(a,(function(a){var s=a.gl,l=a.withTexture,u=a.withTextureFramebuffer;l("readable",(function(a,l){s.texImage2D(s.TEXTURE_2D,0,s.RGBA,e,t,0,s.RGBA,s.UNSIGNED_BYTE,null),u(a,l,(function(a){w(e,t,n,r,i,o,s,a,0,0,0),s.readPixels(0,0,e,t,s.RGBA,s.UNSIGNED_BYTE,c)}))}))}));for(var u=new Uint8Array(e*t),h=0,f=0;h<c.length;h+=4)u[f++]=c[h];return u}function A(e,t,n,r,i,o,a,s,l,c){void 0===o&&(o=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===c&&(c=0),w(e,t,n,r,i,o,a,null,s,l,c)}function w(e,t,n,o,a,l,c,u,h,f,p){void 0===l&&(l=1),void 0===h&&(h=0),void 0===f&&(f=0),void 0===p&&(p=0),_(c);var d=[];r(n,(function(e,t,n,r){d.push(e,t,n,r)})),d=new Float32Array(d),s(c,(function(n){var r=n.gl,s=n.isWebGL2,c=n.getExtension,g=n.withProgram,y=n.withTexture,v=n.withTextureFramebuffer,b=n.handleContextLoss;if(y("rawDistances",(function(n,y){e===n._lastWidth&&t===n._lastHeight||r.texImage2D(r.TEXTURE_2D,0,r.RGBA,n._lastWidth=e,n._lastHeight=t,0,r.RGBA,r.UNSIGNED_BYTE,null),g("main","precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}","precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",(function(i){var u=i.setAttribute,h=i.setUniform,f=!s&&c("ANGLE_instanced_arrays"),p=!s&&c("EXT_blend_minmax");u("aUV",2,r.STATIC_DRAW,0,m),u("aLineSegment",4,r.DYNAMIC_DRAW,1,d),h.apply(void 0,["4f","uGlyphBounds"].concat(o)),h("1f","uMaxDistance",a),h("1f","uExponent",l),v(n,y,(function(n){r.enable(r.BLEND),r.colorMask(!0,!0,!0,!0),r.viewport(0,0,e,t),r.scissor(0,0,e,t),r.blendFunc(r.ONE,r.ONE),r.blendEquationSeparate(r.FUNC_ADD,s?r.MAX:p.MAX_EXT),r.clear(r.COLOR_BUFFER_BIT),s?r.drawArraysInstanced(r.TRIANGLES,0,3,d.length/4):f.drawArraysInstancedANGLE(r.TRIANGLES,0,3,d.length/4)}))})),g("post",i,"precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",(function(n){n.setAttribute("aUV",2,r.STATIC_DRAW,0,m),n.setUniform("1i","tex",y),r.bindFramebuffer(r.FRAMEBUFFER,u),r.disable(r.BLEND),r.colorMask(0===p,1===p,2===p,3===p),r.viewport(h,f,e,t),r.scissor(h,f,e,t),r.drawArrays(r.TRIANGLES,0,3)}))})),r.isContextLost())throw b(),new Error("webgl context lost")}))}function C(e){var t=e&&e!==g?e.canvas||e:v,n=b.get(t);if(void 0===n){y=!0;var r=null;try{var i=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],o=x(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,e);(n=o&&i.length===o.length&&o.every((function(e,t){return e===i[t]})))||(r="bad trial run results",console.info(i,o))}catch(e){n=!1,r=e.message}r&&console.warn("WebGL SDF generation not supported:",r),y=!1,b.set(t,n)}return n}var E=Object.freeze({__proto__:null,generate:x,generateIntoCanvas:A,generateIntoFramebuffer:w,isSupported:C});return e.forEachPathCommand=n,e.generate=function(e,t,n,r,i,o){void 0===i&&(i=Math.max(r[2]-r[0],r[3]-r[1])/2),void 0===o&&(o=1);try{return x.apply(E,arguments)}catch(e){return console.info("WebGL SDF generation failed, falling back to JS",e),u.apply(d,arguments)}},e.generateIntoCanvas=function(e,t,n,r,i,o,a,s,l,c){void 0===i&&(i=Math.max(r[2]-r[0],r[3]-r[1])/2),void 0===o&&(o=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===c&&(c=0);try{return A.apply(E,arguments)}catch(e){return console.info("WebGL SDF generation failed, falling back to JS",e),h.apply(d,arguments)}},e.javascript=d,e.pathToLineSegments=r,e.webgl=E,e.webglUtils=c,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return e}const DL=/\bvoid\s+main\s*\(\s*\)\s*{/g;function zL(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,(function(e,t){let n=o.WdD[t];return n?zL(n):e}))}const LL=[];for(let e=0;e<256;e++)LL[e]=(e<16?"0":"")+e.toString(16);const RL=Object.assign||function(){let e=arguments[0];for(let t=1,n=arguments.length;t<n;t++){let n=arguments[t];if(n)for(let t in n)n.hasOwnProperty(t)&&(e[t]=n[t])}return e},FL=Date.now(),UL=new WeakMap,NL=new Map;let jL=1e10;function VL(e,t){const n=function(e){const t=JSON.stringify(e,qL);let n=HL.get(t);return null==n&&HL.set(t,n=++WL),n}(t);let r=UL.get(e);if(r||UL.set(e,r=Object.create(null)),r[n])return new r[n];const i=`_onBeforeCompile${n}`,a=function(r){e.onBeforeCompile.call(this,r);const o=this.customProgramCacheKey()+"|"+r.vertexShader+"|"+r.fragmentShader;let a=NL[o];if(!a){const e=function({vertexShader:e,fragmentShader:t},n,r){let{vertexDefs:i,vertexMainIntro:o,vertexMainOutro:a,vertexTransform:s,fragmentDefs:l,fragmentMainIntro:c,fragmentMainOutro:u,fragmentColorTransform:h,customRewriter:f,timeUniform:p}=n;if(i=i||"",o=o||"",a=a||"",l=l||"",c=c||"",u=u||"",(s||f)&&(e=zL(e)),(h||f)&&(t=zL(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,"\n//!BEGIN_POST_CHUNK $1\n$&\n//!END_POST_CHUNK\n"))),f){let n=f({vertexShader:e,fragmentShader:t});e=n.vertexShader,t=n.fragmentShader}if(h){let e=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,(t=>(e.push(t),""))),u=`${h}\n${e.join("\n")}\n${u}`}if(p){const e=`\nuniform float ${p};\n`;i=e+i,l=e+l}return s&&(i=`${i}\nvoid troikaVertexTransform${r}(inout vec3 position, inout vec3 normal, inout vec2 uv) {\n  ${s}\n}\n`,o=`\ntroika_position_${r} = vec3(position);\ntroika_normal_${r} = vec3(normal);\ntroika_uv_${r} = vec2(uv);\ntroikaVertexTransform${r}(troika_position_${r}, troika_normal_${r}, troika_uv_${r});\n${o}\n`,e=(e=`vec3 troika_position_${r};\nvec3 troika_normal_${r};\nvec2 troika_uv_${r};\n${e}\n`).replace(/\b(position|normal|uv)\b/g,((e,t,n,i)=>/\battribute\s+vec[23]\s+$/.test(i.substr(0,n))?t:`troika_${t}_${r}`))),{vertexShader:e=GL(e,r,i,o,a),fragmentShader:t=GL(t,r,l,c,u)}}(r,t,n);a=NL[o]=e}r.vertexShader=a.vertexShader,r.fragmentShader=a.fragmentShader,RL(r.uniforms,this.uniforms),t.timeUniform&&(r.uniforms[t.timeUniform]={get value(){return Date.now()-FL}}),this[i]&&this[i](r)},s=function(){return l(t.chained?e:e.clone())},l=function(r){const i=Object.create(r,c);return Object.defineProperty(i,"baseMaterial",{value:e}),Object.defineProperty(i,"id",{value:jL++}),i.uuid=function(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(LL[255&e]+LL[e>>8&255]+LL[e>>16&255]+LL[e>>24&255]+"-"+LL[255&t]+LL[t>>8&255]+"-"+LL[t>>16&15|64]+LL[t>>24&255]+"-"+LL[63&n|128]+LL[n>>8&255]+"-"+LL[n>>16&255]+LL[n>>24&255]+LL[255&r]+LL[r>>8&255]+LL[r>>16&255]+LL[r>>24&255]).toUpperCase()}(),i.uniforms=RL({},r.uniforms,t.uniforms),i.defines=RL({},r.defines,t.defines),i.defines[`TROIKA_DERIVED_MATERIAL_${n}`]="",i.extensions=RL({},r.extensions,t.extensions),i._listeners=void 0,i},c={constructor:{value:s},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return e.customProgramCacheKey()+"|"+n}},onBeforeCompile:{get:()=>a,set(e){this[i]=e}},copy:{writable:!0,configurable:!0,value:function(t){return e.copy.call(this,t),e.isShaderMaterial||e.isDerivedMaterial||(RL(this.extensions,t.extensions),RL(this.defines,t.defines),RL(this.uniforms,o.rDY.clone(t.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const t=new e.constructor;return l(t).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let n=this._depthMaterial;return n||(n=this._depthMaterial=VL(e.isDerivedMaterial?e.getDepthMaterial():new o.lRF({depthPacking:o.mSO}),t),n.defines.IS_DEPTH_MATERIAL="",n.uniforms=this.uniforms),n}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let n=this._distanceMaterial;return n||(n=this._distanceMaterial=VL(e.isDerivedMaterial?e.getDistanceMaterial():new o.Lun,t),n.defines.IS_DISTANCE_MATERIAL="",n.uniforms=this.uniforms),n}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:t,_distanceMaterial:n}=this;t&&t.dispose(),n&&n.dispose(),e.dispose.call(this)}}};return r[n]=s,new s}function GL(e,t,n,r,i){return(r||i||n)&&(e=e.replace(DL,`\n${n}\nvoid troikaOrigMain${t}() {`),e+=`\nvoid main() {\n  ${r}\n  troikaOrigMain${t}();\n  ${i}\n}`),e}function qL(e,t){return"uniforms"===e?void 0:"function"==typeof t?t.toString():t}let WL=0;const HL=new Map;o.ehD;const $L=()=>(self.performance||Date).now(),XL=OL();let ZL;const YL=[];let KL=0;function JL(){const e=$L();for(;YL.length&&$L()-e<5;)YL.shift()();KL=YL.length?setTimeout(JL,0):0}const QL={};let eR=0;function tR(e,t,n,r,i,o,a,s,l,c){const u="TroikaTextSDFGenerator_JS_"+eR++%4;let h=QL[u];return h||(h=QL[u]={workerModule:ML({name:u,workerId:u,dependencies:[OL,$L],init(e,t){const n=e().javascript.generate;return function(...e){const r=t();return{textureData:n(...e),timing:t()-r}}},getTransferables:e=>[e.textureData.buffer]}),requests:0,idleTimer:null}),h.requests++,clearTimeout(h.idleTimer),h.workerModule(e,t,n,r,i,o).then((({textureData:n,timing:r})=>{const i=$L(),o=new Uint8Array(4*n.length);for(let e=0;e<n.length;e++)o[4*e+c]=n[e];return XL.webglUtils.renderImageData(a,o,s,l,e,t,1<<3-c),r+=$L()-i,0==--h.requests&&(h.idleTimer=setTimeout((()=>{!function(e){BL[e]&&BL[e].forEach((function(e){e()})),TL[e]&&(TL[e].terminate(),delete TL[e])}(u)}),2e3)),{timing:r}}))}const nR=XL.webglUtils.resizeWebGLCanvasWithoutClearing,rR=ML({name:"Typr Font Parser",dependencies:[function(){return"undefined"==typeof window&&(self.window=self),function(e){var t={parse:function(e){var n=t._bin,r=new Uint8Array(e);if("ttcf"==n.readASCII(r,0,4)){var i=4;n.readUshort(r,i),i+=2,n.readUshort(r,i),i+=2;var o=n.readUint(r,i);i+=4;for(var a=[],s=0;s<o;s++){var l=n.readUint(r,i);i+=4,a.push(t._readFont(r,l))}return a}return[t._readFont(r,0)]},_readFont:function(e,n){var r=t._bin,i=n;r.readFixed(e,n),n+=4;var o=r.readUshort(e,n);n+=2,r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2;for(var a=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],s={_data:e,_offset:i},l={},c=0;c<o;c++){var u=r.readASCII(e,n,4);n+=4,r.readUint(e,n),n+=4;var h=r.readUint(e,n);n+=4;var f=r.readUint(e,n);n+=4,l[u]={offset:h,length:f}}for(c=0;c<a.length;c++){var p=a[c];l[p]&&(s[p.trim()]=t[p.trim()].parse(e,l[p].offset,l[p].length,s))}return s},_tabOffset:function(e,n,r){for(var i=t._bin,o=i.readUshort(e,r+4),a=r+12,s=0;s<o;s++){var l=i.readASCII(e,a,4);a+=4,i.readUint(e,a),a+=4;var c=i.readUint(e,a);if(a+=4,i.readUint(e,a),a+=4,l==n)return c}return 0}};t._bin={readFixed:function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<8|e[t+3])/65540},readF2dot14:function(e,n){return t._bin.readShort(e,n)/16384},readInt:function(e,n){return t._bin._view(e).getInt32(n)},readInt8:function(e,n){return t._bin._view(e).getInt8(n)},readShort:function(e,n){return t._bin._view(e).getInt16(n)},readUshort:function(e,n){return t._bin._view(e).getUint16(n)},readUshorts:function(e,n,r){for(var i=[],o=0;o<r;o++)i.push(t._bin.readUshort(e,n+2*o));return i},readUint:function(e,n){return t._bin._view(e).getUint32(n)},readUint64:function(e,n){return 4294967296*t._bin.readUint(e,n)+t._bin.readUint(e,n+4)},readASCII:function(e,t,n){for(var r="",i=0;i<n;i++)r+=String.fromCharCode(e[t+i]);return r},readUnicode:function(e,t,n){for(var r="",i=0;i<n;i++){var o=e[t++]<<8|e[t++];r+=String.fromCharCode(o)}return r},_tdec:"undefined"!=typeof window&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(e,n,r){var i=t._bin._tdec;return i&&0==n&&r==e.length?i.decode(e):t._bin.readASCII(e,n,r)},readBytes:function(e,t,n){for(var r=[],i=0;i<n;i++)r.push(e[t+i]);return r},readASCIIArray:function(e,t,n){for(var r=[],i=0;i<n;i++)r.push(String.fromCharCode(e[t+i]));return r},_view:function(e){return e._dataView||(e._dataView=e.buffer?new DataView(e.buffer,e.byteOffset,e.byteLength):new DataView(new Uint8Array(e).buffer))}},t._lctf={},t._lctf.parse=function(e,n,r,i,o){var a=t._bin,s={},l=n;a.readFixed(e,n),n+=4;var c=a.readUshort(e,n);n+=2;var u=a.readUshort(e,n);n+=2;var h=a.readUshort(e,n);return n+=2,s.scriptList=t._lctf.readScriptList(e,l+c),s.featureList=t._lctf.readFeatureList(e,l+u),s.lookupList=t._lctf.readLookupList(e,l+h,o),s},t._lctf.readLookupList=function(e,n,r){var i=t._bin,o=n,a=[],s=i.readUshort(e,n);n+=2;for(var l=0;l<s;l++){var c=i.readUshort(e,n);n+=2;var u=t._lctf.readLookupTable(e,o+c,r);a.push(u)}return a},t._lctf.readLookupTable=function(e,n,r){var i=t._bin,o=n,a={tabs:[]};a.ltype=i.readUshort(e,n),n+=2,a.flag=i.readUshort(e,n),n+=2;var s=i.readUshort(e,n);n+=2;for(var l=a.ltype,c=0;c<s;c++){var u=i.readUshort(e,n);n+=2;var h=r(e,l,o+u,a);a.tabs.push(h)}return a},t._lctf.numOfOnes=function(e){for(var t=0,n=0;n<32;n++)0!=(e>>>n&1)&&t++;return t},t._lctf.readClassDef=function(e,n){var r=t._bin,i=[],o=r.readUshort(e,n);if(n+=2,1==o){var a=r.readUshort(e,n);n+=2;var s=r.readUshort(e,n);n+=2;for(var l=0;l<s;l++)i.push(a+l),i.push(a+l),i.push(r.readUshort(e,n)),n+=2}if(2==o){var c=r.readUshort(e,n);for(n+=2,l=0;l<c;l++)i.push(r.readUshort(e,n)),n+=2,i.push(r.readUshort(e,n)),n+=2,i.push(r.readUshort(e,n)),n+=2}return i},t._lctf.getInterval=function(e,t){for(var n=0;n<e.length;n+=3){var r=e[n],i=e[n+1];if(e[n+2],r<=t&&t<=i)return n}return-1},t._lctf.readCoverage=function(e,n){var r=t._bin,i={};i.fmt=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);return n+=2,1==i.fmt&&(i.tab=r.readUshorts(e,n,o)),2==i.fmt&&(i.tab=r.readUshorts(e,n,3*o)),i},t._lctf.coverageIndex=function(e,n){var r=e.tab;if(1==e.fmt)return r.indexOf(n);if(2==e.fmt){var i=t._lctf.getInterval(r,n);if(-1!=i)return r[i+2]+(n-r[i])}return-1},t._lctf.readFeatureList=function(e,n){var r=t._bin,i=n,o=[],a=r.readUshort(e,n);n+=2;for(var s=0;s<a;s++){var l=r.readASCII(e,n,4);n+=4;var c=r.readUshort(e,n);n+=2;var u=t._lctf.readFeatureTable(e,i+c);u.tag=l.trim(),o.push(u)}return o},t._lctf.readFeatureTable=function(e,n){var r=t._bin,i=n,o={},a=r.readUshort(e,n);n+=2,a>0&&(o.featureParams=i+a);var s=r.readUshort(e,n);n+=2,o.tab=[];for(var l=0;l<s;l++)o.tab.push(r.readUshort(e,n+2*l));return o},t._lctf.readScriptList=function(e,n){var r=t._bin,i=n,o={},a=r.readUshort(e,n);n+=2;for(var s=0;s<a;s++){var l=r.readASCII(e,n,4);n+=4;var c=r.readUshort(e,n);n+=2,o[l.trim()]=t._lctf.readScriptTable(e,i+c)}return o},t._lctf.readScriptTable=function(e,n){var r=t._bin,i=n,o={},a=r.readUshort(e,n);n+=2,o.default=t._lctf.readLangSysTable(e,i+a);var s=r.readUshort(e,n);n+=2;for(var l=0;l<s;l++){var c=r.readASCII(e,n,4);n+=4;var u=r.readUshort(e,n);n+=2,o[c.trim()]=t._lctf.readLangSysTable(e,i+u)}return o},t._lctf.readLangSysTable=function(e,n){var r=t._bin,i={};r.readUshort(e,n),n+=2,i.reqFeature=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);return n+=2,i.features=r.readUshorts(e,n,o),i},t.CFF={},t.CFF.parse=function(e,n,r){var i=t._bin;(e=new Uint8Array(e.buffer,n,r))[n=0],e[++n],e[++n],e[++n],n++;var o=[];n=t.CFF.readIndex(e,n,o);for(var a=[],s=0;s<o.length-1;s++)a.push(i.readASCII(e,n+o[s],o[s+1]-o[s]));n+=o[o.length-1];var l=[];n=t.CFF.readIndex(e,n,l);var c=[];for(s=0;s<l.length-1;s++)c.push(t.CFF.readDict(e,n+l[s],n+l[s+1]));n+=l[l.length-1];var u=c[0],h=[];n=t.CFF.readIndex(e,n,h);var f=[];for(s=0;s<h.length-1;s++)f.push(i.readASCII(e,n+h[s],h[s+1]-h[s]));if(n+=h[h.length-1],t.CFF.readSubrs(e,n,u),u.CharStrings){n=u.CharStrings,h=[],n=t.CFF.readIndex(e,n,h);var p=[];for(s=0;s<h.length-1;s++)p.push(i.readBytes(e,n+h[s],h[s+1]-h[s]));u.CharStrings=p}if(u.ROS){n=u.FDArray;var d=[];for(n=t.CFF.readIndex(e,n,d),u.FDArray=[],s=0;s<d.length-1;s++){var m=t.CFF.readDict(e,n+d[s],n+d[s+1]);t.CFF._readFDict(e,m,f),u.FDArray.push(m)}n+=d[d.length-1],n=u.FDSelect,u.FDSelect=[];var g=e[n];if(n++,3!=g)throw g;var y=i.readUshort(e,n);for(n+=2,s=0;s<y+1;s++)u.FDSelect.push(i.readUshort(e,n),e[n+2]),n+=3}return u.Encoding&&(u.Encoding=t.CFF.readEncoding(e,u.Encoding,u.CharStrings.length)),u.charset&&(u.charset=t.CFF.readCharset(e,u.charset,u.CharStrings.length)),t.CFF._readFDict(e,u,f),u},t.CFF._readFDict=function(e,n,r){var i;for(var o in n.Private&&(i=n.Private[1],n.Private=t.CFF.readDict(e,i,i+n.Private[0]),n.Private.Subrs&&t.CFF.readSubrs(e,i+n.Private.Subrs,n.Private)),n)-1!=["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(o)&&(n[o]=r[n[o]-426+35])},t.CFF.readSubrs=function(e,n,r){var i=t._bin,o=[];n=t.CFF.readIndex(e,n,o);var a,s=o.length;a=s<1240?107:s<33900?1131:32768,r.Bias=a,r.Subrs=[];for(var l=0;l<o.length-1;l++)r.Subrs.push(i.readBytes(e,n+o[l],o[l+1]-o[l]))},t.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],t.CFF.glyphByUnicode=function(e,t){for(var n=0;n<e.charset.length;n++)if(e.charset[n]==t)return n;return-1},t.CFF.glyphBySE=function(e,n){return n<0||n>255?-1:t.CFF.glyphByUnicode(e,t.CFF.tableSE[n])},t.CFF.readEncoding=function(e,n,r){t._bin;var i=[".notdef"],o=e[n];if(n++,0!=o)throw"error: unknown encoding format: "+o;var a=e[n];n++;for(var s=0;s<a;s++)i.push(e[n+s]);return i},t.CFF.readCharset=function(e,n,r){var i=t._bin,o=[".notdef"],a=e[n];if(n++,0==a)for(var s=0;s<r;s++){var l=i.readUshort(e,n);n+=2,o.push(l)}else{if(1!=a&&2!=a)throw"error: format: "+a;for(;o.length<r;){l=i.readUshort(e,n),n+=2;var c=0;for(1==a?(c=e[n],n++):(c=i.readUshort(e,n),n+=2),s=0;s<=c;s++)o.push(l),l++}}return o},t.CFF.readIndex=function(e,n,r){var i=t._bin,o=i.readUshort(e,n)+1,a=e[n+=2];if(n++,1==a)for(var s=0;s<o;s++)r.push(e[n+s]);else if(2==a)for(s=0;s<o;s++)r.push(i.readUshort(e,n+2*s));else if(3==a)for(s=0;s<o;s++)r.push(16777215&i.readUint(e,n+3*s-1));else if(1!=o)throw"unsupported offset size: "+a+", count: "+o;return(n+=o*a)-1},t.CFF.getCharString=function(e,n,r){var i=t._bin,o=e[n],a=e[n+1];e[n+2],e[n+3],e[n+4];var s=1,l=null,c=null;o<=20&&(l=o,s=1),12==o&&(l=100*o+a,s=2),21<=o&&o<=27&&(l=o,s=1),28==o&&(c=i.readShort(e,n+1),s=3),29<=o&&o<=31&&(l=o,s=1),32<=o&&o<=246&&(c=o-139,s=1),247<=o&&o<=250&&(c=256*(o-247)+a+108,s=2),251<=o&&o<=254&&(c=256*-(o-251)-a-108,s=2),255==o&&(c=i.readInt(e,n+1)/65535,s=5),r.val=null!=c?c:"o"+l,r.size=s},t.CFF.readCharString=function(e,n,r){for(var i=n+r,o=t._bin,a=[];n<i;){var s=e[n],l=e[n+1];e[n+2],e[n+3],e[n+4];var c=1,u=null,h=null;s<=20&&(u=s,c=1),12==s&&(u=100*s+l,c=2),19!=s&&20!=s||(u=s,c=2),21<=s&&s<=27&&(u=s,c=1),28==s&&(h=o.readShort(e,n+1),c=3),29<=s&&s<=31&&(u=s,c=1),32<=s&&s<=246&&(h=s-139,c=1),247<=s&&s<=250&&(h=256*(s-247)+l+108,c=2),251<=s&&s<=254&&(h=256*-(s-251)-l-108,c=2),255==s&&(h=o.readInt(e,n+1)/65535,c=5),a.push(null!=h?h:"o"+u),n+=c}return a},t.CFF.readDict=function(e,n,r){for(var i=t._bin,o={},a=[];n<r;){var s=e[n],l=e[n+1];e[n+2],e[n+3],e[n+4];var c=1,u=null,h=null;if(28==s&&(h=i.readShort(e,n+1),c=3),29==s&&(h=i.readInt(e,n+1),c=5),32<=s&&s<=246&&(h=s-139,c=1),247<=s&&s<=250&&(h=256*(s-247)+l+108,c=2),251<=s&&s<=254&&(h=256*-(s-251)-l-108,c=2),255==s)throw h=i.readInt(e,n+1)/65535,c=5,"unknown number";if(30==s){var f=[];for(c=1;;){var p=e[n+c];c++;var d=p>>4,m=15&p;if(15!=d&&f.push(d),15!=m&&f.push(m),15==m)break}for(var g="",y=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],v=0;v<f.length;v++)g+=y[f[v]];h=parseFloat(g)}s<=21&&(u=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][s],c=1,12==s&&(u=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][l],c=2)),null!=u?(o[u]=1==a.length?a[0]:a,a=[]):a.push(h),n+=c}return o},t.cmap={},t.cmap.parse=function(e,n,r){e=new Uint8Array(e.buffer,n,r),n=0;var i=t._bin,o={};i.readUshort(e,n),n+=2;var a=i.readUshort(e,n);n+=2;var s=[];o.tables=[];for(var l=0;l<a;l++){var c=i.readUshort(e,n);n+=2;var u=i.readUshort(e,n);n+=2;var h=i.readUint(e,n);n+=4;var f="p"+c+"e"+u,p=s.indexOf(h);if(-1==p){var d;p=o.tables.length,s.push(h);var m=i.readUshort(e,h);0==m?d=t.cmap.parse0(e,h):4==m?d=t.cmap.parse4(e,h):6==m?d=t.cmap.parse6(e,h):12==m?d=t.cmap.parse12(e,h):console.debug("unknown format: "+m,c,u,h),o.tables.push(d)}if(null!=o[f])throw"multiple tables for one platform+encoding";o[f]=p}return o},t.cmap.parse0=function(e,n){var r=t._bin,i={};i.format=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);n+=2,r.readUshort(e,n),n+=2,i.map=[];for(var a=0;a<o-6;a++)i.map.push(e[n+a]);return i},t.cmap.parse4=function(e,n){var r=t._bin,i=n,o={};o.format=r.readUshort(e,n),n+=2;var a=r.readUshort(e,n);n+=2,r.readUshort(e,n),n+=2;var s=r.readUshort(e,n);n+=2;var l=s/2;o.searchRange=r.readUshort(e,n),n+=2,o.entrySelector=r.readUshort(e,n),n+=2,o.rangeShift=r.readUshort(e,n),n+=2,o.endCount=r.readUshorts(e,n,l),n+=2*l,n+=2,o.startCount=r.readUshorts(e,n,l),n+=2*l,o.idDelta=[];for(var c=0;c<l;c++)o.idDelta.push(r.readShort(e,n)),n+=2;for(o.idRangeOffset=r.readUshorts(e,n,l),n+=2*l,o.glyphIdArray=[];n<i+a;)o.glyphIdArray.push(r.readUshort(e,n)),n+=2;return o},t.cmap.parse6=function(e,n){var r=t._bin,i={};i.format=r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2,i.firstCode=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);n+=2,i.glyphIdArray=[];for(var a=0;a<o;a++)i.glyphIdArray.push(r.readUshort(e,n)),n+=2;return i},t.cmap.parse12=function(e,n){var r=t._bin,i={};i.format=r.readUshort(e,n),n+=2,n+=2,r.readUint(e,n),n+=4,r.readUint(e,n),n+=4;var o=r.readUint(e,n);n+=4,i.groups=[];for(var a=0;a<o;a++){var s=n+12*a,l=r.readUint(e,s+0),c=r.readUint(e,s+4),u=r.readUint(e,s+8);i.groups.push([l,c,u])}return i},t.glyf={},t.glyf.parse=function(e,t,n,r){for(var i=[],o=0;o<r.maxp.numGlyphs;o++)i.push(null);return i},t.glyf._parseGlyf=function(e,n){var r=t._bin,i=e._data,o=t._tabOffset(i,"glyf",e._offset)+e.loca[n];if(e.loca[n]==e.loca[n+1])return null;var a={};if(a.noc=r.readShort(i,o),o+=2,a.xMin=r.readShort(i,o),o+=2,a.yMin=r.readShort(i,o),o+=2,a.xMax=r.readShort(i,o),o+=2,a.yMax=r.readShort(i,o),o+=2,a.xMin>=a.xMax||a.yMin>=a.yMax)return null;if(a.noc>0){a.endPts=[];for(var s=0;s<a.noc;s++)a.endPts.push(r.readUshort(i,o)),o+=2;var l=r.readUshort(i,o);if(o+=2,i.length-o<l)return null;a.instructions=r.readBytes(i,o,l),o+=l;var c=a.endPts[a.noc-1]+1;for(a.flags=[],s=0;s<c;s++){var u=i[o];if(o++,a.flags.push(u),0!=(8&u)){var h=i[o];o++;for(var f=0;f<h;f++)a.flags.push(u),s++}}for(a.xs=[],s=0;s<c;s++){var p=0!=(2&a.flags[s]),d=0!=(16&a.flags[s]);p?(a.xs.push(d?i[o]:-i[o]),o++):d?a.xs.push(0):(a.xs.push(r.readShort(i,o)),o+=2)}for(a.ys=[],s=0;s<c;s++)p=0!=(4&a.flags[s]),d=0!=(32&a.flags[s]),p?(a.ys.push(d?i[o]:-i[o]),o++):d?a.ys.push(0):(a.ys.push(r.readShort(i,o)),o+=2);var m=0,g=0;for(s=0;s<c;s++)m+=a.xs[s],g+=a.ys[s],a.xs[s]=m,a.ys[s]=g}else{var y;a.parts=[];do{y=r.readUshort(i,o),o+=2;var v={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(a.parts.push(v),v.glyphIndex=r.readUshort(i,o),o+=2,1&y){var b=r.readShort(i,o);o+=2;var _=r.readShort(i,o);o+=2}else b=r.readInt8(i,o),o++,_=r.readInt8(i,o),o++;2&y?(v.m.tx=b,v.m.ty=_):(v.p1=b,v.p2=_),8&y?(v.m.a=v.m.d=r.readF2dot14(i,o),o+=2):64&y?(v.m.a=r.readF2dot14(i,o),o+=2,v.m.d=r.readF2dot14(i,o),o+=2):128&y&&(v.m.a=r.readF2dot14(i,o),o+=2,v.m.b=r.readF2dot14(i,o),o+=2,v.m.c=r.readF2dot14(i,o),o+=2,v.m.d=r.readF2dot14(i,o),o+=2)}while(32&y);if(256&y){var x=r.readUshort(i,o);for(o+=2,a.instr=[],s=0;s<x;s++)a.instr.push(i[o]),o++}}return a},t.GPOS={},t.GPOS.parse=function(e,n,r,i){return t._lctf.parse(e,n,r,i,t.GPOS.subt)},t.GPOS.subt=function(e,n,r,i){var o=t._bin,a=r,s={};if(s.fmt=o.readUshort(e,r),r+=2,1==n||2==n||3==n||7==n||8==n&&s.fmt<=2){var l=o.readUshort(e,r);r+=2,s.coverage=t._lctf.readCoverage(e,l+a)}if(1==n&&1==s.fmt){var c=o.readUshort(e,r);r+=2;var u=t._lctf.numOfOnes(c);0!=c&&(s.pos=t.GPOS.readValueRecord(e,r,c))}else if(2==n&&s.fmt>=1&&s.fmt<=2){c=o.readUshort(e,r),r+=2;var h=o.readUshort(e,r);r+=2,u=t._lctf.numOfOnes(c);var f=t._lctf.numOfOnes(h);if(1==s.fmt){s.pairsets=[];var p=o.readUshort(e,r);r+=2;for(var d=0;d<p;d++){var m=a+o.readUshort(e,r);r+=2;var g=o.readUshort(e,m);m+=2;for(var y=[],v=0;v<g;v++){var b=o.readUshort(e,m);m+=2,0!=c&&(E=t.GPOS.readValueRecord(e,m,c),m+=2*u),0!=h&&(S=t.GPOS.readValueRecord(e,m,h),m+=2*f),y.push({gid2:b,val1:E,val2:S})}s.pairsets.push(y)}}if(2==s.fmt){var _=o.readUshort(e,r);r+=2;var x=o.readUshort(e,r);r+=2;var A=o.readUshort(e,r);r+=2;var w=o.readUshort(e,r);for(r+=2,s.classDef1=t._lctf.readClassDef(e,a+_),s.classDef2=t._lctf.readClassDef(e,a+x),s.matrix=[],d=0;d<A;d++){var C=[];for(v=0;v<w;v++){var E=null,S=null;0!=c&&(E=t.GPOS.readValueRecord(e,r,c),r+=2*u),0!=h&&(S=t.GPOS.readValueRecord(e,r,h),r+=2*f),C.push({val1:E,val2:S})}s.matrix.push(C)}}}else{if(9==n&&1==s.fmt){var T=o.readUshort(e,r);r+=2;var B=o.readUint(e,r);if(r+=4,9==i.ltype)i.ltype=T;else if(i.ltype!=T)throw"invalid extension substitution";return t.GPOS.subt(e,i.ltype,a+B)}console.debug("unsupported GPOS table LookupType",n,"format",s.fmt)}return s},t.GPOS.readValueRecord=function(e,n,r){var i=t._bin,o=[];return o.push(1&r?i.readShort(e,n):0),n+=1&r?2:0,o.push(2&r?i.readShort(e,n):0),n+=2&r?2:0,o.push(4&r?i.readShort(e,n):0),n+=4&r?2:0,o.push(8&r?i.readShort(e,n):0),n+=8&r?2:0,o},t.GSUB={},t.GSUB.parse=function(e,n,r,i){return t._lctf.parse(e,n,r,i,t.GSUB.subt)},t.GSUB.subt=function(e,n,r,i){var o=t._bin,a=r,s={};if(s.fmt=o.readUshort(e,r),r+=2,1!=n&&4!=n&&5!=n&&6!=n)return null;if(1==n||4==n||5==n&&s.fmt<=2||6==n&&s.fmt<=2){var l=o.readUshort(e,r);r+=2,s.coverage=t._lctf.readCoverage(e,a+l)}if(1==n&&s.fmt>=1&&s.fmt<=2){if(1==s.fmt)s.delta=o.readShort(e,r),r+=2;else if(2==s.fmt){var c=o.readUshort(e,r);r+=2,s.newg=o.readUshorts(e,r,c),r+=2*s.newg.length}}else if(4==n){s.vals=[],c=o.readUshort(e,r),r+=2;for(var u=0;u<c;u++){var h=o.readUshort(e,r);r+=2,s.vals.push(t.GSUB.readLigatureSet(e,a+h))}}else if(5==n&&2==s.fmt){if(2==s.fmt){var f=o.readUshort(e,r);r+=2,s.cDef=t._lctf.readClassDef(e,a+f),s.scset=[];var p=o.readUshort(e,r);for(r+=2,u=0;u<p;u++){var d=o.readUshort(e,r);r+=2,s.scset.push(0==d?null:t.GSUB.readSubClassSet(e,a+d))}}}else if(6==n&&3==s.fmt){if(3==s.fmt){for(u=0;u<3;u++){c=o.readUshort(e,r),r+=2;for(var m=[],g=0;g<c;g++)m.push(t._lctf.readCoverage(e,a+o.readUshort(e,r+2*g)));r+=2*c,0==u&&(s.backCvg=m),1==u&&(s.inptCvg=m),2==u&&(s.ahedCvg=m)}c=o.readUshort(e,r),r+=2,s.lookupRec=t.GSUB.readSubstLookupRecords(e,r,c)}}else{if(7==n&&1==s.fmt){var y=o.readUshort(e,r);r+=2;var v=o.readUint(e,r);if(r+=4,9==i.ltype)i.ltype=y;else if(i.ltype!=y)throw"invalid extension substitution";return t.GSUB.subt(e,i.ltype,a+v)}console.debug("unsupported GSUB table LookupType",n,"format",s.fmt)}return s},t.GSUB.readSubClassSet=function(e,n){var r=t._bin.readUshort,i=n,o=[],a=r(e,n);n+=2;for(var s=0;s<a;s++){var l=r(e,n);n+=2,o.push(t.GSUB.readSubClassRule(e,i+l))}return o},t.GSUB.readSubClassRule=function(e,n){var r=t._bin.readUshort,i={},o=r(e,n),a=r(e,n+=2);n+=2,i.input=[];for(var s=0;s<o-1;s++)i.input.push(r(e,n)),n+=2;return i.substLookupRecords=t.GSUB.readSubstLookupRecords(e,n,a),i},t.GSUB.readSubstLookupRecords=function(e,n,r){for(var i=t._bin.readUshort,o=[],a=0;a<r;a++)o.push(i(e,n),i(e,n+2)),n+=4;return o},t.GSUB.readChainSubClassSet=function(e,n){var r=t._bin,i=n,o=[],a=r.readUshort(e,n);n+=2;for(var s=0;s<a;s++){var l=r.readUshort(e,n);n+=2,o.push(t.GSUB.readChainSubClassRule(e,i+l))}return o},t.GSUB.readChainSubClassRule=function(e,n){for(var r=t._bin,i={},o=["backtrack","input","lookahead"],a=0;a<o.length;a++){var s=r.readUshort(e,n);n+=2,1==a&&s--,i[o[a]]=r.readUshorts(e,n,s),n+=2*i[o[a]].length}return s=r.readUshort(e,n),n+=2,i.subst=r.readUshorts(e,n,2*s),n+=2*i.subst.length,i},t.GSUB.readLigatureSet=function(e,n){var r=t._bin,i=n,o=[],a=r.readUshort(e,n);n+=2;for(var s=0;s<a;s++){var l=r.readUshort(e,n);n+=2,o.push(t.GSUB.readLigature(e,i+l))}return o},t.GSUB.readLigature=function(e,n){var r=t._bin,i={chain:[]};i.nglyph=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);n+=2;for(var a=0;a<o-1;a++)i.chain.push(r.readUshort(e,n)),n+=2;return i},t.head={},t.head.parse=function(e,n,r){var i=t._bin,o={};return i.readFixed(e,n),n+=4,o.fontRevision=i.readFixed(e,n),n+=4,i.readUint(e,n),n+=4,i.readUint(e,n),n+=4,o.flags=i.readUshort(e,n),n+=2,o.unitsPerEm=i.readUshort(e,n),n+=2,o.created=i.readUint64(e,n),n+=8,o.modified=i.readUint64(e,n),n+=8,o.xMin=i.readShort(e,n),n+=2,o.yMin=i.readShort(e,n),n+=2,o.xMax=i.readShort(e,n),n+=2,o.yMax=i.readShort(e,n),n+=2,o.macStyle=i.readUshort(e,n),n+=2,o.lowestRecPPEM=i.readUshort(e,n),n+=2,o.fontDirectionHint=i.readShort(e,n),n+=2,o.indexToLocFormat=i.readShort(e,n),n+=2,o.glyphDataFormat=i.readShort(e,n),n+=2,o},t.hhea={},t.hhea.parse=function(e,n,r){var i=t._bin,o={};return i.readFixed(e,n),n+=4,o.ascender=i.readShort(e,n),n+=2,o.descender=i.readShort(e,n),n+=2,o.lineGap=i.readShort(e,n),n+=2,o.advanceWidthMax=i.readUshort(e,n),n+=2,o.minLeftSideBearing=i.readShort(e,n),n+=2,o.minRightSideBearing=i.readShort(e,n),n+=2,o.xMaxExtent=i.readShort(e,n),n+=2,o.caretSlopeRise=i.readShort(e,n),n+=2,o.caretSlopeRun=i.readShort(e,n),n+=2,o.caretOffset=i.readShort(e,n),n+=2,n+=8,o.metricDataFormat=i.readShort(e,n),n+=2,o.numberOfHMetrics=i.readUshort(e,n),n+=2,o},t.hmtx={},t.hmtx.parse=function(e,n,r,i){for(var o=t._bin,a={aWidth:[],lsBearing:[]},s=0,l=0,c=0;c<i.maxp.numGlyphs;c++)c<i.hhea.numberOfHMetrics&&(s=o.readUshort(e,n),n+=2,l=o.readShort(e,n),n+=2),a.aWidth.push(s),a.lsBearing.push(l);return a},t.kern={},t.kern.parse=function(e,n,r,i){var o=t._bin,a=o.readUshort(e,n);if(n+=2,1==a)return t.kern.parseV1(e,n-2,r,i);var s=o.readUshort(e,n);n+=2;for(var l={glyph1:[],rval:[]},c=0;c<s;c++){n+=2,r=o.readUshort(e,n),n+=2;var u=o.readUshort(e,n);n+=2;var h=u>>>8;if(0!=(h&=15))throw"unknown kern table format: "+h;n=t.kern.readFormat0(e,n,l)}return l},t.kern.parseV1=function(e,n,r,i){var o=t._bin;o.readFixed(e,n),n+=4;var a=o.readUint(e,n);n+=4;for(var s={glyph1:[],rval:[]},l=0;l<a;l++){o.readUint(e,n),n+=4;var c=o.readUshort(e,n);n+=2,o.readUshort(e,n),n+=2;var u=c>>>8;if(0!=(u&=15))throw"unknown kern table format: "+u;n=t.kern.readFormat0(e,n,s)}return s},t.kern.readFormat0=function(e,n,r){var i=t._bin,o=-1,a=i.readUshort(e,n);n+=2,i.readUshort(e,n),n+=2,i.readUshort(e,n),n+=2,i.readUshort(e,n),n+=2;for(var s=0;s<a;s++){var l=i.readUshort(e,n);n+=2;var c=i.readUshort(e,n);n+=2;var u=i.readShort(e,n);n+=2,l!=o&&(r.glyph1.push(l),r.rval.push({glyph2:[],vals:[]}));var h=r.rval[r.rval.length-1];h.glyph2.push(c),h.vals.push(u),o=l}return n},t.loca={},t.loca.parse=function(e,n,r,i){var o=t._bin,a=[],s=i.head.indexToLocFormat,l=i.maxp.numGlyphs+1;if(0==s)for(var c=0;c<l;c++)a.push(o.readUshort(e,n+(c<<1))<<1);if(1==s)for(c=0;c<l;c++)a.push(o.readUint(e,n+(c<<2)));return a},t.maxp={},t.maxp.parse=function(e,n,r){var i=t._bin,o={},a=i.readUint(e,n);return n+=4,o.numGlyphs=i.readUshort(e,n),n+=2,65536==a&&(o.maxPoints=i.readUshort(e,n),n+=2,o.maxContours=i.readUshort(e,n),n+=2,o.maxCompositePoints=i.readUshort(e,n),n+=2,o.maxCompositeContours=i.readUshort(e,n),n+=2,o.maxZones=i.readUshort(e,n),n+=2,o.maxTwilightPoints=i.readUshort(e,n),n+=2,o.maxStorage=i.readUshort(e,n),n+=2,o.maxFunctionDefs=i.readUshort(e,n),n+=2,o.maxInstructionDefs=i.readUshort(e,n),n+=2,o.maxStackElements=i.readUshort(e,n),n+=2,o.maxSizeOfInstructions=i.readUshort(e,n),n+=2,o.maxComponentElements=i.readUshort(e,n),n+=2,o.maxComponentDepth=i.readUshort(e,n),n+=2),o},t.name={},t.name.parse=function(e,n,r){var i=t._bin,o={};i.readUshort(e,n),n+=2;var a=i.readUshort(e,n);n+=2,i.readUshort(e,n);for(var s,l=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],c=n+=2,u=0;u<a;u++){var h=i.readUshort(e,n);n+=2;var f=i.readUshort(e,n);n+=2;var p=i.readUshort(e,n);n+=2;var d=i.readUshort(e,n);n+=2;var m=i.readUshort(e,n);n+=2;var g=i.readUshort(e,n);n+=2;var y,v=l[d],b=c+12*a+g;if(0==h)y=i.readUnicode(e,b,m/2);else if(3==h&&0==f)y=i.readUnicode(e,b,m/2);else if(0==f)y=i.readASCII(e,b,m);else if(1==f)y=i.readUnicode(e,b,m/2);else if(3==f)y=i.readUnicode(e,b,m/2);else{if(1!=h)throw"unknown encoding "+f+", platformID: "+h;y=i.readASCII(e,b,m),console.debug("reading unknown MAC encoding "+f+" as ASCII")}var _="p"+h+","+p.toString(16);null==o[_]&&(o[_]={}),o[_][void 0!==v?v:d]=y,o[_]._lang=p}for(var x in o)if(null!=o[x].postScriptName&&1033==o[x]._lang)return o[x];for(var x in o)if(null!=o[x].postScriptName&&0==o[x]._lang)return o[x];for(var x in o)if(null!=o[x].postScriptName&&3084==o[x]._lang)return o[x];for(var x in o)if(null!=o[x].postScriptName)return o[x];for(var x in o){s=x;break}return console.debug("returning name table with languageID "+o[s]._lang),o[s]},t["OS/2"]={},t["OS/2"].parse=function(e,n,r){var i=t._bin.readUshort(e,n);n+=2;var o={};if(0==i)t["OS/2"].version0(e,n,o);else if(1==i)t["OS/2"].version1(e,n,o);else if(2==i||3==i||4==i)t["OS/2"].version2(e,n,o);else{if(5!=i)throw"unknown OS/2 table version: "+i;t["OS/2"].version5(e,n,o)}return o},t["OS/2"].version0=function(e,n,r){var i=t._bin;return r.xAvgCharWidth=i.readShort(e,n),n+=2,r.usWeightClass=i.readUshort(e,n),n+=2,r.usWidthClass=i.readUshort(e,n),n+=2,r.fsType=i.readUshort(e,n),n+=2,r.ySubscriptXSize=i.readShort(e,n),n+=2,r.ySubscriptYSize=i.readShort(e,n),n+=2,r.ySubscriptXOffset=i.readShort(e,n),n+=2,r.ySubscriptYOffset=i.readShort(e,n),n+=2,r.ySuperscriptXSize=i.readShort(e,n),n+=2,r.ySuperscriptYSize=i.readShort(e,n),n+=2,r.ySuperscriptXOffset=i.readShort(e,n),n+=2,r.ySuperscriptYOffset=i.readShort(e,n),n+=2,r.yStrikeoutSize=i.readShort(e,n),n+=2,r.yStrikeoutPosition=i.readShort(e,n),n+=2,r.sFamilyClass=i.readShort(e,n),n+=2,r.panose=i.readBytes(e,n,10),n+=10,r.ulUnicodeRange1=i.readUint(e,n),n+=4,r.ulUnicodeRange2=i.readUint(e,n),n+=4,r.ulUnicodeRange3=i.readUint(e,n),n+=4,r.ulUnicodeRange4=i.readUint(e,n),n+=4,r.achVendID=[i.readInt8(e,n),i.readInt8(e,n+1),i.readInt8(e,n+2),i.readInt8(e,n+3)],n+=4,r.fsSelection=i.readUshort(e,n),n+=2,r.usFirstCharIndex=i.readUshort(e,n),n+=2,r.usLastCharIndex=i.readUshort(e,n),n+=2,r.sTypoAscender=i.readShort(e,n),n+=2,r.sTypoDescender=i.readShort(e,n),n+=2,r.sTypoLineGap=i.readShort(e,n),n+=2,r.usWinAscent=i.readUshort(e,n),n+=2,r.usWinDescent=i.readUshort(e,n),n+2},t["OS/2"].version1=function(e,n,r){var i=t._bin;return n=t["OS/2"].version0(e,n,r),r.ulCodePageRange1=i.readUint(e,n),n+=4,r.ulCodePageRange2=i.readUint(e,n),n+4},t["OS/2"].version2=function(e,n,r){var i=t._bin;return n=t["OS/2"].version1(e,n,r),r.sxHeight=i.readShort(e,n),n+=2,r.sCapHeight=i.readShort(e,n),n+=2,r.usDefault=i.readUshort(e,n),n+=2,r.usBreak=i.readUshort(e,n),n+=2,r.usMaxContext=i.readUshort(e,n),n+2},t["OS/2"].version5=function(e,n,r){var i=t._bin;return n=t["OS/2"].version2(e,n,r),r.usLowerOpticalPointSize=i.readUshort(e,n),n+=2,r.usUpperOpticalPointSize=i.readUshort(e,n),n+2},t.post={},t.post.parse=function(e,n,r){var i=t._bin,o={};return o.version=i.readFixed(e,n),n+=4,o.italicAngle=i.readFixed(e,n),n+=4,o.underlinePosition=i.readShort(e,n),n+=2,o.underlineThickness=i.readShort(e,n),n+=2,o},null==t&&(t={}),null==t.U&&(t.U={}),t.U.codeToGlyph=function(e,t){var n=e.cmap,r=-1;if(null!=n.p0e4?r=n.p0e4:null!=n.p3e1?r=n.p3e1:null!=n.p1e0?r=n.p1e0:null!=n.p0e3&&(r=n.p0e3),-1==r)throw"no familiar platform and encoding!";var i=n.tables[r];if(0==i.format)return t>=i.map.length?0:i.map[t];if(4==i.format){for(var o=-1,a=0;a<i.endCount.length;a++)if(t<=i.endCount[a]){o=a;break}return-1==o||i.startCount[o]>t?0:65535&(0!=i.idRangeOffset[o]?i.glyphIdArray[t-i.startCount[o]+(i.idRangeOffset[o]>>1)-(i.idRangeOffset.length-o)]:t+i.idDelta[o])}if(12==i.format){if(t>i.groups[i.groups.length-1][1])return 0;for(a=0;a<i.groups.length;a++){var s=i.groups[a];if(s[0]<=t&&t<=s[1])return s[2]+(t-s[0])}return 0}throw"unknown cmap table format "+i.format},t.U.glyphToPath=function(e,n){var r={cmds:[],crds:[]};if(e.SVG&&e.SVG.entries[n]){var i=e.SVG.entries[n];return null==i?r:("string"==typeof i&&(i=t.SVG.toPath(i),e.SVG.entries[n]=i),i)}if(e.CFF){var o={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:e.CFF.Private?e.CFF.Private.defaultWidthX:0,open:!1},a=e.CFF,s=e.CFF.Private;if(a.ROS){for(var l=0;a.FDSelect[l+2]<=n;)l+=2;s=a.FDArray[a.FDSelect[l+1]].Private}t.U._drawCFF(e.CFF.CharStrings[n],o,a,s,r)}else e.glyf&&t.U._drawGlyf(n,e,r);return r},t.U._drawGlyf=function(e,n,r){var i=n.glyf[e];null==i&&(i=n.glyf[e]=t.glyf._parseGlyf(n,e)),null!=i&&(i.noc>-1?t.U._simpleGlyph(i,r):t.U._compoGlyph(i,n,r))},t.U._simpleGlyph=function(e,n){for(var r=0;r<e.noc;r++){for(var i=0==r?0:e.endPts[r-1]+1,o=e.endPts[r],a=i;a<=o;a++){var s=a==i?o:a-1,l=a==o?i:a+1,c=1&e.flags[a],u=1&e.flags[s],h=1&e.flags[l],f=e.xs[a],p=e.ys[a];if(a==i)if(c){if(!u){t.U.P.moveTo(n,f,p);continue}t.U.P.moveTo(n,e.xs[s],e.ys[s])}else u?t.U.P.moveTo(n,e.xs[s],e.ys[s]):t.U.P.moveTo(n,(e.xs[s]+f)/2,(e.ys[s]+p)/2);c?u&&t.U.P.lineTo(n,f,p):h?t.U.P.qcurveTo(n,f,p,e.xs[l],e.ys[l]):t.U.P.qcurveTo(n,f,p,(f+e.xs[l])/2,(p+e.ys[l])/2)}t.U.P.closePath(n)}},t.U._compoGlyph=function(e,n,r){for(var i=0;i<e.parts.length;i++){var o={cmds:[],crds:[]},a=e.parts[i];t.U._drawGlyf(a.glyphIndex,n,o);for(var s=a.m,l=0;l<o.crds.length;l+=2){var c=o.crds[l],u=o.crds[l+1];r.crds.push(c*s.a+u*s.b+s.tx),r.crds.push(c*s.c+u*s.d+s.ty)}for(l=0;l<o.cmds.length;l++)r.cmds.push(o.cmds[l])}},t.U._getGlyphClass=function(e,n){var r=t._lctf.getInterval(n,e);return-1==r?0:n[r+2]},t.U.getPairAdjustment=function(e,n,r){var i=!1;if(e.GPOS)for(var o=e.GPOS,a=o.lookupList,s=o.featureList,l=[],c=0;c<s.length;c++){var u=s[c];if("kern"==u.tag){i=!0;for(var h=0;h<u.tab.length;h++)if(!l[u.tab[h]]){l[u.tab[h]]=!0;for(var f=a[u.tab[h]],p=0;p<f.tabs.length;p++)if(null!=f.tabs[p]){var d,m=f.tabs[p];if(!m.coverage||-1!=(d=t._lctf.coverageIndex(m.coverage,n)))if(1==f.ltype);else if(2==f.ltype){var g=null;if(1==m.fmt){var y=m.pairsets[d];for(c=0;c<y.length;c++)y[c].gid2==r&&(g=y[c])}else if(2==m.fmt){var v=t.U._getGlyphClass(n,m.classDef1),b=t.U._getGlyphClass(r,m.classDef2);g=m.matrix[v][b]}if(g){var _=0;return g.val1&&g.val1[2]&&(_+=g.val1[2]),g.val2&&g.val2[0]&&(_+=g.val2[0]),_}}}}}}if(e.kern&&!i){var x=e.kern.glyph1.indexOf(n);if(-1!=x){var A=e.kern.rval[x].glyph2.indexOf(r);if(-1!=A)return e.kern.rval[x].vals[A]}}return 0},t.U._applySubs=function(e,n,r,i){for(var o=e.length-n-1,a=0;a<r.tabs.length;a++)if(null!=r.tabs[a]){var s,l=r.tabs[a];if(!l.coverage||-1!=(s=t._lctf.coverageIndex(l.coverage,e[n])))if(1==r.ltype)e[n],1==l.fmt?e[n]=e[n]+l.delta:e[n]=l.newg[s];else if(4==r.ltype)for(var c=l.vals[s],u=0;u<c.length;u++){var h=c[u],f=h.chain.length;if(!(f>o)){for(var p=!0,d=0,m=0;m<f;m++){for(;-1==e[n+d+(1+m)];)d++;h.chain[m]!=e[n+d+(1+m)]&&(p=!1)}if(p){for(e[n]=h.nglyph,m=0;m<f+d;m++)e[n+m+1]=-1;break}}}else if(5==r.ltype&&2==l.fmt)for(var g=t._lctf.getInterval(l.cDef,e[n]),y=l.cDef[g+2],v=l.scset[y],b=0;b<v.length;b++){var _=v[b],x=_.input;if(!(x.length>o)){for(p=!0,m=0;m<x.length;m++){var A=t._lctf.getInterval(l.cDef,e[n+1+m]);if(-1==g&&l.cDef[A+2]!=x[m]){p=!1;break}}if(p){var w=_.substLookupRecords;for(u=0;u<w.length;u+=2)w[u],w[u+1]}}}else if(6==r.ltype&&3==l.fmt){if(!t.U._glsCovered(e,l.backCvg,n-l.backCvg.length))continue;if(!t.U._glsCovered(e,l.inptCvg,n))continue;if(!t.U._glsCovered(e,l.ahedCvg,n+l.inptCvg.length))continue;var C=l.lookupRec;for(b=0;b<C.length;b+=2){g=C[b];var E=i[C[b+1]];t.U._applySubs(e,n+g,E,i)}}}},t.U._glsCovered=function(e,n,r){for(var i=0;i<n.length;i++)if(-1==t._lctf.coverageIndex(n[i],e[r+i]))return!1;return!0},t.U.glyphsToPath=function(e,n,r){for(var i={cmds:[],crds:[]},o=0,a=0;a<n.length;a++){var s=n[a];if(-1!=s){for(var l=a<n.length-1&&-1!=n[a+1]?n[a+1]:0,c=t.U.glyphToPath(e,s),u=0;u<c.crds.length;u+=2)i.crds.push(c.crds[u]+o),i.crds.push(c.crds[u+1]);for(r&&i.cmds.push(r),u=0;u<c.cmds.length;u++)i.cmds.push(c.cmds[u]);r&&i.cmds.push("X"),o+=e.hmtx.aWidth[s],a<n.length-1&&(o+=t.U.getPairAdjustment(e,s,l))}}return i},t.U.P={},t.U.P.moveTo=function(e,t,n){e.cmds.push("M"),e.crds.push(t,n)},t.U.P.lineTo=function(e,t,n){e.cmds.push("L"),e.crds.push(t,n)},t.U.P.curveTo=function(e,t,n,r,i,o,a){e.cmds.push("C"),e.crds.push(t,n,r,i,o,a)},t.U.P.qcurveTo=function(e,t,n,r,i){e.cmds.push("Q"),e.crds.push(t,n,r,i)},t.U.P.closePath=function(e){e.cmds.push("Z")},t.U._drawCFF=function(e,n,r,i,o){for(var a=n.stack,s=n.nStems,l=n.haveWidth,c=n.width,u=n.open,h=0,f=n.x,p=n.y,d=0,m=0,g=0,y=0,v=0,b=0,_=0,x=0,A=0,w=0,C={val:0,size:0};h<e.length;){t.CFF.getCharString(e,h,C);var E=C.val;if(h+=C.size,"o1"==E||"o18"==E)a.length%2!=0&&!l&&(c=a.shift()+i.nominalWidthX),s+=a.length>>1,a.length=0,l=!0;else if("o3"==E||"o23"==E)a.length%2!=0&&!l&&(c=a.shift()+i.nominalWidthX),s+=a.length>>1,a.length=0,l=!0;else if("o4"==E)a.length>1&&!l&&(c=a.shift()+i.nominalWidthX,l=!0),u&&t.U.P.closePath(o),p+=a.pop(),t.U.P.moveTo(o,f,p),u=!0;else if("o5"==E)for(;a.length>0;)f+=a.shift(),p+=a.shift(),t.U.P.lineTo(o,f,p);else if("o6"==E||"o7"==E)for(var S=a.length,T="o6"==E,B=0;B<S;B++){var k=a.shift();T?f+=k:p+=k,T=!T,t.U.P.lineTo(o,f,p)}else if("o8"==E||"o24"==E){S=a.length;for(var M=0;M+6<=S;)d=f+a.shift(),m=p+a.shift(),g=d+a.shift(),y=m+a.shift(),f=g+a.shift(),p=y+a.shift(),t.U.P.curveTo(o,d,m,g,y,f,p),M+=6;"o24"==E&&(f+=a.shift(),p+=a.shift(),t.U.P.lineTo(o,f,p))}else{if("o11"==E)break;if("o1234"==E||"o1235"==E||"o1236"==E||"o1237"==E)"o1234"==E&&(m=p,g=(d=f+a.shift())+a.shift(),w=y=m+a.shift(),b=y,x=p,f=(_=(v=(A=g+a.shift())+a.shift())+a.shift())+a.shift(),t.U.P.curveTo(o,d,m,g,y,A,w),t.U.P.curveTo(o,v,b,_,x,f,p)),"o1235"==E&&(d=f+a.shift(),m=p+a.shift(),g=d+a.shift(),y=m+a.shift(),A=g+a.shift(),w=y+a.shift(),v=A+a.shift(),b=w+a.shift(),_=v+a.shift(),x=b+a.shift(),f=_+a.shift(),p=x+a.shift(),a.shift(),t.U.P.curveTo(o,d,m,g,y,A,w),t.U.P.curveTo(o,v,b,_,x,f,p)),"o1236"==E&&(d=f+a.shift(),m=p+a.shift(),g=d+a.shift(),w=y=m+a.shift(),b=y,_=(v=(A=g+a.shift())+a.shift())+a.shift(),x=b+a.shift(),f=_+a.shift(),t.U.P.curveTo(o,d,m,g,y,A,w),t.U.P.curveTo(o,v,b,_,x,f,p)),"o1237"==E&&(d=f+a.shift(),m=p+a.shift(),g=d+a.shift(),y=m+a.shift(),A=g+a.shift(),w=y+a.shift(),v=A+a.shift(),b=w+a.shift(),_=v+a.shift(),x=b+a.shift(),Math.abs(_-f)>Math.abs(x-p)?f=_+a.shift():p=x+a.shift(),t.U.P.curveTo(o,d,m,g,y,A,w),t.U.P.curveTo(o,v,b,_,x,f,p));else if("o14"==E){if(a.length>0&&!l&&(c=a.shift()+r.nominalWidthX,l=!0),4==a.length){var P=a.shift(),I=a.shift(),O=a.shift(),D=a.shift(),z=t.CFF.glyphBySE(r,O),L=t.CFF.glyphBySE(r,D);t.U._drawCFF(r.CharStrings[z],n,r,i,o),n.x=P,n.y=I,t.U._drawCFF(r.CharStrings[L],n,r,i,o)}u&&(t.U.P.closePath(o),u=!1)}else if("o19"==E||"o20"==E)a.length%2!=0&&!l&&(c=a.shift()+i.nominalWidthX),s+=a.length>>1,a.length=0,l=!0,h+=s+7>>3;else if("o21"==E)a.length>2&&!l&&(c=a.shift()+i.nominalWidthX,l=!0),p+=a.pop(),f+=a.pop(),u&&t.U.P.closePath(o),t.U.P.moveTo(o,f,p),u=!0;else if("o22"==E)a.length>1&&!l&&(c=a.shift()+i.nominalWidthX,l=!0),f+=a.pop(),u&&t.U.P.closePath(o),t.U.P.moveTo(o,f,p),u=!0;else if("o25"==E){for(;a.length>6;)f+=a.shift(),p+=a.shift(),t.U.P.lineTo(o,f,p);d=f+a.shift(),m=p+a.shift(),g=d+a.shift(),y=m+a.shift(),f=g+a.shift(),p=y+a.shift(),t.U.P.curveTo(o,d,m,g,y,f,p)}else if("o26"==E)for(a.length%2&&(f+=a.shift());a.length>0;)d=f,m=p+a.shift(),f=g=d+a.shift(),p=(y=m+a.shift())+a.shift(),t.U.P.curveTo(o,d,m,g,y,f,p);else if("o27"==E)for(a.length%2&&(p+=a.shift());a.length>0;)m=p,g=(d=f+a.shift())+a.shift(),y=m+a.shift(),f=g+a.shift(),p=y,t.U.P.curveTo(o,d,m,g,y,f,p);else if("o10"==E||"o29"==E){var R="o10"==E?i:r;if(0==a.length)console.debug("error: empty stack");else{var F=a.pop(),U=R.Subrs[F+R.Bias];n.x=f,n.y=p,n.nStems=s,n.haveWidth=l,n.width=c,n.open=u,t.U._drawCFF(U,n,r,i,o),f=n.x,p=n.y,s=n.nStems,l=n.haveWidth,c=n.width,u=n.open}}else if("o30"==E||"o31"==E){var N=a.length,j=(M=0,"o31"==E);for(M+=N-(S=-3&N);M<S;)j?(m=p,g=(d=f+a.shift())+a.shift(),p=(y=m+a.shift())+a.shift(),S-M==5?(f=g+a.shift(),M++):f=g,j=!1):(d=f,m=p+a.shift(),g=d+a.shift(),y=m+a.shift(),f=g+a.shift(),S-M==5?(p=y+a.shift(),M++):p=y,j=!0),t.U.P.curveTo(o,d,m,g,y,f,p),M+=4}else{if("o"==(E+"").charAt(0))throw console.debug("Unknown operation: "+E,e),E;a.push(E)}}}n.x=f,n.y=p,n.nStems=s,n.haveWidth=l,n.width=c,n.open=u};var n=t,r={Typr:n};return e.Typr=n,e.default=r,Object.defineProperty(e,"__esModule",{value:!0}),e}({}).Typr},function(){return function(e){var t=Uint8Array,n=Uint16Array,r=Uint32Array,i=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),o=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(e,t){for(var i=new n(31),o=0;o<31;++o)i[o]=t+=1<<e[o-1];var a=new r(i[30]);for(o=1;o<30;++o)for(var s=i[o];s<i[o+1];++s)a[s]=s-i[o]<<5|o;return[i,a]},l=s(i,2),c=l[0],u=l[1];c[28]=258,u[258]=28;for(var h=s(o,0)[0],f=new n(32768),p=0;p<32768;++p){var d=(43690&p)>>>1|(21845&p)<<1;d=(61680&(d=(52428&d)>>>2|(13107&d)<<2))>>>4|(3855&d)<<4,f[p]=((65280&d)>>>8|(255&d)<<8)>>>1}var m=function(e,t,r){for(var i=e.length,o=0,a=new n(t);o<i;++o)++a[e[o]-1];var s,l=new n(t);for(o=0;o<t;++o)l[o]=l[o-1]+a[o-1]<<1;if(r){s=new n(1<<t);var c=15-t;for(o=0;o<i;++o)if(e[o])for(var u=o<<4|e[o],h=t-e[o],p=l[e[o]-1]++<<h,d=p|(1<<h)-1;p<=d;++p)s[f[p]>>>c]=u}else for(s=new n(i),o=0;o<i;++o)e[o]&&(s[o]=f[l[e[o]-1]++]>>>15-e[o]);return s},g=new t(288);for(p=0;p<144;++p)g[p]=8;for(p=144;p<256;++p)g[p]=9;for(p=256;p<280;++p)g[p]=7;for(p=280;p<288;++p)g[p]=8;var y=new t(32);for(p=0;p<32;++p)y[p]=5;var v=m(g,9,1),b=m(y,5,1),_=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},x=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},A=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},w=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],C=function(e,t,n){var r=new Error(t||w[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,C),!n)throw r;return r},E=function(e,s,l){var u=e.length;if(!u||l&&!l.l&&u<5)return s||new t(0);var f=!s||l,p=!l||l.i;l||(l={}),s||(s=new t(3*u));var d,g=function(e){var n=s.length;if(e>n){var r=new t(Math.max(2*n,e));r.set(s),s=r}},y=l.f||0,w=l.p||0,E=l.b||0,S=l.l,T=l.d,B=l.m,k=l.n,M=8*u;do{if(!S){l.f=y=x(e,w,1);var P=x(e,w+1,3);if(w+=3,!P){var I=e[(G=((d=w)/8|0)+(7&d&&1)+4)-4]|e[G-3]<<8,O=G+I;if(O>u){p&&C(0);break}f&&g(E+I),s.set(e.subarray(G,O),E),l.b=E+=I,l.p=w=8*O;continue}if(1==P)S=v,T=b,B=9,k=5;else if(2==P){var D=x(e,w,31)+257,z=x(e,w+10,15)+4,L=D+x(e,w+5,31)+1;w+=14;for(var R=new t(L),F=new t(19),U=0;U<z;++U)F[a[U]]=x(e,w+3*U,7);w+=3*z;var N=_(F),j=(1<<N)-1,V=m(F,N,1);for(U=0;U<L;){var G,q=V[x(e,w,j)];if(w+=15&q,(G=q>>>4)<16)R[U++]=G;else{var W=0,H=0;for(16==G?(H=3+x(e,w,3),w+=2,W=R[U-1]):17==G?(H=3+x(e,w,7),w+=3):18==G&&(H=11+x(e,w,127),w+=7);H--;)R[U++]=W}}var $=R.subarray(0,D),X=R.subarray(D);B=_($),k=_(X),S=m($,B,1),T=m(X,k,1)}else C(1);if(w>M){p&&C(0);break}}f&&g(E+131072);for(var Z=(1<<B)-1,Y=(1<<k)-1,K=w;;K=w){var J=(W=S[A(e,w)&Z])>>>4;if((w+=15&W)>M){p&&C(0);break}if(W||C(2),J<256)s[E++]=J;else{if(256==J){K=w,S=null;break}var Q=J-254;if(J>264){var ee=i[U=J-257];Q=x(e,w,(1<<ee)-1)+c[U],w+=ee}var te=T[A(e,w)&Y],ne=te>>>4;if(te||C(3),w+=15&te,X=h[ne],ne>3&&(ee=o[ne],X+=A(e,w)&(1<<ee)-1,w+=ee),w>M){p&&C(0);break}f&&g(E+131072);for(var re=E+Q;E<re;E+=4)s[E]=s[E-X],s[E+1]=s[E+1-X],s[E+2]=s[E+2-X],s[E+3]=s[E+3-X];E=re}}l.l=S,l.p=K,l.b=E,S&&(y=1,l.m=B,l.d=T,l.n=k)}while(!y);return E==s.length?s:function(e,i,o){(null==i||i<0)&&(i=0),(null==o||o>e.length)&&(o=e.length);var a=new(e instanceof n?n:e instanceof r?r:t)(o-i);return a.set(e.subarray(i,o)),a}(s,0,E)},S=new t(0),T="undefined"!=typeof TextDecoder&&new TextDecoder;try{T.decode(S,{stream:!0})}catch(e){}return e.convert_streams=function(e){var t=new DataView(e),n=0;function r(){var e=t.getUint16(n);return n+=2,e}function i(){var e=t.getUint32(n);return n+=4,e}function o(e){y.setUint16(v,e),v+=2}function a(e){y.setUint32(v,e),v+=4}for(var s={signature:i(),flavor:i(),length:i(),numTables:r(),reserved:r(),totalSfntSize:i(),majorVersion:r(),minorVersion:r(),metaOffset:i(),metaLength:i(),metaOrigLength:i(),privOffset:i(),privLength:i()},l=0;Math.pow(2,l)<=s.numTables;)l++;l--;for(var c=16*Math.pow(2,l),u=16*s.numTables-c,h=12,f=[],p=0;p<s.numTables;p++)f.push({tag:i(),offset:i(),compLength:i(),origLength:i(),origChecksum:i()}),h+=16;var d,m=new Uint8Array(12+16*f.length+f.reduce((function(e,t){return e+t.origLength+4}),0)),g=m.buffer,y=new DataView(g),v=0;return a(s.flavor),o(s.numTables),o(c),o(l),o(u),f.forEach((function(e){a(e.tag),a(e.origChecksum),a(h),a(e.origLength),e.outOffset=h,(h+=e.origLength)%4!=0&&(h+=4-h%4)})),f.forEach((function(t){var n,r=e.slice(t.offset,t.offset+t.compLength);if(t.compLength!=t.origLength){var i=new Uint8Array(t.origLength);n=new Uint8Array(r,2),E(n,i)}else i=new Uint8Array(r);m.set(i,t.outOffset);var o=0;(h=t.outOffset+t.origLength)%4!=0&&(o=4-h%4),m.set(new Uint8Array(o).buffer,t.outOffset+t.origLength),d=h+o})),g.slice(0,d)},Object.defineProperty(e,"__esModule",{value:!0}),e}({}).convert_streams},function(e,t){const n={M:2,L:2,Q:4,C:6,Z:0},r={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"};let i;function o(e){if(!i){const e={R:2,L:1,D:4,C:16,U:32,T:8};i=new Map;for(let t in r){let n=0;r[t].split(",").forEach((r=>{let[o,a]=r.split("+");o=parseInt(o,36),a=a?parseInt(a,36):0,i.set(n+=o,e[t]);for(let r=a;r--;)i.set(++n,e[t])}))}}return i.get(e)||32}const a=[null,"isol","init","fina","medi"];function s(e){const t=new Uint8Array(e.length);let n=32,r=1,i=-1;for(let a=0;a<e.length;a++){const s=e.codePointAt(a);let l=0|o(s),c=1;8&l||(21&n?22&l?(c=3,1!==r&&3!==r||t[i]++):33&l&&(2!==r&&4!==r||t[i]--):34&n&&(2!==r&&4!==r||t[i]--),r=t[a]=c,n=l,i=a,s>65535&&a++)}return t}function l(...e){for(let t=0;t<e.length;t++)if("number"==typeof e[t])return e[t]}return function(r){const i=new Uint8Array(r,0,4),o=e._bin.readASCII(i,0,4);if("wOFF"===o)r=t(r);else if("wOF2"===o)throw new Error("woff2 fonts not supported");return function(t){const r=Object.create(null),i=t["OS/2"],o=t.hhea,c=t.head.unitsPerEm,u=l(i&&i.sTypoAscender,o&&o.ascender,c),h={unitsPerEm:c,ascender:u,descender:l(i&&i.sTypoDescender,o&&o.descender,0),capHeight:l(i&&i.sCapHeight,u),xHeight:l(i&&i.sxHeight,u),lineGap:l(i&&i.sTypoLineGap,o&&o.lineGap),forEachGlyph(i,o,l,c){let u=0;const f=1/h.unitsPerEm*o,p=function(t,n){const r=[];for(let i=0;i<n.length;i++){const o=n.codePointAt(i);o>65535&&i++,r.push(e.U.codeToGlyph(t,o))}const i=t.GSUB;if(i){const{lookupList:t,featureList:o}=i;let l;const c=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,u=[];o.forEach((i=>{if(c.test(i.tag))for(let o=0;o<i.tab.length;o++){if(u[i.tab[o]])continue;u[i.tab[o]]=!0;const c=t[i.tab[o]],h=/^(isol|init|fina|medi)$/.test(i.tag);h&&!l&&(l=s(n));for(let n=0;n<r.length;n++)l&&h&&a[l[n]]!==i.tag||e.U._applySubs(r,n,c,t)}}))}return r}(t,i);let d=0,m=-1;return p.forEach(((a,s)=>{if(-1!==a){let i=r[a];if(!i){const{cmds:o,crds:s}=e.U.glyphToPath(t,a);let l,c,u,h,f="",p=0;for(let e=0,t=o.length;e<t;e++){const t=n[o[e]];f+=o[e];for(let e=1;e<=t;e++)f+=(e>1?",":"")+s[p++]}if(s.length){l=c=1/0,u=h=-1/0;for(let e=0,t=s.length;e<t;e+=2){let t=s[e],n=s[e+1];t<l&&(l=t),n<c&&(c=n),t>u&&(u=t),n>h&&(h=n)}}else l=u=c=h=0;i=r[a]={index:a,advanceWidth:t.hmtx.aWidth[a],xMin:l,yMin:c,xMax:u,yMax:h,path:f,pathCommandCount:o.length}}-1!==m&&(u+=e.U.getPairAdjustment(t,m,a)*f),c.call(null,i,u,d),i.advanceWidth&&(u+=i.advanceWidth*f),l&&(u+=l*o),m=a}d+=i.codePointAt(d)>65535?2:1})),u}};return h}(e.parse(r)[0])}}],init:(e,t,n)=>n(e(),t())}),iR={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},oR=new o.Ilk;let aR=!1;function sR(){return(self.performance||Date).now()}const lR=Object.create(null);function cR({path:e,atlasIndex:t,sdfViewBox:n},{sdfGlyphSize:r,sdfCanvas:i,contextLost:o},a){if(o)return Promise.resolve({timing:-1});const{textureWidth:s,sdfExponent:l}=iR,c=Math.max(n[2]-n[0],n[3]-n[1]),u=Math.floor(t/4);return function(e,t,n,r,i,o,a,s,l,c,u=!0){return u?((...e)=>new Promise(((t,n)=>{YL.push((()=>{const r=$L();try{XL.webgl.generateIntoCanvas(...e),t({timing:$L()-r})}catch(e){n(e)}})),KL||(KL=setTimeout(JL,0))})))(e,t,n,r,i,o,a,s,l,c).then(null,(u=>(ZL||(console.warn("WebGL SDF generation failed, falling back to JS",u),ZL=!0),tR(e,t,n,r,i,o,a,s,l,c)))):tR(e,t,n,r,i,o,a,s,l,c)}(r,r,e,n,c,l,i,u%(s/r)*r,Math.floor(u/(s/r))*r,t%4,a)}let uR;function hR(e){if("function"!=typeof createImageBitmap){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:t,sdfTexture:n}=e,{width:r,height:i}=t,o=e.sdfCanvas.getContext("webgl");let a=n.image.data;a&&a.length===r*i*4||(a=new Uint8Array(r*i*4),n.image={width:r,height:i,data:a},n.flipY=!1,n.isDataTexture=!0),o.readPixels(0,0,r,i,o.RGBA,o.UNSIGNED_BYTE,a)}}const fR=ML({name:"Typesetter",dependencies:[iR,rR,function(e,t,n){const{defaultFontURL:r}=n,i=Object.create(null),o=1/0,a=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,s=new RegExp("[^\\S\\u00A0]|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]");function l(t,n){t||(t=r);let o=i[t];var a;o?o.pending?o.pending.push(n):n(o):(i[t]={pending:[n]},a=t,function n(){const o=e=>{console.error(`Failure loading font ${a}${a===r?"":"; trying fallback"}`,e),a!==r&&(a=r,n())};try{const n=new XMLHttpRequest;n.open("get",a,!0),n.responseType="arraybuffer",n.onload=function(){if(n.status>=400)o(new Error(n.statusText));else if(n.status>0)try{(e=>{let n=i[t].pending;i[t]=e,n.forEach((t=>t(e)))})(e(n.response))}catch(e){o(e)}},n.onerror=o,n.send()}catch(e){o(e)}}())}function c({text:e="",font:n=r,sdfGlyphSize:i=64,fontSize:c=1,letterSpacing:d=0,lineHeight:m="normal",maxWidth:g=o,direction:y,textAlign:v="left",textIndent:b=0,whiteSpace:_="normal",overflowWrap:x="normal",anchorX:A=0,anchorY:w=0,includeCaretPositions:C=!1,chunkedBoundsSize:E=8192,colorRanges:S=null},T,B=!1){const k=f(),M={fontLoad:0,typesetting:0};e.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n")),c=+c,d=+d,g=+g,m=m||"normal",b=+b,l(n,(n=>{const r=isFinite(g);let i=null,l=null,P=null,I=null,O=null,D=null,z=null,L=0,R=0,F="nowrap"!==_;const{ascender:U,descender:N,unitsPerEm:j,lineGap:V,capHeight:G,xHeight:q}=n;M.fontLoad=f()-k;const W=f(),H=c/j;"normal"===m&&(m=(U-N+V)/j);const $=((m*=c)-(U-N)*H)/2,X=-(U*H+$),Z=Math.min(m,(U-N)*H),Y=(U+N)/2*H-Z/2;let K=b,J=new p;const Q=[J];n.forEachGlyph(e,c,d,((t,n,i)=>{const o=e.charAt(i),l=t.advanceWidth*H,u=J.count;let h;if("isEmpty"in t||(t.isWhitespace=!!o&&new RegExp("[^\\S\\u00A0]").test(o),t.canBreakAfter=!!o&&s.test(o),t.isEmpty=t.xMin===t.xMax||t.yMin===t.yMax||a.test(o)),t.isWhitespace||t.isEmpty||R++,F&&r&&!t.isWhitespace&&n+l+K>g&&u){if(J.glyphAt(u-1).glyphObj.canBreakAfter)h=new p,K=-n;else for(let e=u;e--;){if(0===e&&"break-word"===x){h=new p,K=-n;break}if(J.glyphAt(e).glyphObj.canBreakAfter){h=J.splitAt(e+1);const t=h.glyphAt(0).x;K-=t;for(let e=h.count;e--;)h.glyphAt(e).x-=t;break}}h&&(J.isSoftWrapped=!0,J=h,Q.push(J),L=g)}let f=J.glyphAt(J.count);f.glyphObj=t,f.x=n+K,f.width=l,f.charIndex=i,"\n"===o&&(J=new p,Q.push(J),K=-(n+l+d*c)+b)})),Q.forEach((e=>{for(let t=e.count;t--;){let{glyphObj:n,x:r,width:i}=e.glyphAt(t);if(!n.isWhitespace)return e.width=r+i,void(e.width>L&&(L=e.width))}}));let ee=0,te=0;if(A&&("number"==typeof A?ee=-A:"string"==typeof A&&(ee=-L*("left"===A?0:"center"===A?.5:"right"===A?1:u(A)))),w)if("number"==typeof w)te=-w;else if("string"==typeof w){let e=Q.length*m;te="top"===w?0:"top-baseline"===w?-X:"top-cap"===w?-X-G*H:"top-ex"===w?-X-q*H:"middle"===w?e/2:"bottom"===w?e:"bottom-baseline"===w?e-$+N*H:u(w)*e}if(!B){const r=t.getEmbeddingLevels(e,y);i=new Uint16Array(R),l=new Float32Array(2*R),P={},D=[o,o,-1/0,-1/0],z=[];let a=X;C&&(O=new Float32Array(3*e.length)),S&&(I=new Uint8Array(3*R));let s,c,u=0,f=-1,p=-1;if(Q.forEach(((d,g)=>{let{count:y,width:b}=d;if(y>0){let m=0;for(let e=y;e--&&d.glyphAt(e).glyphObj.isWhitespace;)m++;let g=0,_=0;if("center"===v)g=(L-b)/2;else if("right"===v)g=L-b;else if("justify"===v&&d.isSoftWrapped){let e=0;for(let t=y-m;t--;)d.glyphAt(t).glyphObj.isWhitespace&&e++;_=(L-b)/e}if(_||g){let e=0;for(let t=0;t<y;t++){let n=d.glyphAt(t);const r=n.glyphObj;n.x+=g+e,0!==_&&r.isWhitespace&&t<y-m&&(e+=_,n.width+=_)}}const x=t.getReorderSegments(e,r,d.glyphAt(0).charIndex,d.glyphAt(d.count-1).charIndex);for(let e=0;e<x.length;e++){const[t,n]=x[e];let r=1/0,i=-1/0;for(let e=0;e<y;e++)if(d.glyphAt(e).charIndex>=t){let t=e,o=e;for(;o<y;o++){let e=d.glyphAt(o);if(e.charIndex>n)break;o<y-m&&(r=Math.min(r,e.x),i=Math.max(i,e.x+e.width))}for(let e=t;e<o;e++){const t=d.glyphAt(e);t.x=i-(t.x+t.width-r)}break}}let A;const w=e=>A=e;for(let m=0;m<y;m++){let g=d.glyphAt(m);A=g.glyphObj;const y=A.index,v=1&r.levels[g.charIndex];if(v){const r=t.getMirroredCharacter(e[g.charIndex]);r&&n.forEachGlyph(r,0,0,w)}if(C){const{charIndex:e}=g,t=g.x+ee,n=g.x+g.width+ee;O[3*e]=v?n:t,O[3*e+1]=v?t:n,O[3*e+2]=a+Y+te;const r=e-f;r>1&&h(O,f,r),f=e}if(S){const{charIndex:e}=g;for(;e>p;)p++,S.hasOwnProperty(p)&&(c=S[p])}if(!A.isWhitespace&&!A.isEmpty){const e=u++;P[y]||(P[y]={path:A.path,pathBounds:[A.xMin,A.yMin,A.xMax,A.yMax]});const t=g.x+ee,n=a+te;l[2*e]=t,l[2*e+1]=n;const r=t+A.xMin*H,h=n+A.yMin*H,f=t+A.xMax*H,p=n+A.yMax*H;r<D[0]&&(D[0]=r),h<D[1]&&(D[1]=h),f>D[2]&&(D[2]=f),p>D[3]&&(D[3]=p),e%E==0&&(s={start:e,end:e,rect:[o,o,-1/0,-1/0]},z.push(s)),s.end++;const d=s.rect;if(r<d[0]&&(d[0]=r),h<d[1]&&(d[1]=h),f>d[2]&&(d[2]=f),p>d[3]&&(d[3]=p),i[e]=y,S){const t=3*e;I[t]=c>>16&255,I[t+1]=c>>8&255,I[t+2]=255&c}}}}a-=m})),O){const t=e.length-f;t>1&&h(O,f,t)}}M.typesetting=f()-W,T({glyphIds:i,glyphPositions:l,glyphData:P,caretPositions:O,caretHeight:Z,glyphColors:I,chunkedBounds:z,fontSize:c,unitsPerEm:j,ascender:U*H,descender:N*H,capHeight:G*H,xHeight:q*H,lineHeight:m,topBaseline:X,blockBounds:[ee,te-Q.length*m,ee+L,te],visibleBounds:D,timings:M})}))}function u(e){let t=e.match(/^([\d.]+)%$/),n=t?parseFloat(t[1]):NaN;return isNaN(n)?0:n/100}function h(e,t,n){const r=e[3*t],i=e[3*t+1],o=e[3*t+2],a=(i-r)/n;for(let i=0;i<n;i++){const n=3*(t+i);e[n]=r+a*i,e[n+1]=r+a*(i+1),e[n+2]=o}}function f(){return(self.performance||Date).now()}function p(){this.data=[]}const d=["glyphObj","x","width","charIndex"];return p.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/d.length)},glyphAt(e){let t=p.flyweight;return t.data=this.data,t.index=e,t},splitAt(e){let t=new p;return t.data=this.data.splice(e*d.length),t}},p.flyweight=d.reduce(((e,t,n,r)=>(Object.defineProperty(e,t,{get(){return this.data[this.index*d.length+n]},set(e){this.data[this.index*d.length+n]=e}}),e)),{data:null,index:0}),{typeset:c,measure:function(e,t){c(e,(e=>{const[n,r,i,o]=e.blockBounds;t({width:i-n,height:o-r})}),{metricsOnly:!0})},loadFont:l}},function(){var e=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},n={},r={};n.L=1,r[1]="L",Object.keys(t).forEach((function(e,t){n[e]=1<<t+1,r[n[e]]=e})),Object.freeze(n);var i=n.LRI|n.RLI|n.FSI,o=n.L|n.R|n.AL,a=n.B|n.S|n.WS|n.ON|n.FSI|n.LRI|n.RLI|n.PDI,s=n.BN|n.RLE|n.LRE|n.RLO|n.LRO|n.PDF,l=n.S|n.WS|n.B|i|n.PDI|s,c=null;function u(e){return function(){if(!c){c=new Map;var e=function(e){if(t.hasOwnProperty(e)){var r=0;t[e].split(",").forEach((function(t){var i=t.split("+"),o=i[0],a=i[1];o=parseInt(o,36),a=a?parseInt(a,36):0,c.set(r+=o,n[e]);for(var s=0;s<a;s++)c.set(++r,n[e])}))}};for(var r in t)e(r)}}(),c.get(e.codePointAt(0))||n.L}var h,f,p;function d(e,t){var n,r=0,i=new Map,o=t&&new Map;return e.split(",").forEach((function e(a){if(-1!==a.indexOf("+"))for(var s=+a;s--;)e(n);else{n=a;var l=a.split(">"),c=l[0],u=l[1];c=String.fromCodePoint(r+=parseInt(c,36)),u=String.fromCodePoint(r+=parseInt(u,36)),i.set(c,u),t&&o.set(u,c)}})),{map:i,reverseMap:o}}function m(){if(!h){var e=d("14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",!0),t=e.map,n=e.reverseMap;h=t,f=n,p=d("6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye",!1).map}}function g(e){return m(),h.get(e)||null}function y(e){return m(),f.get(e)||null}function v(e){return m(),p.get(e)||null}var b,_=n.L,x=n.R,A=n.EN,w=n.ES,C=n.ET,E=n.AN,S=n.CS,T=n.B,B=n.S,k=n.ON,M=n.BN,P=n.NSM,I=n.AL,O=n.LRO,D=n.RLO,z=n.LRE,L=n.RLE,R=n.PDF,F=n.LRI,U=n.RLI,N=n.FSI,j=n.PDI;function V(e){return function(){if(!b){var e=d("14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",!0),t=e.map;e.reverseMap.forEach((function(e,n){t.set(n,e)})),b=t}}(),b.get(e)||null}function G(e,t,n,r){var i=e.length;n=Math.max(0,null==n?0:+n),r=Math.min(i-1,null==r?i-1:+r);var o=[];return t.paragraphs.forEach((function(i){var a=Math.max(n,i.start),s=Math.min(r,i.end);if(a<s){for(var c=t.levels.slice(a,s+1),h=s;h>=a&&u(e[h])&l;h--)c[h]=i.level;for(var f=i.level,p=1/0,d=0;d<c.length;d++){var m=c[d];m>f&&(f=m),m<p&&(p=1|m)}for(var g=f;g>=p;g--)for(var y=0;y<c.length;y++)if(c[y]>=g){for(var v=y;y+1<c.length&&c[y+1]>=g;)y++;y>v&&o.push([v+n,y+n])}}})),o}function q(e,t,n,r){for(var i=G(e,t,n,r),o=[],a=0;a<e.length;a++)o[a]=a;return i.forEach((function(e){for(var t=e[0],n=e[1],r=o.slice(t,n+1),i=r.length;i--;)o[n-i]=r[i]})),o}return e.closingToOpeningBracket=y,e.getBidiCharType=u,e.getBidiCharTypeName=function(e){return r[u(e)]},e.getCanonicalBracket=v,e.getEmbeddingLevels=function(e,t){for(var n=new Uint32Array(e.length),r=0;r<e.length;r++)n[r]=u(e[r]);var c=new Map;function h(e,t){var r=n[e];n[e]=t,c.set(r,c.get(r)-1),r&a&&c.set(a,c.get(a)-1),c.set(t,(c.get(t)||0)+1),t&a&&c.set(a,(c.get(a)||0)+1)}for(var f=new Uint8Array(e.length),p=new Map,d=[],m=null,b=0;b<e.length;b++)m||d.push(m={start:b,end:e.length-1,level:"rtl"===t?1:"ltr"===t?0:jt(b,!1)}),n[b]&T&&(m.end=b,m=null);for(var V=L|z|D|O|i|j|R|T,G=function(e){return e+(1&e?1:2)},q=function(e){return e+(1&e?2:1)},W=0;W<d.length;W++){var H=[{_level:(m=d[W]).level,_override:0,_isolate:0}],$=void 0,X=0,Z=0,Y=0;c.clear();for(var K=m.start;K<=m.end;K++){var J=n[K];if($=H[H.length-1],c.set(J,(c.get(J)||0)+1),J&a&&c.set(a,(c.get(a)||0)+1),J&V)if(J&(L|z)){f[K]=$._level;var Q=(J===L?q:G)($._level);Q<=125&&!X&&!Z?H.push({_level:Q,_override:0,_isolate:0}):X||Z++}else if(J&(D|O)){f[K]=$._level;var ee=(J===D?q:G)($._level);ee<=125&&!X&&!Z?H.push({_level:ee,_override:J&D?x:_,_isolate:0}):X||Z++}else if(J&i){J&N&&(J=1===jt(K+1,!0)?U:F),f[K]=$._level,$._override&&h(K,$._override);var te=(J===U?q:G)($._level);te<=125&&0===X&&0===Z?(Y++,H.push({_level:te,_override:0,_isolate:1,_isolInitIndex:K})):X++}else if(J&j){if(X>0)X--;else if(Y>0){for(Z=0;!H[H.length-1]._isolate;)H.pop();var ne=H[H.length-1]._isolInitIndex;null!=ne&&(p.set(ne,K),p.set(K,ne)),H.pop(),Y--}$=H[H.length-1],f[K]=$._level,$._override&&h(K,$._override)}else J&R?(0===X&&(Z>0?Z--:!$._isolate&&H.length>1&&(H.pop(),$=H[H.length-1])),f[K]=$._level):J&T&&(f[K]=m.level);else f[K]=$._level,$._override&&J!==M&&h(K,$._override)}for(var re=[],ie=null,oe=m.start;oe<=m.end;oe++){var ae=n[oe];if(!(ae&s)){var se=f[oe],le=ae&i,ce=ae===j;ie&&se===ie._level?(ie._end=oe,ie._endsWithIsolInit=le):re.push(ie={_start:oe,_end:oe,_level:se,_startsWithPDI:ce,_endsWithIsolInit:le})}}for(var ue=[],he=0;he<re.length;he++){var fe=re[he];if(!fe._startsWithPDI||fe._startsWithPDI&&!p.has(fe._start)){for(var pe=[ie=fe],de=void 0;ie&&ie._endsWithIsolInit&&null!=(de=p.get(ie._end));)for(var me=he+1;me<re.length;me++)if(re[me]._start===de){pe.push(ie=re[me]);break}for(var ge=[],ye=0;ye<pe.length;ye++)for(var ve=pe[ye],be=ve._start;be<=ve._end;be++)ge.push(be);for(var _e=f[ge[0]],xe=m.level,Ae=ge[0]-1;Ae>=0;Ae--)if(!(n[Ae]&s)){xe=f[Ae];break}var we=ge[ge.length-1],Ce=f[we],Ee=m.level;if(!(n[we]&i))for(var Se=we+1;Se<=m.end;Se++)if(!(n[Se]&s)){Ee=f[Se];break}ue.push({_seqIndices:ge,_sosType:Math.max(xe,_e)%2?x:_,_eosType:Math.max(Ee,Ce)%2?x:_})}}for(var Te=0;Te<ue.length;Te++){var Be=ue[Te],ke=Be._seqIndices,Me=Be._sosType,Pe=Be._eosType;if(c.get(P))for(var Ie=0;Ie<ke.length;Ie++){var Oe=ke[Ie];if(n[Oe]&P){for(var De=Me,ze=Ie-1;ze>=0;ze--)if(!(n[ke[ze]]&s)){De=n[ke[ze]];break}h(Oe,De&(i|j)?k:De)}}if(c.get(A))for(var Le=0;Le<ke.length;Le++){var Re=ke[Le];if(n[Re]&A)for(var Fe=Le-1;Fe>=-1;Fe--){var Ue=-1===Fe?Me:n[ke[Fe]];if(Ue&o){Ue===I&&h(Re,E);break}}}if(c.get(I))for(var Ne=0;Ne<ke.length;Ne++){var je=ke[Ne];n[je]&I&&h(je,x)}if(c.get(w)||c.get(S))for(var Ve=1;Ve<ke.length-1;Ve++){var Ge=ke[Ve];if(n[Ge]&(w|S)){for(var qe=0,We=0,He=Ve-1;He>=0&&(qe=n[ke[He]])&s;He--);for(var $e=Ve+1;$e<ke.length&&(We=n[ke[$e]])&s;$e++);qe===We&&(n[Ge]===w?qe===A:qe&(A|E))&&h(Ge,qe)}}if(c.get(A))for(var Xe=0;Xe<ke.length;Xe++){var Ze=ke[Xe];if(n[Ze]&A){for(var Ye=Xe-1;Ye>=0&&n[ke[Ye]]&(C|s);Ye--)h(ke[Ye],A);for(var Ke=Xe+1;Ke<ke.length&&n[ke[Ke]]&(C|s);Ke++)h(ke[Ke],A)}}if(c.get(C)||c.get(w)||c.get(S))for(var Je=0;Je<ke.length;Je++){var Qe=ke[Je];if(n[Qe]&(C|w|S)){h(Qe,k);for(var et=Je-1;et>=0&&n[ke[et]]&s;et--)h(ke[et],k);for(var tt=Je+1;tt<ke.length&&n[ke[tt]]&s;tt++)h(ke[tt],k)}}if(c.get(A))for(var nt=0,rt=Me;nt<ke.length;nt++){var it=ke[nt],ot=n[it];ot&A?rt===_&&h(it,_):ot&o&&(rt=ot)}if(c.get(a)){for(var at=x|A|E,st=at|_,lt=[],ct=[],ut=0;ut<ke.length;ut++)if(n[ke[ut]]&a){var ht=e[ke[ut]],ft=void 0;if(null!==g(ht)){if(!(ct.length<63))break;ct.push({char:ht,seqIndex:ut})}else if(null!==(ft=y(ht)))for(var pt=ct.length-1;pt>=0;pt--){var dt=ct[pt].char;if(dt===ft||dt===y(v(ht))||g(v(dt))===ht){lt.push([ct[pt].seqIndex,ut]),ct.length=pt;break}}}lt.sort((function(e,t){return e[0]-t[0]}));for(var mt=0;mt<lt.length;mt++){for(var gt=lt[mt],yt=gt[0],vt=gt[1],bt=!1,_t=0,xt=yt+1;xt<vt;xt++){var At=ke[xt];if(n[At]&st){bt=!0;var wt=n[At]&at?x:_;if(wt===Gt(At)){_t=wt;break}}}if(bt&&!_t){_t=Me;for(var Ct=yt-1;Ct>=0;Ct--){var Et=ke[Ct];if(n[Et]&st){var St=n[Et]&at?x:_;_t=St!==Gt(Et)?St:Gt(Et);break}}}if(_t){if(n[ke[yt]]=n[ke[vt]]=_t,_t!==Gt(ke[yt]))for(var Tt=yt+1;Tt<ke.length;Tt++)if(!(n[ke[Tt]]&s)){u(e[ke[Tt]])&P&&(n[ke[Tt]]=_t);break}if(_t!==Gt(ke[vt]))for(var Bt=vt+1;Bt<ke.length;Bt++)if(!(n[ke[Bt]]&s)){u(e[ke[Bt]])&P&&(n[ke[Bt]]=_t);break}}}for(var kt=0;kt<ke.length;kt++)if(n[ke[kt]]&a){for(var Mt=kt,Pt=kt,It=Me,Ot=kt-1;Ot>=0;Ot--){if(!(n[ke[Ot]]&s)){It=n[ke[Ot]]&at?x:_;break}Mt=Ot}for(var Dt=Pe,zt=kt+1;zt<ke.length;zt++){if(!(n[ke[zt]]&(a|s))){Dt=n[ke[zt]]&at?x:_;break}Pt=zt}for(var Lt=Mt;Lt<=Pt;Lt++)n[ke[Lt]]=It===Dt?It:Gt(ke[Lt]);kt=Pt}}}for(var Rt=m.start;Rt<=m.end;Rt++){var Ft=f[Rt],Ut=n[Rt];if(1&Ft?Ut&(_|A|E)&&f[Rt]++:Ut&x?f[Rt]++:Ut&(E|A)&&(f[Rt]+=2),Ut&s&&(f[Rt]=0===Rt?m.level:f[Rt-1]),Rt===m.end||u(e[Rt])&(B|T))for(var Nt=Rt;Nt>=0&&u(e[Nt])&l;Nt--)f[Nt]=m.level}}return{levels:f,paragraphs:d};function jt(t,r){for(var o=t;o<e.length;o++){var a=n[o];if(a&(x|I))return 1;if(a&(T|_)||r&&a===j)return 0;if(a&i){var s=Vt(o);o=-1===s?e.length:s}}return 0}function Vt(t){for(var r=1,o=t+1;o<e.length;o++){var a=n[o];if(a&T)break;if(a&j){if(0==--r)return o}else a&i&&r++}return-1}function Gt(e){return 1&f[e]?x:_}},e.getMirroredCharacter=V,e.getMirroredCharactersMap=function(e,t,n,r){var i=e.length;n=Math.max(0,null==n?0:+n),r=Math.min(i-1,null==r?i-1:+r);for(var o=new Map,a=n;a<=r;a++)if(1&t[a]){var s=V(e[a]);null!==s&&o.set(a,s)}return o},e.getReorderSegments=G,e.getReorderedIndices=q,e.getReorderedString=function(e,t,n,r){var i=q(e,t,n,r),o=[].concat(e);return i.forEach((function(n,r){o[r]=(1&t.levels[n]?V(e[n]):null)||e[n]})),o.join("")},e.openingToClosingBracket=g,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return e}],init(e,t,n,r){const{defaultFontURL:i}=e;return n(t,r(),{defaultFontURL:i})}}),pR=ML({name:"Typesetter",dependencies:[fR],init:e=>function(t){return new Promise((n=>{e.typeset(t,n)}))},getTransferables(e){const t=[e.glyphPositions.buffer,e.glyphIds.buffer];return e.caretPositions&&t.push(e.caretPositions.buffer),e.glyphColors&&t.push(e.glyphColors.buffer),t}}),dR={},mR="aTroikaGlyphIndex";class gR extends o.L5s{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new o.aLr,this.boundingBox=new o.ZzF}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const t=this.getIndex().count;this.setDrawRange(e===o._Li?t/2:0,e===o.ehD?t:t/2)}set detail(e){if(e!==this._detail){this._detail=e,("number"!=typeof e||e<1)&&(e=1);let t=function(e){let t=dR[e];if(!t){const n=new o._12(1,1,e,e),r=n.clone(),i=n.attributes,a=r.attributes,s=new o.u9r,l=i.uv.count;for(let e=0;e<l;e++)a.position.array[3*e]*=-1,a.normal.array[3*e+2]*=-1;["position","normal","uv"].forEach((e=>{s.setAttribute(e,new o.a$l([...i[e].array,...a[e].array],i[e].itemSize))})),s.setIndex([...n.index.array,...r.index.array.map((e=>e+l))]),s.translate(.5,.5,0),t=dR[e]=s}return t}(e);["position","normal","uv"].forEach((e=>{this.attributes[e]=t.attributes[e].clone()})),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,n,r,i){yR(this,"aTroikaGlyphBounds",e,4),yR(this,mR,t,1),yR(this,"aTroikaGlyphColor",i,3),this._blockBounds=n,this._chunkedBounds=r,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:n}=this;if(t){const{PI:r,floor:i,min:o,max:a,sin:s,cos:l}=Math,c=r/2,u=2*r,h=Math.abs(t),f=e[0]/h,p=e[2]/h,d=i((f+c)/u)!==i((p+c)/u)?-h:o(s(f)*h,s(p)*h),m=i((f-c)/u)!==i((p-c)/u)?h:a(s(f)*h,s(p)*h),g=i((f+r)/u)!==i((p+r)/u)?2*h:a(h-l(f)*h,h-l(p)*h);n.min.set(d,e[1],t<0?-g:0),n.max.set(m,e[3],t<0?0:g)}else n.min.set(e[0],e[1],0),n.max.set(e[2],e[3],0);n.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(mR).count,n=this._chunkedBounds;if(n)for(let r=n.length;r--;){t=n[r].end;let i=n[r].rect;if(i[1]<e.w&&i[3]>e.y&&i[0]<e.z&&i[2]>e.x)break}this.instanceCount=t}}function yR(e,t,n,r){const i=e.getAttribute(t);n?i&&i.array.length===n.length?(i.array.set(n),i.needsUpdate=!0):(e.setAttribute(t,new o.lb7(n,r)),delete e._maxInstanceCount,e.dispose()):i&&e.deleteAttribute(t)}const vR=new o.vBJ({color:16777215,side:o.ehD,transparent:!0}),bR=8421504,_R=new o.yGw,xR=new o.Pa4,AR=new o.Pa4,wR=[],CR=new o.Pa4,ER="+x+y";function SR(e){return Array.isArray(e)?e[0]:e}let TR=()=>{const e=new o.Kj0(new o._12(1,1),vR);return TR=()=>e,e},BR=()=>{const e=new o.Kj0(new o._12(1,1,32,1),vR);return BR=()=>e,e};const kR={type:"syncstart"},MR={type:"synccomplete"},PR=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],IR=PR.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class OR extends o.Kj0{constructor(){super(new gR,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=bR,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=ER,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(kR),function(e,t){aR=!0,e=function(e,t){for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}({},e);const n=sR();if(e.font=function(e){return uR||(uR="undefined"==typeof document?{}:document.createElement("a")),uR.href=e,uR.href}(e.font||iR.defaultFontURL),e.text=""+e.text,e.sdfGlyphSize=e.sdfGlyphSize||iR.sdfGlyphSize,null!=e.colorRanges){let t={};for(let n in e.colorRanges)if(e.colorRanges.hasOwnProperty(n)){let r=e.colorRanges[n];"number"!=typeof r&&(r=oR.set(r).getHex()),t[n]=r}e.colorRanges=t}Object.freeze(e);const{textureWidth:r,sdfExponent:i}=iR,{sdfGlyphSize:a}=e,s=r/a*4;let l=lR[a];if(!l){const e=document.createElement("canvas");e.width=r,e.height=256*a/s,l=lR[a]={glyphCount:0,sdfGlyphSize:a,sdfCanvas:e,sdfTexture:new o.xEZ(e,void 0,void 0,void 0,o.wem,o.wem),contextLost:!1,glyphsByFont:new Map},l.sdfTexture.generateMipmaps=!1,function(e){const t=e.sdfCanvas;t.addEventListener("webglcontextlost",(t=>{console.log("Context Lost",t),t.preventDefault(),e.contextLost=!0})),t.addEventListener("webglcontextrestored",(t=>{console.log("Context Restored",t),e.contextLost=!1;const n=[];e.glyphsByFont.forEach((t=>{t.forEach((t=>{n.push(cR(t,e,!0))}))})),Promise.all(n).then((()=>{hR(e),e.sdfTexture.needsUpdate=!0}))}))}(l)}const{sdfTexture:c,sdfCanvas:u}=l;let h=l.glyphsByFont.get(e.font);h||l.glyphsByFont.set(e.font,h=new Map),pR(e).then((o=>{const{glyphIds:f,glyphPositions:p,fontSize:d,unitsPerEm:m,timings:g}=o,y=[],v=new Float32Array(4*f.length),b=d/m;let _=0,x=0;const A=sR();f.forEach(((e,t)=>{let n=h.get(e);if(!n){const{path:t,pathBounds:r}=o.glyphData[e],i=Math.max(r[2]-r[0],r[3]-r[1])/a*(iR.sdfMargin*a+.5),s=l.glyphCount++,c=[r[0]-i,r[1]-i,r[2]+i,r[3]+i];h.set(e,n={path:t,atlasIndex:s,sdfViewBox:c}),y.push(n)}const{sdfViewBox:r}=n,i=p[x++],s=p[x++];v[_++]=i+r[0]*b,v[_++]=s+r[1]*b,v[_++]=i+r[2]*b,v[_++]=s+r[3]*b,f[t]=n.atlasIndex})),g.quads=(g.quads||0)+(sR()-A);const w=sR();g.sdf={};const C=u.height,E=Math.ceil(l.glyphCount/s),S=Math.pow(2,Math.ceil(Math.log2(E*a)));S>C&&(console.info(`Increasing SDF texture size ${C}->${S}`),nR(u,r,S),c.dispose()),Promise.all(y.map((t=>cR(t,l,e.gpuAccelerateSDF).then((({timing:e})=>{g.sdf[t.atlasIndex]=e}))))).then((()=>{y.length&&!l.contextLost&&(hR(l),c.needsUpdate=!0),g.sdfTotal=sR()-w,g.total=sR()-n,t(Object.freeze({parameters:e,sdfTexture:c,sdfGlyphSize:a,sdfExponent:i,glyphBounds:v,glyphAtlasIndices:f,glyphColors:o.glyphColors,caretPositions:o.caretPositions,caretHeight:o.caretHeight,chunkedBounds:o.chunkedBounds,ascender:o.ascender,descender:o.descender,lineHeight:o.lineHeight,capHeight:o.capHeight,xHeight:o.xHeight,topBaseline:o.topBaseline,blockBounds:o.blockBounds,visibleBounds:o.visibleBounds,timings:o.timings}))}))})),Promise.resolve().then((()=>{var e;l.contextLost||(e=u)._warm||(XL.webgl.isSupported(e),e._warm=!0)}))}({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},(t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const n=this._queuedSyncs;n&&(this._queuedSyncs=null,this._needsSync=!0,this.sync((()=>{n.forEach((e=>e&&e()))}))),this.dispatchEvent(MR),e&&e()}))))}onBeforeRender(e,t,n,r,i,a){this.sync(),i.isTroikaTextMaterial&&this._prepareForRender(i),i._hadOwnSide=i.hasOwnProperty("side"),this.geometry.setSide(i._actualSide=i.side),i.side=o.Wl3}onAfterRender(e,t,n,r,i,o){i._hadOwnSide?i.side=i._actualSide:delete i.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=vR.clone());if(e&&e.baseMaterial===t||(e=this._derivedMaterial=function(e){const t=VL(e,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new o.FM8},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new o.Ltg(0,0,0,0)},uTroikaClipRect:{value:new o.Ltg(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new o.FM8},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new o.Ilk},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new o.Vkp},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:"\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform vec4 uTroikaTotalBounds;\nuniform vec4 uTroikaClipRect;\nuniform mat3 uTroikaOrient;\nuniform bool uTroikaUseGlyphColors;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaBlurRadius;\nuniform vec2 uTroikaPositionOffset;\nuniform float uTroikaCurveRadius;\nattribute vec4 aTroikaGlyphBounds;\nattribute float aTroikaGlyphIndex;\nattribute vec3 aTroikaGlyphColor;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec3 vTroikaGlyphColor;\nvarying vec2 vTroikaGlyphDimensions;\n",vertexTransform:"\nvec4 bounds = aTroikaGlyphBounds;\nbounds.xz += uTroikaPositionOffset.x;\nbounds.yw -= uTroikaPositionOffset.y;\n\nvec4 outlineBounds = vec4(\n  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,\n  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius\n);\nvec4 clippedBounds = vec4(\n  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),\n  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)\n);\n\nvec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);\n\nposition.xy = mix(bounds.xy, bounds.zw, clippedXY);\n\nuv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);\n\nfloat rad = uTroikaCurveRadius;\nif (rad != 0.0) {\n  float angle = position.x / rad;\n  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);\n  normal.xz = vec2(sin(angle), cos(angle));\n}\n  \nposition = uTroikaOrient * position;\nnormal = uTroikaOrient * normal;\n\nvTroikaGlyphUV = clippedXY.xy;\nvTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);\n\n\nfloat txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;\nvec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;\nvec2 txStartUV = txUvPerSquare * vec2(\n  mod(floor(aTroikaGlyphIndex / 4.0), txCols),\n  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)\n);\nvTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);\nvTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);\n",fragmentDefs:"\nuniform sampler2D uTroikaSDFTexture;\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform float uTroikaSDFExponent;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaFillOpacity;\nuniform float uTroikaOutlineOpacity;\nuniform float uTroikaBlurRadius;\nuniform vec3 uTroikaStrokeColor;\nuniform float uTroikaStrokeWidth;\nuniform float uTroikaStrokeOpacity;\nuniform bool uTroikaSDFDebug;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec2 vTroikaGlyphDimensions;\n\nfloat troikaSdfValueToSignedDistance(float alpha) {\n  // Inverse of exponential encoding in webgl-sdf-generator\n  \n  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);\n  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;\n  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);\n  return signedDist;\n}\n\nfloat troikaGlyphUvToSdfValue(vec2 glyphUV) {\n  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);\n  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);\n  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1\n  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;\n}\n\nfloat troikaGlyphUvToDistance(vec2 uv) {\n  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));\n}\n\nfloat troikaGetAADist() {\n  \n  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300\n  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;\n  #else\n  return vTroikaGlyphDimensions.x / 64.0;\n  #endif\n}\n\nfloat troikaGetFragDistValue() {\n  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);\n  float distance = troikaGlyphUvToDistance(clampedGlyphUV);\n \n  // Extrapolate distance when outside bounds:\n  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : \n    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);\n\n  \n\n  return distance;\n}\n\nfloat troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {\n  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)\n  float alpha = step(-distanceOffset, -distance);\n  #else\n\n  float alpha = smoothstep(\n    distanceOffset + aaDist,\n    distanceOffset - aaDist,\n    distance\n  );\n  #endif\n\n  return alpha;\n}\n",fragmentColorTransform:"\nfloat aaDist = troikaGetAADist();\nfloat fragDistance = troikaGetFragDistValue();\nfloat edgeAlpha = uTroikaSDFDebug ?\n  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :\n  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));\n\n#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)\nvec4 fillRGBA = gl_FragColor;\nfillRGBA.a *= uTroikaFillOpacity;\nvec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);\nif (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;\ngl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(\n  -uTroikaStrokeWidth - aaDist,\n  -uTroikaStrokeWidth + aaDist,\n  fragDistance\n));\ngl_FragColor.a *= edgeAlpha;\n#endif\n\nif (edgeAlpha == 0.0) {\n  discard;\n}\n",customRewriter({vertexShader:e,fragmentShader:t}){let n=/\buniform\s+vec3\s+diffuse\b/;return n.test(t)&&(t=t.replace(n,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),n.test(e)||(e=e.replace(DL,"uniform vec3 diffuse;\n$&\nvTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;\n"))),{vertexShader:e,fragmentShader:t}}});return t.transparent=!0,Object.defineProperties(t,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),t}(t),t.addEventListener("dispose",(function n(){t.removeEventListener("dispose",n),e.dispose()}))),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let t=e._outlineMtl;return t||(t=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),t.isTextOutlineMaterial=!0,t.depthWrite=!1,t.map=null,e.addEventListener("dispose",(function n(){e.removeEventListener("dispose",n),t.dispose()}))),[t,e]}return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return SR(this.material).getDepthMaterial()}get customDistanceMaterial(){return SR(this.material).getDistanceMaterial()}_prepareForRender(e){const t=e.isTextOutlineMaterial,n=e.uniforms,r=this.textRenderInfo;if(r){const{sdfTexture:e,blockBounds:i}=r;n.uTroikaSDFTexture.value=e,n.uTroikaSDFTextureSize.value.set(e.image.width,e.image.height),n.uTroikaSDFGlyphSize.value=r.sdfGlyphSize,n.uTroikaSDFExponent.value=r.sdfExponent,n.uTroikaTotalBounds.value.fromArray(i),n.uTroikaUseGlyphColors.value=!t&&!!r.glyphColors;let o,a,s,l=0,c=0,u=0,h=0,f=0;if(t){let{outlineWidth:e,outlineOffsetX:t,outlineOffsetY:n,outlineBlur:r,outlineOpacity:i}=this;l=this._parsePercent(e)||0,c=Math.max(0,this._parsePercent(r)||0),o=i,h=this._parsePercent(t)||0,f=this._parsePercent(n)||0}else u=Math.max(0,this._parsePercent(this.strokeWidth)||0),u&&(s=this.strokeColor,n.uTroikaStrokeColor.value.set(null==s?bR:s),a=this.strokeOpacity,null==a&&(a=1)),o=this.fillOpacity;n.uTroikaDistanceOffset.value=l,n.uTroikaPositionOffset.value.set(h,f),n.uTroikaBlurRadius.value=c,n.uTroikaStrokeWidth.value=u,n.uTroikaStrokeOpacity.value=a,n.uTroikaFillOpacity.value=null==o?1:o,n.uTroikaCurveRadius.value=this.curveRadius||0;let p=this.clipRect;if(p&&Array.isArray(p)&&4===p.length)n.uTroikaClipRect.value.fromArray(p);else{const e=100*(this.fontSize||.1);n.uTroikaClipRect.value.set(i[0]-e,i[1]-e,i[2]+e,i[3]+e)}this.geometry.applyClipRect(n.uTroikaClipRect.value)}n.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const i=t?this.outlineColor||0:this.color;if(null==i)delete e.color;else{const t=e.hasOwnProperty("color")?e.color:e.color=new o.Ilk;i===t._input&&"object"!=typeof i||t.set(t._input=i)}let a=this.orientation||ER;if(a!==e._orientation){let t=n.uTroikaOrient.value;a=a.replace(/[^-+xyz]/g,"");let r=a!==ER&&a.match(/^([-+])([xyz])([-+])([xyz])$/);if(r){let[,e,n,i,o]=r;xR.set(0,0,0)[n]="-"===e?1:-1,AR.set(0,0,0)[o]="-"===i?-1:1,_R.lookAt(CR,xR.cross(AR),AR),t.setFromMatrix4(_R)}else t.identity();e._orientation=a}}_parsePercent(e){if("string"==typeof e){let t=e.match(/^(-?[\d.]+)%$/),n=t?parseFloat(t[1]):NaN;e=(isNaN(n)?0:n/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new o.FM8){t.copy(e);const n=this.curveRadius;return n&&(t.x=Math.atan2(e.x,Math.abs(n)-Math.abs(e.z))*Math.abs(n)),t}worldPositionToTextCoords(e,t=new o.FM8){return xR.copy(e),this.localPositionToTextCoords(this.worldToLocal(xR),t)}raycast(e,t){const{textRenderInfo:n,curveRadius:r}=this;if(n){const i=n.blockBounds,o=r?BR():TR(),a=o.geometry,{position:s,uv:l}=a.attributes;for(let e=0;e<l.count;e++){let t=i[0]+l.getX(e)*(i[2]-i[0]);const n=i[1]+l.getY(e)*(i[3]-i[1]);let o=0;r&&(o=r-Math.cos(t/r)*r,t=Math.sin(t/r)*r),s.setXYZ(e,t,n,o)}a.boundingSphere=this.geometry.boundingSphere,a.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,wR.length=0,o.raycast(e,wR);for(let e=0;e<wR.length;e++)wR[e].object=this,t.push(wR[e])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,IR.forEach((t=>{this[t]=e[t]})),this}clone(){return(new this.constructor).copy(this)}}function DR(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}PR.forEach((e=>{const t="_private_"+e;Object.defineProperty(OR.prototype,e,{get(){return this[t]},set(e){e!==this[t]&&(this[t]=e,this._needsSync=!0)}})})),new WeakMap,new WeakMap,window.app_version=xL.t;var zR=window.location;zR.protocol,zR.host,""!==zR.port&&zR.port,"/"!==zR.pathname&&zR.pathname,nL="loader",hL();var LR={show_stats:!1};window.lunaLaunchControl=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n,r,i,s,c,u,h,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=function(){window.layer_lightning;var e=s.map.getBounds();e.getNorthWest(),e.getSouthEast(),(new Date).getTime()},console.log("Luna Launch Control booting with provider="+t),console.log("Loading FontAwesome"),e.next=5,document.fonts.load("900 48px FontAwesome");case 5:return console.log("Loaded FontAwesome"),console.log("Loading BaseMapMapbox"),e.next=9,Promise.resolve().then(a.bind(a,59848));case 9:n=e.sent,r=n.default,console.log("Loaded BaseMap"),console.log(r),console.log("Instantiate BaseMapMapbox"),i=new r({mapBoxAccessToken:"pk.eyJ1IjoiYmljdWJpYyIsImEiOiJjaW1yaXJra3gwMTE3djlrazNjaGlubDA4In0.NwmyTomCSijLB5FbQHE_rw",mapboxStyle:"mapbox://styles/bicubic/ciwwzdmym00i52pnx6kytgkkv"}),console.log("BaseMap is ",i),window.baseMap=i,s=new B("map-div",i),window.luna=s,window.textures={},(u=new qn(s,25)).on("update",(function(e){c()})),s.registerUpdateCallback=function(e){console.log("map.registerUpdateCallback:: updateCallbackFunc registered"),f=e},s.updateLayerName=function(e,t){t&&e&&e.metadata&&e.metadata.friendlyName&&(e.metadata.friendlyName=t)},s.updateSelectedObjectId=function(e,t){console.log("map.updateSelectObjectIdData::selected object id=",t,e);var n=s.getLayerByName(e.Name);n&&t&&n.onPointPicked(t)},s.updateAnnotationsData=function(e,t){var n=s.getLayerByName(e.Name);t.collection.models.forEach((function(e){var t=e.attributes.id,r=e.attributes.anno;n.updateAnnotationForId(t,r)}))},s.updateTooltipsData=function(e,t){var n=s.getLayerByName(e.Name);t.collection.models.forEach((function(e){var t=e.attributes.id,r=e.attributes.anno;n.updateTooltipForId(t,r)}))},s.updateData=function(e,t,n){var r=s.getLayerByName(e.Name);if(n){for(var i in r.stack.times)delete r.stack.times[i];for(var i in r.stack.arrays)delete r.stack.arrays[i];for(var i in r.stack.textures)delete r.stack.textures[i]}var a=t.collection.models;console.log("map.updateData::processing "+a.length+" models",a),a.forEach((function(e){console.log("map.updateData::processing a model",e);var t=e.attributes.time.i?e.attributes.time.i:1e3*e.attributes.time,n=e.attributes.blob;console.log("map.updateData::t="+t);var i,a=n.length;console.log("map.updateData::blob is "+n.length+" bytes");var s=n.length/4/4;console.log("map.updateData::blob contains "+s+" objects"),s>16384&&console.log("map.updateData::blob # objects exceeds max_objects=16384");var c=new ArrayBuffer(262144),u=new Uint8Array(c);for(i=0;i<a;i++)u[i]=n[i];var f=new Float32Array(c),p=l(128,128,f,{format:o.wk1,type:o.VzW}),d=Object.keys(r.stack.arrays).length;r.stack.times[d]=t,r.stack.arrays[d]=f,r.stack.textures[d]=p;var m=!1;if((window.performance&&window.performance.memory.totalJSHeapSize>window.performance.memory.jsHeapSizeLimit||!window.performance&&128*r.stack.times.length*128*4*4>1e9)&&(m=!0),m){console.log("memory pressure, ablating timeline",window.performance.memory);var g=int(r.stack.times.length/2);r.stack.times.splice(0,g),r.stack.arrays.splice(0,g),r.stack.textures.splice(0,g)}var y=Object.values(r.stack.times),v=Math.min.apply(Math,y),b=Math.max.apply(Math,y);if(v&&b&&b>v){h.dispatch("setTimesliderRange",{start:new Date(v),end:new Date(b)});var _=h.store.getState().timeslider.percent;h.dispatch("setTimesliderPercent",{percent:_}),window.requestAnimationFrame((function(){r.updatePointMesh(_)})),r.updatePointMesh(0)}}))},s.loadLayer=function(e,t,n,r,i,a,l){var c;switch(t){case"LineSegment":c=new En.LineSegmentLayer(L.fromPath(s,n)),s.updateLayerName(c,e),s.addLayer(c);break;case"Election":c=new En.ElectionLayer(L.fromPath(s,n)),s.updateLayerName(c,e),s.addLayer(c);break;case"DSLAM":c=new En.DSLAMLayer(L.fromPath(s,n)),s.updateLayerName(c,e),s.addLayer(c);break;case"NAC":c=new En.NACLayer(L.fromPath(s,n)),s.updateLayerName(c,e),s.addLayer(c);break;case"AVC":c=new En.AVCLayer(L.fromPath(s,n)),s.updateLayerName(c,e),s.addLayer(c);break;case"Polygon":c=new En.PolygonLayer(L.fromPath(s,n)),s.updateLayerName(c,e),s.addLayer(c);break;case"Points":console.log("Points received arg1="+r);for(var p=r.split(","),d=parseInt(p[0]),m=parseInt(p[1]),g=parseInt(p[2]),y=new Float32Array(4*g),v=0;v<g;v++){var b=4*v;y[b]=0,y[b+1]=0,y[b+2]=0,y[b+3]=1}var _=new Ln,x=new o.IEO(y,d,m,o.Y8D,o.VzW);x.needsUpdate=!0,x.generateMipmaps=!1,c=new En.VTFLayer(null,window.pointMesh,_,"",i,l),s.updateLayerName(c,e),c.metadata.friendlyName=e,c.scaler=1,c.offset=new o.FM8(0,0),c.style.size=.63,c.on("item-selected",(function(e){f&&f({pick:e})})),s.addLayer(c);var A=new Date;A.setDate(A.getDate()-1);var w=new Date;h.dispatch("setTimesliderRange",{start:A,end:w}),h.dispatch("setTimesliderPercent",{percent:1}),c.updatePointMesh(1),h.on("timeslider.value",(function(e){f&&f({"timeslider.value":e})})),h.on("timeslider.percent",(function(e){c.updatePointMesh(e)})),c.on("ready",(function(){console.log("ready")})),h.dispatch("addLayerProperty",{id:c.id,key:"layer_test",property:{type:"Graphs",label:"SERIES",graphs:{layer_test:{id:"layer_test",path:[]}},start:A,end:w}}),window.inter=0;break;case"Raw":var C=[];console.log("raw received path="+n);var E=/(.*)_(\d+)x(\d+)x(\d+).*/.exec(n);if(!E){f&&f({error:{type:"Error",Error:"Path for type=Raw layer="+e+" does not match filename_NxWxH"}});break}console.log("raw passed regex");var S=0;r&&""!=r&&(S=parseInt(r),isNaN(S)&&(S=0));var T=parseInt(E[2]);S>0&&(T=S);for(var B=parseInt(E[3]),k=parseInt(E[4]),M=0;M<T;M++){var P=M.toString().padStart(4,"0");C.push({url:n+"_"+P+".luna",index:M})}Ln.loadDataStack(s.arrayLoader,C,B,k).then((function(t){console.log("loadDataStack completed"),c=new En.VTFLayer(null,window.pointMesh,t,"",i),s.updateLayerName(c,e),c.scaler=1,c.offset=new o.FM8(0,0),c.style.size=32,s.addLayer(c),h.on("timeslider.percent",(function(e){c.updatePointMesh(e),console.log(e),f&&f({"timeslider.percent":e})})),window.inter=0,c.on("ready",(function(){console.log("ready")}))})).catch((function(t){f&&f({error:{type:"Error",error:"Unable to load layer name="+e+" reason="+t}})}));break;case"Lightning":c=new En.LightningLayer(L.fromPath(s,n)),s.updateLayerName(c,e),s.addLayer(c),c.on("ready",(function(){console.log("lightning ready"),window.layer_lightning=c;var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=c.metadata.timeseries[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,s=new Date(0);s.setUTCSeconds(a.x);var l={x:s,y:a.y};e.push(l)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}window.ts=e,h.dispatch("setTimesliderRange",{start:e[0].x,end:e[e.length-1].x}),h.dispatch("addLayerProperty",{id:c.id,key:"layer_lightning_timeseries",property:{type:"Graphs",label:"SERIES",graphs:{layer_lightning:{id:"layer_lightning",path:e}},start:e[0].x,end:e[e.length-1].x}}),h.dispatch("toggleTimesliderGraph",{id:"layer_lightning",path:e}),h.on("timeslider.play",(function(e){})),h.on("timeslider.playbackrate",(function(e){})),h.on("timeslider.percent",(function(e){c.style.time=e,h.store.getState().timeslider.play,u.update()}))}))}return c},s.on("loadResources",(function(){h=new iL(cC,lC,s,{sio_url:"http://10.1.1.10:3334",sio_url_path:"/socket.io"}),window.app=h,qd.render(Wn.createElement(cd,{store:cC},Wn.createElement(oL,{map:h.map})),document.getElementById("react")),h.on("layers.activeLayer",(function(e){s.setActiveLayerId(e)})),h.on("map.latLng",(function(e){})),window.luna.basemap.map.on("moveend",(function(){if(f){var e=window.luna.basemap.overlay.map.getBounds().getCenter(),t=window.luna.basemap.overlay.map.getZoom(),n=e.lat,r=e.lng;f({lat:n,lng:r,zoom:t})}})),window.textures.lightning=s.textureLoader.load(Sn.lightning),window.textures.glow=s.textureLoader.load(Sn.light_quadratic),window.textures.dot=s.textureLoader.load(Sn.dot2),window.textures.pin=s.textureLoader.load(Sn.node_icon_pin_shaded),window.textures.poly_fill=s.textureLoader.load(Sn.dark_fish_skin),window.textures.sprite=window.textures.dot,window.textures.lookup=s.textureLoader.load(Sn.tm_colormap),window.textures.selector=s.textureLoader.load(Sn.circle);var e=new o.DvJ(1,1,1),t=new o.vBJ({color:"rgb(255,255,255)",transparent:!0});t.map=window.textures.selector,window.cube=new o.Kj0(e,t),s.scene.add(window.cube),window.cube.position.set(234.51708984375,156.13525390625,0),window.cube.scale.set(.15/6,.15/6,.15/6),window.cube.renderOrder=10,window.tooltip=new OR,s.scene.add(window.tooltip),window.tooltip.text="",window.tooltip.anchorX=-.5,window.tooltip.anchorY=-.15,window.tooltip.scale.y=-1,window.tooltip.fontSize=.3,window.tooltip.position.set(234.51708984375,156.13525390625,0),window.tooltip.color=16777215,window.tooltip.sync(),window.anno=new OR,s.scene.add(window.anno),window.anno.text="",window.anno.anchorX=-.5,window.anno.anchorY=-.15,window.anno.scale.y=-1,window.anno.fontSize=.3,window.anno.position.set(234.51708984375,156.13525390625,0),window.anno.color=16777215,window.anno.sync();var n=window.textures.poly_fill;n.wrapT=o.rpg,n.wrapS=o.rpg})),s.on("layer-added",(function(e){console.log("layer-added called"),h.setLayer(e)})),s.on("layer-removed",(function(e){console.log("layer-removed called"),h.removeLayer(e)})),s.on("init",(function(){console.log("map.init")})),s.on("loadProgress",(function(e){fL(e)})),s.on("loadError",(function(e){console.log("loadError",e),f&&f({error:{type:"Error",error:e}})})),s.on("render",(function(){var e=5*window.luna.camera.scale.x;window.cube.scale.set(e,e,e)})),s.start(LR);case 37:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){DR(o,r,i,a,s,"next",e)}function s(e){DR(o,r,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}()})()})();