*** parquet

q)([pq]):use`pq
q)\t a:pq`:mayst.75.1.parquet                                    / open a parquet file. returns a virtual table
q)\t select avg SequenceNumber by Product from a where SequenceNumber<600000 / row group pruning with predicate

supports: type(bool int32 int64 int96 float double byte_array fixed_len_byte_array(2 4 8 16b as hijg))
          logicaltype(string(C) enum(C) uuid(g) int8(h) int16(h) int32(i) int64(j) uint8(x) uint16(i) uint32(j) uint64(j)
                      date(d) time(t) time(n) timestamp(p) interval(n) unknown(c))
          compression(snappy gzip brotli lz4 zstd) encoding(plain dict rle) pagetype(v1 v2) repetition/definition levels

pq returns a virtual table split by row group. RG__ is a hidden virtual column corresponding to row group number

q)f:pq.op`:file  / low level api: open parquet file
q)c:pq.rd[f;0;2] / read column 2 from rowgroup 0

*** changelog

2025.11.17
check pq license flag

2025.11.04
unknown(c)
fix repetition levels w/o dictionary encoding

2025.10.30
logical types
data page v2
added gzip brotli lz4